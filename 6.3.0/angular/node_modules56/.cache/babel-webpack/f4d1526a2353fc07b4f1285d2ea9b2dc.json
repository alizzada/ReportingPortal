{"ast":null,"code":"import _defineProperty from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/createClass\";\n\n/**\r\n * DevExtreme (esm/ui/scheduler/tooltip_strategies/tooltipStrategyBase.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport Button from \"../../button\";\nimport { FunctionTemplate } from \"../../../core/templates/function_template\";\nimport $ from \"../../../core/renderer\";\nimport List from \"../../list/ui.list.edit\";\nvar TOOLTIP_APPOINTMENT_ITEM = \"dx-tooltip-appointment-item\";\nvar TOOLTIP_APPOINTMENT_ITEM_CONTENT = TOOLTIP_APPOINTMENT_ITEM + \"-content\";\nvar TOOLTIP_APPOINTMENT_ITEM_CONTENT_SUBJECT = TOOLTIP_APPOINTMENT_ITEM + \"-content-subject\";\nvar TOOLTIP_APPOINTMENT_ITEM_CONTENT_DATE = TOOLTIP_APPOINTMENT_ITEM + \"-content-date\";\nvar TOOLTIP_APPOINTMENT_ITEM_MARKER = TOOLTIP_APPOINTMENT_ITEM + \"-marker\";\nvar TOOLTIP_APPOINTMENT_ITEM_MARKER_BODY = TOOLTIP_APPOINTMENT_ITEM + \"-marker-body\";\nvar TOOLTIP_APPOINTMENT_ITEM_DELETE_BUTTON_CONTAINER = TOOLTIP_APPOINTMENT_ITEM + \"-delete-button-container\";\nvar TOOLTIP_APPOINTMENT_ITEM_DELETE_BUTTON = TOOLTIP_APPOINTMENT_ITEM + \"-delete-button\";\nexport var TooltipStrategyBase = /*#__PURE__*/function () {\n  function TooltipStrategyBase(options) {\n    _classCallCheck(this, TooltipStrategyBase);\n\n    this._tooltip = null;\n    this._options = options;\n    this._extraOptions = null;\n  }\n\n  _createClass(TooltipStrategyBase, [{\n    key: \"show\",\n    value: function show(target, dataList, extraOptions) {\n      if (this._canShowTooltip(dataList)) {\n        this.hide();\n        this._extraOptions = extraOptions;\n\n        this._showCore(target, dataList);\n      }\n    }\n  }, {\n    key: \"_showCore\",\n    value: function _showCore(target, dataList) {\n      if (!this._tooltip) {\n        this._tooltip = this._createTooltip(target, dataList);\n      } else {\n        this._shouldUseTarget() && this._tooltip.option(\"target\", target);\n\n        this._list.option(\"dataSource\", dataList);\n      }\n\n      this._prepareBeforeVisibleChanged(dataList);\n\n      this._tooltip.option(\"visible\", true);\n    }\n  }, {\n    key: \"_prepareBeforeVisibleChanged\",\n    value: function _prepareBeforeVisibleChanged(dataList) {}\n  }, {\n    key: \"_getContentTemplate\",\n    value: function _getContentTemplate(dataList) {\n      var _this = this;\n\n      return function (container) {\n        var listElement = $(\"<div>\");\n        $(container).append(listElement);\n        _this._list = _this._createList(listElement, dataList);\n      };\n    }\n  }, {\n    key: \"isAlreadyShown\",\n    value: function isAlreadyShown(target) {\n      if (this._tooltip && this._tooltip.option(\"visible\")) {\n        return this._tooltip.option(\"target\")[0] === target[0];\n      }\n    }\n  }, {\n    key: \"_onShown\",\n    value: function _onShown() {\n      this._list.option(\"focusStateEnabled\", this._extraOptions.focusStateEnabled);\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {}\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      if (this._tooltip) {\n        this._tooltip.option(\"visible\", false);\n      }\n    }\n  }, {\n    key: \"_shouldUseTarget\",\n    value: function _shouldUseTarget() {\n      return true;\n    }\n  }, {\n    key: \"_createTooltip\",\n    value: function _createTooltip() {}\n  }, {\n    key: \"_canShowTooltip\",\n    value: function _canShowTooltip(dataList) {\n      if (!dataList.length) {\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"_createListOption\",\n    value: function _createListOption(dataList) {\n      var _this2 = this;\n\n      return {\n        dataSource: dataList,\n        onContentReady: this._onListRender.bind(this),\n        onItemClick: function onItemClick(e) {\n          return _this2._onListItemClick(e);\n        },\n        itemTemplate: function itemTemplate(item, index) {\n          return _this2._renderTemplate(item.appointment, item.targetedAppointment, index, item.color);\n        },\n        _swipeEnabled: false\n      };\n    }\n  }, {\n    key: \"_onListRender\",\n    value: function _onListRender() {}\n  }, {\n    key: \"_createTooltipElement\",\n    value: function _createTooltipElement(wrapperClass) {\n      return $(\"<div>\").appendTo(this._options.container).addClass(wrapperClass);\n    }\n  }, {\n    key: \"_createList\",\n    value: function _createList(listElement, dataList) {\n      return this._options.createComponent(listElement, List, this._createListOption(dataList));\n    }\n  }, {\n    key: \"_renderTemplate\",\n    value: function _renderTemplate(appointment, targetedAppointment, index, color) {\n      var itemListContent = this._createItemListContent(appointment, targetedAppointment, color);\n\n      this._options.addDefaultTemplates(_defineProperty({}, this._getItemListTemplateName(), new FunctionTemplate(function (options) {\n        var $container = $(options.container);\n        $container.append(itemListContent);\n        return $container;\n      })));\n\n      var template = this._options.getAppointmentTemplate(this._getItemListTemplateName() + \"Template\");\n\n      return this._createFunctionTemplate(template, appointment, targetedAppointment, index);\n    }\n  }, {\n    key: \"_createFunctionTemplate\",\n    value: function _createFunctionTemplate(template, data, targetData, index) {\n      var isEmptyDropDownAppointmentTemplate = this._isEmptyDropDownAppointmentTemplate();\n\n      return new FunctionTemplate(function (options) {\n        return template.render({\n          model: isEmptyDropDownAppointmentTemplate ? {\n            appointmentData: data,\n            targetedAppointmentData: targetData\n          } : data,\n          container: options.container,\n          index: index\n        });\n      });\n    }\n  }, {\n    key: \"_getItemListTemplateName\",\n    value: function _getItemListTemplateName() {\n      return this._isEmptyDropDownAppointmentTemplate() ? \"appointmentTooltip\" : \"dropDownAppointment\";\n    }\n  }, {\n    key: \"_isEmptyDropDownAppointmentTemplate\",\n    value: function _isEmptyDropDownAppointmentTemplate() {\n      return !this._extraOptions.dropDownAppointmentTemplate || \"dropDownAppointment\" === this._extraOptions.dropDownAppointmentTemplate;\n    }\n  }, {\n    key: \"_onListItemClick\",\n    value: function _onListItemClick(e) {\n      this.hide();\n      this._extraOptions.clickEvent && this._extraOptions.clickEvent(e);\n\n      this._options.showAppointmentPopup(e.itemData.appointment, false, e.itemData.targetedAppointment);\n    }\n  }, {\n    key: \"_createItemListContent\",\n    value: function _createItemListContent(appointment, targetedAppointment, color) {\n      var editing = this._extraOptions.editing;\n      var $itemElement = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM);\n      $itemElement.append(this._createItemListMarker(color));\n      $itemElement.append(this._createItemListInfo(this._options.createFormattedDateText(appointment, targetedAppointment)));\n\n      var disabled = this._options.getAppointmentDisabled(appointment);\n\n      if (!disabled && (editing && true === editing.allowDeleting || true === editing)) {\n        $itemElement.append(this._createDeleteButton(appointment, targetedAppointment));\n      }\n\n      return $itemElement;\n    }\n  }, {\n    key: \"_createItemListMarker\",\n    value: function _createItemListMarker(color) {\n      var $marker = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_MARKER);\n      var $markerBody = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_MARKER_BODY);\n      $marker.append($markerBody);\n      color && color.done(function (value) {\n        return $markerBody.css(\"background\", value);\n      });\n      return $marker;\n    }\n  }, {\n    key: \"_createItemListInfo\",\n    value: function _createItemListInfo(object) {\n      var result = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_CONTENT);\n      var $title = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_CONTENT_SUBJECT).text(object.text);\n      var $date = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_CONTENT_DATE).text(object.formatDate);\n      return result.append($title).append($date);\n    }\n  }, {\n    key: \"_createDeleteButton\",\n    value: function _createDeleteButton(appointment, targetedAppointment) {\n      var _this3 = this;\n\n      var $container = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_DELETE_BUTTON_CONTAINER);\n      var $deleteButton = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_DELETE_BUTTON);\n      $container.append($deleteButton);\n\n      this._options.createComponent($deleteButton, Button, {\n        icon: \"trash\",\n        stylingMode: \"text\",\n        onClick: function onClick(e) {\n          _this3.hide();\n\n          e.event.stopPropagation();\n\n          _this3._options.checkAndDeleteAppointment(appointment, targetedAppointment);\n        }\n      });\n\n      return $container;\n    }\n  }]);\n\n  return TooltipStrategyBase;\n}();","map":{"version":3,"sources":["C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/devextreme/esm/ui/scheduler/tooltip_strategies/tooltipStrategyBase.js"],"names":["Button","FunctionTemplate","$","List","TOOLTIP_APPOINTMENT_ITEM","TOOLTIP_APPOINTMENT_ITEM_CONTENT","TOOLTIP_APPOINTMENT_ITEM_CONTENT_SUBJECT","TOOLTIP_APPOINTMENT_ITEM_CONTENT_DATE","TOOLTIP_APPOINTMENT_ITEM_MARKER","TOOLTIP_APPOINTMENT_ITEM_MARKER_BODY","TOOLTIP_APPOINTMENT_ITEM_DELETE_BUTTON_CONTAINER","TOOLTIP_APPOINTMENT_ITEM_DELETE_BUTTON","TooltipStrategyBase","options","_tooltip","_options","_extraOptions","target","dataList","extraOptions","_canShowTooltip","hide","_showCore","_createTooltip","_shouldUseTarget","option","_list","_prepareBeforeVisibleChanged","container","listElement","append","_createList","focusStateEnabled","length","dataSource","onContentReady","_onListRender","bind","onItemClick","e","_onListItemClick","itemTemplate","item","index","_renderTemplate","appointment","targetedAppointment","color","_swipeEnabled","wrapperClass","appendTo","addClass","createComponent","_createListOption","itemListContent","_createItemListContent","addDefaultTemplates","_getItemListTemplateName","$container","template","getAppointmentTemplate","_createFunctionTemplate","data","targetData","isEmptyDropDownAppointmentTemplate","_isEmptyDropDownAppointmentTemplate","render","model","appointmentData","targetedAppointmentData","dropDownAppointmentTemplate","clickEvent","showAppointmentPopup","itemData","editing","$itemElement","_createItemListMarker","_createItemListInfo","createFormattedDateText","disabled","getAppointmentDisabled","allowDeleting","_createDeleteButton","$marker","$markerBody","done","value","css","object","result","$title","text","$date","formatDate","$deleteButton","icon","stylingMode","onClick","event","stopPropagation","checkAndDeleteAppointment"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/scheduler/tooltip_strategies/tooltipStrategyBase.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport Button from \"../../button\";\r\nimport {\r\n    FunctionTemplate\r\n} from \"../../../core/templates/function_template\";\r\nimport $ from \"../../../core/renderer\";\r\nimport List from \"../../list/ui.list.edit\";\r\nvar TOOLTIP_APPOINTMENT_ITEM = \"dx-tooltip-appointment-item\";\r\nvar TOOLTIP_APPOINTMENT_ITEM_CONTENT = TOOLTIP_APPOINTMENT_ITEM + \"-content\";\r\nvar TOOLTIP_APPOINTMENT_ITEM_CONTENT_SUBJECT = TOOLTIP_APPOINTMENT_ITEM + \"-content-subject\";\r\nvar TOOLTIP_APPOINTMENT_ITEM_CONTENT_DATE = TOOLTIP_APPOINTMENT_ITEM + \"-content-date\";\r\nvar TOOLTIP_APPOINTMENT_ITEM_MARKER = TOOLTIP_APPOINTMENT_ITEM + \"-marker\";\r\nvar TOOLTIP_APPOINTMENT_ITEM_MARKER_BODY = TOOLTIP_APPOINTMENT_ITEM + \"-marker-body\";\r\nvar TOOLTIP_APPOINTMENT_ITEM_DELETE_BUTTON_CONTAINER = TOOLTIP_APPOINTMENT_ITEM + \"-delete-button-container\";\r\nvar TOOLTIP_APPOINTMENT_ITEM_DELETE_BUTTON = TOOLTIP_APPOINTMENT_ITEM + \"-delete-button\";\r\nexport class TooltipStrategyBase {\r\n    constructor(options) {\r\n        this._tooltip = null;\r\n        this._options = options;\r\n        this._extraOptions = null\r\n    }\r\n    show(target, dataList, extraOptions) {\r\n        if (this._canShowTooltip(dataList)) {\r\n            this.hide();\r\n            this._extraOptions = extraOptions;\r\n            this._showCore(target, dataList)\r\n        }\r\n    }\r\n    _showCore(target, dataList) {\r\n        if (!this._tooltip) {\r\n            this._tooltip = this._createTooltip(target, dataList)\r\n        } else {\r\n            this._shouldUseTarget() && this._tooltip.option(\"target\", target);\r\n            this._list.option(\"dataSource\", dataList)\r\n        }\r\n        this._prepareBeforeVisibleChanged(dataList);\r\n        this._tooltip.option(\"visible\", true)\r\n    }\r\n    _prepareBeforeVisibleChanged(dataList) {}\r\n    _getContentTemplate(dataList) {\r\n        return container => {\r\n            var listElement = $(\"<div>\");\r\n            $(container).append(listElement);\r\n            this._list = this._createList(listElement, dataList)\r\n        }\r\n    }\r\n    isAlreadyShown(target) {\r\n        if (this._tooltip && this._tooltip.option(\"visible\")) {\r\n            return this._tooltip.option(\"target\")[0] === target[0]\r\n        }\r\n    }\r\n    _onShown() {\r\n        this._list.option(\"focusStateEnabled\", this._extraOptions.focusStateEnabled)\r\n    }\r\n    dispose() {}\r\n    hide() {\r\n        if (this._tooltip) {\r\n            this._tooltip.option(\"visible\", false)\r\n        }\r\n    }\r\n    _shouldUseTarget() {\r\n        return true\r\n    }\r\n    _createTooltip() {}\r\n    _canShowTooltip(dataList) {\r\n        if (!dataList.length) {\r\n            return false\r\n        }\r\n        return true\r\n    }\r\n    _createListOption(dataList) {\r\n        return {\r\n            dataSource: dataList,\r\n            onContentReady: this._onListRender.bind(this),\r\n            onItemClick: e => this._onListItemClick(e),\r\n            itemTemplate: (item, index) => this._renderTemplate(item.appointment, item.targetedAppointment, index, item.color),\r\n            _swipeEnabled: false\r\n        }\r\n    }\r\n    _onListRender() {}\r\n    _createTooltipElement(wrapperClass) {\r\n        return $(\"<div>\").appendTo(this._options.container).addClass(wrapperClass)\r\n    }\r\n    _createList(listElement, dataList) {\r\n        return this._options.createComponent(listElement, List, this._createListOption(dataList))\r\n    }\r\n    _renderTemplate(appointment, targetedAppointment, index, color) {\r\n        var itemListContent = this._createItemListContent(appointment, targetedAppointment, color);\r\n        this._options.addDefaultTemplates({\r\n            [this._getItemListTemplateName()]: new FunctionTemplate(options => {\r\n                var $container = $(options.container);\r\n                $container.append(itemListContent);\r\n                return $container\r\n            })\r\n        });\r\n        var template = this._options.getAppointmentTemplate(this._getItemListTemplateName() + \"Template\");\r\n        return this._createFunctionTemplate(template, appointment, targetedAppointment, index)\r\n    }\r\n    _createFunctionTemplate(template, data, targetData, index) {\r\n        var isEmptyDropDownAppointmentTemplate = this._isEmptyDropDownAppointmentTemplate();\r\n        return new FunctionTemplate(options => template.render({\r\n            model: isEmptyDropDownAppointmentTemplate ? {\r\n                appointmentData: data,\r\n                targetedAppointmentData: targetData\r\n            } : data,\r\n            container: options.container,\r\n            index: index\r\n        }))\r\n    }\r\n    _getItemListTemplateName() {\r\n        return this._isEmptyDropDownAppointmentTemplate() ? \"appointmentTooltip\" : \"dropDownAppointment\"\r\n    }\r\n    _isEmptyDropDownAppointmentTemplate() {\r\n        return !this._extraOptions.dropDownAppointmentTemplate || \"dropDownAppointment\" === this._extraOptions.dropDownAppointmentTemplate\r\n    }\r\n    _onListItemClick(e) {\r\n        this.hide();\r\n        this._extraOptions.clickEvent && this._extraOptions.clickEvent(e);\r\n        this._options.showAppointmentPopup(e.itemData.appointment, false, e.itemData.targetedAppointment)\r\n    }\r\n    _createItemListContent(appointment, targetedAppointment, color) {\r\n        var editing = this._extraOptions.editing;\r\n        var $itemElement = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM);\r\n        $itemElement.append(this._createItemListMarker(color));\r\n        $itemElement.append(this._createItemListInfo(this._options.createFormattedDateText(appointment, targetedAppointment)));\r\n        var disabled = this._options.getAppointmentDisabled(appointment);\r\n        if (!disabled && (editing && true === editing.allowDeleting || true === editing)) {\r\n            $itemElement.append(this._createDeleteButton(appointment, targetedAppointment))\r\n        }\r\n        return $itemElement\r\n    }\r\n    _createItemListMarker(color) {\r\n        var $marker = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_MARKER);\r\n        var $markerBody = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_MARKER_BODY);\r\n        $marker.append($markerBody);\r\n        color && color.done(value => $markerBody.css(\"background\", value));\r\n        return $marker\r\n    }\r\n    _createItemListInfo(object) {\r\n        var result = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_CONTENT);\r\n        var $title = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_CONTENT_SUBJECT).text(object.text);\r\n        var $date = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_CONTENT_DATE).text(object.formatDate);\r\n        return result.append($title).append($date)\r\n    }\r\n    _createDeleteButton(appointment, targetedAppointment) {\r\n        var $container = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_DELETE_BUTTON_CONTAINER);\r\n        var $deleteButton = $(\"<div>\").addClass(TOOLTIP_APPOINTMENT_ITEM_DELETE_BUTTON);\r\n        $container.append($deleteButton);\r\n        this._options.createComponent($deleteButton, Button, {\r\n            icon: \"trash\",\r\n            stylingMode: \"text\",\r\n            onClick: e => {\r\n                this.hide();\r\n                e.event.stopPropagation();\r\n                this._options.checkAndDeleteAppointment(appointment, targetedAppointment)\r\n            }\r\n        });\r\n        return $container\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}