{"ast":null,"code":"/**\r\n * DevExtreme (esm/viz/pie_chart.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport consts from \"./components/consts\";\nimport { normalizeAngle, getVerticallyShiftedAngularCoords as _getVerticallyShiftedAngularCoords, patchFontOptions } from \"./core/utils\";\nimport { extend as _extend } from \"../core/utils/extend\";\nimport { isNumeric } from \"../core/utils/type\";\nimport { each as _each } from \"../core/utils/iterator\";\nimport { Range } from \"./translators/range\";\nimport registerComponent from \"../core/component_registrator\";\nimport { BaseChart, overlapping } from \"./chart_components/base_chart\";\nimport { noop as _noop } from \"../core/utils/common\";\nimport { Translator1D } from \"./translators/translator1d\";\nvar states = consts.states;\nvar seriesSpacing = consts.pieSeriesSpacing;\nvar OPTIONS_FOR_REFRESH_SERIES = [\"startAngle\", \"innerRadius\", \"segmentsDirection\", \"type\"];\nvar NORMAL_STATE = states.normalMark;\nvar HOVER_STATE = states.hoverMark;\nvar SELECTED_STATE = states.selectedMark;\nvar MAX_RESOLVE_ITERATION_COUNT = 5;\nvar LEGEND_ACTIONS = [states.resetItem, states.applyHover, states.applySelected, states.applySelected];\n\nfunction getLegendItemAction(points) {\n  var state = NORMAL_STATE;\n  points.forEach(function (point) {\n    var _point$series;\n\n    var seriesOptions = null === (_point$series = point.series) || void 0 === _point$series ? void 0 : _point$series.getOptions();\n    var pointState = point.fullState;\n\n    if (\"none\" === (null === seriesOptions || void 0 === seriesOptions ? void 0 : seriesOptions.hoverMode)) {\n      pointState &= ~HOVER_STATE;\n    }\n\n    if (\"none\" === (null === seriesOptions || void 0 === seriesOptions ? void 0 : seriesOptions.selectionMode)) {\n      pointState &= ~SELECTED_STATE;\n    }\n\n    state |= pointState;\n  });\n  return LEGEND_ACTIONS[state];\n}\n\nfunction correctPercentValue(value) {\n  if (isNumeric(value)) {\n    if (value > 1) {\n      value = 1;\n    } else if (value < 0) {\n      value = 0;\n    }\n  } else {\n    value = void 0;\n  }\n\n  return value;\n}\n\nvar pieSizeEqualizer = function () {\n  function removeFromList(list, item) {\n    return list.filter(function (li) {\n      return li !== item;\n    });\n  }\n\n  var pies = [];\n  var timers = {};\n  return {\n    queue: function queue(pie) {\n      var group = pie.getSizeGroup();\n      pies = (list = pies, item = pie, removeFromList(list, item).concat(item));\n      var list, item;\n      clearTimeout(timers[group]);\n      timers[group] = setTimeout(function () {\n        !function (group, allPies) {\n          var pies = allPies.filter(function (p) {\n            return p._isVisible() && p.getSizeGroup() === group;\n          });\n          var minRadius = Math.min.apply(null, pies.map(function (p) {\n            return p.getSizeGroupLayout().radius;\n          }));\n          var minPie = pies.filter(function (p) {\n            return p.getSizeGroupLayout().radius === minRadius;\n          });\n          pies.forEach(function (p) {\n            return p.render({\n              force: true,\n              sizeGroupLayout: minPie.length ? minPie[0].getSizeGroupLayout() : {}\n            });\n          });\n        }(group, pies);\n      });\n    },\n    remove: function remove(pie) {\n      pies = removeFromList(pies, pie);\n\n      if (!pies.length) {\n        timers = {};\n      }\n    }\n  };\n}();\n\nvar dxPieChart = BaseChart.inherit({\n  _themeSection: \"pie\",\n  _layoutManagerOptions: function _layoutManagerOptions() {\n    return _extend(true, {}, this.callBase(), {\n      piePercentage: correctPercentValue(this._themeManager.getOptions(\"diameter\")),\n      minPiePercentage: correctPercentValue(this._themeManager.getOptions(\"minDiameter\"))\n    });\n  },\n  _optionChangesMap: {\n    diameter: \"REINIT\",\n    minDiameter: \"REINIT\",\n    sizeGroup: \"REINIT\"\n  },\n  _disposeCore: function _disposeCore() {\n    pieSizeEqualizer.remove(this);\n    this.callBase();\n  },\n  _groupSeries: function _groupSeries() {\n    var series = this.series;\n    this._groupsData = {\n      groups: [{\n        series: series,\n        valueOptions: {\n          valueType: \"numeric\"\n        }\n      }],\n      argumentOptions: series[0] && series[0].getOptions()\n    };\n  },\n  getArgumentAxis: function getArgumentAxis() {\n    return null;\n  },\n  _getValueAxis: function _getValueAxis() {\n    var translator = new Translator1D().setCodomain(360, 0);\n    return {\n      getTranslator: function getTranslator() {\n        return translator;\n      },\n      setBusinessRange: function setBusinessRange(range) {\n        translator.setDomain(range.min, range.max);\n      }\n    };\n  },\n  _populateBusinessRange: function _populateBusinessRange() {\n    this.series.map(function (series) {\n      var range = new Range();\n      range.addRange(series.getRangeData().val);\n      series.getValueAxis().setBusinessRange(range);\n      return range;\n    });\n  },\n  _specialProcessSeries: function _specialProcessSeries() {\n    _each(this.series, function (_, singleSeries) {\n      singleSeries.arrangePoints();\n    });\n  },\n  _checkPaneName: function _checkPaneName() {\n    return true;\n  },\n  _processSingleSeries: function _processSingleSeries(singleSeries) {\n    this.callBase(singleSeries);\n    singleSeries.arrangePoints();\n  },\n  _handleSeriesDataUpdated: function _handleSeriesDataUpdated() {\n    var maxPointCount = 0;\n    this.series.forEach(function (s) {\n      maxPointCount = Math.max(s.getPointsCount(), maxPointCount);\n    });\n    this.series.forEach(function (s) {\n      s.setMaxPointsCount(maxPointCount);\n    });\n    this.callBase();\n  },\n  _getLegendOptions: function _getLegendOptions(item) {\n    var legendItem = this.callBase(item);\n    var legendData = legendItem.legendData;\n    legendData.argument = item.argument;\n    legendData.argumentIndex = item.argumentIndex;\n    legendData.points = [item];\n    return legendItem;\n  },\n  _getLegendTargets: function _getLegendTargets() {\n    var that = this;\n    var itemsByArgument = {};\n    (that.series || []).forEach(function (series) {\n      series.getPoints().forEach(function (point) {\n        var argument = point.argument.valueOf();\n        var index = series.getPointsByArg(argument).indexOf(point);\n        var key = argument.valueOf().toString() + index;\n        itemsByArgument[key] = itemsByArgument[key] || [];\n        var argumentCount = itemsByArgument[key].push(point);\n        point.index = itemsByArgument[key][argumentCount - 2] ? itemsByArgument[key][argumentCount - 2].index : Object.keys(itemsByArgument).length - 1;\n        point.argumentIndex = index;\n      });\n    });\n    var items = [];\n\n    _each(itemsByArgument, function (_, points) {\n      points.forEach(function (point, index) {\n        if (0 === index) {\n          items.push(that._getLegendOptions(point));\n          return;\n        }\n\n        var item = items[items.length - 1];\n        item.legendData.points.push(point);\n\n        if (!item.visible) {\n          item.visible = point.isVisible();\n        }\n      });\n    });\n\n    return items;\n  },\n  _getLayoutTargets: function _getLayoutTargets() {\n    return [{\n      canvas: this._canvas\n    }];\n  },\n  _getLayoutSeries: function _getLayoutSeries(series, drawOptions) {\n    var layout;\n    var canvas = this._canvas;\n    var drawnLabels = false;\n    layout = this.layoutManager.applyPieChartSeriesLayout(canvas, series, true);\n    series.forEach(function (singleSeries) {\n      singleSeries.correctPosition(layout, canvas);\n      drawnLabels = singleSeries.drawLabelsWOPoints() || drawnLabels;\n    });\n\n    if (drawnLabels) {\n      layout = this.layoutManager.applyPieChartSeriesLayout(canvas, series, drawOptions.hideLayoutLabels);\n    }\n\n    series.forEach(function (singleSeries) {\n      singleSeries.hideLabels();\n    });\n    this._sizeGroupLayout = {\n      x: layout.centerX,\n      y: layout.centerY,\n      radius: layout.radiusOuter,\n      drawOptions: drawOptions\n    };\n    return layout;\n  },\n  _getLayoutSeriesForEqualPies: function _getLayoutSeriesForEqualPies(series, sizeGroupLayout) {\n    var canvas = this._canvas;\n    var layout = this.layoutManager.applyEqualPieChartLayout(series, sizeGroupLayout);\n    series.forEach(function (s) {\n      s.correctPosition(layout, canvas);\n      s.drawLabelsWOPoints();\n    });\n    this.layoutManager.correctPieLabelRadius(series, layout, canvas);\n    return layout;\n  },\n  _updateSeriesDimensions: function _updateSeriesDimensions(drawOptions) {\n    var visibleSeries = this._getVisibleSeries();\n\n    var lengthVisibleSeries = visibleSeries.length;\n    var innerRad;\n    var delta;\n    var layout;\n    var sizeGroupLayout = drawOptions.sizeGroupLayout;\n\n    if (lengthVisibleSeries) {\n      layout = sizeGroupLayout ? this._getLayoutSeriesForEqualPies(visibleSeries, sizeGroupLayout) : this._getLayoutSeries(visibleSeries, drawOptions);\n      delta = (layout.radiusOuter - layout.radiusInner - seriesSpacing * (lengthVisibleSeries - 1)) / lengthVisibleSeries;\n      innerRad = layout.radiusInner;\n\n      this._setGeometry(layout);\n\n      visibleSeries.forEach(function (singleSeries) {\n        singleSeries.correctRadius({\n          radiusInner: innerRad,\n          radiusOuter: innerRad + delta\n        });\n        innerRad += delta + seriesSpacing;\n      });\n    }\n  },\n  _renderSeries: function _renderSeries(drawOptions, isRotated, isLegendInside) {\n    this._calculateSeriesLayout(drawOptions, isRotated);\n\n    if (!drawOptions.sizeGroupLayout && this.getSizeGroup()) {\n      pieSizeEqualizer.queue(this);\n\n      this._clearCanvas();\n\n      return;\n    }\n\n    this._renderSeriesElements(drawOptions, isLegendInside);\n  },\n  _renderExtraElements: function _renderExtraElements() {\n    var _this = this;\n\n    var template = this.option(\"centerTemplate\");\n\n    if (this._centerTemplateGroup) {\n      this._centerTemplateGroup.clear();\n    }\n\n    if (!template) {\n      return;\n    }\n\n    if (!this._centerTemplateGroup) {\n      this._centerTemplateGroup = this._renderer.g().attr({\n        class: \"dxc-hole-template\"\n      }).css(patchFontOptions(this._themeManager._font));\n    }\n\n    this._centerTemplateGroup.attr({\n      visibility: \"hidden\"\n    }).append(this._renderer.root);\n\n    template = this._getTemplate(template);\n    template.render({\n      model: this,\n      container: this._centerTemplateGroup.element,\n      onRendered: function onRendered() {\n        var group = _this._centerTemplateGroup;\n        var bBox = group.getBBox();\n        group.move(_this._center.x - (bBox.x + bBox.width / 2), _this._center.y - (bBox.y + bBox.height / 2));\n        group.attr({\n          visibility: \"visible\"\n        });\n      }\n    });\n  },\n  getInnerRadius: function getInnerRadius() {\n    return this._innerRadius;\n  },\n  _getLegendCallBack: function _getLegendCallBack() {\n    var that = this;\n    var legend = this._legend;\n\n    var items = this._getLegendTargets().map(function (i) {\n      return i.legendData;\n    });\n\n    return function (target) {\n      items.forEach(function (data) {\n        var points = [];\n        var callback = legend.getActionCallback({\n          index: data.id\n        });\n        that.series.forEach(function (series) {\n          var seriesPoints = series.getPointsByKeys(data.argument, data.argumentIndex);\n          points.push.apply(points, seriesPoints);\n        });\n\n        if (target && target.argument === data.argument && target.argumentIndex === data.argumentIndex) {\n          points.push(target);\n        }\n\n        callback(getLegendItemAction(points));\n      });\n    };\n  },\n  _locateLabels: function _locateLabels(resolveLabelOverlapping) {\n    var iterationCount = 0;\n    var labelsWereOverlapped;\n    var wordWrapApplied;\n\n    do {\n      wordWrapApplied = this._adjustSeriesLabels(\"shift\" === resolveLabelOverlapping);\n      labelsWereOverlapped = this._resolveLabelOverlapping(resolveLabelOverlapping);\n    } while ((labelsWereOverlapped || wordWrapApplied) && ++iterationCount < MAX_RESOLVE_ITERATION_COUNT);\n  },\n  _adjustSeriesLabels: function _adjustSeriesLabels(moveLabelsFromCenter) {\n    return this.series.reduce(function (r, s) {\n      return s.adjustLabels(moveLabelsFromCenter) || r;\n    }, false);\n  },\n  _applyExtraSettings: _noop,\n  _resolveLabelOverlappingShift: function _resolveLabelOverlappingShift() {\n    var that = this;\n    var inverseDirection = \"anticlockwise\" === that.option(\"segmentsDirection\");\n    var seriesByPosition = that.series.reduce(function (r, s) {\n      (r[s.getOptions().label.position] || r.outside).push(s);\n      return r;\n    }, {\n      inside: [],\n      columns: [],\n      outside: []\n    });\n    var labelsOverlapped = false;\n\n    if (seriesByPosition.inside.length > 0) {\n      labelsOverlapped = resolve(seriesByPosition.inside.reduce(function (r, singleSeries) {\n        return singleSeries.getVisiblePoints().reduce(function (r, point) {\n          r.left.push(point);\n          return r;\n        }, r);\n      }, {\n        left: [],\n        right: []\n      }), shiftInColumnFunction) || labelsOverlapped;\n    }\n\n    labelsOverlapped = seriesByPosition.columns.reduce(function (r, singleSeries) {\n      return resolve(dividePoints(singleSeries), shiftInColumnFunction) || r;\n    }, labelsOverlapped);\n\n    if (seriesByPosition.outside.length > 0) {\n      labelsOverlapped = resolve(seriesByPosition.outside.reduce(function (r, singleSeries) {\n        return dividePoints(singleSeries, r);\n      }, null), function (box, length) {\n        return _getVerticallyShiftedAngularCoords(box, -length, that._center);\n      }) || labelsOverlapped;\n    }\n\n    return labelsOverlapped;\n\n    function dividePoints(series, points) {\n      return series.getVisiblePoints().reduce(function (r, point) {\n        var angle = normalizeAngle(point.middleAngle);\n        (angle <= 90 || angle >= 270 ? r.right : r.left).push(point);\n        return r;\n      }, points || {\n        left: [],\n        right: []\n      });\n    }\n\n    function resolve(points, shiftCallback) {\n      var overlapped;\n\n      if (inverseDirection) {\n        points.left.reverse();\n        points.right.reverse();\n      }\n\n      overlapped = overlapping.resolveLabelOverlappingInOneDirection(points.left, that._canvas, false, shiftCallback);\n      return overlapping.resolveLabelOverlappingInOneDirection(points.right, that._canvas, false, shiftCallback) || overlapped;\n    }\n\n    function shiftInColumnFunction(box, length) {\n      return {\n        x: box.x,\n        y: box.y - length\n      };\n    }\n  },\n  _setGeometry: function _setGeometry(_ref) {\n    var x = _ref.centerX,\n        y = _ref.centerY,\n        radiusInner = _ref.radiusInner;\n    this._center = {\n      x: x,\n      y: y\n    };\n    this._innerRadius = radiusInner;\n  },\n  _disposeSeries: function _disposeSeries(seriesIndex) {\n    this.callBase.apply(this, arguments);\n    this._abstractSeries = null;\n  },\n  _legendDataField: \"point\",\n  _legendItemTextField: \"argument\",\n  _applyPointMarkersAutoHiding: _noop,\n  _renderTrackers: _noop,\n  _trackerType: \"PieTracker\",\n  _createScrollBar: _noop,\n  _updateAxesLayout: _noop,\n  _applyClipRects: _noop,\n  _appendAdditionalSeriesGroups: _noop,\n  _prepareToRender: _noop,\n  _isLegendInside: _noop,\n  _renderAxes: _noop,\n  _shrinkAxes: _noop,\n  _isRotated: _noop,\n  _seriesPopulatedHandlerCore: _noop,\n  _reinitAxes: _noop,\n  _correctAxes: _noop,\n  _getExtraOptions: function _getExtraOptions() {\n    return {\n      startAngle: this.option(\"startAngle\"),\n      innerRadius: this.option(\"innerRadius\"),\n      segmentsDirection: this.option(\"segmentsDirection\"),\n      type: this.option(\"type\")\n    };\n  },\n  getSizeGroup: function getSizeGroup() {\n    return this._themeManager.getOptions(\"sizeGroup\");\n  },\n  getSizeGroupLayout: function getSizeGroupLayout() {\n    return this._sizeGroupLayout || {};\n  }\n});\n\n_each(OPTIONS_FOR_REFRESH_SERIES, function (_, name) {\n  dxPieChart.prototype._optionChangesMap[name] = \"REFRESH_SERIES_DATA_INIT\";\n});\n\nimport { plugins } from \"./core/annotations\";\ndxPieChart.addPlugin(plugins.core);\ndxPieChart.addPlugin(plugins.pieChart);\nregisterComponent(\"dxPieChart\", dxPieChart);\nexport default dxPieChart;","map":{"version":3,"sources":["C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/devextreme/esm/viz/pie_chart.js"],"names":["consts","normalizeAngle","getVerticallyShiftedAngularCoords","_getVerticallyShiftedAngularCoords","patchFontOptions","extend","_extend","isNumeric","each","_each","Range","registerComponent","BaseChart","overlapping","noop","_noop","Translator1D","states","seriesSpacing","pieSeriesSpacing","OPTIONS_FOR_REFRESH_SERIES","NORMAL_STATE","normalMark","HOVER_STATE","hoverMark","SELECTED_STATE","selectedMark","MAX_RESOLVE_ITERATION_COUNT","LEGEND_ACTIONS","resetItem","applyHover","applySelected","getLegendItemAction","points","state","forEach","point","_point$series","seriesOptions","series","getOptions","pointState","fullState","hoverMode","selectionMode","correctPercentValue","value","pieSizeEqualizer","removeFromList","list","item","filter","li","pies","timers","queue","pie","group","getSizeGroup","concat","clearTimeout","setTimeout","allPies","p","_isVisible","minRadius","Math","min","apply","map","getSizeGroupLayout","radius","minPie","render","force","sizeGroupLayout","length","remove","dxPieChart","inherit","_themeSection","_layoutManagerOptions","callBase","piePercentage","_themeManager","minPiePercentage","_optionChangesMap","diameter","minDiameter","sizeGroup","_disposeCore","_groupSeries","_groupsData","groups","valueOptions","valueType","argumentOptions","getArgumentAxis","_getValueAxis","translator","setCodomain","getTranslator","setBusinessRange","range","setDomain","max","_populateBusinessRange","addRange","getRangeData","val","getValueAxis","_specialProcessSeries","_","singleSeries","arrangePoints","_checkPaneName","_processSingleSeries","_handleSeriesDataUpdated","maxPointCount","s","getPointsCount","setMaxPointsCount","_getLegendOptions","legendItem","legendData","argument","argumentIndex","_getLegendTargets","that","itemsByArgument","getPoints","valueOf","index","getPointsByArg","indexOf","key","toString","argumentCount","push","Object","keys","items","visible","isVisible","_getLayoutTargets","canvas","_canvas","_getLayoutSeries","drawOptions","layout","drawnLabels","layoutManager","applyPieChartSeriesLayout","correctPosition","drawLabelsWOPoints","hideLayoutLabels","hideLabels","_sizeGroupLayout","x","centerX","y","centerY","radiusOuter","_getLayoutSeriesForEqualPies","applyEqualPieChartLayout","correctPieLabelRadius","_updateSeriesDimensions","visibleSeries","_getVisibleSeries","lengthVisibleSeries","innerRad","delta","radiusInner","_setGeometry","correctRadius","_renderSeries","isRotated","isLegendInside","_calculateSeriesLayout","_clearCanvas","_renderSeriesElements","_renderExtraElements","template","option","_centerTemplateGroup","clear","_renderer","g","attr","class","css","_font","visibility","append","root","_getTemplate","model","container","element","onRendered","bBox","getBBox","move","_center","width","height","getInnerRadius","_innerRadius","_getLegendCallBack","legend","_legend","i","target","data","callback","getActionCallback","id","seriesPoints","getPointsByKeys","_locateLabels","resolveLabelOverlapping","iterationCount","labelsWereOverlapped","wordWrapApplied","_adjustSeriesLabels","_resolveLabelOverlapping","moveLabelsFromCenter","reduce","r","adjustLabels","_applyExtraSettings","_resolveLabelOverlappingShift","inverseDirection","seriesByPosition","label","position","outside","inside","columns","labelsOverlapped","resolve","getVisiblePoints","left","right","shiftInColumnFunction","dividePoints","box","angle","middleAngle","shiftCallback","overlapped","reverse","resolveLabelOverlappingInOneDirection","_ref","_disposeSeries","seriesIndex","arguments","_abstractSeries","_legendDataField","_legendItemTextField","_applyPointMarkersAutoHiding","_renderTrackers","_trackerType","_createScrollBar","_updateAxesLayout","_applyClipRects","_appendAdditionalSeriesGroups","_prepareToRender","_isLegendInside","_renderAxes","_shrinkAxes","_isRotated","_seriesPopulatedHandlerCore","_reinitAxes","_correctAxes","_getExtraOptions","startAngle","innerRadius","segmentsDirection","type","name","prototype","plugins","addPlugin","core","pieChart"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/viz/pie_chart.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport consts from \"./components/consts\";\r\nimport {\r\n    normalizeAngle,\r\n    getVerticallyShiftedAngularCoords as _getVerticallyShiftedAngularCoords,\r\n    patchFontOptions\r\n} from \"./core/utils\";\r\nimport {\r\n    extend as _extend\r\n} from \"../core/utils/extend\";\r\nimport {\r\n    isNumeric\r\n} from \"../core/utils/type\";\r\nimport {\r\n    each as _each\r\n} from \"../core/utils/iterator\";\r\nimport {\r\n    Range\r\n} from \"./translators/range\";\r\nimport registerComponent from \"../core/component_registrator\";\r\nimport {\r\n    BaseChart,\r\n    overlapping\r\n} from \"./chart_components/base_chart\";\r\nimport {\r\n    noop as _noop\r\n} from \"../core/utils/common\";\r\nimport {\r\n    Translator1D\r\n} from \"./translators/translator1d\";\r\nvar {\r\n    states: states\r\n} = consts;\r\nvar seriesSpacing = consts.pieSeriesSpacing;\r\nvar OPTIONS_FOR_REFRESH_SERIES = [\"startAngle\", \"innerRadius\", \"segmentsDirection\", \"type\"];\r\nvar NORMAL_STATE = states.normalMark;\r\nvar HOVER_STATE = states.hoverMark;\r\nvar SELECTED_STATE = states.selectedMark;\r\nvar MAX_RESOLVE_ITERATION_COUNT = 5;\r\nvar LEGEND_ACTIONS = [states.resetItem, states.applyHover, states.applySelected, states.applySelected];\r\n\r\nfunction getLegendItemAction(points) {\r\n    var state = NORMAL_STATE;\r\n    points.forEach(point => {\r\n        var _point$series;\r\n        var seriesOptions = null === (_point$series = point.series) || void 0 === _point$series ? void 0 : _point$series.getOptions();\r\n        var pointState = point.fullState;\r\n        if (\"none\" === (null === seriesOptions || void 0 === seriesOptions ? void 0 : seriesOptions.hoverMode)) {\r\n            pointState &= ~HOVER_STATE\r\n        }\r\n        if (\"none\" === (null === seriesOptions || void 0 === seriesOptions ? void 0 : seriesOptions.selectionMode)) {\r\n            pointState &= ~SELECTED_STATE\r\n        }\r\n        state |= pointState\r\n    });\r\n    return LEGEND_ACTIONS[state]\r\n}\r\n\r\nfunction correctPercentValue(value) {\r\n    if (isNumeric(value)) {\r\n        if (value > 1) {\r\n            value = 1\r\n        } else if (value < 0) {\r\n            value = 0\r\n        }\r\n    } else {\r\n        value = void 0\r\n    }\r\n    return value\r\n}\r\nvar pieSizeEqualizer = function() {\r\n    function removeFromList(list, item) {\r\n        return list.filter((function(li) {\r\n            return li !== item\r\n        }))\r\n    }\r\n    var pies = [];\r\n    var timers = {};\r\n    return {\r\n        queue: function(pie) {\r\n            var group = pie.getSizeGroup();\r\n            pies = (list = pies, item = pie, removeFromList(list, item).concat(item));\r\n            var list, item;\r\n            clearTimeout(timers[group]);\r\n            timers[group] = setTimeout((function() {\r\n                ! function(group, allPies) {\r\n                    var pies = allPies.filter(p => p._isVisible() && p.getSizeGroup() === group);\r\n                    var minRadius = Math.min.apply(null, pies.map(p => p.getSizeGroupLayout().radius));\r\n                    var minPie = pies.filter(p => p.getSizeGroupLayout().radius === minRadius);\r\n                    pies.forEach(p => p.render({\r\n                        force: true,\r\n                        sizeGroupLayout: minPie.length ? minPie[0].getSizeGroupLayout() : {}\r\n                    }))\r\n                }(group, pies)\r\n            }))\r\n        },\r\n        remove: function(pie) {\r\n            pies = removeFromList(pies, pie);\r\n            if (!pies.length) {\r\n                timers = {}\r\n            }\r\n        }\r\n    }\r\n}();\r\nvar dxPieChart = BaseChart.inherit({\r\n    _themeSection: \"pie\",\r\n    _layoutManagerOptions: function() {\r\n        return _extend(true, {}, this.callBase(), {\r\n            piePercentage: correctPercentValue(this._themeManager.getOptions(\"diameter\")),\r\n            minPiePercentage: correctPercentValue(this._themeManager.getOptions(\"minDiameter\"))\r\n        })\r\n    },\r\n    _optionChangesMap: {\r\n        diameter: \"REINIT\",\r\n        minDiameter: \"REINIT\",\r\n        sizeGroup: \"REINIT\"\r\n    },\r\n    _disposeCore: function() {\r\n        pieSizeEqualizer.remove(this);\r\n        this.callBase()\r\n    },\r\n    _groupSeries: function() {\r\n        var series = this.series;\r\n        this._groupsData = {\r\n            groups: [{\r\n                series: series,\r\n                valueOptions: {\r\n                    valueType: \"numeric\"\r\n                }\r\n            }],\r\n            argumentOptions: series[0] && series[0].getOptions()\r\n        }\r\n    },\r\n    getArgumentAxis: function() {\r\n        return null\r\n    },\r\n    _getValueAxis: function() {\r\n        var translator = (new Translator1D).setCodomain(360, 0);\r\n        return {\r\n            getTranslator: function() {\r\n                return translator\r\n            },\r\n            setBusinessRange: function(range) {\r\n                translator.setDomain(range.min, range.max)\r\n            }\r\n        }\r\n    },\r\n    _populateBusinessRange: function() {\r\n        this.series.map((function(series) {\r\n            var range = new Range;\r\n            range.addRange(series.getRangeData().val);\r\n            series.getValueAxis().setBusinessRange(range);\r\n            return range\r\n        }))\r\n    },\r\n    _specialProcessSeries: function() {\r\n        _each(this.series, (function(_, singleSeries) {\r\n            singleSeries.arrangePoints()\r\n        }))\r\n    },\r\n    _checkPaneName: function() {\r\n        return true\r\n    },\r\n    _processSingleSeries: function(singleSeries) {\r\n        this.callBase(singleSeries);\r\n        singleSeries.arrangePoints()\r\n    },\r\n    _handleSeriesDataUpdated: function() {\r\n        var maxPointCount = 0;\r\n        this.series.forEach((function(s) {\r\n            maxPointCount = Math.max(s.getPointsCount(), maxPointCount)\r\n        }));\r\n        this.series.forEach((function(s) {\r\n            s.setMaxPointsCount(maxPointCount)\r\n        }));\r\n        this.callBase()\r\n    },\r\n    _getLegendOptions: function(item) {\r\n        var legendItem = this.callBase(item);\r\n        var legendData = legendItem.legendData;\r\n        legendData.argument = item.argument;\r\n        legendData.argumentIndex = item.argumentIndex;\r\n        legendData.points = [item];\r\n        return legendItem\r\n    },\r\n    _getLegendTargets: function() {\r\n        var that = this;\r\n        var itemsByArgument = {};\r\n        (that.series || []).forEach((function(series) {\r\n            series.getPoints().forEach((function(point) {\r\n                var argument = point.argument.valueOf();\r\n                var index = series.getPointsByArg(argument).indexOf(point);\r\n                var key = argument.valueOf().toString() + index;\r\n                itemsByArgument[key] = itemsByArgument[key] || [];\r\n                var argumentCount = itemsByArgument[key].push(point);\r\n                point.index = itemsByArgument[key][argumentCount - 2] ? itemsByArgument[key][argumentCount - 2].index : Object.keys(itemsByArgument).length - 1;\r\n                point.argumentIndex = index\r\n            }))\r\n        }));\r\n        var items = [];\r\n        _each(itemsByArgument, (function(_, points) {\r\n            points.forEach((function(point, index) {\r\n                if (0 === index) {\r\n                    items.push(that._getLegendOptions(point));\r\n                    return\r\n                }\r\n                var item = items[items.length - 1];\r\n                item.legendData.points.push(point);\r\n                if (!item.visible) {\r\n                    item.visible = point.isVisible()\r\n                }\r\n            }))\r\n        }));\r\n        return items\r\n    },\r\n    _getLayoutTargets: function() {\r\n        return [{\r\n            canvas: this._canvas\r\n        }]\r\n    },\r\n    _getLayoutSeries: function(series, drawOptions) {\r\n        var layout;\r\n        var canvas = this._canvas;\r\n        var drawnLabels = false;\r\n        layout = this.layoutManager.applyPieChartSeriesLayout(canvas, series, true);\r\n        series.forEach((function(singleSeries) {\r\n            singleSeries.correctPosition(layout, canvas);\r\n            drawnLabels = singleSeries.drawLabelsWOPoints() || drawnLabels\r\n        }));\r\n        if (drawnLabels) {\r\n            layout = this.layoutManager.applyPieChartSeriesLayout(canvas, series, drawOptions.hideLayoutLabels)\r\n        }\r\n        series.forEach((function(singleSeries) {\r\n            singleSeries.hideLabels()\r\n        }));\r\n        this._sizeGroupLayout = {\r\n            x: layout.centerX,\r\n            y: layout.centerY,\r\n            radius: layout.radiusOuter,\r\n            drawOptions: drawOptions\r\n        };\r\n        return layout\r\n    },\r\n    _getLayoutSeriesForEqualPies: function(series, sizeGroupLayout) {\r\n        var canvas = this._canvas;\r\n        var layout = this.layoutManager.applyEqualPieChartLayout(series, sizeGroupLayout);\r\n        series.forEach((function(s) {\r\n            s.correctPosition(layout, canvas);\r\n            s.drawLabelsWOPoints()\r\n        }));\r\n        this.layoutManager.correctPieLabelRadius(series, layout, canvas);\r\n        return layout\r\n    },\r\n    _updateSeriesDimensions: function(drawOptions) {\r\n        var visibleSeries = this._getVisibleSeries();\r\n        var lengthVisibleSeries = visibleSeries.length;\r\n        var innerRad;\r\n        var delta;\r\n        var layout;\r\n        var sizeGroupLayout = drawOptions.sizeGroupLayout;\r\n        if (lengthVisibleSeries) {\r\n            layout = sizeGroupLayout ? this._getLayoutSeriesForEqualPies(visibleSeries, sizeGroupLayout) : this._getLayoutSeries(visibleSeries, drawOptions);\r\n            delta = (layout.radiusOuter - layout.radiusInner - seriesSpacing * (lengthVisibleSeries - 1)) / lengthVisibleSeries;\r\n            innerRad = layout.radiusInner;\r\n            this._setGeometry(layout);\r\n            visibleSeries.forEach((function(singleSeries) {\r\n                singleSeries.correctRadius({\r\n                    radiusInner: innerRad,\r\n                    radiusOuter: innerRad + delta\r\n                });\r\n                innerRad += delta + seriesSpacing\r\n            }))\r\n        }\r\n    },\r\n    _renderSeries: function(drawOptions, isRotated, isLegendInside) {\r\n        this._calculateSeriesLayout(drawOptions, isRotated);\r\n        if (!drawOptions.sizeGroupLayout && this.getSizeGroup()) {\r\n            pieSizeEqualizer.queue(this);\r\n            this._clearCanvas();\r\n            return\r\n        }\r\n        this._renderSeriesElements(drawOptions, isLegendInside)\r\n    },\r\n    _renderExtraElements() {\r\n        var template = this.option(\"centerTemplate\");\r\n        if (this._centerTemplateGroup) {\r\n            this._centerTemplateGroup.clear()\r\n        }\r\n        if (!template) {\r\n            return\r\n        }\r\n        if (!this._centerTemplateGroup) {\r\n            this._centerTemplateGroup = this._renderer.g().attr({\r\n                class: \"dxc-hole-template\"\r\n            }).css(patchFontOptions(this._themeManager._font))\r\n        }\r\n        this._centerTemplateGroup.attr({\r\n            visibility: \"hidden\"\r\n        }).append(this._renderer.root);\r\n        template = this._getTemplate(template);\r\n        template.render({\r\n            model: this,\r\n            container: this._centerTemplateGroup.element,\r\n            onRendered: () => {\r\n                var group = this._centerTemplateGroup;\r\n                var bBox = group.getBBox();\r\n                group.move(this._center.x - (bBox.x + bBox.width / 2), this._center.y - (bBox.y + bBox.height / 2));\r\n                group.attr({\r\n                    visibility: \"visible\"\r\n                })\r\n            }\r\n        })\r\n    },\r\n    getInnerRadius() {\r\n        return this._innerRadius\r\n    },\r\n    _getLegendCallBack: function() {\r\n        var that = this;\r\n        var legend = this._legend;\r\n        var items = this._getLegendTargets().map((function(i) {\r\n            return i.legendData\r\n        }));\r\n        return function(target) {\r\n            items.forEach((function(data) {\r\n                var points = [];\r\n                var callback = legend.getActionCallback({\r\n                    index: data.id\r\n                });\r\n                that.series.forEach((function(series) {\r\n                    var seriesPoints = series.getPointsByKeys(data.argument, data.argumentIndex);\r\n                    points.push.apply(points, seriesPoints)\r\n                }));\r\n                if (target && target.argument === data.argument && target.argumentIndex === data.argumentIndex) {\r\n                    points.push(target)\r\n                }\r\n                callback(getLegendItemAction(points))\r\n            }))\r\n        }\r\n    },\r\n    _locateLabels(resolveLabelOverlapping) {\r\n        var iterationCount = 0;\r\n        var labelsWereOverlapped;\r\n        var wordWrapApplied;\r\n        do {\r\n            wordWrapApplied = this._adjustSeriesLabels(\"shift\" === resolveLabelOverlapping);\r\n            labelsWereOverlapped = this._resolveLabelOverlapping(resolveLabelOverlapping)\r\n        } while ((labelsWereOverlapped || wordWrapApplied) && ++iterationCount < MAX_RESOLVE_ITERATION_COUNT)\r\n    },\r\n    _adjustSeriesLabels: function(moveLabelsFromCenter) {\r\n        return this.series.reduce((r, s) => s.adjustLabels(moveLabelsFromCenter) || r, false)\r\n    },\r\n    _applyExtraSettings: _noop,\r\n    _resolveLabelOverlappingShift: function() {\r\n        var that = this;\r\n        var inverseDirection = \"anticlockwise\" === that.option(\"segmentsDirection\");\r\n        var seriesByPosition = that.series.reduce((function(r, s) {\r\n            (r[s.getOptions().label.position] || r.outside).push(s);\r\n            return r\r\n        }), {\r\n            inside: [],\r\n            columns: [],\r\n            outside: []\r\n        });\r\n        var labelsOverlapped = false;\r\n        if (seriesByPosition.inside.length > 0) {\r\n            labelsOverlapped = resolve(seriesByPosition.inside.reduce((function(r, singleSeries) {\r\n                return singleSeries.getVisiblePoints().reduce((function(r, point) {\r\n                    r.left.push(point);\r\n                    return r\r\n                }), r)\r\n            }), {\r\n                left: [],\r\n                right: []\r\n            }), shiftInColumnFunction) || labelsOverlapped\r\n        }\r\n        labelsOverlapped = seriesByPosition.columns.reduce((r, singleSeries) => resolve(dividePoints(singleSeries), shiftInColumnFunction) || r, labelsOverlapped);\r\n        if (seriesByPosition.outside.length > 0) {\r\n            labelsOverlapped = resolve(seriesByPosition.outside.reduce((function(r, singleSeries) {\r\n                return dividePoints(singleSeries, r)\r\n            }), null), (function(box, length) {\r\n                return _getVerticallyShiftedAngularCoords(box, -length, that._center)\r\n            })) || labelsOverlapped\r\n        }\r\n        return labelsOverlapped;\r\n\r\n        function dividePoints(series, points) {\r\n            return series.getVisiblePoints().reduce((function(r, point) {\r\n                var angle = normalizeAngle(point.middleAngle);\r\n                (angle <= 90 || angle >= 270 ? r.right : r.left).push(point);\r\n                return r\r\n            }), points || {\r\n                left: [],\r\n                right: []\r\n            })\r\n        }\r\n\r\n        function resolve(points, shiftCallback) {\r\n            var overlapped;\r\n            if (inverseDirection) {\r\n                points.left.reverse();\r\n                points.right.reverse()\r\n            }\r\n            overlapped = overlapping.resolveLabelOverlappingInOneDirection(points.left, that._canvas, false, shiftCallback);\r\n            return overlapping.resolveLabelOverlappingInOneDirection(points.right, that._canvas, false, shiftCallback) || overlapped\r\n        }\r\n\r\n        function shiftInColumnFunction(box, length) {\r\n            return {\r\n                x: box.x,\r\n                y: box.y - length\r\n            }\r\n        }\r\n    },\r\n    _setGeometry: function(_ref) {\r\n        var {\r\n            centerX: x,\r\n            centerY: y,\r\n            radiusInner: radiusInner\r\n        } = _ref;\r\n        this._center = {\r\n            x: x,\r\n            y: y\r\n        };\r\n        this._innerRadius = radiusInner\r\n    },\r\n    _disposeSeries(seriesIndex) {\r\n        this.callBase.apply(this, arguments);\r\n        this._abstractSeries = null\r\n    },\r\n    _legendDataField: \"point\",\r\n    _legendItemTextField: \"argument\",\r\n    _applyPointMarkersAutoHiding: _noop,\r\n    _renderTrackers: _noop,\r\n    _trackerType: \"PieTracker\",\r\n    _createScrollBar: _noop,\r\n    _updateAxesLayout: _noop,\r\n    _applyClipRects: _noop,\r\n    _appendAdditionalSeriesGroups: _noop,\r\n    _prepareToRender: _noop,\r\n    _isLegendInside: _noop,\r\n    _renderAxes: _noop,\r\n    _shrinkAxes: _noop,\r\n    _isRotated: _noop,\r\n    _seriesPopulatedHandlerCore: _noop,\r\n    _reinitAxes: _noop,\r\n    _correctAxes: _noop,\r\n    _getExtraOptions: function() {\r\n        return {\r\n            startAngle: this.option(\"startAngle\"),\r\n            innerRadius: this.option(\"innerRadius\"),\r\n            segmentsDirection: this.option(\"segmentsDirection\"),\r\n            type: this.option(\"type\")\r\n        }\r\n    },\r\n    getSizeGroup: function() {\r\n        return this._themeManager.getOptions(\"sizeGroup\")\r\n    },\r\n    getSizeGroupLayout: function() {\r\n        return this._sizeGroupLayout || {}\r\n    }\r\n});\r\n_each(OPTIONS_FOR_REFRESH_SERIES, (function(_, name) {\r\n    dxPieChart.prototype._optionChangesMap[name] = \"REFRESH_SERIES_DATA_INIT\"\r\n}));\r\nimport {\r\n    plugins\r\n} from \"./core/annotations\";\r\ndxPieChart.addPlugin(plugins.core);\r\ndxPieChart.addPlugin(plugins.pieChart);\r\nregisterComponent(\"dxPieChart\", dxPieChart);\r\nexport default dxPieChart;\r\n"]},"metadata":{},"sourceType":"module"}