{"ast":null,"code":"import _toConsumableArray from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _get from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/get\";\nimport _getPrototypeOf from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/createSuper\";\n\n/**\r\n * DevExtreme (esm/ui/text_box/ui.text_editor.mask.strategy.input_events.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport BaseMaskStrategy from \"./ui.text_editor.mask.strategy.base\";\nvar DELETE_INPUT_TYPE = \"deleteContentBackward\";\n\nvar InputEventsMaskStrategy = /*#__PURE__*/function (_BaseMaskStrategy) {\n  _inherits(InputEventsMaskStrategy, _BaseMaskStrategy);\n\n  var _super = _createSuper(InputEventsMaskStrategy);\n\n  function InputEventsMaskStrategy() {\n    _classCallCheck(this, InputEventsMaskStrategy);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(InputEventsMaskStrategy, [{\n    key: \"_getStrategyName\",\n    value: function _getStrategyName() {\n      return \"inputEvents\";\n    }\n  }, {\n    key: \"getHandleEventNames\",\n    value: function getHandleEventNames() {\n      return [].concat(_toConsumableArray(_get(_getPrototypeOf(InputEventsMaskStrategy.prototype), \"getHandleEventNames\", this).call(this)), [\"beforeInput\"]);\n    }\n  }, {\n    key: \"_beforeInputHandler\",\n    value: function _beforeInputHandler() {\n      this._prevCaret = this.editorCaret();\n    }\n  }, {\n    key: \"_inputHandler\",\n    value: function _inputHandler(_ref) {\n      var originalEvent = _ref.originalEvent;\n\n      if (!originalEvent) {\n        return;\n      }\n\n      var inputType = originalEvent.inputType,\n          data = originalEvent.data;\n      var currentCaret = this.editorCaret();\n\n      if (inputType === DELETE_INPUT_TYPE) {\n        var length = this._prevCaret.end - this._prevCaret.start || 1;\n        this.editor.setBackwardDirection();\n\n        this._updateEditorMask({\n          start: currentCaret.start,\n          length: length,\n          text: this._getEmptyString(length)\n        });\n      } else {\n        if (!currentCaret.end) {\n          return;\n        }\n\n        this._autoFillHandler(originalEvent);\n\n        this.editorCaret(currentCaret);\n\n        var _length = this._prevCaret.end - this._prevCaret.start;\n\n        var newData = data + (_length ? this._getEmptyString(_length - data.length) : \"\");\n        this.editor.setForwardDirection();\n\n        var hasValidChars = this._updateEditorMask({\n          start: this._prevCaret.start,\n          length: _length || newData.length,\n          text: newData\n        });\n\n        if (!hasValidChars) {\n          this.editorCaret(this._prevCaret);\n        }\n      }\n    }\n  }, {\n    key: \"_getEmptyString\",\n    value: function _getEmptyString(length) {\n      return Array(length + 1).join(\" \");\n    }\n  }, {\n    key: \"_updateEditorMask\",\n    value: function _updateEditorMask(args) {\n      var textLength = args.text.length;\n\n      var updatedCharsCount = this.editor._handleChain(args);\n\n      if (this.editor.isForwardDirection()) {\n        var _this$editorCaret = this.editorCaret(),\n            start = _this$editorCaret.start,\n            end = _this$editorCaret.end;\n\n        var correction = updatedCharsCount - textLength;\n\n        if (start <= updatedCharsCount && updatedCharsCount > 1) {\n          this.editorCaret({\n            start: start + correction,\n            end: end + correction\n          });\n        }\n\n        this.editor.isForwardDirection() && this.editor._adjustCaret();\n      }\n\n      this.editor._displayMask();\n\n      return !!updatedCharsCount;\n    }\n  }]);\n\n  return InputEventsMaskStrategy;\n}(BaseMaskStrategy);\n\nexport default InputEventsMaskStrategy;","map":null,"metadata":{},"sourceType":"module"}