{"ast":null,"code":"import _defineProperty from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/createSuper\";\n\n/**\r\n * DevExtreme (esm/file_management/remote_provider.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../core/renderer\";\nimport ajax from \"../core/utils/ajax\";\nimport { ensureDefined, noop } from \"../core/utils/common\";\nimport Guid from \"../core/guid\";\nimport { getWindow } from \"../core/utils/window\";\nimport { each } from \"../core/utils/iterator\";\nimport { Deferred } from \"../core/utils/deferred\";\nimport eventsEngine from \"../events/core/events_engine\";\nimport FileSystemProviderBase from \"./provider_base\";\nimport { compileGetter } from \"../core/utils/data\";\nimport { isDefined, isEmptyObject, isFunction } from \"../core/utils/type\";\nvar window = getWindow();\nvar FILE_CHUNK_BLOB_NAME = \"chunk\";\nvar FILE_SYSTEM_COMMNAD = {\n  GET_DIR_CONTENTS: \"GetDirContents\",\n  CREATE_DIR: \"CreateDir\",\n  RENAME: \"Rename\",\n  MOVE: \"Move\",\n  COPY: \"Copy\",\n  REMOVE: \"Remove\",\n  UPLOAD_CHUNK: \"UploadChunk\",\n  ABORT_UPLOAD: \"AbortUpload\",\n  DOWLOAD: \"Download\"\n};\nvar REQUEST_METHOD = {\n  GET: \"GET\",\n  POST: \"POST\"\n};\n\nvar RemoteFileSystemProvider = /*#__PURE__*/function (_FileSystemProviderBa) {\n  _inherits(RemoteFileSystemProvider, _FileSystemProviderBa);\n\n  var _super = _createSuper(RemoteFileSystemProvider);\n\n  function RemoteFileSystemProvider(options) {\n    var _this;\n\n    _classCallCheck(this, RemoteFileSystemProvider);\n\n    options = ensureDefined(options, {});\n    _this = _super.call(this, options);\n    _this._endpointUrl = options.endpointUrl;\n    _this._beforeAjaxSend = options.beforeAjaxSend;\n    _this._beforeSubmit = options.beforeSubmit;\n    _this._requestHeaders = options.requestHeaders;\n    _this._hasSubDirsGetter = compileGetter(options.hasSubDirectoriesExpr || \"hasSubDirectories\");\n    return _this;\n  }\n\n  _createClass(RemoteFileSystemProvider, [{\n    key: \"getItems\",\n    value: function getItems(parentDir) {\n      var _this2 = this;\n\n      var pathInfo = parentDir.getFullPathInfo();\n      return this._executeRequest(FILE_SYSTEM_COMMNAD.GET_DIR_CONTENTS, {\n        pathInfo: pathInfo\n      }).then(function (result) {\n        return _this2._convertDataObjectsToFileItems(result.result, pathInfo);\n      });\n    }\n  }, {\n    key: \"renameItem\",\n    value: function renameItem(item, name) {\n      return this._executeRequest(FILE_SYSTEM_COMMNAD.RENAME, {\n        pathInfo: item.getFullPathInfo(),\n        isDirectory: item.isDirectory,\n        name: name\n      });\n    }\n  }, {\n    key: \"createDirectory\",\n    value: function createDirectory(parentDir, name) {\n      return this._executeRequest(FILE_SYSTEM_COMMNAD.CREATE_DIR, {\n        pathInfo: parentDir.getFullPathInfo(),\n        name: name\n      });\n    }\n  }, {\n    key: \"deleteItems\",\n    value: function deleteItems(items) {\n      var _this3 = this;\n\n      return items.map(function (item) {\n        return _this3._executeRequest(FILE_SYSTEM_COMMNAD.REMOVE, {\n          pathInfo: item.getFullPathInfo(),\n          isDirectory: item.isDirectory\n        });\n      });\n    }\n  }, {\n    key: \"moveItems\",\n    value: function moveItems(items, destinationDirectory) {\n      var _this4 = this;\n\n      return items.map(function (item) {\n        return _this4._executeRequest(FILE_SYSTEM_COMMNAD.MOVE, {\n          sourcePathInfo: item.getFullPathInfo(),\n          sourceIsDirectory: item.isDirectory,\n          destinationPathInfo: destinationDirectory.getFullPathInfo()\n        });\n      });\n    }\n  }, {\n    key: \"copyItems\",\n    value: function copyItems(items, destinationFolder) {\n      var _this5 = this;\n\n      return items.map(function (item) {\n        return _this5._executeRequest(FILE_SYSTEM_COMMNAD.COPY, {\n          sourcePathInfo: item.getFullPathInfo(),\n          sourceIsDirectory: item.isDirectory,\n          destinationPathInfo: destinationFolder.getFullPathInfo()\n        });\n      });\n    }\n  }, {\n    key: \"uploadFileChunk\",\n    value: function uploadFileChunk(fileData, chunksInfo, destinationDirectory) {\n      var _data;\n\n      if (0 === chunksInfo.chunkIndex) {\n        chunksInfo.customData.uploadId = new Guid();\n      }\n\n      var args = {\n        destinationPathInfo: destinationDirectory.getFullPathInfo(),\n        chunkMetadata: JSON.stringify({\n          UploadId: chunksInfo.customData.uploadId,\n          FileName: fileData.name,\n          Index: chunksInfo.chunkIndex,\n          TotalCount: chunksInfo.chunkCount,\n          FileSize: fileData.size\n        })\n      };\n      var ajaxSettings = {\n        url: this._endpointUrl,\n        headers: this._requestHeaders || {},\n        method: REQUEST_METHOD.POST,\n        dataType: \"json\",\n        data: (_data = {}, _defineProperty(_data, FILE_CHUNK_BLOB_NAME, chunksInfo.chunkBlob), _defineProperty(_data, \"arguments\", JSON.stringify(args)), _defineProperty(_data, \"command\", FILE_SYSTEM_COMMNAD.UPLOAD_CHUNK), _data),\n        upload: {\n          onprogress: noop,\n          onloadstart: noop,\n          onabort: noop\n        },\n        xhrFields: {},\n        cache: false\n      };\n      var deferred = new Deferred();\n\n      this._beforeSendInternal(ajaxSettings);\n\n      ajax.sendRequest(ajaxSettings).done(function (result) {\n        !result.success && deferred.reject(result) || deferred.resolve();\n      }).fail(deferred.reject);\n      return deferred.promise();\n    }\n  }, {\n    key: \"abortFileUpload\",\n    value: function abortFileUpload(fileData, chunksInfo, destinationDirectory) {\n      return this._executeRequest(FILE_SYSTEM_COMMNAD.ABORT_UPLOAD, {\n        uploadId: chunksInfo.customData.uploadId\n      });\n    }\n  }, {\n    key: \"downloadItems\",\n    value: function downloadItems(items) {\n      var args = this._getDownloadArgs(items);\n\n      var $form = $(\"<form>\").css({\n        display: \"none\"\n      }).attr({\n        method: REQUEST_METHOD.POST,\n        action: args.url\n      });\n      var formDataEntries = {\n        command: args.command,\n        arguments: args.arguments\n      };\n\n      this._beforeSubmitInternal(formDataEntries);\n\n      this._appendFormDataInputsToForm(formDataEntries, $form);\n\n      $form.appendTo(\"body\");\n      eventsEngine.trigger($form, \"submit\");\n      setTimeout(function () {\n        return $form.remove();\n      });\n    }\n  }, {\n    key: \"getItemsContent\",\n    value: function getItemsContent(items) {\n      var args = this._getDownloadArgs(items);\n\n      var ajaxSettings = {\n        url: args.url,\n        headers: this._requestHeaders || {},\n        method: REQUEST_METHOD.POST,\n        responseType: \"arraybuffer\",\n        data: {\n          command: args.command,\n          arguments: args.arguments\n        },\n        upload: {\n          onprogress: noop,\n          onloadstart: noop,\n          onabort: noop\n        },\n        xhrFields: {},\n        cache: false\n      };\n\n      this._beforeSendInternal(ajaxSettings);\n\n      return ajax.sendRequest(ajaxSettings);\n    }\n  }, {\n    key: \"_getDownloadArgs\",\n    value: function _getDownloadArgs(items) {\n      var pathInfoList = items.map(function (item) {\n        return item.getFullPathInfo();\n      });\n      var args = {\n        pathInfoList: pathInfoList\n      };\n      var argsStr = JSON.stringify(args);\n      return {\n        url: this._endpointUrl,\n        arguments: argsStr,\n        command: FILE_SYSTEM_COMMNAD.DOWLOAD\n      };\n    }\n  }, {\n    key: \"_getItemsIds\",\n    value: function _getItemsIds(items) {\n      return items.map(function (it) {\n        return it.relativeName;\n      });\n    }\n  }, {\n    key: \"_executeRequest\",\n    value: function _executeRequest(command, args) {\n      var method = command === FILE_SYSTEM_COMMNAD.GET_DIR_CONTENTS ? REQUEST_METHOD.GET : REQUEST_METHOD.POST;\n      var deferred = new Deferred();\n      var ajaxSettings = {\n        url: this._getEndpointUrl(command, args),\n        headers: this._requestHeaders || {},\n        method: method,\n        dataType: \"json\",\n        data: {},\n        xhrFields: {},\n        cache: false\n      };\n\n      this._beforeSendInternal(ajaxSettings);\n\n      ajax.sendRequest(ajaxSettings).then(function (result) {\n        !result.success && deferred.reject(result) || deferred.resolve(result);\n      }, function (e) {\n        return deferred.reject(e);\n      });\n      return deferred.promise();\n    }\n  }, {\n    key: \"_beforeSubmitInternal\",\n    value: function _beforeSubmitInternal(formDataEntries) {\n      if (isFunction(this._beforeSubmit)) {\n        this._beforeSubmit({\n          formData: formDataEntries\n        });\n      }\n    }\n  }, {\n    key: \"_beforeSendInternal\",\n    value: function _beforeSendInternal(ajaxSettings) {\n      if (isFunction(this._beforeAjaxSend)) {\n        var ajaxArguments = {\n          headers: ajaxSettings.headers,\n          formData: ajaxSettings.data,\n          xhrFields: ajaxSettings.xhrFields\n        };\n\n        this._beforeAjaxSend(ajaxArguments);\n\n        ajaxSettings.headers = ajaxArguments.headers;\n        ajaxSettings.data = ajaxArguments.formData;\n        ajaxSettings.xhrFields = ajaxArguments.xhrFields;\n      }\n\n      if (isEmptyObject(ajaxSettings.data)) {\n        delete ajaxSettings.data;\n      } else if (ajaxSettings.responseType || ajaxSettings.upload) {\n        ajaxSettings.data = this._createFormData(ajaxSettings.data);\n      }\n    }\n  }, {\n    key: \"_createFormData\",\n    value: function _createFormData(formDataEntries) {\n      var formData = new window.FormData();\n\n      for (var entryName in formDataEntries) {\n        if (Object.prototype.hasOwnProperty.call(formDataEntries, entryName) && isDefined(formDataEntries[entryName])) {\n          formData.append(entryName, formDataEntries[entryName]);\n        }\n      }\n\n      return formData;\n    }\n  }, {\n    key: \"_appendFormDataInputsToForm\",\n    value: function _appendFormDataInputsToForm(formDataEntries, formElement) {\n      for (var entryName in formDataEntries) {\n        if (Object.prototype.hasOwnProperty.call(formDataEntries, entryName) && isDefined(formDataEntries[entryName])) {\n          $(\"<input>\").attr({\n            type: \"hidden\",\n            name: entryName,\n            value: formDataEntries[entryName]\n          }).appendTo(formElement);\n        }\n      }\n    }\n  }, {\n    key: \"_getEndpointUrl\",\n    value: function _getEndpointUrl(command, args) {\n      var queryString = this._getQueryString({\n        command: command,\n        arguments: JSON.stringify(args)\n      });\n\n      var separator = this._endpointUrl && this._endpointUrl.indexOf(\"?\") > 0 ? \"&\" : \"?\";\n      return this._endpointUrl + separator + queryString;\n    }\n  }, {\n    key: \"_getQueryString\",\n    value: function _getQueryString(params) {\n      var pairs = [];\n      var keys = Object.keys(params);\n\n      for (var i = 0; i < keys.length; i++) {\n        var key = keys[i];\n        var value = params[key];\n\n        if (void 0 === value) {\n          continue;\n        }\n\n        if (null === value) {\n          value = \"\";\n        }\n\n        if (Array.isArray(value)) {\n          this._processQueryStringArrayParam(key, value, pairs);\n        } else {\n          var pair = this._getQueryStringPair(key, value);\n\n          pairs.push(pair);\n        }\n      }\n\n      return pairs.join(\"&\");\n    }\n  }, {\n    key: \"_processQueryStringArrayParam\",\n    value: function _processQueryStringArrayParam(key, array, pairs) {\n      var _this6 = this;\n\n      each(array, function (_, item) {\n        var pair = _this6._getQueryStringPair(key, item);\n\n        pairs.push(pair);\n      });\n    }\n  }, {\n    key: \"_getQueryStringPair\",\n    value: function _getQueryStringPair(key, value) {\n      return encodeURIComponent(key) + \"=\" + encodeURIComponent(value);\n    }\n  }, {\n    key: \"_hasSubDirs\",\n    value: function _hasSubDirs(dataObj) {\n      var hasSubDirs = this._hasSubDirsGetter(dataObj);\n\n      return \"boolean\" === typeof hasSubDirs ? hasSubDirs : true;\n    }\n  }, {\n    key: \"_getKeyExpr\",\n    value: function _getKeyExpr(options) {\n      return options.keyExpr || \"key\";\n    }\n  }]);\n\n  return RemoteFileSystemProvider;\n}(FileSystemProviderBase);\n\nexport default RemoteFileSystemProvider;","map":{"version":3,"sources":["C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/devextreme/esm/file_management/remote_provider.js"],"names":["$","ajax","ensureDefined","noop","Guid","getWindow","each","Deferred","eventsEngine","FileSystemProviderBase","compileGetter","isDefined","isEmptyObject","isFunction","window","FILE_CHUNK_BLOB_NAME","FILE_SYSTEM_COMMNAD","GET_DIR_CONTENTS","CREATE_DIR","RENAME","MOVE","COPY","REMOVE","UPLOAD_CHUNK","ABORT_UPLOAD","DOWLOAD","REQUEST_METHOD","GET","POST","RemoteFileSystemProvider","options","_endpointUrl","endpointUrl","_beforeAjaxSend","beforeAjaxSend","_beforeSubmit","beforeSubmit","_requestHeaders","requestHeaders","_hasSubDirsGetter","hasSubDirectoriesExpr","parentDir","pathInfo","getFullPathInfo","_executeRequest","then","result","_convertDataObjectsToFileItems","item","name","isDirectory","items","map","destinationDirectory","sourcePathInfo","sourceIsDirectory","destinationPathInfo","destinationFolder","fileData","chunksInfo","chunkIndex","customData","uploadId","args","chunkMetadata","JSON","stringify","UploadId","FileName","Index","TotalCount","chunkCount","FileSize","size","ajaxSettings","url","headers","method","dataType","data","chunkBlob","upload","onprogress","onloadstart","onabort","xhrFields","cache","deferred","_beforeSendInternal","sendRequest","done","success","reject","resolve","fail","promise","_getDownloadArgs","$form","css","display","attr","action","formDataEntries","command","arguments","_beforeSubmitInternal","_appendFormDataInputsToForm","appendTo","trigger","setTimeout","remove","responseType","pathInfoList","argsStr","it","relativeName","_getEndpointUrl","e","formData","ajaxArguments","_createFormData","FormData","entryName","Object","prototype","hasOwnProperty","call","append","formElement","type","value","queryString","_getQueryString","separator","indexOf","params","pairs","keys","i","length","key","Array","isArray","_processQueryStringArrayParam","pair","_getQueryStringPair","push","join","array","_","encodeURIComponent","dataObj","hasSubDirs","keyExpr"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/file_management/remote_provider.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../core/renderer\";\r\nimport ajax from \"../core/utils/ajax\";\r\nimport {\r\n    ensureDefined,\r\n    noop\r\n} from \"../core/utils/common\";\r\nimport Guid from \"../core/guid\";\r\nimport {\r\n    getWindow\r\n} from \"../core/utils/window\";\r\nimport {\r\n    each\r\n} from \"../core/utils/iterator\";\r\nimport {\r\n    Deferred\r\n} from \"../core/utils/deferred\";\r\nimport eventsEngine from \"../events/core/events_engine\";\r\nimport FileSystemProviderBase from \"./provider_base\";\r\nimport {\r\n    compileGetter\r\n} from \"../core/utils/data\";\r\nimport {\r\n    isDefined,\r\n    isEmptyObject,\r\n    isFunction\r\n} from \"../core/utils/type\";\r\nvar window = getWindow();\r\nvar FILE_CHUNK_BLOB_NAME = \"chunk\";\r\nvar FILE_SYSTEM_COMMNAD = {\r\n    GET_DIR_CONTENTS: \"GetDirContents\",\r\n    CREATE_DIR: \"CreateDir\",\r\n    RENAME: \"Rename\",\r\n    MOVE: \"Move\",\r\n    COPY: \"Copy\",\r\n    REMOVE: \"Remove\",\r\n    UPLOAD_CHUNK: \"UploadChunk\",\r\n    ABORT_UPLOAD: \"AbortUpload\",\r\n    DOWLOAD: \"Download\"\r\n};\r\nvar REQUEST_METHOD = {\r\n    GET: \"GET\",\r\n    POST: \"POST\"\r\n};\r\nclass RemoteFileSystemProvider extends FileSystemProviderBase {\r\n    constructor(options) {\r\n        options = ensureDefined(options, {});\r\n        super(options);\r\n        this._endpointUrl = options.endpointUrl;\r\n        this._beforeAjaxSend = options.beforeAjaxSend;\r\n        this._beforeSubmit = options.beforeSubmit;\r\n        this._requestHeaders = options.requestHeaders;\r\n        this._hasSubDirsGetter = compileGetter(options.hasSubDirectoriesExpr || \"hasSubDirectories\")\r\n    }\r\n    getItems(parentDir) {\r\n        var pathInfo = parentDir.getFullPathInfo();\r\n        return this._executeRequest(FILE_SYSTEM_COMMNAD.GET_DIR_CONTENTS, {\r\n            pathInfo: pathInfo\r\n        }).then(result => this._convertDataObjectsToFileItems(result.result, pathInfo))\r\n    }\r\n    renameItem(item, name) {\r\n        return this._executeRequest(FILE_SYSTEM_COMMNAD.RENAME, {\r\n            pathInfo: item.getFullPathInfo(),\r\n            isDirectory: item.isDirectory,\r\n            name: name\r\n        })\r\n    }\r\n    createDirectory(parentDir, name) {\r\n        return this._executeRequest(FILE_SYSTEM_COMMNAD.CREATE_DIR, {\r\n            pathInfo: parentDir.getFullPathInfo(),\r\n            name: name\r\n        })\r\n    }\r\n    deleteItems(items) {\r\n        return items.map(item => this._executeRequest(FILE_SYSTEM_COMMNAD.REMOVE, {\r\n            pathInfo: item.getFullPathInfo(),\r\n            isDirectory: item.isDirectory\r\n        }))\r\n    }\r\n    moveItems(items, destinationDirectory) {\r\n        return items.map(item => this._executeRequest(FILE_SYSTEM_COMMNAD.MOVE, {\r\n            sourcePathInfo: item.getFullPathInfo(),\r\n            sourceIsDirectory: item.isDirectory,\r\n            destinationPathInfo: destinationDirectory.getFullPathInfo()\r\n        }))\r\n    }\r\n    copyItems(items, destinationFolder) {\r\n        return items.map(item => this._executeRequest(FILE_SYSTEM_COMMNAD.COPY, {\r\n            sourcePathInfo: item.getFullPathInfo(),\r\n            sourceIsDirectory: item.isDirectory,\r\n            destinationPathInfo: destinationFolder.getFullPathInfo()\r\n        }))\r\n    }\r\n    uploadFileChunk(fileData, chunksInfo, destinationDirectory) {\r\n        if (0 === chunksInfo.chunkIndex) {\r\n            chunksInfo.customData.uploadId = new Guid\r\n        }\r\n        var args = {\r\n            destinationPathInfo: destinationDirectory.getFullPathInfo(),\r\n            chunkMetadata: JSON.stringify({\r\n                UploadId: chunksInfo.customData.uploadId,\r\n                FileName: fileData.name,\r\n                Index: chunksInfo.chunkIndex,\r\n                TotalCount: chunksInfo.chunkCount,\r\n                FileSize: fileData.size\r\n            })\r\n        };\r\n        var ajaxSettings = {\r\n            url: this._endpointUrl,\r\n            headers: this._requestHeaders || {},\r\n            method: REQUEST_METHOD.POST,\r\n            dataType: \"json\",\r\n            data: {\r\n                [FILE_CHUNK_BLOB_NAME]: chunksInfo.chunkBlob,\r\n                arguments: JSON.stringify(args),\r\n                command: FILE_SYSTEM_COMMNAD.UPLOAD_CHUNK\r\n            },\r\n            upload: {\r\n                onprogress: noop,\r\n                onloadstart: noop,\r\n                onabort: noop\r\n            },\r\n            xhrFields: {},\r\n            cache: false\r\n        };\r\n        var deferred = new Deferred;\r\n        this._beforeSendInternal(ajaxSettings);\r\n        ajax.sendRequest(ajaxSettings).done(result => {\r\n            !result.success && deferred.reject(result) || deferred.resolve()\r\n        }).fail(deferred.reject);\r\n        return deferred.promise()\r\n    }\r\n    abortFileUpload(fileData, chunksInfo, destinationDirectory) {\r\n        return this._executeRequest(FILE_SYSTEM_COMMNAD.ABORT_UPLOAD, {\r\n            uploadId: chunksInfo.customData.uploadId\r\n        })\r\n    }\r\n    downloadItems(items) {\r\n        var args = this._getDownloadArgs(items);\r\n        var $form = $(\"<form>\").css({\r\n            display: \"none\"\r\n        }).attr({\r\n            method: REQUEST_METHOD.POST,\r\n            action: args.url\r\n        });\r\n        var formDataEntries = {\r\n            command: args.command,\r\n            arguments: args.arguments\r\n        };\r\n        this._beforeSubmitInternal(formDataEntries);\r\n        this._appendFormDataInputsToForm(formDataEntries, $form);\r\n        $form.appendTo(\"body\");\r\n        eventsEngine.trigger($form, \"submit\");\r\n        setTimeout(() => $form.remove())\r\n    }\r\n    getItemsContent(items) {\r\n        var args = this._getDownloadArgs(items);\r\n        var ajaxSettings = {\r\n            url: args.url,\r\n            headers: this._requestHeaders || {},\r\n            method: REQUEST_METHOD.POST,\r\n            responseType: \"arraybuffer\",\r\n            data: {\r\n                command: args.command,\r\n                arguments: args.arguments\r\n            },\r\n            upload: {\r\n                onprogress: noop,\r\n                onloadstart: noop,\r\n                onabort: noop\r\n            },\r\n            xhrFields: {},\r\n            cache: false\r\n        };\r\n        this._beforeSendInternal(ajaxSettings);\r\n        return ajax.sendRequest(ajaxSettings)\r\n    }\r\n    _getDownloadArgs(items) {\r\n        var pathInfoList = items.map(item => item.getFullPathInfo());\r\n        var args = {\r\n            pathInfoList: pathInfoList\r\n        };\r\n        var argsStr = JSON.stringify(args);\r\n        return {\r\n            url: this._endpointUrl,\r\n            arguments: argsStr,\r\n            command: FILE_SYSTEM_COMMNAD.DOWLOAD\r\n        }\r\n    }\r\n    _getItemsIds(items) {\r\n        return items.map(it => it.relativeName)\r\n    }\r\n    _executeRequest(command, args) {\r\n        var method = command === FILE_SYSTEM_COMMNAD.GET_DIR_CONTENTS ? REQUEST_METHOD.GET : REQUEST_METHOD.POST;\r\n        var deferred = new Deferred;\r\n        var ajaxSettings = {\r\n            url: this._getEndpointUrl(command, args),\r\n            headers: this._requestHeaders || {},\r\n            method: method,\r\n            dataType: \"json\",\r\n            data: {},\r\n            xhrFields: {},\r\n            cache: false\r\n        };\r\n        this._beforeSendInternal(ajaxSettings);\r\n        ajax.sendRequest(ajaxSettings).then(result => {\r\n            !result.success && deferred.reject(result) || deferred.resolve(result)\r\n        }, e => deferred.reject(e));\r\n        return deferred.promise()\r\n    }\r\n    _beforeSubmitInternal(formDataEntries) {\r\n        if (isFunction(this._beforeSubmit)) {\r\n            this._beforeSubmit({\r\n                formData: formDataEntries\r\n            })\r\n        }\r\n    }\r\n    _beforeSendInternal(ajaxSettings) {\r\n        if (isFunction(this._beforeAjaxSend)) {\r\n            var ajaxArguments = {\r\n                headers: ajaxSettings.headers,\r\n                formData: ajaxSettings.data,\r\n                xhrFields: ajaxSettings.xhrFields\r\n            };\r\n            this._beforeAjaxSend(ajaxArguments);\r\n            ajaxSettings.headers = ajaxArguments.headers;\r\n            ajaxSettings.data = ajaxArguments.formData;\r\n            ajaxSettings.xhrFields = ajaxArguments.xhrFields\r\n        }\r\n        if (isEmptyObject(ajaxSettings.data)) {\r\n            delete ajaxSettings.data\r\n        } else if (ajaxSettings.responseType || ajaxSettings.upload) {\r\n            ajaxSettings.data = this._createFormData(ajaxSettings.data)\r\n        }\r\n    }\r\n    _createFormData(formDataEntries) {\r\n        var formData = new window.FormData;\r\n        for (var entryName in formDataEntries) {\r\n            if (Object.prototype.hasOwnProperty.call(formDataEntries, entryName) && isDefined(formDataEntries[entryName])) {\r\n                formData.append(entryName, formDataEntries[entryName])\r\n            }\r\n        }\r\n        return formData\r\n    }\r\n    _appendFormDataInputsToForm(formDataEntries, formElement) {\r\n        for (var entryName in formDataEntries) {\r\n            if (Object.prototype.hasOwnProperty.call(formDataEntries, entryName) && isDefined(formDataEntries[entryName])) {\r\n                $(\"<input>\").attr({\r\n                    type: \"hidden\",\r\n                    name: entryName,\r\n                    value: formDataEntries[entryName]\r\n                }).appendTo(formElement)\r\n            }\r\n        }\r\n    }\r\n    _getEndpointUrl(command, args) {\r\n        var queryString = this._getQueryString({\r\n            command: command,\r\n            arguments: JSON.stringify(args)\r\n        });\r\n        var separator = this._endpointUrl && this._endpointUrl.indexOf(\"?\") > 0 ? \"&\" : \"?\";\r\n        return this._endpointUrl + separator + queryString\r\n    }\r\n    _getQueryString(params) {\r\n        var pairs = [];\r\n        var keys = Object.keys(params);\r\n        for (var i = 0; i < keys.length; i++) {\r\n            var key = keys[i];\r\n            var value = params[key];\r\n            if (void 0 === value) {\r\n                continue\r\n            }\r\n            if (null === value) {\r\n                value = \"\"\r\n            }\r\n            if (Array.isArray(value)) {\r\n                this._processQueryStringArrayParam(key, value, pairs)\r\n            } else {\r\n                var pair = this._getQueryStringPair(key, value);\r\n                pairs.push(pair)\r\n            }\r\n        }\r\n        return pairs.join(\"&\")\r\n    }\r\n    _processQueryStringArrayParam(key, array, pairs) {\r\n        each(array, (_, item) => {\r\n            var pair = this._getQueryStringPair(key, item);\r\n            pairs.push(pair)\r\n        })\r\n    }\r\n    _getQueryStringPair(key, value) {\r\n        return encodeURIComponent(key) + \"=\" + encodeURIComponent(value)\r\n    }\r\n    _hasSubDirs(dataObj) {\r\n        var hasSubDirs = this._hasSubDirsGetter(dataObj);\r\n        return \"boolean\" === typeof hasSubDirs ? hasSubDirs : true\r\n    }\r\n    _getKeyExpr(options) {\r\n        return options.keyExpr || \"key\"\r\n    }\r\n}\r\nexport default RemoteFileSystemProvider;\r\n"]},"metadata":{},"sourceType":"module"}