{"ast":null,"code":"/**\r\n * DevExtreme (esm/viz/tree_map/selection.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport TreeMapBase from \"./tree_map.base\";\nimport Node from \"./node\";\nimport { expand } from \"../core/helpers\";\nimport { buildRectAppearance } from \"./common\";\nvar proto = TreeMapBase.prototype;\nvar nodeProto = Node.prototype;\nimport { normalizeEnum as _normalizeEnum } from \"../core/utils\";\nimport { inArray as _inArray } from \"../../core/utils/array\";\nvar MODE_NONE = 0;\nvar MODE_SINGLE = 1;\nvar MODE_MULTIPLE = 2;\nvar STATE_CODE = 2;\nimport \"./api\";\nimport \"./states\";\nproto._eventsMap.onSelectionChanged = {\n  name: \"selectionChanged\"\n};\nexpand(proto._handlers, \"calculateAdditionalStates\", function (states, options) {\n  states[2] = options.selectionStyle ? buildRectAppearance(options.selectionStyle) : {};\n});\nnodeProto.statesMap[2] = nodeProto.statesMap[3] = STATE_CODE;\nnodeProto.additionalStates.push(2);\nexpand(proto, \"_onNodesCreated\", function () {\n  this._selectionList.length = 0;\n});\nexpand(proto, \"_extendProxyType\", function (proto) {\n  var that = this;\n\n  proto.select = function (state) {\n    that._selectNode(this._id, !!state);\n  };\n\n  proto.isSelected = function () {\n    return _inArray(this._id, that._selectionList) >= 0;\n  };\n\n  that._selectionList = [];\n});\nTreeMapBase.addChange({\n  code: \"SELECTION_MODE\",\n  handler: function handler() {\n    var option = _normalizeEnum(this._getOption(\"selectionMode\", true));\n\n    var selectionList = this._selectionList;\n    var tmp;\n    var mode = \"none\" === option ? MODE_NONE : \"multiple\" === option ? MODE_MULTIPLE : MODE_SINGLE;\n\n    if (mode === MODE_SINGLE && selectionList.length > 1) {\n      tmp = selectionList.pop();\n      this.clearSelection();\n      selectionList.push(tmp);\n    } else if (mode === MODE_NONE) {\n      this.clearSelection();\n    }\n\n    this._selectionMode = mode;\n  },\n  isThemeDependent: true,\n  isOptionChange: true,\n  option: \"selectionMode\"\n});\nexpand(proto, \"_applyTilesAppearance\", function () {\n  if (this._selectionList.length) {\n    bringSelectedTilesToForeground(this._nodes, this._selectionList);\n  }\n});\nvar tileToFront = [leafToFront, groupToFront];\n\nfunction bringSelectedTilesToForeground(nodes, selectionList) {\n  var i;\n  var ii = selectionList.length;\n  var node;\n\n  for (i = 0; i < ii; ++i) {\n    node = nodes[selectionList[i]];\n    tileToFront[Number(node.isNode())](node.tile);\n  }\n}\n\nfunction leafToFront(content) {\n  content.toForeground();\n}\n\nfunction groupToFront(content) {\n  content.outer.toForeground();\n  content.inner.toForeground();\n}\n\nproto._applySelectionState = function (index, state) {\n  var node = this._nodes[index];\n  node.setState(STATE_CODE, state);\n\n  this._eventTrigger(\"selectionChanged\", {\n    node: node.proxy\n  });\n};\n\nproto._selectNode = function (index, state) {\n  var selectionList;\n  var k;\n  var tmp;\n\n  if (this._selectionMode !== MODE_NONE) {\n    this._context.suspend();\n\n    selectionList = this._selectionList;\n    k = _inArray(index, selectionList);\n\n    if (state && -1 === k) {\n      if (this._selectionMode === MODE_SINGLE) {\n        if (selectionList.length) {\n          tmp = selectionList.pop();\n\n          this._applySelectionState(tmp, false);\n        }\n      }\n\n      selectionList.push(index);\n\n      this._applySelectionState(index, true);\n    } else if (!state && k >= 0) {\n      selectionList.splice(k, 1);\n\n      this._applySelectionState(index, false);\n    }\n\n    this._context.resume();\n  }\n};\n\nproto.clearSelection = function () {\n  var selectionList = this._selectionList;\n  var i;\n  var ii = selectionList.length;\n\n  if (this._selectionMode !== MODE_NONE) {\n    this._context.suspend();\n\n    for (i = 0; i < ii; ++i) {\n      this._applySelectionState(selectionList[i], false);\n    }\n\n    selectionList.length = 0;\n\n    this._context.resume();\n  }\n};","map":{"version":3,"sources":["C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/devextreme/esm/viz/tree_map/selection.js"],"names":["TreeMapBase","Node","expand","buildRectAppearance","proto","prototype","nodeProto","normalizeEnum","_normalizeEnum","inArray","_inArray","MODE_NONE","MODE_SINGLE","MODE_MULTIPLE","STATE_CODE","_eventsMap","onSelectionChanged","name","_handlers","states","options","selectionStyle","statesMap","additionalStates","push","_selectionList","length","that","select","state","_selectNode","_id","isSelected","addChange","code","handler","option","_getOption","selectionList","tmp","mode","pop","clearSelection","_selectionMode","isThemeDependent","isOptionChange","bringSelectedTilesToForeground","_nodes","tileToFront","leafToFront","groupToFront","nodes","i","ii","node","Number","isNode","tile","content","toForeground","outer","inner","_applySelectionState","index","setState","_eventTrigger","proxy","k","_context","suspend","splice","resume"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/viz/tree_map/selection.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport TreeMapBase from \"./tree_map.base\";\r\nimport Node from \"./node\";\r\nimport {\r\n    expand\r\n} from \"../core/helpers\";\r\nimport {\r\n    buildRectAppearance\r\n} from \"./common\";\r\nvar proto = TreeMapBase.prototype;\r\nvar nodeProto = Node.prototype;\r\nimport {\r\n    normalizeEnum as _normalizeEnum\r\n} from \"../core/utils\";\r\nimport {\r\n    inArray as _inArray\r\n} from \"../../core/utils/array\";\r\nvar MODE_NONE = 0;\r\nvar MODE_SINGLE = 1;\r\nvar MODE_MULTIPLE = 2;\r\nvar STATE_CODE = 2;\r\nimport \"./api\";\r\nimport \"./states\";\r\nproto._eventsMap.onSelectionChanged = {\r\n    name: \"selectionChanged\"\r\n};\r\nexpand(proto._handlers, \"calculateAdditionalStates\", (function(states, options) {\r\n    states[2] = options.selectionStyle ? buildRectAppearance(options.selectionStyle) : {}\r\n}));\r\nnodeProto.statesMap[2] = nodeProto.statesMap[3] = STATE_CODE;\r\nnodeProto.additionalStates.push(2);\r\nexpand(proto, \"_onNodesCreated\", (function() {\r\n    this._selectionList.length = 0\r\n}));\r\nexpand(proto, \"_extendProxyType\", (function(proto) {\r\n    var that = this;\r\n    proto.select = function(state) {\r\n        that._selectNode(this._id, !!state)\r\n    };\r\n    proto.isSelected = function() {\r\n        return _inArray(this._id, that._selectionList) >= 0\r\n    };\r\n    that._selectionList = []\r\n}));\r\nTreeMapBase.addChange({\r\n    code: \"SELECTION_MODE\",\r\n    handler: function() {\r\n        var option = _normalizeEnum(this._getOption(\"selectionMode\", true));\r\n        var selectionList = this._selectionList;\r\n        var tmp;\r\n        var mode = \"none\" === option ? MODE_NONE : \"multiple\" === option ? MODE_MULTIPLE : MODE_SINGLE;\r\n        if (mode === MODE_SINGLE && selectionList.length > 1) {\r\n            tmp = selectionList.pop();\r\n            this.clearSelection();\r\n            selectionList.push(tmp)\r\n        } else if (mode === MODE_NONE) {\r\n            this.clearSelection()\r\n        }\r\n        this._selectionMode = mode\r\n    },\r\n    isThemeDependent: true,\r\n    isOptionChange: true,\r\n    option: \"selectionMode\"\r\n});\r\nexpand(proto, \"_applyTilesAppearance\", (function() {\r\n    if (this._selectionList.length) {\r\n        bringSelectedTilesToForeground(this._nodes, this._selectionList)\r\n    }\r\n}));\r\nvar tileToFront = [leafToFront, groupToFront];\r\n\r\nfunction bringSelectedTilesToForeground(nodes, selectionList) {\r\n    var i;\r\n    var ii = selectionList.length;\r\n    var node;\r\n    for (i = 0; i < ii; ++i) {\r\n        node = nodes[selectionList[i]];\r\n        tileToFront[Number(node.isNode())](node.tile)\r\n    }\r\n}\r\n\r\nfunction leafToFront(content) {\r\n    content.toForeground()\r\n}\r\n\r\nfunction groupToFront(content) {\r\n    content.outer.toForeground();\r\n    content.inner.toForeground()\r\n}\r\nproto._applySelectionState = function(index, state) {\r\n    var node = this._nodes[index];\r\n    node.setState(STATE_CODE, state);\r\n    this._eventTrigger(\"selectionChanged\", {\r\n        node: node.proxy\r\n    })\r\n};\r\nproto._selectNode = function(index, state) {\r\n    var selectionList;\r\n    var k;\r\n    var tmp;\r\n    if (this._selectionMode !== MODE_NONE) {\r\n        this._context.suspend();\r\n        selectionList = this._selectionList;\r\n        k = _inArray(index, selectionList);\r\n        if (state && -1 === k) {\r\n            if (this._selectionMode === MODE_SINGLE) {\r\n                if (selectionList.length) {\r\n                    tmp = selectionList.pop();\r\n                    this._applySelectionState(tmp, false)\r\n                }\r\n            }\r\n            selectionList.push(index);\r\n            this._applySelectionState(index, true)\r\n        } else if (!state && k >= 0) {\r\n            selectionList.splice(k, 1);\r\n            this._applySelectionState(index, false)\r\n        }\r\n        this._context.resume()\r\n    }\r\n};\r\nproto.clearSelection = function() {\r\n    var selectionList = this._selectionList;\r\n    var i;\r\n    var ii = selectionList.length;\r\n    if (this._selectionMode !== MODE_NONE) {\r\n        this._context.suspend();\r\n        for (i = 0; i < ii; ++i) {\r\n            this._applySelectionState(selectionList[i], false)\r\n        }\r\n        selectionList.length = 0;\r\n        this._context.resume()\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}