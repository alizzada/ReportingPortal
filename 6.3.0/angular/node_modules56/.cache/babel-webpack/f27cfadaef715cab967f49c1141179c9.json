{"ast":null,"code":"import _defineProperty from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\n/**\r\n * DevExtreme (esm/viz/chart_components/advanced_chart.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { extend as _extend } from \"../../core/utils/extend\";\nimport { inArray } from \"../../core/utils/array\";\nimport { each as _each, reverseEach as _reverseEach } from \"../../core/utils/iterator\";\nimport { Range } from \"../translators/range\";\nimport { Axis } from \"../axes/base_axis\";\nimport { SeriesFamily } from \"../core/series_family\";\nimport { BaseChart } from \"./base_chart\";\nimport { getMargins } from \"./crosshair\";\nimport rangeDataCalculator from \"../series/helpers/range_data_calculator\";\nimport { isDefined as _isDefined, type } from \"../../core/utils/type\";\nimport { noop as _noop } from \"../../core/utils/common\";\nimport { convertVisualRangeObject, rangesAreEqual, map as _map, mergeMarginOptions, setCanvasValues, unique } from \"../core/utils\";\nvar _isArray = Array.isArray;\nvar DEFAULT_AXIS_NAME = \"defaultAxisName\";\nvar FONT = \"font\";\nvar COMMON_AXIS_SETTINGS = \"commonAxisSettings\";\nvar DEFAULT_PANE_NAME = \"default\";\nvar VISUAL_RANGE = \"VISUAL_RANGE\";\n\nfunction prepareAxis(axisOptions) {\n  return _isArray(axisOptions) ? 0 === axisOptions.length ? [{}] : axisOptions : [axisOptions];\n}\n\nfunction processBubbleMargin(opt, bubbleSize) {\n  if (opt.processBubbleSize) {\n    opt.size = bubbleSize;\n  }\n\n  return opt;\n}\n\nfunction estimateBubbleSize(size, panesCount, maxSize, rotated) {\n  var width = rotated ? size.width / panesCount : size.width;\n  var height = rotated ? size.height : size.height / panesCount;\n  return Math.min(width, height) * maxSize;\n}\n\nfunction setAxisVisualRangeByOption(arg, axis, isDirectOption, index) {\n  var options;\n  var visualRange;\n\n  if (isDirectOption) {\n    visualRange = arg.value;\n    options = {\n      skipEventRising: true\n    };\n    var wrappedVisualRange = wrapVisualRange(arg.fullName, visualRange);\n\n    if (wrappedVisualRange) {\n      options = {\n        allowPartialUpdate: true\n      };\n      visualRange = wrappedVisualRange;\n    }\n  } else {\n    visualRange = (_isDefined(index) ? arg.value[index] : arg.value).visualRange;\n  }\n\n  axis.visualRange(visualRange, options);\n}\n\nfunction getAxisTypes(groupsData, axis, isArgumentAxes) {\n  if (isArgumentAxes) {\n    return {\n      argumentAxisType: groupsData.argumentAxisType,\n      argumentType: groupsData.argumentType\n    };\n  }\n\n  var _groupsData$groups$fi = groupsData.groups.filter(function (g) {\n    return g.valueAxis === axis;\n  })[0],\n      valueAxisType = _groupsData$groups$fi.valueAxisType,\n      valueType = _groupsData$groups$fi.valueType;\n  return {\n    valueAxisType: valueAxisType,\n    valueType: valueType\n  };\n}\n\nfunction wrapVisualRange(fullName, value) {\n  var pathElements = fullName.split(\".\");\n  var destElem = pathElements[pathElements.length - 1];\n\n  if (\"endValue\" === destElem || \"startValue\" === destElem) {\n    return _defineProperty({}, destElem, value);\n  }\n}\n\nexport var AdvancedChart = BaseChart.inherit({\n  _fontFields: [COMMON_AXIS_SETTINGS + \".label.\" + FONT, COMMON_AXIS_SETTINGS + \".title.\" + FONT],\n  _partialOptionChangesMap: {\n    visualRange: VISUAL_RANGE,\n    _customVisualRange: VISUAL_RANGE,\n    strips: \"REFRESH_AXES\",\n    constantLines: \"REFRESH_AXES\"\n  },\n  _partialOptionChangesPath: {\n    argumentAxis: [\"strips\", \"constantLines\", \"visualRange\", \"_customVisualRange\"],\n    valueAxis: [\"strips\", \"constantLines\", \"visualRange\", \"_customVisualRange\"]\n  },\n  _initCore: function _initCore() {\n    this._panesClipRects = {};\n    this.callBase();\n  },\n  _disposeCore: function _disposeCore() {\n    var disposeObjectsInArray = this._disposeObjectsInArray;\n    var panesClipRects = this._panesClipRects;\n    this.callBase();\n    disposeObjectsInArray.call(panesClipRects, \"fixed\");\n    disposeObjectsInArray.call(panesClipRects, \"base\");\n    disposeObjectsInArray.call(panesClipRects, \"wide\");\n    this._panesClipRects = null;\n  },\n  _dispose: function _dispose() {\n    var disposeObjectsInArray = this._disposeObjectsInArray;\n    this.callBase();\n    this.panes = null;\n\n    if (this._legend) {\n      this._legend.dispose();\n\n      this._legend = null;\n    }\n\n    disposeObjectsInArray.call(this, \"panesBackground\");\n    disposeObjectsInArray.call(this, \"seriesFamilies\");\n\n    this._disposeAxes();\n  },\n  _createPanes: function _createPanes() {\n    this._cleanPanesClipRects(\"fixed\");\n\n    this._cleanPanesClipRects(\"base\");\n\n    this._cleanPanesClipRects(\"wide\");\n  },\n  _cleanPanesClipRects: function _cleanPanesClipRects(clipArrayName) {\n    var clipArray = this._panesClipRects[clipArrayName];\n    (clipArray || []).forEach(function (clipRect) {\n      return clipRect && clipRect.dispose();\n    });\n    this._panesClipRects[clipArrayName] = [];\n  },\n  _getElementsClipRectID: function _getElementsClipRectID(paneName) {\n    var clipShape = this._panesClipRects.fixed[this._getPaneIndex(paneName)];\n\n    return clipShape && clipShape.id;\n  },\n  _getPaneIndex: function _getPaneIndex(paneName) {\n    var paneIndex;\n    var name = paneName || DEFAULT_PANE_NAME;\n\n    _each(this.panes, function (index, pane) {\n      if (pane.name === name) {\n        paneIndex = index;\n        return false;\n      }\n    });\n\n    return paneIndex;\n  },\n  _updateSize: function _updateSize() {\n    this.callBase();\n    setCanvasValues(this._canvas);\n  },\n  _reinitAxes: function _reinitAxes() {\n    this.panes = this._createPanes();\n\n    this._populateAxes();\n\n    this._axesReinitialized = true;\n  },\n  _getCrosshairMargins: function _getCrosshairMargins() {\n    var crosshairOptions = this._getCrosshairOptions() || {};\n    var crosshairEnabled = crosshairOptions.enabled;\n    var margins = getMargins();\n    return {\n      x: crosshairEnabled && crosshairOptions.horizontalLine.visible ? margins.x : 0,\n      y: crosshairEnabled && crosshairOptions.verticalLine.visible ? margins.y : 0\n    };\n  },\n  _populateAxes: function _populateAxes() {\n    var that = this;\n    var panes = that.panes;\n\n    var rotated = that._isRotated();\n\n    var argumentAxesOptions = prepareAxis(that.option(\"argumentAxis\") || {})[0];\n    var valueAxisOption = that.option(\"valueAxis\");\n    var valueAxesOptions = prepareAxis(valueAxisOption || {});\n    var argumentAxesPopulatedOptions;\n    var valueAxesPopulatedOptions = [];\n    var axisNames = [];\n    var valueAxesCounter = 0;\n    var paneWithNonVirtualAxis;\n\n    var crosshairMargins = that._getCrosshairMargins();\n\n    if (rotated) {\n      paneWithNonVirtualAxis = \"right\" === argumentAxesOptions.position ? panes[panes.length - 1].name : panes[0].name;\n    } else {\n      paneWithNonVirtualAxis = \"top\" === argumentAxesOptions.position ? panes[0].name : panes[panes.length - 1].name;\n    }\n\n    argumentAxesPopulatedOptions = _map(panes, function (pane) {\n      var virtual = pane.name !== paneWithNonVirtualAxis;\n      return that._populateAxesOptions(\"argumentAxis\", argumentAxesOptions, {\n        pane: pane.name,\n        name: null,\n        optionPath: \"argumentAxis\",\n        crosshairMargin: rotated ? crosshairMargins.x : crosshairMargins.y\n      }, rotated, virtual);\n    });\n\n    _each(valueAxesOptions, function (priority, axisOptions) {\n      var _axisOptions$panes;\n\n      var axisPanes = [];\n      var name = axisOptions.name;\n\n      if (name && -1 !== inArray(name, axisNames)) {\n        that._incidentOccurred(\"E2102\");\n\n        return;\n      }\n\n      name && axisNames.push(name);\n\n      if (axisOptions.pane) {\n        axisPanes.push(axisOptions.pane);\n      }\n\n      if (null !== (_axisOptions$panes = axisOptions.panes) && void 0 !== _axisOptions$panes && _axisOptions$panes.length) {\n        axisPanes = axisPanes.concat(axisOptions.panes.slice(0));\n      }\n\n      axisPanes = unique(axisPanes);\n\n      if (!axisPanes.length) {\n        axisPanes.push(void 0);\n      }\n\n      _each(axisPanes, function (_, pane) {\n        var optionPath = _isArray(valueAxisOption) ? \"valueAxis[\".concat(priority, \"]\") : \"valueAxis\";\n        valueAxesPopulatedOptions.push(that._populateAxesOptions(\"valueAxis\", axisOptions, {\n          name: name || DEFAULT_AXIS_NAME + valueAxesCounter++,\n          pane: pane,\n          priority: priority,\n          optionPath: optionPath,\n          crosshairMargin: rotated ? crosshairMargins.y : crosshairMargins.x\n        }, rotated));\n      });\n    });\n\n    that._redesignAxes(argumentAxesPopulatedOptions, true, paneWithNonVirtualAxis);\n\n    that._redesignAxes(valueAxesPopulatedOptions, false);\n  },\n  _redesignAxes: function _redesignAxes(options, isArgumentAxes, paneWithNonVirtualAxis) {\n    var that = this;\n    var axesBasis = [];\n    var axes = isArgumentAxes ? that._argumentAxes : that._valueAxes;\n\n    _each(options, function (_, opt) {\n      var curAxes = axes && axes.filter(function (a) {\n        return a.name === opt.name && (!_isDefined(opt.pane) && that.panes.some(function (p) {\n          return p.name === a.pane;\n        }) || a.pane === opt.pane);\n      });\n\n      if (curAxes && curAxes.length > 0) {\n        _each(curAxes, function (_, axis) {\n          var axisTypes = getAxisTypes(that._groupsData, axis, isArgumentAxes);\n          axis.updateOptions(opt);\n\n          if (isArgumentAxes) {\n            axis.setTypes(axisTypes.argumentAxisType, axisTypes.argumentType, \"argumentType\");\n          } else {\n            axis.setTypes(axisTypes.valueAxisType, axisTypes.valueType, \"valueType\");\n          }\n\n          axis.validate();\n          axesBasis.push({\n            axis: axis\n          });\n        });\n      } else {\n        axesBasis.push({\n          options: opt\n        });\n      }\n    });\n\n    if (axes) {\n      _reverseEach(axes, function (index, axis) {\n        if (!axesBasis.some(function (basis) {\n          return basis.axis && basis.axis === axis;\n        })) {\n          that._disposeAxis(index, isArgumentAxes);\n        }\n      });\n    } else if (isArgumentAxes) {\n      axes = that._argumentAxes = [];\n    } else {\n      axes = that._valueAxes = [];\n    }\n\n    _each(axesBasis, function (_, basis) {\n      var axis = basis.axis;\n\n      if (basis.axis && isArgumentAxes) {\n        basis.axis.isVirtual = basis.axis.pane !== paneWithNonVirtualAxis;\n      } else if (basis.options) {\n        axis = that._createAxis(isArgumentAxes, basis.options, isArgumentAxes ? basis.options.pane !== paneWithNonVirtualAxis : void 0);\n        axes.push(axis);\n      }\n\n      axis.applyVisualRangeSetter(that._getVisualRangeSetter());\n    });\n  },\n  _disposeAxis: function _disposeAxis(index, isArgumentAxis) {\n    var axes = isArgumentAxis ? this._argumentAxes : this._valueAxes;\n    var axis = axes[index];\n\n    if (!axis) {\n      return;\n    }\n\n    axis.dispose();\n    axes.splice(index, 1);\n  },\n  _disposeAxes: function _disposeAxes() {\n    var disposeObjectsInArray = this._disposeObjectsInArray;\n    disposeObjectsInArray.call(this, \"_argumentAxes\");\n    disposeObjectsInArray.call(this, \"_valueAxes\");\n  },\n  _appendAdditionalSeriesGroups: function _appendAdditionalSeriesGroups() {\n    this._crosshairCursorGroup.linkAppend();\n\n    this._scrollBar && this._scrollBarGroup.linkAppend();\n  },\n  _getLegendTargets: function _getLegendTargets() {\n    var _this = this;\n\n    return (this.series || []).map(function (s) {\n      var item = _this._getLegendOptions(s);\n\n      item.legendData.series = s;\n\n      if (!s.getOptions().showInLegend) {\n        item.legendData.visible = false;\n      }\n\n      return item;\n    });\n  },\n  _legendItemTextField: \"name\",\n  _seriesPopulatedHandlerCore: function _seriesPopulatedHandlerCore() {\n    this._processSeriesFamilies();\n\n    this._processValueAxisFormat();\n  },\n  _renderTrackers: function _renderTrackers() {\n    var i;\n\n    for (i = 0; i < this.series.length; ++i) {\n      this.series[i].drawTrackers();\n    }\n  },\n  _specialProcessSeries: function _specialProcessSeries() {\n    this._processSeriesFamilies();\n  },\n  _processSeriesFamilies: function _processSeriesFamilies() {\n    var _that$seriesFamilies;\n\n    var that = this;\n    var types = [];\n    var families = [];\n    var paneSeries;\n    var themeManager = that._themeManager;\n    var negativesAsZeroes = themeManager.getOptions(\"negativesAsZeroes\");\n    var negativesAsZeros = themeManager.getOptions(\"negativesAsZeros\");\n    var familyOptions = {\n      minBubbleSize: themeManager.getOptions(\"minBubbleSize\"),\n      maxBubbleSize: themeManager.getOptions(\"maxBubbleSize\"),\n      barGroupPadding: themeManager.getOptions(\"barGroupPadding\"),\n      barGroupWidth: themeManager.getOptions(\"barGroupWidth\"),\n      negativesAsZeroes: _isDefined(negativesAsZeroes) ? negativesAsZeroes : negativesAsZeros\n    };\n\n    if (null !== (_that$seriesFamilies = that.seriesFamilies) && void 0 !== _that$seriesFamilies && _that$seriesFamilies.length) {\n      _each(that.seriesFamilies, function (_, family) {\n        family.updateOptions(familyOptions);\n        family.adjustSeriesValues();\n      });\n\n      return;\n    }\n\n    _each(that.series, function (_, item) {\n      if (-1 === inArray(item.type, types)) {\n        types.push(item.type);\n      }\n    });\n\n    _each(that._getLayoutTargets(), function (_, pane) {\n      paneSeries = that._getSeriesForPane(pane.name);\n\n      _each(types, function (_, type) {\n        var family = new SeriesFamily({\n          type: type,\n          pane: pane.name,\n          minBubbleSize: familyOptions.minBubbleSize,\n          maxBubbleSize: familyOptions.maxBubbleSize,\n          barGroupPadding: familyOptions.barGroupPadding,\n          barGroupWidth: familyOptions.barGroupWidth,\n          negativesAsZeroes: familyOptions.negativesAsZeroes,\n          rotated: that._isRotated()\n        });\n        family.add(paneSeries);\n        family.adjustSeriesValues();\n        families.push(family);\n      });\n    });\n\n    that.seriesFamilies = families;\n  },\n  _updateSeriesDimensions: function _updateSeriesDimensions() {\n    var i;\n    var seriesFamilies = this.seriesFamilies || [];\n\n    for (i = 0; i < seriesFamilies.length; i++) {\n      var family = seriesFamilies[i];\n      family.updateSeriesValues();\n      family.adjustSeriesDimensions();\n    }\n  },\n  _getLegendCallBack: function _getLegendCallBack(series) {\n    return this._legend && this._legend.getActionCallback(series);\n  },\n  _appendAxesGroups: function _appendAxesGroups() {\n    this._stripsGroup.linkAppend();\n\n    this._gridGroup.linkAppend();\n\n    this._axesGroup.linkAppend();\n\n    this._constantLinesGroup.linkAppend();\n\n    this._labelAxesGroup.linkAppend();\n\n    this._scaleBreaksGroup.linkAppend();\n  },\n  _populateMarginOptions: function _populateMarginOptions() {\n    var that = this;\n    var bubbleSize = estimateBubbleSize(that.getSize(), that.panes.length, that._themeManager.getOptions(\"maxBubbleSize\"), that._isRotated());\n    var argumentMarginOptions = {};\n\n    that._valueAxes.forEach(function (valueAxis) {\n      var groupSeries = that.series.filter(function (series) {\n        return series.getValueAxis() === valueAxis;\n      });\n      var marginOptions = {};\n      groupSeries.forEach(function (series) {\n        if (series.isVisible()) {\n          var seriesMarginOptions = processBubbleMargin(series.getMarginOptions(), bubbleSize);\n          marginOptions = mergeMarginOptions(marginOptions, seriesMarginOptions);\n          argumentMarginOptions = mergeMarginOptions(argumentMarginOptions, seriesMarginOptions);\n        }\n      });\n      valueAxis.setMarginOptions(marginOptions);\n    });\n\n    that._argumentAxes.forEach(function (a) {\n      return a.setMarginOptions(argumentMarginOptions);\n    });\n  },\n  _populateBusinessRange: function _populateBusinessRange(updatedAxis, keepRange) {\n    var that = this;\n\n    var rotated = that._isRotated();\n\n    var series = that._getVisibleSeries();\n\n    var argRanges = {};\n    var commonArgRange = new Range({\n      rotated: !!rotated\n    });\n\n    var getPaneName = function getPaneName(axis) {\n      return axis.pane || DEFAULT_PANE_NAME;\n    };\n\n    that.panes.forEach(function (p) {\n      return argRanges[p.name] = new Range({\n        rotated: !!rotated\n      });\n    });\n\n    that._valueAxes.forEach(function (valueAxis) {\n      var groupRange = new Range({\n        rotated: !!rotated,\n        pane: valueAxis.pane,\n        axis: valueAxis.name\n      });\n      var groupSeries = series.filter(function (series) {\n        return series.getValueAxis() === valueAxis;\n      });\n      groupSeries.forEach(function (series) {\n        var seriesRange = series.getRangeData();\n        groupRange.addRange(seriesRange.val);\n        argRanges[getPaneName(valueAxis)].addRange(seriesRange.arg);\n      });\n\n      if (!updatedAxis || updatedAxis && groupSeries.length && valueAxis === updatedAxis) {\n        valueAxis.setGroupSeries(groupSeries);\n        valueAxis.setBusinessRange(groupRange, that._axesReinitialized || keepRange, that._argumentAxes[0]._lastVisualRangeUpdateMode);\n      }\n    });\n\n    if (!updatedAxis || updatedAxis && series.length) {\n      Object.keys(argRanges).forEach(function (p) {\n        return commonArgRange.addRange(argRanges[p]);\n      });\n      var commonInterval = commonArgRange.interval;\n\n      that._argumentAxes.forEach(function (a) {\n        var _argRanges$getPaneNam;\n\n        var currentInterval = null !== (_argRanges$getPaneNam = argRanges[getPaneName(a)].interval) && void 0 !== _argRanges$getPaneNam ? _argRanges$getPaneNam : commonInterval;\n        a.setBusinessRange(new Range(_extends({}, commonArgRange, {\n          interval: currentInterval\n        })), that._axesReinitialized, void 0, that._groupsData.categories);\n      });\n    }\n\n    that._populateMarginOptions();\n  },\n  getArgumentAxis: function getArgumentAxis() {\n    return (this._argumentAxes || []).filter(function (a) {\n      return !a.isVirtual;\n    })[0];\n  },\n  getValueAxis: function getValueAxis(name) {\n    var _this2 = this;\n\n    return (this._valueAxes || []).filter(_isDefined(name) ? function (a) {\n      return a.name === name;\n    } : function (a) {\n      return a.pane === _this2.defaultPane;\n    })[0];\n  },\n  _getGroupsData: function _getGroupsData() {\n    var that = this;\n    var groups = [];\n\n    that._valueAxes.forEach(function (axis) {\n      groups.push({\n        series: that.series.filter(function (series) {\n          return series.getValueAxis() === axis;\n        }),\n        valueAxis: axis,\n        valueOptions: axis.getOptions()\n      });\n    });\n\n    return {\n      groups: groups,\n      argumentAxes: that._argumentAxes,\n      argumentOptions: that._argumentAxes[0].getOptions()\n    };\n  },\n  _groupSeries: function _groupSeries() {\n    this._correctValueAxes(false);\n\n    this._groupsData = this._getGroupsData();\n  },\n  _processValueAxisFormat: function _processValueAxisFormat() {\n    var axesWithFullStackedFormat = [];\n    this.series.forEach(function (series) {\n      var axis = series.getValueAxis();\n\n      if (series.isFullStackedSeries()) {\n        axis.setPercentLabelFormat();\n        axesWithFullStackedFormat.push(axis);\n      }\n    });\n\n    this._valueAxes.forEach(function (axis) {\n      if (-1 === axesWithFullStackedFormat.indexOf(axis)) {\n        axis.resetAutoLabelFormat();\n      }\n    });\n  },\n  _populateAxesOptions: function _populateAxesOptions(typeSelector, userOptions, axisOptions, rotated, virtual) {\n    var preparedUserOptions = this._prepareStripsAndConstantLines(typeSelector, userOptions, rotated);\n\n    var options = _extend(true, {}, preparedUserOptions, axisOptions, this._prepareAxisOptions(typeSelector, preparedUserOptions, rotated));\n\n    if (virtual) {\n      options.visible = options.tick.visible = options.minorTick.visible = options.label.visible = false;\n      options.title = {};\n    }\n\n    return options;\n  },\n  _getValFilter: function _getValFilter(series) {\n    return rangeDataCalculator.getViewPortFilter(series.getValueAxis().visualRange() || {});\n  },\n  _createAxis: function _createAxis(isArgumentAxes, options, virtual) {\n    var that = this;\n    var typeSelector = isArgumentAxes ? \"argumentAxis\" : \"valueAxis\";\n\n    var renderingSettings = _extend({\n      renderer: that._renderer,\n      incidentOccurred: that._incidentOccurred,\n      eventTrigger: that._eventTrigger,\n      axisClass: isArgumentAxes ? \"arg\" : \"val\",\n      widgetClass: \"dxc\",\n      stripsGroup: that._stripsGroup,\n      labelAxesGroup: that._labelAxesGroup,\n      constantLinesGroup: that._constantLinesGroup,\n      scaleBreaksGroup: that._scaleBreaksGroup,\n      axesContainerGroup: that._axesGroup,\n      gridGroup: that._gridGroup,\n      isArgumentAxis: isArgumentAxes,\n      getTemplate: function getTemplate() {\n        return that._getTemplate(options.label.template);\n      }\n    }, that._getAxisRenderingOptions(typeSelector));\n\n    var axis = new Axis(renderingSettings);\n    axis.updateOptions(options);\n    axis.isVirtual = virtual;\n    return axis;\n  },\n  _applyVisualRangeByVirtualAxes: function _applyVisualRangeByVirtualAxes(axis, range) {\n    return false;\n  },\n  _applyCustomVisualRangeOption: function _applyCustomVisualRangeOption(axis, range) {\n    if (axis.getOptions().optionPath) {\n      this._parseVisualRangeOption(\"\".concat(axis.getOptions().optionPath, \".visualRange\"), range);\n    }\n  },\n  _getVisualRangeSetter: function _getVisualRangeSetter() {\n    var chart = this;\n    return function (axis, _ref) {\n      var skipEventRising = _ref.skipEventRising,\n          range = _ref.range;\n\n      chart._applyCustomVisualRangeOption(axis, range);\n\n      axis.setCustomVisualRange(range);\n      axis.skipEventRising = skipEventRising;\n\n      if (!chart._applyVisualRangeByVirtualAxes(axis, range)) {\n        if (chart._applyingChanges) {\n          chart._change_VISUAL_RANGE();\n        } else {\n          chart._requestChange([VISUAL_RANGE]);\n        }\n      }\n    };\n  },\n  _getTrackerSettings: function _getTrackerSettings() {\n    return _extend(this.callBase(), {\n      argumentAxis: this.getArgumentAxis()\n    });\n  },\n  _prepareStripsAndConstantLines: function _prepareStripsAndConstantLines(typeSelector, userOptions, rotated) {\n    userOptions = this._themeManager.getOptions(typeSelector, userOptions, rotated);\n\n    if (userOptions.strips) {\n      _each(userOptions.strips, function (i) {\n        userOptions.strips[i] = _extend(true, {}, userOptions.stripStyle, userOptions.strips[i]);\n      });\n    }\n\n    if (userOptions.constantLines) {\n      _each(userOptions.constantLines, function (i, line) {\n        userOptions.constantLines[i] = _extend(true, {}, userOptions.constantLineStyle, line);\n      });\n    }\n\n    return userOptions;\n  },\n  refresh: function refresh() {\n    this._disposeAxes();\n\n    this.callBase();\n  },\n  _layoutAxes: function _layoutAxes(drawAxes) {\n    drawAxes();\n    var needSpace = this.checkForMoreSpaceForPanesCanvas();\n\n    if (needSpace) {\n      var rect = this._rect.slice();\n\n      var size = this._layout.backward(rect, rect, [needSpace.width, needSpace.height]);\n\n      needSpace.width = Math.max(0, size[0]);\n      needSpace.height = Math.max(0, size[1]);\n      this._canvas = this._createCanvasFromRect(rect);\n      drawAxes(needSpace);\n    }\n  },\n  checkForMoreSpaceForPanesCanvas: function checkForMoreSpaceForPanesCanvas() {\n    return this.layoutManager.needMoreSpaceForPanesCanvas(this._getLayoutTargets(), this._isRotated());\n  },\n  _parseVisualRangeOption: function _parseVisualRangeOption(fullName, value) {\n    var that = this;\n    var name = fullName.split(/[.[]/)[0];\n    var index = fullName.match(/\\d+/g);\n    index = _isDefined(index) ? parseInt(index[0]) : index;\n\n    if (fullName.indexOf(\"visualRange\") > 0) {\n      if (\"object\" !== type(value)) {\n        value = wrapVisualRange(fullName, value) || value;\n      }\n\n      that._setCustomVisualRange(name, index, value);\n    } else if ((\"object\" === type(value) || _isArray(value)) && name.indexOf(\"Axis\") > 0 && JSON.stringify(value).indexOf(\"visualRange\") > 0) {\n      if (_isDefined(value.visualRange)) {\n        that._setCustomVisualRange(name, index, value.visualRange);\n      } else if (_isArray(value)) {\n        value.forEach(function (a, i) {\n          return _isDefined(a.visualRange) && that._setCustomVisualRange(name, i, a.visualRange);\n        });\n      }\n    }\n  },\n  _setCustomVisualRange: function _setCustomVisualRange(axesName, index, value) {\n    var options = this._options.silent(axesName);\n\n    if (!options) {\n      return;\n    }\n\n    if (!_isDefined(index)) {\n      options._customVisualRange = value;\n    } else {\n      options[index]._customVisualRange = value;\n    }\n\n    this._axesReinitialized = true;\n  },\n  _raiseZoomEndHandlers: function _raiseZoomEndHandlers() {\n    this._valueAxes.forEach(function (axis) {\n      return axis.handleZoomEnd();\n    });\n  },\n  _setOptionsByReference: function _setOptionsByReference() {\n    this.callBase();\n\n    _extend(this._optionsByReference, {\n      \"valueAxis.visualRange\": true\n    });\n  },\n  _notifyOptionChanged: function _notifyOptionChanged(option, value, previousValue) {\n    this.callBase.apply(this, arguments);\n\n    if (!this._optionChangedLocker) {\n      this._parseVisualRangeOption(option, value);\n    }\n  },\n  _notifyVisualRange: function _notifyVisualRange() {\n    var that = this;\n\n    that._valueAxes.forEach(function (axis) {\n      var axisPath = axis.getOptions().optionPath;\n\n      if (axisPath) {\n        var path = \"\".concat(axisPath, \".visualRange\");\n        var visualRange = convertVisualRangeObject(axis.visualRange(), !_isArray(that.option(path)));\n\n        if (!axis.skipEventRising || !rangesAreEqual(visualRange, that.option(path))) {\n          if (!that.option(axisPath) && \"valueAxis\" !== axisPath) {\n            that.option(axisPath, {\n              name: axis.name,\n              visualRange: visualRange\n            });\n          } else {\n            that.option(path, visualRange);\n          }\n        } else {\n          axis.skipEventRising = null;\n        }\n      }\n    });\n  },\n  _notify: function _notify() {\n    this.callBase();\n    this._axesReinitialized = false;\n\n    if (true !== this.option(\"disableTwoWayBinding\")) {\n      this._notifyVisualRange();\n    }\n  },\n  _getAxesForScaling: function _getAxesForScaling() {\n    return this._valueAxes;\n  },\n  _getAxesByOptionPath: function _getAxesByOptionPath(arg, isDirectOption, optionName) {\n    var sourceAxes = this._getAxesForScaling();\n\n    var axes = [];\n\n    if (isDirectOption) {\n      var axisPath;\n\n      if (arg.fullName) {\n        axisPath = arg.fullName.slice(0, arg.fullName.indexOf(\".\"));\n      }\n\n      axes = sourceAxes.filter(function (a) {\n        return a.getOptions().optionPath === axisPath;\n      });\n    } else if (\"object\" === type(arg.value)) {\n      axes = sourceAxes.filter(function (a) {\n        return a.getOptions().optionPath === arg.name;\n      });\n    } else if (_isArray(arg.value)) {\n      arg.value.forEach(function (v, index) {\n        var axis = sourceAxes.filter(function (a) {\n          return a.getOptions().optionPath === \"\".concat(arg.name, \"[\").concat(index, \"]\");\n        })[0];\n        _isDefined(v[optionName]) && _isDefined(axis) && (axes[index] = axis);\n      });\n    }\n\n    return axes;\n  },\n  _optionChanged: function _optionChanged(arg) {\n    if (!this._optionChangedLocker) {\n      var axes;\n      var isDirectOption = arg.fullName.indexOf(\"visualRange\") > 0 ? true : this.getPartialChangeOptionsName(arg).indexOf(\"visualRange\") > -1 ? false : void 0;\n\n      if (_isDefined(isDirectOption)) {\n        axes = this._getAxesByOptionPath(arg, isDirectOption, \"visualRange\");\n\n        if (axes) {\n          if (axes.length > 1 || _isArray(arg.value)) {\n            axes.forEach(function (a, index) {\n              return setAxisVisualRangeByOption(arg, a, isDirectOption, index);\n            });\n          } else if (1 === axes.length) {\n            setAxisVisualRangeByOption(arg, axes[0], isDirectOption);\n          }\n        }\n      }\n    }\n\n    this.callBase(arg);\n  },\n  _change_VISUAL_RANGE: function _change_VISUAL_RANGE() {\n    this._recreateSizeDependentObjects(false);\n\n    if (!this._changes.has(\"FULL_RENDER\")) {\n      var resizePanesOnZoom = this.option(\"resizePanesOnZoom\");\n\n      this._doRender({\n        force: true,\n        drawTitle: false,\n        drawLegend: false,\n        adjustAxes: null !== resizePanesOnZoom && void 0 !== resizePanesOnZoom ? resizePanesOnZoom : this.option(\"adjustAxesOnZoom\") || false,\n        animate: false\n      });\n\n      this._raiseZoomEndHandlers();\n    }\n  },\n  resetVisualRange: function resetVisualRange() {\n    var that = this;\n\n    that._valueAxes.forEach(function (axis) {\n      axis.resetVisualRange(false);\n\n      that._applyCustomVisualRangeOption(axis);\n    });\n\n    that._requestChange([VISUAL_RANGE]);\n  },\n  _legendDataField: \"series\",\n  _adjustSeriesLabels: _noop,\n  _correctValueAxes: _noop\n});","map":{"version":3,"sources":["C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/devextreme/esm/viz/chart_components/advanced_chart.js"],"names":["_extends","extend","_extend","inArray","each","_each","reverseEach","_reverseEach","Range","Axis","SeriesFamily","BaseChart","getMargins","rangeDataCalculator","isDefined","_isDefined","type","noop","_noop","convertVisualRangeObject","rangesAreEqual","map","_map","mergeMarginOptions","setCanvasValues","unique","_isArray","Array","isArray","DEFAULT_AXIS_NAME","FONT","COMMON_AXIS_SETTINGS","DEFAULT_PANE_NAME","VISUAL_RANGE","prepareAxis","axisOptions","length","processBubbleMargin","opt","bubbleSize","processBubbleSize","size","estimateBubbleSize","panesCount","maxSize","rotated","width","height","Math","min","setAxisVisualRangeByOption","arg","axis","isDirectOption","index","options","visualRange","value","skipEventRising","wrappedVisualRange","wrapVisualRange","fullName","allowPartialUpdate","getAxisTypes","groupsData","isArgumentAxes","argumentAxisType","argumentType","groups","filter","g","valueAxis","valueAxisType","valueType","pathElements","split","destElem","AdvancedChart","inherit","_fontFields","_partialOptionChangesMap","_customVisualRange","strips","constantLines","_partialOptionChangesPath","argumentAxis","_initCore","_panesClipRects","callBase","_disposeCore","disposeObjectsInArray","_disposeObjectsInArray","panesClipRects","call","_dispose","panes","_legend","dispose","_disposeAxes","_createPanes","_cleanPanesClipRects","clipArrayName","clipArray","forEach","clipRect","_getElementsClipRectID","paneName","clipShape","fixed","_getPaneIndex","id","paneIndex","name","pane","_updateSize","_canvas","_reinitAxes","_populateAxes","_axesReinitialized","_getCrosshairMargins","crosshairOptions","_getCrosshairOptions","crosshairEnabled","enabled","margins","x","horizontalLine","visible","y","verticalLine","that","_isRotated","argumentAxesOptions","option","valueAxisOption","valueAxesOptions","argumentAxesPopulatedOptions","valueAxesPopulatedOptions","axisNames","valueAxesCounter","paneWithNonVirtualAxis","crosshairMargins","position","virtual","_populateAxesOptions","optionPath","crosshairMargin","priority","_axisOptions$panes","axisPanes","_incidentOccurred","push","concat","slice","_","_redesignAxes","axesBasis","axes","_argumentAxes","_valueAxes","curAxes","a","some","p","axisTypes","_groupsData","updateOptions","setTypes","validate","basis","_disposeAxis","isVirtual","_createAxis","applyVisualRangeSetter","_getVisualRangeSetter","isArgumentAxis","splice","_appendAdditionalSeriesGroups","_crosshairCursorGroup","linkAppend","_scrollBar","_scrollBarGroup","_getLegendTargets","series","s","item","_getLegendOptions","legendData","getOptions","showInLegend","_legendItemTextField","_seriesPopulatedHandlerCore","_processSeriesFamilies","_processValueAxisFormat","_renderTrackers","i","drawTrackers","_specialProcessSeries","_that$seriesFamilies","types","families","paneSeries","themeManager","_themeManager","negativesAsZeroes","negativesAsZeros","familyOptions","minBubbleSize","maxBubbleSize","barGroupPadding","barGroupWidth","seriesFamilies","family","adjustSeriesValues","_getLayoutTargets","_getSeriesForPane","add","_updateSeriesDimensions","updateSeriesValues","adjustSeriesDimensions","_getLegendCallBack","getActionCallback","_appendAxesGroups","_stripsGroup","_gridGroup","_axesGroup","_constantLinesGroup","_labelAxesGroup","_scaleBreaksGroup","_populateMarginOptions","getSize","argumentMarginOptions","groupSeries","getValueAxis","marginOptions","isVisible","seriesMarginOptions","getMarginOptions","setMarginOptions","_populateBusinessRange","updatedAxis","keepRange","_getVisibleSeries","argRanges","commonArgRange","getPaneName","groupRange","seriesRange","getRangeData","addRange","val","setGroupSeries","setBusinessRange","_lastVisualRangeUpdateMode","Object","keys","commonInterval","interval","_argRanges$getPaneNam","currentInterval","categories","getArgumentAxis","defaultPane","_getGroupsData","valueOptions","argumentAxes","argumentOptions","_groupSeries","_correctValueAxes","axesWithFullStackedFormat","isFullStackedSeries","setPercentLabelFormat","indexOf","resetAutoLabelFormat","typeSelector","userOptions","preparedUserOptions","_prepareStripsAndConstantLines","_prepareAxisOptions","tick","minorTick","label","title","_getValFilter","getViewPortFilter","renderingSettings","renderer","_renderer","incidentOccurred","eventTrigger","_eventTrigger","axisClass","widgetClass","stripsGroup","labelAxesGroup","constantLinesGroup","scaleBreaksGroup","axesContainerGroup","gridGroup","getTemplate","_getTemplate","template","_getAxisRenderingOptions","_applyVisualRangeByVirtualAxes","range","_applyCustomVisualRangeOption","_parseVisualRangeOption","chart","_ref","setCustomVisualRange","_applyingChanges","_change_VISUAL_RANGE","_requestChange","_getTrackerSettings","stripStyle","line","constantLineStyle","refresh","_layoutAxes","drawAxes","needSpace","checkForMoreSpaceForPanesCanvas","rect","_rect","_layout","backward","max","_createCanvasFromRect","layoutManager","needMoreSpaceForPanesCanvas","match","parseInt","_setCustomVisualRange","JSON","stringify","axesName","_options","silent","_raiseZoomEndHandlers","handleZoomEnd","_setOptionsByReference","_optionsByReference","_notifyOptionChanged","previousValue","apply","arguments","_optionChangedLocker","_notifyVisualRange","axisPath","path","_notify","_getAxesForScaling","_getAxesByOptionPath","optionName","sourceAxes","v","_optionChanged","getPartialChangeOptionsName","_recreateSizeDependentObjects","_changes","has","resizePanesOnZoom","_doRender","force","drawTitle","drawLegend","adjustAxes","animate","resetVisualRange","_legendDataField","_adjustSeriesLabels"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/viz/chart_components/advanced_chart.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\r\nimport {\r\n    extend as _extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    inArray\r\n} from \"../../core/utils/array\";\r\nimport {\r\n    each as _each,\r\n    reverseEach as _reverseEach\r\n} from \"../../core/utils/iterator\";\r\nimport {\r\n    Range\r\n} from \"../translators/range\";\r\nimport {\r\n    Axis\r\n} from \"../axes/base_axis\";\r\nimport {\r\n    SeriesFamily\r\n} from \"../core/series_family\";\r\nimport {\r\n    BaseChart\r\n} from \"./base_chart\";\r\nimport {\r\n    getMargins\r\n} from \"./crosshair\";\r\nimport rangeDataCalculator from \"../series/helpers/range_data_calculator\";\r\nimport {\r\n    isDefined as _isDefined,\r\n    type\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    noop as _noop\r\n} from \"../../core/utils/common\";\r\nimport {\r\n    convertVisualRangeObject,\r\n    rangesAreEqual,\r\n    map as _map,\r\n    mergeMarginOptions,\r\n    setCanvasValues,\r\n    unique\r\n} from \"../core/utils\";\r\nvar _isArray = Array.isArray;\r\nvar DEFAULT_AXIS_NAME = \"defaultAxisName\";\r\nvar FONT = \"font\";\r\nvar COMMON_AXIS_SETTINGS = \"commonAxisSettings\";\r\nvar DEFAULT_PANE_NAME = \"default\";\r\nvar VISUAL_RANGE = \"VISUAL_RANGE\";\r\n\r\nfunction prepareAxis(axisOptions) {\r\n    return _isArray(axisOptions) ? 0 === axisOptions.length ? [{}] : axisOptions : [axisOptions]\r\n}\r\n\r\nfunction processBubbleMargin(opt, bubbleSize) {\r\n    if (opt.processBubbleSize) {\r\n        opt.size = bubbleSize\r\n    }\r\n    return opt\r\n}\r\n\r\nfunction estimateBubbleSize(size, panesCount, maxSize, rotated) {\r\n    var width = rotated ? size.width / panesCount : size.width;\r\n    var height = rotated ? size.height : size.height / panesCount;\r\n    return Math.min(width, height) * maxSize\r\n}\r\n\r\nfunction setAxisVisualRangeByOption(arg, axis, isDirectOption, index) {\r\n    var options;\r\n    var visualRange;\r\n    if (isDirectOption) {\r\n        visualRange = arg.value;\r\n        options = {\r\n            skipEventRising: true\r\n        };\r\n        var wrappedVisualRange = wrapVisualRange(arg.fullName, visualRange);\r\n        if (wrappedVisualRange) {\r\n            options = {\r\n                allowPartialUpdate: true\r\n            };\r\n            visualRange = wrappedVisualRange\r\n        }\r\n    } else {\r\n        visualRange = (_isDefined(index) ? arg.value[index] : arg.value).visualRange\r\n    }\r\n    axis.visualRange(visualRange, options)\r\n}\r\n\r\nfunction getAxisTypes(groupsData, axis, isArgumentAxes) {\r\n    if (isArgumentAxes) {\r\n        return {\r\n            argumentAxisType: groupsData.argumentAxisType,\r\n            argumentType: groupsData.argumentType\r\n        }\r\n    }\r\n    var {\r\n        valueAxisType: valueAxisType,\r\n        valueType: valueType\r\n    } = groupsData.groups.filter(g => g.valueAxis === axis)[0];\r\n    return {\r\n        valueAxisType: valueAxisType,\r\n        valueType: valueType\r\n    }\r\n}\r\n\r\nfunction wrapVisualRange(fullName, value) {\r\n    var pathElements = fullName.split(\".\");\r\n    var destElem = pathElements[pathElements.length - 1];\r\n    if (\"endValue\" === destElem || \"startValue\" === destElem) {\r\n        return {\r\n            [destElem]: value\r\n        }\r\n    }\r\n}\r\nexport var AdvancedChart = BaseChart.inherit({\r\n    _fontFields: [COMMON_AXIS_SETTINGS + \".label.\" + FONT, COMMON_AXIS_SETTINGS + \".title.\" + FONT],\r\n    _partialOptionChangesMap: {\r\n        visualRange: VISUAL_RANGE,\r\n        _customVisualRange: VISUAL_RANGE,\r\n        strips: \"REFRESH_AXES\",\r\n        constantLines: \"REFRESH_AXES\"\r\n    },\r\n    _partialOptionChangesPath: {\r\n        argumentAxis: [\"strips\", \"constantLines\", \"visualRange\", \"_customVisualRange\"],\r\n        valueAxis: [\"strips\", \"constantLines\", \"visualRange\", \"_customVisualRange\"]\r\n    },\r\n    _initCore() {\r\n        this._panesClipRects = {};\r\n        this.callBase()\r\n    },\r\n    _disposeCore() {\r\n        var disposeObjectsInArray = this._disposeObjectsInArray;\r\n        var panesClipRects = this._panesClipRects;\r\n        this.callBase();\r\n        disposeObjectsInArray.call(panesClipRects, \"fixed\");\r\n        disposeObjectsInArray.call(panesClipRects, \"base\");\r\n        disposeObjectsInArray.call(panesClipRects, \"wide\");\r\n        this._panesClipRects = null\r\n    },\r\n    _dispose: function() {\r\n        var disposeObjectsInArray = this._disposeObjectsInArray;\r\n        this.callBase();\r\n        this.panes = null;\r\n        if (this._legend) {\r\n            this._legend.dispose();\r\n            this._legend = null\r\n        }\r\n        disposeObjectsInArray.call(this, \"panesBackground\");\r\n        disposeObjectsInArray.call(this, \"seriesFamilies\");\r\n        this._disposeAxes()\r\n    },\r\n    _createPanes: function() {\r\n        this._cleanPanesClipRects(\"fixed\");\r\n        this._cleanPanesClipRects(\"base\");\r\n        this._cleanPanesClipRects(\"wide\")\r\n    },\r\n    _cleanPanesClipRects(clipArrayName) {\r\n        var clipArray = this._panesClipRects[clipArrayName];\r\n        (clipArray || []).forEach(clipRect => clipRect && clipRect.dispose());\r\n        this._panesClipRects[clipArrayName] = []\r\n    },\r\n    _getElementsClipRectID(paneName) {\r\n        var clipShape = this._panesClipRects.fixed[this._getPaneIndex(paneName)];\r\n        return clipShape && clipShape.id\r\n    },\r\n    _getPaneIndex(paneName) {\r\n        var paneIndex;\r\n        var name = paneName || DEFAULT_PANE_NAME;\r\n        _each(this.panes, (index, pane) => {\r\n            if (pane.name === name) {\r\n                paneIndex = index;\r\n                return false\r\n            }\r\n        });\r\n        return paneIndex\r\n    },\r\n    _updateSize() {\r\n        this.callBase();\r\n        setCanvasValues(this._canvas)\r\n    },\r\n    _reinitAxes: function() {\r\n        this.panes = this._createPanes();\r\n        this._populateAxes();\r\n        this._axesReinitialized = true\r\n    },\r\n    _getCrosshairMargins: function() {\r\n        var crosshairOptions = this._getCrosshairOptions() || {};\r\n        var crosshairEnabled = crosshairOptions.enabled;\r\n        var margins = getMargins();\r\n        return {\r\n            x: crosshairEnabled && crosshairOptions.horizontalLine.visible ? margins.x : 0,\r\n            y: crosshairEnabled && crosshairOptions.verticalLine.visible ? margins.y : 0\r\n        }\r\n    },\r\n    _populateAxes() {\r\n        var that = this;\r\n        var panes = that.panes;\r\n        var rotated = that._isRotated();\r\n        var argumentAxesOptions = prepareAxis(that.option(\"argumentAxis\") || {})[0];\r\n        var valueAxisOption = that.option(\"valueAxis\");\r\n        var valueAxesOptions = prepareAxis(valueAxisOption || {});\r\n        var argumentAxesPopulatedOptions;\r\n        var valueAxesPopulatedOptions = [];\r\n        var axisNames = [];\r\n        var valueAxesCounter = 0;\r\n        var paneWithNonVirtualAxis;\r\n        var crosshairMargins = that._getCrosshairMargins();\r\n        if (rotated) {\r\n            paneWithNonVirtualAxis = \"right\" === argumentAxesOptions.position ? panes[panes.length - 1].name : panes[0].name\r\n        } else {\r\n            paneWithNonVirtualAxis = \"top\" === argumentAxesOptions.position ? panes[0].name : panes[panes.length - 1].name\r\n        }\r\n        argumentAxesPopulatedOptions = _map(panes, pane => {\r\n            var virtual = pane.name !== paneWithNonVirtualAxis;\r\n            return that._populateAxesOptions(\"argumentAxis\", argumentAxesOptions, {\r\n                pane: pane.name,\r\n                name: null,\r\n                optionPath: \"argumentAxis\",\r\n                crosshairMargin: rotated ? crosshairMargins.x : crosshairMargins.y\r\n            }, rotated, virtual)\r\n        });\r\n        _each(valueAxesOptions, (priority, axisOptions) => {\r\n            var _axisOptions$panes;\r\n            var axisPanes = [];\r\n            var name = axisOptions.name;\r\n            if (name && -1 !== inArray(name, axisNames)) {\r\n                that._incidentOccurred(\"E2102\");\r\n                return\r\n            }\r\n            name && axisNames.push(name);\r\n            if (axisOptions.pane) {\r\n                axisPanes.push(axisOptions.pane)\r\n            }\r\n            if (null !== (_axisOptions$panes = axisOptions.panes) && void 0 !== _axisOptions$panes && _axisOptions$panes.length) {\r\n                axisPanes = axisPanes.concat(axisOptions.panes.slice(0))\r\n            }\r\n            axisPanes = unique(axisPanes);\r\n            if (!axisPanes.length) {\r\n                axisPanes.push(void 0)\r\n            }\r\n            _each(axisPanes, (_, pane) => {\r\n                var optionPath = _isArray(valueAxisOption) ? \"valueAxis[\".concat(priority, \"]\") : \"valueAxis\";\r\n                valueAxesPopulatedOptions.push(that._populateAxesOptions(\"valueAxis\", axisOptions, {\r\n                    name: name || DEFAULT_AXIS_NAME + valueAxesCounter++,\r\n                    pane: pane,\r\n                    priority: priority,\r\n                    optionPath: optionPath,\r\n                    crosshairMargin: rotated ? crosshairMargins.y : crosshairMargins.x\r\n                }, rotated))\r\n            })\r\n        });\r\n        that._redesignAxes(argumentAxesPopulatedOptions, true, paneWithNonVirtualAxis);\r\n        that._redesignAxes(valueAxesPopulatedOptions, false)\r\n    },\r\n    _redesignAxes(options, isArgumentAxes, paneWithNonVirtualAxis) {\r\n        var that = this;\r\n        var axesBasis = [];\r\n        var axes = isArgumentAxes ? that._argumentAxes : that._valueAxes;\r\n        _each(options, (_, opt) => {\r\n            var curAxes = axes && axes.filter(a => a.name === opt.name && (!_isDefined(opt.pane) && that.panes.some(p => p.name === a.pane) || a.pane === opt.pane));\r\n            if (curAxes && curAxes.length > 0) {\r\n                _each(curAxes, (_, axis) => {\r\n                    var axisTypes = getAxisTypes(that._groupsData, axis, isArgumentAxes);\r\n                    axis.updateOptions(opt);\r\n                    if (isArgumentAxes) {\r\n                        axis.setTypes(axisTypes.argumentAxisType, axisTypes.argumentType, \"argumentType\")\r\n                    } else {\r\n                        axis.setTypes(axisTypes.valueAxisType, axisTypes.valueType, \"valueType\")\r\n                    }\r\n                    axis.validate();\r\n                    axesBasis.push({\r\n                        axis: axis\r\n                    })\r\n                })\r\n            } else {\r\n                axesBasis.push({\r\n                    options: opt\r\n                })\r\n            }\r\n        });\r\n        if (axes) {\r\n            _reverseEach(axes, (index, axis) => {\r\n                if (!axesBasis.some(basis => basis.axis && basis.axis === axis)) {\r\n                    that._disposeAxis(index, isArgumentAxes)\r\n                }\r\n            })\r\n        } else if (isArgumentAxes) {\r\n            axes = that._argumentAxes = []\r\n        } else {\r\n            axes = that._valueAxes = []\r\n        }\r\n        _each(axesBasis, (_, basis) => {\r\n            var axis = basis.axis;\r\n            if (basis.axis && isArgumentAxes) {\r\n                basis.axis.isVirtual = basis.axis.pane !== paneWithNonVirtualAxis\r\n            } else if (basis.options) {\r\n                axis = that._createAxis(isArgumentAxes, basis.options, isArgumentAxes ? basis.options.pane !== paneWithNonVirtualAxis : void 0);\r\n                axes.push(axis)\r\n            }\r\n            axis.applyVisualRangeSetter(that._getVisualRangeSetter())\r\n        })\r\n    },\r\n    _disposeAxis(index, isArgumentAxis) {\r\n        var axes = isArgumentAxis ? this._argumentAxes : this._valueAxes;\r\n        var axis = axes[index];\r\n        if (!axis) {\r\n            return\r\n        }\r\n        axis.dispose();\r\n        axes.splice(index, 1)\r\n    },\r\n    _disposeAxes: function() {\r\n        var disposeObjectsInArray = this._disposeObjectsInArray;\r\n        disposeObjectsInArray.call(this, \"_argumentAxes\");\r\n        disposeObjectsInArray.call(this, \"_valueAxes\")\r\n    },\r\n    _appendAdditionalSeriesGroups: function() {\r\n        this._crosshairCursorGroup.linkAppend();\r\n        this._scrollBar && this._scrollBarGroup.linkAppend()\r\n    },\r\n    _getLegendTargets: function() {\r\n        return (this.series || []).map(s => {\r\n            var item = this._getLegendOptions(s);\r\n            item.legendData.series = s;\r\n            if (!s.getOptions().showInLegend) {\r\n                item.legendData.visible = false\r\n            }\r\n            return item\r\n        })\r\n    },\r\n    _legendItemTextField: \"name\",\r\n    _seriesPopulatedHandlerCore: function() {\r\n        this._processSeriesFamilies();\r\n        this._processValueAxisFormat()\r\n    },\r\n    _renderTrackers: function() {\r\n        var i;\r\n        for (i = 0; i < this.series.length; ++i) {\r\n            this.series[i].drawTrackers()\r\n        }\r\n    },\r\n    _specialProcessSeries: function() {\r\n        this._processSeriesFamilies()\r\n    },\r\n    _processSeriesFamilies: function() {\r\n        var _that$seriesFamilies;\r\n        var that = this;\r\n        var types = [];\r\n        var families = [];\r\n        var paneSeries;\r\n        var themeManager = that._themeManager;\r\n        var negativesAsZeroes = themeManager.getOptions(\"negativesAsZeroes\");\r\n        var negativesAsZeros = themeManager.getOptions(\"negativesAsZeros\");\r\n        var familyOptions = {\r\n            minBubbleSize: themeManager.getOptions(\"minBubbleSize\"),\r\n            maxBubbleSize: themeManager.getOptions(\"maxBubbleSize\"),\r\n            barGroupPadding: themeManager.getOptions(\"barGroupPadding\"),\r\n            barGroupWidth: themeManager.getOptions(\"barGroupWidth\"),\r\n            negativesAsZeroes: _isDefined(negativesAsZeroes) ? negativesAsZeroes : negativesAsZeros\r\n        };\r\n        if (null !== (_that$seriesFamilies = that.seriesFamilies) && void 0 !== _that$seriesFamilies && _that$seriesFamilies.length) {\r\n            _each(that.seriesFamilies, (function(_, family) {\r\n                family.updateOptions(familyOptions);\r\n                family.adjustSeriesValues()\r\n            }));\r\n            return\r\n        }\r\n        _each(that.series, (function(_, item) {\r\n            if (-1 === inArray(item.type, types)) {\r\n                types.push(item.type)\r\n            }\r\n        }));\r\n        _each(that._getLayoutTargets(), (function(_, pane) {\r\n            paneSeries = that._getSeriesForPane(pane.name);\r\n            _each(types, (function(_, type) {\r\n                var family = new SeriesFamily({\r\n                    type: type,\r\n                    pane: pane.name,\r\n                    minBubbleSize: familyOptions.minBubbleSize,\r\n                    maxBubbleSize: familyOptions.maxBubbleSize,\r\n                    barGroupPadding: familyOptions.barGroupPadding,\r\n                    barGroupWidth: familyOptions.barGroupWidth,\r\n                    negativesAsZeroes: familyOptions.negativesAsZeroes,\r\n                    rotated: that._isRotated()\r\n                });\r\n                family.add(paneSeries);\r\n                family.adjustSeriesValues();\r\n                families.push(family)\r\n            }))\r\n        }));\r\n        that.seriesFamilies = families\r\n    },\r\n    _updateSeriesDimensions: function() {\r\n        var i;\r\n        var seriesFamilies = this.seriesFamilies || [];\r\n        for (i = 0; i < seriesFamilies.length; i++) {\r\n            var family = seriesFamilies[i];\r\n            family.updateSeriesValues();\r\n            family.adjustSeriesDimensions()\r\n        }\r\n    },\r\n    _getLegendCallBack: function(series) {\r\n        return this._legend && this._legend.getActionCallback(series)\r\n    },\r\n    _appendAxesGroups: function() {\r\n        this._stripsGroup.linkAppend();\r\n        this._gridGroup.linkAppend();\r\n        this._axesGroup.linkAppend();\r\n        this._constantLinesGroup.linkAppend();\r\n        this._labelAxesGroup.linkAppend();\r\n        this._scaleBreaksGroup.linkAppend()\r\n    },\r\n    _populateMarginOptions() {\r\n        var that = this;\r\n        var bubbleSize = estimateBubbleSize(that.getSize(), that.panes.length, that._themeManager.getOptions(\"maxBubbleSize\"), that._isRotated());\r\n        var argumentMarginOptions = {};\r\n        that._valueAxes.forEach(valueAxis => {\r\n            var groupSeries = that.series.filter((function(series) {\r\n                return series.getValueAxis() === valueAxis\r\n            }));\r\n            var marginOptions = {};\r\n            groupSeries.forEach(series => {\r\n                if (series.isVisible()) {\r\n                    var seriesMarginOptions = processBubbleMargin(series.getMarginOptions(), bubbleSize);\r\n                    marginOptions = mergeMarginOptions(marginOptions, seriesMarginOptions);\r\n                    argumentMarginOptions = mergeMarginOptions(argumentMarginOptions, seriesMarginOptions)\r\n                }\r\n            });\r\n            valueAxis.setMarginOptions(marginOptions)\r\n        });\r\n        that._argumentAxes.forEach(a => a.setMarginOptions(argumentMarginOptions))\r\n    },\r\n    _populateBusinessRange(updatedAxis, keepRange) {\r\n        var that = this;\r\n        var rotated = that._isRotated();\r\n        var series = that._getVisibleSeries();\r\n        var argRanges = {};\r\n        var commonArgRange = new Range({\r\n            rotated: !!rotated\r\n        });\r\n        var getPaneName = axis => axis.pane || DEFAULT_PANE_NAME;\r\n        that.panes.forEach(p => argRanges[p.name] = new Range({\r\n            rotated: !!rotated\r\n        }));\r\n        that._valueAxes.forEach(valueAxis => {\r\n            var groupRange = new Range({\r\n                rotated: !!rotated,\r\n                pane: valueAxis.pane,\r\n                axis: valueAxis.name\r\n            });\r\n            var groupSeries = series.filter(series => series.getValueAxis() === valueAxis);\r\n            groupSeries.forEach(series => {\r\n                var seriesRange = series.getRangeData();\r\n                groupRange.addRange(seriesRange.val);\r\n                argRanges[getPaneName(valueAxis)].addRange(seriesRange.arg)\r\n            });\r\n            if (!updatedAxis || updatedAxis && groupSeries.length && valueAxis === updatedAxis) {\r\n                valueAxis.setGroupSeries(groupSeries);\r\n                valueAxis.setBusinessRange(groupRange, that._axesReinitialized || keepRange, that._argumentAxes[0]._lastVisualRangeUpdateMode)\r\n            }\r\n        });\r\n        if (!updatedAxis || updatedAxis && series.length) {\r\n            Object.keys(argRanges).forEach(p => commonArgRange.addRange(argRanges[p]));\r\n            var commonInterval = commonArgRange.interval;\r\n            that._argumentAxes.forEach(a => {\r\n                var _argRanges$getPaneNam;\r\n                var currentInterval = null !== (_argRanges$getPaneNam = argRanges[getPaneName(a)].interval) && void 0 !== _argRanges$getPaneNam ? _argRanges$getPaneNam : commonInterval;\r\n                a.setBusinessRange(new Range(_extends({}, commonArgRange, {\r\n                    interval: currentInterval\r\n                })), that._axesReinitialized, void 0, that._groupsData.categories)\r\n            })\r\n        }\r\n        that._populateMarginOptions()\r\n    },\r\n    getArgumentAxis: function() {\r\n        return (this._argumentAxes || []).filter(a => !a.isVirtual)[0]\r\n    },\r\n    getValueAxis: function(name) {\r\n        return (this._valueAxes || []).filter(_isDefined(name) ? a => a.name === name : a => a.pane === this.defaultPane)[0]\r\n    },\r\n    _getGroupsData: function() {\r\n        var that = this;\r\n        var groups = [];\r\n        that._valueAxes.forEach((function(axis) {\r\n            groups.push({\r\n                series: that.series.filter((function(series) {\r\n                    return series.getValueAxis() === axis\r\n                })),\r\n                valueAxis: axis,\r\n                valueOptions: axis.getOptions()\r\n            })\r\n        }));\r\n        return {\r\n            groups: groups,\r\n            argumentAxes: that._argumentAxes,\r\n            argumentOptions: that._argumentAxes[0].getOptions()\r\n        }\r\n    },\r\n    _groupSeries: function() {\r\n        this._correctValueAxes(false);\r\n        this._groupsData = this._getGroupsData()\r\n    },\r\n    _processValueAxisFormat: function() {\r\n        var axesWithFullStackedFormat = [];\r\n        this.series.forEach((function(series) {\r\n            var axis = series.getValueAxis();\r\n            if (series.isFullStackedSeries()) {\r\n                axis.setPercentLabelFormat();\r\n                axesWithFullStackedFormat.push(axis)\r\n            }\r\n        }));\r\n        this._valueAxes.forEach((function(axis) {\r\n            if (-1 === axesWithFullStackedFormat.indexOf(axis)) {\r\n                axis.resetAutoLabelFormat()\r\n            }\r\n        }))\r\n    },\r\n    _populateAxesOptions(typeSelector, userOptions, axisOptions, rotated, virtual) {\r\n        var preparedUserOptions = this._prepareStripsAndConstantLines(typeSelector, userOptions, rotated);\r\n        var options = _extend(true, {}, preparedUserOptions, axisOptions, this._prepareAxisOptions(typeSelector, preparedUserOptions, rotated));\r\n        if (virtual) {\r\n            options.visible = options.tick.visible = options.minorTick.visible = options.label.visible = false;\r\n            options.title = {}\r\n        }\r\n        return options\r\n    },\r\n    _getValFilter: series => rangeDataCalculator.getViewPortFilter(series.getValueAxis().visualRange() || {}),\r\n    _createAxis(isArgumentAxes, options, virtual) {\r\n        var that = this;\r\n        var typeSelector = isArgumentAxes ? \"argumentAxis\" : \"valueAxis\";\r\n        var renderingSettings = _extend({\r\n            renderer: that._renderer,\r\n            incidentOccurred: that._incidentOccurred,\r\n            eventTrigger: that._eventTrigger,\r\n            axisClass: isArgumentAxes ? \"arg\" : \"val\",\r\n            widgetClass: \"dxc\",\r\n            stripsGroup: that._stripsGroup,\r\n            labelAxesGroup: that._labelAxesGroup,\r\n            constantLinesGroup: that._constantLinesGroup,\r\n            scaleBreaksGroup: that._scaleBreaksGroup,\r\n            axesContainerGroup: that._axesGroup,\r\n            gridGroup: that._gridGroup,\r\n            isArgumentAxis: isArgumentAxes,\r\n            getTemplate: () => that._getTemplate(options.label.template)\r\n        }, that._getAxisRenderingOptions(typeSelector));\r\n        var axis = new Axis(renderingSettings);\r\n        axis.updateOptions(options);\r\n        axis.isVirtual = virtual;\r\n        return axis\r\n    },\r\n    _applyVisualRangeByVirtualAxes: (axis, range) => false,\r\n    _applyCustomVisualRangeOption(axis, range) {\r\n        if (axis.getOptions().optionPath) {\r\n            this._parseVisualRangeOption(\"\".concat(axis.getOptions().optionPath, \".visualRange\"), range)\r\n        }\r\n    },\r\n    _getVisualRangeSetter() {\r\n        var chart = this;\r\n        return function(axis, _ref) {\r\n            var {\r\n                skipEventRising: skipEventRising,\r\n                range: range\r\n            } = _ref;\r\n            chart._applyCustomVisualRangeOption(axis, range);\r\n            axis.setCustomVisualRange(range);\r\n            axis.skipEventRising = skipEventRising;\r\n            if (!chart._applyVisualRangeByVirtualAxes(axis, range)) {\r\n                if (chart._applyingChanges) {\r\n                    chart._change_VISUAL_RANGE()\r\n                } else {\r\n                    chart._requestChange([VISUAL_RANGE])\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _getTrackerSettings: function() {\r\n        return _extend(this.callBase(), {\r\n            argumentAxis: this.getArgumentAxis()\r\n        })\r\n    },\r\n    _prepareStripsAndConstantLines: function(typeSelector, userOptions, rotated) {\r\n        userOptions = this._themeManager.getOptions(typeSelector, userOptions, rotated);\r\n        if (userOptions.strips) {\r\n            _each(userOptions.strips, (function(i) {\r\n                userOptions.strips[i] = _extend(true, {}, userOptions.stripStyle, userOptions.strips[i])\r\n            }))\r\n        }\r\n        if (userOptions.constantLines) {\r\n            _each(userOptions.constantLines, (function(i, line) {\r\n                userOptions.constantLines[i] = _extend(true, {}, userOptions.constantLineStyle, line)\r\n            }))\r\n        }\r\n        return userOptions\r\n    },\r\n    refresh: function() {\r\n        this._disposeAxes();\r\n        this.callBase()\r\n    },\r\n    _layoutAxes(drawAxes) {\r\n        drawAxes();\r\n        var needSpace = this.checkForMoreSpaceForPanesCanvas();\r\n        if (needSpace) {\r\n            var rect = this._rect.slice();\r\n            var size = this._layout.backward(rect, rect, [needSpace.width, needSpace.height]);\r\n            needSpace.width = Math.max(0, size[0]);\r\n            needSpace.height = Math.max(0, size[1]);\r\n            this._canvas = this._createCanvasFromRect(rect);\r\n            drawAxes(needSpace)\r\n        }\r\n    },\r\n    checkForMoreSpaceForPanesCanvas() {\r\n        return this.layoutManager.needMoreSpaceForPanesCanvas(this._getLayoutTargets(), this._isRotated())\r\n    },\r\n    _parseVisualRangeOption(fullName, value) {\r\n        var that = this;\r\n        var name = fullName.split(/[.[]/)[0];\r\n        var index = fullName.match(/\\d+/g);\r\n        index = _isDefined(index) ? parseInt(index[0]) : index;\r\n        if (fullName.indexOf(\"visualRange\") > 0) {\r\n            if (\"object\" !== type(value)) {\r\n                value = wrapVisualRange(fullName, value) || value\r\n            }\r\n            that._setCustomVisualRange(name, index, value)\r\n        } else if ((\"object\" === type(value) || _isArray(value)) && name.indexOf(\"Axis\") > 0 && JSON.stringify(value).indexOf(\"visualRange\") > 0) {\r\n            if (_isDefined(value.visualRange)) {\r\n                that._setCustomVisualRange(name, index, value.visualRange)\r\n            } else if (_isArray(value)) {\r\n                value.forEach((a, i) => _isDefined(a.visualRange) && that._setCustomVisualRange(name, i, a.visualRange))\r\n            }\r\n        }\r\n    },\r\n    _setCustomVisualRange(axesName, index, value) {\r\n        var options = this._options.silent(axesName);\r\n        if (!options) {\r\n            return\r\n        }\r\n        if (!_isDefined(index)) {\r\n            options._customVisualRange = value\r\n        } else {\r\n            options[index]._customVisualRange = value\r\n        }\r\n        this._axesReinitialized = true\r\n    },\r\n    _raiseZoomEndHandlers() {\r\n        this._valueAxes.forEach(axis => axis.handleZoomEnd())\r\n    },\r\n    _setOptionsByReference() {\r\n        this.callBase();\r\n        _extend(this._optionsByReference, {\r\n            \"valueAxis.visualRange\": true\r\n        })\r\n    },\r\n    _notifyOptionChanged(option, value, previousValue) {\r\n        this.callBase.apply(this, arguments);\r\n        if (!this._optionChangedLocker) {\r\n            this._parseVisualRangeOption(option, value)\r\n        }\r\n    },\r\n    _notifyVisualRange() {\r\n        var that = this;\r\n        that._valueAxes.forEach(axis => {\r\n            var axisPath = axis.getOptions().optionPath;\r\n            if (axisPath) {\r\n                var path = \"\".concat(axisPath, \".visualRange\");\r\n                var visualRange = convertVisualRangeObject(axis.visualRange(), !_isArray(that.option(path)));\r\n                if (!axis.skipEventRising || !rangesAreEqual(visualRange, that.option(path))) {\r\n                    if (!that.option(axisPath) && \"valueAxis\" !== axisPath) {\r\n                        that.option(axisPath, {\r\n                            name: axis.name,\r\n                            visualRange: visualRange\r\n                        })\r\n                    } else {\r\n                        that.option(path, visualRange)\r\n                    }\r\n                } else {\r\n                    axis.skipEventRising = null\r\n                }\r\n            }\r\n        })\r\n    },\r\n    _notify() {\r\n        this.callBase();\r\n        this._axesReinitialized = false;\r\n        if (true !== this.option(\"disableTwoWayBinding\")) {\r\n            this._notifyVisualRange()\r\n        }\r\n    },\r\n    _getAxesForScaling() {\r\n        return this._valueAxes\r\n    },\r\n    _getAxesByOptionPath(arg, isDirectOption, optionName) {\r\n        var sourceAxes = this._getAxesForScaling();\r\n        var axes = [];\r\n        if (isDirectOption) {\r\n            var axisPath;\r\n            if (arg.fullName) {\r\n                axisPath = arg.fullName.slice(0, arg.fullName.indexOf(\".\"))\r\n            }\r\n            axes = sourceAxes.filter(a => a.getOptions().optionPath === axisPath)\r\n        } else if (\"object\" === type(arg.value)) {\r\n            axes = sourceAxes.filter(a => a.getOptions().optionPath === arg.name)\r\n        } else if (_isArray(arg.value)) {\r\n            arg.value.forEach((v, index) => {\r\n                var axis = sourceAxes.filter(a => a.getOptions().optionPath === \"\".concat(arg.name, \"[\").concat(index, \"]\"))[0];\r\n                _isDefined(v[optionName]) && _isDefined(axis) && (axes[index] = axis)\r\n            })\r\n        }\r\n        return axes\r\n    },\r\n    _optionChanged(arg) {\r\n        if (!this._optionChangedLocker) {\r\n            var axes;\r\n            var isDirectOption = arg.fullName.indexOf(\"visualRange\") > 0 ? true : this.getPartialChangeOptionsName(arg).indexOf(\"visualRange\") > -1 ? false : void 0;\r\n            if (_isDefined(isDirectOption)) {\r\n                axes = this._getAxesByOptionPath(arg, isDirectOption, \"visualRange\");\r\n                if (axes) {\r\n                    if (axes.length > 1 || _isArray(arg.value)) {\r\n                        axes.forEach((a, index) => setAxisVisualRangeByOption(arg, a, isDirectOption, index))\r\n                    } else if (1 === axes.length) {\r\n                        setAxisVisualRangeByOption(arg, axes[0], isDirectOption)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.callBase(arg)\r\n    },\r\n    _change_VISUAL_RANGE: function() {\r\n        this._recreateSizeDependentObjects(false);\r\n        if (!this._changes.has(\"FULL_RENDER\")) {\r\n            var resizePanesOnZoom = this.option(\"resizePanesOnZoom\");\r\n            this._doRender({\r\n                force: true,\r\n                drawTitle: false,\r\n                drawLegend: false,\r\n                adjustAxes: null !== resizePanesOnZoom && void 0 !== resizePanesOnZoom ? resizePanesOnZoom : this.option(\"adjustAxesOnZoom\") || false,\r\n                animate: false\r\n            });\r\n            this._raiseZoomEndHandlers()\r\n        }\r\n    },\r\n    resetVisualRange() {\r\n        var that = this;\r\n        that._valueAxes.forEach(axis => {\r\n            axis.resetVisualRange(false);\r\n            that._applyCustomVisualRangeOption(axis)\r\n        });\r\n        that._requestChange([VISUAL_RANGE])\r\n    },\r\n    _legendDataField: \"series\",\r\n    _adjustSeriesLabels: _noop,\r\n    _correctValueAxes: _noop\r\n});\r\n"]},"metadata":{},"sourceType":"module"}