{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/scheduler/appointment_form.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport Form from \"../form\";\nimport dateSerialization from \"../../core/utils/date_serialization\";\nimport messageLocalization from \"../../localization/message\";\nimport devices from \"../../core/devices\";\nimport DataSource from \"../../data/data_source\";\nimport timeZoneDataUtils from \"./timezones/utils.timezones_data\";\nimport { extend } from \"../../core/utils/extend\";\nimport \"./recurrence_editor\";\nimport \"../text_area\";\nimport \"../tag_box\";\nimport \"../switch\";\nimport \"../select_box\";\nvar SCREEN_SIZE_OF_SINGLE_COLUMN = 600;\nexport var APPOINTMENT_FORM_GROUP_NAMES = {\n  Main: \"mainGroup\",\n  Recurrence: \"recurrenceGroup\"\n};\nvar SchedulerAppointmentForm = {\n  _appointmentForm: {},\n  _lockDateShiftFlag: false,\n  _validateAppointmentFormDate: function _validateAppointmentFormDate(editor, value, previousValue) {\n    var isCurrentDateCorrect = null === value || !!value;\n    var isPreviousDateCorrect = null === previousValue || !!previousValue;\n\n    if (!isCurrentDateCorrect && isPreviousDateCorrect) {\n      editor.option(\"value\", previousValue);\n    }\n  },\n  _getAllDayStartDate: function _getAllDayStartDate(startDate) {\n    return new Date(new Date(startDate).setHours(0, 0, 0, 0));\n  },\n  _getAllDayEndDate: function _getAllDayEndDate(startDate) {\n    return new Date(new Date(startDate).setDate(startDate.getDate() + 1));\n  },\n  _getStartDateWithStartHour: function _getStartDateWithStartHour(startDate, startDayHour) {\n    return new Date(new Date(startDate).setHours(startDayHour));\n  },\n  create: function create(componentCreator, $container, isReadOnly, formData) {\n    this._appointmentForm = componentCreator($container, Form, {\n      items: this._editors,\n      readOnly: isReadOnly,\n      showValidationSummary: true,\n      scrollingEnabled: true,\n      colCount: \"auto\",\n      colCountByScreen: {\n        lg: 2,\n        xs: 1\n      },\n      formData: formData,\n      showColonAfterLabel: false,\n      labelLocation: \"top\",\n      screenByWidth: function screenByWidth(width) {\n        return width < SCREEN_SIZE_OF_SINGLE_COLUMN || \"desktop\" !== devices.current().deviceType ? \"xs\" : \"lg\";\n      }\n    });\n    return this._appointmentForm;\n  },\n  _dateBoxValueChanged: function _dateBoxValueChanged(args, dateExpr, isNeedCorrect) {\n    this._validateAppointmentFormDate(args.component, args.value, args.previousValue);\n\n    var value = dateSerialization.deserializeDate(args.value);\n    var previousValue = dateSerialization.deserializeDate(args.previousValue);\n\n    var dateEditor = this._appointmentForm.getEditor(dateExpr);\n\n    var dateValue = dateSerialization.deserializeDate(dateEditor.option(\"value\"));\n\n    if (!this._appointmentForm._lockDateShiftFlag && dateValue && value && isNeedCorrect(dateValue, value)) {\n      var duration = previousValue ? dateValue.getTime() - previousValue.getTime() : 0;\n      dateEditor.option(\"value\", new Date(value.getTime() + duration));\n    }\n  },\n  _createTimezoneEditor: function _createTimezoneEditor(timeZoneExpr, secondTimeZoneExpr, visibleIndex, colSpan, isMainTimeZone) {\n    var _this = this;\n\n    var isShow = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : false;\n    var noTzTitle = messageLocalization.format(\"dxScheduler-noTimezoneTitle\");\n    return {\n      dataField: timeZoneExpr,\n      editorType: \"dxSelectBox\",\n      visibleIndex: visibleIndex,\n      colSpan: colSpan,\n      label: {\n        text: \" \"\n      },\n      editorOptions: {\n        displayExpr: \"title\",\n        valueExpr: \"id\",\n        placeholder: noTzTitle,\n        searchEnabled: true,\n        onValueChanged: function onValueChanged(args) {\n          var form = _this._appointmentForm;\n          var secondTimezoneEditor = form.getEditor(secondTimeZoneExpr);\n\n          if (isMainTimeZone) {\n            secondTimezoneEditor.option(\"value\", args.value);\n          }\n        }\n      },\n      visible: isShow\n    };\n  },\n  _createDateBoxEditor: function _createDateBoxEditor(dataExpr, colSpan, firstDayOfWeek, label, callback) {\n    return {\n      dataField: dataExpr,\n      editorType: \"dxDateBox\",\n      colSpan: colSpan,\n      label: {\n        text: messageLocalization.format(label)\n      },\n      validationRules: [{\n        type: \"required\"\n      }],\n      editorOptions: {\n        width: \"100%\",\n        calendarOptions: {\n          firstDayOfWeek: firstDayOfWeek\n        },\n        onValueChanged: callback\n      }\n    };\n  },\n  _createDateBoxItems: function _createDateBoxItems(dataExprs, schedulerInst, allowTimeZoneEditing) {\n    var _this2 = this;\n\n    var colSpan = allowTimeZoneEditing ? 2 : 1;\n    var firstDayOfWeek = schedulerInst.option(\"firstDayOfWeek\");\n    return [this._createDateBoxEditor(dataExprs.startDateExpr, colSpan, firstDayOfWeek, \"dxScheduler-editorLabelStartDate\", function (args) {\n      _this2._dateBoxValueChanged(args, dataExprs.endDateExpr, function (endValue, startValue) {\n        return endValue < startValue;\n      });\n    }), this._createTimezoneEditor(dataExprs.startDateTimeZoneExpr, dataExprs.endDateTimeZoneExpr, 1, colSpan, true, allowTimeZoneEditing), this._createDateBoxEditor(dataExprs.endDateExpr, colSpan, firstDayOfWeek, \"dxScheduler-editorLabelEndDate\", function (args) {\n      _this2._dateBoxValueChanged(args, dataExprs.startDateExpr, function (startValue, endValue) {\n        return endValue < startValue;\n      });\n    }), this._createTimezoneEditor(dataExprs.endDateTimeZoneExpr, dataExprs.startDateTimeZoneExpr, 3, colSpan, false, allowTimeZoneEditing)];\n  },\n  _createMainItems: function _createMainItems(dataExprs, schedulerInst, triggerResize, changeSize, allowTimeZoneEditing) {\n    var _this3 = this;\n\n    return [{\n      dataField: dataExprs.textExpr,\n      editorType: \"dxTextBox\",\n      colSpan: 2,\n      label: {\n        text: messageLocalization.format(\"dxScheduler-editorLabelTitle\")\n      }\n    }, {\n      itemType: \"group\",\n      colSpan: 2,\n      colCountByScreen: {\n        lg: 2,\n        xs: 1\n      },\n      items: this._createDateBoxItems(dataExprs, schedulerInst, allowTimeZoneEditing)\n    }, {\n      itemType: \"group\",\n      colCountByScreen: {\n        lg: 3,\n        xs: 3\n      },\n      colSpan: 2,\n      items: [{\n        dataField: dataExprs.allDayExpr,\n        cssClass: \"dx-appointment-form-switch\",\n        editorType: \"dxSwitch\",\n        label: {\n          text: messageLocalization.format(\"dxScheduler-allDay\"),\n          location: \"right\"\n        },\n        editorOptions: {\n          onValueChanged: function onValueChanged(args) {\n            var value = args.value;\n\n            var startDateEditor = _this3._appointmentForm.getEditor(dataExprs.startDateExpr);\n\n            var endDateEditor = _this3._appointmentForm.getEditor(dataExprs.endDateExpr);\n\n            var startDate = dateSerialization.deserializeDate(startDateEditor.option(\"value\"));\n\n            if (!_this3._appointmentForm._lockDateShiftFlag && startDate) {\n              if (value) {\n                var allDayStartDate = _this3._getAllDayStartDate(startDate);\n\n                startDateEditor.option(\"value\", allDayStartDate);\n                endDateEditor.option(\"value\", _this3._getAllDayEndDate(allDayStartDate));\n              } else {\n                var startDateWithStartHour = _this3._getStartDateWithStartHour(startDate, schedulerInst.option(\"startDayHour\"));\n\n                var endDate = schedulerInst._workSpace.calculateEndDate(startDateWithStartHour);\n\n                startDateEditor.option(\"value\", startDateWithStartHour);\n                endDateEditor.option(\"value\", endDate);\n              }\n            }\n\n            startDateEditor.option(\"type\", value ? \"date\" : \"datetime\");\n            endDateEditor.option(\"type\", value ? \"date\" : \"datetime\");\n          }\n        }\n      }, {\n        editorType: \"dxSwitch\",\n        dataField: \"repeat\",\n        cssClass: \"dx-appointment-form-switch\",\n        name: \"visibilityChanged\",\n        label: {\n          text: messageLocalization.format(\"dxScheduler-editorLabelRecurrence\"),\n          location: \"right\"\n        },\n        editorOptions: {\n          onValueChanged: function onValueChanged(args) {\n            var form = _this3._appointmentForm;\n            var colSpan = args.value ? 1 : 2;\n            form.itemOption(APPOINTMENT_FORM_GROUP_NAMES.Main, \"colSpan\", colSpan);\n            form.itemOption(APPOINTMENT_FORM_GROUP_NAMES.Recurrence, \"colSpan\", colSpan);\n\n            _this3._updateRecurrenceItemVisibility(dataExprs.recurrenceRuleExpr, args.value, form);\n\n            changeSize(args.value);\n            triggerResize();\n          }\n        }\n      }]\n    }, {\n      itemType: \"empty\",\n      colSpan: 2\n    }, {\n      dataField: dataExprs.descriptionExpr,\n      editorType: \"dxTextArea\",\n      colSpan: 2,\n      label: {\n        text: messageLocalization.format(\"dxScheduler-editorLabelDescription\")\n      }\n    }, {\n      itemType: \"empty\",\n      colSpan: 2\n    }];\n  },\n  _updateRecurrenceItemVisibility: function _updateRecurrenceItemVisibility(recurrenceRuleExpr, value, form) {\n    var _form$getEditor;\n\n    form.itemOption(APPOINTMENT_FORM_GROUP_NAMES.Recurrence, \"visible\", value);\n    !value && form.updateData(recurrenceRuleExpr, \"\");\n    null === (_form$getEditor = form.getEditor(recurrenceRuleExpr)) || void 0 === _form$getEditor ? void 0 : _form$getEditor.changeValueByVisibility(value);\n  },\n  prepareAppointmentFormEditors: function prepareAppointmentFormEditors(dataExprs, schedulerInst, triggerResize, changeSize, appointmentData, allowTimeZoneEditing, readOnly) {\n    var recurrenceEditorVisibility = !!this.getRecurrenceRule(appointmentData, dataExprs);\n    changeSize(recurrenceEditorVisibility);\n    this._editors = [{\n      itemType: \"group\",\n      name: APPOINTMENT_FORM_GROUP_NAMES.Main,\n      colCountByScreen: {\n        lg: 2,\n        xs: 1\n      },\n      colSpan: recurrenceEditorVisibility ? 1 : 2,\n      items: this._createMainItems(dataExprs, schedulerInst, triggerResize, changeSize, allowTimeZoneEditing)\n    }, {\n      itemType: \"group\",\n      name: APPOINTMENT_FORM_GROUP_NAMES.Recurrence,\n      visible: recurrenceEditorVisibility,\n      colSpan: recurrenceEditorVisibility ? 1 : 2,\n      items: this._createRecurrenceEditor(dataExprs, schedulerInst, readOnly)\n    }];\n    return this._editors;\n  },\n  _createRecurrenceEditor: function _createRecurrenceEditor(dataExprs, schedulerInst, readOnly) {\n    return [{\n      dataField: dataExprs.recurrenceRuleExpr,\n      editorType: \"dxRecurrenceEditor\",\n      editorOptions: {\n        readOnly: readOnly,\n        firstDayOfWeek: schedulerInst.option(\"firstDayOfWeek\")\n      },\n      label: {\n        text: \" \",\n        visible: false\n      }\n    }];\n  },\n  getRecurrenceRule: function getRecurrenceRule(data, dataExprs) {\n    return data[dataExprs.recurrenceRuleExpr];\n  },\n  concatResources: function concatResources(resources) {\n    this._editors[0].items = this._editors[0].items.concat(resources);\n  },\n  setEditorsType: function setEditorsType(form, startDateExpr, endDateExpr, allDay) {\n    var startDateItemPath = \"\".concat(APPOINTMENT_FORM_GROUP_NAMES.Main, \".\").concat(startDateExpr);\n    var endDateItemPath = \"\".concat(APPOINTMENT_FORM_GROUP_NAMES.Recurrence, \".\").concat(endDateExpr);\n    var startDateFormItem = form.itemOption(startDateItemPath);\n    var endDateFormItem = form.itemOption(endDateItemPath);\n\n    if (startDateFormItem && endDateFormItem) {\n      var startDateEditorOptions = startDateFormItem.editorOptions;\n      var endDateEditorOptions = endDateFormItem.editorOptions;\n      startDateEditorOptions.type = endDateEditorOptions.type = allDay ? \"date\" : \"datetime\";\n      form.itemOption(startDateItemPath, \"editorOptions\", startDateEditorOptions);\n      form.itemOption(endDateItemPath, \"editorOptions\", endDateEditorOptions);\n    }\n  },\n  updateTimeZoneEditorDataSource: function updateTimeZoneEditorDataSource(date, expression) {\n    var timeZoneDataSource = new DataSource({\n      store: timeZoneDataUtils.getDisplayedTimeZones(date),\n      paginate: true,\n      pageSize: 10\n    });\n    var options = {\n      dataSource: timeZoneDataSource\n    };\n    this.setEditorOptions(expression, \"Main\", options);\n  },\n  updateRecurrenceEditorStartDate: function updateRecurrenceEditorStartDate(date, expression) {\n    var options = {\n      startDate: date\n    };\n    this.setEditorOptions(expression, \"Recurrence\", options);\n  },\n  setEditorOptions: function setEditorOptions(name, groupName, options) {\n    var editorPath = \"\".concat(APPOINTMENT_FORM_GROUP_NAMES.groupName, \".\").concat(name);\n\n    var editor = this._appointmentForm.itemOption(editorPath);\n\n    editor && this._appointmentForm.itemOption(editorPath, \"editorOptions\", extend({}, editor.editorOptions, options));\n  },\n  updateFormData: function updateFormData(appointmentForm, formData, dataExprs) {\n    appointmentForm._lockDateShiftFlag = true;\n    var startDate = new Date(formData[dataExprs.startDateExpr]);\n    var endDate = new Date(formData[dataExprs.endDateExpr]);\n    this.updateTimeZoneEditorDataSource(startDate, dataExprs.startDateTimeZoneExpr);\n    this.updateTimeZoneEditorDataSource(endDate, dataExprs.endDateTimeZoneExpr);\n    this.updateRecurrenceEditorStartDate(startDate, dataExprs.recurrenceRuleExpr);\n    appointmentForm.option(\"formData\", formData);\n    appointmentForm._lockDateShiftFlag = false;\n  }\n};\nexport { SchedulerAppointmentForm as AppointmentForm };","map":{"version":3,"sources":["C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/devextreme/esm/ui/scheduler/appointment_form.js"],"names":["Form","dateSerialization","messageLocalization","devices","DataSource","timeZoneDataUtils","extend","SCREEN_SIZE_OF_SINGLE_COLUMN","APPOINTMENT_FORM_GROUP_NAMES","Main","Recurrence","SchedulerAppointmentForm","_appointmentForm","_lockDateShiftFlag","_validateAppointmentFormDate","editor","value","previousValue","isCurrentDateCorrect","isPreviousDateCorrect","option","_getAllDayStartDate","startDate","Date","setHours","_getAllDayEndDate","setDate","getDate","_getStartDateWithStartHour","startDayHour","create","componentCreator","$container","isReadOnly","formData","items","_editors","readOnly","showValidationSummary","scrollingEnabled","colCount","colCountByScreen","lg","xs","showColonAfterLabel","labelLocation","screenByWidth","width","current","deviceType","_dateBoxValueChanged","args","dateExpr","isNeedCorrect","component","deserializeDate","dateEditor","getEditor","dateValue","duration","getTime","_createTimezoneEditor","timeZoneExpr","secondTimeZoneExpr","visibleIndex","colSpan","isMainTimeZone","isShow","arguments","length","noTzTitle","format","dataField","editorType","label","text","editorOptions","displayExpr","valueExpr","placeholder","searchEnabled","onValueChanged","form","secondTimezoneEditor","visible","_createDateBoxEditor","dataExpr","firstDayOfWeek","callback","validationRules","type","calendarOptions","_createDateBoxItems","dataExprs","schedulerInst","allowTimeZoneEditing","startDateExpr","endDateExpr","endValue","startValue","startDateTimeZoneExpr","endDateTimeZoneExpr","_createMainItems","triggerResize","changeSize","textExpr","itemType","allDayExpr","cssClass","location","startDateEditor","endDateEditor","allDayStartDate","startDateWithStartHour","endDate","_workSpace","calculateEndDate","name","itemOption","_updateRecurrenceItemVisibility","recurrenceRuleExpr","descriptionExpr","_form$getEditor","updateData","changeValueByVisibility","prepareAppointmentFormEditors","appointmentData","recurrenceEditorVisibility","getRecurrenceRule","_createRecurrenceEditor","data","concatResources","resources","concat","setEditorsType","allDay","startDateItemPath","endDateItemPath","startDateFormItem","endDateFormItem","startDateEditorOptions","endDateEditorOptions","updateTimeZoneEditorDataSource","date","expression","timeZoneDataSource","store","getDisplayedTimeZones","paginate","pageSize","options","dataSource","setEditorOptions","updateRecurrenceEditorStartDate","groupName","editorPath","updateFormData","appointmentForm","AppointmentForm"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/scheduler/appointment_form.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport Form from \"../form\";\r\nimport dateSerialization from \"../../core/utils/date_serialization\";\r\nimport messageLocalization from \"../../localization/message\";\r\nimport devices from \"../../core/devices\";\r\nimport DataSource from \"../../data/data_source\";\r\nimport timeZoneDataUtils from \"./timezones/utils.timezones_data\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport \"./recurrence_editor\";\r\nimport \"../text_area\";\r\nimport \"../tag_box\";\r\nimport \"../switch\";\r\nimport \"../select_box\";\r\nvar SCREEN_SIZE_OF_SINGLE_COLUMN = 600;\r\nexport var APPOINTMENT_FORM_GROUP_NAMES = {\r\n    Main: \"mainGroup\",\r\n    Recurrence: \"recurrenceGroup\"\r\n};\r\nvar SchedulerAppointmentForm = {\r\n    _appointmentForm: {},\r\n    _lockDateShiftFlag: false,\r\n    _validateAppointmentFormDate: function(editor, value, previousValue) {\r\n        var isCurrentDateCorrect = null === value || !!value;\r\n        var isPreviousDateCorrect = null === previousValue || !!previousValue;\r\n        if (!isCurrentDateCorrect && isPreviousDateCorrect) {\r\n            editor.option(\"value\", previousValue)\r\n        }\r\n    },\r\n    _getAllDayStartDate: function(startDate) {\r\n        return new Date(new Date(startDate).setHours(0, 0, 0, 0))\r\n    },\r\n    _getAllDayEndDate: function(startDate) {\r\n        return new Date(new Date(startDate).setDate(startDate.getDate() + 1))\r\n    },\r\n    _getStartDateWithStartHour: function(startDate, startDayHour) {\r\n        return new Date(new Date(startDate).setHours(startDayHour))\r\n    },\r\n    create: function(componentCreator, $container, isReadOnly, formData) {\r\n        this._appointmentForm = componentCreator($container, Form, {\r\n            items: this._editors,\r\n            readOnly: isReadOnly,\r\n            showValidationSummary: true,\r\n            scrollingEnabled: true,\r\n            colCount: \"auto\",\r\n            colCountByScreen: {\r\n                lg: 2,\r\n                xs: 1\r\n            },\r\n            formData: formData,\r\n            showColonAfterLabel: false,\r\n            labelLocation: \"top\",\r\n            screenByWidth: width => width < SCREEN_SIZE_OF_SINGLE_COLUMN || \"desktop\" !== devices.current().deviceType ? \"xs\" : \"lg\"\r\n        });\r\n        return this._appointmentForm\r\n    },\r\n    _dateBoxValueChanged: function(args, dateExpr, isNeedCorrect) {\r\n        this._validateAppointmentFormDate(args.component, args.value, args.previousValue);\r\n        var value = dateSerialization.deserializeDate(args.value);\r\n        var previousValue = dateSerialization.deserializeDate(args.previousValue);\r\n        var dateEditor = this._appointmentForm.getEditor(dateExpr);\r\n        var dateValue = dateSerialization.deserializeDate(dateEditor.option(\"value\"));\r\n        if (!this._appointmentForm._lockDateShiftFlag && dateValue && value && isNeedCorrect(dateValue, value)) {\r\n            var duration = previousValue ? dateValue.getTime() - previousValue.getTime() : 0;\r\n            dateEditor.option(\"value\", new Date(value.getTime() + duration))\r\n        }\r\n    },\r\n    _createTimezoneEditor: function(timeZoneExpr, secondTimeZoneExpr, visibleIndex, colSpan, isMainTimeZone) {\r\n        var isShow = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : false;\r\n        var noTzTitle = messageLocalization.format(\"dxScheduler-noTimezoneTitle\");\r\n        return {\r\n            dataField: timeZoneExpr,\r\n            editorType: \"dxSelectBox\",\r\n            visibleIndex: visibleIndex,\r\n            colSpan: colSpan,\r\n            label: {\r\n                text: \" \"\r\n            },\r\n            editorOptions: {\r\n                displayExpr: \"title\",\r\n                valueExpr: \"id\",\r\n                placeholder: noTzTitle,\r\n                searchEnabled: true,\r\n                onValueChanged: args => {\r\n                    var form = this._appointmentForm;\r\n                    var secondTimezoneEditor = form.getEditor(secondTimeZoneExpr);\r\n                    if (isMainTimeZone) {\r\n                        secondTimezoneEditor.option(\"value\", args.value)\r\n                    }\r\n                }\r\n            },\r\n            visible: isShow\r\n        }\r\n    },\r\n    _createDateBoxEditor: function(dataExpr, colSpan, firstDayOfWeek, label, callback) {\r\n        return {\r\n            dataField: dataExpr,\r\n            editorType: \"dxDateBox\",\r\n            colSpan: colSpan,\r\n            label: {\r\n                text: messageLocalization.format(label)\r\n            },\r\n            validationRules: [{\r\n                type: \"required\"\r\n            }],\r\n            editorOptions: {\r\n                width: \"100%\",\r\n                calendarOptions: {\r\n                    firstDayOfWeek: firstDayOfWeek\r\n                },\r\n                onValueChanged: callback\r\n            }\r\n        }\r\n    },\r\n    _createDateBoxItems: function(dataExprs, schedulerInst, allowTimeZoneEditing) {\r\n        var colSpan = allowTimeZoneEditing ? 2 : 1;\r\n        var firstDayOfWeek = schedulerInst.option(\"firstDayOfWeek\");\r\n        return [this._createDateBoxEditor(dataExprs.startDateExpr, colSpan, firstDayOfWeek, \"dxScheduler-editorLabelStartDate\", args => {\r\n            this._dateBoxValueChanged(args, dataExprs.endDateExpr, (endValue, startValue) => endValue < startValue)\r\n        }), this._createTimezoneEditor(dataExprs.startDateTimeZoneExpr, dataExprs.endDateTimeZoneExpr, 1, colSpan, true, allowTimeZoneEditing), this._createDateBoxEditor(dataExprs.endDateExpr, colSpan, firstDayOfWeek, \"dxScheduler-editorLabelEndDate\", args => {\r\n            this._dateBoxValueChanged(args, dataExprs.startDateExpr, (startValue, endValue) => endValue < startValue)\r\n        }), this._createTimezoneEditor(dataExprs.endDateTimeZoneExpr, dataExprs.startDateTimeZoneExpr, 3, colSpan, false, allowTimeZoneEditing)]\r\n    },\r\n    _createMainItems: function(dataExprs, schedulerInst, triggerResize, changeSize, allowTimeZoneEditing) {\r\n        return [{\r\n            dataField: dataExprs.textExpr,\r\n            editorType: \"dxTextBox\",\r\n            colSpan: 2,\r\n            label: {\r\n                text: messageLocalization.format(\"dxScheduler-editorLabelTitle\")\r\n            }\r\n        }, {\r\n            itemType: \"group\",\r\n            colSpan: 2,\r\n            colCountByScreen: {\r\n                lg: 2,\r\n                xs: 1\r\n            },\r\n            items: this._createDateBoxItems(dataExprs, schedulerInst, allowTimeZoneEditing)\r\n        }, {\r\n            itemType: \"group\",\r\n            colCountByScreen: {\r\n                lg: 3,\r\n                xs: 3\r\n            },\r\n            colSpan: 2,\r\n            items: [{\r\n                dataField: dataExprs.allDayExpr,\r\n                cssClass: \"dx-appointment-form-switch\",\r\n                editorType: \"dxSwitch\",\r\n                label: {\r\n                    text: messageLocalization.format(\"dxScheduler-allDay\"),\r\n                    location: \"right\"\r\n                },\r\n                editorOptions: {\r\n                    onValueChanged: args => {\r\n                        var value = args.value;\r\n                        var startDateEditor = this._appointmentForm.getEditor(dataExprs.startDateExpr);\r\n                        var endDateEditor = this._appointmentForm.getEditor(dataExprs.endDateExpr);\r\n                        var startDate = dateSerialization.deserializeDate(startDateEditor.option(\"value\"));\r\n                        if (!this._appointmentForm._lockDateShiftFlag && startDate) {\r\n                            if (value) {\r\n                                var allDayStartDate = this._getAllDayStartDate(startDate);\r\n                                startDateEditor.option(\"value\", allDayStartDate);\r\n                                endDateEditor.option(\"value\", this._getAllDayEndDate(allDayStartDate))\r\n                            } else {\r\n                                var startDateWithStartHour = this._getStartDateWithStartHour(startDate, schedulerInst.option(\"startDayHour\"));\r\n                                var endDate = schedulerInst._workSpace.calculateEndDate(startDateWithStartHour);\r\n                                startDateEditor.option(\"value\", startDateWithStartHour);\r\n                                endDateEditor.option(\"value\", endDate)\r\n                            }\r\n                        }\r\n                        startDateEditor.option(\"type\", value ? \"date\" : \"datetime\");\r\n                        endDateEditor.option(\"type\", value ? \"date\" : \"datetime\")\r\n                    }\r\n                }\r\n            }, {\r\n                editorType: \"dxSwitch\",\r\n                dataField: \"repeat\",\r\n                cssClass: \"dx-appointment-form-switch\",\r\n                name: \"visibilityChanged\",\r\n                label: {\r\n                    text: messageLocalization.format(\"dxScheduler-editorLabelRecurrence\"),\r\n                    location: \"right\"\r\n                },\r\n                editorOptions: {\r\n                    onValueChanged: args => {\r\n                        var form = this._appointmentForm;\r\n                        var colSpan = args.value ? 1 : 2;\r\n                        form.itemOption(APPOINTMENT_FORM_GROUP_NAMES.Main, \"colSpan\", colSpan);\r\n                        form.itemOption(APPOINTMENT_FORM_GROUP_NAMES.Recurrence, \"colSpan\", colSpan);\r\n                        this._updateRecurrenceItemVisibility(dataExprs.recurrenceRuleExpr, args.value, form);\r\n                        changeSize(args.value);\r\n                        triggerResize()\r\n                    }\r\n                }\r\n            }]\r\n        }, {\r\n            itemType: \"empty\",\r\n            colSpan: 2\r\n        }, {\r\n            dataField: dataExprs.descriptionExpr,\r\n            editorType: \"dxTextArea\",\r\n            colSpan: 2,\r\n            label: {\r\n                text: messageLocalization.format(\"dxScheduler-editorLabelDescription\")\r\n            }\r\n        }, {\r\n            itemType: \"empty\",\r\n            colSpan: 2\r\n        }]\r\n    },\r\n    _updateRecurrenceItemVisibility: function(recurrenceRuleExpr, value, form) {\r\n        var _form$getEditor;\r\n        form.itemOption(APPOINTMENT_FORM_GROUP_NAMES.Recurrence, \"visible\", value);\r\n        !value && form.updateData(recurrenceRuleExpr, \"\");\r\n        null === (_form$getEditor = form.getEditor(recurrenceRuleExpr)) || void 0 === _form$getEditor ? void 0 : _form$getEditor.changeValueByVisibility(value)\r\n    },\r\n    prepareAppointmentFormEditors: function(dataExprs, schedulerInst, triggerResize, changeSize, appointmentData, allowTimeZoneEditing, readOnly) {\r\n        var recurrenceEditorVisibility = !!this.getRecurrenceRule(appointmentData, dataExprs);\r\n        changeSize(recurrenceEditorVisibility);\r\n        this._editors = [{\r\n            itemType: \"group\",\r\n            name: APPOINTMENT_FORM_GROUP_NAMES.Main,\r\n            colCountByScreen: {\r\n                lg: 2,\r\n                xs: 1\r\n            },\r\n            colSpan: recurrenceEditorVisibility ? 1 : 2,\r\n            items: this._createMainItems(dataExprs, schedulerInst, triggerResize, changeSize, allowTimeZoneEditing)\r\n        }, {\r\n            itemType: \"group\",\r\n            name: APPOINTMENT_FORM_GROUP_NAMES.Recurrence,\r\n            visible: recurrenceEditorVisibility,\r\n            colSpan: recurrenceEditorVisibility ? 1 : 2,\r\n            items: this._createRecurrenceEditor(dataExprs, schedulerInst, readOnly)\r\n        }];\r\n        return this._editors\r\n    },\r\n    _createRecurrenceEditor: (dataExprs, schedulerInst, readOnly) => [{\r\n        dataField: dataExprs.recurrenceRuleExpr,\r\n        editorType: \"dxRecurrenceEditor\",\r\n        editorOptions: {\r\n            readOnly: readOnly,\r\n            firstDayOfWeek: schedulerInst.option(\"firstDayOfWeek\")\r\n        },\r\n        label: {\r\n            text: \" \",\r\n            visible: false\r\n        }\r\n    }],\r\n    getRecurrenceRule: (data, dataExprs) => data[dataExprs.recurrenceRuleExpr],\r\n    concatResources: function(resources) {\r\n        this._editors[0].items = this._editors[0].items.concat(resources)\r\n    },\r\n    setEditorsType: function(form, startDateExpr, endDateExpr, allDay) {\r\n        var startDateItemPath = \"\".concat(APPOINTMENT_FORM_GROUP_NAMES.Main, \".\").concat(startDateExpr);\r\n        var endDateItemPath = \"\".concat(APPOINTMENT_FORM_GROUP_NAMES.Recurrence, \".\").concat(endDateExpr);\r\n        var startDateFormItem = form.itemOption(startDateItemPath);\r\n        var endDateFormItem = form.itemOption(endDateItemPath);\r\n        if (startDateFormItem && endDateFormItem) {\r\n            var startDateEditorOptions = startDateFormItem.editorOptions;\r\n            var endDateEditorOptions = endDateFormItem.editorOptions;\r\n            startDateEditorOptions.type = endDateEditorOptions.type = allDay ? \"date\" : \"datetime\";\r\n            form.itemOption(startDateItemPath, \"editorOptions\", startDateEditorOptions);\r\n            form.itemOption(endDateItemPath, \"editorOptions\", endDateEditorOptions)\r\n        }\r\n    },\r\n    updateTimeZoneEditorDataSource(date, expression) {\r\n        var timeZoneDataSource = new DataSource({\r\n            store: timeZoneDataUtils.getDisplayedTimeZones(date),\r\n            paginate: true,\r\n            pageSize: 10\r\n        });\r\n        var options = {\r\n            dataSource: timeZoneDataSource\r\n        };\r\n        this.setEditorOptions(expression, \"Main\", options)\r\n    },\r\n    updateRecurrenceEditorStartDate(date, expression) {\r\n        var options = {\r\n            startDate: date\r\n        };\r\n        this.setEditorOptions(expression, \"Recurrence\", options)\r\n    },\r\n    setEditorOptions(name, groupName, options) {\r\n        var editorPath = \"\".concat(APPOINTMENT_FORM_GROUP_NAMES.groupName, \".\").concat(name);\r\n        var editor = this._appointmentForm.itemOption(editorPath);\r\n        editor && this._appointmentForm.itemOption(editorPath, \"editorOptions\", extend({}, editor.editorOptions, options))\r\n    },\r\n    updateFormData: function(appointmentForm, formData, dataExprs) {\r\n        appointmentForm._lockDateShiftFlag = true;\r\n        var startDate = new Date(formData[dataExprs.startDateExpr]);\r\n        var endDate = new Date(formData[dataExprs.endDateExpr]);\r\n        this.updateTimeZoneEditorDataSource(startDate, dataExprs.startDateTimeZoneExpr);\r\n        this.updateTimeZoneEditorDataSource(endDate, dataExprs.endDateTimeZoneExpr);\r\n        this.updateRecurrenceEditorStartDate(startDate, dataExprs.recurrenceRuleExpr);\r\n        appointmentForm.option(\"formData\", formData);\r\n        appointmentForm._lockDateShiftFlag = false\r\n    }\r\n};\r\nexport {\r\n    SchedulerAppointmentForm as AppointmentForm\r\n};\r\n"]},"metadata":{},"sourceType":"module"}