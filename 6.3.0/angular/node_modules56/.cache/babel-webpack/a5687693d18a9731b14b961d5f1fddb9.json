{"ast":null,"code":"import _slicedToArray from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _get from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/get\";\nimport _getPrototypeOf from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/createSuper\";\n\n/**\r\n * DevExtreme (esm/ui/scheduler/rendering_strategies/ui.scheduler.appointments.strategy.horizontal_month.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport HorizontalMonthLineAppointmentsStrategy from \"./ui.scheduler.appointments.strategy.horizontal_month_line\";\nvar MONTH_APPOINTMENT_HEIGHT_RATIO = .6;\nvar MONTH_APPOINTMENT_MIN_OFFSET = 26;\nvar MONTH_APPOINTMENT_MAX_OFFSET = 30;\nvar MONTH_DROPDOWN_APPOINTMENT_MIN_RIGHT_OFFSET = 36;\nvar MONTH_DROPDOWN_APPOINTMENT_MAX_RIGHT_OFFSET = 60;\n\nvar HorizontalMonthRenderingStrategy = /*#__PURE__*/function (_HorizontalMonthLineA) {\n  _inherits(HorizontalMonthRenderingStrategy, _HorizontalMonthLineA);\n\n  var _super = _createSuper(HorizontalMonthRenderingStrategy);\n\n  function HorizontalMonthRenderingStrategy() {\n    _classCallCheck(this, HorizontalMonthRenderingStrategy);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(HorizontalMonthRenderingStrategy, [{\n    key: \"_getLeftPosition\",\n    value: function _getLeftPosition(settings) {\n      var fullWeekAppointmentWidth = this._getFullWeekAppointmentWidth(settings.groupIndex);\n\n      var result = this._calculateMultiWeekAppointmentLeftOffset(settings.hMax, fullWeekAppointmentWidth);\n\n      if (\"vertical\" === this.instance._groupOrientation) {\n        result += this.instance.fire(\"getWorkSpaceDateTableOffset\");\n      }\n\n      return result;\n    }\n  }, {\n    key: \"_getChunkCount\",\n    value: function _getChunkCount(fullChunksWidth, firstChunkWidth, weekWidth) {\n      var rawFullChunksWidth = fullChunksWidth - firstChunkWidth + weekWidth;\n      return Math.ceil(rawFullChunksWidth / weekWidth);\n    }\n  }, {\n    key: \"_getChunkWidths\",\n    value: function _getChunkWidths(geometry) {\n      var firstChunkWidth = geometry.reducedWidth;\n      var fullChunksWidth = Math.floor(geometry.sourceAppointmentWidth);\n      var widthWithoutFirstChunk = fullChunksWidth - firstChunkWidth;\n      return [firstChunkWidth, fullChunksWidth, widthWithoutFirstChunk];\n    }\n  }, {\n    key: \"_getTailChunkSettings\",\n    value: function _getTailChunkSettings(withoutFirstChunkWidth, weekWidth, leftPosition) {\n      var tailChunkWidth = withoutFirstChunkWidth % weekWidth || weekWidth;\n      var rtlPosition = leftPosition + (weekWidth - tailChunkWidth);\n      var tailChunkLeftPosition = this._isRtl() ? rtlPosition : leftPosition;\n      return [tailChunkWidth, tailChunkLeftPosition];\n    }\n  }, {\n    key: \"_getAppointmentParts\",\n    value: function _getAppointmentParts(geometry, settings) {\n      var result = [];\n      var weekWidth = Math.round(this._getFullWeekAppointmentWidth(settings.groupIndex));\n\n      var _this$_getChunkWidths = this._getChunkWidths(geometry, settings, weekWidth),\n          _this$_getChunkWidths2 = _slicedToArray(_this$_getChunkWidths, 3),\n          firstChunkWidth = _this$_getChunkWidths2[0],\n          fullChunksWidth = _this$_getChunkWidths2[1],\n          withoutFirstChunkWidth = _this$_getChunkWidths2[2];\n\n      var leftPosition = this._getLeftPosition(settings);\n\n      var hasTailChunk = this.instance.fire(\"getEndViewDate\") > settings.info.appointment.endDate;\n\n      var chunkCount = this._getChunkCount(fullChunksWidth, firstChunkWidth, weekWidth);\n\n      var _this$_getTailChunkSe = this._getTailChunkSettings(withoutFirstChunkWidth, weekWidth, leftPosition),\n          _this$_getTailChunkSe2 = _slicedToArray(_this$_getTailChunkSe, 2),\n          tailChunkWidth = _this$_getTailChunkSe2[0],\n          tailChunkLeftPosition = _this$_getTailChunkSe2[1];\n\n      for (var chunkIndex = 1; chunkIndex < chunkCount; chunkIndex++) {\n        var topPosition = settings.top + this.getDefaultCellHeight() * chunkIndex;\n        var isTailChunk = hasTailChunk && chunkIndex === chunkCount - 1;\n        result.push(_extends({}, settings, {\n          top: topPosition,\n          left: isTailChunk ? tailChunkLeftPosition : leftPosition,\n          height: geometry.height,\n          width: isTailChunk ? tailChunkWidth : weekWidth,\n          appointmentReduced: isTailChunk ? \"tail\" : \"body\",\n          rowIndex: ++settings.rowIndex,\n          cellIndex: 0\n        }));\n      }\n\n      return result;\n    }\n  }, {\n    key: \"_calculateMultiWeekAppointmentLeftOffset\",\n    value: function _calculateMultiWeekAppointmentLeftOffset(max, width) {\n      return this._isRtl() ? max : max - width;\n    }\n  }, {\n    key: \"_getFullWeekAppointmentWidth\",\n    value: function _getFullWeekAppointmentWidth(groupIndex) {\n      this._maxFullWeekAppointmentWidth = this.instance.fire(\"getFullWeekAppointmentWidth\", {\n        groupIndex: groupIndex\n      });\n      return this._maxFullWeekAppointmentWidth;\n    }\n  }, {\n    key: \"_getAppointmentDefaultHeight\",\n    value: function _getAppointmentDefaultHeight() {\n      return this._getAppointmentHeightByTheme();\n    }\n  }, {\n    key: \"_getAppointmentMinHeight\",\n    value: function _getAppointmentMinHeight() {\n      return this._getAppointmentDefaultHeight();\n    }\n  }, {\n    key: \"_columnCondition\",\n    value: function _columnCondition(a, b) {\n      var conditions = this._getConditions(a, b);\n\n      return conditions.rowCondition || conditions.columnCondition || conditions.cellPositionCondition;\n    }\n  }, {\n    key: \"createTaskPositionMap\",\n    value: function createTaskPositionMap(items) {\n      return _get(_getPrototypeOf(HorizontalMonthRenderingStrategy.prototype), \"createTaskPositionMap\", this).call(this, items, true);\n    }\n  }, {\n    key: \"_getSortedPositions\",\n    value: function _getSortedPositions(map) {\n      return _get(_getPrototypeOf(HorizontalMonthRenderingStrategy.prototype), \"_getSortedPositions\", this).call(this, map, true);\n    }\n  }, {\n    key: \"_getDefaultRatio\",\n    value: function _getDefaultRatio() {\n      return MONTH_APPOINTMENT_HEIGHT_RATIO;\n    }\n  }, {\n    key: \"_getOffsets\",\n    value: function _getOffsets() {\n      return {\n        unlimited: MONTH_APPOINTMENT_MIN_OFFSET,\n        auto: MONTH_APPOINTMENT_MAX_OFFSET\n      };\n    }\n  }, {\n    key: \"getDropDownAppointmentWidth\",\n    value: function getDropDownAppointmentWidth(intervalCount) {\n      if (this.instance.fire(\"isAdaptive\")) {\n        return this.getDropDownButtonAdaptiveSize();\n      }\n\n      var offset = intervalCount > 1 ? MONTH_DROPDOWN_APPOINTMENT_MAX_RIGHT_OFFSET : MONTH_DROPDOWN_APPOINTMENT_MIN_RIGHT_OFFSET;\n      return this.getDefaultCellWidth() - offset;\n    }\n  }, {\n    key: \"needCorrectAppointmentDates\",\n    value: function needCorrectAppointmentDates() {\n      return false;\n    }\n  }, {\n    key: \"_needVerticalGroupBounds\",\n    value: function _needVerticalGroupBounds() {\n      return false;\n    }\n  }, {\n    key: \"_needHorizontalGroupBounds\",\n    value: function _needHorizontalGroupBounds() {\n      return true;\n    }\n  }]);\n\n  return HorizontalMonthRenderingStrategy;\n}(HorizontalMonthLineAppointmentsStrategy);\n\nexport default HorizontalMonthRenderingStrategy;","map":null,"metadata":{},"sourceType":"module"}