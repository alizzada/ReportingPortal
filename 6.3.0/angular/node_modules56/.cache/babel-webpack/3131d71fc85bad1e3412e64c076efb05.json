{"ast":null,"code":"/**\r\n * DevExtreme (esm/viz/sparklines/base_sparkline.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport eventsEngine from \"../../events/core/events_engine\";\nimport domAdapter from \"../../core/dom_adapter\";\nimport { isFunction } from \"../../core/utils/type\";\nimport BaseWidget from \"../core/base_widget\";\nimport { extend } from \"../../core/utils/extend\";\nimport { addNamespace } from \"../../events/utils/index\";\nimport pointerEvents from \"../../events/pointer\";\nimport { pointInCanvas } from \"../core/utils\";\nvar DEFAULT_LINE_SPACING = 2;\nvar EVENT_NS = \"sparkline-tooltip\";\nvar POINTER_ACTION = addNamespace([pointerEvents.down, pointerEvents.move], EVENT_NS);\nimport { Translator2D } from \"../translators/translator2d\";\nvar _extend = extend;\nvar _floor = Math.floor;\nimport { noop as _noop } from \"../../core/utils/common\";\n\nfunction inCanvas(_ref, x, y) {\n  var width = _ref.width,\n      height = _ref.height;\n  return pointInCanvas({\n    left: 0,\n    top: 0,\n    right: width,\n    bottom: height,\n    width: width,\n    height: height\n  }, x, y);\n}\n\nfunction pointerHandler(_ref2) {\n  var data = _ref2.data;\n  var that = data.widget;\n\n  that._enableOutHandler();\n\n  that._showTooltip();\n}\n\nfunction generateDefaultCustomizeTooltipCallback(fontOptions, rtlEnabled) {\n  var lineSpacing = fontOptions.lineSpacing;\n  var lineHeight = (void 0 !== lineSpacing && null !== lineSpacing ? lineSpacing : DEFAULT_LINE_SPACING) + fontOptions.size;\n  return function (customizeObject) {\n    var html = \"\";\n    var vt = customizeObject.valueText;\n\n    for (var i = 0; i < vt.length; i += 2) {\n      html += \"<tr><td>\" + vt[i] + \"</td><td style='width: 15px'></td><td style='text-align: \" + (rtlEnabled ? \"left\" : \"right\") + \"'>\" + vt[i + 1] + \"</td></tr>\";\n    }\n\n    return {\n      html: \"<table style='border-spacing:0px; line-height: \" + lineHeight + \"px'>\" + html + \"</table>\"\n    };\n  };\n}\n\nfunction generateCustomizeTooltipCallback(customizeTooltip, fontOptions, rtlEnabled) {\n  var defaultCustomizeTooltip = generateDefaultCustomizeTooltipCallback(fontOptions, rtlEnabled);\n\n  if (isFunction(customizeTooltip)) {\n    return function (customizeObject) {\n      var res = customizeTooltip.call(customizeObject, customizeObject);\n\n      if (!(\"html\" in res) && !(\"text\" in res)) {\n        _extend(res, defaultCustomizeTooltip.call(customizeObject, customizeObject));\n      }\n\n      return res;\n    };\n  } else {\n    return defaultCustomizeTooltip;\n  }\n}\n\nfunction createAxis(isHorizontal) {\n  var translator = new Translator2D({}, {}, {\n    shiftZeroValue: !isHorizontal,\n    isHorizontal: !!isHorizontal\n  });\n  return {\n    getTranslator: function getTranslator() {\n      return translator;\n    },\n    update: function update(range, canvas, options) {\n      translator.update(range, canvas, options);\n    },\n    getVisibleArea: function getVisibleArea() {\n      var visibleArea = translator.getCanvasVisibleArea();\n      return [visibleArea.min, visibleArea.max];\n    },\n    visualRange: _noop,\n    calculateInterval: _noop,\n    getMarginOptions: function getMarginOptions() {\n      return {};\n    }\n  };\n}\n\nvar _initTooltip;\n\nvar BaseSparkline = BaseWidget.inherit({\n  _getLayoutItems: _noop,\n  _useLinks: false,\n  _themeDependentChanges: [\"OPTIONS\"],\n  _initCore: function _initCore() {\n    this._tooltipTracker = this._renderer.root;\n\n    this._tooltipTracker.attr({\n      \"pointer-events\": \"visible\"\n    });\n\n    this._createHtmlElements();\n\n    this._initTooltipEvents();\n\n    this._argumentAxis = createAxis(true);\n    this._valueAxis = createAxis();\n  },\n  _getDefaultSize: function _getDefaultSize() {\n    return this._defaultSize;\n  },\n  _disposeCore: function _disposeCore() {\n    this._disposeWidgetElements();\n\n    this._disposeTooltipEvents();\n\n    this._ranges = null;\n  },\n  _optionChangesOrder: [\"OPTIONS\"],\n  _change_OPTIONS: function _change_OPTIONS() {\n    this._prepareOptions();\n\n    this._change([\"UPDATE\"]);\n  },\n  _customChangesOrder: [\"UPDATE\"],\n  _change_UPDATE: function _change_UPDATE() {\n    this._update();\n  },\n  _update: function _update() {\n    if (this._tooltipShown) {\n      this._tooltipShown = false;\n\n      this._tooltip.hide();\n    }\n\n    this._cleanWidgetElements();\n\n    this._updateWidgetElements();\n\n    this._drawWidgetElements();\n  },\n  _updateWidgetElements: function _updateWidgetElements() {\n    var canvas = this._getCorrectCanvas();\n\n    this._updateRange();\n\n    this._argumentAxis.update(this._ranges.arg, canvas, this._getStick());\n\n    this._valueAxis.update(this._ranges.val, canvas);\n  },\n  _getStick: function _getStick() {},\n  _applySize: function _applySize(rect) {\n    this._allOptions.size = {\n      width: rect[2] - rect[0],\n      height: rect[3] - rect[1]\n    };\n\n    this._change([\"UPDATE\"]);\n  },\n  _setupResizeHandler: _noop,\n  _prepareOptions: function _prepareOptions() {\n    return _extend(true, {}, this._themeManager.theme(), this.option());\n  },\n  _getTooltipCoords: function _getTooltipCoords() {\n    var canvas = this._canvas;\n\n    var rootOffset = this._renderer.getRootOffset();\n\n    return {\n      x: canvas.width / 2 + rootOffset.left,\n      y: canvas.height / 2 + rootOffset.top\n    };\n  },\n  _initTooltipEvents: function _initTooltipEvents() {\n    var data = {\n      widget: this\n    };\n\n    this._renderer.root.off(\".\" + EVENT_NS).on(POINTER_ACTION, data, pointerHandler);\n  },\n  _showTooltip: function _showTooltip() {\n    var tooltip;\n\n    if (!this._tooltipShown) {\n      this._tooltipShown = true;\n      tooltip = this._getTooltip();\n      tooltip.isEnabled() && this._tooltip.show(this._getTooltipData(), this._getTooltipCoords(), {});\n    }\n  },\n  _hideTooltip: function _hideTooltip() {\n    if (this._tooltipShown) {\n      this._tooltipShown = false;\n\n      this._tooltip.hide();\n    }\n  },\n  _stopCurrentHandling: function _stopCurrentHandling() {\n    this._hideTooltip();\n  },\n  _enableOutHandler: function _enableOutHandler() {\n    var that = this;\n\n    if (that._outHandler) {\n      return;\n    }\n\n    var handler = function handler(_ref3) {\n      var pageX = _ref3.pageX,\n          pageY = _ref3.pageY;\n\n      var _that$_renderer$getRo = that._renderer.getRootOffset(),\n          left = _that$_renderer$getRo.left,\n          top = _that$_renderer$getRo.top;\n\n      var x = _floor(pageX - left);\n\n      var y = _floor(pageY - top);\n\n      if (!inCanvas(that._canvas, x, y)) {\n        that._hideTooltip();\n\n        that._disableOutHandler();\n      }\n    };\n\n    eventsEngine.on(domAdapter.getDocument(), POINTER_ACTION, handler);\n    this._outHandler = handler;\n  },\n  _disableOutHandler: function _disableOutHandler() {\n    this._outHandler && eventsEngine.off(domAdapter.getDocument(), POINTER_ACTION, this._outHandler);\n    this._outHandler = null;\n  },\n  _disposeTooltipEvents: function _disposeTooltipEvents() {\n    this._tooltipTracker.off();\n\n    this._disableOutHandler();\n\n    this._renderer.root.off(\".\" + EVENT_NS);\n  },\n  _getTooltip: function _getTooltip() {\n    var that = this;\n\n    if (!that._tooltip) {\n      _initTooltip.apply(this, arguments);\n\n      that._setTooltipRendererOptions(that._tooltipRendererOptions);\n\n      that._tooltipRendererOptions = null;\n\n      that._setTooltipOptions();\n    }\n\n    return that._tooltip;\n  }\n});\nexport default BaseSparkline;\nimport { plugin as tooltipPlugin } from \"../core/tooltip\";\nBaseSparkline.addPlugin(tooltipPlugin);\n_initTooltip = BaseSparkline.prototype._initTooltip;\nBaseSparkline.prototype._initTooltip = _noop;\nvar _disposeTooltip = BaseSparkline.prototype._disposeTooltip;\n\nBaseSparkline.prototype._disposeTooltip = function () {\n  if (this._tooltip) {\n    _disposeTooltip.apply(this, arguments);\n  }\n};\n\nBaseSparkline.prototype._setTooltipRendererOptions = function () {\n  var options = this._getRendererOptions();\n\n  if (this._tooltip) {\n    this._tooltip.setRendererOptions(options);\n  } else {\n    this._tooltipRendererOptions = options;\n  }\n};\n\nBaseSparkline.prototype._setTooltipOptions = function () {\n  var tooltip = this._tooltip;\n\n  var options = tooltip && this._getOption(\"tooltip\");\n\n  tooltip && tooltip.update(_extend({}, options, {\n    customizeTooltip: generateCustomizeTooltipCallback(options.customizeTooltip, options.font, this.option(\"rtlEnabled\")),\n    enabled: options.enabled && this._isTooltipEnabled()\n  }));\n};\n\nimport { plugin } from \"../core/export\";\nvar exportPlugin = extend(true, {}, plugin, {\n  init: _noop,\n  dispose: _noop,\n  customize: null,\n  members: {\n    _getExportMenuOptions: null\n  }\n});\nBaseSparkline.addPlugin(exportPlugin);","map":{"version":3,"sources":["C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/devextreme/esm/viz/sparklines/base_sparkline.js"],"names":["eventsEngine","domAdapter","isFunction","BaseWidget","extend","addNamespace","pointerEvents","pointInCanvas","DEFAULT_LINE_SPACING","EVENT_NS","POINTER_ACTION","down","move","Translator2D","_extend","_floor","Math","floor","noop","_noop","inCanvas","_ref","x","y","width","height","left","top","right","bottom","pointerHandler","_ref2","data","that","widget","_enableOutHandler","_showTooltip","generateDefaultCustomizeTooltipCallback","fontOptions","rtlEnabled","lineSpacing","lineHeight","size","customizeObject","html","vt","valueText","i","length","generateCustomizeTooltipCallback","customizeTooltip","defaultCustomizeTooltip","res","call","createAxis","isHorizontal","translator","shiftZeroValue","getTranslator","update","range","canvas","options","getVisibleArea","visibleArea","getCanvasVisibleArea","min","max","visualRange","calculateInterval","getMarginOptions","_initTooltip","BaseSparkline","inherit","_getLayoutItems","_useLinks","_themeDependentChanges","_initCore","_tooltipTracker","_renderer","root","attr","_createHtmlElements","_initTooltipEvents","_argumentAxis","_valueAxis","_getDefaultSize","_defaultSize","_disposeCore","_disposeWidgetElements","_disposeTooltipEvents","_ranges","_optionChangesOrder","_change_OPTIONS","_prepareOptions","_change","_customChangesOrder","_change_UPDATE","_update","_tooltipShown","_tooltip","hide","_cleanWidgetElements","_updateWidgetElements","_drawWidgetElements","_getCorrectCanvas","_updateRange","arg","_getStick","val","_applySize","rect","_allOptions","_setupResizeHandler","_themeManager","theme","option","_getTooltipCoords","_canvas","rootOffset","getRootOffset","off","on","tooltip","_getTooltip","isEnabled","show","_getTooltipData","_hideTooltip","_stopCurrentHandling","_outHandler","handler","_ref3","pageX","pageY","_disableOutHandler","getDocument","apply","arguments","_setTooltipRendererOptions","_tooltipRendererOptions","_setTooltipOptions","plugin","tooltipPlugin","addPlugin","prototype","_disposeTooltip","_getRendererOptions","setRendererOptions","_getOption","font","enabled","_isTooltipEnabled","exportPlugin","init","dispose","customize","members","_getExportMenuOptions"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/viz/sparklines/base_sparkline.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nimport domAdapter from \"../../core/dom_adapter\";\r\nimport {\r\n    isFunction\r\n} from \"../../core/utils/type\";\r\nimport BaseWidget from \"../core/base_widget\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    addNamespace\r\n} from \"../../events/utils/index\";\r\nimport pointerEvents from \"../../events/pointer\";\r\nimport {\r\n    pointInCanvas\r\n} from \"../core/utils\";\r\nvar DEFAULT_LINE_SPACING = 2;\r\nvar EVENT_NS = \"sparkline-tooltip\";\r\nvar POINTER_ACTION = addNamespace([pointerEvents.down, pointerEvents.move], EVENT_NS);\r\nimport {\r\n    Translator2D\r\n} from \"../translators/translator2d\";\r\nvar _extend = extend;\r\nvar _floor = Math.floor;\r\nimport {\r\n    noop as _noop\r\n} from \"../../core/utils/common\";\r\n\r\nfunction inCanvas(_ref, x, y) {\r\n    var {\r\n        width: width,\r\n        height: height\r\n    } = _ref;\r\n    return pointInCanvas({\r\n        left: 0,\r\n        top: 0,\r\n        right: width,\r\n        bottom: height,\r\n        width: width,\r\n        height: height\r\n    }, x, y)\r\n}\r\n\r\nfunction pointerHandler(_ref2) {\r\n    var {\r\n        data: data\r\n    } = _ref2;\r\n    var that = data.widget;\r\n    that._enableOutHandler();\r\n    that._showTooltip()\r\n}\r\n\r\nfunction generateDefaultCustomizeTooltipCallback(fontOptions, rtlEnabled) {\r\n    var lineSpacing = fontOptions.lineSpacing;\r\n    var lineHeight = (void 0 !== lineSpacing && null !== lineSpacing ? lineSpacing : DEFAULT_LINE_SPACING) + fontOptions.size;\r\n    return function(customizeObject) {\r\n        var html = \"\";\r\n        var vt = customizeObject.valueText;\r\n        for (var i = 0; i < vt.length; i += 2) {\r\n            html += \"<tr><td>\" + vt[i] + \"</td><td style='width: 15px'></td><td style='text-align: \" + (rtlEnabled ? \"left\" : \"right\") + \"'>\" + vt[i + 1] + \"</td></tr>\"\r\n        }\r\n        return {\r\n            html: \"<table style='border-spacing:0px; line-height: \" + lineHeight + \"px'>\" + html + \"</table>\"\r\n        }\r\n    }\r\n}\r\n\r\nfunction generateCustomizeTooltipCallback(customizeTooltip, fontOptions, rtlEnabled) {\r\n    var defaultCustomizeTooltip = generateDefaultCustomizeTooltipCallback(fontOptions, rtlEnabled);\r\n    if (isFunction(customizeTooltip)) {\r\n        return function(customizeObject) {\r\n            var res = customizeTooltip.call(customizeObject, customizeObject);\r\n            if (!(\"html\" in res) && !(\"text\" in res)) {\r\n                _extend(res, defaultCustomizeTooltip.call(customizeObject, customizeObject))\r\n            }\r\n            return res\r\n        }\r\n    } else {\r\n        return defaultCustomizeTooltip\r\n    }\r\n}\r\n\r\nfunction createAxis(isHorizontal) {\r\n    var translator = new Translator2D({}, {}, {\r\n        shiftZeroValue: !isHorizontal,\r\n        isHorizontal: !!isHorizontal\r\n    });\r\n    return {\r\n        getTranslator: function() {\r\n            return translator\r\n        },\r\n        update: function(range, canvas, options) {\r\n            translator.update(range, canvas, options)\r\n        },\r\n        getVisibleArea() {\r\n            var visibleArea = translator.getCanvasVisibleArea();\r\n            return [visibleArea.min, visibleArea.max]\r\n        },\r\n        visualRange: _noop,\r\n        calculateInterval: _noop,\r\n        getMarginOptions: () => ({})\r\n    }\r\n}\r\nvar _initTooltip;\r\nvar BaseSparkline = BaseWidget.inherit({\r\n    _getLayoutItems: _noop,\r\n    _useLinks: false,\r\n    _themeDependentChanges: [\"OPTIONS\"],\r\n    _initCore: function() {\r\n        this._tooltipTracker = this._renderer.root;\r\n        this._tooltipTracker.attr({\r\n            \"pointer-events\": \"visible\"\r\n        });\r\n        this._createHtmlElements();\r\n        this._initTooltipEvents();\r\n        this._argumentAxis = createAxis(true);\r\n        this._valueAxis = createAxis()\r\n    },\r\n    _getDefaultSize: function() {\r\n        return this._defaultSize\r\n    },\r\n    _disposeCore: function() {\r\n        this._disposeWidgetElements();\r\n        this._disposeTooltipEvents();\r\n        this._ranges = null\r\n    },\r\n    _optionChangesOrder: [\"OPTIONS\"],\r\n    _change_OPTIONS: function() {\r\n        this._prepareOptions();\r\n        this._change([\"UPDATE\"])\r\n    },\r\n    _customChangesOrder: [\"UPDATE\"],\r\n    _change_UPDATE: function() {\r\n        this._update()\r\n    },\r\n    _update: function() {\r\n        if (this._tooltipShown) {\r\n            this._tooltipShown = false;\r\n            this._tooltip.hide()\r\n        }\r\n        this._cleanWidgetElements();\r\n        this._updateWidgetElements();\r\n        this._drawWidgetElements()\r\n    },\r\n    _updateWidgetElements: function() {\r\n        var canvas = this._getCorrectCanvas();\r\n        this._updateRange();\r\n        this._argumentAxis.update(this._ranges.arg, canvas, this._getStick());\r\n        this._valueAxis.update(this._ranges.val, canvas)\r\n    },\r\n    _getStick: function() {},\r\n    _applySize: function(rect) {\r\n        this._allOptions.size = {\r\n            width: rect[2] - rect[0],\r\n            height: rect[3] - rect[1]\r\n        };\r\n        this._change([\"UPDATE\"])\r\n    },\r\n    _setupResizeHandler: _noop,\r\n    _prepareOptions: function() {\r\n        return _extend(true, {}, this._themeManager.theme(), this.option())\r\n    },\r\n    _getTooltipCoords: function() {\r\n        var canvas = this._canvas;\r\n        var rootOffset = this._renderer.getRootOffset();\r\n        return {\r\n            x: canvas.width / 2 + rootOffset.left,\r\n            y: canvas.height / 2 + rootOffset.top\r\n        }\r\n    },\r\n    _initTooltipEvents() {\r\n        var data = {\r\n            widget: this\r\n        };\r\n        this._renderer.root.off(\".\" + EVENT_NS).on(POINTER_ACTION, data, pointerHandler)\r\n    },\r\n    _showTooltip() {\r\n        var tooltip;\r\n        if (!this._tooltipShown) {\r\n            this._tooltipShown = true;\r\n            tooltip = this._getTooltip();\r\n            tooltip.isEnabled() && this._tooltip.show(this._getTooltipData(), this._getTooltipCoords(), {})\r\n        }\r\n    },\r\n    _hideTooltip() {\r\n        if (this._tooltipShown) {\r\n            this._tooltipShown = false;\r\n            this._tooltip.hide()\r\n        }\r\n    },\r\n    _stopCurrentHandling() {\r\n        this._hideTooltip()\r\n    },\r\n    _enableOutHandler() {\r\n        var that = this;\r\n        if (that._outHandler) {\r\n            return\r\n        }\r\n        var handler = _ref3 => {\r\n            var {\r\n                pageX: pageX,\r\n                pageY: pageY\r\n            } = _ref3;\r\n            var {\r\n                left: left,\r\n                top: top\r\n            } = that._renderer.getRootOffset();\r\n            var x = _floor(pageX - left);\r\n            var y = _floor(pageY - top);\r\n            if (!inCanvas(that._canvas, x, y)) {\r\n                that._hideTooltip();\r\n                that._disableOutHandler()\r\n            }\r\n        };\r\n        eventsEngine.on(domAdapter.getDocument(), POINTER_ACTION, handler);\r\n        this._outHandler = handler\r\n    },\r\n    _disableOutHandler() {\r\n        this._outHandler && eventsEngine.off(domAdapter.getDocument(), POINTER_ACTION, this._outHandler);\r\n        this._outHandler = null\r\n    },\r\n    _disposeTooltipEvents: function() {\r\n        this._tooltipTracker.off();\r\n        this._disableOutHandler();\r\n        this._renderer.root.off(\".\" + EVENT_NS)\r\n    },\r\n    _getTooltip: function() {\r\n        var that = this;\r\n        if (!that._tooltip) {\r\n            _initTooltip.apply(this, arguments);\r\n            that._setTooltipRendererOptions(that._tooltipRendererOptions);\r\n            that._tooltipRendererOptions = null;\r\n            that._setTooltipOptions()\r\n        }\r\n        return that._tooltip\r\n    }\r\n});\r\nexport default BaseSparkline;\r\nimport {\r\n    plugin as tooltipPlugin\r\n} from \"../core/tooltip\";\r\nBaseSparkline.addPlugin(tooltipPlugin);\r\n_initTooltip = BaseSparkline.prototype._initTooltip;\r\nBaseSparkline.prototype._initTooltip = _noop;\r\nvar _disposeTooltip = BaseSparkline.prototype._disposeTooltip;\r\nBaseSparkline.prototype._disposeTooltip = function() {\r\n    if (this._tooltip) {\r\n        _disposeTooltip.apply(this, arguments)\r\n    }\r\n};\r\nBaseSparkline.prototype._setTooltipRendererOptions = function() {\r\n    var options = this._getRendererOptions();\r\n    if (this._tooltip) {\r\n        this._tooltip.setRendererOptions(options)\r\n    } else {\r\n        this._tooltipRendererOptions = options\r\n    }\r\n};\r\nBaseSparkline.prototype._setTooltipOptions = function() {\r\n    var tooltip = this._tooltip;\r\n    var options = tooltip && this._getOption(\"tooltip\");\r\n    tooltip && tooltip.update(_extend({}, options, {\r\n        customizeTooltip: generateCustomizeTooltipCallback(options.customizeTooltip, options.font, this.option(\"rtlEnabled\")),\r\n        enabled: options.enabled && this._isTooltipEnabled()\r\n    }))\r\n};\r\nimport {\r\n    plugin\r\n} from \"../core/export\";\r\nvar exportPlugin = extend(true, {}, plugin, {\r\n    init: _noop,\r\n    dispose: _noop,\r\n    customize: null,\r\n    members: {\r\n        _getExportMenuOptions: null\r\n    }\r\n});\r\nBaseSparkline.addPlugin(exportPlugin);\r\n"]},"metadata":{},"sourceType":"module"}