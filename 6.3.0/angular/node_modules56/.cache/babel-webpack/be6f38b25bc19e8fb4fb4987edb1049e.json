{"ast":null,"code":"/**\r\n * DevExtreme (esm/viz/gauges/base_gauge.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nvar _Number = Number;\nimport { getAppropriateFormat as _getAppropriateFormat } from \"../core/utils\";\nimport { extend } from \"../../core/utils/extend\";\nimport { Translator1D } from \"../translators/translator1d\";\nvar _extend = extend;\nimport BaseWidget from \"../core/base_widget\";\nimport themeManagerModule from \"./theme_manager\";\nimport Tracker from \"./tracker\";\nimport formatHelper from \"../../format_helper\";\nimport { plugin as exportPlugin } from \"../core/export\";\nimport { plugin as titlePlugin } from \"../core/title\";\nimport { plugin as tooltipPlugin } from \"../core/tooltip\";\nimport { plugin as loadingIndicatorPlugin } from \"../core/loading_indicator\";\nvar _format = formatHelper.format;\nexport var BaseGauge = BaseWidget.inherit({\n  _rootClassPrefix: \"dxg\",\n  _themeSection: \"gauge\",\n  _createThemeManager: function _createThemeManager() {\n    return new themeManagerModule.ThemeManager(this._getThemeManagerOptions());\n  },\n  _initCore: function _initCore() {\n    var root = this._renderer.root;\n    this._valueChangingLocker = 0;\n    this._translator = this._factory.createTranslator();\n    this._tracker = this._factory.createTracker({\n      renderer: this._renderer,\n      container: root\n    });\n\n    this._setTrackerCallbacks();\n  },\n  _beginValueChanging: function _beginValueChanging() {\n    this._resetIsReady();\n\n    this._onBeginUpdate();\n\n    ++this._valueChangingLocker;\n  },\n  _endValueChanging: function _endValueChanging() {\n    if (0 === --this._valueChangingLocker) {\n      this._drawn();\n    }\n  },\n  _setTrackerCallbacks: function _setTrackerCallbacks() {\n    var renderer = this._renderer;\n    var tooltip = this._tooltip;\n\n    this._tracker.setCallbacks({\n      \"tooltip-show\": function tooltipShow(target, info, callback) {\n        var tooltipParameters = target.getTooltipParameters();\n        var offset = renderer.getRootOffset();\n\n        var formatObject = _extend({\n          value: tooltipParameters.value,\n          valueText: tooltip.formatValue(tooltipParameters.value),\n          color: tooltipParameters.color\n        }, info);\n\n        return tooltip.show(formatObject, {\n          x: tooltipParameters.x + offset.left,\n          y: tooltipParameters.y + offset.top,\n          offset: tooltipParameters.offset\n        }, {\n          target: info\n        }, void 0, callback);\n      },\n      \"tooltip-hide\": function tooltipHide() {\n        return tooltip.hide();\n      }\n    });\n  },\n  _dispose: function _dispose() {\n    this._cleanCore();\n\n    this.callBase.apply(this, arguments);\n  },\n  _disposeCore: function _disposeCore() {\n    this._themeManager.dispose();\n\n    this._tracker.dispose();\n\n    this._translator = this._tracker = null;\n  },\n  _cleanCore: function _cleanCore() {\n    this._tracker.deactivate();\n\n    this._cleanContent();\n  },\n  _renderCore: function _renderCore() {\n    if (!this._isValidDomain) {\n      return;\n    }\n\n    this._renderContent();\n\n    this._tracker.setTooltipState(this._tooltip.isEnabled());\n\n    this._tracker.activate();\n\n    this._noAnimation = false;\n  },\n  _applyChanges: function _applyChanges() {\n    this.callBase.apply(this, arguments);\n    this._resizing = this._noAnimation = false;\n  },\n  _setContentSize: function _setContentSize() {\n    var that = this;\n    that._resizing = that._noAnimation = 2 === that._changes.count();\n    that.callBase.apply(that, arguments);\n  },\n  _applySize: function _applySize(rect) {\n    this._innerRect = {\n      left: rect[0],\n      top: rect[1],\n      right: rect[2],\n      bottom: rect[3]\n    };\n    var layoutCache = this._layout._cache;\n\n    this._cleanCore();\n\n    this._renderCore();\n\n    this._layout._cache = this._layout._cache || layoutCache;\n    return [rect[0], this._innerRect.top, rect[2], this._innerRect.bottom];\n  },\n  _initialChanges: [\"DOMAIN\"],\n  _themeDependentChanges: [\"DOMAIN\"],\n  _optionChangesMap: {\n    subtitle: \"MOSTLY_TOTAL\",\n    indicator: \"MOSTLY_TOTAL\",\n    geometry: \"MOSTLY_TOTAL\",\n    animation: \"MOSTLY_TOTAL\",\n    startValue: \"DOMAIN\",\n    endValue: \"DOMAIN\"\n  },\n  _optionChangesOrder: [\"DOMAIN\", \"MOSTLY_TOTAL\"],\n  _change_DOMAIN: function _change_DOMAIN() {\n    this._setupDomain();\n  },\n  _change_MOSTLY_TOTAL: function _change_MOSTLY_TOTAL() {\n    this._applyMostlyTotalChange();\n  },\n  _setupDomain: function _setupDomain() {\n    this._setupDomainCore();\n\n    this._isValidDomain = isFinite(1 / (this._translator.getDomain()[1] - this._translator.getDomain()[0]));\n\n    if (!this._isValidDomain) {\n      this._incidentOccurred(\"W2301\");\n    }\n\n    this._change([\"MOSTLY_TOTAL\"]);\n  },\n  _applyMostlyTotalChange: function _applyMostlyTotalChange() {\n    this._setupCodomain();\n\n    this._setupAnimationSettings();\n\n    this._setupDefaultFormat();\n\n    this._change([\"LAYOUT\"]);\n  },\n  _setupAnimationSettings: function _setupAnimationSettings() {\n    var option = this.option(\"animation\");\n    this._animationSettings = null;\n\n    if (void 0 === option || option) {\n      option = _extend({\n        enabled: true,\n        duration: 1e3,\n        easing: \"easeOutCubic\"\n      }, option);\n\n      if (option.enabled && option.duration > 0) {\n        this._animationSettings = {\n          duration: _Number(option.duration),\n          easing: option.easing\n        };\n      }\n    }\n\n    this._containerBackgroundColor = this.option(\"containerBackgroundColor\") || this._themeManager.theme().containerBackgroundColor;\n  },\n  _setupDefaultFormat: function _setupDefaultFormat() {\n    var domain = this._translator.getDomain();\n\n    this._defaultFormatOptions = _getAppropriateFormat(domain[0], domain[1], this._getApproximateScreenRange());\n  },\n  _setupDomainCore: null,\n  _calculateSize: null,\n  _cleanContent: null,\n  _renderContent: null,\n  _setupCodomain: null,\n  _getApproximateScreenRange: null,\n  _factory: {\n    createTranslator: function createTranslator() {\n      return new Translator1D();\n    },\n    createTracker: function createTracker(parameters) {\n      return new Tracker(parameters);\n    }\n  }\n});\nexport var formatValue = function formatValue(value, options, extra) {\n  options = options || {};\n\n  var text = _format(value, options.format);\n\n  var formatObject;\n\n  if (\"function\" === typeof options.customizeText) {\n    formatObject = _extend({\n      value: value,\n      valueText: text\n    }, extra);\n    return String(options.customizeText.call(formatObject, formatObject));\n  }\n\n  return text;\n};\nexport var getSampleText = function getSampleText(translator, options) {\n  var text1 = formatValue(translator.getDomainStart(), options);\n  var text2 = formatValue(translator.getDomainEnd(), options);\n  return text1.length >= text2.length ? text1 : text2;\n};\nexport function compareArrays(array1, array2) {\n  return array1 && array2 && array1.length === array2.length && compareArraysElements(array1, array2);\n}\n\nfunction compareArraysElements(array1, array2) {\n  var i;\n  var ii = array1.length;\n  var array1ValueIsNaN;\n  var array2ValueIsNaN;\n\n  for (i = 0; i < ii; ++i) {\n    array1ValueIsNaN = array1[i] !== array1[i];\n    array2ValueIsNaN = array2[i] !== array2[i];\n\n    if (array1ValueIsNaN && array2ValueIsNaN) {\n      continue;\n    }\n\n    if (array1[i] !== array2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nBaseGauge.addPlugin(exportPlugin);\nBaseGauge.addPlugin(titlePlugin);\nBaseGauge.addPlugin(tooltipPlugin);\nBaseGauge.addPlugin(loadingIndicatorPlugin);\nvar _setTooltipOptions = BaseGauge.prototype._setTooltipOptions;\n\nBaseGauge.prototype._setTooltipOptions = function () {\n  _setTooltipOptions.apply(this, arguments);\n\n  this._tracker && this._tracker.setTooltipState(this._tooltip.isEnabled());\n};","map":{"version":3,"sources":["C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/devextreme/esm/viz/gauges/base_gauge.js"],"names":["_Number","Number","getAppropriateFormat","_getAppropriateFormat","extend","Translator1D","_extend","BaseWidget","themeManagerModule","Tracker","formatHelper","plugin","exportPlugin","titlePlugin","tooltipPlugin","loadingIndicatorPlugin","_format","format","BaseGauge","inherit","_rootClassPrefix","_themeSection","_createThemeManager","ThemeManager","_getThemeManagerOptions","_initCore","root","_renderer","_valueChangingLocker","_translator","_factory","createTranslator","_tracker","createTracker","renderer","container","_setTrackerCallbacks","_beginValueChanging","_resetIsReady","_onBeginUpdate","_endValueChanging","_drawn","tooltip","_tooltip","setCallbacks","target","info","callback","tooltipParameters","getTooltipParameters","offset","getRootOffset","formatObject","value","valueText","formatValue","color","show","x","left","y","top","hide","_dispose","_cleanCore","callBase","apply","arguments","_disposeCore","_themeManager","dispose","deactivate","_cleanContent","_renderCore","_isValidDomain","_renderContent","setTooltipState","isEnabled","activate","_noAnimation","_applyChanges","_resizing","_setContentSize","that","_changes","count","_applySize","rect","_innerRect","right","bottom","layoutCache","_layout","_cache","_initialChanges","_themeDependentChanges","_optionChangesMap","subtitle","indicator","geometry","animation","startValue","endValue","_optionChangesOrder","_change_DOMAIN","_setupDomain","_change_MOSTLY_TOTAL","_applyMostlyTotalChange","_setupDomainCore","isFinite","getDomain","_incidentOccurred","_change","_setupCodomain","_setupAnimationSettings","_setupDefaultFormat","option","_animationSettings","enabled","duration","easing","_containerBackgroundColor","theme","containerBackgroundColor","domain","_defaultFormatOptions","_getApproximateScreenRange","_calculateSize","parameters","options","extra","text","customizeText","String","call","getSampleText","translator","text1","getDomainStart","text2","getDomainEnd","length","compareArrays","array1","array2","compareArraysElements","i","ii","array1ValueIsNaN","array2ValueIsNaN","addPlugin","_setTooltipOptions","prototype"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIA,OAAO,GAAGC,MAAd;AACA,SACIC,oBAAoB,IAAIC,qBAD5B,QAEO,eAFP;AAGA,SACIC,MADJ,QAEO,yBAFP;AAGA,SACIC,YADJ,QAEO,6BAFP;AAGA,IAAIC,OAAO,GAAGF,MAAd;AACA,OAAOG,UAAP,MAAuB,qBAAvB;AACA,OAAOC,kBAAP,MAA+B,iBAA/B;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,YAAP,MAAyB,qBAAzB;AACA,SACIC,MAAM,IAAIC,YADd,QAEO,gBAFP;AAGA,SACID,MAAM,IAAIE,WADd,QAEO,eAFP;AAGA,SACIF,MAAM,IAAIG,aADd,QAEO,iBAFP;AAGA,SACIH,MAAM,IAAII,sBADd,QAEO,2BAFP;AAGA,IAAIC,OAAO,GAAGN,YAAY,CAACO,MAA3B;AACA,OAAO,IAAIC,SAAS,GAAGX,UAAU,CAACY,OAAX,CAAmB;AACtCC,EAAAA,gBAAgB,EAAE,KADoB;AAEtCC,EAAAA,aAAa,EAAE,OAFuB;AAGtCC,EAAAA,mBAAmB,EAAE,+BAAW;AAC5B,WAAO,IAAId,kBAAkB,CAACe,YAAvB,CAAoC,KAAKC,uBAAL,EAApC,CAAP;AACH,GALqC;AAMtCC,EAAAA,SAAS,EAAE,qBAAW;AAClB,QAAIC,IAAI,GAAG,KAAKC,SAAL,CAAeD,IAA1B;AACA,SAAKE,oBAAL,GAA4B,CAA5B;AACA,SAAKC,WAAL,GAAmB,KAAKC,QAAL,CAAcC,gBAAd,EAAnB;AACA,SAAKC,QAAL,GAAgB,KAAKF,QAAL,CAAcG,aAAd,CAA4B;AACxCC,MAAAA,QAAQ,EAAE,KAAKP,SADyB;AAExCQ,MAAAA,SAAS,EAAET;AAF6B,KAA5B,CAAhB;;AAIA,SAAKU,oBAAL;AACH,GAfqC;AAgBtCC,EAAAA,mBAAmB,EAAE,+BAAW;AAC5B,SAAKC,aAAL;;AACA,SAAKC,cAAL;;AACA,MAAE,KAAKX,oBAAP;AACH,GApBqC;AAqBtCY,EAAAA,iBAAiB,EAAE,6BAAW;AAC1B,QAAI,MAAM,EAAE,KAAKZ,oBAAjB,EAAuC;AACnC,WAAKa,MAAL;AACH;AACJ,GAzBqC;AA0BtCL,EAAAA,oBAAoB,EAAE,gCAAW;AAC7B,QAAIF,QAAQ,GAAG,KAAKP,SAApB;AACA,QAAIe,OAAO,GAAG,KAAKC,QAAnB;;AACA,SAAKX,QAAL,CAAcY,YAAd,CAA2B;AACvB,sBAAgB,qBAASC,MAAT,EAAiBC,IAAjB,EAAuBC,QAAvB,EAAiC;AAC7C,YAAIC,iBAAiB,GAAGH,MAAM,CAACI,oBAAP,EAAxB;AACA,YAAIC,MAAM,GAAGhB,QAAQ,CAACiB,aAAT,EAAb;;AACA,YAAIC,YAAY,GAAG9C,OAAO,CAAC;AACvB+C,UAAAA,KAAK,EAAEL,iBAAiB,CAACK,KADF;AAEvBC,UAAAA,SAAS,EAAEZ,OAAO,CAACa,WAAR,CAAoBP,iBAAiB,CAACK,KAAtC,CAFY;AAGvBG,UAAAA,KAAK,EAAER,iBAAiB,CAACQ;AAHF,SAAD,EAIvBV,IAJuB,CAA1B;;AAKA,eAAOJ,OAAO,CAACe,IAAR,CAAaL,YAAb,EAA2B;AAC9BM,UAAAA,CAAC,EAAEV,iBAAiB,CAACU,CAAlB,GAAsBR,MAAM,CAACS,IADF;AAE9BC,UAAAA,CAAC,EAAEZ,iBAAiB,CAACY,CAAlB,GAAsBV,MAAM,CAACW,GAFF;AAG9BX,UAAAA,MAAM,EAAEF,iBAAiB,CAACE;AAHI,SAA3B,EAIJ;AACCL,UAAAA,MAAM,EAAEC;AADT,SAJI,EAMJ,KAAK,CAND,EAMIC,QANJ,CAAP;AAOH,OAhBsB;AAiBvB,sBAAgB,uBAAW;AACvB,eAAOL,OAAO,CAACoB,IAAR,EAAP;AACH;AAnBsB,KAA3B;AAqBH,GAlDqC;AAmDtCC,EAAAA,QAAQ,EAAE,oBAAW;AACjB,SAAKC,UAAL;;AACA,SAAKC,QAAL,CAAcC,KAAd,CAAoB,IAApB,EAA0BC,SAA1B;AACH,GAtDqC;AAuDtCC,EAAAA,YAAY,EAAE,wBAAW;AACrB,SAAKC,aAAL,CAAmBC,OAAnB;;AACA,SAAKtC,QAAL,CAAcsC,OAAd;;AACA,SAAKzC,WAAL,GAAmB,KAAKG,QAAL,GAAgB,IAAnC;AACH,GA3DqC;AA4DtCgC,EAAAA,UAAU,EAAE,sBAAW;AACnB,SAAKhC,QAAL,CAAcuC,UAAd;;AACA,SAAKC,aAAL;AACH,GA/DqC;AAgEtCC,EAAAA,WAAW,EAAE,uBAAW;AACpB,QAAI,CAAC,KAAKC,cAAV,EAA0B;AACtB;AACH;;AACD,SAAKC,cAAL;;AACA,SAAK3C,QAAL,CAAc4C,eAAd,CAA8B,KAAKjC,QAAL,CAAckC,SAAd,EAA9B;;AACA,SAAK7C,QAAL,CAAc8C,QAAd;;AACA,SAAKC,YAAL,GAAoB,KAApB;AACH,GAxEqC;AAyEtCC,EAAAA,aAAa,EAAE,yBAAW;AACtB,SAAKf,QAAL,CAAcC,KAAd,CAAoB,IAApB,EAA0BC,SAA1B;AACA,SAAKc,SAAL,GAAiB,KAAKF,YAAL,GAAoB,KAArC;AACH,GA5EqC;AA6EtCG,EAAAA,eAAe,EAAE,2BAAW;AACxB,QAAIC,IAAI,GAAG,IAAX;AACAA,IAAAA,IAAI,CAACF,SAAL,GAAiBE,IAAI,CAACJ,YAAL,GAAoB,MAAMI,IAAI,CAACC,QAAL,CAAcC,KAAd,EAA3C;AACAF,IAAAA,IAAI,CAAClB,QAAL,CAAcC,KAAd,CAAoBiB,IAApB,EAA0BhB,SAA1B;AACH,GAjFqC;AAkFtCmB,EAAAA,UAAU,EAAE,oBAASC,IAAT,EAAe;AACvB,SAAKC,UAAL,GAAkB;AACd7B,MAAAA,IAAI,EAAE4B,IAAI,CAAC,CAAD,CADI;AAEd1B,MAAAA,GAAG,EAAE0B,IAAI,CAAC,CAAD,CAFK;AAGdE,MAAAA,KAAK,EAAEF,IAAI,CAAC,CAAD,CAHG;AAIdG,MAAAA,MAAM,EAAEH,IAAI,CAAC,CAAD;AAJE,KAAlB;AAMA,QAAII,WAAW,GAAG,KAAKC,OAAL,CAAaC,MAA/B;;AACA,SAAK7B,UAAL;;AACA,SAAKS,WAAL;;AACA,SAAKmB,OAAL,CAAaC,MAAb,GAAsB,KAAKD,OAAL,CAAaC,MAAb,IAAuBF,WAA7C;AACA,WAAO,CAACJ,IAAI,CAAC,CAAD,CAAL,EAAU,KAAKC,UAAL,CAAgB3B,GAA1B,EAA+B0B,IAAI,CAAC,CAAD,CAAnC,EAAwC,KAAKC,UAAL,CAAgBE,MAAxD,CAAP;AACH,GA9FqC;AA+FtCI,EAAAA,eAAe,EAAE,CAAC,QAAD,CA/FqB;AAgGtCC,EAAAA,sBAAsB,EAAE,CAAC,QAAD,CAhGc;AAiGtCC,EAAAA,iBAAiB,EAAE;AACfC,IAAAA,QAAQ,EAAE,cADK;AAEfC,IAAAA,SAAS,EAAE,cAFI;AAGfC,IAAAA,QAAQ,EAAE,cAHK;AAIfC,IAAAA,SAAS,EAAE,cAJI;AAKfC,IAAAA,UAAU,EAAE,QALG;AAMfC,IAAAA,QAAQ,EAAE;AANK,GAjGmB;AAyGtCC,EAAAA,mBAAmB,EAAE,CAAC,QAAD,EAAW,cAAX,CAzGiB;AA0GtCC,EAAAA,cAAc,EAAE,0BAAW;AACvB,SAAKC,YAAL;AACH,GA5GqC;AA6GtCC,EAAAA,oBAAoB,EAAE,gCAAW;AAC7B,SAAKC,uBAAL;AACH,GA/GqC;AAgHtCF,EAAAA,YAAY,EAAE,wBAAW;AACrB,SAAKG,gBAAL;;AACA,SAAKlC,cAAL,GAAsBmC,QAAQ,CAAC,KAAK,KAAKhF,WAAL,CAAiBiF,SAAjB,GAA6B,CAA7B,IAAkC,KAAKjF,WAAL,CAAiBiF,SAAjB,GAA6B,CAA7B,CAAvC,CAAD,CAA9B;;AACA,QAAI,CAAC,KAAKpC,cAAV,EAA0B;AACtB,WAAKqC,iBAAL,CAAuB,OAAvB;AACH;;AACD,SAAKC,OAAL,CAAa,CAAC,cAAD,CAAb;AACH,GAvHqC;AAwHtCL,EAAAA,uBAAuB,EAAE,mCAAW;AAChC,SAAKM,cAAL;;AACA,SAAKC,uBAAL;;AACA,SAAKC,mBAAL;;AACA,SAAKH,OAAL,CAAa,CAAC,QAAD,CAAb;AACH,GA7HqC;AA8HtCE,EAAAA,uBAAuB,EAAE,mCAAW;AAChC,QAAIE,MAAM,GAAG,KAAKA,MAAL,CAAY,WAAZ,CAAb;AACA,SAAKC,kBAAL,GAA0B,IAA1B;;AACA,QAAI,KAAK,CAAL,KAAWD,MAAX,IAAqBA,MAAzB,EAAiC;AAC7BA,MAAAA,MAAM,GAAG9G,OAAO,CAAC;AACbgH,QAAAA,OAAO,EAAE,IADI;AAEbC,QAAAA,QAAQ,EAAE,GAFG;AAGbC,QAAAA,MAAM,EAAE;AAHK,OAAD,EAIbJ,MAJa,CAAhB;;AAKA,UAAIA,MAAM,CAACE,OAAP,IAAkBF,MAAM,CAACG,QAAP,GAAkB,CAAxC,EAA2C;AACvC,aAAKF,kBAAL,GAA0B;AACtBE,UAAAA,QAAQ,EAAEvH,OAAO,CAACoH,MAAM,CAACG,QAAR,CADK;AAEtBC,UAAAA,MAAM,EAAEJ,MAAM,CAACI;AAFO,SAA1B;AAIH;AACJ;;AACD,SAAKC,yBAAL,GAAiC,KAAKL,MAAL,CAAY,0BAAZ,KAA2C,KAAK/C,aAAL,CAAmBqD,KAAnB,GAA2BC,wBAAvG;AACH,GA/IqC;AAgJtCR,EAAAA,mBAAmB,EAAE,+BAAW;AAC5B,QAAIS,MAAM,GAAG,KAAK/F,WAAL,CAAiBiF,SAAjB,EAAb;;AACA,SAAKe,qBAAL,GAA6B1H,qBAAqB,CAACyH,MAAM,CAAC,CAAD,CAAP,EAAYA,MAAM,CAAC,CAAD,CAAlB,EAAuB,KAAKE,0BAAL,EAAvB,CAAlD;AACH,GAnJqC;AAoJtClB,EAAAA,gBAAgB,EAAE,IApJoB;AAqJtCmB,EAAAA,cAAc,EAAE,IArJsB;AAsJtCvD,EAAAA,aAAa,EAAE,IAtJuB;AAuJtCG,EAAAA,cAAc,EAAE,IAvJsB;AAwJtCsC,EAAAA,cAAc,EAAE,IAxJsB;AAyJtCa,EAAAA,0BAA0B,EAAE,IAzJU;AA0JtChG,EAAAA,QAAQ,EAAE;AACNC,IAAAA,gBAAgB,EAAE,4BAAW;AACzB,aAAO,IAAI1B,YAAJ,EAAP;AACH,KAHK;AAIN4B,IAAAA,aAAa,EAAE,uBAAS+F,UAAT,EAAqB;AAChC,aAAO,IAAIvH,OAAJ,CAAYuH,UAAZ,CAAP;AACH;AANK;AA1J4B,CAAnB,CAAhB;AAmKP,OAAO,IAAIzE,WAAW,GAAG,SAAdA,WAAc,CAASF,KAAT,EAAgB4E,OAAhB,EAAyBC,KAAzB,EAAgC;AACrDD,EAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;;AACA,MAAIE,IAAI,GAAGnH,OAAO,CAACqC,KAAD,EAAQ4E,OAAO,CAAChH,MAAhB,CAAlB;;AACA,MAAImC,YAAJ;;AACA,MAAI,eAAe,OAAO6E,OAAO,CAACG,aAAlC,EAAiD;AAC7ChF,IAAAA,YAAY,GAAG9C,OAAO,CAAC;AACnB+C,MAAAA,KAAK,EAAEA,KADY;AAEnBC,MAAAA,SAAS,EAAE6E;AAFQ,KAAD,EAGnBD,KAHmB,CAAtB;AAIA,WAAOG,MAAM,CAACJ,OAAO,CAACG,aAAR,CAAsBE,IAAtB,CAA2BlF,YAA3B,EAAyCA,YAAzC,CAAD,CAAb;AACH;;AACD,SAAO+E,IAAP;AACH,CAZM;AAaP,OAAO,IAAII,aAAa,GAAG,SAAhBA,aAAgB,CAASC,UAAT,EAAqBP,OAArB,EAA8B;AACrD,MAAIQ,KAAK,GAAGlF,WAAW,CAACiF,UAAU,CAACE,cAAX,EAAD,EAA8BT,OAA9B,CAAvB;AACA,MAAIU,KAAK,GAAGpF,WAAW,CAACiF,UAAU,CAACI,YAAX,EAAD,EAA4BX,OAA5B,CAAvB;AACA,SAAOQ,KAAK,CAACI,MAAN,IAAgBF,KAAK,CAACE,MAAtB,GAA+BJ,KAA/B,GAAuCE,KAA9C;AACH,CAJM;AAKP,OAAO,SAASG,aAAT,CAAuBC,MAAvB,EAA+BC,MAA/B,EAAuC;AAC1C,SAAOD,MAAM,IAAIC,MAAV,IAAoBD,MAAM,CAACF,MAAP,KAAkBG,MAAM,CAACH,MAA7C,IAAuDI,qBAAqB,CAACF,MAAD,EAASC,MAAT,CAAnF;AACH;;AAED,SAASC,qBAAT,CAA+BF,MAA/B,EAAuCC,MAAvC,EAA+C;AAC3C,MAAIE,CAAJ;AACA,MAAIC,EAAE,GAAGJ,MAAM,CAACF,MAAhB;AACA,MAAIO,gBAAJ;AACA,MAAIC,gBAAJ;;AACA,OAAKH,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGC,EAAhB,EAAoB,EAAED,CAAtB,EAAyB;AACrBE,IAAAA,gBAAgB,GAAGL,MAAM,CAACG,CAAD,CAAN,KAAcH,MAAM,CAACG,CAAD,CAAvC;AACAG,IAAAA,gBAAgB,GAAGL,MAAM,CAACE,CAAD,CAAN,KAAcF,MAAM,CAACE,CAAD,CAAvC;;AACA,QAAIE,gBAAgB,IAAIC,gBAAxB,EAA0C;AACtC;AACH;;AACD,QAAIN,MAAM,CAACG,CAAD,CAAN,KAAcF,MAAM,CAACE,CAAD,CAAxB,EAA6B;AACzB,aAAO,KAAP;AACH;AACJ;;AACD,SAAO,IAAP;AACH;;AACDhI,SAAS,CAACoI,SAAV,CAAoB1I,YAApB;AACAM,SAAS,CAACoI,SAAV,CAAoBzI,WAApB;AACAK,SAAS,CAACoI,SAAV,CAAoBxI,aAApB;AACAI,SAAS,CAACoI,SAAV,CAAoBvI,sBAApB;AACA,IAAIwI,kBAAkB,GAAGrI,SAAS,CAACsI,SAAV,CAAoBD,kBAA7C;;AACArI,SAAS,CAACsI,SAAV,CAAoBD,kBAApB,GAAyC,YAAW;AAChDA,EAAAA,kBAAkB,CAACrF,KAAnB,CAAyB,IAAzB,EAA+BC,SAA/B;;AACA,OAAKnC,QAAL,IAAiB,KAAKA,QAAL,CAAc4C,eAAd,CAA8B,KAAKjC,QAAL,CAAckC,SAAd,EAA9B,CAAjB;AACH,CAHD","sourcesContent":["/**\r\n * DevExtreme (esm/viz/gauges/base_gauge.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nvar _Number = Number;\r\nimport {\r\n    getAppropriateFormat as _getAppropriateFormat\r\n} from \"../core/utils\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    Translator1D\r\n} from \"../translators/translator1d\";\r\nvar _extend = extend;\r\nimport BaseWidget from \"../core/base_widget\";\r\nimport themeManagerModule from \"./theme_manager\";\r\nimport Tracker from \"./tracker\";\r\nimport formatHelper from \"../../format_helper\";\r\nimport {\r\n    plugin as exportPlugin\r\n} from \"../core/export\";\r\nimport {\r\n    plugin as titlePlugin\r\n} from \"../core/title\";\r\nimport {\r\n    plugin as tooltipPlugin\r\n} from \"../core/tooltip\";\r\nimport {\r\n    plugin as loadingIndicatorPlugin\r\n} from \"../core/loading_indicator\";\r\nvar _format = formatHelper.format;\r\nexport var BaseGauge = BaseWidget.inherit({\r\n    _rootClassPrefix: \"dxg\",\r\n    _themeSection: \"gauge\",\r\n    _createThemeManager: function() {\r\n        return new themeManagerModule.ThemeManager(this._getThemeManagerOptions())\r\n    },\r\n    _initCore: function() {\r\n        var root = this._renderer.root;\r\n        this._valueChangingLocker = 0;\r\n        this._translator = this._factory.createTranslator();\r\n        this._tracker = this._factory.createTracker({\r\n            renderer: this._renderer,\r\n            container: root\r\n        });\r\n        this._setTrackerCallbacks()\r\n    },\r\n    _beginValueChanging: function() {\r\n        this._resetIsReady();\r\n        this._onBeginUpdate();\r\n        ++this._valueChangingLocker\r\n    },\r\n    _endValueChanging: function() {\r\n        if (0 === --this._valueChangingLocker) {\r\n            this._drawn()\r\n        }\r\n    },\r\n    _setTrackerCallbacks: function() {\r\n        var renderer = this._renderer;\r\n        var tooltip = this._tooltip;\r\n        this._tracker.setCallbacks({\r\n            \"tooltip-show\": function(target, info, callback) {\r\n                var tooltipParameters = target.getTooltipParameters();\r\n                var offset = renderer.getRootOffset();\r\n                var formatObject = _extend({\r\n                    value: tooltipParameters.value,\r\n                    valueText: tooltip.formatValue(tooltipParameters.value),\r\n                    color: tooltipParameters.color\r\n                }, info);\r\n                return tooltip.show(formatObject, {\r\n                    x: tooltipParameters.x + offset.left,\r\n                    y: tooltipParameters.y + offset.top,\r\n                    offset: tooltipParameters.offset\r\n                }, {\r\n                    target: info\r\n                }, void 0, callback)\r\n            },\r\n            \"tooltip-hide\": function() {\r\n                return tooltip.hide()\r\n            }\r\n        })\r\n    },\r\n    _dispose: function() {\r\n        this._cleanCore();\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _disposeCore: function() {\r\n        this._themeManager.dispose();\r\n        this._tracker.dispose();\r\n        this._translator = this._tracker = null\r\n    },\r\n    _cleanCore: function() {\r\n        this._tracker.deactivate();\r\n        this._cleanContent()\r\n    },\r\n    _renderCore: function() {\r\n        if (!this._isValidDomain) {\r\n            return\r\n        }\r\n        this._renderContent();\r\n        this._tracker.setTooltipState(this._tooltip.isEnabled());\r\n        this._tracker.activate();\r\n        this._noAnimation = false\r\n    },\r\n    _applyChanges: function() {\r\n        this.callBase.apply(this, arguments);\r\n        this._resizing = this._noAnimation = false\r\n    },\r\n    _setContentSize: function() {\r\n        var that = this;\r\n        that._resizing = that._noAnimation = 2 === that._changes.count();\r\n        that.callBase.apply(that, arguments)\r\n    },\r\n    _applySize: function(rect) {\r\n        this._innerRect = {\r\n            left: rect[0],\r\n            top: rect[1],\r\n            right: rect[2],\r\n            bottom: rect[3]\r\n        };\r\n        var layoutCache = this._layout._cache;\r\n        this._cleanCore();\r\n        this._renderCore();\r\n        this._layout._cache = this._layout._cache || layoutCache;\r\n        return [rect[0], this._innerRect.top, rect[2], this._innerRect.bottom]\r\n    },\r\n    _initialChanges: [\"DOMAIN\"],\r\n    _themeDependentChanges: [\"DOMAIN\"],\r\n    _optionChangesMap: {\r\n        subtitle: \"MOSTLY_TOTAL\",\r\n        indicator: \"MOSTLY_TOTAL\",\r\n        geometry: \"MOSTLY_TOTAL\",\r\n        animation: \"MOSTLY_TOTAL\",\r\n        startValue: \"DOMAIN\",\r\n        endValue: \"DOMAIN\"\r\n    },\r\n    _optionChangesOrder: [\"DOMAIN\", \"MOSTLY_TOTAL\"],\r\n    _change_DOMAIN: function() {\r\n        this._setupDomain()\r\n    },\r\n    _change_MOSTLY_TOTAL: function() {\r\n        this._applyMostlyTotalChange()\r\n    },\r\n    _setupDomain: function() {\r\n        this._setupDomainCore();\r\n        this._isValidDomain = isFinite(1 / (this._translator.getDomain()[1] - this._translator.getDomain()[0]));\r\n        if (!this._isValidDomain) {\r\n            this._incidentOccurred(\"W2301\")\r\n        }\r\n        this._change([\"MOSTLY_TOTAL\"])\r\n    },\r\n    _applyMostlyTotalChange: function() {\r\n        this._setupCodomain();\r\n        this._setupAnimationSettings();\r\n        this._setupDefaultFormat();\r\n        this._change([\"LAYOUT\"])\r\n    },\r\n    _setupAnimationSettings: function() {\r\n        var option = this.option(\"animation\");\r\n        this._animationSettings = null;\r\n        if (void 0 === option || option) {\r\n            option = _extend({\r\n                enabled: true,\r\n                duration: 1e3,\r\n                easing: \"easeOutCubic\"\r\n            }, option);\r\n            if (option.enabled && option.duration > 0) {\r\n                this._animationSettings = {\r\n                    duration: _Number(option.duration),\r\n                    easing: option.easing\r\n                }\r\n            }\r\n        }\r\n        this._containerBackgroundColor = this.option(\"containerBackgroundColor\") || this._themeManager.theme().containerBackgroundColor\r\n    },\r\n    _setupDefaultFormat: function() {\r\n        var domain = this._translator.getDomain();\r\n        this._defaultFormatOptions = _getAppropriateFormat(domain[0], domain[1], this._getApproximateScreenRange())\r\n    },\r\n    _setupDomainCore: null,\r\n    _calculateSize: null,\r\n    _cleanContent: null,\r\n    _renderContent: null,\r\n    _setupCodomain: null,\r\n    _getApproximateScreenRange: null,\r\n    _factory: {\r\n        createTranslator: function() {\r\n            return new Translator1D\r\n        },\r\n        createTracker: function(parameters) {\r\n            return new Tracker(parameters)\r\n        }\r\n    }\r\n});\r\nexport var formatValue = function(value, options, extra) {\r\n    options = options || {};\r\n    var text = _format(value, options.format);\r\n    var formatObject;\r\n    if (\"function\" === typeof options.customizeText) {\r\n        formatObject = _extend({\r\n            value: value,\r\n            valueText: text\r\n        }, extra);\r\n        return String(options.customizeText.call(formatObject, formatObject))\r\n    }\r\n    return text\r\n};\r\nexport var getSampleText = function(translator, options) {\r\n    var text1 = formatValue(translator.getDomainStart(), options);\r\n    var text2 = formatValue(translator.getDomainEnd(), options);\r\n    return text1.length >= text2.length ? text1 : text2\r\n};\r\nexport function compareArrays(array1, array2) {\r\n    return array1 && array2 && array1.length === array2.length && compareArraysElements(array1, array2)\r\n}\r\n\r\nfunction compareArraysElements(array1, array2) {\r\n    var i;\r\n    var ii = array1.length;\r\n    var array1ValueIsNaN;\r\n    var array2ValueIsNaN;\r\n    for (i = 0; i < ii; ++i) {\r\n        array1ValueIsNaN = array1[i] !== array1[i];\r\n        array2ValueIsNaN = array2[i] !== array2[i];\r\n        if (array1ValueIsNaN && array2ValueIsNaN) {\r\n            continue\r\n        }\r\n        if (array1[i] !== array2[i]) {\r\n            return false\r\n        }\r\n    }\r\n    return true\r\n}\r\nBaseGauge.addPlugin(exportPlugin);\r\nBaseGauge.addPlugin(titlePlugin);\r\nBaseGauge.addPlugin(tooltipPlugin);\r\nBaseGauge.addPlugin(loadingIndicatorPlugin);\r\nvar _setTooltipOptions = BaseGauge.prototype._setTooltipOptions;\r\nBaseGauge.prototype._setTooltipOptions = function() {\r\n    _setTooltipOptions.apply(this, arguments);\r\n    this._tracker && this._tracker.setTooltipState(this._tooltip.isEnabled())\r\n};\r\n"]},"metadata":{},"sourceType":"module"}