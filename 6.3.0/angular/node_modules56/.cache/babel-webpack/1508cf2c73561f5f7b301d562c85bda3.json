{"ast":null,"code":"import _classCallCheck from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _get from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/get\";\nimport _getPrototypeOf from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/createSuper\";\n\n/**\r\n * DevExtreme (esm/ui/context_menu/ui.context_menu.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../core/renderer\";\nimport domAdapter from \"../../core/dom_adapter\";\nimport eventsEngine from \"../../events/core/events_engine\";\nimport Guid from \"../../core/guid\";\nimport registerComponent from \"../../core/component_registrator\";\nimport { noop } from \"../../core/utils/common\";\nimport { isObject, isRenderer, isWindow, isFunction, isPlainObject, isDefined } from \"../../core/utils/type\";\nimport { contains } from \"../../core/utils/dom\";\nimport { getPublicElement } from \"../../core/element\";\nimport { each } from \"../../core/utils/iterator\";\nimport { inArray } from \"../../core/utils/array\";\nimport { extend } from \"../../core/utils/extend\";\nimport { hasWindow } from \"../../core/utils/window\";\nimport fx from \"../../animation/fx\";\nimport animationPosition from \"../../animation/position\";\nimport devices from \"../../core/devices\";\nimport { addNamespace } from \"../../events/utils/index\";\nimport Overlay from \"../overlay\";\nimport MenuBase from \"./ui.menu_base\";\nimport { Deferred } from \"../../core/utils/deferred\";\nvar DX_MENU_CLASS = \"dx-menu\";\nvar DX_MENU_ITEM_CLASS = DX_MENU_CLASS + \"-item\";\nvar DX_MENU_ITEM_EXPANDED_CLASS = DX_MENU_ITEM_CLASS + \"-expanded\";\nvar DX_MENU_PHONE_CLASS = \"dx-menu-phone-overlay\";\nvar DX_MENU_ITEMS_CONTAINER_CLASS = DX_MENU_CLASS + \"-items-container\";\nvar DX_MENU_ITEM_WRAPPER_CLASS = DX_MENU_ITEM_CLASS + \"-wrapper\";\nvar DX_SUBMENU_CLASS = \"dx-submenu\";\nvar DX_CONTEXT_MENU_CLASS = \"dx-context-menu\";\nvar DX_HAS_CONTEXT_MENU_CLASS = \"dx-has-context-menu\";\nvar DX_STATE_DISABLED_CLASS = \"dx-state-disabled\";\nvar DX_STATE_FOCUSED_CLASS = \"dx-state-focused\";\nvar DX_STATE_HOVER_CLASS = \"dx-state-hover\";\nvar FOCUS_UP = \"up\";\nvar FOCUS_DOWN = \"down\";\nvar FOCUS_LEFT = \"left\";\nvar FOCUS_RIGHT = \"right\";\nvar FOCUS_FIRST = \"first\";\nvar FOCUS_LAST = \"last\";\nvar ACTIONS = [\"onShowing\", \"onShown\", \"onSubmenuCreated\", \"onHiding\", \"onHidden\", \"onPositioning\", \"onLeftFirstItem\", \"onLeftLastItem\", \"onCloseRootSubmenu\", \"onExpandLastSubmenu\"];\nvar LOCAL_SUBMENU_DIRECTIONS = [FOCUS_UP, FOCUS_DOWN, FOCUS_FIRST, FOCUS_LAST];\nvar DEFAULT_SHOW_EVENT = \"dxcontextmenu\";\n\nvar ContextMenu = /*#__PURE__*/function (_MenuBase) {\n  _inherits(ContextMenu, _MenuBase);\n\n  var _super = _createSuper(ContextMenu);\n\n  function ContextMenu() {\n    _classCallCheck(this, ContextMenu);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(ContextMenu, [{\n    key: \"getShowEvent\",\n    value: function getShowEvent(showEventOption) {\n      var result = null;\n\n      if (isObject(showEventOption)) {\n        if (null !== showEventOption.name) {\n          result = showEventOption.name || DEFAULT_SHOW_EVENT;\n        }\n      } else {\n        result = showEventOption;\n      }\n\n      return result;\n    }\n  }, {\n    key: \"getShowDelay\",\n    value: function getShowDelay(showEventOption) {\n      return isObject(showEventOption) && showEventOption.delay;\n    }\n  }, {\n    key: \"_getDefaultOptions\",\n    value: function _getDefaultOptions() {\n      return extend(_get(_getPrototypeOf(ContextMenu.prototype), \"_getDefaultOptions\", this).call(this), {\n        showEvent: DEFAULT_SHOW_EVENT,\n        closeOnOutsideClick: true,\n        position: {\n          at: \"top left\",\n          my: \"top left\"\n        },\n        onShowing: null,\n        onShown: null,\n        onSubmenuCreated: null,\n        onHiding: null,\n        onHidden: null,\n        onPositioning: null,\n        submenuDirection: \"auto\",\n        visible: false,\n        target: void 0,\n        onLeftFirstItem: null,\n        onLeftLastItem: null,\n        onCloseRootSubmenu: null,\n        onExpandLastSubmenu: null\n      });\n    }\n  }, {\n    key: \"_defaultOptionsRules\",\n    value: function _defaultOptionsRules() {\n      return _get(_getPrototypeOf(ContextMenu.prototype), \"_defaultOptionsRules\", this).call(this).concat([{\n        device: function device() {\n          return !hasWindow();\n        },\n        options: {\n          animation: null\n        }\n      }]);\n    }\n  }, {\n    key: \"_initActions\",\n    value: function _initActions() {\n      var _this = this;\n\n      this._actions = {};\n      each(ACTIONS, function (index, action) {\n        _this._actions[action] = _this._createActionByOption(action) || noop;\n      });\n    }\n  }, {\n    key: \"_setOptionsByReference\",\n    value: function _setOptionsByReference() {\n      _get(_getPrototypeOf(ContextMenu.prototype), \"_setOptionsByReference\", this).call(this);\n\n      extend(this._optionsByReference, {\n        animation: true,\n        selectedItem: true\n      });\n    }\n  }, {\n    key: \"_focusInHandler\",\n    value: function _focusInHandler() {}\n  }, {\n    key: \"_itemContainer\",\n    value: function _itemContainer() {\n      return this._overlay ? this._overlay.$content() : $();\n    }\n  }, {\n    key: \"_eventBindingTarget\",\n    value: function _eventBindingTarget() {\n      return this._itemContainer();\n    }\n  }, {\n    key: \"itemsContainer\",\n    value: function itemsContainer() {\n      return this._overlay ? this._overlay.$content() : void 0;\n    }\n  }, {\n    key: \"_supportedKeys\",\n    value: function _supportedKeys() {\n      var _this2 = this;\n\n      return extend(_get(_getPrototypeOf(ContextMenu.prototype), \"_supportedKeys\", this).call(this), {\n        space: function space() {\n          var $item = $(_this2.option(\"focusedElement\"));\n\n          _this2.hide();\n\n          if (!$item.length || !_this2._isSelectionEnabled()) {\n            return;\n          }\n\n          _this2.selectItem($item[0]);\n        },\n        escape: this.hide\n      });\n    }\n  }, {\n    key: \"_getActiveItem\",\n    value: function _getActiveItem() {\n      var $availableItems = this._getAvailableItems();\n\n      var $focusedItem = $availableItems.filter(\".\".concat(DX_STATE_FOCUSED_CLASS));\n      var $hoveredItem = $availableItems.filter(\".\".concat(DX_STATE_HOVER_CLASS));\n      var $hoveredItemContainer = $hoveredItem.closest(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS));\n\n      if ($hoveredItemContainer.find(\".\".concat(DX_MENU_ITEM_CLASS)).index($focusedItem) >= 0) {\n        return $focusedItem;\n      }\n\n      if ($hoveredItem.length) {\n        return $hoveredItem;\n      }\n\n      return _get(_getPrototypeOf(ContextMenu.prototype), \"_getActiveItem\", this).call(this);\n    }\n  }, {\n    key: \"_moveFocus\",\n    value: function _moveFocus(location) {\n      var $items = this._getItemsByLocation(location);\n\n      var $oldTarget = this._getActiveItem(true);\n\n      var $hoveredItem = this.itemsContainer().find(\".\".concat(DX_STATE_HOVER_CLASS));\n      var $focusedItem = $(this.option(\"focusedElement\"));\n      var $activeItemHighlighted = !!($focusedItem.length || $hoveredItem.length);\n      var $newTarget;\n\n      switch (location) {\n        case FOCUS_UP:\n          $newTarget = $activeItemHighlighted ? this._prevItem($items) : $oldTarget;\n\n          this._setFocusedElement($newTarget);\n\n          if ($oldTarget.is($items.first())) {\n            this._actions.onLeftFirstItem($oldTarget);\n          }\n\n          break;\n\n        case FOCUS_DOWN:\n          $newTarget = $activeItemHighlighted ? this._nextItem($items) : $oldTarget;\n\n          this._setFocusedElement($newTarget);\n\n          if ($oldTarget.is($items.last())) {\n            this._actions.onLeftLastItem($oldTarget);\n          }\n\n          break;\n\n        case FOCUS_RIGHT:\n          $newTarget = this.option(\"rtlEnabled\") ? this._hideSubmenuHandler() : this._expandSubmenuHandler($items, location);\n\n          this._setFocusedElement($newTarget);\n\n          break;\n\n        case FOCUS_LEFT:\n          $newTarget = this.option(\"rtlEnabled\") ? this._expandSubmenuHandler($items, location) : this._hideSubmenuHandler();\n\n          this._setFocusedElement($newTarget);\n\n          break;\n\n        case FOCUS_FIRST:\n          $newTarget = $items.first();\n\n          this._setFocusedElement($newTarget);\n\n          break;\n\n        case FOCUS_LAST:\n          $newTarget = $items.last();\n\n          this._setFocusedElement($newTarget);\n\n          break;\n\n        default:\n          return _get(_getPrototypeOf(ContextMenu.prototype), \"_moveFocus\", this).call(this, location);\n      }\n    }\n  }, {\n    key: \"_setFocusedElement\",\n    value: function _setFocusedElement($element) {\n      if ($element && 0 !== $element.length) {\n        this.option(\"focusedElement\", getPublicElement($element));\n      }\n    }\n  }, {\n    key: \"_getItemsByLocation\",\n    value: function _getItemsByLocation(location) {\n      var $activeItem = this._getActiveItem(true);\n\n      var $items;\n\n      if (inArray(location, LOCAL_SUBMENU_DIRECTIONS) >= 0) {\n        $items = $activeItem.closest(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS)).children().children();\n      }\n\n      $items = this._getAvailableItems($items);\n      return $items;\n    }\n  }, {\n    key: \"_getAriaTarget\",\n    value: function _getAriaTarget() {\n      return this.$element();\n    }\n  }, {\n    key: \"_refreshActiveDescendant\",\n    value: function _refreshActiveDescendant() {\n      if (isDefined(this._overlay)) {\n        var $target = this._overlay.$content();\n\n        _get(_getPrototypeOf(ContextMenu.prototype), \"_refreshActiveDescendant\", this).call(this, $target);\n      }\n    }\n  }, {\n    key: \"_hideSubmenuHandler\",\n    value: function _hideSubmenuHandler() {\n      var $curItem = this._getActiveItem(true);\n\n      var $parentItem = $curItem.parents(\".\".concat(DX_MENU_ITEM_EXPANDED_CLASS)).first();\n\n      if ($parentItem.length) {\n        this._hideSubmenusOnSameLevel($parentItem);\n\n        this._hideSubmenu($curItem.closest(\".\".concat(DX_SUBMENU_CLASS)));\n\n        return $parentItem;\n      }\n\n      this._actions.onCloseRootSubmenu($curItem);\n\n      return $curItem;\n    }\n  }, {\n    key: \"_expandSubmenuHandler\",\n    value: function _expandSubmenuHandler($items, location) {\n      var $curItem = this._getActiveItem(true);\n\n      var itemData = this._getItemData($curItem);\n\n      var node = this._dataAdapter.getNodeByItem(itemData);\n\n      var isItemHasSubmenu = this._hasSubmenu(node);\n\n      var $submenu = $curItem.children(\".\".concat(DX_SUBMENU_CLASS));\n\n      if (isItemHasSubmenu && !$curItem.hasClass(DX_STATE_DISABLED_CLASS)) {\n        if (!$submenu.length || \"hidden\" === $submenu.css(\"visibility\")) {\n          this._showSubmenu($curItem);\n        }\n\n        return this._nextItem(this._getItemsByLocation(location));\n      }\n\n      this._actions.onExpandLastSubmenu($curItem);\n\n      return;\n    }\n  }, {\n    key: \"_clean\",\n    value: function _clean() {\n      if (this._overlay) {\n        this._overlay.$element().remove();\n\n        this._overlay = null;\n      }\n\n      this._detachShowContextMenuEvents(this._getTarget());\n\n      _get(_getPrototypeOf(ContextMenu.prototype), \"_clean\", this).call(this);\n    }\n  }, {\n    key: \"_initMarkup\",\n    value: function _initMarkup() {\n      this.$element().addClass(DX_HAS_CONTEXT_MENU_CLASS);\n\n      _get(_getPrototypeOf(ContextMenu.prototype), \"_initMarkup\", this).call(this);\n    }\n  }, {\n    key: \"_render\",\n    value: function _render() {\n      _get(_getPrototypeOf(ContextMenu.prototype), \"_render\", this).call(this);\n\n      this._renderVisibility(this.option(\"visible\"));\n\n      this._addWidgetClass();\n    }\n  }, {\n    key: \"_renderContentImpl\",\n    value: function _renderContentImpl() {\n      this._detachShowContextMenuEvents(this._getTarget());\n\n      this._attachShowContextMenuEvents();\n    }\n  }, {\n    key: \"_attachKeyboardEvents\",\n    value: function _attachKeyboardEvents() {\n      !this._keyboardListenerId && this._focusTarget().length && _get(_getPrototypeOf(ContextMenu.prototype), \"_attachKeyboardEvents\", this).call(this);\n    }\n  }, {\n    key: \"_renderContextMenuOverlay\",\n    value: function _renderContextMenuOverlay() {\n      if (this._overlay) {\n        return;\n      }\n\n      var overlayOptions = this._getOverlayOptions();\n\n      this._overlay = this._createComponent($(\"<div>\").appendTo(this._$element), Overlay, overlayOptions);\n\n      var $overlayContent = this._overlay.$content();\n\n      $overlayContent.addClass(DX_CONTEXT_MENU_CLASS);\n\n      this._addCustomCssClass($overlayContent);\n\n      this._addPlatformDependentClass($overlayContent);\n\n      this._attachContextMenuEvent();\n    }\n  }, {\n    key: \"_itemContextMenuHandler\",\n    value: function _itemContextMenuHandler(e) {\n      _get(_getPrototypeOf(ContextMenu.prototype), \"_itemContextMenuHandler\", this).call(this, e);\n\n      e.stopPropagation();\n    }\n  }, {\n    key: \"_addPlatformDependentClass\",\n    value: function _addPlatformDependentClass($element) {\n      if (devices.current().phone) {\n        $element.addClass(DX_MENU_PHONE_CLASS);\n      }\n    }\n  }, {\n    key: \"_detachShowContextMenuEvents\",\n    value: function _detachShowContextMenuEvents(target) {\n      var showEvent = this.getShowEvent(this.option(\"showEvent\"));\n\n      if (!showEvent) {\n        return;\n      }\n\n      var eventName = addNamespace(showEvent, this.NAME);\n\n      if (this._showContextMenuEventHandler) {\n        eventsEngine.off(domAdapter.getDocument(), eventName, target, this._showContextMenuEventHandler);\n      } else {\n        eventsEngine.off($(target), eventName);\n      }\n    }\n  }, {\n    key: \"_attachShowContextMenuEvents\",\n    value: function _attachShowContextMenuEvents() {\n      var _this3 = this;\n\n      var target = this._getTarget();\n\n      var showEvent = this.getShowEvent(this.option(\"showEvent\"));\n\n      if (!showEvent) {\n        return;\n      }\n\n      var eventName = addNamespace(showEvent, this.NAME);\n\n      var contextMenuAction = this._createAction(function (e) {\n        var delay = _this3.getShowDelay(_this3.option(\"showEvent\"));\n\n        if (delay) {\n          setTimeout(function () {\n            return _this3._show(e.event);\n          }, delay);\n        } else {\n          _this3._show(e.event);\n        }\n      }, {\n        validatingTargetName: \"target\"\n      });\n\n      var handler = function handler(e) {\n        return contextMenuAction({\n          event: e,\n          target: $(e.currentTarget)\n        });\n      };\n\n      contextMenuAction = this._createAction(contextMenuAction);\n\n      if (isRenderer(target) || target.nodeType || isWindow(target)) {\n        this._showContextMenuEventHandler = void 0;\n        eventsEngine.on(target, eventName, handler);\n      } else {\n        this._showContextMenuEventHandler = handler;\n        eventsEngine.on(domAdapter.getDocument(), eventName, target, this._showContextMenuEventHandler);\n      }\n    }\n  }, {\n    key: \"_hoverEndHandler\",\n    value: function _hoverEndHandler(e) {\n      _get(_getPrototypeOf(ContextMenu.prototype), \"_hoverEndHandler\", this).call(this, e);\n\n      e.stopPropagation();\n    }\n  }, {\n    key: \"_renderDimensions\",\n    value: function _renderDimensions() {}\n  }, {\n    key: \"_renderContainer\",\n    value: function _renderContainer($wrapper, submenuContainer) {\n      var $holder = submenuContainer || this._itemContainer();\n\n      $wrapper = $(\"<div>\");\n      $wrapper.appendTo($holder).addClass(DX_SUBMENU_CLASS).css(\"visibility\", submenuContainer ? \"hidden\" : \"visible\");\n\n      var $itemsContainer = _get(_getPrototypeOf(ContextMenu.prototype), \"_renderContainer\", this).call(this, $wrapper);\n\n      if (submenuContainer) {\n        return $itemsContainer;\n      }\n\n      if (this.option(\"width\")) {\n        return $itemsContainer.css(\"minWidth\", this.option(\"width\"));\n      }\n\n      if (this.option(\"height\")) {\n        return $itemsContainer.css(\"minHeight\", this.option(\"height\"));\n      }\n\n      return $itemsContainer;\n    }\n  }, {\n    key: \"_renderSubmenuItems\",\n    value: function _renderSubmenuItems(node, $itemFrame) {\n      this._renderItems(this._getChildNodes(node), $itemFrame);\n\n      this._actions.onSubmenuCreated({\n        itemElement: getPublicElement($itemFrame),\n        itemData: node.internalFields.item,\n        submenuElement: getPublicElement($itemFrame.children(\".\".concat(DX_SUBMENU_CLASS)))\n      });\n    }\n  }, {\n    key: \"_getOverlayOptions\",\n    value: function _getOverlayOptions() {\n      var position = this.option(\"position\");\n      var overlayOptions = {\n        focusStateEnabled: this.option(\"focusStateEnabled\"),\n        animation: this.option(\"animation\"),\n        innerOverlay: true,\n        closeOnOutsideClick: this._closeOnOutsideClickHandler.bind(this),\n        propagateOutsideClick: true,\n        closeOnTargetScroll: true,\n        deferRendering: false,\n        position: {\n          at: position.at,\n          my: position.my,\n          of: this._getTarget(),\n          collision: \"flipfit\"\n        },\n        shading: false,\n        showTitle: false,\n        height: \"auto\",\n        width: \"auto\",\n        onShown: this._overlayShownActionHandler.bind(this),\n        onHiding: this._overlayHidingActionHandler.bind(this),\n        onHidden: this._overlayHiddenActionHandler.bind(this)\n      };\n      return overlayOptions;\n    }\n  }, {\n    key: \"_overlayShownActionHandler\",\n    value: function _overlayShownActionHandler(arg) {\n      this._actions.onShown(arg);\n    }\n  }, {\n    key: \"_overlayHidingActionHandler\",\n    value: function _overlayHidingActionHandler(arg) {\n      this._actions.onHiding(arg);\n\n      if (!arg.cancel) {\n        this._hideAllShownSubmenus();\n\n        this._setOptionWithoutOptionChange(\"visible\", false);\n      }\n    }\n  }, {\n    key: \"_overlayHiddenActionHandler\",\n    value: function _overlayHiddenActionHandler(arg) {\n      this._actions.onHidden(arg);\n    }\n  }, {\n    key: \"_closeOnOutsideClickHandler\",\n    value: function _closeOnOutsideClickHandler(e) {\n      var closeOnOutsideClick = this.option(\"closeOnOutsideClick\");\n\n      if (isFunction(closeOnOutsideClick)) {\n        return closeOnOutsideClick(e);\n      }\n\n      if (!closeOnOutsideClick) {\n        return false;\n      }\n\n      if (domAdapter.isDocument(e.target)) {\n        return true;\n      }\n\n      var $activeItemContainer = this._getActiveItemsContainer(e.target);\n\n      var $itemContainers = this._getItemsContainers();\n\n      var $clickedItem = this._searchActiveItem(e.target);\n\n      var $rootItem = this.$element().parents(\".\".concat(DX_MENU_ITEM_CLASS));\n      var isRootItemClicked = $clickedItem[0] === $rootItem[0] && $clickedItem.length && $rootItem.length;\n      var isInnerOverlayClicked = this._isIncludeOverlay($activeItemContainer, $itemContainers) && $clickedItem.length;\n\n      if (isInnerOverlayClicked || isRootItemClicked) {\n        if (\"onClick\" === this._getShowSubmenuMode()) {\n          this._hideAllShownChildSubmenus($clickedItem);\n        }\n\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"_getActiveItemsContainer\",\n    value: function _getActiveItemsContainer(target) {\n      return $(target).closest(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS));\n    }\n  }, {\n    key: \"_getItemsContainers\",\n    value: function _getItemsContainers() {\n      return this._overlay.$content().find(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS));\n    }\n  }, {\n    key: \"_searchActiveItem\",\n    value: function _searchActiveItem(target) {\n      return $(target).closest(\".\".concat(DX_MENU_ITEM_CLASS)).eq(0);\n    }\n  }, {\n    key: \"_isIncludeOverlay\",\n    value: function _isIncludeOverlay($activeOverlay, $allOverlays) {\n      var isSame = false;\n      each($allOverlays, function (index, $overlay) {\n        if ($activeOverlay.is($overlay) && !isSame) {\n          isSame = true;\n        }\n      });\n      return isSame;\n    }\n  }, {\n    key: \"_hideAllShownChildSubmenus\",\n    value: function _hideAllShownChildSubmenus($clickedItem) {\n      var _this4 = this;\n\n      var $submenuElements = $clickedItem.find(\".\".concat(DX_SUBMENU_CLASS));\n      var shownSubmenus = extend([], this._shownSubmenus);\n\n      if ($submenuElements.length > 0) {\n        each(shownSubmenus, function (index, $submenu) {\n          var $context = _this4._searchActiveItem($submenu.context).parent();\n\n          if ($context.parent().is($clickedItem.parent().parent()) && !$context.is($clickedItem.parent())) {\n            _this4._hideSubmenu($submenu);\n          }\n        });\n      }\n    }\n  }, {\n    key: \"_showSubmenu\",\n    value: function _showSubmenu($item) {\n      var node = this._dataAdapter.getNodeByItem(this._getItemData($item));\n\n      this._hideSubmenusOnSameLevel($item);\n\n      if (!this._hasSubmenu(node)) {\n        return;\n      }\n\n      var $submenu = $item.children(\".\".concat(DX_SUBMENU_CLASS));\n      var isSubmenuRendered = $submenu.length;\n\n      _get(_getPrototypeOf(ContextMenu.prototype), \"_showSubmenu\", this).call(this, $item);\n\n      if (!isSubmenuRendered) {\n        this._renderSubmenuItems(node, $item);\n      }\n\n      if (!this._isSubmenuVisible($submenu)) {\n        this._drawSubmenu($item);\n      }\n    }\n  }, {\n    key: \"_hideSubmenusOnSameLevel\",\n    value: function _hideSubmenusOnSameLevel($item) {\n      var $expandedItems = $item.parent(\".\".concat(DX_MENU_ITEM_WRAPPER_CLASS)).siblings().find(\".\".concat(DX_MENU_ITEM_EXPANDED_CLASS));\n\n      if ($expandedItems.length) {\n        $expandedItems.removeClass(DX_MENU_ITEM_EXPANDED_CLASS);\n\n        this._hideSubmenu($expandedItems.find(\".\".concat(DX_SUBMENU_CLASS)));\n      }\n    }\n  }, {\n    key: \"_hideSubmenuGroup\",\n    value: function _hideSubmenuGroup($submenu) {\n      if (this._isSubmenuVisible($submenu)) {\n        this._hideSubmenuCore($submenu);\n      }\n    }\n  }, {\n    key: \"_isSubmenuVisible\",\n    value: function _isSubmenuVisible($submenu) {\n      return \"visible\" === $submenu.css(\"visibility\");\n    }\n  }, {\n    key: \"_drawSubmenu\",\n    value: function _drawSubmenu($itemElement) {\n      var animation = this.option(\"animation\") ? this.option(\"animation\").show : {};\n      var $submenu = $itemElement.children(\".\".concat(DX_SUBMENU_CLASS));\n\n      var submenuPosition = this._getSubmenuPosition($itemElement);\n\n      if (this._overlay && this._overlay.option(\"visible\")) {\n        if (!isDefined(this._shownSubmenus)) {\n          this._shownSubmenus = [];\n        }\n\n        if (inArray($submenu, this._shownSubmenus)) {\n          this._shownSubmenus.push($submenu);\n        }\n\n        if (animation) {\n          fx.stop($submenu);\n        }\n\n        animationPosition.setup($submenu, submenuPosition);\n\n        if (animation) {\n          if (isPlainObject(animation.to)) {\n            animation.to.position = submenuPosition;\n          }\n\n          this._animate($submenu, animation);\n        }\n\n        $submenu.css(\"visibility\", \"visible\");\n      }\n    }\n  }, {\n    key: \"_animate\",\n    value: function _animate($container, options) {\n      fx.animate($container, options);\n    }\n  }, {\n    key: \"_getSubmenuPosition\",\n    value: function _getSubmenuPosition($rootItem) {\n      var submenuDirection = this.option(\"submenuDirection\").toLowerCase();\n      var $rootItemWrapper = $rootItem.parent(\".\".concat(DX_MENU_ITEM_WRAPPER_CLASS));\n      var position = {\n        collision: \"flip\",\n        of: $rootItemWrapper,\n        offset: {\n          h: 0,\n          v: -1\n        }\n      };\n\n      switch (submenuDirection) {\n        case \"left\":\n          position.at = \"left top\";\n          position.my = \"right top\";\n          break;\n\n        case \"right\":\n          position.at = \"right top\";\n          position.my = \"left top\";\n          break;\n\n        default:\n          if (this.option(\"rtlEnabled\")) {\n            position.at = \"left top\";\n            position.my = \"right top\";\n          } else {\n            position.at = \"right top\";\n            position.my = \"left top\";\n          }\n\n      }\n\n      return position;\n    }\n  }, {\n    key: \"_updateSubmenuVisibilityOnClick\",\n    value: function _updateSubmenuVisibilityOnClick(actionArgs) {\n      if (!actionArgs.args.length) {\n        return;\n      }\n\n      var itemData = actionArgs.args[0].itemData;\n\n      var node = this._dataAdapter.getNodeByItem(itemData);\n\n      if (!node) {\n        return;\n      }\n\n      var $itemElement = $(actionArgs.args[0].itemElement);\n      var $submenu = $itemElement.find(\".\".concat(DX_SUBMENU_CLASS));\n      var shouldRenderSubmenu = this._hasSubmenu(node) && !$submenu.length;\n\n      if (shouldRenderSubmenu) {\n        this._renderSubmenuItems(node, $itemElement);\n\n        $submenu = $itemElement.find(\".\".concat(DX_SUBMENU_CLASS));\n      }\n\n      if ($itemElement.context === $submenu.context && \"visible\" === $submenu.css(\"visibility\")) {\n        return;\n      }\n\n      var notCloseMenuOnItemClick = itemData && false === itemData.closeMenuOnClick;\n\n      if (!itemData || itemData.disabled || notCloseMenuOnItemClick) {\n        return;\n      }\n\n      this._updateSelectedItemOnClick(actionArgs);\n\n      if (0 === $submenu.length) {\n        var $prevSubmenu = $($itemElement.parents(\".\".concat(DX_SUBMENU_CLASS))[0]);\n\n        this._hideSubmenu($prevSubmenu);\n\n        if (!actionArgs.canceled && this._overlay && this._overlay.option(\"visible\")) {\n          this.option(\"visible\", false);\n        }\n      } else {\n        if (this._shownSubmenus && this._shownSubmenus.length > 0) {\n          if (this._shownSubmenus[0].is($submenu)) {\n            this._hideSubmenu($submenu);\n          }\n        }\n\n        this._showSubmenu($itemElement);\n      }\n    }\n  }, {\n    key: \"_hideSubmenu\",\n    value: function _hideSubmenu($curSubmenu) {\n      var _this5 = this;\n\n      var shownSubmenus = extend([], this._shownSubmenus);\n      each(shownSubmenus, function (index, $submenu) {\n        if ($curSubmenu.is($submenu) || contains($curSubmenu[0], $submenu[0])) {\n          $submenu.parent().removeClass(DX_MENU_ITEM_EXPANDED_CLASS);\n\n          _this5._hideSubmenuCore($submenu);\n        }\n      });\n    }\n  }, {\n    key: \"_hideSubmenuCore\",\n    value: function _hideSubmenuCore($submenu) {\n      var index = inArray($submenu, this._shownSubmenus);\n      var animation = this.option(\"animation\") ? this.option(\"animation\").hide : null;\n\n      if (index >= 0) {\n        this._shownSubmenus.splice(index, 1);\n      }\n\n      this._stopAnimate($submenu);\n\n      animation && this._animate($submenu, animation);\n      $submenu.css(\"visibility\", \"hidden\");\n    }\n  }, {\n    key: \"_stopAnimate\",\n    value: function _stopAnimate($container) {\n      fx.stop($container, true);\n    }\n  }, {\n    key: \"_hideAllShownSubmenus\",\n    value: function _hideAllShownSubmenus() {\n      var _this6 = this;\n\n      var shownSubmenus = extend([], this._shownSubmenus);\n\n      var $expandedItems = this._overlay.$content().find(\".\".concat(DX_MENU_ITEM_EXPANDED_CLASS));\n\n      $expandedItems.removeClass(DX_MENU_ITEM_EXPANDED_CLASS);\n      each(shownSubmenus, function (_, $submenu) {\n        _this6._hideSubmenu($submenu);\n      });\n    }\n  }, {\n    key: \"_visibilityChanged\",\n    value: function _visibilityChanged(visible) {\n      if (visible) {\n        this._renderContentImpl();\n      }\n    }\n  }, {\n    key: \"_optionChanged\",\n    value: function _optionChanged(args) {\n      if (inArray(args.name, ACTIONS) > -1) {\n        this._initActions();\n\n        return;\n      }\n\n      switch (args.name) {\n        case \"visible\":\n          this._renderVisibility(args.value);\n\n          break;\n\n        case \"showEvent\":\n        case \"position\":\n        case \"submenuDirection\":\n          this._invalidate();\n\n          break;\n\n        case \"target\":\n          args.previousValue && this._detachShowContextMenuEvents(args.previousValue);\n\n          this._invalidate();\n\n          break;\n\n        case \"closeOnOutsideClick\":\n          break;\n\n        default:\n          _get(_getPrototypeOf(ContextMenu.prototype), \"_optionChanged\", this).call(this, args);\n\n      }\n    }\n  }, {\n    key: \"_renderVisibility\",\n    value: function _renderVisibility(showing) {\n      return showing ? this._show() : this._hide();\n    }\n  }, {\n    key: \"_toggleVisibility\",\n    value: function _toggleVisibility() {}\n  }, {\n    key: \"_show\",\n    value: function _show(event) {\n      var args = {\n        jQEvent: event\n      };\n      var promise = new Deferred().reject().promise();\n\n      this._actions.onShowing(args);\n\n      if (args.cancel) {\n        return promise;\n      }\n\n      var position = this._positionContextMenu(event);\n\n      if (position) {\n        if (!this._overlay) {\n          this._renderContextMenuOverlay();\n\n          this._overlay.$content().addClass(this._widgetClass());\n\n          this._renderFocusState();\n\n          this._attachHoverEvents();\n\n          this._attachClickEvent();\n\n          this._renderItems(this._dataAdapter.getRootNodes());\n        }\n\n        this._setOptionWithoutOptionChange(\"visible\", true);\n\n        this._overlay.option(\"position\", position);\n\n        promise = this._overlay.show();\n        event && event.stopPropagation();\n\n        this._setAriaAttributes();\n      }\n\n      return promise;\n    }\n  }, {\n    key: \"_setAriaAttributes\",\n    value: function _setAriaAttributes() {\n      this._overlayContentId = \"dx-\".concat(new Guid());\n      this.setAria(\"owns\", this._overlayContentId);\n      this.setAria({\n        id: this._overlayContentId,\n        role: \"menu\"\n      }, this._overlay.$content());\n    }\n  }, {\n    key: \"_cleanAriaAttributes\",\n    value: function _cleanAriaAttributes() {\n      this._overlay && this.setAria(\"id\", null, this._overlay.$content());\n      this.setAria(\"owns\", void 0);\n    }\n  }, {\n    key: \"_getTarget\",\n    value: function _getTarget() {\n      return this.option(\"target\") || this.option(\"position\").of || $(domAdapter.getDocument());\n    }\n  }, {\n    key: \"_getContextMenuPosition\",\n    value: function _getContextMenuPosition() {\n      return extend({}, this.option(\"position\"), {\n        of: this._getTarget()\n      });\n    }\n  }, {\n    key: \"_positionContextMenu\",\n    value: function _positionContextMenu(jQEvent) {\n      var position = this._getContextMenuPosition();\n\n      var isInitialPosition = this._isInitialOptionValue(\"position\");\n\n      var positioningAction = this._createActionByOption(\"onPositioning\", actionArgs);\n\n      if (jQEvent && jQEvent.preventDefault && isInitialPosition) {\n        position.of = jQEvent;\n      }\n\n      var actionArgs = {\n        position: position,\n        event: jQEvent\n      };\n      positioningAction(actionArgs);\n\n      if (actionArgs.cancel) {\n        position = null;\n      } else if (actionArgs.event) {\n        actionArgs.event.cancel = true;\n        jQEvent.preventDefault();\n      }\n\n      return position;\n    }\n  }, {\n    key: \"_refresh\",\n    value: function _refresh() {\n      if (!hasWindow()) {\n        _get(_getPrototypeOf(ContextMenu.prototype), \"_refresh\", this).call(this);\n      } else if (this._overlay) {\n        var lastPosition = this._overlay.option(\"position\");\n\n        _get(_getPrototypeOf(ContextMenu.prototype), \"_refresh\", this).call(this);\n\n        this._overlay && this._overlay.option(\"position\", lastPosition);\n      } else {\n        _get(_getPrototypeOf(ContextMenu.prototype), \"_refresh\", this).call(this);\n      }\n    }\n  }, {\n    key: \"_hide\",\n    value: function _hide() {\n      var promise;\n\n      if (this._overlay) {\n        promise = this._overlay.hide();\n\n        this._setOptionWithoutOptionChange(\"visible\", false);\n      }\n\n      this._cleanAriaAttributes();\n\n      this.option(\"focusedElement\", null);\n      return promise || new Deferred().reject().promise();\n    }\n  }, {\n    key: \"toggle\",\n    value: function toggle(showing) {\n      var visible = this.option(\"visible\");\n      showing = void 0 === showing ? !visible : showing;\n      return this._renderVisibility(showing);\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      return this.toggle(true);\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      return this.toggle(false);\n    }\n  }]);\n\n  return ContextMenu;\n}(MenuBase);\n\nregisterComponent(\"dxContextMenu\", ContextMenu);\nexport default ContextMenu;","map":{"version":3,"sources":["C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/devextreme/esm/ui/context_menu/ui.context_menu.js"],"names":["$","domAdapter","eventsEngine","Guid","registerComponent","noop","isObject","isRenderer","isWindow","isFunction","isPlainObject","isDefined","contains","getPublicElement","each","inArray","extend","hasWindow","fx","animationPosition","devices","addNamespace","Overlay","MenuBase","Deferred","DX_MENU_CLASS","DX_MENU_ITEM_CLASS","DX_MENU_ITEM_EXPANDED_CLASS","DX_MENU_PHONE_CLASS","DX_MENU_ITEMS_CONTAINER_CLASS","DX_MENU_ITEM_WRAPPER_CLASS","DX_SUBMENU_CLASS","DX_CONTEXT_MENU_CLASS","DX_HAS_CONTEXT_MENU_CLASS","DX_STATE_DISABLED_CLASS","DX_STATE_FOCUSED_CLASS","DX_STATE_HOVER_CLASS","FOCUS_UP","FOCUS_DOWN","FOCUS_LEFT","FOCUS_RIGHT","FOCUS_FIRST","FOCUS_LAST","ACTIONS","LOCAL_SUBMENU_DIRECTIONS","DEFAULT_SHOW_EVENT","ContextMenu","showEventOption","result","name","delay","showEvent","closeOnOutsideClick","position","at","my","onShowing","onShown","onSubmenuCreated","onHiding","onHidden","onPositioning","submenuDirection","visible","target","onLeftFirstItem","onLeftLastItem","onCloseRootSubmenu","onExpandLastSubmenu","concat","device","options","animation","_actions","index","action","_createActionByOption","_optionsByReference","selectedItem","_overlay","$content","_itemContainer","space","$item","option","hide","length","_isSelectionEnabled","selectItem","escape","$availableItems","_getAvailableItems","$focusedItem","filter","$hoveredItem","$hoveredItemContainer","closest","find","location","$items","_getItemsByLocation","$oldTarget","_getActiveItem","itemsContainer","$activeItemHighlighted","$newTarget","_prevItem","_setFocusedElement","is","first","_nextItem","last","_hideSubmenuHandler","_expandSubmenuHandler","$element","$activeItem","children","$target","$curItem","$parentItem","parents","_hideSubmenusOnSameLevel","_hideSubmenu","itemData","_getItemData","node","_dataAdapter","getNodeByItem","isItemHasSubmenu","_hasSubmenu","$submenu","hasClass","css","_showSubmenu","remove","_detachShowContextMenuEvents","_getTarget","addClass","_renderVisibility","_addWidgetClass","_attachShowContextMenuEvents","_keyboardListenerId","_focusTarget","overlayOptions","_getOverlayOptions","_createComponent","appendTo","_$element","$overlayContent","_addCustomCssClass","_addPlatformDependentClass","_attachContextMenuEvent","e","stopPropagation","current","phone","getShowEvent","eventName","NAME","_showContextMenuEventHandler","off","getDocument","contextMenuAction","_createAction","getShowDelay","setTimeout","_show","event","validatingTargetName","handler","currentTarget","nodeType","on","$wrapper","submenuContainer","$holder","$itemsContainer","$itemFrame","_renderItems","_getChildNodes","itemElement","internalFields","item","submenuElement","focusStateEnabled","innerOverlay","_closeOnOutsideClickHandler","bind","propagateOutsideClick","closeOnTargetScroll","deferRendering","of","collision","shading","showTitle","height","width","_overlayShownActionHandler","_overlayHidingActionHandler","_overlayHiddenActionHandler","arg","cancel","_hideAllShownSubmenus","_setOptionWithoutOptionChange","isDocument","$activeItemContainer","_getActiveItemsContainer","$itemContainers","_getItemsContainers","$clickedItem","_searchActiveItem","$rootItem","isRootItemClicked","isInnerOverlayClicked","_isIncludeOverlay","_getShowSubmenuMode","_hideAllShownChildSubmenus","eq","$activeOverlay","$allOverlays","isSame","$overlay","$submenuElements","shownSubmenus","_shownSubmenus","$context","context","parent","isSubmenuRendered","_renderSubmenuItems","_isSubmenuVisible","_drawSubmenu","$expandedItems","siblings","removeClass","_hideSubmenuCore","$itemElement","show","submenuPosition","_getSubmenuPosition","push","stop","setup","to","_animate","$container","animate","toLowerCase","$rootItemWrapper","offset","h","v","actionArgs","args","shouldRenderSubmenu","notCloseMenuOnItemClick","closeMenuOnClick","disabled","_updateSelectedItemOnClick","$prevSubmenu","canceled","$curSubmenu","splice","_stopAnimate","_","_renderContentImpl","_initActions","value","_invalidate","previousValue","showing","_hide","jQEvent","promise","reject","_positionContextMenu","_renderContextMenuOverlay","_widgetClass","_renderFocusState","_attachHoverEvents","_attachClickEvent","getRootNodes","_setAriaAttributes","_overlayContentId","setAria","id","role","_getContextMenuPosition","isInitialPosition","_isInitialOptionValue","positioningAction","preventDefault","lastPosition","_cleanAriaAttributes","toggle"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/context_menu/ui.context_menu.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../../core/renderer\";\r\nimport domAdapter from \"../../core/dom_adapter\";\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nimport Guid from \"../../core/guid\";\r\nimport registerComponent from \"../../core/component_registrator\";\r\nimport {\r\n    noop\r\n} from \"../../core/utils/common\";\r\nimport {\r\n    isObject,\r\n    isRenderer,\r\n    isWindow,\r\n    isFunction,\r\n    isPlainObject,\r\n    isDefined\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    contains\r\n} from \"../../core/utils/dom\";\r\nimport {\r\n    getPublicElement\r\n} from \"../../core/element\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport {\r\n    inArray\r\n} from \"../../core/utils/array\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    hasWindow\r\n} from \"../../core/utils/window\";\r\nimport fx from \"../../animation/fx\";\r\nimport animationPosition from \"../../animation/position\";\r\nimport devices from \"../../core/devices\";\r\nimport {\r\n    addNamespace\r\n} from \"../../events/utils/index\";\r\nimport Overlay from \"../overlay\";\r\nimport MenuBase from \"./ui.menu_base\";\r\nimport {\r\n    Deferred\r\n} from \"../../core/utils/deferred\";\r\nvar DX_MENU_CLASS = \"dx-menu\";\r\nvar DX_MENU_ITEM_CLASS = DX_MENU_CLASS + \"-item\";\r\nvar DX_MENU_ITEM_EXPANDED_CLASS = DX_MENU_ITEM_CLASS + \"-expanded\";\r\nvar DX_MENU_PHONE_CLASS = \"dx-menu-phone-overlay\";\r\nvar DX_MENU_ITEMS_CONTAINER_CLASS = DX_MENU_CLASS + \"-items-container\";\r\nvar DX_MENU_ITEM_WRAPPER_CLASS = DX_MENU_ITEM_CLASS + \"-wrapper\";\r\nvar DX_SUBMENU_CLASS = \"dx-submenu\";\r\nvar DX_CONTEXT_MENU_CLASS = \"dx-context-menu\";\r\nvar DX_HAS_CONTEXT_MENU_CLASS = \"dx-has-context-menu\";\r\nvar DX_STATE_DISABLED_CLASS = \"dx-state-disabled\";\r\nvar DX_STATE_FOCUSED_CLASS = \"dx-state-focused\";\r\nvar DX_STATE_HOVER_CLASS = \"dx-state-hover\";\r\nvar FOCUS_UP = \"up\";\r\nvar FOCUS_DOWN = \"down\";\r\nvar FOCUS_LEFT = \"left\";\r\nvar FOCUS_RIGHT = \"right\";\r\nvar FOCUS_FIRST = \"first\";\r\nvar FOCUS_LAST = \"last\";\r\nvar ACTIONS = [\"onShowing\", \"onShown\", \"onSubmenuCreated\", \"onHiding\", \"onHidden\", \"onPositioning\", \"onLeftFirstItem\", \"onLeftLastItem\", \"onCloseRootSubmenu\", \"onExpandLastSubmenu\"];\r\nvar LOCAL_SUBMENU_DIRECTIONS = [FOCUS_UP, FOCUS_DOWN, FOCUS_FIRST, FOCUS_LAST];\r\nvar DEFAULT_SHOW_EVENT = \"dxcontextmenu\";\r\nclass ContextMenu extends MenuBase {\r\n    getShowEvent(showEventOption) {\r\n        var result = null;\r\n        if (isObject(showEventOption)) {\r\n            if (null !== showEventOption.name) {\r\n                result = showEventOption.name || DEFAULT_SHOW_EVENT\r\n            }\r\n        } else {\r\n            result = showEventOption\r\n        }\r\n        return result\r\n    }\r\n    getShowDelay(showEventOption) {\r\n        return isObject(showEventOption) && showEventOption.delay\r\n    }\r\n    _getDefaultOptions() {\r\n        return extend(super._getDefaultOptions(), {\r\n            showEvent: DEFAULT_SHOW_EVENT,\r\n            closeOnOutsideClick: true,\r\n            position: {\r\n                at: \"top left\",\r\n                my: \"top left\"\r\n            },\r\n            onShowing: null,\r\n            onShown: null,\r\n            onSubmenuCreated: null,\r\n            onHiding: null,\r\n            onHidden: null,\r\n            onPositioning: null,\r\n            submenuDirection: \"auto\",\r\n            visible: false,\r\n            target: void 0,\r\n            onLeftFirstItem: null,\r\n            onLeftLastItem: null,\r\n            onCloseRootSubmenu: null,\r\n            onExpandLastSubmenu: null\r\n        })\r\n    }\r\n    _defaultOptionsRules() {\r\n        return super._defaultOptionsRules().concat([{\r\n            device: () => !hasWindow(),\r\n            options: {\r\n                animation: null\r\n            }\r\n        }])\r\n    }\r\n    _initActions() {\r\n        this._actions = {};\r\n        each(ACTIONS, (index, action) => {\r\n            this._actions[action] = this._createActionByOption(action) || noop\r\n        })\r\n    }\r\n    _setOptionsByReference() {\r\n        super._setOptionsByReference();\r\n        extend(this._optionsByReference, {\r\n            animation: true,\r\n            selectedItem: true\r\n        })\r\n    }\r\n    _focusInHandler() {}\r\n    _itemContainer() {\r\n        return this._overlay ? this._overlay.$content() : $()\r\n    }\r\n    _eventBindingTarget() {\r\n        return this._itemContainer()\r\n    }\r\n    itemsContainer() {\r\n        return this._overlay ? this._overlay.$content() : void 0\r\n    }\r\n    _supportedKeys() {\r\n        return extend(super._supportedKeys(), {\r\n            space: () => {\r\n                var $item = $(this.option(\"focusedElement\"));\r\n                this.hide();\r\n                if (!$item.length || !this._isSelectionEnabled()) {\r\n                    return\r\n                }\r\n                this.selectItem($item[0])\r\n            },\r\n            escape: this.hide\r\n        })\r\n    }\r\n    _getActiveItem() {\r\n        var $availableItems = this._getAvailableItems();\r\n        var $focusedItem = $availableItems.filter(\".\".concat(DX_STATE_FOCUSED_CLASS));\r\n        var $hoveredItem = $availableItems.filter(\".\".concat(DX_STATE_HOVER_CLASS));\r\n        var $hoveredItemContainer = $hoveredItem.closest(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS));\r\n        if ($hoveredItemContainer.find(\".\".concat(DX_MENU_ITEM_CLASS)).index($focusedItem) >= 0) {\r\n            return $focusedItem\r\n        }\r\n        if ($hoveredItem.length) {\r\n            return $hoveredItem\r\n        }\r\n        return super._getActiveItem()\r\n    }\r\n    _moveFocus(location) {\r\n        var $items = this._getItemsByLocation(location);\r\n        var $oldTarget = this._getActiveItem(true);\r\n        var $hoveredItem = this.itemsContainer().find(\".\".concat(DX_STATE_HOVER_CLASS));\r\n        var $focusedItem = $(this.option(\"focusedElement\"));\r\n        var $activeItemHighlighted = !!($focusedItem.length || $hoveredItem.length);\r\n        var $newTarget;\r\n        switch (location) {\r\n            case FOCUS_UP:\r\n                $newTarget = $activeItemHighlighted ? this._prevItem($items) : $oldTarget;\r\n                this._setFocusedElement($newTarget);\r\n                if ($oldTarget.is($items.first())) {\r\n                    this._actions.onLeftFirstItem($oldTarget)\r\n                }\r\n                break;\r\n            case FOCUS_DOWN:\r\n                $newTarget = $activeItemHighlighted ? this._nextItem($items) : $oldTarget;\r\n                this._setFocusedElement($newTarget);\r\n                if ($oldTarget.is($items.last())) {\r\n                    this._actions.onLeftLastItem($oldTarget)\r\n                }\r\n                break;\r\n            case FOCUS_RIGHT:\r\n                $newTarget = this.option(\"rtlEnabled\") ? this._hideSubmenuHandler() : this._expandSubmenuHandler($items, location);\r\n                this._setFocusedElement($newTarget);\r\n                break;\r\n            case FOCUS_LEFT:\r\n                $newTarget = this.option(\"rtlEnabled\") ? this._expandSubmenuHandler($items, location) : this._hideSubmenuHandler();\r\n                this._setFocusedElement($newTarget);\r\n                break;\r\n            case FOCUS_FIRST:\r\n                $newTarget = $items.first();\r\n                this._setFocusedElement($newTarget);\r\n                break;\r\n            case FOCUS_LAST:\r\n                $newTarget = $items.last();\r\n                this._setFocusedElement($newTarget);\r\n                break;\r\n            default:\r\n                return super._moveFocus(location)\r\n        }\r\n    }\r\n    _setFocusedElement($element) {\r\n        if ($element && 0 !== $element.length) {\r\n            this.option(\"focusedElement\", getPublicElement($element))\r\n        }\r\n    }\r\n    _getItemsByLocation(location) {\r\n        var $activeItem = this._getActiveItem(true);\r\n        var $items;\r\n        if (inArray(location, LOCAL_SUBMENU_DIRECTIONS) >= 0) {\r\n            $items = $activeItem.closest(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS)).children().children()\r\n        }\r\n        $items = this._getAvailableItems($items);\r\n        return $items\r\n    }\r\n    _getAriaTarget() {\r\n        return this.$element()\r\n    }\r\n    _refreshActiveDescendant() {\r\n        if (isDefined(this._overlay)) {\r\n            var $target = this._overlay.$content();\r\n            super._refreshActiveDescendant($target)\r\n        }\r\n    }\r\n    _hideSubmenuHandler() {\r\n        var $curItem = this._getActiveItem(true);\r\n        var $parentItem = $curItem.parents(\".\".concat(DX_MENU_ITEM_EXPANDED_CLASS)).first();\r\n        if ($parentItem.length) {\r\n            this._hideSubmenusOnSameLevel($parentItem);\r\n            this._hideSubmenu($curItem.closest(\".\".concat(DX_SUBMENU_CLASS)));\r\n            return $parentItem\r\n        }\r\n        this._actions.onCloseRootSubmenu($curItem);\r\n        return $curItem\r\n    }\r\n    _expandSubmenuHandler($items, location) {\r\n        var $curItem = this._getActiveItem(true);\r\n        var itemData = this._getItemData($curItem);\r\n        var node = this._dataAdapter.getNodeByItem(itemData);\r\n        var isItemHasSubmenu = this._hasSubmenu(node);\r\n        var $submenu = $curItem.children(\".\".concat(DX_SUBMENU_CLASS));\r\n        if (isItemHasSubmenu && !$curItem.hasClass(DX_STATE_DISABLED_CLASS)) {\r\n            if (!$submenu.length || \"hidden\" === $submenu.css(\"visibility\")) {\r\n                this._showSubmenu($curItem)\r\n            }\r\n            return this._nextItem(this._getItemsByLocation(location))\r\n        }\r\n        this._actions.onExpandLastSubmenu($curItem);\r\n        return\r\n    }\r\n    _clean() {\r\n        if (this._overlay) {\r\n            this._overlay.$element().remove();\r\n            this._overlay = null\r\n        }\r\n        this._detachShowContextMenuEvents(this._getTarget());\r\n        super._clean()\r\n    }\r\n    _initMarkup() {\r\n        this.$element().addClass(DX_HAS_CONTEXT_MENU_CLASS);\r\n        super._initMarkup()\r\n    }\r\n    _render() {\r\n        super._render();\r\n        this._renderVisibility(this.option(\"visible\"));\r\n        this._addWidgetClass()\r\n    }\r\n    _renderContentImpl() {\r\n        this._detachShowContextMenuEvents(this._getTarget());\r\n        this._attachShowContextMenuEvents()\r\n    }\r\n    _attachKeyboardEvents() {\r\n        !this._keyboardListenerId && this._focusTarget().length && super._attachKeyboardEvents()\r\n    }\r\n    _renderContextMenuOverlay() {\r\n        if (this._overlay) {\r\n            return\r\n        }\r\n        var overlayOptions = this._getOverlayOptions();\r\n        this._overlay = this._createComponent($(\"<div>\").appendTo(this._$element), Overlay, overlayOptions);\r\n        var $overlayContent = this._overlay.$content();\r\n        $overlayContent.addClass(DX_CONTEXT_MENU_CLASS);\r\n        this._addCustomCssClass($overlayContent);\r\n        this._addPlatformDependentClass($overlayContent);\r\n        this._attachContextMenuEvent()\r\n    }\r\n    _itemContextMenuHandler(e) {\r\n        super._itemContextMenuHandler(e);\r\n        e.stopPropagation()\r\n    }\r\n    _addPlatformDependentClass($element) {\r\n        if (devices.current().phone) {\r\n            $element.addClass(DX_MENU_PHONE_CLASS)\r\n        }\r\n    }\r\n    _detachShowContextMenuEvents(target) {\r\n        var showEvent = this.getShowEvent(this.option(\"showEvent\"));\r\n        if (!showEvent) {\r\n            return\r\n        }\r\n        var eventName = addNamespace(showEvent, this.NAME);\r\n        if (this._showContextMenuEventHandler) {\r\n            eventsEngine.off(domAdapter.getDocument(), eventName, target, this._showContextMenuEventHandler)\r\n        } else {\r\n            eventsEngine.off($(target), eventName)\r\n        }\r\n    }\r\n    _attachShowContextMenuEvents() {\r\n        var target = this._getTarget();\r\n        var showEvent = this.getShowEvent(this.option(\"showEvent\"));\r\n        if (!showEvent) {\r\n            return\r\n        }\r\n        var eventName = addNamespace(showEvent, this.NAME);\r\n        var contextMenuAction = this._createAction(e => {\r\n            var delay = this.getShowDelay(this.option(\"showEvent\"));\r\n            if (delay) {\r\n                setTimeout(() => this._show(e.event), delay)\r\n            } else {\r\n                this._show(e.event)\r\n            }\r\n        }, {\r\n            validatingTargetName: \"target\"\r\n        });\r\n        var handler = e => contextMenuAction({\r\n            event: e,\r\n            target: $(e.currentTarget)\r\n        });\r\n        contextMenuAction = this._createAction(contextMenuAction);\r\n        if (isRenderer(target) || target.nodeType || isWindow(target)) {\r\n            this._showContextMenuEventHandler = void 0;\r\n            eventsEngine.on(target, eventName, handler)\r\n        } else {\r\n            this._showContextMenuEventHandler = handler;\r\n            eventsEngine.on(domAdapter.getDocument(), eventName, target, this._showContextMenuEventHandler)\r\n        }\r\n    }\r\n    _hoverEndHandler(e) {\r\n        super._hoverEndHandler(e);\r\n        e.stopPropagation()\r\n    }\r\n    _renderDimensions() {}\r\n    _renderContainer($wrapper, submenuContainer) {\r\n        var $holder = submenuContainer || this._itemContainer();\r\n        $wrapper = $(\"<div>\");\r\n        $wrapper.appendTo($holder).addClass(DX_SUBMENU_CLASS).css(\"visibility\", submenuContainer ? \"hidden\" : \"visible\");\r\n        var $itemsContainer = super._renderContainer($wrapper);\r\n        if (submenuContainer) {\r\n            return $itemsContainer\r\n        }\r\n        if (this.option(\"width\")) {\r\n            return $itemsContainer.css(\"minWidth\", this.option(\"width\"))\r\n        }\r\n        if (this.option(\"height\")) {\r\n            return $itemsContainer.css(\"minHeight\", this.option(\"height\"))\r\n        }\r\n        return $itemsContainer\r\n    }\r\n    _renderSubmenuItems(node, $itemFrame) {\r\n        this._renderItems(this._getChildNodes(node), $itemFrame);\r\n        this._actions.onSubmenuCreated({\r\n            itemElement: getPublicElement($itemFrame),\r\n            itemData: node.internalFields.item,\r\n            submenuElement: getPublicElement($itemFrame.children(\".\".concat(DX_SUBMENU_CLASS)))\r\n        })\r\n    }\r\n    _getOverlayOptions() {\r\n        var position = this.option(\"position\");\r\n        var overlayOptions = {\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            animation: this.option(\"animation\"),\r\n            innerOverlay: true,\r\n            closeOnOutsideClick: this._closeOnOutsideClickHandler.bind(this),\r\n            propagateOutsideClick: true,\r\n            closeOnTargetScroll: true,\r\n            deferRendering: false,\r\n            position: {\r\n                at: position.at,\r\n                my: position.my,\r\n                of: this._getTarget(),\r\n                collision: \"flipfit\"\r\n            },\r\n            shading: false,\r\n            showTitle: false,\r\n            height: \"auto\",\r\n            width: \"auto\",\r\n            onShown: this._overlayShownActionHandler.bind(this),\r\n            onHiding: this._overlayHidingActionHandler.bind(this),\r\n            onHidden: this._overlayHiddenActionHandler.bind(this)\r\n        };\r\n        return overlayOptions\r\n    }\r\n    _overlayShownActionHandler(arg) {\r\n        this._actions.onShown(arg)\r\n    }\r\n    _overlayHidingActionHandler(arg) {\r\n        this._actions.onHiding(arg);\r\n        if (!arg.cancel) {\r\n            this._hideAllShownSubmenus();\r\n            this._setOptionWithoutOptionChange(\"visible\", false)\r\n        }\r\n    }\r\n    _overlayHiddenActionHandler(arg) {\r\n        this._actions.onHidden(arg)\r\n    }\r\n    _closeOnOutsideClickHandler(e) {\r\n        var closeOnOutsideClick = this.option(\"closeOnOutsideClick\");\r\n        if (isFunction(closeOnOutsideClick)) {\r\n            return closeOnOutsideClick(e)\r\n        }\r\n        if (!closeOnOutsideClick) {\r\n            return false\r\n        }\r\n        if (domAdapter.isDocument(e.target)) {\r\n            return true\r\n        }\r\n        var $activeItemContainer = this._getActiveItemsContainer(e.target);\r\n        var $itemContainers = this._getItemsContainers();\r\n        var $clickedItem = this._searchActiveItem(e.target);\r\n        var $rootItem = this.$element().parents(\".\".concat(DX_MENU_ITEM_CLASS));\r\n        var isRootItemClicked = $clickedItem[0] === $rootItem[0] && $clickedItem.length && $rootItem.length;\r\n        var isInnerOverlayClicked = this._isIncludeOverlay($activeItemContainer, $itemContainers) && $clickedItem.length;\r\n        if (isInnerOverlayClicked || isRootItemClicked) {\r\n            if (\"onClick\" === this._getShowSubmenuMode()) {\r\n                this._hideAllShownChildSubmenus($clickedItem)\r\n            }\r\n            return false\r\n        }\r\n        return true\r\n    }\r\n    _getActiveItemsContainer(target) {\r\n        return $(target).closest(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS))\r\n    }\r\n    _getItemsContainers() {\r\n        return this._overlay.$content().find(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS))\r\n    }\r\n    _searchActiveItem(target) {\r\n        return $(target).closest(\".\".concat(DX_MENU_ITEM_CLASS)).eq(0)\r\n    }\r\n    _isIncludeOverlay($activeOverlay, $allOverlays) {\r\n        var isSame = false;\r\n        each($allOverlays, (index, $overlay) => {\r\n            if ($activeOverlay.is($overlay) && !isSame) {\r\n                isSame = true\r\n            }\r\n        });\r\n        return isSame\r\n    }\r\n    _hideAllShownChildSubmenus($clickedItem) {\r\n        var $submenuElements = $clickedItem.find(\".\".concat(DX_SUBMENU_CLASS));\r\n        var shownSubmenus = extend([], this._shownSubmenus);\r\n        if ($submenuElements.length > 0) {\r\n            each(shownSubmenus, (index, $submenu) => {\r\n                var $context = this._searchActiveItem($submenu.context).parent();\r\n                if ($context.parent().is($clickedItem.parent().parent()) && !$context.is($clickedItem.parent())) {\r\n                    this._hideSubmenu($submenu)\r\n                }\r\n            })\r\n        }\r\n    }\r\n    _showSubmenu($item) {\r\n        var node = this._dataAdapter.getNodeByItem(this._getItemData($item));\r\n        this._hideSubmenusOnSameLevel($item);\r\n        if (!this._hasSubmenu(node)) {\r\n            return\r\n        }\r\n        var $submenu = $item.children(\".\".concat(DX_SUBMENU_CLASS));\r\n        var isSubmenuRendered = $submenu.length;\r\n        super._showSubmenu($item);\r\n        if (!isSubmenuRendered) {\r\n            this._renderSubmenuItems(node, $item)\r\n        }\r\n        if (!this._isSubmenuVisible($submenu)) {\r\n            this._drawSubmenu($item)\r\n        }\r\n    }\r\n    _hideSubmenusOnSameLevel($item) {\r\n        var $expandedItems = $item.parent(\".\".concat(DX_MENU_ITEM_WRAPPER_CLASS)).siblings().find(\".\".concat(DX_MENU_ITEM_EXPANDED_CLASS));\r\n        if ($expandedItems.length) {\r\n            $expandedItems.removeClass(DX_MENU_ITEM_EXPANDED_CLASS);\r\n            this._hideSubmenu($expandedItems.find(\".\".concat(DX_SUBMENU_CLASS)))\r\n        }\r\n    }\r\n    _hideSubmenuGroup($submenu) {\r\n        if (this._isSubmenuVisible($submenu)) {\r\n            this._hideSubmenuCore($submenu)\r\n        }\r\n    }\r\n    _isSubmenuVisible($submenu) {\r\n        return \"visible\" === $submenu.css(\"visibility\")\r\n    }\r\n    _drawSubmenu($itemElement) {\r\n        var animation = this.option(\"animation\") ? this.option(\"animation\").show : {};\r\n        var $submenu = $itemElement.children(\".\".concat(DX_SUBMENU_CLASS));\r\n        var submenuPosition = this._getSubmenuPosition($itemElement);\r\n        if (this._overlay && this._overlay.option(\"visible\")) {\r\n            if (!isDefined(this._shownSubmenus)) {\r\n                this._shownSubmenus = []\r\n            }\r\n            if (inArray($submenu, this._shownSubmenus)) {\r\n                this._shownSubmenus.push($submenu)\r\n            }\r\n            if (animation) {\r\n                fx.stop($submenu)\r\n            }\r\n            animationPosition.setup($submenu, submenuPosition);\r\n            if (animation) {\r\n                if (isPlainObject(animation.to)) {\r\n                    animation.to.position = submenuPosition\r\n                }\r\n                this._animate($submenu, animation)\r\n            }\r\n            $submenu.css(\"visibility\", \"visible\")\r\n        }\r\n    }\r\n    _animate($container, options) {\r\n        fx.animate($container, options)\r\n    }\r\n    _getSubmenuPosition($rootItem) {\r\n        var submenuDirection = this.option(\"submenuDirection\").toLowerCase();\r\n        var $rootItemWrapper = $rootItem.parent(\".\".concat(DX_MENU_ITEM_WRAPPER_CLASS));\r\n        var position = {\r\n            collision: \"flip\",\r\n            of: $rootItemWrapper,\r\n            offset: {\r\n                h: 0,\r\n                v: -1\r\n            }\r\n        };\r\n        switch (submenuDirection) {\r\n            case \"left\":\r\n                position.at = \"left top\";\r\n                position.my = \"right top\";\r\n                break;\r\n            case \"right\":\r\n                position.at = \"right top\";\r\n                position.my = \"left top\";\r\n                break;\r\n            default:\r\n                if (this.option(\"rtlEnabled\")) {\r\n                    position.at = \"left top\";\r\n                    position.my = \"right top\"\r\n                } else {\r\n                    position.at = \"right top\";\r\n                    position.my = \"left top\"\r\n                }\r\n        }\r\n        return position\r\n    }\r\n    _updateSubmenuVisibilityOnClick(actionArgs) {\r\n        if (!actionArgs.args.length) {\r\n            return\r\n        }\r\n        var itemData = actionArgs.args[0].itemData;\r\n        var node = this._dataAdapter.getNodeByItem(itemData);\r\n        if (!node) {\r\n            return\r\n        }\r\n        var $itemElement = $(actionArgs.args[0].itemElement);\r\n        var $submenu = $itemElement.find(\".\".concat(DX_SUBMENU_CLASS));\r\n        var shouldRenderSubmenu = this._hasSubmenu(node) && !$submenu.length;\r\n        if (shouldRenderSubmenu) {\r\n            this._renderSubmenuItems(node, $itemElement);\r\n            $submenu = $itemElement.find(\".\".concat(DX_SUBMENU_CLASS))\r\n        }\r\n        if ($itemElement.context === $submenu.context && \"visible\" === $submenu.css(\"visibility\")) {\r\n            return\r\n        }\r\n        var notCloseMenuOnItemClick = itemData && false === itemData.closeMenuOnClick;\r\n        if (!itemData || itemData.disabled || notCloseMenuOnItemClick) {\r\n            return\r\n        }\r\n        this._updateSelectedItemOnClick(actionArgs);\r\n        if (0 === $submenu.length) {\r\n            var $prevSubmenu = $($itemElement.parents(\".\".concat(DX_SUBMENU_CLASS))[0]);\r\n            this._hideSubmenu($prevSubmenu);\r\n            if (!actionArgs.canceled && this._overlay && this._overlay.option(\"visible\")) {\r\n                this.option(\"visible\", false)\r\n            }\r\n        } else {\r\n            if (this._shownSubmenus && this._shownSubmenus.length > 0) {\r\n                if (this._shownSubmenus[0].is($submenu)) {\r\n                    this._hideSubmenu($submenu)\r\n                }\r\n            }\r\n            this._showSubmenu($itemElement)\r\n        }\r\n    }\r\n    _hideSubmenu($curSubmenu) {\r\n        var shownSubmenus = extend([], this._shownSubmenus);\r\n        each(shownSubmenus, (index, $submenu) => {\r\n            if ($curSubmenu.is($submenu) || contains($curSubmenu[0], $submenu[0])) {\r\n                $submenu.parent().removeClass(DX_MENU_ITEM_EXPANDED_CLASS);\r\n                this._hideSubmenuCore($submenu)\r\n            }\r\n        })\r\n    }\r\n    _hideSubmenuCore($submenu) {\r\n        var index = inArray($submenu, this._shownSubmenus);\r\n        var animation = this.option(\"animation\") ? this.option(\"animation\").hide : null;\r\n        if (index >= 0) {\r\n            this._shownSubmenus.splice(index, 1)\r\n        }\r\n        this._stopAnimate($submenu);\r\n        animation && this._animate($submenu, animation);\r\n        $submenu.css(\"visibility\", \"hidden\")\r\n    }\r\n    _stopAnimate($container) {\r\n        fx.stop($container, true)\r\n    }\r\n    _hideAllShownSubmenus() {\r\n        var shownSubmenus = extend([], this._shownSubmenus);\r\n        var $expandedItems = this._overlay.$content().find(\".\".concat(DX_MENU_ITEM_EXPANDED_CLASS));\r\n        $expandedItems.removeClass(DX_MENU_ITEM_EXPANDED_CLASS);\r\n        each(shownSubmenus, (_, $submenu) => {\r\n            this._hideSubmenu($submenu)\r\n        })\r\n    }\r\n    _visibilityChanged(visible) {\r\n        if (visible) {\r\n            this._renderContentImpl()\r\n        }\r\n    }\r\n    _optionChanged(args) {\r\n        if (inArray(args.name, ACTIONS) > -1) {\r\n            this._initActions();\r\n            return\r\n        }\r\n        switch (args.name) {\r\n            case \"visible\":\r\n                this._renderVisibility(args.value);\r\n                break;\r\n            case \"showEvent\":\r\n            case \"position\":\r\n            case \"submenuDirection\":\r\n                this._invalidate();\r\n                break;\r\n            case \"target\":\r\n                args.previousValue && this._detachShowContextMenuEvents(args.previousValue);\r\n                this._invalidate();\r\n                break;\r\n            case \"closeOnOutsideClick\":\r\n                break;\r\n            default:\r\n                super._optionChanged(args)\r\n        }\r\n    }\r\n    _renderVisibility(showing) {\r\n        return showing ? this._show() : this._hide()\r\n    }\r\n    _toggleVisibility() {}\r\n    _show(event) {\r\n        var args = {\r\n            jQEvent: event\r\n        };\r\n        var promise = (new Deferred).reject().promise();\r\n        this._actions.onShowing(args);\r\n        if (args.cancel) {\r\n            return promise\r\n        }\r\n        var position = this._positionContextMenu(event);\r\n        if (position) {\r\n            if (!this._overlay) {\r\n                this._renderContextMenuOverlay();\r\n                this._overlay.$content().addClass(this._widgetClass());\r\n                this._renderFocusState();\r\n                this._attachHoverEvents();\r\n                this._attachClickEvent();\r\n                this._renderItems(this._dataAdapter.getRootNodes())\r\n            }\r\n            this._setOptionWithoutOptionChange(\"visible\", true);\r\n            this._overlay.option(\"position\", position);\r\n            promise = this._overlay.show();\r\n            event && event.stopPropagation();\r\n            this._setAriaAttributes()\r\n        }\r\n        return promise\r\n    }\r\n    _setAriaAttributes() {\r\n        this._overlayContentId = \"dx-\".concat(new Guid);\r\n        this.setAria(\"owns\", this._overlayContentId);\r\n        this.setAria({\r\n            id: this._overlayContentId,\r\n            role: \"menu\"\r\n        }, this._overlay.$content())\r\n    }\r\n    _cleanAriaAttributes() {\r\n        this._overlay && this.setAria(\"id\", null, this._overlay.$content());\r\n        this.setAria(\"owns\", void 0)\r\n    }\r\n    _getTarget() {\r\n        return this.option(\"target\") || this.option(\"position\").of || $(domAdapter.getDocument())\r\n    }\r\n    _getContextMenuPosition() {\r\n        return extend({}, this.option(\"position\"), {\r\n            of: this._getTarget()\r\n        })\r\n    }\r\n    _positionContextMenu(jQEvent) {\r\n        var position = this._getContextMenuPosition();\r\n        var isInitialPosition = this._isInitialOptionValue(\"position\");\r\n        var positioningAction = this._createActionByOption(\"onPositioning\", actionArgs);\r\n        if (jQEvent && jQEvent.preventDefault && isInitialPosition) {\r\n            position.of = jQEvent\r\n        }\r\n        var actionArgs = {\r\n            position: position,\r\n            event: jQEvent\r\n        };\r\n        positioningAction(actionArgs);\r\n        if (actionArgs.cancel) {\r\n            position = null\r\n        } else if (actionArgs.event) {\r\n            actionArgs.event.cancel = true;\r\n            jQEvent.preventDefault()\r\n        }\r\n        return position\r\n    }\r\n    _refresh() {\r\n        if (!hasWindow()) {\r\n            super._refresh()\r\n        } else if (this._overlay) {\r\n            var lastPosition = this._overlay.option(\"position\");\r\n            super._refresh();\r\n            this._overlay && this._overlay.option(\"position\", lastPosition)\r\n        } else {\r\n            super._refresh()\r\n        }\r\n    }\r\n    _hide() {\r\n        var promise;\r\n        if (this._overlay) {\r\n            promise = this._overlay.hide();\r\n            this._setOptionWithoutOptionChange(\"visible\", false)\r\n        }\r\n        this._cleanAriaAttributes();\r\n        this.option(\"focusedElement\", null);\r\n        return promise || (new Deferred).reject().promise()\r\n    }\r\n    toggle(showing) {\r\n        var visible = this.option(\"visible\");\r\n        showing = void 0 === showing ? !visible : showing;\r\n        return this._renderVisibility(showing)\r\n    }\r\n    show() {\r\n        return this.toggle(true)\r\n    }\r\n    hide() {\r\n        return this.toggle(false)\r\n    }\r\n}\r\nregisterComponent(\"dxContextMenu\", ContextMenu);\r\nexport default ContextMenu;\r\n"]},"metadata":{},"sourceType":"module"}