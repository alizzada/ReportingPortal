{"ast":null,"code":"import _classCallCheck from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _get from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/get\";\nimport _getPrototypeOf from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\n/**\r\n * DevExtreme (esm/ui/html_editor/modules/variables.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport Quill from \"devextreme-quill\";\nimport $ from \"../../../core/renderer\";\nimport { getBoundingRect } from \"../../../core/utils/position\";\nimport PopupModule from \"./popup\";\nimport BaseModule from \"./base\";\nimport Variable from \"../formats/variable\";\nimport { extend } from \"../../../core/utils/extend\";\nvar VariableModule = BaseModule;\n\nif (Quill) {\n  var VARIABLE_FORMAT_CLASS = \"dx-variable-format\";\n  var ACTIVE_FORMAT_CLASS = \"dx-format-active\";\n  Quill.register({\n    \"formats/variable\": Variable\n  }, true);\n\n  VariableModule = /*#__PURE__*/function (_PopupModule) {\n    _inherits(VariableModule, _PopupModule);\n\n    var _super = _createSuper(VariableModule);\n\n    function VariableModule(quill, options) {\n      var _this;\n\n      _classCallCheck(this, VariableModule);\n\n      _this = _super.call(this, quill, options);\n      var toolbar = quill.getModule(\"toolbar\");\n\n      if (toolbar) {\n        toolbar.addClickHandler(\"variable\", _this.showPopup.bind(_assertThisInitialized(_this)));\n      }\n\n      quill.keyboard.addBinding({\n        key: \"P\",\n        altKey: true\n      }, _this.showPopup.bind(_assertThisInitialized(_this)));\n\n      _this._popup.on(\"shown\", function (e) {\n        var $ofElement = $(e.component.option(\"position\").of);\n\n        if ($ofElement.hasClass(VARIABLE_FORMAT_CLASS)) {\n          $ofElement.addClass(ACTIVE_FORMAT_CLASS);\n        }\n      });\n\n      return _this;\n    }\n\n    _createClass(VariableModule, [{\n      key: \"_getDefaultOptions\",\n      value: function _getDefaultOptions() {\n        var baseConfig = _get(_getPrototypeOf(VariableModule.prototype), \"_getDefaultOptions\", this).call(this);\n\n        return extend(baseConfig, {\n          escapeChar: \"\"\n        });\n      }\n    }, {\n      key: \"showPopup\",\n      value: function showPopup(event) {\n        var selection = this.quill.getSelection(true);\n        var position = selection ? selection.index : this.quill.getLength();\n        this.savePosition(position);\n\n        this._resetPopupPosition(event, position);\n\n        _get(_getPrototypeOf(VariableModule.prototype), \"showPopup\", this).call(this);\n      }\n    }, {\n      key: \"_resetPopupPosition\",\n      value: function _resetPopupPosition(event, position) {\n        if (event && event.element) {\n          this._popup.option(\"position\", {\n            of: event.element,\n            offset: {\n              h: 0,\n              v: 0\n            },\n            my: \"top center\",\n            at: \"bottom center\",\n            collision: \"fit\"\n          });\n        } else {\n          var mentionBounds = this.quill.getBounds(position);\n          var rootRect = getBoundingRect(this.quill.root);\n\n          this._popup.option(\"position\", {\n            of: this.quill.root,\n            offset: {\n              h: mentionBounds.left,\n              v: mentionBounds.bottom - rootRect.height\n            },\n            my: \"top center\",\n            at: \"bottom left\",\n            collision: \"fit flip\"\n          });\n        }\n      }\n    }, {\n      key: \"insertEmbedContent\",\n      value: function insertEmbedContent(selectionChangedEvent) {\n        var caretPosition = this.getPosition();\n        var selectedItem = selectionChangedEvent.component.option(\"selectedItem\");\n        var variableData = extend({}, {\n          value: selectedItem,\n          escapeChar: this.options.escapeChar\n        });\n        setTimeout(function () {\n          this.quill.insertEmbed(caretPosition, \"variable\", variableData);\n          this.quill.setSelection(caretPosition + 1);\n        }.bind(this));\n      }\n    }]);\n\n    return VariableModule;\n  }(PopupModule);\n}\n\nexport default VariableModule;","map":{"version":3,"sources":["C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/devextreme/esm/ui/html_editor/modules/variables.js"],"names":["Quill","$","getBoundingRect","PopupModule","BaseModule","Variable","extend","VariableModule","VARIABLE_FORMAT_CLASS","ACTIVE_FORMAT_CLASS","register","quill","options","toolbar","getModule","addClickHandler","showPopup","bind","keyboard","addBinding","key","altKey","_popup","on","e","$ofElement","component","option","of","hasClass","addClass","baseConfig","escapeChar","event","selection","getSelection","position","index","getLength","savePosition","_resetPopupPosition","element","offset","h","v","my","at","collision","mentionBounds","getBounds","rootRect","root","left","bottom","height","selectionChangedEvent","caretPosition","getPosition","selectedItem","variableData","value","setTimeout","insertEmbed","setSelection"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/html_editor/modules/variables.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport Quill from \"devextreme-quill\";\r\nimport $ from \"../../../core/renderer\";\r\nimport {\r\n    getBoundingRect\r\n} from \"../../../core/utils/position\";\r\nimport PopupModule from \"./popup\";\r\nimport BaseModule from \"./base\";\r\nimport Variable from \"../formats/variable\";\r\nimport {\r\n    extend\r\n} from \"../../../core/utils/extend\";\r\nvar VariableModule = BaseModule;\r\nif (Quill) {\r\n    var VARIABLE_FORMAT_CLASS = \"dx-variable-format\";\r\n    var ACTIVE_FORMAT_CLASS = \"dx-format-active\";\r\n    Quill.register({\r\n        \"formats/variable\": Variable\r\n    }, true);\r\n    VariableModule = class extends PopupModule {\r\n        _getDefaultOptions() {\r\n            var baseConfig = super._getDefaultOptions();\r\n            return extend(baseConfig, {\r\n                escapeChar: \"\"\r\n            })\r\n        }\r\n        constructor(quill, options) {\r\n            super(quill, options);\r\n            var toolbar = quill.getModule(\"toolbar\");\r\n            if (toolbar) {\r\n                toolbar.addClickHandler(\"variable\", this.showPopup.bind(this))\r\n            }\r\n            quill.keyboard.addBinding({\r\n                key: \"P\",\r\n                altKey: true\r\n            }, this.showPopup.bind(this));\r\n            this._popup.on(\"shown\", e => {\r\n                var $ofElement = $(e.component.option(\"position\").of);\r\n                if ($ofElement.hasClass(VARIABLE_FORMAT_CLASS)) {\r\n                    $ofElement.addClass(ACTIVE_FORMAT_CLASS)\r\n                }\r\n            })\r\n        }\r\n        showPopup(event) {\r\n            var selection = this.quill.getSelection(true);\r\n            var position = selection ? selection.index : this.quill.getLength();\r\n            this.savePosition(position);\r\n            this._resetPopupPosition(event, position);\r\n            super.showPopup()\r\n        }\r\n        _resetPopupPosition(event, position) {\r\n            if (event && event.element) {\r\n                this._popup.option(\"position\", {\r\n                    of: event.element,\r\n                    offset: {\r\n                        h: 0,\r\n                        v: 0\r\n                    },\r\n                    my: \"top center\",\r\n                    at: \"bottom center\",\r\n                    collision: \"fit\"\r\n                })\r\n            } else {\r\n                var mentionBounds = this.quill.getBounds(position);\r\n                var rootRect = getBoundingRect(this.quill.root);\r\n                this._popup.option(\"position\", {\r\n                    of: this.quill.root,\r\n                    offset: {\r\n                        h: mentionBounds.left,\r\n                        v: mentionBounds.bottom - rootRect.height\r\n                    },\r\n                    my: \"top center\",\r\n                    at: \"bottom left\",\r\n                    collision: \"fit flip\"\r\n                })\r\n            }\r\n        }\r\n        insertEmbedContent(selectionChangedEvent) {\r\n            var caretPosition = this.getPosition();\r\n            var selectedItem = selectionChangedEvent.component.option(\"selectedItem\");\r\n            var variableData = extend({}, {\r\n                value: selectedItem,\r\n                escapeChar: this.options.escapeChar\r\n            });\r\n            setTimeout(function() {\r\n                this.quill.insertEmbed(caretPosition, \"variable\", variableData);\r\n                this.quill.setSelection(caretPosition + 1)\r\n            }.bind(this))\r\n        }\r\n    }\r\n}\r\nexport default VariableModule;\r\n"]},"metadata":{},"sourceType":"module"}