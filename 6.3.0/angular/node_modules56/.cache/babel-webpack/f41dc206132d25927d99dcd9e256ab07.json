{"ast":null,"code":"/*!\n * DevExpress Diagram (dx-diagram)\n * Version: 2.1.15\n * Build date: Thu May 13 2021\n * \n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\n * Read about DevExpress licensing here: https://www.devexpress.com/Support/EULAs\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n  if (typeof exports === 'object' && typeof module === 'object') module.exports = factory();else if (typeof define === 'function' && define.amd) define([], factory);else if (typeof exports === 'object') exports[\"diagram\"] = factory();else root[\"DevExpress\"] = root[\"DevExpress\"] || {}, root[\"DevExpress\"][\"diagram\"] = factory();\n})(this, function () {\n  return (\n    /******/\n    function (modules) {\n      // webpackBootstrap\n\n      /******/\n      // The module cache\n\n      /******/\n      var installedModules = {};\n      /******/\n\n      /******/\n      // The require function\n\n      /******/\n\n      function __webpack_require__(moduleId) {\n        /******/\n\n        /******/\n        // Check if module is in cache\n\n        /******/\n        if (installedModules[moduleId]) {\n          /******/\n          return installedModules[moduleId].exports;\n          /******/\n        }\n        /******/\n        // Create a new module (and put it into the cache)\n\n        /******/\n\n\n        var module = installedModules[moduleId] = {\n          /******/\n          i: moduleId,\n\n          /******/\n          l: false,\n\n          /******/\n          exports: {}\n          /******/\n\n        };\n        /******/\n\n        /******/\n        // Execute the module function\n\n        /******/\n\n        modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n        /******/\n\n        /******/\n        // Flag the module as loaded\n\n        /******/\n\n        module.l = true;\n        /******/\n\n        /******/\n        // Return the exports of the module\n\n        /******/\n\n        return module.exports;\n        /******/\n      }\n      /******/\n\n      /******/\n\n      /******/\n      // expose the modules object (__webpack_modules__)\n\n      /******/\n\n\n      __webpack_require__.m = modules;\n      /******/\n\n      /******/\n      // expose the module cache\n\n      /******/\n\n      __webpack_require__.c = installedModules;\n      /******/\n\n      /******/\n      // define getter function for harmony exports\n\n      /******/\n\n      __webpack_require__.d = function (exports, name, getter) {\n        /******/\n        if (!__webpack_require__.o(exports, name)) {\n          /******/\n          Object.defineProperty(exports, name, {\n            enumerable: true,\n            get: getter\n          });\n          /******/\n        }\n        /******/\n\n      };\n      /******/\n\n      /******/\n      // define __esModule on exports\n\n      /******/\n\n\n      __webpack_require__.r = function (exports) {\n        /******/\n        if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n          /******/\n          Object.defineProperty(exports, Symbol.toStringTag, {\n            value: 'Module'\n          });\n          /******/\n        }\n        /******/\n\n\n        Object.defineProperty(exports, '__esModule', {\n          value: true\n        });\n        /******/\n      };\n      /******/\n\n      /******/\n      // create a fake namespace object\n\n      /******/\n      // mode & 1: value is a module id, require it\n\n      /******/\n      // mode & 2: merge all properties of value into the ns\n\n      /******/\n      // mode & 4: return value when already ns object\n\n      /******/\n      // mode & 8|1: behave like require\n\n      /******/\n\n\n      __webpack_require__.t = function (value, mode) {\n        /******/\n        if (mode & 1) value = __webpack_require__(value);\n        /******/\n\n        if (mode & 8) return value;\n        /******/\n\n        if (mode & 4 && typeof value === 'object' && value && value.__esModule) return value;\n        /******/\n\n        var ns = Object.create(null);\n        /******/\n\n        __webpack_require__.r(ns);\n        /******/\n\n\n        Object.defineProperty(ns, 'default', {\n          enumerable: true,\n          value: value\n        });\n        /******/\n\n        if (mode & 2 && typeof value != 'string') for (var key in value) {\n          __webpack_require__.d(ns, key, function (key) {\n            return value[key];\n          }.bind(null, key));\n        }\n        /******/\n\n        return ns;\n        /******/\n      };\n      /******/\n\n      /******/\n      // getDefaultExport function for compatibility with non-harmony modules\n\n      /******/\n\n\n      __webpack_require__.n = function (module) {\n        /******/\n        var getter = module && module.__esModule ?\n        /******/\n        function getDefault() {\n          return module['default'];\n        } :\n        /******/\n        function getModuleExports() {\n          return module;\n        };\n        /******/\n\n        __webpack_require__.d(getter, 'a', getter);\n        /******/\n\n\n        return getter;\n        /******/\n      };\n      /******/\n\n      /******/\n      // Object.prototype.hasOwnProperty.call\n\n      /******/\n\n\n      __webpack_require__.o = function (object, property) {\n        return Object.prototype.hasOwnProperty.call(object, property);\n      };\n      /******/\n\n      /******/\n      // __webpack_public_path__\n\n      /******/\n\n\n      __webpack_require__.p = \"\";\n      /******/\n\n      /******/\n\n      /******/\n      // Load entry module and return exports\n\n      /******/\n\n      return __webpack_require__(__webpack_require__.s = 106);\n      /******/\n    }(\n    /************************************************************************/\n\n    /******/\n    [\n    /* 0 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ShapeType = exports.ShapeTypes = exports.ShapeCategories = void 0;\n\n      var ShapeCategories =\n      /** @class */\n      function () {\n        function ShapeCategories() {}\n\n        ShapeCategories.General = \"general\";\n        ShapeCategories.Flowchart = \"flowchart\";\n        ShapeCategories.OrgChart = \"orgChart\";\n        ShapeCategories.Containers = \"containers\";\n        ShapeCategories.Custom = \"custom\";\n        return ShapeCategories;\n      }();\n\n      exports.ShapeCategories = ShapeCategories;\n\n      var ShapeTypes =\n      /** @class */\n      function () {\n        function ShapeTypes() {} // Standard\n\n\n        ShapeTypes.Text = \"text\";\n        ShapeTypes.Rectangle = \"rectangle\";\n        ShapeTypes.Ellipse = \"ellipse\";\n        ShapeTypes.Cross = \"cross\";\n        ShapeTypes.Triangle = \"triangle\";\n        ShapeTypes.Diamond = \"diamond\";\n        ShapeTypes.Heart = \"heart\";\n        ShapeTypes.Pentagon = \"pentagon\";\n        ShapeTypes.Hexagon = \"hexagon\";\n        ShapeTypes.Octagon = \"octagon\";\n        ShapeTypes.Star = \"star\";\n        ShapeTypes.ArrowLeft = \"arrowLeft\";\n        ShapeTypes.ArrowUp = \"arrowTop\";\n        ShapeTypes.ArrowRight = \"arrowRight\";\n        ShapeTypes.ArrowDown = \"arrowBottom\";\n        ShapeTypes.ArrowUpDown = \"arrowNorthSouth\";\n        ShapeTypes.ArrowLeftRight = \"arrowEastWest\"; // Flowchart\n\n        ShapeTypes.Process = \"process\";\n        ShapeTypes.Decision = \"decision\";\n        ShapeTypes.Terminator = \"terminator\";\n        ShapeTypes.PredefinedProcess = \"predefinedProcess\";\n        ShapeTypes.Document = \"document\";\n        ShapeTypes.MultipleDocuments = \"multipleDocuments\";\n        ShapeTypes.ManualInput = \"manualInput\";\n        ShapeTypes.Preparation = \"preparation\";\n        ShapeTypes.Data = \"data\";\n        ShapeTypes.Database = \"database\";\n        ShapeTypes.HardDisk = \"hardDisk\";\n        ShapeTypes.InternalStorage = \"internalStorage\";\n        ShapeTypes.PaperTape = \"paperTape\";\n        ShapeTypes.ManualOperation = \"manualOperation\";\n        ShapeTypes.Delay = \"delay\";\n        ShapeTypes.StoredData = \"storedData\";\n        ShapeTypes.Display = \"display\";\n        ShapeTypes.Merge = \"merge\";\n        ShapeTypes.Connector = \"connector\";\n        ShapeTypes.Or = \"or\";\n        ShapeTypes.SummingJunction = \"summingJunction\"; // Containers\n\n        ShapeTypes.Container = \"container\"; // abstract\n\n        ShapeTypes.VerticalContainer = \"verticalContainer\";\n        ShapeTypes.HorizontalContainer = \"horizontalContainer\"; // Shapes with images\n\n        ShapeTypes.Card = \"card\"; // abstract\n\n        ShapeTypes.CardWithImageOnLeft = \"cardWithImageOnLeft\";\n        ShapeTypes.CardWithImageOnTop = \"cardWithImageOnTop\";\n        ShapeTypes.CardWithImageOnRight = \"cardWithImageOnRight\";\n        return ShapeTypes;\n      }();\n\n      exports.ShapeTypes = ShapeTypes;\n      var ShapeType;\n\n      (function (ShapeType) {\n        ShapeType[ShapeType[\"text\"] = 0] = \"text\";\n        ShapeType[ShapeType[\"rectangle\"] = 1] = \"rectangle\";\n        ShapeType[ShapeType[\"ellipse\"] = 2] = \"ellipse\";\n        ShapeType[ShapeType[\"cross\"] = 3] = \"cross\";\n        ShapeType[ShapeType[\"triangle\"] = 4] = \"triangle\";\n        ShapeType[ShapeType[\"diamond\"] = 5] = \"diamond\";\n        ShapeType[ShapeType[\"heart\"] = 6] = \"heart\";\n        ShapeType[ShapeType[\"pentagon\"] = 7] = \"pentagon\";\n        ShapeType[ShapeType[\"hexagon\"] = 8] = \"hexagon\";\n        ShapeType[ShapeType[\"octagon\"] = 9] = \"octagon\";\n        ShapeType[ShapeType[\"star\"] = 10] = \"star\";\n        ShapeType[ShapeType[\"arrowLeft\"] = 11] = \"arrowLeft\";\n        ShapeType[ShapeType[\"arrowTop\"] = 12] = \"arrowTop\";\n        ShapeType[ShapeType[\"arrowRight\"] = 13] = \"arrowRight\";\n        ShapeType[ShapeType[\"arrowBottom\"] = 14] = \"arrowBottom\";\n        ShapeType[ShapeType[\"arrowNorthSouth\"] = 15] = \"arrowNorthSouth\";\n        ShapeType[ShapeType[\"arrowEastWest\"] = 16] = \"arrowEastWest\"; // Flowchart\n\n        ShapeType[ShapeType[\"process\"] = 17] = \"process\";\n        ShapeType[ShapeType[\"decision\"] = 18] = \"decision\";\n        ShapeType[ShapeType[\"terminator\"] = 19] = \"terminator\";\n        ShapeType[ShapeType[\"predefinedProcess\"] = 20] = \"predefinedProcess\";\n        ShapeType[ShapeType[\"document\"] = 21] = \"document\";\n        ShapeType[ShapeType[\"multipleDocuments\"] = 22] = \"multipleDocuments\";\n        ShapeType[ShapeType[\"manualInput\"] = 23] = \"manualInput\";\n        ShapeType[ShapeType[\"preparation\"] = 24] = \"preparation\";\n        ShapeType[ShapeType[\"data\"] = 25] = \"data\";\n        ShapeType[ShapeType[\"database\"] = 26] = \"database\";\n        ShapeType[ShapeType[\"hardDisk\"] = 27] = \"hardDisk\";\n        ShapeType[ShapeType[\"internalStorage\"] = 28] = \"internalStorage\";\n        ShapeType[ShapeType[\"paperTape\"] = 29] = \"paperTape\";\n        ShapeType[ShapeType[\"manualOperation\"] = 30] = \"manualOperation\";\n        ShapeType[ShapeType[\"delay\"] = 31] = \"delay\";\n        ShapeType[ShapeType[\"storedData\"] = 32] = \"storedData\";\n        ShapeType[ShapeType[\"display\"] = 33] = \"display\";\n        ShapeType[ShapeType[\"merge\"] = 34] = \"merge\";\n        ShapeType[ShapeType[\"connector\"] = 35] = \"connector\";\n        ShapeType[ShapeType[\"or\"] = 36] = \"or\";\n        ShapeType[ShapeType[\"summingJunction\"] = 37] = \"summingJunction\"; // Containers\n\n        ShapeType[ShapeType[\"verticalContainer\"] = 38] = \"verticalContainer\";\n        ShapeType[ShapeType[\"horizontalContainer\"] = 39] = \"horizontalContainer\"; // Shapes with images\n\n        ShapeType[ShapeType[\"cardWithImageOnLeft\"] = 40] = \"cardWithImageOnLeft\";\n        ShapeType[ShapeType[\"cardWithImageOnTop\"] = 41] = \"cardWithImageOnTop\";\n        ShapeType[ShapeType[\"cardWithImageOnRight\"] = 42] = \"cardWithImageOnRight\";\n      })(ShapeType = exports.ShapeType || (exports.ShapeType = {}));\n      /***/\n\n    },\n    /* 1 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Point = function () {\n        function Point(x, y) {\n          this.x = x;\n          this.y = y;\n        }\n\n        Point.zero = function () {\n          return new Point(0, 0);\n        };\n\n        Point.fromNumber = function (num) {\n          return new Point(num, num);\n        };\n\n        Point.prototype.isZero = function () {\n          return this.x === 0 && this.y === 0;\n        };\n\n        Point.prototype.toString = function () {\n          return JSON.stringify(this);\n        };\n\n        Point.prototype.copyFrom = function (obj) {\n          this.x = obj.x;\n          this.y = obj.y;\n        };\n\n        Point.prototype.clone = function () {\n          return new Point(this.x, this.y);\n        };\n\n        Point.prototype.equals = function (obj) {\n          return this.x === obj.x && this.y === obj.y;\n        };\n\n        Point.prototype.offset = function (offsetX, offsetY) {\n          this.x += offsetX;\n          this.y += offsetY;\n          return this;\n        };\n\n        Point.prototype.offsetByPoint = function (offset) {\n          this.x += offset.x;\n          this.y += offset.y;\n          return this;\n        };\n\n        Point.prototype.multiply = function (multiplierX, multiplierY) {\n          this.x *= multiplierX;\n          this.y *= multiplierY;\n          return this;\n        };\n\n        Point.prototype.negative = function () {\n          this.x *= -1;\n          this.y *= -1;\n          return this;\n        };\n\n        Point.prototype.applyConverter = function (converter) {\n          this.x = converter(this.x);\n          this.y = converter(this.y);\n          return this;\n        };\n\n        Point.plus = function (a, b) {\n          return new Point(a.x + b.x, a.y + b.y);\n        };\n\n        Point.minus = function (a, b) {\n          return new Point(a.x - b.x, a.y - b.y);\n        };\n\n        Point.xComparer = function (a, b) {\n          return a.x - b.x;\n        };\n\n        Point.yComparer = function (a, b) {\n          return a.y - b.y;\n        };\n\n        Point.equals = function (a, b) {\n          return a.x === b.x && a.y === b.y;\n        };\n\n        return Point;\n      }();\n\n      exports.Point = Point;\n      /***/\n    },\n    /* 2 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Size = function () {\n        function Size(width, height) {\n          this.width = width;\n          this.height = height;\n        }\n\n        Size.empty = function () {\n          return new Size(0, 0);\n        };\n\n        Size.fromNumber = function (num) {\n          return new Size(num, num);\n        };\n\n        Size.initByCommonAction = function (action) {\n          var widthAdp = function widthAdp(s) {\n            return s.width;\n          };\n\n          var heightAdp = function heightAdp(s) {\n            return s.height;\n          };\n\n          return new Size(action(widthAdp, heightAdp), action(heightAdp, widthAdp));\n        };\n\n        Size.prototype.isEmpty = function () {\n          return this.width === 0 && this.height === 0;\n        };\n\n        Size.prototype.toString = function () {\n          return JSON.stringify(this);\n        };\n\n        Size.prototype.nonNegativeSize = function () {\n          if (this.width < 0) this.width = 0;\n          if (this.height < 0) this.height = 0;\n          return this;\n        };\n\n        Size.prototype.offset = function (offsetWidth, offsetHeight) {\n          this.width = this.width + offsetWidth;\n          this.height = this.height + offsetHeight;\n          return this;\n        };\n\n        Size.prototype.multiply = function (multiplierW, multiplierH) {\n          this.width *= multiplierW;\n          this.height *= multiplierH;\n          return this;\n        };\n\n        Size.prototype.equals = function (obj) {\n          return this.width === obj.width && this.height === obj.height;\n        };\n\n        Size.prototype.clone = function () {\n          return new Size(this.width, this.height);\n        };\n\n        Size.prototype.copyFrom = function (obj) {\n          this.width = obj.width;\n          this.height = obj.height;\n        };\n\n        Size.prototype.applyConverter = function (conv) {\n          this.width = conv(this.width);\n          this.height = conv(this.height);\n          return this;\n        };\n\n        Size.equals = function (a, b) {\n          return a.width === b.width && a.height === b.height;\n        };\n\n        return Size;\n      }();\n\n      exports.Size = Size;\n      /***/\n    },\n    /* 3 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ObjectUtils = exports.GeometryUtils = exports.Utils = exports.EventDispatcher = exports.Range = void 0;\n\n      __webpack_require__(174);\n\n      var size_1 = __webpack_require__(2);\n\n      var point_1 = __webpack_require__(1);\n\n      var rectangle_1 = __webpack_require__(13);\n\n      var search_1 = __webpack_require__(40);\n\n      var Range =\n      /** @class */\n      function () {\n        function Range(from, to) {\n          this.from = from;\n          this.to = to !== undefined ? to : from;\n        }\n\n        Object.defineProperty(Range.prototype, \"length\", {\n          get: function get() {\n            return Math.abs(this.to - this.from);\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        Range.prototype.extend = function (range) {\n          this.from = Math.min(range.from, this.from);\n          this.to = Math.max(range.to, this.to);\n        };\n\n        Range.prototype.includes = function (value) {\n          return value >= this.from && value <= this.to;\n        };\n\n        Range.fromLength = function (from, length) {\n          return new Range(from, from + length);\n        };\n\n        return Range;\n      }();\n\n      exports.Range = Range;\n\n      var EventDispatcher =\n      /** @class */\n      function () {\n        function EventDispatcher() {\n          this.listeners = [];\n        }\n\n        EventDispatcher.prototype.add = function (listener) {\n          if (!listener) throw new Error(\"Not Implemented\");\n          if (!this.hasEventListener(listener)) this.listeners.push(listener);\n        };\n\n        EventDispatcher.prototype.remove = function (listener) {\n          for (var i = 0, currentListener = void 0; currentListener = this.listeners[i]; i++) {\n            if (currentListener === listener) {\n              this.listeners.splice(i, 1);\n              break;\n            }\n          }\n        };\n\n        EventDispatcher.prototype.raise = function (funcName) {\n          var args = [];\n\n          for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n          }\n\n          for (var i = 0, listener = void 0; listener = this.listeners[i]; i++) {\n            var func = listener[funcName];\n            func && func.apply(listener, args);\n          }\n        };\n\n        EventDispatcher.prototype.raise1 = function (action) {\n          for (var i = 0, listener = void 0; listener = this.listeners[i]; i++) {\n            action(listener);\n          }\n        };\n\n        EventDispatcher.prototype.hasEventListener = function (listener) {\n          for (var i = 0, l = this.listeners.length; i < l; i++) {\n            if (this.listeners[i] === listener) return true;\n          }\n\n          return false;\n        };\n\n        return EventDispatcher;\n      }();\n\n      exports.EventDispatcher = EventDispatcher;\n\n      var Utils =\n      /** @class */\n      function () {\n        function Utils() {}\n\n        Utils.flatten = function (arr) {\n          return [].concat.apply([], arr);\n        };\n\n        return Utils;\n      }();\n\n      exports.Utils = Utils;\n\n      var GeometryUtils =\n      /** @class */\n      function () {\n        function GeometryUtils() {}\n\n        GeometryUtils.getCommonRectangle = function (rects) {\n          if (!rects.length) return new rectangle_1.Rectangle(0, 0, 0, 0);\n          var minX = Number.MAX_VALUE;\n          var maxX = -Number.MAX_VALUE;\n          var minY = Number.MAX_VALUE;\n          var maxY = -Number.MAX_VALUE;\n          rects.forEach(function (rect) {\n            minX = Math.min(minX, rect.x);\n            maxX = Math.max(maxX, rect.right);\n            minY = Math.min(minY, rect.y);\n            maxY = Math.max(maxY, rect.bottom);\n          });\n          return new rectangle_1.Rectangle(minX, minY, maxX - minX, maxY - minY);\n        };\n\n        GeometryUtils.findFreeSpace = function (rects, size, exact, targetRect) {\n          var xs = [targetRect ? targetRect.x : 0];\n          var ys = [targetRect ? targetRect.y : 0];\n          rects.forEach(function (r) {\n            xs.push(r.x);\n            xs.push(r.right);\n            ys.push(r.y);\n            ys.push(r.bottom);\n          });\n          xs = xs.sort(function (a, b) {\n            return a - b;\n          }).reduce(function (acc, v, index) {\n            return xs[index - 1] !== v && acc.push(v) && acc || acc;\n          }, []); // magic for distinct\n\n          ys = ys.sort(function (a, b) {\n            return a - b;\n          }).reduce(function (acc, v, index) {\n            return ys[index - 1] !== v && acc.push(v) && acc || acc;\n          }, []);\n          var matrix = ys.map(function (y) {\n            return xs.map(function (x, i) {\n              return xs[i + 1] - x;\n            });\n          });\n\n          var _loop_1 = function _loop_1(i, rect) {\n            var xi0 = search_1.SearchUtils.binaryIndexOf(xs, function (a) {\n              return a - rect.x;\n            });\n            var xi1 = search_1.SearchUtils.binaryIndexOf(xs, function (a) {\n              return a - rect.right;\n            });\n            var yi0 = search_1.SearchUtils.binaryIndexOf(ys, function (a) {\n              return a - rect.y;\n            });\n            var yi1 = search_1.SearchUtils.binaryIndexOf(ys, function (a) {\n              return a - rect.bottom;\n            });\n\n            for (var y = yi0; y < yi1; y++) {\n              for (var x = xi0; x < xi1; x++) {\n                matrix[y][x] *= -1;\n              }\n            }\n          };\n\n          for (var i = 0, rect = void 0; rect = rects[i]; i++) {\n            _loop_1(i, rect);\n          }\n\n          for (var yi = 0; yi < ys.length; yi++) {\n            for (var xi = 0; xi < xs.length - 1; xi++) {\n              var checkResult = this.checkRect(matrix, ys, xs, yi, xi, size, exact);\n              if (checkResult > 0) xi = checkResult;else if (checkResult === 0) return new point_1.Point(xs[xi], ys[yi]);\n            }\n          }\n\n          return null;\n        }; // wtf\n\n\n        GeometryUtils.checkRect = function (matrix, ys, xs, yimin, ximin, size, exact) {\n          var height = 0;\n          var width = 0;\n          var ximax = xs.length - 2;\n\n          for (var yi = yimin; yi < ys.length; yi++) {\n            height = ys[yi + 1] - ys[yimin];\n\n            for (var xi = ximin; xi <= ximax; xi++) {\n              if (matrix[yi][xi] < 0) return xi === 0 ? -1 : xi; // move left?\n\n              width = xs[xi + 1] - xs[ximin];\n\n              if (size.width <= width || !exact && xi === xs.length - 2 && size.width / 2 <= width) {\n                if (size.height <= height || !exact && yi === ys.length - 2 && size.height / 2 <= height) return 0;\n                ximax = xi;\n              }\n            }\n          }\n        };\n\n        GeometryUtils.getArrowPoints = function (point, directionPoint, arrowHeight, arrowWidth) {\n          if (point.x === directionPoint.x && point.y === directionPoint.y) return {\n            point1: point.clone(),\n            point2: point.clone(),\n            point3: point.clone()\n          };\n          var catX = directionPoint.x - point.x;\n          var catY = directionPoint.y - point.y;\n          var hypotenuse = Math.sqrt(Math.pow(catX, 2) + Math.pow(catY, 2));\n          var cos = catX / hypotenuse;\n          var sin = catY / hypotenuse;\n          var x1 = point.x + arrowHeight * cos + arrowWidth * sin;\n          var y1 = point.y + arrowHeight * sin - arrowWidth * cos;\n          var x2 = point.x + arrowHeight * cos - arrowWidth * sin;\n          var y2 = point.y + arrowHeight * sin + arrowWidth * cos;\n          var x3 = point.x + arrowHeight * cos;\n          var y3 = point.y + arrowHeight * sin;\n          return {\n            point1: new point_1.Point(x1, y1),\n            point2: new point_1.Point(x2, y2),\n            point3: new point_1.Point(x3, y3)\n          };\n        };\n\n        GeometryUtils.removeUnnecessaryLinePoints = function (points, removeCallback, checkCallback) {\n          if (checkCallback === void 0) {\n            checkCallback = function checkCallback(pt) {\n              return pt !== undefined;\n            };\n          }\n\n          this.removeDuplicatedPoints(points, removeCallback, checkCallback);\n          this.removeOneLinePoints(points, removeCallback, checkCallback);\n          this.removeBackwardPoints(points, removeCallback, checkCallback);\n        };\n\n        GeometryUtils.removeBackwardPoints = function (points, removeCallback, checkCallback) {\n          if (checkCallback === void 0) {\n            checkCallback = function checkCallback(pt) {\n              return pt !== undefined;\n            };\n          }\n\n          var index = 0;\n          var point;\n\n          while (point = points[index]) {\n            if (points.length <= 2) break;\n            var nextPoint = this.getNextPoint(points, index, true, checkCallback);\n            var prevPoint = this.getNextPoint(points, index, false, checkCallback);\n\n            if (prevPoint && nextPoint) {\n              if (point.x === prevPoint.x && point.x === nextPoint.x) if (point.y > prevPoint.y && point.y > nextPoint.y || point.y < prevPoint.y && point.y < nextPoint.y) if (removeCallback(points[index], index)) continue;\n              if (point.y === prevPoint.y && point.y === nextPoint.y) if (point.x > prevPoint.x && point.x > nextPoint.x || point.x < prevPoint.x && point.x < nextPoint.x) if (removeCallback(points[index], index)) continue;\n            }\n\n            index++;\n          }\n        };\n\n        GeometryUtils.removeOneLinePoints = function (points, removeCallback, checkCallback) {\n          if (checkCallback === void 0) {\n            checkCallback = function checkCallback(pt) {\n              return pt !== undefined;\n            };\n          }\n\n          var index = 0;\n          var point;\n\n          while (point = points[index]) {\n            if (points.length <= 2) break;\n            var nextPoint = this.getNextPoint(points, index, true, checkCallback);\n            var prevPoint = this.getNextPoint(points, index, false, checkCallback);\n\n            if (prevPoint && nextPoint) {\n              if (point.x === prevPoint.x && point.x === nextPoint.x || point.y === prevPoint.y && point.y === nextPoint.y) if (removeCallback(points[index], index)) continue;\n              var tg = (nextPoint.y - prevPoint.y) / (nextPoint.x - prevPoint.x);\n              if (nextPoint.y - points[index].y === (nextPoint.x - points[index].x) * tg) if (removeCallback(points[index], index)) continue;\n            }\n\n            index++;\n          }\n        };\n\n        GeometryUtils.removeDuplicatedPoints = function (points, removeCallback, checkCallback) {\n          if (checkCallback === void 0) {\n            checkCallback = function checkCallback(pt) {\n              return pt !== undefined;\n            };\n          }\n\n          var index = 0;\n          var point;\n\n          while (point = points[index]) {\n            if (points.length <= 2) break;\n            var nextPoint = this.getNextPoint(points, index, true, checkCallback);\n            if (nextPoint) if (point.x === nextPoint.x && point.y === nextPoint.y) {\n              var indexToRemove = index + 1;\n              if (indexToRemove === points.length - 1) indexToRemove--;\n              if (removeCallback(points[indexToRemove], indexToRemove)) continue;\n            }\n            index++;\n          }\n        };\n\n        GeometryUtils.getNextPoint = function (points, index, direction, checkCallback) {\n          var result;\n          var newIndex = index + (direction ? 1 : -1);\n\n          while (result = points[newIndex]) {\n            if (checkCallback(result)) return result;\n            newIndex = newIndex + (direction ? 1 : -1);\n          }\n        };\n\n        GeometryUtils.getDistance = function (a, b) {\n          return Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2));\n        };\n\n        GeometryUtils.getPathLength = function (points) {\n          var length = 0;\n          var prevPt;\n          points.forEach(function (pt) {\n            if (prevPt !== undefined) {\n              var lineLength = GeometryUtils.getDistance(pt, prevPt);\n              length += lineLength;\n            }\n\n            prevPt = pt;\n          });\n          return length;\n        };\n\n        GeometryUtils.getPathPointByPosition = function (points, relativePosition) {\n          if (!points.length) throw new Error(\"Invalid points\");\n          if (0 > relativePosition || relativePosition > 1) throw new Error(\"Invalid relative position\");\n          var length = this.getPathLength(points);\n          if (points.length <= 2 && length === 0 || relativePosition === 0) return [points[0], 0];\n          var targetLength = length * relativePosition;\n          var currentLength = 0;\n\n          for (var i = 1; i < points.length; i++) {\n            var lineLength = GeometryUtils.getDistance(points[i], points[i - 1]);\n\n            if (currentLength + lineLength >= targetLength) {\n              var delta = targetLength - currentLength;\n              var cos = (points[i].x - points[i - 1].x) / lineLength;\n              var sin = (points[i].y - points[i - 1].y) / lineLength;\n              return [new point_1.Point(points[i - 1].x + cos * delta, points[i - 1].y + sin * delta), i];\n            }\n\n            currentLength += lineLength;\n          }\n\n          return [points[points.length - 1], points.length - 1];\n        };\n\n        GeometryUtils.getLineAngle = function (beginPoint, endPoint) {\n          return Math.atan2(endPoint.y - beginPoint.y, endPoint.x - beginPoint.x);\n        };\n\n        GeometryUtils.getTriangleBeginAngle = function (beginPoint, endPoint, point) {\n          var lineAngle = this.getLineAngle(beginPoint, endPoint);\n          var beginPointAngle = this.getLineAngle(beginPoint, point);\n          return Math.abs(beginPointAngle - lineAngle);\n        };\n\n        GeometryUtils.getTriangleEndAngle = function (beginPoint, endPoint, point) {\n          var lineAngle = this.getLineAngle(beginPoint, endPoint);\n          var endPointAngle = this.getLineAngle(point, endPoint);\n          return Math.abs(lineAngle - endPointAngle);\n        };\n\n        GeometryUtils.getPathPointByPoint = function (points, point) {\n          if (!points.length) throw new Error(\"Invalid points\");\n          if (points.length === 1) return points[0];\n          var distance = Number.MAX_VALUE;\n          var result;\n\n          for (var i = 1; i < points.length; i++) {\n            var beginPoint = points[i - 1];\n            var endPoint = points[i];\n\n            if (point.equals(beginPoint)) {\n              result = beginPoint.clone();\n              break;\n            }\n\n            if (point.equals(endPoint)) {\n              result = endPoint.clone();\n              break;\n            }\n\n            var beginAngle = this.getTriangleBeginAngle(beginPoint, endPoint, point);\n            var endAngle = this.getTriangleEndAngle(beginPoint, endPoint, point);\n            var beginDistance = GeometryUtils.getDistance(point, beginPoint);\n            var endDistance = GeometryUtils.getDistance(point, endPoint);\n            var orthOffset = beginDistance * Math.sin(beginAngle);\n            var currentDistance = void 0;\n            if (Math.PI / 2 <= beginAngle && beginAngle <= Math.PI * 3 / 2) currentDistance = beginDistance;else if (Math.PI / 2 <= endAngle && endAngle <= Math.PI * 3 / 2) currentDistance = endDistance;else currentDistance = Math.abs(orthOffset);\n\n            if (currentDistance < distance) {\n              distance = currentDistance;\n              if (Math.PI / 2 <= beginAngle && beginAngle <= Math.PI * 3 / 2) result = beginPoint.clone();else if (Math.PI / 2 <= endAngle && endAngle <= Math.PI * 3 / 2) result = endPoint.clone();else {\n                var round = Math.fround || Math.round;\n                var lineAngle = this.getLineAngle(beginPoint, endPoint);\n                var offsetX = round(Math.abs(orthOffset * Math.sin(lineAngle)));\n                var offsetY = round(Math.abs(orthOffset * Math.cos(lineAngle)));\n                var isAbove = point.y - beginPoint.y < round((point.x - beginPoint.x) * Math.tan(lineAngle));\n\n                if (0 <= lineAngle && lineAngle <= Math.PI / 2) {\n                  offsetX *= isAbove ? -1 : 1;\n                  offsetY *= isAbove ? 1 : -1;\n                } else if (Math.PI / 2 <= lineAngle && lineAngle <= Math.PI) {\n                  offsetX *= isAbove ? 1 : -1;\n                  offsetY *= isAbove ? 1 : -1;\n                } else if (0 >= lineAngle && lineAngle >= -Math.PI / 2) {\n                  offsetX *= isAbove ? 1 : -1;\n                  offsetY *= isAbove ? 1 : -1;\n                } else if (-Math.PI / 2 >= lineAngle && lineAngle >= -Math.PI) {\n                  offsetX *= isAbove ? -1 : 1;\n                  offsetY *= isAbove ? 1 : -1;\n                }\n\n                result = point.clone().offset(offsetX, offsetY);\n              }\n            }\n          }\n\n          return result;\n        };\n\n        GeometryUtils.getPathPositionByPoint = function (points, point, maxPositionCount) {\n          if (maxPositionCount === void 0) {\n            maxPositionCount = 100;\n          }\n\n          point = this.getPathPointByPoint(points, point);\n          var length = this.getPathLength(points);\n          var currentLength = 0;\n\n          for (var i = 1; i < points.length; i++) {\n            var beginPoint = points[i - 1];\n            var endPoint = points[i];\n            var lineLength = GeometryUtils.getDistance(endPoint, beginPoint);\n            var angle = Math.atan((endPoint.y - beginPoint.y) / (endPoint.x - beginPoint.x));\n            var round = Math.fround || Math.round;\n\n            if (point.x === endPoint.x && point.x === beginPoint.x || point.y === endPoint.y && point.y === beginPoint.y || round(point.y - beginPoint.y) === round((point.x - beginPoint.x) * Math.tan(angle))) {\n              if (Math.sin(angle) !== 0) currentLength += Math.abs((point.y - beginPoint.y) / Math.sin(angle));else currentLength += Math.abs(point.x - beginPoint.x);\n              return Math.round(currentLength * maxPositionCount / length) / maxPositionCount;\n            }\n\n            currentLength += lineLength;\n          }\n\n          return 1;\n        };\n\n        GeometryUtils.arePointsEqual = function (points1, points2) {\n          var count1 = points1.length;\n          var count2 = points2.length;\n          if (count1 !== count2) return false;\n\n          for (var i = 0; i < count1; i++) {\n            if (!points1[i].equals(points2[i])) return false;\n          }\n\n          return true;\n        };\n\n        GeometryUtils.getMaxRectangleEnscribedInEllipse = function (ellipseSize) {\n          var dx = ellipseSize.width * Math.sqrt(2) / 2;\n          var dy = ellipseSize.height * Math.sqrt(2) / 2;\n          return new size_1.Size(dx, dy);\n        };\n\n        GeometryUtils.getEllipseByEnscribedRectangle = function (rectSize) {\n          return new size_1.Size(2 * rectSize.width / Math.sqrt(2), 2 * rectSize.height / Math.sqrt(2));\n        };\n\n        return GeometryUtils;\n      }();\n\n      exports.GeometryUtils = GeometryUtils;\n\n      var ObjectUtils =\n      /** @class */\n      function () {\n        function ObjectUtils() {}\n\n        ObjectUtils.cloneObject = function (source) {\n          return source && Object.assign({}, source);\n        };\n\n        ObjectUtils.compareObjects = function (obj1, obj2) {\n          if (obj1 === obj2) return true;\n          if (typeof obj1 === \"object\" && typeof obj2 === \"object\") return this.isDeepEqual(obj1, obj2);\n          return false;\n        };\n\n        ObjectUtils.isDeepEqual = function (obj1, obj2) {\n          var props1 = obj1 ? Object.getOwnPropertyNames(obj1) : [];\n          var props2 = obj2 ? Object.getOwnPropertyNames(obj2) : [];\n          if (props1.length !== props2.length) return false;\n\n          for (var i = 0; i < props1.length; i++) {\n            var property = props1[i];\n\n            switch (typeof obj1[property]) {\n              case \"object\":\n                {\n                  if (!this.isDeepEqual(obj1[property], obj2[property])) return false;\n                  break;\n                }\n\n              case \"number\":\n                {\n                  if (!isNaN(obj1[property]) || !isNaN(obj2[property])) if (obj1[property] !== obj2[property]) return false;\n                  break;\n                }\n\n              default:\n                {\n                  if (obj1[property] !== obj2[property]) return false;\n                }\n            }\n          }\n\n          return true;\n        };\n\n        return ObjectUtils;\n      }();\n\n      exports.ObjectUtils = ObjectUtils;\n      /***/\n    },\n    /* 4 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics = function extendStatics(d, b) {\n          _extendStatics = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.PathPrimitiveClosePathCommand = exports.PathPrimitiveArcToCommand = exports.PathPrimitiveQuadraticCurveToCommand = exports.PathPrimitiveCubicCurveToCommand = exports.PathPrimitiveLineToCommand = exports.PathPrimitiveMoveToCommand = exports.PathPrimitiveCommand = exports.PathPrimitive = void 0;\n\n      var RenderHelper_1 = __webpack_require__(15);\n\n      var Primitive_1 = __webpack_require__(24);\n\n      var PrimitiveObject_1 = __webpack_require__(110);\n\n      var PathPrimitive =\n      /** @class */\n      function (_super) {\n        __extends(PathPrimitive, _super);\n\n        function PathPrimitive(commands, style, className, clipPathId, onApplyProperties) {\n          var _this = _super.call(this, style, className, clipPathId, onApplyProperties) || this;\n\n          _this.commands = commands.map(function (command) {\n            command.style = style;\n            return command;\n          });\n          return _this;\n        }\n\n        PathPrimitive.prototype.createMainElement = function () {\n          return document.createElementNS(RenderHelper_1.svgNS, \"path\");\n        };\n\n        PathPrimitive.prototype.applyElementProperties = function (element, measurer) {\n          element.setAttribute(\"d\", this.commands.map(function (c) {\n            return c.toString();\n          }).join(\" \"));\n          this.setPositionCorrectionAttribute(element);\n\n          _super.prototype.applyElementProperties.call(this, element, measurer);\n        };\n\n        return PathPrimitive;\n      }(Primitive_1.SvgPrimitive);\n\n      exports.PathPrimitive = PathPrimitive;\n\n      var PathPrimitiveCommand =\n      /** @class */\n      function (_super) {\n        __extends(PathPrimitiveCommand, _super);\n\n        function PathPrimitiveCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        return PathPrimitiveCommand;\n      }(PrimitiveObject_1.PrimitiveObject);\n\n      exports.PathPrimitiveCommand = PathPrimitiveCommand;\n\n      var PathPrimitiveMoveToCommand =\n      /** @class */\n      function (_super) {\n        __extends(PathPrimitiveMoveToCommand, _super);\n\n        function PathPrimitiveMoveToCommand(x, y) {\n          var _this = _super.call(this) || this;\n\n          _this.x = x;\n          _this.y = y;\n          return _this;\n        }\n\n        PathPrimitiveMoveToCommand.prototype.toString = function () {\n          return \"M \" + this.getUnitVaue(this.x) + \" \" + this.getUnitVaue(this.y);\n        };\n\n        PathPrimitiveMoveToCommand.fromPoint = function (point) {\n          return new PathPrimitiveMoveToCommand(point.x, point.y);\n        };\n\n        return PathPrimitiveMoveToCommand;\n      }(PathPrimitiveCommand);\n\n      exports.PathPrimitiveMoveToCommand = PathPrimitiveMoveToCommand;\n\n      var PathPrimitiveLineToCommand =\n      /** @class */\n      function (_super) {\n        __extends(PathPrimitiveLineToCommand, _super);\n\n        function PathPrimitiveLineToCommand(x, y) {\n          var _this = _super.call(this) || this;\n\n          _this.x = x;\n          _this.y = y;\n          return _this;\n        }\n\n        PathPrimitiveLineToCommand.prototype.toString = function () {\n          return \"L \" + this.getUnitVaue(this.x) + \" \" + this.getUnitVaue(this.y);\n        };\n\n        PathPrimitiveLineToCommand.fromPoint = function (point) {\n          return new PathPrimitiveLineToCommand(point.x, point.y);\n        };\n\n        return PathPrimitiveLineToCommand;\n      }(PathPrimitiveCommand);\n\n      exports.PathPrimitiveLineToCommand = PathPrimitiveLineToCommand;\n\n      var PathPrimitiveCubicCurveToCommand =\n      /** @class */\n      function (_super) {\n        __extends(PathPrimitiveCubicCurveToCommand, _super);\n\n        function PathPrimitiveCubicCurveToCommand(x1, y1, x2, y2, x3, y3) {\n          var _this = _super.call(this) || this;\n\n          _this.x1 = x1;\n          _this.y1 = y1;\n          _this.x2 = x2;\n          _this.y2 = y2;\n          _this.x3 = x3;\n          _this.y3 = y3;\n          return _this;\n        }\n\n        PathPrimitiveCubicCurveToCommand.prototype.toString = function () {\n          return \"C \" + this.getUnitVaue(this.x1) + \" \" + this.getUnitVaue(this.y1) + \",\" + this.getUnitVaue(this.x2) + \" \" + this.getUnitVaue(this.y2) + \",\" + this.getUnitVaue(this.x3) + \" \" + this.getUnitVaue(this.y3);\n        };\n\n        return PathPrimitiveCubicCurveToCommand;\n      }(PathPrimitiveCommand);\n\n      exports.PathPrimitiveCubicCurveToCommand = PathPrimitiveCubicCurveToCommand;\n\n      var PathPrimitiveQuadraticCurveToCommand =\n      /** @class */\n      function (_super) {\n        __extends(PathPrimitiveQuadraticCurveToCommand, _super);\n\n        function PathPrimitiveQuadraticCurveToCommand(x1, y1, x2, y2) {\n          var _this = _super.call(this) || this;\n\n          _this.x1 = x1;\n          _this.y1 = y1;\n          _this.x2 = x2;\n          _this.y2 = y2;\n          return _this;\n        }\n\n        PathPrimitiveQuadraticCurveToCommand.prototype.toString = function () {\n          return \"Q \" + this.getUnitVaue(this.x1) + \" \" + this.getUnitVaue(this.y1) + \",\" + this.getUnitVaue(this.x2) + \" \" + this.getUnitVaue(this.y2);\n        };\n\n        return PathPrimitiveQuadraticCurveToCommand;\n      }(PathPrimitiveCommand);\n\n      exports.PathPrimitiveQuadraticCurveToCommand = PathPrimitiveQuadraticCurveToCommand;\n\n      var PathPrimitiveArcToCommand =\n      /** @class */\n      function (_super) {\n        __extends(PathPrimitiveArcToCommand, _super);\n\n        function PathPrimitiveArcToCommand(rx, ry, xAxisRotation, largeArcFlag, sweepFag, x, y) {\n          var _this = _super.call(this) || this;\n\n          _this.rx = rx;\n          _this.ry = ry;\n          _this.xAxisRotation = xAxisRotation;\n          _this.largeArcFlag = largeArcFlag;\n          _this.sweepFag = sweepFag;\n          _this.x = x;\n          _this.y = y;\n          return _this;\n        }\n\n        PathPrimitiveArcToCommand.prototype.toString = function () {\n          return \"A \" + this.getUnitVaue(this.rx) + \" \" + this.getUnitVaue(this.ry) + \" \" + this.getUnitVaue(this.xAxisRotation) + \" \" + (this.largeArcFlag ? \"1\" : \"0\") + \" \" + (this.sweepFag ? \"1\" : \"0\") + this.getUnitVaue(this.x) + \",\" + this.getUnitVaue(this.y);\n        };\n\n        return PathPrimitiveArcToCommand;\n      }(PathPrimitiveCommand);\n\n      exports.PathPrimitiveArcToCommand = PathPrimitiveArcToCommand;\n\n      var PathPrimitiveClosePathCommand =\n      /** @class */\n      function (_super) {\n        __extends(PathPrimitiveClosePathCommand, _super);\n\n        function PathPrimitiveClosePathCommand() {\n          return _super.call(this) || this;\n        }\n\n        PathPrimitiveClosePathCommand.prototype.toString = function () {\n          return \"z\";\n        };\n\n        return PathPrimitiveClosePathCommand;\n      }(PathPrimitiveCommand);\n\n      exports.PathPrimitiveClosePathCommand = PathPrimitiveClosePathCommand;\n      /***/\n    },\n    /* 5 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ModelUtils = void 0;\n\n      var unit_converter_1 = __webpack_require__(12);\n\n      var point_1 = __webpack_require__(1);\n\n      var rectangle_1 = __webpack_require__(13);\n\n      var size_1 = __webpack_require__(2);\n\n      var vector_1 = __webpack_require__(56);\n\n      var math_1 = __webpack_require__(33);\n\n      var Enums_1 = __webpack_require__(46);\n\n      var AddConnectionHistoryItem_1 = __webpack_require__(47);\n\n      var AddConnectorHistoryItem_1 = __webpack_require__(63);\n\n      var AddConnectorPointHistoryItem_1 = __webpack_require__(188);\n\n      var AddShapeHistoryItem_1 = __webpack_require__(51);\n\n      var ChangeShapeParametersHistoryItem_1 = __webpack_require__(114);\n\n      var DeleteConnectionHistoryItem_1 = __webpack_require__(64);\n\n      var DeleteConnectorHistoryItem_1 = __webpack_require__(115);\n\n      var DeleteConnectorPointHistoryItem_1 = __webpack_require__(189);\n\n      var DeleteShapeHistoryItem_1 = __webpack_require__(116);\n\n      var InsertToContainerHistoryItem_1 = __webpack_require__(190);\n\n      var MoveConnectorPointHistoryItem_1 = __webpack_require__(191);\n\n      var MoveShapeHistoryItem_1 = __webpack_require__(192);\n\n      var RemoveFromContainerHistoryItem_1 = __webpack_require__(193);\n\n      var ResizeShapeHistoryItem_1 = __webpack_require__(117);\n\n      var SetSelectionHistoryItem_1 = __webpack_require__(65);\n\n      var ModelResizeHistoryItem_1 = __webpack_require__(194);\n\n      var UpdatePositionsOnPageResizeHistoryItem_1 = __webpack_require__(195);\n\n      var ChangeConnectorPropertyHistoryItem_1 = __webpack_require__(88);\n\n      var ChangeConnectorTextHistoryItem_1 = __webpack_require__(66);\n\n      var ChangeLockedHistoryItem_1 = __webpack_require__(118);\n\n      var ChangeStyleHistoryItem_1 = __webpack_require__(89);\n\n      var ChangeStyleTextHistoryItem_1 = __webpack_require__(67);\n\n      var Graph_1 = __webpack_require__(68);\n\n      var GraphInfo_1 = __webpack_require__(196);\n\n      var Structures_1 = __webpack_require__(37);\n\n      var Utils_1 = __webpack_require__(3);\n\n      var Connector_1 = __webpack_require__(7);\n\n      var ConnectorProperties_1 = __webpack_require__(31);\n\n      var ConnectorRenderPoint_1 = __webpack_require__(28);\n\n      var ConnectorRenderPointsContext_1 = __webpack_require__(86);\n\n      var Shape_1 = __webpack_require__(14);\n\n      var ModelUtils =\n      /** @class */\n      function () {\n        function ModelUtils() {}\n\n        ModelUtils.setShapePosition = function (history, model, shape, newPosition) {\n          if (!shape.position.equals(newPosition)) history.addAndRedo(new MoveShapeHistoryItem_1.MoveShapeHistoryItem(shape.key, newPosition));\n        };\n\n        ModelUtils.setShapeSize = function (history, model, shape, newPosition, newSize) {\n          if (!shape.size.equals(newSize) || !shape.position.equals(newPosition)) history.addAndRedo(new ResizeShapeHistoryItem_1.ResizeShapeHistoryItem(shape.key, newPosition, newSize));\n        };\n\n        ModelUtils.addConnectorPoint = function (history, connectorKey, pointIndex, position) {\n          history.addAndRedo(new AddConnectorPointHistoryItem_1.AddConnectorPointHistoryItem(connectorKey, pointIndex, position));\n        };\n\n        ModelUtils.deleteConnectorPoint = function (history, connectorKey, index) {\n          history.addAndRedo(new DeleteConnectorPointHistoryItem_1.DeleteConnectorPointHistoryItem(connectorKey, index));\n        };\n\n        ModelUtils.deleteConnectorPoints = function (history, connector) {\n          while (connector.points.length > 2) {\n            this.deleteConnectorPoint(history, connector.key, 1);\n          }\n        };\n\n        ModelUtils.deleteConnectorUnnecessaryPoints = function (history, connector, validateRenderPoints) {\n          if (validateRenderPoints === void 0) {\n            validateRenderPoints = false;\n          }\n\n          var unnecessaryPoints = this.createUnnecessaryPoints(connector.points, connector.skippedRenderPoints);\n          if (Object.keys(unnecessaryPoints).length > 0) history.addAndRedo(new DeleteConnectorPointHistoryItem_1.DeleteConnectorUnnecessaryPointsHistoryItem(connector.key, unnecessaryPoints, validateRenderPoints));\n        };\n\n        ModelUtils.createUnnecessaryPoints = function (points, skippedRenderPoints, predicate) {\n          if (predicate === void 0) {\n            predicate = function predicate(_) {\n              return true;\n            };\n          }\n\n          var result = {};\n          var clonePoints = points.map(function (p) {\n            return p.clone();\n          });\n          Utils_1.GeometryUtils.removeUnnecessaryLinePoints(clonePoints, function (cp) {\n            if (predicate(cp)) {\n              var index = ModelUtils.findFirstPointIndex(points, function (p) {\n                return p.equals(cp);\n              });\n              clonePoints.splice(index, 1);\n              if (result[index] === undefined) result[index] = cp;\n              if (index > 0 && result[index - 1] === undefined && cp.equals(points[index - 1])) result[index - 1] = cp;\n              if (index < points.length - 1 && result[index + 1] === undefined && cp.equals(points[index + 1])) result[index + 1] = cp;\n              return true;\n            }\n          });\n          if (!skippedRenderPoints) return result;\n          skippedRenderPoints.forEach(function (p) {\n            if (predicate(p)) {\n              var pointIndex = p.pointIndex;\n              if (pointIndex >= 0 && result[pointIndex] === undefined) result[pointIndex] = new point_1.Point(p.x, p.y);\n            }\n          });\n          return result;\n        };\n\n        ModelUtils.createNecessaryPoints = function (points, unnecessaryPoints) {\n          var _this = this;\n\n          var result = [];\n          var lastPointIndex = points.length - 1;\n          points.forEach(function (p, index) {\n            if (index === 0 || index === lastPointIndex || _this.isNecessaryPoint(p, index, unnecessaryPoints)) result.push(p.clone());\n          });\n          return result;\n        };\n\n        ModelUtils.createNecessaryRenderPoints = function (points, unnecessaryPoints) {\n          var _this = this;\n\n          var result = [];\n          var lastPointIndex = points.length - 1;\n          points.forEach(function (p, index) {\n            if (index === 0 || index === lastPointIndex || _this.isNecessaryPoint(p, p.pointIndex, unnecessaryPoints)) result.push(p.clone());\n          });\n          return result;\n        };\n\n        ModelUtils.isNecessaryPoint = function (point, pointIndex, unnecessaryPoints) {\n          return unnecessaryPoints[pointIndex] === undefined && !Object.keys(unnecessaryPoints).some(function (key) {\n            return point.equals(unnecessaryPoints[key]);\n          });\n        };\n\n        ModelUtils.validateRenderPointIndexes = function (points, renderPoints, startIndex) {\n          var _this = this;\n\n          var result = renderPoints.map(function (rp, i) {\n            return new ConnectorRenderPoint_1.ConnectorRenderPoint(rp.x, rp.y, i >= startIndex && rp.pointIndex >= 0 ? _this.findFirstPointIndex(points, function (p) {\n              return p.equals(rp);\n            }) : rp.pointIndex, rp.skipped);\n          });\n          result[0].skipped = false;\n          result[result.length - 1].skipped = false;\n          return result;\n        };\n\n        ModelUtils.findFirstPointIndex = function (points, predicate) {\n          if (!points || !predicate) return -1;\n\n          for (var i = 0; i < points.length; i++) {\n            if (predicate(points[i])) return i;\n          }\n\n          return -1;\n        };\n\n        ModelUtils.moveConnectorPoint = function (history, connector, pointIndex, newPosition) {\n          if (!connector.points[pointIndex].equals(newPosition)) history.addAndRedo(new MoveConnectorPointHistoryItem_1.MoveConnectorPointHistoryItem(connector.key, pointIndex, newPosition));\n        };\n\n        ModelUtils.updateConnectorAttachedPoints = function (history, model, connector) {\n          history.beginTransaction();\n          var beginContainer = connector.beginItem && model.findItemCollapsedContainer(connector.beginItem);\n          var beginAttachedToContainer = beginContainer && (!connector.endItem || !model.isContainerItem(beginContainer, connector.endItem));\n          var endContainer = connector.endItem && model.findItemCollapsedContainer(connector.endItem);\n          var endAttachedToContainer = endContainer && (!connector.beginItem || !model.isContainerItem(endContainer, connector.beginItem));\n          if (beginAttachedToContainer) this.updateConnectorBeginPoint(history, connector, beginContainer, endAttachedToContainer && endContainer || connector.endItem, function (index) {\n            return beginContainer.getConnectionPointIndexForItem(connector.beginItem, index);\n          });else this.updateConnectorBeginPoint(history, connector, connector.beginItem, endAttachedToContainer && endContainer || connector.endItem);\n          if (endAttachedToContainer) this.updateConnectorEndPoint(history, connector, endContainer, function (index) {\n            return endContainer.getConnectionPointIndexForItem(connector.beginItem, index);\n          });else this.updateConnectorEndPoint(history, connector, connector.endItem);\n          history.endTransaction();\n        };\n\n        ModelUtils.updateConnectorBeginPoint = function (history, connector, beginItem, endItem, getConnectionPointIndex) {\n          if (beginItem) {\n            var connectionPointIndex = getConnectionPointIndex !== undefined ? getConnectionPointIndex(connector.beginConnectionPointIndex) : connector.beginConnectionPointIndex;\n            var targetPoint = connector.points[1];\n            if (endItem && connector.points.length === 2) if (connector.endConnectionPointIndex !== -1) targetPoint = endItem.getConnectionPointPosition(connector.endConnectionPointIndex, point_1.Point.zero());else targetPoint = endItem.rectangle.center;\n            var newPoint = beginItem.getConnectionPointPosition(connectionPointIndex, targetPoint);\n            this.moveConnectorPoint(history, connector, 0, newPoint.clone());\n          }\n        };\n\n        ModelUtils.updateConnectorEndPoint = function (history, connector, endItem, getConnectionPointIndex) {\n          if (endItem) {\n            var connectionPointIndex = getConnectionPointIndex !== undefined ? getConnectionPointIndex(connector.endConnectionPointIndex) : connector.endConnectionPointIndex;\n            var newPoint = endItem.getConnectionPointPosition(connectionPointIndex, connector.points[connector.points.length - 2]);\n            this.moveConnectorPoint(history, connector, connector.points.length - 1, newPoint);\n          }\n        };\n\n        ModelUtils.updateContainerConnectorsAttachedPoints = function (history, model, rootContainer, container) {\n          var _this = this;\n\n          if (container === void 0) {\n            container = rootContainer;\n          }\n\n          history.beginTransaction();\n          var children = model.getChildren(container);\n          children.forEach(function (child) {\n            if (child instanceof Shape_1.Shape) {\n              child.attachedConnectors.forEach(function (connector) {\n                var beginItemInContainer = connector.beginItem && model.isContainerItem(container, connector.beginItem);\n                var endItemInContainer = connector.endItem && model.isContainerItem(container, connector.endItem);\n\n                if (beginItemInContainer && !endItemInContainer) {\n                  var collapsedContainer = model.findItemTopCollapsedContainer(connector.beginItem);\n                  var endCollapsedContainer = connector.endItem && model.findItemTopCollapsedContainer(connector.endItem);\n                  if (!collapsedContainer) _this.updateConnectorBeginPoint(history, connector, connector.beginItem, endCollapsedContainer || connector.endItem);else _this.updateConnectorBeginPoint(history, connector, collapsedContainer, endCollapsedContainer || connector.endItem, function (index) {\n                    return rootContainer.getConnectionPointIndexForItem(connector.beginItem, index);\n                  });\n                }\n\n                if (endItemInContainer && !beginItemInContainer) {\n                  var collapsedContainer = model.findItemTopCollapsedContainer(connector.endItem);\n                  if (!collapsedContainer) _this.updateConnectorEndPoint(history, connector, connector.endItem);else _this.updateConnectorEndPoint(history, connector, collapsedContainer, function (index) {\n                    return rootContainer.getConnectionPointIndexForItem(connector.endItem, index);\n                  });\n                }\n              });\n\n              _this.updateContainerConnectorsAttachedPoints(history, model, rootContainer, child);\n            }\n          });\n          history.endTransaction();\n        };\n\n        ModelUtils.getConnectorsWithoutBeginItemInfo = function (model) {\n          var connectors = model.findConnectorsWithoutBeginItem();\n          return connectors.map(function (c) {\n            return {\n              connector: c,\n              point: c.points[0].clone()\n            };\n          });\n        };\n\n        ModelUtils.getConnectorsWithoutEndItemInfo = function (model) {\n          var connectors = model.findConnectorsWithoutEndItem();\n          return connectors.map(function (c) {\n            return {\n              connector: c,\n              point: c.points[c.points.length - 1].clone()\n            };\n          });\n        };\n\n        ModelUtils.updateShapeAttachedConnectors = function (history, model, shape) {\n          var _this = this;\n\n          shape.attachedConnectors.forEach(function (connector) {\n            _this.removeConnectorIntermediatePoints(history, connector);\n\n            _this.updateConnectorAttachedPoints(history, model, connector);\n          });\n        };\n\n        ModelUtils.updateMovingShapeConnections = function (history, shape, beginPointsInfo, endPointsInfo, resetTargetCallback, updateTargetCallback, beforeAttachConnectorCallback) {\n          var _this = this;\n\n          resetTargetCallback();\n          beginPointsInfo.forEach(function (pi) {\n            var connectionPointIndex = _this.getMovingShapeConnectionPointIndex(shape, pi.point);\n\n            if (shape.rectangle.containsPoint(pi.point) || connectionPointIndex > -1) {\n              updateTargetCallback(shape, connectionPointIndex);\n              if (connectionPointIndex !== pi.connector.beginConnectionPointIndex && pi.connector.beginItem) history.addAndRedo(new DeleteConnectionHistoryItem_1.DeleteConnectionHistoryItem(pi.connector, Connector_1.ConnectorPosition.Begin));\n              beforeAttachConnectorCallback(pi.connector);\n              history.addAndRedo(new AddConnectionHistoryItem_1.AddConnectionHistoryItem(pi.connector, shape, connectionPointIndex, Connector_1.ConnectorPosition.Begin));\n            } else if (pi.connector.beginItem) {\n              history.addAndRedo(new DeleteConnectionHistoryItem_1.DeleteConnectionHistoryItem(pi.connector, Connector_1.ConnectorPosition.Begin));\n              history.addAndRedo(new MoveConnectorPointHistoryItem_1.MoveConnectorPointHistoryItem(pi.connector.key, 0, pi.point));\n            }\n          });\n          endPointsInfo.forEach(function (pi) {\n            var connectionPointIndex = _this.getMovingShapeConnectionPointIndex(shape, pi.point);\n\n            if (shape.rectangle.containsPoint(pi.point) || connectionPointIndex > -1) {\n              updateTargetCallback(shape, connectionPointIndex);\n              if (connectionPointIndex !== pi.connector.endConnectionPointIndex && pi.connector.endItem) history.addAndRedo(new DeleteConnectionHistoryItem_1.DeleteConnectionHistoryItem(pi.connector, Connector_1.ConnectorPosition.End));\n              beforeAttachConnectorCallback(pi.connector);\n              history.addAndRedo(new AddConnectionHistoryItem_1.AddConnectionHistoryItem(pi.connector, shape, connectionPointIndex, Connector_1.ConnectorPosition.End));\n            } else if (pi.connector.endItem) {\n              history.addAndRedo(new DeleteConnectionHistoryItem_1.DeleteConnectionHistoryItem(pi.connector, Connector_1.ConnectorPosition.End));\n              history.addAndRedo(new MoveConnectorPointHistoryItem_1.MoveConnectorPointHistoryItem(pi.connector.key, pi.connector.points.length - 1, pi.point));\n            }\n          });\n        };\n\n        ModelUtils.getMovingShapeConnectionPointIndex = function (shape, point) {\n          var _this = this;\n\n          var connectionPointIndex = -1;\n          shape.getConnectionPoints().forEach(function (pt, index) {\n            if (Utils_1.GeometryUtils.getDistance(point, pt) < _this.connectionPointActionSize) connectionPointIndex = index;\n          });\n          return connectionPointIndex;\n        };\n\n        ModelUtils.shouldRemoveConnectorIntermediatePoints = function (connector) {\n          return connector.properties.lineOption === ConnectorProperties_1.ConnectorLineOption.Orthogonal && connector.points.length > 2 && (this.isShapeIntersectConnectorPointsLine(connector.beginItem, connector) || this.isShapeIntersectConnectorPointsLine(connector.endItem, connector));\n        };\n\n        ModelUtils.removeConnectorIntermediatePoints = function (history, connector) {\n          if (this.shouldRemoveConnectorIntermediatePoints(connector)) {\n            history.beginTransaction();\n            this.deleteConnectorPoints(history, connector);\n            history.endTransaction();\n          }\n        };\n\n        ModelUtils.isShapeIntersectConnectorPointsLine = function (shape, connector) {\n          if (!shape) return false;\n          var offset = Connector_1.Connector.minOffset - unit_converter_1.UnitConverter.pixelsToTwips(1);\n          var rect = shape.rectangle.clone().inflate(offset, offset);\n          var prevPt;\n\n          for (var i = 1; i < connector.points.length - 1; i++) {\n            if (prevPt !== undefined) {\n              if (prevPt.x === connector.points[i].x) if (rect.x <= prevPt.x && prevPt.x <= rect.right) return true;\n              if (prevPt.y === connector.points[i].y) if (rect.y <= prevPt.y && prevPt.y <= rect.bottom) return true;\n            }\n\n            prevPt = connector.points[i];\n          }\n\n          return false;\n        };\n\n        ModelUtils.getSnappedPos = function (model, gridSize, pos, isHorizontal) {\n          var snapOffset = isHorizontal ? model.snapStartPoint.x : model.snapStartPoint.y;\n          return Math.round((pos - snapOffset) / gridSize) * gridSize + snapOffset;\n        };\n\n        ModelUtils.tryUpdateModelRectangle = function (history, processPoints) {\n          var offset = history.modelManipulator.getModelSizeUpdateOffset();\n\n          if (!offset.isEmpty()) {\n            history.addAndRedo(new ModelResizeHistoryItem_1.ModelResizeHistoryItem(offset));\n\n            if (offset.left || offset.top) {\n              history.addAndRedo(new UpdatePositionsOnPageResizeHistoryItem_1.UpdatePositionsOnPageResizeHistoryItem(new vector_1.Vector(offset.left, offset.top)));\n              if (processPoints !== undefined) processPoints(offset.left, offset.top);\n            }\n\n            history.modelManipulator.raiseModelRectangleChanged(history.modelManipulator.model.getRectangle(true));\n          }\n        };\n\n        ModelUtils.deleteItems = function (history, model, selection, items, deleteLocked) {\n          history.beginTransaction();\n          var itemsHash = {};\n          items.forEach(function (item) {\n            return itemsHash[item.key] = item;\n          });\n          var selectionKeys = selection.getKeys().filter(function (key) {\n            return !itemsHash[key];\n          });\n          history.addAndRedo(new SetSelectionHistoryItem_1.SetSelectionHistoryItem(selection, selectionKeys));\n          this.deleteItemsCore(history, model, items, deleteLocked);\n          this.tryUpdateModelRectangle(history);\n          history.endTransaction();\n        };\n\n        ModelUtils.deleteItemsCore = function (history, model, items, deleteLocked) {\n          var _this = this;\n\n          items.sort(function (a, b) {\n            var v1 = a instanceof Connector_1.Connector ? 0 : 1;\n            var v2 = b instanceof Connector_1.Connector ? 0 : 1;\n            return v1 - v2;\n          });\n          items.forEach(function (item) {\n            if (item.container) _this.removeFromContainer(history, model, item);\n\n            if (item instanceof Shape_1.Shape) {\n              var children = model.getChildren(item);\n\n              if (children.length) {\n                children.forEach(function (child) {\n                  history.addAndRedo(new RemoveFromContainerHistoryItem_1.RemoveFromContainerHistoryItem(child));\n\n                  _this.updateAttachedConnectorsContainer(history, model, child);\n                });\n\n                _this.deleteItemsCore(history, model, children.filter(function (child) {\n                  return !child.locked || deleteLocked;\n                }), deleteLocked);\n              }\n\n              if (model.findItem(item.key)) _this.deleteShape(history, item);\n            }\n\n            if (item instanceof Connector_1.Connector) if (model.findItem(item.key)) _this.deleteConnector(history, item);\n          });\n        };\n\n        ModelUtils.detachConnectors = function (history, shape) {\n          history.beginTransaction();\n\n          while (shape.attachedConnectors.length > 0) {\n            var connector = shape.attachedConnectors[0];\n            history.addAndRedo(new DeleteConnectionHistoryItem_1.DeleteConnectionHistoryItem(connector, connector.beginItem === shape ? Connector_1.ConnectorPosition.Begin : Connector_1.ConnectorPosition.End));\n          }\n\n          history.endTransaction();\n        };\n\n        ModelUtils.deleteShape = function (history, shape) {\n          var allowed = history.modelManipulator.permissionsProvider.canDeleteItems([shape]);\n          history.beginTransaction();\n          this.detachConnectors(history, shape);\n          history.addAndRedo(new DeleteShapeHistoryItem_1.DeleteShapeHistoryItem(shape.key, allowed));\n          history.endTransaction();\n        };\n\n        ModelUtils.deleteConnector = function (history, connector) {\n          history.beginTransaction();\n          if (connector.beginItem) history.addAndRedo(new DeleteConnectionHistoryItem_1.DeleteConnectionHistoryItem(connector, Connector_1.ConnectorPosition.Begin));\n          if (connector.endItem) history.addAndRedo(new DeleteConnectionHistoryItem_1.DeleteConnectionHistoryItem(connector, Connector_1.ConnectorPosition.End));\n          history.addAndRedo(new DeleteConnectorHistoryItem_1.DeleteConnectorHistoryItem(connector.key));\n          history.endTransaction();\n        };\n\n        ModelUtils.deleteAllItems = function (history, model, selection) {\n          this.deleteItems(history, model, selection, model.items.slice(), true);\n        };\n\n        ModelUtils.deleteSelection = function (history, model, selection) {\n          this.deleteItems(history, model, selection, selection.getSelectedItems());\n        };\n\n        ModelUtils.changeSelectionLocked = function (history, model, selection, locked) {\n          history.beginTransaction();\n          var items = selection.getSelectedItems(true);\n          items.forEach(function (item) {\n            history.addAndRedo(new ChangeLockedHistoryItem_1.ChangeLockedHistoryItem(item, locked));\n          });\n          ModelUtils.updateSelection(history, selection);\n          history.endTransaction();\n        };\n\n        ModelUtils.copyStylesToItem = function (history, model, fromItem, newItemKey) {\n          var toItem = model.findItem(newItemKey);\n          fromItem.styleText.forEach(function (propertyName) {\n            if (fromItem.styleText[propertyName] !== toItem.styleText[propertyName]) history.addAndRedo(new ChangeStyleTextHistoryItem_1.ChangeStyleTextHistoryItem(newItemKey, propertyName, fromItem.styleText[propertyName]));\n          });\n          fromItem.style.forEach(function (propertyName) {\n            if (fromItem.style[propertyName] !== toItem.style[propertyName]) history.addAndRedo(new ChangeStyleHistoryItem_1.ChangeStyleHistoryItem(newItemKey, propertyName, fromItem.style[propertyName]));\n          });\n        }; // Selection\n\n\n        ModelUtils.updateSelection = function (history, selection) {\n          history.addAndRedo(new SetSelectionHistoryItem_1.SetSelectionHistoryItem(selection, selection.getKeys(), true));\n        }; // Cloning\n\n\n        ModelUtils.cloneShapeToOffset = function (history, model, shape, dx, dy) {\n          history.beginTransaction();\n          var newPosition = shape.position.clone().offset(dx, dy);\n          var addHistoryItem = new AddShapeHistoryItem_1.AddShapeHistoryItem(shape.description, newPosition, shape.text);\n          history.addAndRedo(addHistoryItem);\n          var newKey = addHistoryItem.shapeKey;\n          history.addAndRedo(new ResizeShapeHistoryItem_1.ResizeShapeHistoryItem(newKey, newPosition, shape.size.clone()));\n          history.addAndRedo(new ChangeShapeParametersHistoryItem_1.ChangeShapeParametersHistoryItem(newKey, shape.parameters.clone()));\n          this.copyStylesToItem(history, model, shape, newKey);\n          history.endTransaction();\n          return newKey;\n        };\n\n        ModelUtils.applyOffsetToConnectorRenderPointsContext = function (context, dx, dy) {\n          return context && context.renderPoints ? new ConnectorRenderPointsContext_1.ConnectorRenderPointsContext(context.renderPoints.map(function (p) {\n            return p.clone().offset(dx, dy);\n          }), true, context.actualRoutingMode) : undefined;\n        };\n\n        ModelUtils.cloneConnectorToOffset = function (history, model, connector, beginItemKey, endItemKey, dx, dy) {\n          history.beginTransaction();\n          var newPoints = connector.points.map(function (p) {\n            return p.clone().offset(dx, dy);\n          });\n          var addHistoryItem = new AddConnectorHistoryItem_1.AddConnectorHistoryItem(newPoints, undefined, this.applyOffsetToConnectorRenderPointsContext(connector.createRenderPointsContext(), dx, dy));\n          history.addAndRedo(addHistoryItem);\n          var newKey = addHistoryItem.connectorKey;\n          var newConnector = model.findConnector(newKey);\n          connector.properties.forEach(function (propertyName) {\n            if (connector.properties[propertyName] !== newConnector.properties[propertyName]) history.addAndRedo(new ChangeConnectorPropertyHistoryItem_1.ChangeConnectorPropertyHistoryItem(newKey, propertyName, connector.properties[propertyName]));\n          });\n\n          if (beginItemKey) {\n            var from = model.findShape(beginItemKey);\n            history.addAndRedo(new AddConnectionHistoryItem_1.AddConnectionHistoryItem(newConnector, from, connector.beginConnectionPointIndex, Connector_1.ConnectorPosition.Begin));\n          }\n\n          if (endItemKey) {\n            var to = model.findShape(endItemKey);\n            history.addAndRedo(new AddConnectionHistoryItem_1.AddConnectionHistoryItem(newConnector, to, connector.endConnectionPointIndex, Connector_1.ConnectorPosition.End));\n          }\n\n          var newTexts = connector.texts.clone();\n          newTexts.forEach(function (connectorText) {\n            history.addAndRedo(new ChangeConnectorTextHistoryItem_1.ChangeConnectorTextHistoryItem(newConnector, connectorText.position, connectorText.value));\n          });\n          this.copyStylesToItem(history, model, connector, newKey);\n          history.endTransaction();\n          return newKey;\n        };\n\n        ModelUtils.cloneSelectionToOffset = function (history, model, onItemAdded, selection, dx, dy) {\n          var _this = this;\n\n          history.beginTransaction();\n          var newShapes = {};\n          var ids = [];\n          selection.getSelectedShapes().forEach(function (shape) {\n            var newKey = _this.cloneShapeToOffset(history, model, shape, dx, dy);\n\n            newShapes[shape.key] = newKey;\n            ids.push(newKey);\n            if (onItemAdded) onItemAdded(newKey);\n          });\n          selection.getSelectedConnectors().forEach(function (connector) {\n            var beginItemKey = connector.beginItem ? newShapes[connector.beginItem.key] : null;\n            var endItemKey = connector.endItem ? newShapes[connector.endItem.key] : null;\n\n            var newKey = _this.cloneConnectorToOffset(history, model, connector, beginItemKey, endItemKey, dx, dy);\n\n            ids.push(newKey);\n            if (onItemAdded) onItemAdded(newKey);\n          });\n          history.addAndRedo(new SetSelectionHistoryItem_1.SetSelectionHistoryItem(selection, ids));\n          ModelUtils.tryUpdateModelRectangle(history);\n          history.endTransaction();\n        }; // Containers\n\n\n        ModelUtils.findContainerByEventKey = function (model, selection, key) {\n          var container = model.findContainer(key);\n          if (container && !container.isLocked) return container;else {\n            var shape = model.findShape(key);\n            if (shape && shape.container && !selection.hasKey(shape.key)) return ModelUtils.findContainerByEventKey(model, selection, shape.container.key);\n          }\n        };\n\n        ModelUtils.canInsertToContainer = function (model, item, container) {\n          if (item === container) return false;\n          if (item instanceof Shape_1.Shape) if (model.findChild(item, container.key)) return false;\n          return true;\n        };\n\n        ModelUtils.canInsertSelectionToContainer = function (model, selection, container) {\n          var result = true;\n          selection.getSelectedItems().forEach(function (item) {\n            if (item === container) {\n              result = false;\n              return;\n            }\n\n            if (item instanceof Shape_1.Shape) if (model.findChild(item, container.key)) {\n              result = false;\n              return;\n            }\n          });\n          return result;\n        };\n\n        ModelUtils.insertToContainer = function (history, model, item, container) {\n          if (!container.enableChildren) throw Error(\"Inpossible to add children to non-container shape.\");\n          if (!this.canInsertToContainer(model, item, container)) return;\n          var oldContainer = item.container;\n\n          if (oldContainer !== container) {\n            history.beginTransaction();\n            if (oldContainer) history.addAndRedo(new RemoveFromContainerHistoryItem_1.RemoveFromContainerHistoryItem(item));\n            history.addAndRedo(new InsertToContainerHistoryItem_1.InsertToContainerHistoryItem(item, container));\n            this.updateAttachedConnectorsContainer(history, model, item);\n            history.endTransaction();\n          }\n        };\n\n        ModelUtils.removeFromContainer = function (history, model, item) {\n          if (item.container) {\n            history.beginTransaction();\n            history.addAndRedo(new RemoveFromContainerHistoryItem_1.RemoveFromContainerHistoryItem(item));\n            this.updateAttachedConnectorsContainer(history, model, item);\n            history.endTransaction();\n          }\n        };\n\n        ModelUtils.insertSelectionToContainer = function (history, model, selection, container) {\n          var _this = this;\n\n          history.beginTransaction();\n          var selectedItems = selection.getSelectedItems();\n          var items = selectedItems.filter(function (item) {\n            return !item.container || selectedItems.indexOf(item.container) === -1;\n          });\n          items.forEach(function (item) {\n            _this.insertToContainer(history, model, item, container);\n          });\n          history.endTransaction();\n        };\n\n        ModelUtils.removeSelectionFromContainer = function (history, model, selection) {\n          var _this = this;\n\n          history.beginTransaction();\n          selection.getSelectedItems().forEach(function (item) {\n            if (item.container && !selection.hasKey(item.container.key)) {\n              history.addAndRedo(new RemoveFromContainerHistoryItem_1.RemoveFromContainerHistoryItem(item));\n\n              _this.updateAttachedConnectorsContainer(history, model, item);\n            }\n          });\n          history.endTransaction();\n        };\n\n        ModelUtils.getConnectorContainer = function (connector) {\n          if (connector.beginItem && connector.endItem && connector.beginItem.container === connector.endItem.container) return connector.beginItem.container;\n        };\n\n        ModelUtils.updateAttachedConnectorsContainer = function (history, model, item) {\n          var _this = this;\n\n          history.beginTransaction();\n          item.attachedConnectors.forEach(function (connector) {\n            _this.updateConnectorContainer(history, model, connector);\n          });\n          history.endTransaction();\n        };\n\n        ModelUtils.updateConnectorContainer = function (history, model, connector) {\n          var container = this.getConnectorContainer(connector);\n          if (container) history.addAndRedo(new InsertToContainerHistoryItem_1.InsertToContainerHistoryItem(connector, container));else if (connector.container) history.addAndRedo(new RemoveFromContainerHistoryItem_1.RemoveFromContainerHistoryItem(connector));\n        };\n\n        ModelUtils.updateNewShapeProperties = function (history, selection, itemKey) {\n          var style = selection.inputPosition.getDefaultStyle();\n          style.forEach(function (propertyName) {\n            history.addAndRedo(new ChangeStyleHistoryItem_1.ChangeStyleHistoryItem(itemKey, propertyName, selection.inputPosition.getDefaultStylePropertyValue(propertyName)));\n          });\n          var textStyle = selection.inputPosition.getDefaultTextStyle();\n          textStyle.forEach(function (propertyName) {\n            history.addAndRedo(new ChangeStyleTextHistoryItem_1.ChangeStyleTextHistoryItem(itemKey, propertyName, selection.inputPosition.getDefaultTextStylePropertyValue(propertyName)));\n          });\n        };\n\n        ModelUtils.updateNewConnectorProperties = function (history, selection, itemKey) {\n          var connectorProperties = selection.inputPosition.getDefaultConnectorProperties();\n          connectorProperties.forEach(function (propertyName) {\n            history.addAndRedo(new ChangeConnectorPropertyHistoryItem_1.ChangeConnectorPropertyHistoryItem(itemKey, propertyName, selection.inputPosition.getDefaultConnectorPropertyValue(propertyName)));\n          });\n          var style = selection.inputPosition.getDefaultStyle();\n          style.forEach(function (propertyName) {\n            history.addAndRedo(new ChangeStyleHistoryItem_1.ChangeStyleHistoryItem(itemKey, propertyName, selection.inputPosition.getDefaultStylePropertyValue(propertyName)));\n          });\n          var textStyle = selection.inputPosition.getDefaultTextStyle();\n          textStyle.forEach(function (propertyName) {\n            history.addAndRedo(new ChangeStyleTextHistoryItem_1.ChangeStyleTextHistoryItem(itemKey, propertyName, selection.inputPosition.getDefaultTextStylePropertyValue(propertyName)));\n          });\n        }; // Layout\n\n\n        ModelUtils.applyLayout = function (history, model, container, graph, layout, nonGraphItems, settings, snapToGrid, gridSize, skipPointIndices) {\n          history.beginTransaction();\n          var occupiedRectangles = this.getOccupiedRectangles(nonGraphItems, container);\n          layout = this.offsetLayoutToFreeSpace(layout, container && container.clientRectangle, occupiedRectangles, settings.containerPadding);\n          if (snapToGrid) this.adjustLayoutToSnapGrid(model, layout, gridSize);\n          if (container) this.resizeContainerOnLayout(history, model, layout, container, settings.containerPadding);\n          this.applyLayoutToNodes(history, model, layout, graph.edges.map(function (e) {\n            return model.findConnector(e.key);\n          }));\n          this.applyLayoutToConnectors(history, model, layout, graph.edges.map(function (e) {\n            return model.findConnector(e.key);\n          }), skipPointIndices);\n          history.endTransaction();\n          return layout.getRectangle(true);\n        };\n\n        ModelUtils.getNonGraphItems = function (model, container, nodeKeyMap, shapes, connectors) {\n          var allItems = container ? model.getChildren(container) : model.items.filter(function (item) {\n            return !item.container;\n          });\n          return allItems.filter(function (item) {\n            if (item instanceof Connector_1.Connector) return (!item.beginItem || !nodeKeyMap[item.beginItem.key]) && (!item.endItem || !nodeKeyMap[item.endItem.key]) && connectors.indexOf(item) === -1;\n            if (item instanceof Shape_1.Shape) return !nodeKeyMap[item.key] && shapes.indexOf(item) === -1;\n          });\n        };\n\n        ModelUtils.getOccupiedRectangles = function (nonGraphItems, container) {\n          var occupiedRectangles = nonGraphItems.map(function (i) {\n            return i.rectangle;\n          });\n\n          if (container && occupiedRectangles.length) {\n            var rect = container.clientRectangle;\n            occupiedRectangles.push(new rectangle_1.Rectangle(rect.right, rect.y, 1, 1));\n            occupiedRectangles.push(new rectangle_1.Rectangle(rect.right, rect.bottom, 1, 1));\n          }\n\n          return occupiedRectangles;\n        };\n\n        ModelUtils.offsetLayoutToFreeSpace = function (layout, containerRect, occupiedRectangles, spacing) {\n          var graphItemRect = layout.getRectangle(true);\n          var freePoint = Utils_1.GeometryUtils.findFreeSpace(occupiedRectangles, graphItemRect.createSize().offset(spacing, spacing).nonNegativeSize(), false, containerRect);\n\n          if (freePoint) {\n            var x = freePoint.x + spacing;\n            var y = freePoint.y + spacing;\n            return layout.offsetNodes(x, y);\n          }\n\n          var maxX = occupiedRectangles && occupiedRectangles.length ? occupiedRectangles.reduce(function (max, rect) {\n            return rect.right > max ? rect.right : max;\n          }, 0) : containerRect ? containerRect.x : 0;\n          var minY = containerRect ? containerRect.y : Math.max(0, graphItemRect.y);\n          return layout.offsetNodes(maxX + spacing, minY + spacing);\n        };\n\n        ModelUtils.resizeContainerOnLayout = function (history, model, layout, container, spacing) {\n          var layoutRect = layout.getRectangle(true);\n          var nonLayoutRectangles = container.children.filter(function (item) {\n            if (item instanceof Shape_1.Shape) return layout.nodeKeys.indexOf(item.key) === -1;\n            if (item instanceof Connector_1.Connector && item.beginItem && item.endItem) return layout.nodeKeys.indexOf(item.beginItem.key) === -1 && layout.nodeKeys.indexOf(item.endItem.key) === -1;\n            return false;\n          }).map(function (item) {\n            return item.rectangle;\n          });\n          var right = nonLayoutRectangles.map(function (rect) {\n            return rect.right;\n          }).reduce(function (prev, cur) {\n            return Math.max(prev, cur);\n          }, layoutRect.right);\n          var bottom = nonLayoutRectangles.map(function (rect) {\n            return rect.bottom;\n          }).reduce(function (prev, cur) {\n            return Math.max(prev, cur);\n          }, layoutRect.bottom);\n          var width = container.rectangle.width + right + spacing - container.rectangle.right;\n          var height = container.rectangle.height + bottom + spacing - container.rectangle.bottom;\n          ModelUtils.setShapeSize(history, model, container, container.position, new size_1.Size(width, height));\n          ModelUtils.updateShapeAttachedConnectors(history, model, container);\n        };\n\n        ModelUtils.applyLayoutToNodes = function (history, model, layout, connectors) {\n          var _this = this;\n\n          var connectorsSet = connectors.reduce(function (acc, c) {\n            return acc[c.key] = true && acc;\n          }, {});\n          layout.forEachNode(function (nl, nk) {\n            var shape = model.findShape(nk);\n\n            _this.applyLayoutToNode(history, model, shape, nl.position, connectorsSet);\n          });\n        };\n\n        ModelUtils.applyLayoutToNode = function (history, model, shape, position, connectorsSet) {\n          var _this = this;\n\n          var delta = position.clone().offset(-shape.position.x, -shape.position.y);\n          ModelUtils.setShapePosition(history, model, shape, position);\n\n          if (delta.x !== 0 || delta.y !== 0) {\n            shape.attachedConnectors.filter(function (c) {\n              return !connectorsSet[c.key];\n            }).forEach(function (connector) {\n              _this.updateConnectorAttachedPoints(history, model, connector);\n\n              var beginPointIndex = connector.beginItem ? 1 : 0;\n              var endPointIndex = connector.endItem ? connector.points.length - 2 : connector.points.length - 1;\n\n              for (var i = beginPointIndex; i <= endPointIndex; i++) {\n                _this.moveConnectorPoint(history, connector, i, connector.points[i].offset(delta.x, delta.y));\n              }\n            });\n            model.getChildren(shape).forEach(function (child) {\n              if (child instanceof Shape_1.Shape) {\n                var childPosition = child.position.clone().offset(delta.x, delta.y);\n\n                _this.applyLayoutToNode(history, model, child, childPosition, connectorsSet);\n              }\n            });\n          }\n        };\n\n        ModelUtils.applyLayoutToConnectors = function (history, model, layout, connectors, skipPointIndices) {\n          var _this = this;\n\n          connectors.filter(function (c) {\n            return c.beginItem || c.endItem;\n          }).forEach(function (connector) {\n            var edgeLayout = layout.edgeToPosition[connector.key];\n\n            if (connector.beginItem && connector.endItem && !skipPointIndices && edgeLayout) {\n              var beginIndex = connector.beginItem.getConnectionPointIndexForSide(edgeLayout.beginIndex);\n              if (beginIndex !== connector.beginConnectionPointIndex) history.addAndRedo(new AddConnectionHistoryItem_1.SetConnectionPointIndexHistoryItem(connector, beginIndex, Connector_1.ConnectorPosition.Begin));\n              var endIndex = connector.endItem.getConnectionPointIndexForSide(edgeLayout.endIndex);\n              if (endIndex !== connector.endConnectionPointIndex) history.addAndRedo(new AddConnectionHistoryItem_1.SetConnectionPointIndexHistoryItem(connector, endIndex, Connector_1.ConnectorPosition.End));\n            }\n\n            _this.updateConnectorAttachedPoints(history, model, connector);\n\n            if (edgeLayout) _this.deleteConnectorPoints(history, connector);\n          });\n        };\n\n        ModelUtils.adjustLayoutToSnapGrid = function (model, layout, gridSize) {\n          var _this = this;\n\n          layout.nodeKeys.forEach(function (key) {\n            layout.nodeToLayout[key].position.x = _this.getSnappedPos(model, gridSize, layout.nodeToLayout[key].position.x, true);\n            layout.nodeToLayout[key].position.y = _this.getSnappedPos(model, gridSize, layout.nodeToLayout[key].position.y, false);\n          });\n        };\n\n        ModelUtils.getGraphInfoByItems = function (model, shapes, connectors, isDatabinding) {\n          if (isDatabinding === void 0) {\n            isDatabinding = true;\n          }\n\n          var itemsByContainerKey = {};\n          var items = [].concat(shapes).concat(connectors);\n          items.forEach(function (item) {\n            var containerKey = item.container && item.container.key;\n            if (!itemsByContainerKey[containerKey]) itemsByContainerKey[containerKey] = [];\n            itemsByContainerKey[containerKey].push(item);\n          });\n          var result = [];\n\n          for (var key in itemsByContainerKey) {\n            if (!Object.prototype.hasOwnProperty.call(itemsByContainerKey, key)) continue;\n            var container = key && model.findContainer(key);\n\n            if (!container || container.expanded && !model.findItemCollapsedContainer(container)) {\n              var containerKey = container && container.key;\n              var graph = this.getGraphByItems(model, itemsByContainerKey[key], containerKey, !isDatabinding);\n              var allowCreateInfo = false;\n              if (graph.nodes.length > 1) allowCreateInfo = true;else if (graph.nodes.length) if (isDatabinding) allowCreateInfo = true;else if (container && itemsByContainerKey[container.container && container.container.key]) allowCreateInfo = true;\n              if (allowCreateInfo) result.push(new GraphInfo_1.GraphInfo(container, graph));\n            }\n          }\n\n          return result.sort(function (a, b) {\n            return b.level - a.level;\n          });\n        };\n\n        ModelUtils.getGraphByItems = function (model, items, containerKey, skipLocked) {\n          var _this = this;\n\n          var graph = new Graph_1.Graph([], []);\n          var knownIds = {};\n          items.forEach(function (item) {\n            _this.extendByConnectedComponents(item, graph, containerKey, knownIds, skipLocked);\n          });\n          graph.nodes.sort(function (a, b) {\n            return model.getItemIndex(model.findItem(a)) - model.getItemIndex(model.findItem(b));\n          });\n          graph.edges.sort(function (a, b) {\n            return model.getItemIndex(model.findItem(a.key)) - model.getItemIndex(model.findItem(b.key));\n          });\n          graph.edges = graph.edges.filter(function (e) {\n            return graph.getNode(e.from) && graph.getNode(e.to);\n          });\n          return graph;\n        };\n\n        ModelUtils.extendByConnectedComponents = function (item, graph, containerKey, knownIds, skipLocked) {\n          var _this = this;\n\n          if (!item || skipLocked && item.locked || knownIds[item.key]) return;\n          knownIds[item.key] = true;\n\n          if (item instanceof Connector_1.Connector && (item.container && item.container.key) === containerKey && item.beginItem && (!item.beginItem.locked || !skipLocked) && item.endItem && (!item.endItem.locked || !skipLocked) && item.beginItem !== item.endItem) {\n            graph.addEdge(new Structures_1.Edge(item.key, item.beginItem && item.beginItem.key, item.endItem && item.endItem.key));\n            this.extendByConnectedComponents(item.beginItem, graph, containerKey, knownIds, skipLocked);\n            this.extendByConnectedComponents(item.endItem, graph, containerKey, knownIds, skipLocked);\n          } else if (item instanceof Shape_1.Shape && (item.container && item.container.key) === containerKey) {\n            graph.addNode(item);\n            item.attachedConnectors.forEach(function (c) {\n              return _this.extendByConnectedComponents(c, graph, containerKey, knownIds, skipLocked);\n            });\n          }\n        }; // Units\n\n\n        ModelUtils.getlUnitValue = function (units, twipsValue) {\n          switch (units) {\n            case Enums_1.DiagramUnit.Cm:\n              return unit_converter_1.UnitConverter.twipsToCentimeters(twipsValue);\n\n            case Enums_1.DiagramUnit.In:\n              return unit_converter_1.UnitConverter.twipsToInches(twipsValue);\n\n            case Enums_1.DiagramUnit.Px:\n              return unit_converter_1.UnitConverter.twipsToPixels(twipsValue);\n          }\n        };\n\n        ModelUtils.getUnitText = function (units, unitItems, formatUnit, twipsValue, fractionDigits) {\n          if (fractionDigits === void 0) {\n            fractionDigits = 2;\n          }\n\n          var unitItemText = unitItems[units] ? \" \" + unitItems[units] : \"\";\n          var unitValue = this.getlUnitValue(units, twipsValue);\n\n          switch (units) {\n            case Enums_1.DiagramUnit.Cm:\n              return formatUnit(+unitValue.toFixed(fractionDigits)) + unitItemText;\n\n            case Enums_1.DiagramUnit.In:\n              return formatUnit(+unitValue.toFixed(fractionDigits)) + unitItemText;\n\n            case Enums_1.DiagramUnit.Px:\n              return formatUnit(+unitValue.toFixed(0)) + unitItemText;\n          }\n        };\n\n        ModelUtils.getTwipsValue = function (units, value) {\n          switch (units) {\n            case Enums_1.DiagramUnit.Cm:\n              return unit_converter_1.UnitConverter.centimetersToTwips(value);\n\n            case Enums_1.DiagramUnit.In:\n              return unit_converter_1.UnitConverter.inchesToTwips(value);\n\n            case Enums_1.DiagramUnit.Px:\n              return unit_converter_1.UnitConverter.pixelsToTwips(value);\n          }\n        };\n\n        ModelUtils.getGuidItemKey = function () {\n          return math_1.MathUtils.generateGuid();\n        };\n\n        ModelUtils.createSelectedItems = function (selection) {\n          var result = {};\n          selection.getSelectedItems(true).forEach(function (i) {\n            return result[i.key] = i;\n          });\n          return result;\n        };\n\n        ModelUtils.canMoveConnector = function (selectedItems, connector) {\n          var beginItem = connector.beginItem;\n          var endItem = connector.endItem;\n          if (!beginItem && !endItem) return true;\n          if (!selectedItems[connector.key]) return false;\n          if (beginItem === endItem) return !!selectedItems[beginItem.key];\n          if (!beginItem) return !!selectedItems[endItem.key];\n          if (!endItem) return !!selectedItems[beginItem.key];\n          return !!selectedItems[beginItem.key] && !!selectedItems[endItem.key];\n        };\n\n        ModelUtils.createRectangle = function (items) {\n          return Utils_1.GeometryUtils.getCommonRectangle(items.map(function (i) {\n            return i.rectangle;\n          }));\n        };\n\n        ModelUtils.connectionPointActionSize = unit_converter_1.UnitConverter.pixelsToTwips(8);\n        return ModelUtils;\n      }();\n\n      exports.ModelUtils = ModelUtils;\n      /***/\n    },\n    /* 6 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics2 = function extendStatics(d, b) {\n          _extendStatics2 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics2(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics2(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.CompositionHistoryItem = exports.HistoryItem = void 0;\n\n      var HistoryItem =\n      /** @class */\n      function () {\n        function HistoryItem() {\n          this.uniqueId = -1;\n        }\n\n        HistoryItem.prototype.changeModified = function () {\n          return true;\n        };\n\n        HistoryItem.prototype.getName = function () {\n          return this.constructor.name;\n        };\n\n        return HistoryItem;\n      }();\n\n      exports.HistoryItem = HistoryItem;\n\n      var CompositionHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(CompositionHistoryItem, _super);\n\n        function CompositionHistoryItem() {\n          var _this = _super !== null && _super.apply(this, arguments) || this;\n\n          _this.historyItems = [];\n          _this.dataSyncItems = [];\n          return _this;\n        }\n\n        CompositionHistoryItem.prototype.changeModified = function () {\n          var item;\n\n          for (var i = 0; item = this.historyItems[i]; i++) {\n            if (item.changeModified()) return true;\n          }\n\n          return false;\n        };\n\n        CompositionHistoryItem.prototype.redo = function (manipulator) {\n          var item;\n\n          for (var i = 0; item = this.historyItems[i]; i++) {\n            item.redo(manipulator);\n          }\n        };\n\n        CompositionHistoryItem.prototype.undo = function (manipulator) {\n          var item;\n\n          for (var i = this.dataSyncItems.length - 1; item = this.dataSyncItems[i]; i--) {\n            item.undo(manipulator);\n          }\n\n          this.dataSyncItems = [];\n\n          for (var i = this.historyItems.length - 1; item = this.historyItems[i]; i--) {\n            item.undo(manipulator);\n          }\n        };\n\n        CompositionHistoryItem.prototype.add = function (historyItem) {\n          if (historyItem == null) throw new Error(\"cannot be null\");\n          this.historyItems.push(historyItem);\n        };\n\n        return CompositionHistoryItem;\n      }(HistoryItem);\n\n      exports.CompositionHistoryItem = CompositionHistoryItem;\n      /***/\n    },\n    /* 7 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics3 = function extendStatics(d, b) {\n          _extendStatics3 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics3(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics3(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Connector = exports.CONNECTOR_DEFAULT_TEXT_POSITION = exports.ConnectorPosition = void 0;\n\n      var unit_converter_1 = __webpack_require__(12);\n\n      var rectangle_1 = __webpack_require__(13);\n\n      var segment_1 = __webpack_require__(34);\n\n      var size_1 = __webpack_require__(2);\n\n      var CanvasManagerBase_1 = __webpack_require__(41);\n\n      var NativeItem_1 = __webpack_require__(85);\n\n      var Event_1 = __webpack_require__(11);\n\n      var ITextMeasurer_1 = __webpack_require__(42);\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var TextPrimitive_1 = __webpack_require__(60);\n\n      var Utils_1 = __webpack_require__(18);\n\n      var Settings_1 = __webpack_require__(27);\n\n      var Utils_2 = __webpack_require__(3);\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var ConnectorPointsCalculator_1 = __webpack_require__(178);\n\n      var ConnectorPointsOrthogonalCalculator_1 = __webpack_require__(179);\n\n      var ConnectorLineEndingStrategies_1 = __webpack_require__(186);\n\n      var ConnectorProperties_1 = __webpack_require__(31);\n\n      var ConnectorTexts_1 = __webpack_require__(187);\n\n      var ConnectorRenderPointsContext_1 = __webpack_require__(86);\n\n      var ConnectorPosition;\n\n      (function (ConnectorPosition) {\n        ConnectorPosition[ConnectorPosition[\"Begin\"] = 0] = \"Begin\";\n        ConnectorPosition[ConnectorPosition[\"End\"] = 1] = \"End\";\n      })(ConnectorPosition = exports.ConnectorPosition || (exports.ConnectorPosition = {}));\n\n      exports.CONNECTOR_DEFAULT_TEXT_POSITION = 0.5;\n\n      var Connector =\n      /** @class */\n      function (_super) {\n        __extends(Connector, _super);\n\n        function Connector(points) {\n          var _this = _super.call(this) || this;\n\n          _this.beginConnectionPointIndex = -1;\n          _this.endConnectionPointIndex = -1;\n          _this.properties = new ConnectorProperties_1.ConnectorProperties();\n          _this.points = points.map(function (pt) {\n            return pt.clone();\n          });\n          if (points.length < 2) throw Error(\"Points count should be greater than 1\");\n          _this.texts = new ConnectorTexts_1.ConnectorTexts();\n          return _this;\n        }\n\n        Object.defineProperty(Connector.prototype, \"rectangle\", {\n          get: function get() {\n            var points = this.getRenderPoints();\n            var xarr = points.map(function (p) {\n              return p.x;\n            });\n            var yarr = points.map(function (p) {\n              return p.y;\n            });\n            var minX = xarr.reduce(function (prev, cur) {\n              return Math.min(prev, cur);\n            }, Number.MAX_VALUE);\n            var maxX = xarr.reduce(function (prev, cur) {\n              return Math.max(prev, cur);\n            }, -Number.MAX_VALUE);\n            var minY = yarr.reduce(function (prev, cur) {\n              return Math.min(prev, cur);\n            }, Number.MAX_VALUE);\n            var maxY = yarr.reduce(function (prev, cur) {\n              return Math.max(prev, cur);\n            }, -Number.MAX_VALUE);\n            return new rectangle_1.Rectangle(minX, minY, maxX - minX, maxY - minY);\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(Connector.prototype, \"skippedRenderPoints\", {\n          get: function get() {\n            return this.renderPoints ? this.renderPoints.filter(function (p) {\n              return p.skipped;\n            }) : undefined;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(Connector.prototype, \"shouldChangeRenderPoints\", {\n          get: function get() {\n            return this.renderPoints !== undefined && this.routingStrategy !== undefined;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        Connector.prototype.assign = function (item) {\n          _super.prototype.assign.call(this, item);\n\n          item.beginItem = this.beginItem;\n          item.beginConnectionPointIndex = this.beginConnectionPointIndex;\n          item.endItem = this.endItem;\n          item.endConnectionPointIndex = this.endConnectionPointIndex;\n          item.properties = this.properties.clone();\n          item.texts = this.texts.clone();\n          if (this.routingStrategy !== undefined) item.routingStrategy = this.routingStrategy.clone();\n          if (this.renderPoints !== undefined) item.renderPoints = this.renderPoints.map(function (p) {\n            return p.clone();\n          });\n          if (this.renderPointsWithoutSkipped !== undefined) item.renderPointsWithoutSkipped = this.renderPointsWithoutSkipped.map(function (p) {\n            return p.clone();\n          });\n          if (this.actualRoutingMode !== undefined) item.actualRoutingMode = this.actualRoutingMode;\n          if (this.lockCreateRenderPoints !== undefined) item.lockCreateRenderPoints = this.lockCreateRenderPoints;\n          if (this.shouldInvalidateRenderPoints !== undefined) item.shouldInvalidateRenderPoints = this.shouldInvalidateRenderPoints;\n        };\n\n        Connector.prototype.clone = function () {\n          var clone = new Connector(this.points);\n          this.assign(clone);\n          return clone;\n        };\n\n        Connector.prototype.getTextCount = function () {\n          return this.texts.count();\n        };\n\n        Connector.prototype.getText = function (position) {\n          if (position === void 0) {\n            position = exports.CONNECTOR_DEFAULT_TEXT_POSITION;\n          }\n\n          var textObj = this.texts.get(position);\n          return textObj ? textObj.value : \"\";\n        };\n\n        Connector.prototype.setText = function (text, position) {\n          if (position === void 0) {\n            position = exports.CONNECTOR_DEFAULT_TEXT_POSITION;\n          }\n\n          if (!text || text === \"\") this.texts.remove(position);else this.texts.set(position, new ConnectorTexts_1.ConnectorText(position, text));\n        };\n\n        Connector.prototype.getTextPoint = function (position) {\n          var points = this.getRenderPoints();\n          return Utils_2.GeometryUtils.getPathPointByPosition(points, position)[0];\n        };\n\n        Connector.prototype.getTextPositionByPoint = function (point) {\n          var points = this.getRenderPoints();\n          var length = Utils_2.GeometryUtils.getPathLength(points);\n          var pos = Utils_2.GeometryUtils.getPathPositionByPoint(points, point);\n          var minTextHeight = unit_converter_1.UnitConverter.pointsToTwips(parseInt(this.styleText[\"font-size\"]));\n          if (minTextHeight > pos * length) return minTextHeight / length;\n          if (minTextHeight > length - pos * length) return (length - minTextHeight) / length;\n          return pos;\n        };\n\n        Connector.prototype.getTextRectangle = function (position) {\n          return rectangle_1.Rectangle.fromGeometry(this.getTextPoint(position), new size_1.Size(0, 0));\n        };\n\n        Connector.prototype.getRenderPoints = function (keepSkipped) {\n          if (keepSkipped === void 0) {\n            keepSkipped = false;\n          }\n\n          if (this.shouldInvalidateRenderPoints === undefined || this.shouldInvalidateRenderPoints) {\n            this.shouldInvalidateRenderPoints = false;\n            if (!this.routingStrategy) this.changeRenderPoints(this.getCalculator().getPoints());else if (!this.lockCreateRenderPoints) {\n              this.changeRenderPoints(new ConnectorPointsOrthogonalCalculator_1.ConnectorPointsOrthogonalCalculator(this).getPoints());\n\n              if (this.actualRoutingMode !== Settings_1.ConnectorRoutingMode.None && this.points && this.renderPoints) {\n                var beginPoint = this.points[0];\n                var endPoint = this.points[this.points.length - 1];\n\n                if (!beginPoint.equals(endPoint)) {\n                  var newRenderPoints = this.routingStrategy.createRenderPoints(this.points, this.renderPoints, this.beginItem, this.endItem, this.beginConnectionPointIndex, this.endConnectionPointIndex, ModelUtils_1.ModelUtils.getConnectorContainer(this));\n\n                  if (newRenderPoints) {\n                    this.changeRenderPoints(newRenderPoints);\n                    this.actualRoutingMode = Settings_1.ConnectorRoutingMode.AllShapesOnly;\n                  } else this.actualRoutingMode = Settings_1.ConnectorRoutingMode.None;\n                }\n              }\n            }\n          }\n\n          return keepSkipped ? this.renderPoints : this.renderPointsWithoutSkipped;\n        };\n\n        Connector.prototype.createRenderPointsContext = function () {\n          return this.shouldChangeRenderPoints ? new ConnectorRenderPointsContext_1.ConnectorRenderPointsContext(this.renderPoints.map(function (p) {\n            return p.clone();\n          }), this.lockCreateRenderPoints, this.actualRoutingMode) : undefined;\n        };\n\n        Connector.prototype.updatePointsOnPageResize = function (offsetX, offsetY) {\n          this.points = this.points.map(function (p) {\n            return p.clone().offset(offsetX, offsetY);\n          });\n          if (this.renderPoints) this.changeRenderPoints(this.renderPoints.map(function (p) {\n            var result = p.clone().offset(offsetX, offsetY);\n            result.pointIndex = p.pointIndex;\n            result.skipped = p.skipped;\n            return result;\n          }));\n        };\n\n        Connector.prototype.addPoint = function (pointIndex, point) {\n          this.points.splice(pointIndex, 0, point);\n        };\n\n        Connector.prototype.deletePoint = function (pointIndex) {\n          this.points.splice(pointIndex, 1);\n        };\n\n        Connector.prototype.movePoint = function (pointIndex, point) {\n          this.points[pointIndex] = point;\n        };\n\n        Connector.prototype.onAddPoint = function (pointIndex, point) {\n          if (this.shouldChangeRenderPoints) this.replaceRenderPointsCore(this.routingStrategy.onAddPoint(this.points, pointIndex, point, this.renderPoints), true, Settings_1.ConnectorRoutingMode.AllShapesOnly);else this.invalidateRenderPoints();\n        };\n\n        Connector.prototype.onDeletePoint = function (pointIndex) {\n          if (this.shouldChangeRenderPoints) this.replaceRenderPointsCore(this.routingStrategy.onDeletePoint(this.points, pointIndex, this.renderPoints), this.points.length > 2, Settings_1.ConnectorRoutingMode.AllShapesOnly);else this.invalidateRenderPoints();\n        };\n\n        Connector.prototype.onDeleteUnnecessaryPoints = function (unnecessaryPoints) {\n          if (this.shouldChangeRenderPoints) {\n            var necessaryPoints = ModelUtils_1.ModelUtils.createNecessaryRenderPoints(this.renderPoints, unnecessaryPoints);\n            if (necessaryPoints.length > 0) this.replaceRenderPointsCore(ModelUtils_1.ModelUtils.validateRenderPointIndexes(this.points, necessaryPoints, 0), this.lockCreateRenderPoints, Settings_1.ConnectorRoutingMode.AllShapesOnly);\n          } else this.invalidateRenderPoints();\n        };\n\n        Connector.prototype.onMovePoint = function (pointIndex, point) {\n          if (this.shouldChangeRenderPoints) {\n            if (pointIndex === 0 || pointIndex === this.points.length - 1) this.lockCreateRenderPoints = false;\n            this.replaceRenderPointsCore(this.routingStrategy.onMovePoint(this.points, pointIndex, point, this.renderPoints), this.lockCreateRenderPoints, Settings_1.ConnectorRoutingMode.AllShapesOnly);\n          } else this.invalidateRenderPoints();\n        };\n\n        Connector.prototype.replaceRenderPoints = function (context) {\n          if (context !== undefined) this.replaceRenderPointsCore(context.renderPoints, context.lockCreateRenderPoints, context.actualRoutingMode);else this.invalidateRenderPoints();\n        };\n\n        Connector.prototype.clearRenderPoints = function () {\n          this.changeRenderPoints(undefined);\n          this.lockCreateRenderPoints = false;\n          this.actualRoutingMode = undefined;\n          this.invalidateRenderPoints();\n        };\n\n        Connector.prototype.replaceRenderPointsCore = function (renderPoints, lockCreateRenderPoints, mode) {\n          this.changeRenderPoints(renderPoints);\n          this.lockCreateRenderPoints = lockCreateRenderPoints;\n          this.actualRoutingMode = mode;\n          this.invalidateRenderPoints();\n        };\n\n        Connector.prototype.changeRenderPoints = function (renderPoints) {\n          this.renderPoints = renderPoints;\n          this.renderPointsWithoutSkipped = renderPoints ? this.renderPoints.filter(function (pt) {\n            return !pt.skipped;\n          }) : undefined;\n        };\n\n        Connector.prototype.getCalculator = function () {\n          return this.properties.lineOption === ConnectorProperties_1.ConnectorLineOption.Straight ? new ConnectorPointsCalculator_1.ConnectorPointsCalculator(this) : new ConnectorPointsOrthogonalCalculator_1.ConnectorPointsOrthogonalCalculator(this);\n        };\n\n        Connector.prototype.invalidateRenderPoints = function () {\n          this.shouldInvalidateRenderPoints = true;\n        };\n\n        Connector.prototype.createPrimitives = function () {\n          var result = [];\n          var points = this.getRenderPoints();\n          var path = new PathPrimitive_1.PathPrimitive(points.map(function (pt, index) {\n            return index === 0 ? new PathPrimitive_1.PathPrimitiveMoveToCommand(pt.x, pt.y) : new PathPrimitive_1.PathPrimitiveLineToCommand(pt.x, pt.y);\n          }), this.style);\n          result.push(path);\n          result = result.concat(this.createLineEndingPrimitives(points, path));\n          result = result.concat(this.createTextPrimitives());\n          return result;\n        };\n\n        Connector.prototype.createLineEndingPrimitives = function (points, connectorPath) {\n          var result = [];\n\n          if (points.length > 1) {\n            var lineEndingInfo = [{\n              strategy: this.createLineEndingStrategy(this.properties.startLineEnding),\n              point1: points[0],\n              point2: points[1]\n            }, {\n              strategy: this.createLineEndingStrategy(this.properties.endLineEnding),\n              point1: points[points.length - 1],\n              point2: points[points.length - 2]\n            }];\n            lineEndingInfo.forEach(function (info) {\n              var strategy = info.strategy;\n\n              if (strategy.hasCommands()) {\n                var lineEndingPath = connectorPath;\n                if (strategy.needCreateSeparatePrimitive()) result.push(lineEndingPath = strategy.createPrimitive());\n                lineEndingPath.commands = lineEndingPath.commands.concat(strategy.createCommands(info.point1, info.point2));\n              }\n            });\n          }\n\n          return result;\n        };\n\n        Connector.prototype.createLineEndingStrategy = function (lineEnding) {\n          switch (lineEnding) {\n            case ConnectorProperties_1.ConnectorLineEnding.None:\n              return new ConnectorLineEndingStrategies_1.ConnectorLineEndingNoneStrategy(this.style);\n\n            case ConnectorProperties_1.ConnectorLineEnding.Arrow:\n              return new ConnectorLineEndingStrategies_1.ConnectorLineEndingArrowStrategy(this.style);\n\n            case ConnectorProperties_1.ConnectorLineEnding.OutlinedTriangle:\n              return new ConnectorLineEndingStrategies_1.ConnectorLineEndingOutlinedTriangleStrategy(this.style);\n\n            case ConnectorProperties_1.ConnectorLineEnding.FilledTriangle:\n              return new ConnectorLineEndingStrategies_1.ConnectorLineEndingFilledTriangleStrategy(this.style);\n\n            default:\n              return new ConnectorLineEndingStrategies_1.ConnectorLineEndingStrategy(this.style);\n          }\n        };\n\n        Connector.prototype.createSelectorPrimitives = function () {\n          var result = [];\n          var points = this.getRenderPoints();\n          result.push(new PathPrimitive_1.PathPrimitive(points.map(function (pt, index) {\n            if (index === 0) return new PathPrimitive_1.PathPrimitiveMoveToCommand(pt.x, pt.y);else return new PathPrimitive_1.PathPrimitiveLineToCommand(pt.x, pt.y);\n          }), null, \"selector\"));\n          return result;\n        };\n\n        Connector.prototype.createTextPrimitives = function () {\n          var _this = this;\n\n          if (!this.enableText) return [];\n          var result = [];\n          this.texts.forEach(function (textObj) {\n            var text = _this.getText(textObj.position);\n\n            if (text && text !== \"\") {\n              var pt = _this.getTextPoint(textObj.position);\n\n              result = result.concat([new TextPrimitive_1.TextPrimitive(pt.x, pt.y, text, ITextMeasurer_1.TextOwner.Connector, undefined, undefined, undefined, _this.styleText, true, null, CanvasManagerBase_1.PAGE_BG_TEXTFLOOR_FILTER_ID, undefined, function (el) {\n                Utils_1.RenderUtils.setElementEventData(el, Event_1.MouseEventElementType.ConnectorText, _this.key, textObj.position);\n              })]);\n            }\n          });\n          return result;\n        };\n\n        Connector.prototype.getExtremeItem = function (position) {\n          if (position === ConnectorPosition.Begin) return this.beginItem;\n          if (position === ConnectorPosition.End) return this.endItem;\n          return null;\n        };\n\n        Connector.prototype.getExtremeConnectionPointIndex = function (position) {\n          if (position === ConnectorPosition.Begin) return this.beginConnectionPointIndex;\n          if (position === ConnectorPosition.End) return this.endConnectionPointIndex;\n          return -1;\n        };\n\n        Connector.prototype.getMinX = function () {\n          var points = this.getRenderPoints();\n          var xarr = points.map(function (p) {\n            return p.x;\n          });\n          return xarr.reduce(function (prev, cur) {\n            return Math.min(prev, cur);\n          }, Number.MAX_VALUE);\n        };\n\n        Connector.prototype.getMinY = function () {\n          var points = this.getRenderPoints();\n          var yarr = points.map(function (p) {\n            return p.y;\n          });\n          return yarr.reduce(function (prev, cur) {\n            return Math.min(prev, cur);\n          }, Number.MAX_VALUE);\n        };\n\n        Connector.prototype.getConnectionPoints = function () {\n          return [];\n        }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n        Connector.prototype.getConnectionPointSide = function (point, targetPoint) {\n          return DiagramItem_1.ConnectionPointSide.Undefined;\n        };\n\n        Connector.prototype.getSegments = function () {\n          var result = [];\n          var renderPoints = this.getRenderPoints();\n          renderPoints.forEach(function (pt, index) {\n            if (index > 0) result.push(new segment_1.Segment(renderPoints[index - 1], pt));\n          });\n          return result;\n        };\n\n        Connector.prototype.intersectedByRect = function (rect) {\n          return this.getSegments().some(function (s) {\n            return s.isIntersectedByRect(rect);\n          });\n        };\n\n        Connector.prototype.toNative = function (units) {\n          var item = new NativeItem_1.NativeConnector(this.key, this.dataKey);\n          item.fromKey = this.beginItem && this.beginItem.dataKey;\n          item.toKey = this.endItem && this.endItem.dataKey;\n          item.texts = this.texts.map(function (t) {\n            return t;\n          }).sort(function (a, b) {\n            return a.position - b.position;\n          }).map(function (a) {\n            return a.value;\n          });\n          item.fromId = this.beginItem && this.beginItem.key;\n          item.fromPointIndex = this.beginConnectionPointIndex;\n          item.toId = this.endItem && this.endItem.key;\n          item.toPointIndex = this.endConnectionPointIndex;\n          item.points = this.points.map(function (pt) {\n            return pt.clone();\n          });\n          item.applyUnits(units);\n          return item;\n        };\n\n        Connector.minOffset = unit_converter_1.UnitConverter.pixelsToTwips(24);\n        Connector.minTextHeight = unit_converter_1.UnitConverter.pixelsToTwips(12);\n        return Connector;\n      }(DiagramItem_1.DiagramItem);\n\n      exports.Connector = Connector;\n      /***/\n    },\n    /* 8 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ShapeDescription = exports.ShapeTextPadding = exports.ShapeDefaultSize = exports.ShapeMinDimension = exports.ShapeDefaultDimension = void 0;\n\n      var unit_converter_1 = __webpack_require__(12);\n\n      var size_1 = __webpack_require__(2);\n\n      var LocalizationService_1 = __webpack_require__(35);\n\n      var ITextMeasurer_1 = __webpack_require__(42);\n\n      var RectaglePrimitive_1 = __webpack_require__(21);\n\n      var TextPrimitive_1 = __webpack_require__(60);\n\n      var Utils_1 = __webpack_require__(3);\n\n      var ConnectionPoint_1 = __webpack_require__(44);\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      exports.ShapeDefaultDimension = 1440;\n      exports.ShapeMinDimension = 360;\n      exports.ShapeDefaultSize = new size_1.Size(exports.ShapeDefaultDimension, exports.ShapeDefaultDimension);\n      exports.ShapeTextPadding = unit_converter_1.UnitConverter.pixelsToTwips(10);\n\n      var ShapeDescription =\n      /** @class */\n      function () {\n        function ShapeDescription(defaultSize, hasDefaultText) {\n          if (defaultSize === void 0) {\n            defaultSize = exports.ShapeDefaultSize.clone();\n          }\n\n          this.defaultSize = defaultSize;\n          this.hasDefaultText = hasDefaultText;\n          this.onChanged = new Utils_1.EventDispatcher();\n          this.connectionPoints = this.createConnectionPoints();\n        }\n\n        Object.defineProperty(ShapeDescription.prototype, \"enableText\", {\n          get: function get() {\n            return true;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ShapeDescription.prototype, \"allowEditText\", {\n          get: function get() {\n            return true;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ShapeDescription.prototype, \"enableImage\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ShapeDescription.prototype, \"allowEditImage\", {\n          get: function get() {\n            return true;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ShapeDescription.prototype, \"hasTemplate\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ShapeDescription.prototype, \"enableChildren\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ShapeDescription.prototype, \"minWidth\", {\n          get: function get() {\n            return undefined;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ShapeDescription.prototype, \"minHeight\", {\n          get: function get() {\n            return undefined;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ShapeDescription.prototype, \"maxWidth\", {\n          get: function get() {\n            return undefined;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ShapeDescription.prototype, \"maxHeight\", {\n          get: function get() {\n            return undefined;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ShapeDescription.prototype, \"toolboxSize\", {\n          get: function get() {\n            return this.defaultSize;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ShapeDescription.prototype.getTitle = function () {\n          return LocalizationService_1.DiagramLocalizationService.shapeTexts[this.key];\n        };\n\n        ShapeDescription.prototype.getDefaultText = function () {\n          return this.hasDefaultText ? LocalizationService_1.DiagramLocalizationService.shapeTexts[this.key] : \"\";\n        };\n\n        ShapeDescription.prototype.getDefaultImageUrl = function () {\n          return \"\";\n        };\n\n        ShapeDescription.prototype.getConnectionPoints = function () {\n          return this.connectionPoints;\n        };\n\n        ShapeDescription.prototype.createConnectionPoints = function () {\n          return [new ConnectionPoint_1.ConnectionPoint(0.5, 0, DiagramItem_1.ConnectionPointSide.North), new ConnectionPoint_1.ConnectionPoint(1, 0.5, DiagramItem_1.ConnectionPointSide.East), new ConnectionPoint_1.ConnectionPoint(0.5, 1, DiagramItem_1.ConnectionPointSide.South), new ConnectionPoint_1.ConnectionPoint(0, 0.5, DiagramItem_1.ConnectionPointSide.West)];\n        };\n\n        ShapeDescription.prototype.processConnectionPoint = function (shape, point) {};\n\n        ShapeDescription.prototype.getConnectionPointIndexForItem = function (item, connectionPointIndex) {\n          return connectionPointIndex;\n        };\n\n        ShapeDescription.prototype.getConnectionPointIndexForSide = function (side) {\n          return side;\n        };\n\n        ShapeDescription.prototype.createParameters = function (parameters) {};\n\n        ShapeDescription.prototype.normalizeParameters = function (shape, parameters) {};\n\n        ShapeDescription.prototype.modifyParameters = function (shape, parameters, deltaX, deltaY) {\n          throw Error(\"Not implemented\");\n        };\n\n        ShapeDescription.prototype.changeParameterValue = function (parameters, key, change) {\n          var p = parameters.get(key);\n          p.value = change(p);\n        };\n\n        ShapeDescription.prototype.getParameterPoints = function (shape) {\n          return [];\n        };\n\n        ShapeDescription.prototype.getExpandedSize = function (shape) {\n          return shape.size;\n        };\n\n        ShapeDescription.prototype.getCollapsedSize = function (shape) {\n          return shape.size;\n        };\n\n        ShapeDescription.prototype.getToolboxHeightToWidthRatio = function (width, height) {\n          return height / width;\n        };\n\n        ShapeDescription.prototype.allowResizeHorizontally = function (_shape) {\n          return true;\n        };\n\n        ShapeDescription.prototype.allowResizeVertically = function (_shape) {\n          return true;\n        };\n\n        ShapeDescription.prototype.createPrimitives = function (shape, forToolbox) {\n          var primitives = [];\n          primitives = primitives.concat(this.createShapePrimitives(shape, forToolbox));\n          if (this.enableImage) primitives = primitives.concat(this.createImagePrimitives(shape, forToolbox));\n          if (this.enableText) primitives = primitives.concat(this.createTextPrimitives(shape, forToolbox));\n          return primitives;\n        };\n\n        ShapeDescription.prototype.createImagePrimitives = function (_shape, _forToolbox) {\n          return [];\n        };\n\n        ShapeDescription.prototype.createTextPrimitives = function (shape, forToolbox) {\n          if (shape.text === undefined || shape.text === \"\") return [];\n          var rect = this.getTextRectangle(shape);\n          return [new TextPrimitive_1.TextPrimitive(rect.x, rect.y, shape.text, ITextMeasurer_1.TextOwner.Shape, rect.width, rect.height, ShapeDescription.textSpacing, shape.styleText, false, this.getTextClipPathId(forToolbox), undefined, this.getTextAngle())];\n        };\n\n        ShapeDescription.prototype.getTextClipPathId = function (_forToolbox) {\n          return undefined;\n        };\n\n        ShapeDescription.prototype.getTextAngle = function () {\n          return TextPrimitive_1.TextAngle.Angle0deg;\n        };\n\n        ShapeDescription.prototype.getClientRectangle = function (shape) {\n          return shape.rectangle;\n        };\n\n        ShapeDescription.prototype.getTextEditRectangle = function (shape) {\n          return this.getTextRectangle(shape);\n        };\n\n        ShapeDescription.prototype.createSelectorPrimitives = function (shape) {\n          return [new RectaglePrimitive_1.RectanglePrimitive(shape.position.x, shape.position.y, shape.size.width, shape.size.height, null, \"selector\")];\n        };\n\n        ShapeDescription.prototype.raiseShapeDescriptionChanged = function (description) {\n          this.onChanged.raise1(function (l) {\n            return l.notifyShapeDescriptionChanged(description);\n          });\n        };\n\n        ShapeDescription.textSpacing = unit_converter_1.UnitConverter.pixelsToTwips(2);\n        return ShapeDescription;\n      }();\n\n      exports.ShapeDescription = ShapeDescription;\n      /***/\n    },\n    /* 9 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.DiagramItem = exports.DEFAULT_ZINDEX = exports.ConnectionPointSide = void 0;\n\n      var Utils_1 = __webpack_require__(3);\n\n      var rectangle_1 = __webpack_require__(13);\n\n      var Style_1 = __webpack_require__(30);\n\n      var ConnectionPointSide;\n\n      (function (ConnectionPointSide) {\n        ConnectionPointSide[ConnectionPointSide[\"Undefined\"] = -1] = \"Undefined\";\n        ConnectionPointSide[ConnectionPointSide[\"North\"] = 0] = \"North\";\n        ConnectionPointSide[ConnectionPointSide[\"East\"] = 1] = \"East\";\n        ConnectionPointSide[ConnectionPointSide[\"South\"] = 2] = \"South\";\n        ConnectionPointSide[ConnectionPointSide[\"West\"] = 3] = \"West\";\n      })(ConnectionPointSide = exports.ConnectionPointSide || (exports.ConnectionPointSide = {}));\n\n      exports.DEFAULT_ZINDEX = 0;\n\n      var DiagramItem =\n      /** @class */\n      function () {\n        function DiagramItem() {\n          this.key = undefined;\n          this.dataKey = undefined;\n          this.customData = undefined;\n          this.attachedConnectors = [];\n          this.zIndex = exports.DEFAULT_ZINDEX;\n          this.locked = false;\n          this.container = undefined;\n          this.style = new Style_1.Style();\n          this.styleText = new Style_1.TextStyle();\n        }\n\n        DiagramItem.prototype.assign = function (item) {\n          item.key = this.key;\n          item.dataKey = this.dataKey;\n          item.customData = Utils_1.ObjectUtils.cloneObject(this.customData);\n          item.locked = this.locked;\n          item.attachedConnectors = this.attachedConnectors.slice();\n          item.style = this.style.clone();\n          item.styleText = this.styleText.clone();\n          item.zIndex = this.zIndex;\n          item.container = this.container;\n        };\n\n        DiagramItem.prototype.getConnectionPointPosition = function (index, targetPoint) {\n          return this.getConnectionPoint(index, targetPoint).toPoint();\n        };\n\n        DiagramItem.prototype.getConnectionPoint = function (index, targetPoint) {\n          if (index < 0 && targetPoint) index = this.getNearestConnectionPoint(targetPoint);\n          var connectionPoints = this.getConnectionPoints();\n          return connectionPoints[index] || connectionPoints[0];\n        };\n\n        DiagramItem.prototype.getNearestConnectionPoint = function (targetPoint) {\n          var distance = Number.MAX_VALUE;\n          var result;\n          this.getConnectionPoints().forEach(function (pt, index) {\n            var ptDistance = Utils_1.GeometryUtils.getDistance(pt, targetPoint);\n\n            if (ptDistance < distance) {\n              distance = ptDistance;\n              result = index;\n            }\n          });\n          return result;\n        };\n\n        DiagramItem.prototype.getConnectionPointIndex = function (side) {\n          var points = this.getConnectionPoints();\n          return points.reduce(function (prevIndex, pt, index) {\n            if (side === ConnectionPointSide.North && pt.y < points[prevIndex].y) return index;\n            if (side === ConnectionPointSide.South && pt.y > points[prevIndex].y) return index;\n            if (side === ConnectionPointSide.West && pt.x < points[prevIndex].x) return index;\n            if (side === ConnectionPointSide.East && pt.x > points[prevIndex].x) return index;\n            return prevIndex;\n          }, 0);\n        };\n\n        DiagramItem.prototype.getConnectionPointSideByIndex = function (index, targetPoint) {\n          var point = this.getConnectionPoint(index, targetPoint);\n          return this.getConnectionPointSide(point, targetPoint);\n        };\n\n        DiagramItem.prototype.getConnectionPointIndexForSide = function (side) {\n          return side;\n        };\n\n        Object.defineProperty(DiagramItem.prototype, \"enableText\", {\n          get: function get() {\n            return true;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DiagramItem.prototype, \"allowEditText\", {\n          get: function get() {\n            return true;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DiagramItem.prototype, \"hasTemplate\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DiagramItem.prototype, \"enableChildren\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DiagramItem.prototype, \"isLocked\", {\n          get: function get() {\n            return this.locked || this.container && this.container.isLocked;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DiagramItem.prototype, \"allowResizeHorizontally\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DiagramItem.prototype, \"allowResizeVertically\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DiagramItem.prototype, \"strokeWidth\", {\n          get: function get() {\n            return this.style.strokeWidth;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        DiagramItem.prototype.intersectedByRect = function (rect) {\n          return rectangle_1.Rectangle.areIntersected(this.rectangle, rect);\n        };\n\n        return DiagramItem;\n      }();\n\n      exports.DiagramItem = DiagramItem;\n      /***/\n    },\n    /* 10 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics4 = function extendStatics(d, b) {\n          _extendStatics4 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics4(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics4(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.SimpleCommandBase = void 0;\n\n      var CommandBase_1 = __webpack_require__(198);\n\n      var CommandStates_1 = __webpack_require__(199);\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var LocalizationService_1 = __webpack_require__(35);\n\n      var SimpleCommandBase =\n      /** @class */\n      function (_super) {\n        __extends(SimpleCommandBase, _super);\n\n        function SimpleCommandBase() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        SimpleCommandBase.prototype.getState = function () {\n          return new CommandStates_1.SimpleCommandState(this.isEnabled(), this.getValue(), this.getDefaultValue(), this.getItems(), this.isVisible());\n        };\n\n        SimpleCommandBase.prototype.isVisible = function () {\n          return true;\n        };\n\n        SimpleCommandBase.prototype.isEnabled = function () {\n          return !this.control.settings.readOnly || this.isEnabledInReadOnlyMode();\n        };\n\n        SimpleCommandBase.prototype.isEnabledInReadOnlyMode = function () {\n          return false;\n        };\n\n        SimpleCommandBase.prototype.getValue = function () {\n          return undefined;\n        };\n\n        SimpleCommandBase.prototype.getDefaultValue = function () {\n          return undefined;\n        };\n\n        SimpleCommandBase.prototype.getItems = function () {\n          return undefined;\n        };\n\n        SimpleCommandBase.prototype.getModelUnit = function (value) {\n          return ModelUtils_1.ModelUtils.getlUnitValue(this.control.model.units, value);\n        };\n\n        SimpleCommandBase.prototype.getModelUnitText = function (value) {\n          return ModelUtils_1.ModelUtils.getUnitText(this.control.model.units, LocalizationService_1.DiagramLocalizationService.unitItems, LocalizationService_1.DiagramLocalizationService.formatUnit, value);\n        };\n\n        SimpleCommandBase.prototype.getModelUnitTwipsValue = function (value) {\n          return ModelUtils_1.ModelUtils.getTwipsValue(this.control.model.units, value);\n        };\n\n        SimpleCommandBase.prototype.getViewUnit = function (value) {\n          return ModelUtils_1.ModelUtils.getlUnitValue(this.control.settings.viewUnits, value);\n        };\n\n        SimpleCommandBase.prototype.getViewUnitText = function (value) {\n          return ModelUtils_1.ModelUtils.getUnitText(this.control.settings.viewUnits, LocalizationService_1.DiagramLocalizationService.unitItems, LocalizationService_1.DiagramLocalizationService.formatUnit, value);\n        };\n\n        SimpleCommandBase.prototype.getViewUnitTwipsValue = function (value) {\n          return ModelUtils_1.ModelUtils.getTwipsValue(this.control.settings.viewUnits, value);\n        };\n\n        return SimpleCommandBase;\n      }(CommandBase_1.CommandBase);\n\n      exports.SimpleCommandBase = SimpleCommandBase;\n      /***/\n    },\n    /* 11 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics5 = function extendStatics(d, b) {\n          _extendStatics5 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics5(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics5(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.DiagramClipboardEvent = exports.DiagramKeyboardEvent = exports.DiagramContextMenuEvent = exports.DiagramWheelEvent = exports.DiagramMouseEvent = exports.DiagramMouseEventBase = exports.DiagramMouseEventTouch = exports.DiagramFocusEvent = exports.DiagramEvent = exports.ResizeEventSource = exports.MouseEventSource = exports.MouseEventElementType = exports.MouseButton = void 0;\n\n      var key_1 = __webpack_require__(25);\n\n      var MouseButton;\n\n      (function (MouseButton) {\n        MouseButton[MouseButton[\"None\"] = 0] = \"None\";\n        MouseButton[MouseButton[\"Left\"] = 1] = \"Left\";\n        MouseButton[MouseButton[\"Right\"] = 2] = \"Right\";\n        MouseButton[MouseButton[\"Middle\"] = 4] = \"Middle\";\n      })(MouseButton = exports.MouseButton || (exports.MouseButton = {}));\n\n      var MouseEventElementType;\n\n      (function (MouseEventElementType) {\n        MouseEventElementType[MouseEventElementType[\"Undefined\"] = 0] = \"Undefined\";\n        MouseEventElementType[MouseEventElementType[\"Background\"] = 1] = \"Background\";\n        MouseEventElementType[MouseEventElementType[\"Document\"] = 2] = \"Document\";\n        MouseEventElementType[MouseEventElementType[\"Connector\"] = 3] = \"Connector\";\n        MouseEventElementType[MouseEventElementType[\"ConnectorPoint\"] = 4] = \"ConnectorPoint\";\n        MouseEventElementType[MouseEventElementType[\"ConnectorSide\"] = 5] = \"ConnectorSide\";\n        MouseEventElementType[MouseEventElementType[\"ConnectorOrthogonalSide\"] = 6] = \"ConnectorOrthogonalSide\";\n        MouseEventElementType[MouseEventElementType[\"ConnectorText\"] = 7] = \"ConnectorText\";\n        MouseEventElementType[MouseEventElementType[\"Shape\"] = 8] = \"Shape\";\n        MouseEventElementType[MouseEventElementType[\"ShapeResizeBox\"] = 9] = \"ShapeResizeBox\";\n        MouseEventElementType[MouseEventElementType[\"ShapeParameterBox\"] = 10] = \"ShapeParameterBox\";\n        MouseEventElementType[MouseEventElementType[\"SelectionRect\"] = 11] = \"SelectionRect\";\n        MouseEventElementType[MouseEventElementType[\"ShapeConnectionPoint\"] = 12] = \"ShapeConnectionPoint\";\n        MouseEventElementType[MouseEventElementType[\"ShapeExpandButton\"] = 13] = \"ShapeExpandButton\";\n      })(MouseEventElementType = exports.MouseEventElementType || (exports.MouseEventElementType = {}));\n\n      var MouseEventSource =\n      /** @class */\n      function () {\n        function MouseEventSource(type, key, value) {\n          this.type = type;\n          this.key = key;\n          this.value = value;\n        }\n\n        return MouseEventSource;\n      }();\n\n      exports.MouseEventSource = MouseEventSource;\n      var ResizeEventSource;\n\n      (function (ResizeEventSource) {\n        ResizeEventSource[ResizeEventSource[\"Undefined\"] = 0] = \"Undefined\";\n        ResizeEventSource[ResizeEventSource[\"ResizeBox_NW\"] = 1] = \"ResizeBox_NW\";\n        ResizeEventSource[ResizeEventSource[\"ResizeBox_NE\"] = 2] = \"ResizeBox_NE\";\n        ResizeEventSource[ResizeEventSource[\"ResizeBox_SE\"] = 3] = \"ResizeBox_SE\";\n        ResizeEventSource[ResizeEventSource[\"ResizeBox_SW\"] = 4] = \"ResizeBox_SW\";\n        ResizeEventSource[ResizeEventSource[\"ResizeBox_N\"] = 5] = \"ResizeBox_N\";\n        ResizeEventSource[ResizeEventSource[\"ResizeBox_E\"] = 6] = \"ResizeBox_E\";\n        ResizeEventSource[ResizeEventSource[\"ResizeBox_S\"] = 7] = \"ResizeBox_S\";\n        ResizeEventSource[ResizeEventSource[\"ResizeBox_W\"] = 8] = \"ResizeBox_W\";\n      })(ResizeEventSource = exports.ResizeEventSource || (exports.ResizeEventSource = {}));\n\n      var DiagramEvent =\n      /** @class */\n      function () {\n        function DiagramEvent(modifiers) {\n          this.modifiers = modifiers;\n        }\n\n        return DiagramEvent;\n      }();\n\n      exports.DiagramEvent = DiagramEvent;\n\n      var DiagramFocusEvent =\n      /** @class */\n      function (_super) {\n        __extends(DiagramFocusEvent, _super);\n\n        function DiagramFocusEvent(inputText) {\n          var _this = _super.call(this, key_1.ModifierKey.None) || this;\n\n          _this.inputText = inputText;\n          return _this;\n        }\n\n        return DiagramFocusEvent;\n      }(DiagramEvent);\n\n      exports.DiagramFocusEvent = DiagramFocusEvent;\n\n      var DiagramMouseEventTouch =\n      /** @class */\n      function () {\n        function DiagramMouseEventTouch(offsetPoint, modelPoint) {\n          this.offsetPoint = offsetPoint;\n          this.modelPoint = modelPoint;\n        }\n\n        return DiagramMouseEventTouch;\n      }();\n\n      exports.DiagramMouseEventTouch = DiagramMouseEventTouch;\n\n      var DiagramMouseEventBase =\n      /** @class */\n      function (_super) {\n        __extends(DiagramMouseEventBase, _super);\n\n        function DiagramMouseEventBase(modifiers, offsetPoint, modelPoint, source) {\n          var _this = _super.call(this, modifiers) || this;\n\n          _this.offsetPoint = offsetPoint;\n          _this.modelPoint = modelPoint;\n          _this.source = source;\n          return _this;\n        }\n\n        return DiagramMouseEventBase;\n      }(DiagramEvent);\n\n      exports.DiagramMouseEventBase = DiagramMouseEventBase;\n\n      var DiagramMouseEvent =\n      /** @class */\n      function (_super) {\n        __extends(DiagramMouseEvent, _super);\n\n        function DiagramMouseEvent(modifiers, button, offsetPoint, modelPoint, source, touches) {\n          if (touches === void 0) {\n            touches = [];\n          }\n\n          var _this = _super.call(this, modifiers, offsetPoint, modelPoint, source) || this;\n\n          _this.button = button;\n          _this.touches = touches;\n          _this.scrollX = 0;\n          _this.scrollY = 0;\n          return _this;\n        }\n\n        return DiagramMouseEvent;\n      }(DiagramMouseEventBase);\n\n      exports.DiagramMouseEvent = DiagramMouseEvent;\n\n      var DiagramWheelEvent =\n      /** @class */\n      function (_super) {\n        __extends(DiagramWheelEvent, _super);\n\n        function DiagramWheelEvent(modifiers, deltaX, deltaY, offsetPoint, modelPoint, source) {\n          var _this = _super.call(this, modifiers, offsetPoint, modelPoint, source) || this;\n\n          _this.deltaX = deltaX;\n          _this.deltaY = deltaY;\n          return _this;\n        }\n\n        return DiagramWheelEvent;\n      }(DiagramMouseEventBase);\n\n      exports.DiagramWheelEvent = DiagramWheelEvent;\n\n      var DiagramContextMenuEvent =\n      /** @class */\n      function (_super) {\n        __extends(DiagramContextMenuEvent, _super);\n\n        function DiagramContextMenuEvent(modifiers, eventPoint, modelPoint) {\n          var _this = _super.call(this, modifiers) || this;\n\n          _this.eventPoint = eventPoint;\n          _this.modelPoint = modelPoint;\n          return _this;\n        }\n\n        return DiagramContextMenuEvent;\n      }(DiagramEvent);\n\n      exports.DiagramContextMenuEvent = DiagramContextMenuEvent;\n\n      var DiagramKeyboardEvent =\n      /** @class */\n      function (_super) {\n        __extends(DiagramKeyboardEvent, _super);\n\n        function DiagramKeyboardEvent(modifiers, keyCode, inputText) {\n          var _this = _super.call(this, modifiers) || this;\n\n          _this.keyCode = keyCode;\n          _this.inputText = inputText;\n          return _this;\n        }\n\n        DiagramKeyboardEvent.prototype.getShortcutCode = function () {\n          return this.modifiers | this.keyCode;\n        };\n\n        return DiagramKeyboardEvent;\n      }(DiagramEvent);\n\n      exports.DiagramKeyboardEvent = DiagramKeyboardEvent;\n\n      var DiagramClipboardEvent =\n      /** @class */\n      function (_super) {\n        __extends(DiagramClipboardEvent, _super);\n\n        function DiagramClipboardEvent(clipboardData) {\n          var _this = _super.call(this, key_1.ModifierKey.None) || this;\n\n          _this.clipboardData = clipboardData;\n          return _this;\n        }\n\n        return DiagramClipboardEvent;\n      }(DiagramEvent);\n\n      exports.DiagramClipboardEvent = DiagramClipboardEvent;\n      /***/\n    },\n    /* 12 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var UnitConverter = function () {\n        function UnitConverter() {}\n\n        UnitConverter.hundredthsOfMillimeterToTwipsRound = function (value) {\n          return Math.round(1440 * value / 2540.0);\n        };\n\n        UnitConverter.documentsToTwips = function (value) {\n          return 24 * value / 5;\n        };\n\n        UnitConverter.pixelsToTwips = function (value) {\n          return Math.round(UnitConverter.pixelsToTwipsF(value));\n        };\n\n        UnitConverter.pixelsToTwipsCustomDpi = function (value, dpi) {\n          return Math.round(UnitConverter.pixelsToTwipsFCustomDpi(value, dpi));\n        };\n\n        UnitConverter.inchesToTwips = function (value) {\n          return Math.round(UnitConverter.inchesToTwipsF(value));\n        };\n\n        UnitConverter.pointsToTwips = function (value) {\n          return Math.round(UnitConverter.pointsToTwipsF(value));\n        };\n\n        UnitConverter.picasToTwips = function (value) {\n          return Math.round(value * 1440 / UnitConverter.PICAS_PER_INCH);\n        };\n\n        UnitConverter.centimetersToTwips = function (value) {\n          return Math.round(UnitConverter.centimetersToTwipsF(value));\n        };\n\n        UnitConverter.pixelsToTwipsF = function (value) {\n          return value * 1440 / UnitConverter.DPI;\n        };\n\n        UnitConverter.pixelsToTwipsFCustomDpi = function (value, dpi) {\n          return value * 1440 / dpi;\n        };\n\n        UnitConverter.inchesToTwipsF = function (value) {\n          return value * 1440;\n        };\n\n        UnitConverter.pointsToTwipsF = function (value) {\n          return value * 20;\n        };\n\n        UnitConverter.centimetersToTwipsF = function (value) {\n          return value * 1440 / UnitConverter.CENTIMETERS_PER_INCH;\n        };\n\n        UnitConverter.twipsToDegrees = function (value) {\n          return value / 60000;\n        };\n\n        UnitConverter.twipsToRadians = function (value) {\n          return value / 60000 * Math.PI / 180;\n        };\n\n        UnitConverter.degreesToTwips = function (value) {\n          return value * 60000;\n        };\n\n        UnitConverter.radiansToTwips = function (value) {\n          return value * 60000 / Math.PI * 180;\n        };\n\n        UnitConverter.radiansToDegrees = function (value) {\n          return value / Math.PI * 180;\n        };\n\n        UnitConverter.twipsToFD = function (value) {\n          return Math.round(value * 2048 / 1875);\n        };\n\n        UnitConverter.fdToTwips = function (value) {\n          return Math.round(value * 1875 / 2048);\n        };\n\n        UnitConverter.emuToTwips = function (val) {\n          return val / 635;\n        };\n\n        UnitConverter.twipsToPixels = function (value) {\n          return Math.round(UnitConverter.twipsToPixelsF(value));\n        };\n\n        UnitConverter.inchesToPixels = function (value) {\n          return Math.round(UnitConverter.DPI * value);\n        };\n\n        UnitConverter.centimeterToPixel = function (value) {\n          return Math.round(value / (UnitConverter.CENTIMETERS_PER_INCH / UnitConverter.DPI));\n        };\n\n        UnitConverter.millimetersToPixel = function (value) {\n          return Math.round(value / (UnitConverter.CENTIMETERS_PER_INCH / UnitConverter.DPI) / 10);\n        };\n\n        UnitConverter.pointsToPixels = function (value) {\n          return Math.round(value * UnitConverter.DPI / 72);\n        };\n\n        UnitConverter.pointsToPixelsF = function (value) {\n          return value * UnitConverter.DPI / 72;\n        };\n\n        UnitConverter.twipsToPixelsF = function (value) {\n          return value * UnitConverter.DPI / 1440;\n        };\n\n        UnitConverter.pixelsToPoints = function (value) {\n          return Math.round(value * 72 / UnitConverter.DPI);\n        };\n\n        UnitConverter.pixelsToPointsF = function (value) {\n          return value * 72 / UnitConverter.DPI;\n        };\n\n        UnitConverter.twipsToPoints = function (value) {\n          return Math.round(this.twipsToPointsF(value));\n        };\n\n        UnitConverter.twipsToPointsF = function (value) {\n          return value / 20;\n        };\n\n        UnitConverter.twipsToInches = function (value) {\n          return value / 1440;\n        };\n\n        UnitConverter.pixelsToInches = function (value) {\n          return value / UnitConverter.DPI;\n        };\n\n        UnitConverter.twipsToCentimeters = function (value) {\n          return value * UnitConverter.CENTIMETERS_PER_INCH / 1440;\n        };\n\n        UnitConverter.pixelToCentimeters = function (value) {\n          return value * UnitConverter.CENTIMETERS_PER_INCH / UnitConverter.DPI;\n        };\n\n        UnitConverter.twipsToHundredthsOfMillimeter = function (value) {\n          return Math.round(127 * value / 72);\n        };\n\n        UnitConverter.pixelsToHundredthsOfMillimeter = function (value) {\n          return Math.round(2540 * value / UnitConverter.DPI);\n        };\n\n        UnitConverter.hundredthsOfMillimeterToTwips = function (value) {\n          return 15 * value / 127;\n        };\n\n        UnitConverter.twipsToEmu = function (val) {\n          return val * 635;\n        };\n\n        UnitConverter.twipsToDegree = function (value) {\n          return value / 60000;\n        };\n\n        UnitConverter.DPI = 96;\n        UnitConverter.CENTIMETERS_PER_INCH = 2.54;\n        UnitConverter.PICAS_PER_INCH = 6;\n        return UnitConverter;\n      }();\n\n      exports.UnitConverter = UnitConverter;\n      /***/\n    },\n    /* 13 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var flag_1 = __webpack_require__(163);\n\n      var algorithms_1 = __webpack_require__(164);\n\n      var fixed_1 = __webpack_require__(107);\n\n      var point_1 = __webpack_require__(1);\n\n      var size_1 = __webpack_require__(2);\n\n      var Rectangle = function () {\n        function Rectangle(x, y, width, height) {\n          this.x = x;\n          this.y = y;\n          this.width = width;\n          this.height = height;\n        }\n\n        Object.defineProperty(Rectangle.prototype, \"right\", {\n          get: function get() {\n            return this.x + this.width;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(Rectangle.prototype, \"bottom\", {\n          get: function get() {\n            return this.y + this.height;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(Rectangle.prototype, \"center\", {\n          get: function get() {\n            return Rectangle.center(this);\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        Rectangle.prototype.createRectangle = function () {\n          return new Rectangle(this.x, this.y, this.width, this.height);\n        };\n\n        Rectangle.prototype.createSize = function () {\n          return new size_1.Size(this.width, this.height);\n        };\n\n        Rectangle.prototype.createPosition = function () {\n          return new point_1.Point(this.x, this.y);\n        };\n\n        Rectangle.prototype.createVerticalInterval = function () {\n          return new fixed_1.FixedInterval(this.y, this.height);\n        };\n\n        Rectangle.prototype.createHorizontalInterval = function () {\n          return new fixed_1.FixedInterval(this.x, this.width);\n        };\n\n        Rectangle.fromGeometry = function (point, size) {\n          return new Rectangle(point.x, point.y, size.width, size.height);\n        };\n\n        Rectangle.fromPoints = function (pointA, pointB) {\n          var x = Math.min(pointA.x, pointB.x);\n          var y = Math.min(pointA.y, pointB.y);\n          var width = Math.abs(pointA.x - pointB.x);\n          var height = Math.abs(pointA.y - pointB.y);\n          return new Rectangle(x, y, width, height);\n        };\n\n        Rectangle.fromPositions = function (x1, y1, x2, y2) {\n          var x = Math.min(x1, x2);\n          var y = Math.min(y1, y2);\n          var width = Math.abs(x2 - x1);\n          var height = Math.abs(y2 - y1);\n          return new Rectangle(x, y, width, height);\n        };\n\n        Rectangle.fromCenter = function (center, minRadius) {\n          return new Rectangle(center.x - minRadius, center.y - minRadius, minRadius * 2, minRadius * 2);\n        };\n\n        Rectangle.prototype.isCollapsed = function () {\n          return this.width === 0 || this.height === 0;\n        };\n\n        Rectangle.prototype.isEmpty = function () {\n          return this.x === 0 && this.y === 0 && this.width === 0 && this.height === 0;\n        };\n\n        Rectangle.prototype.toString = function () {\n          return JSON.stringify(this);\n        };\n\n        Rectangle.prototype.setPosition = function (pos) {\n          this.x = pos.x;\n          this.y = pos.y;\n          return this;\n        };\n\n        Rectangle.prototype.setSize = function (size) {\n          this.width = size.width;\n          this.height = size.height;\n          return this;\n        };\n\n        Rectangle.prototype.setGeomerty = function (rect) {\n          this.x = rect.x;\n          this.y = rect.y;\n          this.width = rect.width;\n          this.height = rect.height;\n          return this;\n        };\n\n        Rectangle.prototype.moveRectangle = function (offsetX, offsetY) {\n          this.x += offsetX;\n          this.y += offsetY;\n          return this;\n        };\n\n        Rectangle.prototype.moveRectangleByPoint = function (offset) {\n          this.x += offset.x;\n          this.y += offset.y;\n          return this;\n        };\n\n        Rectangle.prototype.resize = function (deltaX, deltaY) {\n          this.width += deltaX;\n          this.height += deltaY;\n          return this;\n        };\n\n        Rectangle.prototype.nonNegativeSize = function () {\n          if (this.width < 0) this.width = 0;\n          if (this.height < 0) this.height = 0;\n          return this;\n        };\n\n        Rectangle.prototype.multiply = function (multiplierX, multiplierY) {\n          this.x *= multiplierX;\n          this.y *= multiplierY;\n          this.width *= multiplierX;\n          this.height *= multiplierY;\n          return this;\n        };\n\n        Rectangle.prototype.equals = function (obj) {\n          return Rectangle.equals(this, obj);\n        };\n\n        Rectangle.prototype.clone = function () {\n          var rect = new Rectangle(0, 0, 0, 0);\n          rect.copyFrom(this);\n          return rect;\n        };\n\n        Rectangle.prototype.copyFrom = function (obj) {\n          this.x = obj.x;\n          this.y = obj.y;\n          this.width = obj.width;\n          this.height = obj.height;\n        };\n\n        Rectangle.prototype.containsPoint = function (point) {\n          return Rectangle.containsPoint(this, point);\n        };\n\n        Rectangle.prototype.containsRectangle = function (rectangle) {\n          return this.x <= rectangle.x && this.right >= rectangle.right && this.y <= rectangle.y && this.bottom >= rectangle.bottom;\n        };\n\n        Rectangle.prototype.inflate = function (deltaX, deltaY) {\n          if (deltaY === void 0) {\n            deltaY = deltaX;\n          }\n\n          this.x -= deltaX;\n          this.y -= deltaY;\n          this.width += deltaX * 2;\n          this.height += deltaY * 2;\n          return this;\n        };\n\n        Rectangle.prototype.applyOffsetsInside = function (offsets) {\n          this.x += offsets.left;\n          this.y += offsets.top;\n          this.width -= offsets.left + offsets.right;\n          this.height -= offsets.top + offsets.bottom;\n          return this;\n        };\n\n        Rectangle.prototype.applyNormalizedOffsetsInside = function (offsets) {\n          var left = Math.max(0, offsets.left);\n          var right = Math.max(0, offsets.right);\n          var horSum = left + right;\n\n          if (horSum !== 0) {\n            if (horSum <= this.width) {\n              this.x += left;\n              this.width -= horSum;\n            } else {\n              this.x += this.width * (left / horSum);\n              this.width = 0;\n            }\n          }\n\n          var top = Math.max(0, offsets.top);\n          var bottom = Math.max(0, offsets.bottom);\n          var vertSum = top + bottom;\n\n          if (vertSum !== 0) {\n            if (vertSum <= this.height) {\n              this.y += top;\n              this.height -= vertSum;\n            } else {\n              this.y += this.height * (top / vertSum);\n              this.height = 0;\n            }\n          }\n\n          return this;\n        };\n\n        Rectangle.prototype.applyOffsetsOutside = function (offsets) {\n          this.x -= offsets.left;\n          this.y -= offsets.top;\n          this.width += offsets.left + offsets.right;\n          this.height += offsets.top + offsets.bottom;\n          return this;\n        };\n\n        Rectangle.prototype.applyConverter = function (converter) {\n          this.x = converter(this.x);\n          this.y = converter(this.y);\n          this.width = converter(this.width);\n          this.height = converter(this.height);\n          return this;\n        };\n\n        Rectangle.getHorizIntersection = function (objA, objB) {\n          return algorithms_1.IntervalAlgorithms.getIntersection(new fixed_1.FixedInterval(objA.x, objA.width), new fixed_1.FixedInterval(objB.x, objB.width));\n        };\n\n        Rectangle.getVertIntersection = function (objA, objB) {\n          return algorithms_1.IntervalAlgorithms.getIntersection(new fixed_1.FixedInterval(objA.y, objA.height), new fixed_1.FixedInterval(objB.y, objB.height));\n        };\n\n        Rectangle.getIntersection = function (objA, objB) {\n          var horInters = algorithms_1.IntervalAlgorithms.getIntersection(new fixed_1.FixedInterval(objA.x, objA.width), new fixed_1.FixedInterval(objB.x, objB.width));\n          if (!horInters) return null;\n          var vertInters = algorithms_1.IntervalAlgorithms.getIntersection(new fixed_1.FixedInterval(objA.y, objA.height), new fixed_1.FixedInterval(objB.y, objB.height));\n          if (!vertInters) return null;\n          return new Rectangle(horInters.start, vertInters.start, horInters.length, vertInters.length);\n        };\n\n        Rectangle.getHorNonCollapsedIntersection = function (objA, objB) {\n          var inters = Rectangle.getHorizIntersection(objA, objB);\n          return inters && !inters.isCollapsed() ? inters : null;\n        };\n\n        Rectangle.getVertNonCollapsedIntersection = function (objA, objB) {\n          var inters = Rectangle.getVertIntersection(objA, objB);\n          return inters && !inters.isCollapsed() ? inters : null;\n        };\n\n        Rectangle.getNonCollapsedIntersection = function (objA, objB) {\n          var inters = Rectangle.getIntersection(objA, objB);\n          return inters && !inters.isCollapsed() ? inters : null;\n        };\n\n        Rectangle.areIntersected = function (rectA, rectB) {\n          return !(rectA.x > rectB.x + rectB.width || rectB.x > rectA.x + rectA.width) && !(rectA.y > rectB.y + rectB.height || rectB.y > rectA.y + rectA.height);\n        };\n\n        Rectangle.union = function (rectA, rectB) {\n          var right = Math.max(rectA.x + rectA.width, rectB.x + rectB.width);\n          var bottom = Math.max(rectA.y + rectA.height, rectB.y + rectB.height);\n          var x = Math.min(rectA.x, rectB.x);\n          var y = Math.min(rectA.y, rectB.y);\n          return new Rectangle(x, y, right - x, bottom - y);\n        };\n\n        Rectangle.equals = function (a, b) {\n          return a.x === b.x && a.y === b.y && a.width === b.width && a.height === b.height;\n        };\n\n        Rectangle.center = function (rect) {\n          return new point_1.Point(rect.x + rect.width / 2, rect.y + rect.height / 2);\n        };\n\n        Rectangle.containsPoint = function (rect, point) {\n          var right = rect.x + rect.width;\n          var bottom = rect.y + rect.height;\n          return point.y >= rect.y && bottom >= point.y && point.x >= rect.x && right >= point.x;\n        };\n\n        return Rectangle;\n      }();\n\n      exports.Rectangle = Rectangle;\n      var HitTestDeviation;\n\n      (function (HitTestDeviation) {\n        HitTestDeviation[HitTestDeviation[\"None\"] = 0] = \"None\";\n        HitTestDeviation[HitTestDeviation[\"Top\"] = 1] = \"Top\";\n        HitTestDeviation[HitTestDeviation[\"Bottom\"] = 2] = \"Bottom\";\n        HitTestDeviation[HitTestDeviation[\"Left\"] = 4] = \"Left\";\n        HitTestDeviation[HitTestDeviation[\"Right\"] = 8] = \"Right\";\n      })(HitTestDeviation = exports.HitTestDeviation || (exports.HitTestDeviation = {}));\n\n      var RectangleDeviation = function () {\n        function RectangleDeviation(initRectangle, initPoint) {\n          this.initRectangle = initRectangle;\n          this.initPoint = initPoint;\n          this.deviation = new flag_1.Flag(HitTestDeviation.None);\n        }\n\n        RectangleDeviation.prototype.calcDeviation = function () {\n          if (this.initPoint.x < this.initRectangle.x) this.deviation.set(HitTestDeviation.Left, true);else if (this.initPoint.x > this.initRectangle.right) this.deviation.set(HitTestDeviation.Right, true);\n          if (this.initPoint.y < this.initRectangle.y) this.deviation.set(HitTestDeviation.Top, true);else if (this.initPoint.y > this.initRectangle.bottom) this.deviation.set(HitTestDeviation.Bottom, true);\n          return this;\n        };\n\n        RectangleDeviation.prototype.calcAdditionalParams = function () {\n          this.insidePoint = this.initPoint.clone();\n          this.offsetToInside = new point_1.Point(0, 0);\n\n          if (this.deviation.get(HitTestDeviation.Left)) {\n            this.insidePoint.x = this.initRectangle.x;\n            this.offsetToInside.x = this.insidePoint.x - this.initPoint.x;\n          } else if (this.deviation.get(HitTestDeviation.Right)) {\n            this.insidePoint.x = this.initRectangle.right;\n            this.offsetToInside.x = this.initPoint.x - this.insidePoint.x;\n          }\n\n          if (this.deviation.get(HitTestDeviation.Top)) {\n            this.insidePoint.y = this.initRectangle.y;\n            this.offsetToInside.y = this.insidePoint.y - this.initPoint.y;\n          } else if (this.deviation.get(HitTestDeviation.Bottom)) {\n            this.insidePoint.y = this.initRectangle.bottom;\n            this.offsetToInside.y = this.initPoint.y - this.insidePoint.y;\n          }\n\n          return this;\n        };\n\n        return RectangleDeviation;\n      }();\n\n      exports.RectangleDeviation = RectangleDeviation;\n      /***/\n    },\n    /* 14 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics6 = function extendStatics(d, b) {\n          _extendStatics6 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics6(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics6(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Shape = void 0;\n\n      var rectangle_1 = __webpack_require__(13);\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var ShapeParameters_1 = __webpack_require__(36);\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      var ConnectionPoint_1 = __webpack_require__(44);\n\n      var ImageInfo_1 = __webpack_require__(49);\n\n      var NativeItem_1 = __webpack_require__(85);\n\n      var Shape =\n      /** @class */\n      function (_super) {\n        __extends(Shape, _super);\n\n        function Shape(description, position, forToolbox) {\n          var _this = _super.call(this) || this;\n\n          _this.description = description; // Containers\n\n          _this.children = [];\n          _this.expanded = true;\n          _this.expandedSize = undefined;\n          if (!description) throw Error(\"Shape type is incorrect\");\n          _this.position = position.clone();\n          var defaultSize = forToolbox ? description.toolboxSize : description.defaultSize;\n          _this.size = defaultSize.clone();\n          _this.text = description.getDefaultText();\n          _this.image = new ImageInfo_1.ImageInfo(description.getDefaultImageUrl());\n          _this.parameters = new ShapeParameters_1.ShapeParameters();\n          description.createParameters(_this.parameters);\n          return _this;\n        }\n\n        Shape.prototype.assign = function (item) {\n          _super.prototype.assign.call(this, item);\n\n          item.size = this.size.clone();\n          item.text = this.text;\n          item.image = this.image.clone();\n          item.parameters = this.parameters.clone();\n          item.children = this.children.slice();\n          item.expanded = this.expanded;\n          if (this.expandedSize) item.expandedSize = this.expandedSize.clone();\n        };\n\n        Shape.prototype.clone = function () {\n          var clone = new Shape(this.description, this.position.clone());\n          this.assign(clone);\n          return clone;\n        };\n\n        Object.defineProperty(Shape.prototype, \"enableText\", {\n          get: function get() {\n            return this.description.enableText;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(Shape.prototype, \"allowEditText\", {\n          get: function get() {\n            return this.description.allowEditText;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(Shape.prototype, \"hasTemplate\", {\n          get: function get() {\n            return this.description.hasTemplate;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(Shape.prototype, \"enableChildren\", {\n          get: function get() {\n            return this.description.enableChildren;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(Shape.prototype, \"enableImage\", {\n          get: function get() {\n            return this.description.enableImage;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(Shape.prototype, \"allowEditImage\", {\n          get: function get() {\n            return this.description.allowEditImage;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        Shape.prototype.getMinWidth = function (settingsMinWidth) {\n          return typeof this.description.minWidth === \"number\" ? this.description.minWidth : typeof settingsMinWidth === \"number\" ? settingsMinWidth : ShapeDescription_1.ShapeMinDimension;\n        };\n\n        Shape.prototype.getMinHeight = function (settingsMinHeight) {\n          return typeof this.description.minHeight === \"number\" ? this.description.minHeight : typeof settingsMinHeight === \"number\" ? settingsMinHeight : ShapeDescription_1.ShapeMinDimension;\n        };\n\n        Shape.prototype.getMaxWidth = function (settingsMaxWidth) {\n          return typeof this.description.maxWidth === \"number\" ? this.description.maxWidth : typeof settingsMaxWidth === \"number\" ? settingsMaxWidth : undefined;\n        };\n\n        Shape.prototype.getMaxHeight = function (settingsMaxHeight) {\n          return typeof this.description.maxHeight === \"number\" ? this.description.maxHeight : typeof settingsMaxHeight === \"number\" ? settingsMaxHeight : undefined;\n        };\n\n        Shape.prototype.createPrimitives = function () {\n          return this.description.createPrimitives(this);\n        };\n\n        Shape.prototype.createSelectorPrimitives = function () {\n          return this.description.createSelectorPrimitives(this);\n        };\n\n        Shape.prototype.normalizeX = function (x) {\n          return Math.max(this.position.x, Math.min(x, this.position.x + this.size.width));\n        };\n\n        Shape.prototype.normalizeY = function (y) {\n          return Math.max(this.position.y, Math.min(y, this.position.y + this.size.height));\n        };\n\n        Shape.prototype.getConnectionPoints = function () {\n          var _this = this;\n\n          var result = this.description.getConnectionPoints().map(function (pt) {\n            var point = new ConnectionPoint_1.ConnectionPoint(_this.position.x + pt.x * _this.size.width, _this.position.y + pt.y * _this.size.height, pt.side);\n\n            _this.description.processConnectionPoint(_this, point);\n\n            return point;\n          });\n          return result;\n        };\n\n        Shape.prototype.getConnectionPointSide = function (point, targetPoint) {\n          if (point.side !== DiagramItem_1.ConnectionPointSide.Undefined) return point.side;\n          return this.getConnectionPointSideByGeometry(point);\n        };\n\n        Shape.prototype.getConnectionPointSideByGeometry = function (point) {\n          var pt = point.clone().offset(-this.position.x, -this.position.y).multiply(1 / this.size.width, 1 / this.size.height);\n\n          if (pt.x >= pt.y && (pt.x > 0 || pt.y > 0)) {\n            if (pt.x < 0.5 || 1 - pt.x >= pt.y) return DiagramItem_1.ConnectionPointSide.North;\n            return DiagramItem_1.ConnectionPointSide.East;\n          } else {\n            if (pt.x > 0.5 || 1 - pt.x <= pt.y) return DiagramItem_1.ConnectionPointSide.South;\n            return DiagramItem_1.ConnectionPointSide.West;\n          }\n        };\n\n        Shape.prototype.getConnectionPointIndexForItem = function (item, connectionPointIndex) {\n          return this.description.getConnectionPointIndexForItem(item, connectionPointIndex);\n        };\n\n        Shape.prototype.getConnectionPointIndexForSide = function (side) {\n          return this.description.getConnectionPointIndexForSide(side);\n        };\n\n        Shape.prototype.toggleExpandedSize = function () {\n          if (!this.expanded) {\n            this.expandedSize = this.size.clone();\n            this.size = this.getCollapsedSize();\n          } else {\n            this.size = this.getExpandedSize();\n            this.expandedSize = undefined;\n          }\n        };\n\n        Shape.prototype.getExpandedSize = function () {\n          return this.description.getExpandedSize(this);\n        };\n\n        Shape.prototype.getCollapsedSize = function () {\n          return this.description.getCollapsedSize(this);\n        };\n\n        Shape.prototype.getToolboxHeightToWidthRatio = function () {\n          return this.description.getToolboxHeightToWidthRatio(this.size.width, this.size.height);\n        };\n\n        Object.defineProperty(Shape.prototype, \"allowResizeHorizontally\", {\n          get: function get() {\n            return this.description.allowResizeHorizontally(this);\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(Shape.prototype, \"allowResizeVertically\", {\n          get: function get() {\n            return this.description.allowResizeVertically(this);\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(Shape.prototype, \"rectangle\", {\n          get: function get() {\n            return rectangle_1.Rectangle.fromGeometry(this.position, this.size);\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(Shape.prototype, \"clientRectangle\", {\n          get: function get() {\n            return this.description.getClientRectangle(this);\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(Shape.prototype, \"textRectangle\", {\n          get: function get() {\n            return this.description.getTextRectangle(this);\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(Shape.prototype, \"textEditRectangle\", {\n          get: function get() {\n            return this.description.getTextEditRectangle(this);\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(Shape.prototype, \"textAngle\", {\n          get: function get() {\n            return this.description.getTextAngle();\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        Shape.prototype.toNative = function (units) {\n          var item = new NativeItem_1.NativeShape(this.key, this.dataKey);\n          item.type = this.description.key;\n          item.text = this.text;\n          item.position = this.position.clone();\n          item.size = this.size.clone();\n          item.attachedConnectorIds = this.attachedConnectors.map(function (c) {\n            return c.key;\n          });\n          item.applyUnits(units);\n          item.containerId = this.container ? this.container.key : null;\n          item.containerChildItemIds = this.children.map(function (item) {\n            return item.key;\n          });\n          item.containerExpanded = this.expanded;\n          return item;\n        };\n\n        return Shape;\n      }(DiagramItem_1.DiagramItem);\n\n      exports.Shape = Shape;\n      /***/\n    },\n    /* 15 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.RenderHelper = exports.svgNS = void 0;\n\n      var Diagnostics_1 = __webpack_require__(57);\n\n      exports.svgNS = \"http://www.w3.org/2000/svg\";\n\n      var RenderHelper =\n      /** @class */\n      function () {\n        function RenderHelper() {}\n\n        RenderHelper.createSvgElement = function (parent, forExport) {\n          if (forExport === void 0) {\n            forExport = false;\n          }\n\n          var svgElement = document.createElementNS(exports.svgNS, \"svg\");\n          svgElement.className.baseVal = \"dxdi-canvas\" + (forExport ? \" export\" : \"\");\n          parent && parent.appendChild(svgElement);\n          return svgElement;\n        };\n\n        RenderHelper.createMainElement = function (parent, forMeasurer) {\n          if (forMeasurer === void 0) {\n            forMeasurer = false;\n          }\n\n          var element = document.createElement(\"div\");\n          element.setAttribute(\"class\", \"dxdi-control\" + (forMeasurer ? \" measurer\" : \"\"));\n          if (Diagnostics_1.Diagnostics.optimizeLayers) element.style.transform = \"translateZ(0)\";\n          parent && parent.appendChild(element);\n          return element;\n        };\n\n        RenderHelper.addEventListener = function (element, eventName, handler) {\n          element.addEventListener(eventName, handler);\n        };\n\n        RenderHelper.removeEventListener = function (element, eventName, handler) {\n          element.removeEventListener(eventName, handler);\n        };\n\n        return RenderHelper;\n      }();\n\n      exports.RenderHelper = RenderHelper;\n      /***/\n    },\n    /* 16 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.DiagramModelOperation = exports.ModelOperationSettings = void 0;\n\n      var ModelOperationSettings =\n      /** @class */\n      function () {\n        function ModelOperationSettings() {\n          this._addShape = true;\n          this._addShapeFromToolbox = true;\n          this._deleteShape = true;\n          this._deleteConnector = true;\n          this._changeConnection = true;\n          this._changeConnectorPoints = true;\n          this._changeShapeText = true;\n          this._changeConnectorText = true;\n          this._resizeShape = true;\n          this._moveShape = true;\n        }\n\n        Object.defineProperty(ModelOperationSettings.prototype, \"addShape\", {\n          get: function get() {\n            return this._addShape;\n          },\n          set: function set(value) {\n            if (value !== this._addShape) this._addShape = value;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ModelOperationSettings.prototype, \"addShapeFromToolbox\", {\n          get: function get() {\n            return this._addShapeFromToolbox;\n          },\n          set: function set(value) {\n            if (value !== this._addShapeFromToolbox) this._addShapeFromToolbox = value;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ModelOperationSettings.prototype, \"deleteShape\", {\n          get: function get() {\n            return this._deleteShape;\n          },\n          set: function set(value) {\n            if (value !== this._deleteShape) this._deleteShape = value;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ModelOperationSettings.prototype, \"deleteConnector\", {\n          get: function get() {\n            return this._deleteConnector;\n          },\n          set: function set(value) {\n            if (value !== this._deleteConnector) this._deleteConnector = value;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ModelOperationSettings.prototype, \"changeConnection\", {\n          get: function get() {\n            return this._changeConnection;\n          },\n          set: function set(value) {\n            if (value !== this._changeConnection) this._changeConnection = value;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ModelOperationSettings.prototype, \"changeConnectorPoints\", {\n          get: function get() {\n            return this._changeConnectorPoints;\n          },\n          set: function set(value) {\n            if (value !== this._changeConnectorPoints) this._changeConnectorPoints = value;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ModelOperationSettings.prototype, \"changeShapeText\", {\n          get: function get() {\n            return this._changeShapeText;\n          },\n          set: function set(value) {\n            if (value !== this._changeShapeText) this._changeShapeText = value;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ModelOperationSettings.prototype, \"changeConnectorText\", {\n          get: function get() {\n            return this._changeConnectorText;\n          },\n          set: function set(value) {\n            if (value !== this._changeConnectorText) this._changeConnectorText = value;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ModelOperationSettings.prototype, \"resizeShape\", {\n          get: function get() {\n            return this._resizeShape;\n          },\n          set: function set(value) {\n            if (value !== this._resizeShape) this._resizeShape = value;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ModelOperationSettings.prototype, \"moveShape\", {\n          get: function get() {\n            return this._moveShape;\n          },\n          set: function set(value) {\n            if (value !== this._moveShape) this._moveShape = value;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ModelOperationSettings.prototype.applySettings = function (settings) {\n          if (!settings) return;\n          if (typeof settings.addShape === \"boolean\") this.addShape = settings.addShape;\n          if (typeof settings.addShapeFromToolbox === \"boolean\") this.addShapeFromToolbox = settings.addShapeFromToolbox;\n          if (typeof settings.deleteShape === \"boolean\") this.deleteShape = settings.deleteShape;\n          if (typeof settings.deleteConnector === \"boolean\") this.deleteConnector = settings.deleteConnector;\n          if (typeof settings.changeConnection === \"boolean\") this.changeConnection = settings.changeConnection;\n          if (typeof settings.changeConnectorPoints === \"boolean\") this.changeConnectorPoints = settings.changeConnectorPoints;\n          if (typeof settings.changeShapeText === \"boolean\") this.changeShapeText = settings.changeShapeText;\n          if (typeof settings.changeConnectorText === \"boolean\") this.changeConnectorText = settings.changeConnectorText;\n          if (typeof settings.resizeShape === \"boolean\") this.resizeShape = settings.resizeShape;\n          if (typeof settings.moveShape === \"boolean\") this.moveShape = settings.moveShape;\n        };\n\n        return ModelOperationSettings;\n      }();\n\n      exports.ModelOperationSettings = ModelOperationSettings;\n      var DiagramModelOperation;\n\n      (function (DiagramModelOperation) {\n        DiagramModelOperation[DiagramModelOperation[\"AddShape\"] = 0] = \"AddShape\";\n        DiagramModelOperation[DiagramModelOperation[\"AddShapeFromToolbox\"] = 1] = \"AddShapeFromToolbox\";\n        DiagramModelOperation[DiagramModelOperation[\"DeleteShape\"] = 2] = \"DeleteShape\";\n        DiagramModelOperation[DiagramModelOperation[\"DeleteConnector\"] = 3] = \"DeleteConnector\";\n        DiagramModelOperation[DiagramModelOperation[\"ChangeConnection\"] = 4] = \"ChangeConnection\";\n        DiagramModelOperation[DiagramModelOperation[\"ChangeConnectorPoints\"] = 5] = \"ChangeConnectorPoints\";\n        DiagramModelOperation[DiagramModelOperation[\"BeforeChangeShapeText\"] = 6] = \"BeforeChangeShapeText\";\n        DiagramModelOperation[DiagramModelOperation[\"ChangeShapeText\"] = 7] = \"ChangeShapeText\";\n        DiagramModelOperation[DiagramModelOperation[\"BeforeChangeConnectorText\"] = 8] = \"BeforeChangeConnectorText\";\n        DiagramModelOperation[DiagramModelOperation[\"ChangeConnectorText\"] = 9] = \"ChangeConnectorText\";\n        DiagramModelOperation[DiagramModelOperation[\"ResizeShape\"] = 10] = \"ResizeShape\";\n        DiagramModelOperation[DiagramModelOperation[\"MoveShape\"] = 11] = \"MoveShape\";\n      })(DiagramModelOperation = exports.DiagramModelOperation || (exports.DiagramModelOperation = {}));\n      /***/\n\n    },\n    /* 17 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Browser = function () {\n        function Browser() {}\n\n        Browser.IdentUserAgent = function (userAgent, ignoreDocumentMode) {\n          if (ignoreDocumentMode === void 0) {\n            ignoreDocumentMode = false;\n          }\n\n          var browserTypesOrderedList = ['Mozilla', 'IE', 'Firefox', 'Netscape', 'Safari', 'Chrome', 'Opera', 'Opera10', 'Edge'];\n          var defaultBrowserType = 'IE';\n          var defaultPlatform = 'Win';\n          var defaultVersions = {\n            Safari: 2,\n            Chrome: 0.1,\n            Mozilla: 1.9,\n            Netscape: 8,\n            Firefox: 2,\n            Opera: 9,\n            IE: 6,\n            Edge: 12\n          };\n\n          if (!userAgent || userAgent.length === 0) {\n            Browser.fillUserAgentInfo(browserTypesOrderedList, defaultBrowserType, defaultVersions[defaultBrowserType], defaultPlatform);\n            return;\n          }\n\n          userAgent = userAgent.toLowerCase();\n          Browser.indentPlatformMajorVersion(userAgent);\n\n          try {\n            var platformIdentStrings = {\n              'Windows': 'Win',\n              'Macintosh': 'Mac',\n              'Mac OS': 'Mac',\n              'Mac_PowerPC': 'Mac',\n              'cpu os': 'MacMobile',\n              'cpu iphone os': 'MacMobile',\n              'Android': 'Android',\n              '!Windows Phone': 'WinPhone',\n              '!WPDesktop': 'WinPhone',\n              '!ZuneWP': 'WinPhone'\n            };\n            var optSlashOrSpace = '(?:/|\\\\s*)?';\n            var versionString = '(\\\\d+)(?:\\\\.((?:\\\\d+?[1-9])|\\\\d)0*?)?';\n            var optVersion = '(?:' + versionString + ')?';\n            var patterns = {\n              Safari: 'applewebkit(?:.*?(?:version/' + versionString + '[\\\\.\\\\w\\\\d]*?(?:\\\\s+mobile/\\\\S*)?\\\\s+safari))?',\n              Chrome: '(?:chrome|crios)(?!frame)' + optSlashOrSpace + optVersion,\n              Mozilla: 'mozilla(?:.*rv:' + optVersion + '.*Gecko)?',\n              Netscape: '(?:netscape|navigator)\\\\d*/?\\\\s*' + optVersion,\n              Firefox: 'firefox' + optSlashOrSpace + optVersion,\n              Opera: '(?:opera|\\\\sopr)' + optSlashOrSpace + optVersion,\n              Opera10: 'opera.*\\\\s*version' + optSlashOrSpace + optVersion,\n              IE: 'msie\\\\s*' + optVersion,\n              Edge: 'edge' + optSlashOrSpace + optVersion\n            };\n            var browserType = null;\n            var version = -1;\n\n            for (var i = 0; i < browserTypesOrderedList.length; i++) {\n              var browserTypeCandidate = browserTypesOrderedList[i];\n              var regExp = new RegExp(patterns[browserTypeCandidate], 'i');\n              var matches = regExp.exec(userAgent);\n\n              if (matches && matches.index >= 0) {\n                if (browserType === 'IE' && version >= 11 && browserTypeCandidate === 'Safari') continue;\n                browserType = browserTypeCandidate;\n                if (browserType === 'Opera10') browserType = 'Opera';\n                var tridentPattern = 'trident' + optSlashOrSpace + optVersion;\n                version = Browser.GetBrowserVersion(userAgent, matches, tridentPattern, Browser.getIECompatibleVersionString());\n                if (browserType === 'Mozilla' && version >= 11) browserType = 'IE';\n              }\n            }\n\n            if (!browserType) browserType = defaultBrowserType;\n            var browserVersionDetected = version !== -1;\n            if (!browserVersionDetected) version = defaultVersions[browserType];\n            var platform = null;\n            var minOccurenceIndex = Number.MAX_VALUE;\n\n            for (var identStr in platformIdentStrings) {\n              if (!Object.prototype.hasOwnProperty.call(platformIdentStrings, identStr)) continue;\n              var importantIdent = identStr.substr(0, 1) === '!';\n              var occurenceIndex = userAgent.indexOf((importantIdent ? identStr.substr(1) : identStr).toLowerCase());\n\n              if (occurenceIndex >= 0 && (occurenceIndex < minOccurenceIndex || importantIdent)) {\n                minOccurenceIndex = importantIdent ? 0 : occurenceIndex;\n                platform = platformIdentStrings[identStr];\n              }\n            }\n\n            var samsungPattern = 'SM-[A-Z]';\n            var m = userAgent.toUpperCase().match(samsungPattern);\n            var isSamsungAndroidDevice = m && m.length > 0;\n            if (platform === 'WinPhone' && version < 9) version = Math.floor(Browser.getVersionFromTrident(userAgent, 'trident' + optSlashOrSpace + optVersion));\n            if (!ignoreDocumentMode && browserType === 'IE' && version > 7 && document.documentMode < version) version = document.documentMode;\n            if (platform === 'WinPhone') version = Math.max(9, version);\n            if (!platform) platform = defaultPlatform;\n            if (platform === platformIdentStrings['cpu os'] && !browserVersionDetected) version = 4;\n            Browser.fillUserAgentInfo(browserTypesOrderedList, browserType, version, platform, isSamsungAndroidDevice);\n          } catch (e) {\n            Browser.fillUserAgentInfo(browserTypesOrderedList, defaultBrowserType, defaultVersions[defaultBrowserType], defaultPlatform);\n          }\n        };\n\n        Browser.GetBrowserVersion = function (userAgent, matches, tridentPattern, ieCompatibleVersionString) {\n          var version = Browser.getVersionFromMatches(matches);\n\n          if (ieCompatibleVersionString) {\n            var versionFromTrident = Browser.getVersionFromTrident(userAgent, tridentPattern);\n            if (ieCompatibleVersionString === 'edge' || parseInt(ieCompatibleVersionString) === versionFromTrident) return versionFromTrident;\n          }\n\n          return version;\n        };\n\n        Browser.getIECompatibleVersionString = function () {\n          if (document.compatible) {\n            for (var i = 0; i < document.compatible.length; i++) {\n              if (document.compatible[i].userAgent === 'IE' && document.compatible[i].version) return document.compatible[i].version.toLowerCase();\n            }\n          }\n\n          return '';\n        };\n\n        Browser.isTouchEnabled = function () {\n          return 'ontouchstart' in window || navigator['maxTouchPoints'] > 0 || navigator['msMaxTouchPoints'] > 0;\n        };\n\n        Browser.fillUserAgentInfo = function (browserTypesOrderedList, browserType, version, platform, isSamsungAndroidDevice) {\n          if (isSamsungAndroidDevice === void 0) {\n            isSamsungAndroidDevice = false;\n          }\n\n          for (var i = 0; i < browserTypesOrderedList.length; i++) {\n            var type = browserTypesOrderedList[i];\n            Browser[type] = type === browserType;\n          }\n\n          Browser.Version = Math.floor(10.0 * version) / 10.0;\n          Browser.MajorVersion = Math.floor(Browser.Version);\n          Browser.WindowsPlatform = platform === 'Win' || platform === 'WinPhone';\n          Browser.MacOSMobilePlatform = platform === 'MacMobile' || platform === 'Mac' && Browser.isTouchEnabled();\n          Browser.MacOSPlatform = platform === 'Mac' && !Browser.MacOSMobilePlatform;\n          Browser.AndroidMobilePlatform = platform === 'Android';\n          Browser.WindowsPhonePlatform = platform === 'WinPhone';\n          Browser.WebKitFamily = Browser.Safari || Browser.Chrome || Browser.Opera && Browser.MajorVersion >= 15;\n          Browser.NetscapeFamily = Browser.Netscape || Browser.Mozilla || Browser.Firefox;\n          Browser.HardwareAcceleration = Browser.IE && Browser.MajorVersion >= 9 || Browser.Firefox && Browser.MajorVersion >= 4 || Browser.AndroidMobilePlatform && Browser.Chrome || Browser.Chrome && Browser.MajorVersion >= 37 || Browser.Safari && !Browser.WindowsPlatform || Browser.Edge || Browser.Opera && Browser.MajorVersion >= 46;\n          Browser.WebKitTouchUI = Browser.MacOSMobilePlatform || Browser.AndroidMobilePlatform;\n          var isIETouchUI = Browser.IE && Browser.MajorVersion > 9 && Browser.WindowsPlatform && Browser.UserAgent.toLowerCase().indexOf('touch') >= 0;\n          Browser.MSTouchUI = isIETouchUI || Browser.Edge && !!window.navigator.maxTouchPoints;\n          Browser.TouchUI = Browser.WebKitTouchUI || Browser.MSTouchUI;\n          Browser.MobileUI = Browser.WebKitTouchUI || Browser.WindowsPhonePlatform;\n          Browser.AndroidDefaultBrowser = Browser.AndroidMobilePlatform && !Browser.Chrome;\n          Browser.AndroidChromeBrowser = Browser.AndroidMobilePlatform && Browser.Chrome;\n          if (isSamsungAndroidDevice) Browser.SamsungAndroidDevice = isSamsungAndroidDevice;\n\n          if (Browser.MSTouchUI) {\n            var isARMArchitecture = Browser.UserAgent.toLowerCase().indexOf('arm;') > -1;\n            Browser.VirtualKeyboardSupported = isARMArchitecture || Browser.WindowsPhonePlatform;\n          } else Browser.VirtualKeyboardSupported = Browser.WebKitTouchUI;\n\n          Browser.fillDocumentElementBrowserTypeClassNames(browserTypesOrderedList);\n        };\n\n        Browser.indentPlatformMajorVersion = function (userAgent) {\n          var regex = /(?:(?:windows nt|macintosh|mac os|cpu os|cpu iphone os|android|windows phone|linux) )(\\d+)(?:[-0-9_.])*/;\n          var matches = regex.exec(userAgent);\n          if (matches) Browser.PlaformMajorVersion = matches[1];\n        };\n\n        Browser.getVersionFromMatches = function (matches) {\n          var result = -1;\n          var versionStr = '';\n\n          if (matches) {\n            if (matches[1]) {\n              versionStr += matches[1];\n              if (matches[2]) versionStr += '.' + matches[2];\n            }\n\n            if (versionStr !== '') {\n              result = parseFloat(versionStr);\n              if (isNaN(result)) result = -1;\n            }\n          }\n\n          return result;\n        };\n\n        Browser.getVersionFromTrident = function (userAgent, tridentPattern) {\n          var tridentDiffFromVersion = 4;\n          var matches = new RegExp(tridentPattern, 'i').exec(userAgent);\n          return Browser.getVersionFromMatches(matches) + tridentDiffFromVersion;\n        };\n\n        Browser.fillDocumentElementBrowserTypeClassNames = function (browserTypesOrderedList) {\n          var documentElementClassName = '';\n          var browserTypeslist = browserTypesOrderedList.concat(['WindowsPlatform', 'MacOSPlatform', 'MacOSMobilePlatform', 'AndroidMobilePlatform', 'WindowsPhonePlatform', 'WebKitFamily', 'WebKitTouchUI', 'MSTouchUI', 'TouchUI', 'AndroidDefaultBrowser']);\n\n          for (var i = 0; i < browserTypeslist.length; i++) {\n            var type = browserTypeslist[i];\n            if (Browser[type]) documentElementClassName += 'dx' + type + ' ';\n          }\n\n          documentElementClassName += 'dxBrowserVersion-' + Browser.MajorVersion;\n\n          if (typeof document !== 'undefined' && document && document.documentElement) {\n            if (document.documentElement.className !== '') documentElementClassName = ' ' + documentElementClassName;\n            document.documentElement.className += documentElementClassName;\n            Browser.Info = documentElementClassName;\n          }\n        };\n\n        Browser.getUserAgent = function () {\n          return typeof navigator !== 'undefined' && navigator.userAgent ? navigator.userAgent.toLowerCase() : '';\n        };\n\n        Browser.UserAgent = Browser.getUserAgent();\n        Browser._foo = Browser.IdentUserAgent(Browser.UserAgent);\n        return Browser;\n      }();\n\n      exports.Browser = Browser;\n      /***/\n    },\n    /* 18 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.raiseEvent = exports.RenderUtils = void 0;\n\n      var Event_1 = __webpack_require__(11);\n\n      var math_1 = __webpack_require__(33);\n\n      var browser_1 = __webpack_require__(17);\n\n      var RenderUtils =\n      /** @class */\n      function () {\n        function RenderUtils() {}\n\n        RenderUtils.updateSvgElementSize = function (svgElement, width, height, forExport) {\n          svgElement.style.width = width + \"px\";\n          svgElement.style.height = height + \"px\";\n          svgElement.setAttribute(\"viewBox\", \"0 0 \" + width + \" \" + height);\n\n          if (forExport) {\n            svgElement.setAttribute(\"width\", width.toString());\n            svgElement.setAttribute(\"height\", height.toString());\n          }\n        };\n\n        RenderUtils.removeElement = function (element) {\n          element && element.parentNode && element.parentNode.removeChild(element);\n        };\n\n        RenderUtils.removeContent = function (element) {\n          while (element && element.firstChild) {\n            element.removeChild(element.firstChild);\n          }\n        };\n\n        RenderUtils.setElementEventData = function (element, type, key, value) {\n          if (type === Event_1.MouseEventElementType.Undefined) return;\n          element.setAttribute(\"data-type\", type.toString());\n          if (key !== undefined) element.setAttribute(\"data-key\", key.toString());\n          if (value !== undefined) element.setAttribute(\"data-value\", value.toString());\n        };\n\n        RenderUtils.getElementEventData = function (element) {\n          if (element.getAttribute && element.getAttribute(\"data-type\")) return new Event_1.MouseEventSource(parseInt(element.getAttribute(\"data-type\")), element.getAttribute(\"data-key\"), element.getAttribute(\"data-value\"));\n          var className = element.getAttribute && element.getAttribute(\"class\");\n          if (className === \"dxdi-page\" || className === \"dxdi-main\") return new Event_1.MouseEventSource(Event_1.MouseEventElementType.Document);\n        };\n\n        RenderUtils.getHtmlElementStylePropertyName = function (propertyName) {\n          switch (propertyName) {\n            case \"fill\":\n              return \"color\";\n\n            case \"text-anchor\":\n              return \"text-align\";\n          }\n\n          return propertyName;\n        };\n\n        RenderUtils.getTextAnchorValue = function (propertyValue, reverseTextAnchor) {\n          if (reverseTextAnchor === void 0) {\n            reverseTextAnchor = false;\n          }\n\n          if (reverseTextAnchor) {\n            if (propertyValue === \"start\") return \"end\";\n            if (propertyValue === \"end\") return \"start\";\n          }\n\n          return propertyValue;\n        };\n\n        RenderUtils.getStrokeDasharrayValue = function (propertyValue, strokeWidth) {\n          if (strokeWidth) {\n            var dashArray = propertyValue && propertyValue.toString();\n            var dashArrayParts = dashArray ? dashArray.split(/[\\s,]+/) : [];\n            return dashArrayParts.map(function (v) {\n              return parseInt(v) / 2 * strokeWidth;\n            }).join(\",\");\n          }\n\n          return propertyValue;\n        };\n\n        RenderUtils.applyStyleToElement = function (style, element, reverseTextAnchor) {\n          var _this = this;\n\n          if (reverseTextAnchor === void 0) {\n            reverseTextAnchor = false;\n          }\n\n          var defaultStyle = style.getDefaultInstance();\n          style.forEach(function (propertyName) {\n            var propertyValue = style[propertyName];\n            var elPropertyName = element instanceof HTMLElement ? _this.getHtmlElementStylePropertyName(propertyName) : propertyName;\n\n            if (propertyValue !== undefined && propertyValue !== \"\" && propertyValue !== defaultStyle[propertyName]) {\n              switch (propertyName) {\n                case \"text-anchor\":\n                  propertyValue = _this.getTextAnchorValue(propertyValue, reverseTextAnchor);\n                  break;\n\n                case \"stroke-dasharray\":\n                  propertyValue = _this.getStrokeDasharrayValue(propertyValue, parseInt(style[\"stroke-width\"]));\n                  break;\n              }\n\n              element.style.setProperty(elPropertyName, propertyValue);\n            } else element.style.setProperty(elPropertyName, \"\");\n          });\n        };\n\n        RenderUtils.generateSvgElementId = function (prefix) {\n          return prefix + \"_\" + math_1.MathUtils.generateGuid();\n        };\n\n        RenderUtils.getUrlPathById = function (id) {\n          if (browser_1.Browser.Safari) return \"url(\" + location.protocol + \"//\" + location.host + location.pathname + \"#\" + id + \")\";\n          return \"url(#\" + id + \")\";\n        };\n\n        return RenderUtils;\n      }();\n\n      exports.RenderUtils = RenderUtils;\n\n      function raiseEvent(evt, _evt, raiseFunc) {\n        raiseFunc(_evt);\n        if (_evt.preventDefault) evt.preventDefault();\n      }\n\n      exports.raiseEvent = raiseEvent;\n      /***/\n    },\n    /* 19 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics7 = function extendStatics(d, b) {\n          _extendStatics7 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics7(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics7(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.RectangleShapeDescription = void 0;\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var size_1 = __webpack_require__(2);\n\n      var RectaglePrimitive_1 = __webpack_require__(21);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var RectangleShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(RectangleShapeDescription, _super);\n\n        function RectangleShapeDescription(defaultSize, hasDefaultText) {\n          if (defaultSize === void 0) {\n            defaultSize = new size_1.Size(ShapeDescription_1.ShapeDefaultDimension, ShapeDescription_1.ShapeDefaultDimension * 0.75);\n          }\n\n          return _super.call(this, defaultSize, hasDefaultText) || this;\n        }\n\n        Object.defineProperty(RectangleShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Rectangle;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(RectangleShapeDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        RectangleShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var _a = shape.rectangle,\n              left = _a.x,\n              top = _a.y,\n              width = _a.width,\n              height = _a.height;\n          return [new RectaglePrimitive_1.RectanglePrimitive(left, top, width, height, shape.style)];\n        };\n\n        RectangleShapeDescription.prototype.getTextRectangle = function (shape) {\n          return shape.rectangle.clone().inflate(-ShapeDescription_1.ShapeTextPadding, -ShapeDescription_1.ShapeTextPadding);\n        };\n\n        RectangleShapeDescription.prototype.getSizeByText = function (textSize, _shape) {\n          return textSize.clone().offset(ShapeDescription_1.ShapeTextPadding * 2, ShapeDescription_1.ShapeTextPadding * 2);\n        };\n\n        return RectangleShapeDescription;\n      }(ShapeDescription_1.ShapeDescription);\n\n      exports.RectangleShapeDescription = RectangleShapeDescription;\n      /***/\n    },\n    /* 20 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics8 = function extendStatics(d, b) {\n          _extendStatics8 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics8(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics8(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Alignment = exports.DataLayoutOrientation = exports.LogicalDirectionKind = exports.TreeLayoutSettings = exports.LayoutSettings = void 0;\n\n      var Connector_1 = __webpack_require__(7);\n\n      var LayoutSettings =\n      /** @class */\n      function () {\n        function LayoutSettings(gridSize) {\n          this.orientation = DataLayoutOrientation.Vertical;\n          this.direction = LogicalDirectionKind.Forward;\n          var baseSpacing = gridSize && gridSize * 2 > Connector_1.Connector.minOffset ? gridSize * 2 : Connector_1.Connector.minOffset;\n          this.columnSpacing = baseSpacing;\n          this.layerSpacing = baseSpacing * 2;\n          this.containerPadding = baseSpacing * 2;\n          this.componentSpacing = baseSpacing * 2;\n        }\n\n        return LayoutSettings;\n      }();\n\n      exports.LayoutSettings = LayoutSettings;\n\n      var TreeLayoutSettings =\n      /** @class */\n      function (_super) {\n        __extends(TreeLayoutSettings, _super);\n\n        function TreeLayoutSettings(gridSize) {\n          var _this = _super.call(this, gridSize) || this;\n\n          _this.alignment = Alignment.Center;\n          _this.subTreeColumnSpacing = _this.componentSpacing / 2;\n          return _this;\n        }\n\n        return TreeLayoutSettings;\n      }(LayoutSettings);\n\n      exports.TreeLayoutSettings = TreeLayoutSettings;\n      var LogicalDirectionKind;\n\n      (function (LogicalDirectionKind) {\n        LogicalDirectionKind[LogicalDirectionKind[\"Backward\"] = 0] = \"Backward\";\n        LogicalDirectionKind[LogicalDirectionKind[\"Forward\"] = 1] = \"Forward\";\n      })(LogicalDirectionKind = exports.LogicalDirectionKind || (exports.LogicalDirectionKind = {}));\n\n      var DataLayoutOrientation;\n\n      (function (DataLayoutOrientation) {\n        DataLayoutOrientation[DataLayoutOrientation[\"Horizontal\"] = 0] = \"Horizontal\";\n        DataLayoutOrientation[DataLayoutOrientation[\"Vertical\"] = 1] = \"Vertical\";\n      })(DataLayoutOrientation = exports.DataLayoutOrientation || (exports.DataLayoutOrientation = {}));\n\n      var Alignment;\n\n      (function (Alignment) {\n        Alignment[Alignment[\"Left\"] = 0] = \"Left\";\n        Alignment[Alignment[\"Center\"] = 1] = \"Center\";\n      })(Alignment = exports.Alignment || (exports.Alignment = {}));\n      /***/\n\n    },\n    /* 21 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics9 = function extendStatics(d, b) {\n          _extendStatics9 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics9(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics9(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.RectanglePrimitive = void 0;\n\n      var RenderHelper_1 = __webpack_require__(15);\n\n      var Primitive_1 = __webpack_require__(24);\n\n      var RectanglePrimitive =\n      /** @class */\n      function (_super) {\n        __extends(RectanglePrimitive, _super);\n\n        function RectanglePrimitive(x, y, width, height, style, className, clipPathId, onApplyProperties) {\n          var _this = _super.call(this, style, className, clipPathId, onApplyProperties) || this;\n\n          _this.x = x;\n          _this.y = y;\n          _this.width = width;\n          _this.height = height;\n          return _this;\n        }\n\n        RectanglePrimitive.prototype.createMainElement = function () {\n          return document.createElementNS(RenderHelper_1.svgNS, \"rect\");\n        };\n\n        RectanglePrimitive.prototype.applyElementProperties = function (element, measurer) {\n          this.setUnitAttribute(element, \"x\", this.x);\n          this.setUnitAttribute(element, \"y\", this.y);\n          this.setUnitAttribute(element, \"width\", this.width);\n          this.setUnitAttribute(element, \"height\", this.height);\n          this.setPositionCorrectionAttribute(element);\n\n          _super.prototype.applyElementProperties.call(this, element, measurer);\n        };\n\n        return RectanglePrimitive;\n      }(Primitive_1.SvgPrimitive);\n\n      exports.RectanglePrimitive = RectanglePrimitive;\n      /***/\n    },\n    /* 22 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var string_1 = __webpack_require__(58);\n\n      var ColorUtils = function () {\n        function ColorUtils() {}\n\n        ColorUtils.getAlpha = function (color) {\n          return color >> 24 & 255;\n        };\n\n        ColorUtils.getRed = function (color) {\n          return color >> 16 & 255;\n        };\n\n        ColorUtils.getGreen = function (color) {\n          return color >> 8 & 255;\n        };\n\n        ColorUtils.getBlue = function (color) {\n          return color & 255;\n        };\n\n        ColorUtils.redPartToString = function (color) {\n          var redStr = ColorUtils.getRed(color).toString(16);\n          return redStr.length > 1 ? redStr : '0' + redStr;\n        };\n\n        ColorUtils.greenPartToString = function (color) {\n          var greenStr = ColorUtils.getGreen(color).toString(16);\n          return greenStr.length > 1 ? greenStr : '0' + greenStr;\n        };\n\n        ColorUtils.bluePartToString = function (color) {\n          var blueStr = ColorUtils.getBlue(color).toString(16);\n          return blueStr.length > 1 ? blueStr : '0' + blueStr;\n        };\n\n        ColorUtils.fromArgbNumber = function (alpha, red, green, blue) {\n          return alpha << 24 | red << 16 | green << 8 | blue;\n        };\n\n        ColorUtils.fromRgbaString = function (color, alpha) {\n          if (alpha === void 0) {\n            alpha = 255;\n          }\n\n          var matchesRGBA = color.replace(/ +/g, '').match(/(rgba?)|(\\d+(\\.\\d+)?%?)|(\\.\\d+)/g);\n\n          if (matchesRGBA && matchesRGBA.length > 3) {\n            var result = [];\n\n            for (var i = 1, matchItem = void 0; matchItem = matchesRGBA[i]; i++) {\n              var item = matchItem.indexOf('%') !== -1 ? Math.round(parseFloat(matchItem) * 2.55) : parseInt(matchItem);\n              if (item < 0 || item > 255) return null;\n              result.push(item);\n            }\n\n            if (color.indexOf('rgba') === 0) {\n              if (isNaN(result[3]) || result[3] < 0 || result[3] > 1) return null;else if (result[3] <= 1) result[3] = Math.round(result[3] * 255);\n            } else if (result[3]) return null;\n\n            return (result[0] & 255) << 16 | (result[1] & 255) << 8 | result[2] & 255 | ((result.length > 3 ? result[3] : alpha) & 255) << 24;\n          }\n\n          return null;\n        };\n\n        ColorUtils.fromHashString = function (hash, alpha) {\n          if (alpha === void 0) {\n            alpha = 255;\n          }\n\n          if (!ColorUtils.isHashColorString(hash)) return null;\n          if (hash.charAt(0) === '#') hash = hash.substr(1);\n          if (hash.length === 3) hash = string_1.StringUtils.repeat(hash.charAt(0), 2) + string_1.StringUtils.repeat(hash.charAt(1), 2) + string_1.StringUtils.repeat(hash.charAt(2), 2);\n          return parseInt(hash, 16) | alpha << 24;\n        };\n\n        ColorUtils.fromColorName = function (color, alpha) {\n          if (alpha === void 0) {\n            alpha = 255;\n          }\n\n          var colorNameAsHash = ColorUtils.colorNames[color.toLowerCase()];\n          return colorNameAsHash ? ColorUtils.fromHashString(colorNameAsHash, alpha) : null;\n        };\n\n        ColorUtils.fromString = function (color, alpha) {\n          if (alpha === void 0) {\n            alpha = 255;\n          }\n\n          var rgbaColor = ColorUtils.fromRgbaString(color, alpha);\n          if (rgbaColor !== null) return rgbaColor;\n          var hashColor = ColorUtils.fromHashString(color, alpha);\n          if (hashColor !== null) return hashColor;\n          return ColorUtils.fromColorName(color, alpha);\n        };\n\n        ColorUtils.colorToHash = function (color) {\n          return '#' + ColorUtils.redPartToString(color) + ColorUtils.greenPartToString(color) + ColorUtils.bluePartToString(color);\n        };\n\n        ColorUtils.stringToHash = function (color) {\n          var result = this.fromString(color);\n          return result !== null ? this.colorToHash(result) : null;\n        };\n\n        ColorUtils.isHashColorString = function (color) {\n          return /^#?([0-9a-f]{6})$/i.test(color) || /^#?([0-9a-f]{3})$/i.test(color);\n        };\n\n        ColorUtils.isKnownColorName = function (color) {\n          return !!ColorUtils.colorNames[color.toLowerCase()];\n        };\n\n        ColorUtils.isGray = function (color) {\n          var red = ColorUtils.getRed(color);\n          return red === ColorUtils.getGreen(color) && red === ColorUtils.getBlue(color);\n        };\n\n        ColorUtils.DARK_COLOR = -16777216;\n        ColorUtils.LIGHT_COLOR = -1;\n        ColorUtils.colorNames = {\n          aliceblue: '#f0f8ff',\n          antiquewhite: '#faebd7',\n          aqua: '#00ffff',\n          aquamarine: '#7fffd4',\n          azure: '#f0ffff',\n          beige: '#f5f5dc',\n          bisque: '#ffe4c4',\n          black: '#000000',\n          blanchedalmond: '#ffebcd',\n          blue: '#0000ff',\n          blueviolet: '#8a2be2',\n          brown: '#a52a2a',\n          burlywood: '#deb887',\n          cadetblue: '#5f9ea0',\n          chartreuse: '#7fff00',\n          chocolate: '#d2691e',\n          coral: '#ff7f50',\n          cornflowerblue: '#6495ed',\n          cornsilk: '#fff8dc',\n          crimson: '#dc143c',\n          cyan: '#00ffff',\n          darkblue: '#00008b',\n          darkcyan: '#008b8b',\n          darkgoldenrod: '#b8860b',\n          darkgray: '#a9a9a9',\n          darkgreen: '#006400',\n          darkkhaki: '#bdb76b',\n          darkmagenta: '#8b008b',\n          darkolivegreen: '#556b2f',\n          darkorange: '#ff8c00',\n          darkorchid: '#9932cc',\n          darkred: '#8b0000',\n          darksalmon: '#e9967a',\n          darkseagreen: '#8fbc8f',\n          darkslateblue: '#483d8b',\n          darkslategray: '#2f4f4f',\n          darkturquoise: '#00ced1',\n          darkviolet: '#9400d3',\n          deeppink: '#ff1493',\n          deepskyblue: '#00bfff',\n          dimgray: '#696969',\n          dodgerblue: '#1e90ff',\n          feldspar: '#d19275',\n          firebrick: '#b22222',\n          floralwhite: '#fffaf0',\n          forestgreen: '#228b22',\n          fuchsia: '#ff00ff',\n          gainsboro: '#dcdcdc',\n          ghostwhite: '#f8f8ff',\n          gold: '#ffd700',\n          goldenrod: '#daa520',\n          gray: '#808080',\n          green: '#00ff00',\n          greenyellow: '#adff2f',\n          honeydew: '#f0fff0',\n          hotpink: '#ff69b4',\n          indianred: '#cd5c5c',\n          indigo: '#4b0082',\n          ivory: '#fffff0',\n          khaki: '#f0e68c',\n          lavender: '#e6e6fa',\n          lavenderblush: '#fff0f5',\n          lawngreen: '#7cfc00',\n          lemonchiffon: '#fffacd',\n          lightblue: '#add8e6',\n          lightcoral: '#f08080',\n          lightcyan: '#e0ffff',\n          lightgoldenrodyellow: '#fafad2',\n          lightgray: '#d3d3d3',\n          lightgreen: '#90ee90',\n          lightpink: '#ffb6c1',\n          lightsalmon: '#ffa07a',\n          lightseagreen: '#20b2aa',\n          lightskyblue: '#87cefa',\n          lightslateblue: '#8470ff',\n          lightslategray: '#778899',\n          lightsteelblue: '#b0c4de',\n          lightyellow: '#ffffe0',\n          lime: '#00ff00',\n          limegreen: '#32cd32',\n          linen: '#faf0e6',\n          magenta: '#ff00ff',\n          maroon: '#800000',\n          mediumaquamarine: '#66cdaa',\n          mediumblue: '#0000cd',\n          mediumorchid: '#ba55d3',\n          mediumpurple: '#9370d8',\n          mediumseagreen: '#3cb371',\n          mediumslateblue: '#7b68ee',\n          mediumspringgreen: '#00fa9a',\n          mediumturquoise: '#48d1cc',\n          mediumvioletred: '#c71585',\n          midnightblue: '#191970',\n          mintcream: '#f5fffa',\n          mistyrose: '#ffe4e1',\n          moccasin: '#ffe4b5',\n          navajowhite: '#ffdead',\n          navy: '#000080',\n          oldlace: '#fdf5e6',\n          olive: '#808000',\n          olivedrab: '#6b8e23',\n          orange: '#ffa500',\n          orangered: '#ff4500',\n          orchid: '#da70d6',\n          palegoldenrod: '#eee8aa',\n          palegreen: '#98fb98',\n          paleturquoise: '#afeeee',\n          palevioletred: '#d87093',\n          papayawhip: '#ffefd5',\n          peachpuff: '#ffdab9',\n          peru: '#cd853f',\n          pink: '#ffc0cb',\n          plum: '#dda0dd',\n          powderblue: '#b0e0e6',\n          purple: '#800080',\n          red: '#ff0000',\n          rosybrown: '#bc8f8f',\n          royalblue: '#4169e1',\n          saddlebrown: '#8b4513',\n          salmon: '#fa8072',\n          sandybrown: '#f4a460',\n          seagreen: '#2e8b57',\n          seashell: '#fff5ee',\n          sienna: '#a0522d',\n          silver: '#c0c0c0',\n          skyblue: '#87ceeb',\n          slateblue: '#6a5acd',\n          slategray: '#708090',\n          snow: '#fffafa',\n          springgreen: '#00ff7f',\n          steelblue: '#4682b4',\n          tan: '#d2b48c',\n          teal: '#008080',\n          thistle: '#d8bfd8',\n          tomato: '#ff6347',\n          turquoise: '#40e0d0',\n          violet: '#ee82ee',\n          violetred: '#d02090',\n          wheat: '#f5deb3',\n          white: '#ffffff',\n          whitesmoke: '#f5f5f5',\n          yellow: '#ffff00',\n          yellowgreen: '#9acd32',\n          windowtext: '#000000'\n        };\n        return ColorUtils;\n      }();\n\n      exports.ColorUtils = ColorUtils;\n      /***/\n    },\n    /* 23 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.PermissionRequestEventArgs = exports.RequestedEntity = void 0;\n\n      var RequestedEntity =\n      /** @class */\n      function () {\n        function RequestedEntity(apiController) {\n          this.apiController = apiController;\n        }\n\n        Object.defineProperty(RequestedEntity.prototype, \"allowed\", {\n          get: function get() {\n            return this.eventArgs.allowed;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(RequestedEntity.prototype, \"updateUI\", {\n          get: function get() {\n            return this.eventArgs.updateUI;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(RequestedEntity.prototype, \"eventArgs\", {\n          get: function get() {\n            if (!this._eventArgs) this._eventArgs = this.createEventArgs();\n            return this._eventArgs;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        return RequestedEntity;\n      }();\n\n      exports.RequestedEntity = RequestedEntity;\n\n      var PermissionRequestEventArgs =\n      /** @class */\n      function () {\n        function PermissionRequestEventArgs() {\n          this.allowed = true;\n          this.updateUI = false;\n        }\n\n        return PermissionRequestEventArgs;\n      }();\n\n      exports.PermissionRequestEventArgs = PermissionRequestEventArgs;\n      /***/\n    },\n    /* 24 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics10 = function extendStatics(d, b) {\n          _extendStatics10 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics10(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics10(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.SvgPrimitive = void 0;\n\n      var Utils_1 = __webpack_require__(18);\n\n      var PrimitiveObject_1 = __webpack_require__(110);\n\n      var SvgPrimitive =\n      /** @class */\n      function (_super) {\n        __extends(SvgPrimitive, _super);\n\n        function SvgPrimitive(style, className, clipPathId, onApplyProperties) {\n          var _this = _super.call(this, style) || this;\n\n          _this.className = className;\n          _this.clipPathId = clipPathId;\n          _this.onApplyProperties = onApplyProperties;\n          _this.children = [];\n          return _this;\n        }\n\n        SvgPrimitive.prototype.createElement = function (insertInDOM) {\n          var el = this.createMainElement();\n          this.createChildElements(el);\n          insertInDOM(el);\n          this.createCustomContent(el);\n          return el;\n        };\n\n        SvgPrimitive.prototype.createChildElements = function (parent) {\n          for (var i = 0; i < this.children.length; i++) {\n            this.children[i].createElement(function (el) {\n              return parent.appendChild(el);\n            });\n          }\n        };\n\n        SvgPrimitive.prototype.applyElementProperties = function (element, measurer) {\n          this.applyElementStyleProperties(element);\n          if (this.className) element.setAttribute(\"class\", this.className);\n          if (typeof this.clipPathId === \"string\") if (this.clipPathId) element.setAttribute(\"clip-path\", Utils_1.RenderUtils.getUrlPathById(this.clipPathId));else element.removeAttribute(\"clip-path\");\n          if (this.onApplyProperties) this.onApplyProperties(element);\n          this.applyChildrenProperties(element, measurer);\n        };\n\n        SvgPrimitive.prototype.applyChildrenProperties = function (element, measurer) {\n          for (var i = 0; i < this.children.length; i++) {\n            this.children[i].applyElementProperties(element.childNodes[i], measurer);\n          }\n        };\n\n        SvgPrimitive.prototype.applyElementStyleProperties = function (element) {\n          this.applyElementStylePropertiesCore(element);\n        };\n\n        SvgPrimitive.prototype.applyElementStylePropertiesCore = function (element, reverseTextAnchor) {\n          if (reverseTextAnchor === void 0) {\n            reverseTextAnchor = false;\n          }\n\n          if (this.style) Utils_1.RenderUtils.applyStyleToElement(this.style, element, reverseTextAnchor);\n        };\n\n        SvgPrimitive.prototype.createCustomContent = function (parent) {};\n\n        SvgPrimitive.prototype.destroyCustomContent = function (parent) {};\n\n        SvgPrimitive.prototype.dispose = function () {\n          if (this.children) this.children.forEach(function (primitive) {\n            return primitive.dispose();\n          });\n        };\n\n        return SvgPrimitive;\n      }(PrimitiveObject_1.PrimitiveObject);\n\n      exports.SvgPrimitive = SvgPrimitive;\n      /***/\n    },\n    /* 25 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var browser_1 = __webpack_require__(17);\n\n      var encode_1 = __webpack_require__(173);\n\n      var string_1 = __webpack_require__(58);\n\n      var KeyUtils = function () {\n        function KeyUtils() {}\n\n        KeyUtils.getKeyModifiers = function (evt) {\n          var result = 0;\n          if (evt.altKey) result |= ModifierKey.Alt;\n          if (evt.ctrlKey) result |= ModifierKey.Ctrl;\n          if (evt.shiftKey) result |= ModifierKey.Shift;\n          return result;\n        };\n\n        KeyUtils.getShortcutCode = function (keyCode, isCtrlKey, isShiftKey, isAltKey, isMetaKey) {\n          var value = keyCode;\n          value |= isCtrlKey ? ModifierKey.Ctrl : 0;\n          value |= isShiftKey ? ModifierKey.Shift : 0;\n          value |= isAltKey ? ModifierKey.Alt : 0;\n          value |= isMetaKey ? ModifierKey.Meta : 0;\n          return value;\n        };\n\n        KeyUtils.getShortcutCodeByEvent = function (evt) {\n          return KeyUtils.getShortcutCode(KeyUtils.getEventKeyCode(evt), evt.ctrlKey, evt.shiftKey, evt.altKey, browser_1.Browser.MacOSPlatform ? evt.metaKey : false);\n        };\n\n        KeyUtils.getEventKeyCode = function (evt) {\n          return browser_1.Browser.NetscapeFamily || browser_1.Browser.Opera ? evt.which : evt.keyCode;\n        };\n\n        KeyUtils.parseShortcutString = function (shortcutString) {\n          if (!shortcutString) return 0;\n          var isCtrlKey = false;\n          var isShiftKey = false;\n          var isAltKey = false;\n          var isMetaKey = false;\n          var keyCode = null;\n          var shcKeys = shortcutString.toString().split('+');\n\n          if (shcKeys.length > 0) {\n            for (var i = 0; i < shcKeys.length; i++) {\n              var key = string_1.StringUtils.trim(shcKeys[i].toUpperCase());\n\n              switch (key) {\n                case 'CONTROL':\n                case 'CONTROLKEY':\n                case 'CTRL':\n                  isCtrlKey = true;\n                  break;\n\n                case 'SHIFT':\n                case 'SHIFTKEY':\n                  isShiftKey = true;\n                  break;\n\n                case 'ALT':\n                  isAltKey = true;\n                  break;\n\n                case 'CMD':\n                  isMetaKey = true;\n                  break;\n\n                case 'F1':\n                  keyCode = KeyCode.F1;\n                  break;\n\n                case 'F2':\n                  keyCode = KeyCode.F2;\n                  break;\n\n                case 'F3':\n                  keyCode = KeyCode.F3;\n                  break;\n\n                case 'F4':\n                  keyCode = KeyCode.F4;\n                  break;\n\n                case 'F5':\n                  keyCode = KeyCode.F5;\n                  break;\n\n                case 'F6':\n                  keyCode = KeyCode.F6;\n                  break;\n\n                case 'F7':\n                  keyCode = KeyCode.F7;\n                  break;\n\n                case 'F8':\n                  keyCode = KeyCode.F8;\n                  break;\n\n                case 'F9':\n                  keyCode = KeyCode.F9;\n                  break;\n\n                case 'F10':\n                  keyCode = KeyCode.F10;\n                  break;\n\n                case 'F11':\n                  keyCode = KeyCode.F11;\n                  break;\n\n                case 'F12':\n                  keyCode = KeyCode.F12;\n                  break;\n\n                case 'RETURN':\n                case 'ENTER':\n                  keyCode = KeyCode.Enter;\n                  break;\n\n                case 'HOME':\n                  keyCode = KeyCode.Home;\n                  break;\n\n                case 'END':\n                  keyCode = KeyCode.End;\n                  break;\n\n                case 'LEFT':\n                  keyCode = KeyCode.Left;\n                  break;\n\n                case 'RIGHT':\n                  keyCode = KeyCode.Right;\n                  break;\n\n                case 'UP':\n                  keyCode = KeyCode.Up;\n                  break;\n\n                case 'DOWN':\n                  keyCode = KeyCode.Down;\n                  break;\n\n                case 'PAGEUP':\n                  keyCode = KeyCode.PageUp;\n                  break;\n\n                case 'PAGEDOWN':\n                  keyCode = KeyCode.PageDown;\n                  break;\n\n                case 'SPACE':\n                  keyCode = KeyCode.Space;\n                  break;\n\n                case 'TAB':\n                  keyCode = KeyCode.Tab;\n                  break;\n\n                case 'BACKSPACE':\n                case 'BACK':\n                  keyCode = KeyCode.Backspace;\n                  break;\n\n                case 'CONTEXT':\n                  keyCode = KeyCode.ContextMenu;\n                  break;\n\n                case 'ESCAPE':\n                case 'ESC':\n                  keyCode = KeyCode.Esc;\n                  break;\n\n                case 'DELETE':\n                case 'DEL':\n                  keyCode = KeyCode.Delete;\n                  break;\n\n                case 'INSERT':\n                case 'INS':\n                  keyCode = KeyCode.Insert;\n                  break;\n\n                case 'PLUS':\n                  keyCode = '+'.charCodeAt(0);\n                  break;\n\n                default:\n                  keyCode = key.charCodeAt(0);\n                  break;\n              }\n            }\n          } else alert(encode_1.EncodeUtils.decodeViaTextArea('Invalid shortcut'));\n\n          return KeyUtils.getShortcutCode(keyCode, isCtrlKey, isShiftKey, isAltKey, isMetaKey);\n        };\n\n        return KeyUtils;\n      }();\n\n      exports.KeyUtils = KeyUtils;\n      var ModifierKey;\n\n      (function (ModifierKey) {\n        ModifierKey[ModifierKey[\"None\"] = 0] = \"None\";\n        ModifierKey[ModifierKey[\"Ctrl\"] = 65536] = \"Ctrl\";\n        ModifierKey[ModifierKey[\"Shift\"] = 262144] = \"Shift\";\n        ModifierKey[ModifierKey[\"Alt\"] = 1048576] = \"Alt\";\n        ModifierKey[ModifierKey[\"Meta\"] = 16777216] = \"Meta\";\n      })(ModifierKey = exports.ModifierKey || (exports.ModifierKey = {}));\n\n      var KeyCode;\n\n      (function (KeyCode) {\n        KeyCode[KeyCode[\"Backspace\"] = 8] = \"Backspace\";\n        KeyCode[KeyCode[\"Tab\"] = 9] = \"Tab\";\n        KeyCode[KeyCode[\"Enter\"] = 13] = \"Enter\";\n        KeyCode[KeyCode[\"Pause\"] = 19] = \"Pause\";\n        KeyCode[KeyCode[\"CapsLock\"] = 20] = \"CapsLock\";\n        KeyCode[KeyCode[\"Esc\"] = 27] = \"Esc\";\n        KeyCode[KeyCode[\"Space\"] = 32] = \"Space\";\n        KeyCode[KeyCode[\"PageUp\"] = 33] = \"PageUp\";\n        KeyCode[KeyCode[\"PageDown\"] = 34] = \"PageDown\";\n        KeyCode[KeyCode[\"End\"] = 35] = \"End\";\n        KeyCode[KeyCode[\"Home\"] = 36] = \"Home\";\n        KeyCode[KeyCode[\"Left\"] = 37] = \"Left\";\n        KeyCode[KeyCode[\"Up\"] = 38] = \"Up\";\n        KeyCode[KeyCode[\"Right\"] = 39] = \"Right\";\n        KeyCode[KeyCode[\"Down\"] = 40] = \"Down\";\n        KeyCode[KeyCode[\"Insert\"] = 45] = \"Insert\";\n        KeyCode[KeyCode[\"Delete\"] = 46] = \"Delete\";\n        KeyCode[KeyCode[\"Key_0\"] = 48] = \"Key_0\";\n        KeyCode[KeyCode[\"Key_1\"] = 49] = \"Key_1\";\n        KeyCode[KeyCode[\"Key_2\"] = 50] = \"Key_2\";\n        KeyCode[KeyCode[\"Key_3\"] = 51] = \"Key_3\";\n        KeyCode[KeyCode[\"Key_4\"] = 52] = \"Key_4\";\n        KeyCode[KeyCode[\"Key_5\"] = 53] = \"Key_5\";\n        KeyCode[KeyCode[\"Key_6\"] = 54] = \"Key_6\";\n        KeyCode[KeyCode[\"Key_7\"] = 55] = \"Key_7\";\n        KeyCode[KeyCode[\"Key_8\"] = 56] = \"Key_8\";\n        KeyCode[KeyCode[\"Key_9\"] = 57] = \"Key_9\";\n        KeyCode[KeyCode[\"Key_a\"] = 65] = \"Key_a\";\n        KeyCode[KeyCode[\"Key_b\"] = 66] = \"Key_b\";\n        KeyCode[KeyCode[\"Key_c\"] = 67] = \"Key_c\";\n        KeyCode[KeyCode[\"Key_d\"] = 68] = \"Key_d\";\n        KeyCode[KeyCode[\"Key_e\"] = 69] = \"Key_e\";\n        KeyCode[KeyCode[\"Key_f\"] = 70] = \"Key_f\";\n        KeyCode[KeyCode[\"Key_g\"] = 71] = \"Key_g\";\n        KeyCode[KeyCode[\"Key_h\"] = 72] = \"Key_h\";\n        KeyCode[KeyCode[\"Key_i\"] = 73] = \"Key_i\";\n        KeyCode[KeyCode[\"Key_j\"] = 74] = \"Key_j\";\n        KeyCode[KeyCode[\"Key_k\"] = 75] = \"Key_k\";\n        KeyCode[KeyCode[\"Key_l\"] = 76] = \"Key_l\";\n        KeyCode[KeyCode[\"Key_m\"] = 77] = \"Key_m\";\n        KeyCode[KeyCode[\"Key_n\"] = 78] = \"Key_n\";\n        KeyCode[KeyCode[\"Key_o\"] = 79] = \"Key_o\";\n        KeyCode[KeyCode[\"Key_p\"] = 80] = \"Key_p\";\n        KeyCode[KeyCode[\"Key_q\"] = 81] = \"Key_q\";\n        KeyCode[KeyCode[\"Key_r\"] = 82] = \"Key_r\";\n        KeyCode[KeyCode[\"Key_s\"] = 83] = \"Key_s\";\n        KeyCode[KeyCode[\"Key_t\"] = 84] = \"Key_t\";\n        KeyCode[KeyCode[\"Key_u\"] = 85] = \"Key_u\";\n        KeyCode[KeyCode[\"Key_v\"] = 86] = \"Key_v\";\n        KeyCode[KeyCode[\"Key_w\"] = 87] = \"Key_w\";\n        KeyCode[KeyCode[\"Key_x\"] = 88] = \"Key_x\";\n        KeyCode[KeyCode[\"Key_y\"] = 89] = \"Key_y\";\n        KeyCode[KeyCode[\"Key_z\"] = 90] = \"Key_z\";\n        KeyCode[KeyCode[\"Windows\"] = 91] = \"Windows\";\n        KeyCode[KeyCode[\"ContextMenu\"] = 93] = \"ContextMenu\";\n        KeyCode[KeyCode[\"Numpad_0\"] = 96] = \"Numpad_0\";\n        KeyCode[KeyCode[\"Numpad_1\"] = 97] = \"Numpad_1\";\n        KeyCode[KeyCode[\"Numpad_2\"] = 98] = \"Numpad_2\";\n        KeyCode[KeyCode[\"Numpad_3\"] = 99] = \"Numpad_3\";\n        KeyCode[KeyCode[\"Numpad_4\"] = 100] = \"Numpad_4\";\n        KeyCode[KeyCode[\"Numpad_5\"] = 101] = \"Numpad_5\";\n        KeyCode[KeyCode[\"Numpad_6\"] = 102] = \"Numpad_6\";\n        KeyCode[KeyCode[\"Numpad_7\"] = 103] = \"Numpad_7\";\n        KeyCode[KeyCode[\"Numpad_8\"] = 104] = \"Numpad_8\";\n        KeyCode[KeyCode[\"Numpad_9\"] = 105] = \"Numpad_9\";\n        KeyCode[KeyCode[\"Multiply\"] = 106] = \"Multiply\";\n        KeyCode[KeyCode[\"Add\"] = 107] = \"Add\";\n        KeyCode[KeyCode[\"Subtract\"] = 109] = \"Subtract\";\n        KeyCode[KeyCode[\"Decimal\"] = 110] = \"Decimal\";\n        KeyCode[KeyCode[\"Divide\"] = 111] = \"Divide\";\n        KeyCode[KeyCode[\"F1\"] = 112] = \"F1\";\n        KeyCode[KeyCode[\"F2\"] = 113] = \"F2\";\n        KeyCode[KeyCode[\"F3\"] = 114] = \"F3\";\n        KeyCode[KeyCode[\"F4\"] = 115] = \"F4\";\n        KeyCode[KeyCode[\"F5\"] = 116] = \"F5\";\n        KeyCode[KeyCode[\"F6\"] = 117] = \"F6\";\n        KeyCode[KeyCode[\"F7\"] = 118] = \"F7\";\n        KeyCode[KeyCode[\"F8\"] = 119] = \"F8\";\n        KeyCode[KeyCode[\"F9\"] = 120] = \"F9\";\n        KeyCode[KeyCode[\"F10\"] = 121] = \"F10\";\n        KeyCode[KeyCode[\"F11\"] = 122] = \"F11\";\n        KeyCode[KeyCode[\"F12\"] = 123] = \"F12\";\n        KeyCode[KeyCode[\"NumLock\"] = 144] = \"NumLock\";\n        KeyCode[KeyCode[\"ScrollLock\"] = 145] = \"ScrollLock\";\n        KeyCode[KeyCode[\"Semicolon\"] = 186] = \"Semicolon\";\n        KeyCode[KeyCode[\"Equals\"] = 187] = \"Equals\";\n        KeyCode[KeyCode[\"Comma\"] = 188] = \"Comma\";\n        KeyCode[KeyCode[\"Dash\"] = 189] = \"Dash\";\n        KeyCode[KeyCode[\"Period\"] = 190] = \"Period\";\n        KeyCode[KeyCode[\"ForwardSlash\"] = 191] = \"ForwardSlash\";\n        KeyCode[KeyCode[\"GraveAccent\"] = 192] = \"GraveAccent\";\n        KeyCode[KeyCode[\"OpenBracket\"] = 219] = \"OpenBracket\";\n        KeyCode[KeyCode[\"BackSlash\"] = 220] = \"BackSlash\";\n        KeyCode[KeyCode[\"CloseBracket\"] = 221] = \"CloseBracket\";\n        KeyCode[KeyCode[\"SingleQuote\"] = 222] = \"SingleQuote\";\n      })(KeyCode = exports.KeyCode || (exports.KeyCode = {}));\n      /***/\n\n    },\n    /* 26 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var browser_1 = __webpack_require__(17);\n\n      var common_1 = __webpack_require__(48);\n\n      var math_1 = __webpack_require__(33);\n\n      var string_1 = __webpack_require__(58);\n\n      var DomUtils = function () {\n        function DomUtils() {}\n\n        DomUtils.clearInnerHtml = function (element) {\n          while (element.firstChild) {\n            element.removeChild(element.firstChild);\n          }\n        };\n\n        DomUtils.setStylePosition = function (style, point) {\n          style.left = math_1.MathUtils.round(point.x, 3) + 'px';\n          style.top = math_1.MathUtils.round(point.y, 3) + 'px';\n        };\n\n        DomUtils.setStyleSize = function (style, size) {\n          style.width = math_1.MathUtils.round(size.width, 3) + 'px';\n          style.height = math_1.MathUtils.round(size.height, 3) + 'px';\n        };\n\n        DomUtils.setStyleSizeAndPosition = function (style, rectangle) {\n          DomUtils.setStylePosition(style, rectangle);\n          DomUtils.setStyleSize(style, rectangle);\n        };\n\n        DomUtils.hideNode = function (node) {\n          if (node) {\n            var parentNode = node.parentNode;\n            if (parentNode) parentNode.removeChild(node);\n          }\n        };\n\n        DomUtils.isHTMLElementNode = function (node) {\n          return node.nodeType === Node.ELEMENT_NODE;\n        };\n\n        DomUtils.isTextNode = function (node) {\n          return node.nodeType === Node.TEXT_NODE;\n        };\n\n        DomUtils.isElementNode = function (node) {\n          return node.nodeType === Node.ELEMENT_NODE;\n        };\n\n        DomUtils.isHTMLTableRowElement = function (element) {\n          return element.tagName === 'TR';\n        };\n\n        DomUtils.isItParent = function (parentElement, element) {\n          if (!parentElement || !element) return false;\n\n          while (element) {\n            if (element === parentElement) return true;\n            if (element.tagName === 'BODY') return false;\n            element = element.parentNode;\n          }\n\n          return false;\n        };\n\n        DomUtils.getParentByTagName = function (element, tagName) {\n          tagName = tagName.toUpperCase();\n\n          while (element) {\n            if (element.tagName === 'BODY') return null;\n            if (element.tagName === tagName) return element;\n            element = element.parentNode;\n          }\n\n          return null;\n        };\n\n        DomUtils.getDocumentScrollTop = function () {\n          var isScrollBodyIE = browser_1.Browser.IE && DomUtils.getCurrentStyle(document.body).overflow === 'hidden' && document.body.scrollTop > 0;\n\n          if (browser_1.Browser.WebKitFamily || browser_1.Browser.Edge || isScrollBodyIE) {\n            if (browser_1.Browser.MacOSMobilePlatform) return window.pageYOffset;\n            if (browser_1.Browser.WebKitFamily) return document.documentElement.scrollTop || document.body.scrollTop;\n            return document.body.scrollTop;\n          } else return document.documentElement.scrollTop;\n        };\n\n        DomUtils.getDocumentScrollLeft = function () {\n          var isScrollBodyIE = browser_1.Browser.IE && DomUtils.getCurrentStyle(document.body).overflow === 'hidden' && document.body.scrollLeft > 0;\n          if (browser_1.Browser.Edge || isScrollBodyIE) return document.body ? document.body.scrollLeft : document.documentElement.scrollLeft;\n          if (browser_1.Browser.WebKitFamily) return document.documentElement.scrollLeft || document.body.scrollLeft;\n          return document.documentElement.scrollLeft;\n        };\n\n        DomUtils.getCurrentStyle = function (element) {\n          if (element.currentStyle) return element.currentStyle;else if (document.defaultView && document.defaultView.getComputedStyle) {\n            var result = document.defaultView.getComputedStyle(element, null);\n\n            if (!result && browser_1.Browser.Firefox && window.frameElement) {\n              var changes = [];\n              var curElement = window.frameElement;\n\n              while (!(result = document.defaultView.getComputedStyle(element, null))) {\n                changes.push([curElement, curElement.style.display]);\n                curElement.style.setProperty('display', 'block', 'important');\n                curElement = curElement.tagName === 'BODY' ? curElement.ownerDocument.defaultView.frameElement : curElement.parentNode;\n              }\n\n              result = cloneObject(result);\n\n              for (var ch = void 0, i = 0; ch = changes[i]; i++) {\n                ch[0].style.display = ch[1];\n              }\n\n              document.body.offsetWidth;\n            }\n\n            return result;\n          }\n          return window.getComputedStyle(element, null);\n        };\n\n        DomUtils.setFocus = function (element) {\n          function focusCore() {\n            try {\n              element.focus();\n              if (browser_1.Browser.IE && document.activeElement !== element) element.focus();\n            } catch (e) {}\n          }\n\n          if (browser_1.Browser.MacOSMobilePlatform) focusCore();else {\n            setTimeout(function () {\n              focusCore();\n            }, 100);\n          }\n        };\n\n        DomUtils.hasClassName = function (element, className) {\n          try {\n            var classNames = className.split(' ');\n            var classList = element.classList;\n\n            if (classList) {\n              for (var i = classNames.length - 1; i >= 0; i--) {\n                if (!classList.contains(classNames[i])) return false;\n              }\n            } else {\n              var elementClassName = element.getAttribute && element.getAttribute('class');\n              if (!elementClassName) return false;\n              var elementClasses = elementClassName.split(' ');\n\n              for (var i = classNames.length - 1; i >= 0; i--) {\n                if (elementClasses.indexOf(classNames[i]) < 0) return false;\n              }\n            }\n\n            return true;\n          } catch (e) {\n            return false;\n          }\n        };\n\n        DomUtils.addClassName = function (element, className) {\n          if (!DomUtils.hasClassName(element, className)) {\n            var elementClassName = element.getAttribute && element.getAttribute('class');\n            element.setAttribute('class', elementClassName === '' ? className : elementClassName + \" \" + className);\n          }\n        };\n\n        DomUtils.removeClassName = function (element, className) {\n          var elementClassName = element.getAttribute && element.getAttribute('class');\n          var updClassName = \" \" + elementClassName + \" \";\n          var newClassName = updClassName.replace(\" \" + className + \" \", ' ');\n          if (updClassName.length !== newClassName.length) element.setAttribute('class', string_1.StringUtils.trim(newClassName));\n        };\n\n        DomUtils.toggleClassName = function (element, className, toggle) {\n          if (toggle === undefined) {\n            if (DomUtils.hasClassName(element, className)) DomUtils.removeClassName(element, className);else DomUtils.addClassName(element, className);\n          } else {\n            if (toggle) DomUtils.addClassName(element, className);else DomUtils.removeClassName(element, className);\n          }\n        };\n\n        DomUtils.pxToInt = function (px) {\n          return pxToNumber(px, parseInt);\n        };\n\n        DomUtils.pxToFloat = function (px) {\n          return pxToNumber(px, parseFloat);\n        };\n\n        DomUtils.getAbsolutePositionY = function (element) {\n          function getAbsolutePositionY_IE(element) {\n            return browser_1.Browser.IE && element.parentNode === null ? 0 : element.getBoundingClientRect().top + DomUtils.getDocumentScrollTop();\n          }\n\n          function getAbsolutePositionY_FF3(element) {\n            return Math.round(element.getBoundingClientRect().top + DomUtils.getDocumentScrollTop());\n          }\n\n          function getAbsolutePositionY_Opera(curEl) {\n            var isFirstCycle = true;\n            if (curEl && DomUtils.isHTMLTableRowElement(curEl) && curEl.cells.length > 0) curEl = curEl.cells[0];\n            var pos = getAbsoluteScrollOffset_OperaFF(curEl, false);\n\n            while (curEl != null) {\n              pos += curEl.offsetTop;\n              if (!isFirstCycle) pos -= curEl.scrollTop;\n              curEl = curEl.offsetParent;\n              isFirstCycle = false;\n            }\n\n            pos += document.body.scrollTop;\n            return pos;\n          }\n\n          function getAbsolutePositionY_NS(curEl) {\n            var pos = getAbsoluteScrollOffset_OperaFF(curEl, false);\n            var isFirstCycle = true;\n\n            while (curEl != null) {\n              pos += curEl.offsetTop;\n              if (!isFirstCycle && curEl.offsetParent != null) pos -= curEl.scrollTop;\n\n              if (!isFirstCycle && browser_1.Browser.Firefox) {\n                var style = DomUtils.getCurrentStyle(curEl);\n                if (curEl.tagName === 'DIV' && style.overflow !== 'visible') pos += DomUtils.pxToInt(style.borderTopWidth);\n              }\n\n              isFirstCycle = false;\n              curEl = curEl.offsetParent;\n            }\n\n            return pos;\n          }\n\n          function getAbsolutePositionY_Other(curEl) {\n            var pos = 0;\n            var isFirstCycle = true;\n\n            while (curEl != null) {\n              pos += curEl.offsetTop;\n              if (!isFirstCycle && curEl.offsetParent != null) pos -= curEl.scrollTop;\n              isFirstCycle = false;\n              curEl = curEl.offsetParent;\n            }\n\n            return pos;\n          }\n\n          if (!element) return 0;\n          if (browser_1.Browser.IE) return getAbsolutePositionY_IE(element);else if (browser_1.Browser.Firefox && browser_1.Browser.Version >= 3) return getAbsolutePositionY_FF3(element);else if (browser_1.Browser.Opera) return getAbsolutePositionY_Opera(element);else if (browser_1.Browser.NetscapeFamily && (!browser_1.Browser.Firefox || browser_1.Browser.Version < 3)) return getAbsolutePositionY_NS(element);else if (browser_1.Browser.WebKitFamily || browser_1.Browser.Edge) return getAbsolutePositionY_FF3(element);\n          return getAbsolutePositionY_Other(element);\n        };\n\n        DomUtils.getAbsolutePositionX = function (element) {\n          function getAbsolutePositionX_IE(element) {\n            return browser_1.Browser.IE && element.parentNode === null ? 0 : element.getBoundingClientRect().left + DomUtils.getDocumentScrollLeft();\n          }\n\n          function getAbsolutePositionX_FF3(element) {\n            return Math.round(element.getBoundingClientRect().left + DomUtils.getDocumentScrollLeft());\n          }\n\n          function getAbsolutePositionX_Opera(curEl) {\n            var isFirstCycle = true;\n            var pos = getAbsoluteScrollOffset_OperaFF(curEl, true);\n\n            while (curEl != null) {\n              pos += curEl.offsetLeft;\n              if (!isFirstCycle) pos -= curEl.scrollLeft;\n              curEl = curEl.offsetParent;\n              isFirstCycle = false;\n            }\n\n            pos += document.body.scrollLeft;\n            return pos;\n          }\n\n          function getAbsolutePositionX_NS(curEl) {\n            var pos = getAbsoluteScrollOffset_OperaFF(curEl, true);\n            var isFirstCycle = true;\n\n            while (curEl != null) {\n              pos += curEl.offsetLeft;\n              if (!isFirstCycle && curEl.offsetParent != null) pos -= curEl.scrollLeft;\n\n              if (!isFirstCycle && browser_1.Browser.Firefox) {\n                var style = DomUtils.getCurrentStyle(curEl);\n                if (curEl.tagName === 'DIV' && style.overflow !== 'visible') pos += DomUtils.pxToInt(style.borderLeftWidth);\n              }\n\n              isFirstCycle = false;\n              curEl = curEl.offsetParent;\n            }\n\n            return pos;\n          }\n\n          function getAbsolutePositionX_Other(curEl) {\n            var pos = 0;\n            var isFirstCycle = true;\n\n            while (curEl != null) {\n              pos += curEl.offsetLeft;\n              if (!isFirstCycle && curEl.offsetParent != null) pos -= curEl.scrollLeft;\n              isFirstCycle = false;\n              curEl = curEl.offsetParent;\n            }\n\n            return pos;\n          }\n\n          if (!element) return 0;\n          if (browser_1.Browser.IE) return getAbsolutePositionX_IE(element);else if (browser_1.Browser.Firefox && browser_1.Browser.Version >= 3) return getAbsolutePositionX_FF3(element);else if (browser_1.Browser.Opera) return getAbsolutePositionX_Opera(element);else if (browser_1.Browser.NetscapeFamily && (!browser_1.Browser.Firefox || browser_1.Browser.Version < 3)) return getAbsolutePositionX_NS(element);else if (browser_1.Browser.WebKitFamily || browser_1.Browser.Edge) return getAbsolutePositionX_FF3(element);else return getAbsolutePositionX_Other(element);\n        };\n\n        DomUtils.isInteractiveControl = function (element) {\n          return ['A', 'INPUT', 'SELECT', 'OPTION', 'TEXTAREA', 'BUTTON', 'IFRAME'].indexOf(element.tagName) > -1;\n        };\n\n        DomUtils.getClearClientHeight = function (element) {\n          return element.offsetHeight - (DomUtils.getTopBottomPaddings(element) + DomUtils.getVerticalBordersWidth(element));\n        };\n\n        DomUtils.getTopBottomPaddings = function (element, style) {\n          var currentStyle = style ? style : DomUtils.getCurrentStyle(element);\n          return DomUtils.pxToInt(currentStyle.paddingTop) + DomUtils.pxToInt(currentStyle.paddingBottom);\n        };\n\n        DomUtils.getVerticalBordersWidth = function (element, style) {\n          if (!common_1.isDefined(style)) style = browser_1.Browser.IE && browser_1.Browser.MajorVersion !== 9 && window.getComputedStyle ? window.getComputedStyle(element) : DomUtils.getCurrentStyle(element);\n          var res = 0;\n          if (style.borderTopStyle !== 'none') res += DomUtils.pxToFloat(style.borderTopWidth);\n          if (style.borderBottomStyle !== 'none') res += DomUtils.pxToFloat(style.borderBottomWidth);\n          return res;\n        };\n\n        DomUtils.getNodes = function (parent, predicate) {\n          var collection = parent.all || parent.getElementsByTagName('*');\n          var result = [];\n\n          for (var i = 0; i < collection.length; i++) {\n            var element = collection[i];\n            if (predicate(element)) result.push(element);\n          }\n\n          return result;\n        };\n\n        DomUtils.getChildNodes = function (parent, predicate) {\n          var collection = parent.childNodes;\n          var result = [];\n\n          for (var i = 0; i < collection.length; i++) {\n            var element = collection[i];\n            if (predicate(element)) result.push(element);\n          }\n\n          return result;\n        };\n\n        DomUtils.getNodesByClassName = function (parent, className) {\n          if (parent.querySelectorAll) {\n            var children = parent.querySelectorAll(\".\" + className);\n            var result_1 = [];\n            children.forEach(function (element) {\n              return result_1.push(element);\n            });\n            return result_1;\n          } else return DomUtils.getNodes(parent, function (elem) {\n            return DomUtils.hasClassName(elem, className);\n          });\n        };\n\n        DomUtils.getChildNodesByClassName = function (parent, className) {\n          function nodeListToArray(nodeList, filter) {\n            var result = [];\n\n            for (var i = 0; i < nodeList.length; i++) {\n              var element = nodeList[i];\n              if (filter(element)) result.push(element);\n            }\n\n            return result;\n          }\n\n          if (parent.querySelectorAll) {\n            var children = parent.querySelectorAll(\".\" + className);\n            return nodeListToArray(children, function (element) {\n              return element.parentNode === parent;\n            });\n          } else {\n            return DomUtils.getChildNodes(parent, function (elem) {\n              if (DomUtils.isElementNode(elem)) return common_1.isNonNullString(elem.className) && DomUtils.hasClassName(elem, elem.className);else return false;\n            });\n          }\n        };\n\n        DomUtils.getVerticalScrollBarWidth = function () {\n          if (DomUtils.verticalScrollBarWidth === undefined) {\n            var container = document.createElement('DIV');\n            container.style.cssText = 'position: absolute; top: 0px; left: 0px; visibility: hidden; width: 200px; height: 150px; overflow: hidden; box-sizing: content-box';\n            document.body.appendChild(container);\n            var child = document.createElement('P');\n            container.appendChild(child);\n            child.style.cssText = 'width: 100%; height: 200px;';\n            var widthWithoutScrollBar = child.offsetWidth;\n            container.style.overflow = 'scroll';\n            var widthWithScrollBar = child.offsetWidth;\n            if (widthWithoutScrollBar === widthWithScrollBar) widthWithScrollBar = container.clientWidth;\n            DomUtils.verticalScrollBarWidth = widthWithoutScrollBar - widthWithScrollBar;\n            document.body.removeChild(container);\n          }\n\n          return DomUtils.verticalScrollBarWidth;\n        };\n\n        DomUtils.getHorizontalBordersWidth = function (element, style) {\n          if (!common_1.isDefined(style)) style = browser_1.Browser.IE && window.getComputedStyle ? window.getComputedStyle(element) : DomUtils.getCurrentStyle(element);\n          var res = 0;\n          if (style.borderLeftStyle !== 'none') res += DomUtils.pxToFloat(style.borderLeftWidth);\n          if (style.borderRightStyle !== 'none') res += DomUtils.pxToFloat(style.borderRightWidth);\n          return res;\n        };\n\n        DomUtils.getFontFamiliesFromCssString = function (cssString) {\n          return cssString.split(',').map(function (fam) {\n            return string_1.StringUtils.trim(fam.replace(/'|\"/gi, ''));\n          });\n        };\n\n        DomUtils.getInnerText = function (container) {\n          if (browser_1.Browser.Safari && browser_1.Browser.MajorVersion <= 5) {\n            if (DomUtils.html2PlainTextFilter === null) {\n              DomUtils.html2PlainTextFilter = document.createElement('DIV');\n              DomUtils.html2PlainTextFilter.style.width = '0';\n              DomUtils.html2PlainTextFilter.style.height = '0';\n              DomUtils.html2PlainTextFilter.style.overflow = 'visible';\n              DomUtils.html2PlainTextFilter.style.display = 'none';\n              document.body.appendChild(DomUtils.html2PlainTextFilter);\n            }\n\n            var filter = DomUtils.html2PlainTextFilter;\n            filter.innerHTML = container.innerHTML;\n            filter.style.display = '';\n            var innerText = filter.innerText;\n            filter.style.display = 'none';\n            return innerText;\n          } else if (browser_1.Browser.NetscapeFamily || browser_1.Browser.WebKitFamily || browser_1.Browser.IE && browser_1.Browser.Version >= 9 || browser_1.Browser.Edge) return container.textContent;else return container.innerText;\n        };\n\n        DomUtils.html2PlainTextFilter = null;\n        DomUtils.verticalScrollBarWidth = undefined;\n        return DomUtils;\n      }();\n\n      exports.DomUtils = DomUtils;\n\n      function cloneObject(srcObject) {\n        if (typeof srcObject !== 'object' || !common_1.isDefined(srcObject)) return srcObject;\n        var newObject = {};\n\n        for (var i in srcObject) {\n          newObject[i] = srcObject[i];\n        }\n\n        return newObject;\n      }\n\n      function pxToNumber(px, parseFunction) {\n        var result = 0;\n\n        if (common_1.isDefined(px) && px !== '') {\n          try {\n            var indexOfPx = px.indexOf('px');\n            if (indexOfPx > -1) result = parseFunction(px.substr(0, indexOfPx));\n          } catch (e) {}\n        }\n\n        return result;\n      }\n\n      function getAbsoluteScrollOffset_OperaFF(curEl, isX) {\n        var pos = 0;\n        var isFirstCycle = true;\n\n        while (curEl != null) {\n          if (curEl.tagName === 'BODY') break;\n          var style = DomUtils.getCurrentStyle(curEl);\n          if (style.position === 'absolute') break;\n          if (!isFirstCycle && curEl.tagName === 'DIV' && (style.position === '' || style.position === 'static')) pos -= isX ? curEl.scrollLeft : curEl.scrollTop;\n          curEl = curEl.parentNode;\n          isFirstCycle = false;\n        }\n\n        return pos;\n      }\n      /***/\n\n    },\n    /* 27 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ConnectorRoutingMode = exports.AutoZoomMode = exports.DiagramSettings = void 0;\n\n      var Utils_1 = __webpack_require__(3);\n\n      var size_1 = __webpack_require__(2);\n\n      var Enums_1 = __webpack_require__(46);\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var DiagramSettings =\n      /** @class */\n      function () {\n        function DiagramSettings() {\n          this.onZoomChanged = new Utils_1.EventDispatcher();\n          this.onViewChanged = new Utils_1.EventDispatcher();\n          this.onReadOnlyChanged = new Utils_1.EventDispatcher();\n          this.onConnectorRoutingModeChanged = new Utils_1.EventDispatcher();\n          this._zoomLevel = 1;\n          this._zoomLevelItems = [0.5, 0.75, 1, 1.25, 1.5, 2, 3];\n          this._simpleView = false;\n          this._fullscreen = false;\n          this._readOnly = false;\n          this._autoZoom = AutoZoomMode.Disabled;\n          this._snapToGrid = true;\n          this._showGrid = true;\n          this._contextMenuEnabled = true;\n          this._gridSize = 180;\n          this._gridSizeItems = [90, 180, 360, 720];\n          this._pageSizeItems = [{\n            size: new size_1.Size(12240, 15840),\n            text: \"US-Letter ({width} x {height})\"\n          }, {\n            size: new size_1.Size(12240, 20160),\n            text: \"US-Legal ({width} x {height})\"\n          }, {\n            size: new size_1.Size(15817, 24491),\n            text: \"US-Tabloid ({width} x {height})\"\n          }, {\n            size: new size_1.Size(47679, 67408),\n            text: \"A0 ({width} x {height})\"\n          }, {\n            size: new size_1.Size(33676, 47679),\n            text: \"A1 ({width} x {height})\"\n          }, {\n            size: new size_1.Size(23811, 33676),\n            text: \"A2 ({width} x {height})\"\n          }, {\n            size: new size_1.Size(16838, 23811),\n            text: \"A3 ({width} x {height})\"\n          }, {\n            size: new size_1.Size(11906, 16838),\n            text: \"A4 ({width} x {height})\"\n          }, {\n            size: new size_1.Size(8391, 11906),\n            text: \"A5 ({width} x {height})\"\n          }, {\n            size: new size_1.Size(5953, 8391),\n            text: \"A6 ({width} x {height})\"\n          }, {\n            size: new size_1.Size(4195, 5953),\n            text: \"A7 ({width} x {height})\"\n          }];\n          this._viewUnits = Enums_1.DiagramUnit.In;\n          this._connectorRoutingMode = ConnectorRoutingMode.AllShapesOnly;\n        }\n\n        Object.defineProperty(DiagramSettings.prototype, \"zoomLevel\", {\n          get: function get() {\n            return this._zoomLevel;\n          },\n          set: function set(value) {\n            var _this = this;\n\n            value = DiagramSettings.correctZoomLevel(value);\n\n            if (value !== this._zoomLevel) {\n              this._zoomLevel = value;\n              this.onZoomChanged.raise1(function (listener) {\n                return listener.notifyZoomChanged(value, _this._autoZoom);\n              });\n            }\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DiagramSettings.prototype, \"zoomLevelItems\", {\n          get: function get() {\n            return this._zoomLevelItems;\n          },\n          set: function set(value) {\n            value = value.map(function (l) {\n              return DiagramSettings.correctZoomLevel(l);\n            });\n            if (value !== this._zoomLevelItems) this._zoomLevelItems = value;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DiagramSettings.prototype, \"autoZoom\", {\n          get: function get() {\n            return this._autoZoom;\n          },\n          set: function set(value) {\n            var _this = this;\n\n            if (value !== this._autoZoom) {\n              this._autoZoom = value;\n              this.onZoomChanged.raise1(function (l) {\n                return l.notifyZoomChanged(_this._zoomLevel, value);\n              });\n            }\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DiagramSettings.prototype, \"simpleView\", {\n          get: function get() {\n            return this._simpleView;\n          },\n          set: function set(value) {\n            if (value !== this._simpleView) {\n              this._simpleView = value;\n              this.onViewChanged.raise1(function (listener) {\n                return listener.notifyViewChanged(value);\n              });\n            }\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DiagramSettings.prototype, \"readOnly\", {\n          get: function get() {\n            return this._readOnly;\n          },\n          set: function set(value) {\n            if (value !== this._readOnly) {\n              this._readOnly = value;\n              this.onReadOnlyChanged.raise1(function (listener) {\n                return listener.notifyReadOnlyChanged(value);\n              });\n            }\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DiagramSettings.prototype, \"fullscreen\", {\n          get: function get() {\n            return this._fullscreen;\n          },\n          set: function set(value) {\n            this._fullscreen = value;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DiagramSettings.prototype, \"snapToGrid\", {\n          get: function get() {\n            return this._snapToGrid;\n          },\n          set: function set(value) {\n            this._snapToGrid = value;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DiagramSettings.prototype, \"showGrid\", {\n          get: function get() {\n            return this._showGrid;\n          },\n          set: function set(value) {\n            var _this = this;\n\n            if (value !== this._showGrid) {\n              this._showGrid = value;\n              this.onViewChanged.raise1(function (l) {\n                return l.notifyGridChanged(_this.showGrid, _this.gridSize);\n              });\n            }\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DiagramSettings.prototype, \"contextMenuEnabled\", {\n          get: function get() {\n            return this._contextMenuEnabled;\n          },\n          set: function set(value) {\n            this._contextMenuEnabled = value;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DiagramSettings.prototype, \"gridSize\", {\n          get: function get() {\n            return this._gridSize;\n          },\n          set: function set(value) {\n            var _this = this;\n\n            if (value !== this._gridSize) {\n              this._gridSize = value;\n              this.onViewChanged.raise1(function (l) {\n                return l.notifyGridChanged(_this.showGrid, _this.gridSize);\n              });\n            }\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DiagramSettings.prototype, \"gridSizeItems\", {\n          get: function get() {\n            return this._gridSizeItems;\n          },\n          set: function set(value) {\n            if (value !== this._gridSizeItems) this._gridSizeItems = value;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DiagramSettings.prototype, \"pageSizeItems\", {\n          get: function get() {\n            return this._pageSizeItems;\n          },\n          set: function set(value) {\n            if (value !== this._pageSizeItems) this._pageSizeItems = value;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DiagramSettings.prototype, \"viewUnits\", {\n          get: function get() {\n            return this._viewUnits;\n          },\n          set: function set(value) {\n            this._viewUnits = value;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DiagramSettings.prototype, \"connectorRoutingMode\", {\n          get: function get() {\n            return this._connectorRoutingMode;\n          },\n          set: function set(value) {\n            if (value !== this._connectorRoutingMode) {\n              this._connectorRoutingMode = value;\n              this.onConnectorRoutingModeChanged.raise1(function (listener) {\n                return listener.notifyConnectorRoutingModeChanged(value);\n              });\n            }\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DiagramSettings.prototype, \"shapeMinWidth\", {\n          get: function get() {\n            return this._shapeMinWidth;\n          },\n          set: function set(value) {\n            this._shapeMinWidth = value;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DiagramSettings.prototype, \"shapeMinHeight\", {\n          get: function get() {\n            return this._shapeMinHeight;\n          },\n          set: function set(value) {\n            this._shapeMinHeight = value;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DiagramSettings.prototype, \"shapeMaxWidth\", {\n          get: function get() {\n            return this._shapeMaxWidth;\n          },\n          set: function set(value) {\n            this._shapeMaxWidth = value;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DiagramSettings.prototype, \"shapeMaxHeight\", {\n          get: function get() {\n            return this._shapeMaxHeight;\n          },\n          set: function set(value) {\n            this._shapeMaxHeight = value;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        DiagramSettings.prototype.applyShapeSizeSettings = function (settings, units) {\n          if (!settings) return;\n          if (typeof settings.shapeMaxHeight === \"number\") this.shapeMaxHeight = ModelUtils_1.ModelUtils.getTwipsValue(units, settings.shapeMaxHeight);\n          if (typeof settings.shapeMinHeight === \"number\") this.shapeMinHeight = ModelUtils_1.ModelUtils.getTwipsValue(units, settings.shapeMinHeight);\n          if (typeof settings.shapeMaxWidth === \"number\") this.shapeMaxWidth = ModelUtils_1.ModelUtils.getTwipsValue(units, settings.shapeMaxWidth);\n          if (typeof settings.shapeMinWidth === \"number\") this.shapeMinWidth = ModelUtils_1.ModelUtils.getTwipsValue(units, settings.shapeMinWidth);\n        };\n\n        DiagramSettings.correctZoomLevel = function (level) {\n          return Math.min(10, Math.max(level, 0.01));\n        };\n\n        return DiagramSettings;\n      }();\n\n      exports.DiagramSettings = DiagramSettings;\n      var AutoZoomMode;\n\n      (function (AutoZoomMode) {\n        AutoZoomMode[AutoZoomMode[\"Disabled\"] = 0] = \"Disabled\";\n        AutoZoomMode[AutoZoomMode[\"FitContent\"] = 1] = \"FitContent\";\n        AutoZoomMode[AutoZoomMode[\"FitToWidth\"] = 2] = \"FitToWidth\";\n      })(AutoZoomMode = exports.AutoZoomMode || (exports.AutoZoomMode = {}));\n\n      var ConnectorRoutingMode;\n\n      (function (ConnectorRoutingMode) {\n        ConnectorRoutingMode[ConnectorRoutingMode[\"None\"] = 0] = \"None\";\n        ConnectorRoutingMode[ConnectorRoutingMode[\"ConnectorShapesOnly\"] = 1] = \"ConnectorShapesOnly\";\n        ConnectorRoutingMode[ConnectorRoutingMode[\"AllShapesOnly\"] = 2] = \"AllShapesOnly\"; // AllDiagramItems = 3,\n      })(ConnectorRoutingMode = exports.ConnectorRoutingMode || (exports.ConnectorRoutingMode = {}));\n      /***/\n\n    },\n    /* 28 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics11 = function extendStatics(d, b) {\n          _extendStatics11 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics11(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics11(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ConnectorRenderPoint = void 0;\n\n      var point_1 = __webpack_require__(1);\n\n      var ConnectorRenderPoint =\n      /** @class */\n      function (_super) {\n        __extends(ConnectorRenderPoint, _super);\n\n        function ConnectorRenderPoint(x, y, pointIndex, skipped) {\n          if (pointIndex === void 0) {\n            pointIndex = -1;\n          }\n\n          if (skipped === void 0) {\n            skipped = false;\n          }\n\n          var _this = _super.call(this, x, y) || this;\n\n          _this.pointIndex = pointIndex;\n          _this.skipped = skipped;\n          return _this;\n        } // todo delete that\n\n\n        ConnectorRenderPoint.prototype.offset = function (offsetX, offsetY) {\n          _super.prototype.offset.call(this, offsetX, offsetY);\n\n          this.pointIndex = -1;\n          this.skipped = false;\n          return this;\n        }; // todo delete that\n\n\n        ConnectorRenderPoint.prototype.multiply = function (multiplierX, multiplierY) {\n          _super.prototype.multiply.call(this, multiplierX, multiplierY);\n\n          this.pointIndex = -1;\n          this.skipped = false;\n          return this;\n        };\n\n        ConnectorRenderPoint.prototype.clone = function () {\n          return new ConnectorRenderPoint(this.x, this.y, this.pointIndex, this.skipped);\n        };\n\n        return ConnectorRenderPoint;\n      }(point_1.Point);\n\n      exports.ConnectorRenderPoint = ConnectorRenderPoint;\n      /***/\n    },\n    /* 29 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ShapeParameterPoint = void 0;\n\n      var ShapeParameterPoint =\n      /** @class */\n      function () {\n        function ShapeParameterPoint(key, point) {\n          this.key = key;\n          this.point = point;\n        }\n\n        return ShapeParameterPoint;\n      }();\n\n      exports.ShapeParameterPoint = ShapeParameterPoint;\n      /***/\n    },\n    /* 30 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics12 = function extendStatics(d, b) {\n          _extendStatics12 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics12(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics12(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.EmptyStyle = exports.StrokeStyle = exports.TextAlignment = exports.TextStyle = exports.Style = exports.DEFAULT_STROKE_DASHARRAY = exports.DEFAULT_STROKE_WIDTH = exports.StyleBase = void 0;\n\n      var color_1 = __webpack_require__(22);\n\n      var Svg_1 = __webpack_require__(111);\n\n      var unit_converter_1 = __webpack_require__(12);\n\n      var StyleBase =\n      /** @class */\n      function () {\n        function StyleBase() {\n          this.createDefaultProperties();\n        }\n\n        StyleBase.prototype.clone = function () {\n          var _this = this;\n\n          var style = this.createInstance();\n          this.forEach(function (propertyName) {\n            style[propertyName] = _this[propertyName];\n          });\n          return style;\n        };\n\n        StyleBase.prototype.forEach = function (callback) {\n          for (var propertyName in this) {\n            if (Object.prototype.hasOwnProperty.call(this, propertyName)) callback(propertyName);\n          }\n        };\n\n        Object.defineProperty(StyleBase.prototype, \"strokeWidthPx\", {\n          get: function get() {\n            return 0;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(StyleBase.prototype, \"strokeWidth\", {\n          get: function get() {\n            return unit_converter_1.UnitConverter.pixelsToTwips(this.strokeWidthPx);\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(StyleBase.prototype, \"strokeOffset\", {\n          get: function get() {\n            return 0.5;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        StyleBase.prototype.toHash = function () {\n          var obj = this.toObject();\n          return !obj ? \"\" : Object.keys(obj).map(function (k) {\n            return k + \"|\" + obj[k];\n          }).join(\"\");\n        };\n\n        StyleBase.prototype.toObject = function () {\n          var _this = this;\n\n          var result = {};\n          var modified = false;\n          var defaultStyle = this.getDefaultInstance();\n          this.forEach(function (key) {\n            if (_this[key] !== defaultStyle[key]) {\n              result[key] = _this[key];\n              modified = true;\n            }\n          });\n          return modified ? result : null;\n        };\n\n        StyleBase.prototype.fromObject = function (obj) {\n          for (var key in obj) {\n            if (Object.prototype.hasOwnProperty.call(obj, key)) {\n              var value = Svg_1.isColorProperty(key) ? color_1.ColorUtils.stringToHash(obj[key]) : obj[key];\n              this[key] = value;\n            }\n          }\n        };\n\n        return StyleBase;\n      }();\n\n      exports.StyleBase = StyleBase;\n      exports.DEFAULT_STROKE_WIDTH = 2;\n      exports.DEFAULT_STROKE_DASHARRAY = \"\";\n\n      var Style =\n      /** @class */\n      function (_super) {\n        __extends(Style, _super);\n\n        function Style() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        Style.prototype.createInstance = function () {\n          return new Style();\n        };\n\n        Style.prototype.createDefaultProperties = function () {\n          // Default values must be the same with css\n          this[\"fill\"] = \"#ffffff\";\n          this[\"stroke\"] = \"#000000\";\n          this[\"stroke-width\"] = exports.DEFAULT_STROKE_WIDTH.toString();\n          this[\"stroke-dasharray\"] = exports.DEFAULT_STROKE_DASHARRAY;\n        };\n\n        Style.prototype.getDefaultInstance = function () {\n          return Style.defaultInstance;\n        };\n\n        Style.prototype.isDefaultStrokeDashArray = function () {\n          return this[\"stroke-dasharray\"] === exports.DEFAULT_STROKE_DASHARRAY;\n        };\n\n        Style.prototype.resetStrokeDashArray = function () {\n          this[\"stroke-dasharray\"] = exports.DEFAULT_STROKE_DASHARRAY;\n        };\n\n        Object.defineProperty(Style.prototype, \"strokeWidthPx\", {\n          get: function get() {\n            return parseInt(this[\"stroke-width\"]);\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Style.defaultInstance = new Style();\n        return Style;\n      }(StyleBase);\n\n      exports.Style = Style;\n\n      var TextStyle =\n      /** @class */\n      function (_super) {\n        __extends(TextStyle, _super);\n\n        function TextStyle() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        TextStyle.prototype.createInstance = function () {\n          return new TextStyle();\n        };\n\n        TextStyle.prototype.createDefaultProperties = function () {\n          // Default values must be the same with css\n          this[\"fill\"] = \"#000000\";\n          this[\"font-family\"] = \"Arial\";\n          this[\"font-size\"] = \"10pt\";\n          this[\"font-weight\"] = \"\";\n          this[\"font-style\"] = \"\";\n          this[\"text-decoration\"] = \"\";\n          this[\"text-anchor\"] = \"middle\";\n        };\n\n        TextStyle.prototype.getDefaultInstance = function () {\n          return TextStyle.defaultInstance;\n        };\n\n        TextStyle.prototype.getAlignment = function () {\n          switch (this[\"text-anchor\"]) {\n            case \"left\":\n              return TextAlignment.Left;\n\n            case \"right\":\n              return TextAlignment.Right;\n\n            default:\n              return TextAlignment.Center;\n          }\n        };\n\n        TextStyle.defaultInstance = new TextStyle();\n        return TextStyle;\n      }(StyleBase);\n\n      exports.TextStyle = TextStyle;\n      var TextAlignment;\n\n      (function (TextAlignment) {\n        TextAlignment[TextAlignment[\"Left\"] = 0] = \"Left\";\n        TextAlignment[TextAlignment[\"Right\"] = 1] = \"Right\";\n        TextAlignment[TextAlignment[\"Center\"] = 2] = \"Center\";\n      })(TextAlignment = exports.TextAlignment || (exports.TextAlignment = {}));\n\n      var StrokeStyle =\n      /** @class */\n      function (_super) {\n        __extends(StrokeStyle, _super);\n\n        function StrokeStyle(strokeWidthPx, strokeOffset) {\n          var _this = _super.call(this) || this;\n\n          _this._strokeWidthPx = strokeWidthPx;\n          _this._strokeOffset = strokeOffset;\n          return _this;\n        }\n\n        StrokeStyle.prototype.createInstance = function () {\n          return new StrokeStyle();\n        };\n\n        StrokeStyle.prototype.createDefaultProperties = function () {};\n\n        StrokeStyle.prototype.getDefaultInstance = function () {\n          return TextStyle.defaultInstance;\n        };\n\n        Object.defineProperty(StrokeStyle.prototype, \"strokeWidthPx\", {\n          get: function get() {\n            return this._strokeWidthPx || 0;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(StrokeStyle.prototype, \"strokeOffset\", {\n          get: function get() {\n            return this._strokeOffset || 0;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        StrokeStyle.default1pxInstance = new StrokeStyle(1, 0.5);\n        StrokeStyle.default1pxNegativeOffsetInstance = new StrokeStyle(1, -0.5);\n        StrokeStyle.default2pxInstance = new StrokeStyle(2);\n        return StrokeStyle;\n      }(Style);\n\n      exports.StrokeStyle = StrokeStyle;\n\n      var EmptyStyle =\n      /** @class */\n      function (_super) {\n        __extends(EmptyStyle, _super);\n\n        function EmptyStyle(styles) {\n          var _this = _super.call(this) || this;\n\n          if (styles) Object.keys(styles).forEach(function (k) {\n            return _this[k] = styles[k];\n          });\n          return _this;\n        }\n\n        EmptyStyle.prototype.createInstance = function () {\n          return new EmptyStyle();\n        };\n\n        EmptyStyle.prototype.createDefaultProperties = function () {};\n\n        EmptyStyle.prototype.getDefaultInstance = function () {\n          return TextStyle.defaultInstance;\n        };\n\n        EmptyStyle.defaultInstance = new EmptyStyle();\n        return EmptyStyle;\n      }(Style);\n\n      exports.EmptyStyle = EmptyStyle;\n      /***/\n    },\n    /* 31 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ConnectorProperties = exports.DEFAULT_CONNECTOR_ENDLINEENDING = exports.DEFAULT_CONNECTOR_STARTLINEENDING = exports.DEFAULT_CONNECTOR_LINEOPTION = exports.ConnectorLineEnding = exports.ConnectorLineOption = void 0;\n      var ConnectorLineOption;\n\n      (function (ConnectorLineOption) {\n        ConnectorLineOption[ConnectorLineOption[\"Straight\"] = 0] = \"Straight\";\n        ConnectorLineOption[ConnectorLineOption[\"Orthogonal\"] = 1] = \"Orthogonal\";\n      })(ConnectorLineOption = exports.ConnectorLineOption || (exports.ConnectorLineOption = {}));\n\n      var ConnectorLineEnding;\n\n      (function (ConnectorLineEnding) {\n        ConnectorLineEnding[ConnectorLineEnding[\"None\"] = 0] = \"None\";\n        ConnectorLineEnding[ConnectorLineEnding[\"Arrow\"] = 1] = \"Arrow\";\n        ConnectorLineEnding[ConnectorLineEnding[\"OutlinedTriangle\"] = 2] = \"OutlinedTriangle\";\n        ConnectorLineEnding[ConnectorLineEnding[\"FilledTriangle\"] = 3] = \"FilledTriangle\";\n      })(ConnectorLineEnding = exports.ConnectorLineEnding || (exports.ConnectorLineEnding = {}));\n\n      exports.DEFAULT_CONNECTOR_LINEOPTION = ConnectorLineOption.Orthogonal;\n      exports.DEFAULT_CONNECTOR_STARTLINEENDING = ConnectorLineEnding.None;\n      exports.DEFAULT_CONNECTOR_ENDLINEENDING = ConnectorLineEnding.Arrow;\n\n      var ConnectorProperties =\n      /** @class */\n      function () {\n        function ConnectorProperties() {\n          this.lineOption = exports.DEFAULT_CONNECTOR_LINEOPTION;\n          this.startLineEnding = exports.DEFAULT_CONNECTOR_STARTLINEENDING;\n          this.endLineEnding = exports.DEFAULT_CONNECTOR_ENDLINEENDING;\n        }\n\n        ConnectorProperties.prototype.clone = function () {\n          var clone = new ConnectorProperties();\n          clone.lineOption = this.lineOption;\n          clone.startLineEnding = this.startLineEnding;\n          clone.endLineEnding = this.endLineEnding;\n          return clone;\n        };\n\n        ConnectorProperties.prototype.forEach = function (callback) {\n          for (var propertyName in this) {\n            if (Object.prototype.hasOwnProperty.call(this, propertyName)) callback(propertyName);\n          }\n        };\n\n        ConnectorProperties.prototype.toObject = function () {\n          var result = {};\n          var modified = false;\n\n          if (this.lineOption !== exports.DEFAULT_CONNECTOR_LINEOPTION) {\n            result[\"lineOption\"] = this.lineOption;\n            modified = true;\n          }\n\n          if (this.startLineEnding !== exports.DEFAULT_CONNECTOR_STARTLINEENDING) {\n            result[\"startLineEnding\"] = this.startLineEnding;\n            modified = true;\n          }\n\n          if (this.endLineEnding !== exports.DEFAULT_CONNECTOR_ENDLINEENDING) {\n            result[\"endLineEnding\"] = this.endLineEnding;\n            modified = true;\n          }\n\n          return modified ? result : null;\n        };\n\n        ConnectorProperties.prototype.fromObject = function (obj) {\n          if (typeof obj[\"lineOption\"] === \"number\") this.lineOption = obj[\"lineOption\"];\n          if (typeof obj[\"startLineEnding\"] === \"number\") this.startLineEnding = obj[\"startLineEnding\"];\n          if (typeof obj[\"endLineEnding\"] === \"number\") this.endLineEnding = obj[\"endLineEnding\"];\n        };\n\n        return ConnectorProperties;\n      }();\n\n      exports.ConnectorProperties = ConnectorProperties;\n      /***/\n    },\n    /* 32 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics13 = function extendStatics(d, b) {\n          _extendStatics13 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics13(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics13(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MouseHandlerDraggingState = void 0;\n\n      var MouseHandlerStateBase_1 = __webpack_require__(39);\n\n      var Event_1 = __webpack_require__(11);\n\n      var unit_converter_1 = __webpack_require__(12);\n\n      var MouseHandlerDraggingState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerDraggingState, _super);\n\n        function MouseHandlerDraggingState(handler, history) {\n          var _this = _super.call(this, handler) || this;\n\n          _this.history = history;\n          return _this;\n        }\n\n        MouseHandlerDraggingState.prototype.canApplyChangesOnMouseMove = function (initPosition, position) {\n          return !initPosition || !position || Math.abs(initPosition.x - position.x) > MouseHandlerDraggingState.dragStartLimit || Math.abs(initPosition.y - position.y) > MouseHandlerDraggingState.dragStartLimit;\n        };\n\n        MouseHandlerDraggingState.prototype.onAfterApplyChanges = function () {\n          if (!this.modified) this.handler.raiseDragStart(this.getDraggingElementKeys());\n          this.modified = true;\n          this.mouseDownPoint = undefined;\n        };\n\n        MouseHandlerDraggingState.prototype.onMouseDown = function (evt) {\n          this.mouseDownPoint = evt.modelPoint.clone();\n        };\n\n        MouseHandlerDraggingState.prototype.onMouseMove = function (evt) {\n          this.mouseMoveEvent = evt;\n\n          if (evt.button !== Event_1.MouseButton.Left) {\n            this.cancelChanges();\n            this.handler.switchToDefaultState();\n          } else if (evt.button === Event_1.MouseButton.Left && this.canApplyChangesOnMouseMove(this.mouseDownPoint, evt.modelPoint)) {\n            this.onApplyChanges(evt);\n            this.onAfterApplyChanges();\n          }\n        };\n\n        MouseHandlerDraggingState.prototype.onKeyDown = function (evt) {\n          if (this.mouseMoveEvent && (evt.keyCode === 16 || evt.keyCode === 17 || evt.keyCode === 18)) // Shift, Ctrl, Alt\n            this.performMouseMoveEvent(evt.modifiers);\n        };\n\n        MouseHandlerDraggingState.prototype.onKeyUp = function (evt) {\n          if (this.mouseMoveEvent && (evt.keyCode === 16 || evt.keyCode === 17 || evt.keyCode === 18)) // Shift, Ctrl, Alt\n            this.performMouseMoveEvent(evt.modifiers);\n        };\n\n        MouseHandlerDraggingState.prototype.onMouseUp = function (evt) {\n          this.mouseDownPoint = undefined;\n          this.mouseMoveEvent = undefined;\n          this.handler.switchToDefaultState();\n        };\n\n        MouseHandlerDraggingState.prototype.performMouseMoveEvent = function (modifiers) {\n          this.mouseMoveEvent.modifiers = modifiers;\n          this.onMouseMove(this.mouseMoveEvent);\n        };\n\n        MouseHandlerDraggingState.prototype.start = function () {\n          this.handler.beginStorePermissions();\n          this.history.beginTransaction();\n        };\n\n        MouseHandlerDraggingState.prototype.finish = function () {\n          this.checkStoredPermissionsOnFinish();\n\n          if (this.modified) {\n            this.onFinishWithChanges();\n            this.modified = false;\n            this.history.endTransaction();\n            this.handler.raiseDragEnd(this.getDraggingElementKeys());\n          } else this.history.endTransaction();\n\n          this.handler.endStorePermissions();\n          this.handler.clearInteractingItems();\n        };\n\n        MouseHandlerDraggingState.prototype.checkStoredPermissionsOnFinish = function () {\n          if (!this.handler.isStoredPermissionsGranted()) {\n            this.cancelChanges();\n            this.modified = false;\n          }\n        };\n\n        MouseHandlerDraggingState.prototype.onFinishWithChanges = function () {};\n\n        MouseHandlerDraggingState.prototype.cancelChanges = function () {\n          this.handler.lockPermissions();\n          this.history.undoTransaction();\n          this.handler.unlockPermissions();\n          if (this.modified) this.handler.raiseDragEnd(this.getDraggingElementKeys());\n          this.modified = false;\n        };\n\n        MouseHandlerDraggingState.prototype.getSnappedPoint = function (evt, point) {\n          return this.handler.getSnappedPointOnDragPoint(evt, point);\n        };\n\n        MouseHandlerDraggingState.dragStartLimit = unit_converter_1.UnitConverter.pixelsToTwips(4);\n        return MouseHandlerDraggingState;\n      }(MouseHandlerStateBase_1.MouseHandlerCancellableState);\n\n      exports.MouseHandlerDraggingState = MouseHandlerDraggingState;\n      /***/\n    },\n    /* 33 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var list_1 = __webpack_require__(82);\n\n      var MathUtils = function () {\n        function MathUtils() {}\n\n        MathUtils.round = function (value, digits) {\n          if (digits === void 0) {\n            digits = 0;\n          }\n\n          var factor = MathUtils.powFactor[digits];\n          return Math.round(value * factor) / factor;\n        };\n\n        MathUtils.numberCloseTo = function (num, to, accuracy) {\n          if (accuracy === void 0) {\n            accuracy = 0.00001;\n          }\n\n          return Math.abs(num - to) < accuracy;\n        };\n\n        MathUtils.restrictValue = function (val, minVal, maxVal) {\n          if (maxVal < minVal) maxVal = minVal;\n          if (val > maxVal) return maxVal;else if (val < minVal) return minVal;\n          return val;\n        };\n\n        MathUtils.getRandomInt = function (min, max) {\n          return Math.floor(Math.random() * (max - min + 1)) + min;\n        };\n\n        MathUtils.generateGuid = function () {\n          return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            var r = Math.random() * 16 | 0;\n            var v = c === 'x' ? r : r & 0x3 | 0x8;\n            return v.toString(16);\n          });\n        };\n\n        MathUtils.powFactor = list_1.ListUtils.initByCallback(20, function (ind) {\n          return Math.pow(10, ind);\n        });\n        MathUtils.somePrimes = [1009, 1013, 1019, 1021, 1031, 1033, 1039, 1049, 1051, 1061, 1063, 1069, 1087, 1091, 1093, 1097, 1103, 1109, 1117, 1123, 1129, 1151, 1153, 1163, 1171, 1181, 1187, 1193, 1201, 1213, 1217, 1223, 1229, 1231, 1237, 1249, 1259, 1277, 1279, 1283, 1289, 1291, 1297, 1301, 1303, 1307, 1319, 1321, 1327, 1361, 1367, 1373, 1381, 1399, 1409, 1423, 1427, 1429, 1433, 1439, 1447, 1451, 1453, 1459, 1471, 1481, 1483, 1487, 1489, 1493, 1499, 1511, 1523, 1531, 1543, 1549, 1553, 1559, 1567, 1571, 1579, 1583, 1597, 1601, 1607, 1609, 1613, 1619, 1621, 1627, 1637, 1657, 1663, 1667, 1669, 1693, 1697, 1699, 1709, 1721, 1723, 1733, 1741, 1747, 1753, 1759, 1777, 1783, 1787, 1789, 1801, 1811, 1823, 1831, 1847, 1861, 1867, 1871, 1873, 1877, 1879, 1889, 1901, 1907, 1913, 1931, 1933, 1949, 1951, 1973, 1979, 1987, 1993, 1997, 1999, 2003];\n        return MathUtils;\n      }();\n\n      exports.MathUtils = MathUtils;\n      /***/\n    },\n    /* 34 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var math_1 = __webpack_require__(33);\n\n      var metrics_1 = __webpack_require__(83);\n\n      var point_1 = __webpack_require__(1);\n\n      var rectangle_1 = __webpack_require__(13);\n\n      var Segment = function () {\n        function Segment(startPoint, endPoint) {\n          this.startPoint = startPoint;\n          this.endPoint = endPoint;\n        }\n\n        Object.defineProperty(Segment.prototype, \"length\", {\n          get: function get() {\n            return metrics_1.Metrics.euclideanDistance(this.startPoint, this.endPoint);\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(Segment.prototype, \"xLength\", {\n          get: function get() {\n            return Math.abs(this.endPoint.x - this.startPoint.x);\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(Segment.prototype, \"yLength\", {\n          get: function get() {\n            return Math.abs(this.endPoint.y - this.startPoint.y);\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(Segment.prototype, \"center\", {\n          get: function get() {\n            return new point_1.Point(this.startPoint.x + (this.endPoint.x - this.startPoint.x) / 2, this.startPoint.y + (this.endPoint.y - this.startPoint.y) / 2);\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        Segment.prototype.isIntersected = function (segment) {\n          return this.startPoint.equals(segment.startPoint) || this.endPoint.equals(segment.startPoint) || this.startPoint.equals(segment.endPoint) || this.endPoint.equals(segment.endPoint) || this.intersectCore(segment) && segment.intersectCore(this);\n        };\n\n        Segment.prototype.containsPoint = function (point, accuracy) {\n          if (accuracy === void 0) {\n            accuracy = 0.0000001;\n          }\n\n          return this.startPoint.equals(point) || this.endPoint.equals(point) || math_1.MathUtils.numberCloseTo(this.length, metrics_1.Metrics.euclideanDistance(this.startPoint, point) + metrics_1.Metrics.euclideanDistance(this.endPoint, point), accuracy);\n        };\n\n        Segment.prototype.isIntersectedByRect = function (rect) {\n          if (rectangle_1.Rectangle.containsPoint(rect, this.startPoint) || rectangle_1.Rectangle.containsPoint(rect, this.endPoint)) return true;\n          var left = rect.x;\n          var right = rect.x + rect.width;\n          var top = rect.y;\n          var bottom = rect.y + rect.height;\n          return this.isIntersected(new Segment(new point_1.Point(left, top), new point_1.Point(left, bottom))) || this.isIntersected(new Segment(new point_1.Point(right, top), new point_1.Point(right, bottom))) || this.isIntersected(new Segment(new point_1.Point(left, top), new point_1.Point(right, top))) || this.isIntersected(new Segment(new point_1.Point(left, bottom), new point_1.Point(right, bottom)));\n        };\n\n        Segment.prototype.intersectCore = function (segment) {\n          if (this.startPoint.x === this.endPoint.x) {\n            if (this.startPoint.x - segment.endPoint.x !== 0) return (this.startPoint.x - segment.startPoint.x) / (this.startPoint.x - segment.endPoint.x) <= 0;\n            if (segment.endPoint.y - this.endPoint.y !== 0) return (segment.endPoint.y - this.startPoint.y) / (segment.endPoint.y - this.endPoint.y) <= 0;\n          }\n\n          if (this.startPoint.y === this.endPoint.y) {\n            if (this.startPoint.y - segment.endPoint.y !== 0) return (this.startPoint.y - segment.startPoint.y) / (this.startPoint.y - segment.endPoint.y) <= 0;\n            if (segment.endPoint.x - this.endPoint.x !== 0) return (segment.endPoint.x - this.startPoint.x) / (segment.endPoint.x - this.endPoint.x) <= 0;\n          }\n\n          var tg = (this.endPoint.y - this.startPoint.y) / (this.endPoint.x - this.startPoint.x);\n          var y1 = this.startPoint.y + (segment.startPoint.x - this.startPoint.x) * tg;\n          var y2 = this.startPoint.y + (segment.endPoint.x - this.startPoint.x) * tg;\n          var dy1 = segment.startPoint.y - y1;\n          var dy2 = segment.endPoint.y - y2;\n\n          if (dy1 === 0 && dy2 === 0) {\n            return (this.startPoint.y - y1) / (this.endPoint.y - y1) <= 0 || (this.startPoint.y - y2) / (this.endPoint.y - y2) <= 0;\n          }\n\n          return dy1 === 0 || dy2 === 0 || dy1 / dy2 < 0;\n        };\n\n        return Segment;\n      }();\n\n      exports.Segment = Segment;\n      /***/\n    },\n    /* 35 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.DiagramLocalizationService = void 0;\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var Enums_1 = __webpack_require__(46);\n\n      var DiagramLocalizationService =\n      /** @class */\n      function () {\n        function DiagramLocalizationService() {}\n\n        DiagramLocalizationService.unitItems = {};\n\n        DiagramLocalizationService.formatUnit = function (value) {\n          return value.toString();\n        };\n\n        DiagramLocalizationService.shapeTexts = {};\n        return DiagramLocalizationService;\n      }();\n\n      exports.DiagramLocalizationService = DiagramLocalizationService;\n      DiagramLocalizationService.unitItems[Enums_1.DiagramUnit.In] = \"in\";\n      DiagramLocalizationService.unitItems[Enums_1.DiagramUnit.Cm] = \"cm\";\n      DiagramLocalizationService.unitItems[Enums_1.DiagramUnit.Px] = \"px\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.Text] = \"Text\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.Rectangle] = \"Rectangle\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.Ellipse] = \"Ellipse\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.Cross] = \"Cross\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.Triangle] = \"Triangle\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.Diamond] = \"Diamond\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.Heart] = \"Heart\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.Pentagon] = \"Pentagon\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.Hexagon] = \"Hexagon\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.Octagon] = \"Octagon\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.Star] = \"Star\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.ArrowLeft] = \"Left Arrow\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.ArrowUp] = \"Up Arrow\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.ArrowRight] = \"Right Arrow\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.ArrowDown] = \"Down Arrow\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.ArrowUpDown] = \"Up Down Arrow\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.ArrowLeftRight] = \"Left Right Arrow\"; // Flowchart\n\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.Process] = \"Process\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.Decision] = \"Decision\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.Terminator] = \"Terminator\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.PredefinedProcess] = \"Predefined Process\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.Document] = \"Document\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.MultipleDocuments] = \"Multiple Documents\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.ManualInput] = \"Manual Input\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.Preparation] = \"Preparation\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.Data] = \"Data\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.Database] = \"Database\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.HardDisk] = \"Hard Disk\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.InternalStorage] = \"Internal Storage\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.PaperTape] = \"Paper Tape\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.ManualOperation] = \"Manual Operation\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.Delay] = \"Delay\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.StoredData] = \"Stored Data\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.Display] = \"Display\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.Merge] = \"Merge\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.Connector] = \"Connector\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.Or] = \"Or\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.SummingJunction] = \"Summing Junction\"; // Containers\n\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.Container] = \"Container\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.VerticalContainer] = \"Vertical Container\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.HorizontalContainer] = \"Horizontal Container\"; // Shapes with images\n\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.Card] = \"Person's Name\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.CardWithImageOnLeft] = \"Card with Image on the Left\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.CardWithImageOnTop] = \"Card with Image on the Top\";\n      DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.CardWithImageOnRight] = \"Card with Image on the Right\";\n      /***/\n    },\n    /* 36 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ShapeParameters = exports.ShapeParameter = void 0;\n\n      var ShapeParameter =\n      /** @class */\n      function () {\n        function ShapeParameter(key, value) {\n          this.key = key;\n          this.value = value;\n        }\n\n        return ShapeParameter;\n      }();\n\n      exports.ShapeParameter = ShapeParameter;\n\n      var ShapeParameters =\n      /** @class */\n      function () {\n        function ShapeParameters() {\n          this.items = {};\n        }\n\n        ShapeParameters.prototype.add = function (parameter) {\n          this.items[parameter.key] = parameter;\n        };\n\n        ShapeParameters.prototype.addRange = function (parameters) {\n          for (var i = 0; i < parameters.length; i++) {\n            this.add(parameters[i]);\n          }\n        };\n\n        ShapeParameters.prototype.get = function (key) {\n          return this.items[key];\n        };\n\n        ShapeParameters.prototype.forEach = function (callback) {\n          for (var key in this.items) {\n            if (Object.prototype.hasOwnProperty.call(this.items, key)) callback(this.items[key]);\n          }\n        };\n\n        ShapeParameters.prototype.clone = function () {\n          var result = new ShapeParameters();\n          this.forEach(function (p) {\n            result.add(new ShapeParameter(p.key, p.value));\n          });\n          return result;\n        };\n\n        ShapeParameters.prototype.toObject = function () {\n          var result = {};\n          var modified = false;\n          this.forEach(function (p) {\n            result[p.key] = {\n              \"value\": p.value\n            };\n            modified = true;\n          });\n          return modified ? result : null;\n        };\n\n        ShapeParameters.prototype.fromObject = function (obj) {\n          this.forEach(function (p) {\n            var paramObj = obj[p.key];\n            if (paramObj) if (typeof paramObj[\"value\"] === \"number\") p.value = paramObj[\"value\"];\n          });\n        };\n\n        return ShapeParameters;\n      }();\n\n      exports.ShapeParameters = ShapeParameters;\n      /***/\n    },\n    /* 37 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ConnectionMode = exports.PositionInfo = exports.Edge = void 0;\n\n      var Edge =\n      /** @class */\n      function () {\n        function Edge(key, from, to, weight) {\n          if (weight === void 0) {\n            weight = 1;\n          }\n\n          this.weight = weight;\n          this.key = key;\n          this.from = from;\n          this.to = to;\n        }\n\n        Edge.prototype.getHashKey = function () {\n          return this.from + \"_\" + this.to;\n        };\n\n        Edge.prototype.reverse = function () {\n          return new Edge(this.key, this.to, this.from, this.weight);\n        };\n\n        return Edge;\n      }();\n\n      exports.Edge = Edge;\n\n      var PositionInfo =\n      /** @class */\n      function () {\n        function PositionInfo(item, position) {\n          this.item = item;\n          this.position = position;\n        }\n\n        return PositionInfo;\n      }();\n\n      exports.PositionInfo = PositionInfo;\n      var ConnectionMode;\n\n      (function (ConnectionMode) {\n        ConnectionMode[ConnectionMode[\"Outgoing\"] = 1] = \"Outgoing\";\n        ConnectionMode[ConnectionMode[\"Incoming\"] = 2] = \"Incoming\";\n        ConnectionMode[ConnectionMode[\"OutgoingAndIncoming\"] = 3] = \"OutgoingAndIncoming\";\n      })(ConnectionMode = exports.ConnectionMode || (exports.ConnectionMode = {}));\n      /***/\n\n    },\n    /* 38 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics14 = function extendStatics(d, b) {\n          _extendStatics14 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics14(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics14(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.GroupPrimitive = void 0;\n\n      var RenderHelper_1 = __webpack_require__(15);\n\n      var Primitive_1 = __webpack_require__(24);\n\n      var GroupPrimitive =\n      /** @class */\n      function (_super) {\n        __extends(GroupPrimitive, _super);\n\n        function GroupPrimitive(children, className, zIndex, clipPathId, onApplyProperties, onBeforeDispose) {\n          var _this = _super.call(this, null, className, clipPathId, onApplyProperties) || this;\n\n          _this.zIndex = zIndex;\n          _this.onBeforeDispose = onBeforeDispose;\n          _this.children = children;\n          return _this;\n        }\n\n        GroupPrimitive.prototype.createMainElement = function () {\n          return document.createElementNS(RenderHelper_1.svgNS, \"g\");\n        };\n\n        GroupPrimitive.prototype.applyElementProperties = function (element, measurer) {\n          if (this.zIndex || this.zIndex === 0) element.style.setProperty(\"z-index\", this.zIndex.toString());\n\n          _super.prototype.applyElementProperties.call(this, element, measurer);\n        };\n\n        GroupPrimitive.prototype.dispose = function () {\n          if (this.onBeforeDispose) this.onBeforeDispose();\n\n          _super.prototype.dispose.call(this);\n        };\n\n        return GroupPrimitive;\n      }(Primitive_1.SvgPrimitive);\n\n      exports.GroupPrimitive = GroupPrimitive;\n      /***/\n    },\n    /* 39 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics15 = function extendStatics(d, b) {\n          _extendStatics15 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics15(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics15(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MouseHandlerCancellableState = exports.MouseHandlerStateBase = void 0;\n\n      var key_1 = __webpack_require__(25);\n\n      var MouseHandlerStateBase =\n      /** @class */\n      function () {\n        function MouseHandlerStateBase(handler) {\n          this.handler = handler;\n        }\n\n        MouseHandlerStateBase.prototype.start = function () {};\n\n        MouseHandlerStateBase.prototype.finish = function () {};\n\n        MouseHandlerStateBase.prototype.onMouseClick = function (_evt) {};\n\n        MouseHandlerStateBase.prototype.onMouseDblClick = function (_evt) {\n          this.handler.switchToDefaultState();\n        };\n\n        MouseHandlerStateBase.prototype.onMouseDown = function (_evt) {};\n\n        MouseHandlerStateBase.prototype.onMouseUp = function (_evt) {};\n\n        MouseHandlerStateBase.prototype.onMouseMove = function (_evt) {};\n\n        MouseHandlerStateBase.prototype.onMouseWheel = function (_evt) {\n          return false;\n        };\n\n        MouseHandlerStateBase.prototype.onDragStart = function (_evt) {};\n\n        MouseHandlerStateBase.prototype.onDragEnd = function (_evt) {};\n\n        MouseHandlerStateBase.prototype.onShortcut = function (_shortcutCode) {\n          return false;\n        };\n\n        MouseHandlerStateBase.prototype.onKeyDown = function (_evt) {};\n\n        MouseHandlerStateBase.prototype.onKeyUp = function (_evt) {};\n\n        MouseHandlerStateBase.prototype.onConnectionPointsShow = function (key, points) {};\n\n        MouseHandlerStateBase.prototype.onConnectionTargetShow = function (key, info) {};\n\n        return MouseHandlerStateBase;\n      }();\n\n      exports.MouseHandlerStateBase = MouseHandlerStateBase;\n\n      var MouseHandlerCancellableState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerCancellableState, _super);\n\n        function MouseHandlerCancellableState() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MouseHandlerCancellableState.prototype.onShortcut = function (code) {\n          if (code === key_1.KeyCode.Esc) {\n            this.cancelChanges();\n            this.handler.switchToDefaultState();\n            return true;\n          }\n\n          return false;\n        };\n\n        return MouseHandlerCancellableState;\n      }(MouseHandlerStateBase);\n\n      exports.MouseHandlerCancellableState = MouseHandlerCancellableState;\n      /***/\n    },\n    /* 40 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var SearchUtils = function () {\n        function SearchUtils() {}\n\n        SearchUtils.binaryIndexOf = function (array, comparer, minIndex, maxIndex) {\n          if (minIndex === void 0) {\n            minIndex = 0;\n          }\n\n          if (maxIndex === void 0) {\n            maxIndex = -2;\n          }\n\n          var findFromZeroPosition = minIndex === 0;\n          if (maxIndex === -2) maxIndex = array.length - 1;\n\n          while (minIndex <= maxIndex) {\n            var currentIndex = minIndex + (maxIndex - minIndex >> 1);\n            var compare = comparer(array[currentIndex]);\n            if (compare < 0) minIndex = currentIndex + 1;else if (compare > 0) maxIndex = currentIndex - 1;else return currentIndex;\n          }\n\n          return findFromZeroPosition ? ~minIndex : -1;\n        };\n\n        SearchUtils.normedBinaryIndexOf = function (array, comparer, minIndex, maxIndex) {\n          if (minIndex === void 0) {\n            minIndex = 0;\n          }\n\n          if (maxIndex === void 0) {\n            maxIndex = -2;\n          }\n\n          var index = SearchUtils.binaryIndexOf(array, comparer, minIndex, maxIndex);\n          return SearchUtils.binaryIndexNormalizator(index);\n        };\n\n        SearchUtils.binaryIndexNormalizator = function (index) {\n          return index < 0 ? ~index - 1 : index;\n        };\n\n        SearchUtils.normedInterpolationIndexOf = function (array, getValue, toFind, lowIndex, highIndex) {\n          if (lowIndex === void 0) {\n            lowIndex = 0;\n          }\n\n          if (highIndex === void 0) {\n            highIndex = -2;\n          }\n\n          if (highIndex === -2) highIndex = array.length - 1;\n          var firstObject = array[Math.min(lowIndex, highIndex)];\n          if (firstObject === undefined || toFind < getValue(firstObject)) return -1;\n          var lowValue = getValue(array[lowIndex]);\n          var highValue = getValue(array[highIndex]);\n\n          while (true) {\n            if (toFind > lowValue && toFind < highValue) {\n              var midIndex = lowIndex + Math.floor((toFind - lowValue) * (highIndex - lowIndex) / (highValue - lowValue));\n              var midValue = getValue(array[midIndex]);\n\n              if (toFind > midValue) {\n                lowIndex = midIndex + 1;\n                lowValue = getValue(array[lowIndex]);\n                if (toFind < lowValue) return midIndex;\n              } else if (toFind < midValue) {\n                highIndex = midIndex - 1;\n                highValue = getValue(array[highIndex]);\n              } else return midIndex;\n            } else return toFind === lowValue ? lowIndex : highIndex;\n          }\n        };\n\n        return SearchUtils;\n      }();\n\n      exports.SearchUtils = SearchUtils;\n      /***/\n    },\n    /* 41 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.CanvasManagerBase = exports.PAGE_BG_TEXTFLOOR_FILTER_ID = void 0;\n\n      var TextFilterPrimitive_1 = __webpack_require__(172);\n\n      var unit_converter_1 = __webpack_require__(12);\n\n      exports.PAGE_BG_TEXTFLOOR_FILTER_ID = \"page-text-flood\";\n\n      var CanvasManagerBase =\n      /** @class */\n      function () {\n        function CanvasManagerBase(actualZoom, dom) {\n          this.elements = {};\n          this.actualZoom = actualZoom;\n          this.dom = dom;\n        }\n\n        CanvasManagerBase.prototype.createAndChangePrimitivesElements = function (primitives, parent) {\n          var _this = this;\n\n          primitives.forEach(function (primitive) {\n            _this.createAndChangePrimitiveElement(primitive, parent);\n          });\n        };\n\n        CanvasManagerBase.prototype.createPrimitiveElement = function (primitive, parent, sibling) {\n          return this.dom.createElement(primitive, parent, sibling);\n        };\n\n        CanvasManagerBase.prototype.createAndChangePrimitiveElement = function (primitive, parent, sibling) {\n          var element = this.createPrimitiveElement(primitive, parent, sibling);\n          this.dom.changeByPrimitive(element, primitive);\n          return element;\n        };\n\n        CanvasManagerBase.prototype.changePrimitiveElement = function (primitive, element) {\n          this.dom.changeByPrimitive(element, primitive);\n        };\n\n        CanvasManagerBase.prototype.getOrCreateElement = function (key, primitive, parent, sibling) {\n          var element = key && this.elements[key] || (this.elements[key] = this.createPrimitiveElement(primitive, parent, sibling));\n          this.changePrimitiveElement(primitive, element);\n          return element;\n        };\n\n        CanvasManagerBase.prototype.createTextFloodFilter = function (key, parent, pageColor) {\n          this.getOrCreateElement(key, new TextFilterPrimitive_1.TextFloodFilterPrimitive(exports.PAGE_BG_TEXTFLOOR_FILTER_ID, pageColor), parent);\n        };\n\n        CanvasManagerBase.prototype.getAbsoluteSize = function (modelSize) {\n          return modelSize.clone().applyConverter(unit_converter_1.UnitConverter.twipsToPixelsF).clone().multiply(this.actualZoom, this.actualZoom);\n        };\n\n        return CanvasManagerBase;\n      }();\n\n      exports.CanvasManagerBase = CanvasManagerBase;\n      /***/\n    },\n    /* 42 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.TextOwner = void 0;\n      var TextOwner;\n\n      (function (TextOwner) {\n        TextOwner[TextOwner[\"Shape\"] = 0] = \"Shape\";\n        TextOwner[TextOwner[\"Connector\"] = 1] = \"Connector\";\n        TextOwner[TextOwner[\"ExtensionLine\"] = 2] = \"ExtensionLine\";\n        TextOwner[TextOwner[\"Resize\"] = 3] = \"Resize\";\n      })(TextOwner = exports.TextOwner || (exports.TextOwner = {}));\n      /***/\n\n    },\n    /* 43 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Data = exports.SetAbsoluteY = exports.SetAbsoluteX = void 0;\n\n      var dom_1 = __webpack_require__(26);\n\n      var common_1 = __webpack_require__(48);\n\n      function IsNumber(str) {\n        return !isNaN(parseFloat(str)) && isFinite(str);\n      }\n\n      function SetAbsoluteX(element, x) {\n        element.style.left = prepareClientPosForElement(x, element, true) + \"px\";\n      }\n\n      exports.SetAbsoluteX = SetAbsoluteX;\n\n      function SetAbsoluteY(element, y) {\n        element.style.top = prepareClientPosForElement(y, element, false) + \"px\";\n      }\n\n      exports.SetAbsoluteY = SetAbsoluteY;\n\n      function prepareClientPosForElement(pos, element, isX) {\n        pos -= getPositionElementOffset(element, isX);\n        return pos;\n      }\n\n      function getPositionElementOffset(element, isX) {\n        var div = createElementMock(element);\n        if (div.style.position === \"static\") div.style.position = \"absolute\";\n        element.parentNode.appendChild(div);\n        var realPos = isX ? dom_1.DomUtils.getAbsolutePositionX(div) : dom_1.DomUtils.getAbsolutePositionY(div);\n        element.parentNode.removeChild(div);\n        return Math.round(realPos);\n      }\n\n      function createElementMock(element) {\n        var div = document.createElement(\"DIV\");\n        div.style.top = \"0px\";\n        div.style.left = \"0px\";\n        div.style.visibility = \"hidden\";\n        div.style.position = dom_1.DomUtils.getCurrentStyle(element).position;\n        return div;\n      }\n\n      var Data =\n      /** @class */\n      function () {\n        function Data() {}\n\n        Data.ArrayInsert = function (array, element, position) {\n          if (0 <= position && position < array.length) {\n            for (var i = array.length; i > position; i--) {\n              array[i] = array[i - 1];\n            }\n\n            array[position] = element;\n          } else array.push(element);\n        };\n\n        Data.ArrayRemove = function (array, element) {\n          var index = Data.ArrayIndexOf(array, element);\n          if (index > -1) Data.ArrayRemoveAt(array, index);\n        };\n\n        Data.ArrayRemoveAt = function (array, index) {\n          if (index >= 0 && index < array.length) {\n            for (var i = index; i < array.length - 1; i++) {\n              array[i] = array[i + 1];\n            }\n\n            array.pop();\n          }\n        };\n\n        Data.ArrayClear = function (array) {\n          while (array.length > 0) {\n            array.pop();\n          }\n        };\n\n        Data.ArrayIndexOf = function (array, element, comparer) {\n          if (!comparer) for (var i = 0; i < array.length; i++) {\n            if (array[i] === element) return i;\n          } else for (var i = 0; i < array.length; i++) {\n            if (comparer(array[i], element)) return i;\n          }\n          return -1;\n        };\n\n        Data.ArrayContains = function (array, element) {\n          return Data.ArrayIndexOf(array, element) >= 0;\n        };\n\n        Data.ArrayEqual = function (array1, array2) {\n          var count1 = array1.length;\n          var count2 = array2.length;\n          if (count1 !== count2) return false;\n\n          for (var i = 0; i < count1; i++) {\n            if (array1[i] !== array2[i]) return false;\n          }\n\n          return true;\n        };\n\n        Data.ArraySame = function (array1, array2) {\n          if (array1.length !== array2.length) return false;\n          return array1.every(function (elem) {\n            return Data.ArrayContains(array2, elem);\n          });\n        };\n\n        Data.ArrayGetIntegerEdgeValues = function (array) {\n          var arrayToSort = Data.CollectionToArray(array);\n          Data.ArrayIntegerAscendingSort(arrayToSort);\n          return {\n            start: arrayToSort[0],\n            end: arrayToSort[arrayToSort.length - 1]\n          };\n        };\n\n        Data.ArrayIntegerAscendingSort = function (array) {\n          Data.ArrayIntegerSort(array, false);\n        };\n\n        Data.ArrayIntegerSort = function (array, desc) {\n          array.sort(function (i1, i2) {\n            var res = 0;\n            if (i1 > i2) res = 1;else if (i1 < i2) res = -1;\n            if (desc) res *= -1;\n            return res;\n          });\n        };\n\n        Data.CollectionsUnionToArray = function (firstCollection, secondCollection) {\n          var result = [];\n          var firstCollectionLength = firstCollection.length;\n          var secondCollectionLength = secondCollection.length;\n\n          for (var i = 0; i < firstCollectionLength + secondCollectionLength; i++) {\n            if (i < firstCollectionLength) result.push(firstCollection[i]);else result.push(secondCollection[i - firstCollectionLength]);\n          }\n\n          return result;\n        };\n\n        Data.CollectionToArray = function (collection) {\n          var array = [];\n\n          for (var i = 0; i < collection.length; i++) {\n            array.push(collection[i]);\n          }\n\n          return array;\n        };\n\n        Data.CreateHashTableFromArray = function (array) {\n          var hash = [];\n\n          for (var i = 0; i < array.length; i++) {\n            hash[array[i]] = 1;\n          }\n\n          return hash;\n        };\n\n        Data.CreateIndexHashTableFromArray = function (array) {\n          var hash = [];\n\n          for (var i = 0; i < array.length; i++) {\n            hash[array[i]] = i;\n          }\n\n          return hash;\n        };\n\n        Data.ArrayToHash = function (array, getKeyFunc, getValueFunc) {\n          if (!(array instanceof Array)) return {};\n          return array.reduce(function (map, element, index) {\n            var key = getKeyFunc(element, index);\n            var value = getValueFunc(element, index);\n            map[key] = value;\n            return map;\n          }, {});\n        };\n\n        Data.Sum = function (array, getValueFunc) {\n          if (!(array instanceof Array)) return 0;\n          return array.reduce(function (prevValue, item) {\n            var value = getValueFunc ? getValueFunc(item) : item;\n            if (!IsNumber(value)) value = 0;\n            return prevValue + value;\n          }, 0);\n        };\n\n        Data.Min = function (array, getValueFunc) {\n          return Data.CalculateArrayMinMax(array, getValueFunc, false);\n        };\n\n        Data.Max = function (array, getValueFunc) {\n          return Data.CalculateArrayMinMax(array, getValueFunc, true);\n        };\n\n        Data.NearestLeftBinarySearchComparer = function (array, index, value) {\n          var arrayElement = array[index];\n          var leftPoint = arrayElement < value;\n          var lastLeftPoint = leftPoint && index === array.length - 1;\n          var nearestLeftPoint = lastLeftPoint || leftPoint && array[index + 1] >= value;\n          if (nearestLeftPoint) return 0;else return arrayElement < value ? -1 : 1;\n        };\n\n        Data.ArrayBinarySearch = function (array, value, binarySearchComparer, startIndex, length) {\n          if (!binarySearchComparer) binarySearchComparer = Data.defaultBinarySearchComparer;\n          if (!common_1.isDefined(startIndex)) startIndex = 0;\n          if (!common_1.isDefined(length)) length = array.length - startIndex;\n          var endIndex = startIndex + length - 1;\n\n          while (startIndex <= endIndex) {\n            var middle = startIndex + (endIndex - startIndex >> 1);\n            var compareResult = binarySearchComparer(array, middle, value);\n            if (compareResult === 0) return middle;\n            if (compareResult < 0) startIndex = middle + 1;else endIndex = middle - 1;\n          }\n\n          return -(startIndex + 1);\n        };\n\n        Data.ArrayFlatten = function (arrayOfArrays) {\n          var result = [];\n          arrayOfArrays.forEach(function (arr) {\n            result = result.concat(arr);\n          });\n          return result;\n        };\n\n        Data.GetDistinctArray = function (array) {\n          var resultArray = [];\n\n          for (var i = 0; i < array.length; i++) {\n            var currentEntry = array[i];\n            if (Data.ArrayIndexOf(resultArray, currentEntry) === -1) resultArray.push(currentEntry);\n          }\n\n          return resultArray;\n        };\n\n        Data.ForEach = function (arr, callback) {\n          if (Array.prototype.forEach) Array.prototype.forEach.call(arr, callback);else for (var i = 0, len = arr.length; i < len; i++) {\n            callback(arr[i], i, arr);\n          }\n        };\n\n        Data.MergeHashTables = function (target, object) {\n          if (!object || typeof object === \"string\") return target;\n          if (!target) target = {};\n\n          for (var key in object) {\n            if (key && !(key in target)) target[key] = object[key];\n          }\n\n          return target;\n        };\n\n        Data.Range = function (count, start) {\n          count = parseInt(count) || 0;\n          start = parseInt(start) || 0;\n          if (count < 0) count = 0;\n          if (start < 0) start = 0;\n          var result = Array(count);\n          return result.map(function (_val, i) {\n            return start + i;\n          });\n        };\n\n        Data.CalculateArrayMinMax = function (array, getValueFunc, isMax) {\n          if (!(array instanceof Array)) return 0;\n          var startValue = isMax ? Number.NEGATIVE_INFINITY : Number.POSITIVE_INFINITY;\n          return array.reduce(function (prevValue, item) {\n            var value = getValueFunc ? getValueFunc(item) : item;\n            if (!IsNumber(value)) value = startValue;\n            var func = isMax ? Math.max : Math.min;\n            return func(value, prevValue);\n          }, startValue);\n        };\n\n        Data.byRange = function (value, min, max) {\n          return Math.min(Math.max(value, min), max);\n        };\n\n        Data.defaultBinarySearchComparer = function (array, index, value) {\n          var arrayElement = array[index];\n          if (arrayElement === value) return 0;else return arrayElement < value ? -1 : 1;\n        };\n\n        Data.cssTextToObject = function (cssText) {\n          if (!cssText) return {};\n          cssText = cssText.replace(/\\/\\*(.|\\s)*?\\*\\//g, \"\").replace(/\\s+/g, \" \");\n          return cssText.split(\";\").reduce(function (acc, val) {\n            if (val) {\n              var matches = /\\s*([^:]+?)\\s*:\\s*([^;]*)\\s*$/.exec(val);\n\n              if (matches) {\n                var name_1 = matches[1],\n                    value = matches[2];\n                name_1 && value && (acc[name_1.trim()] = value.trim());\n              }\n\n              return acc;\n            }\n\n            return acc;\n          }, {});\n        };\n\n        Data.objectToCssText = function (obj) {\n          if (!obj) return \"\";\n          return Object.keys(obj).reduce(function (acc, key) {\n            var name = key.trim();\n            var value = obj[key];\n            if (name && value) acc.push(name + \": \" + value.toString().trim());\n            return acc;\n          }, []).join(\"; \");\n        };\n\n        return Data;\n      }();\n\n      exports.Data = Data;\n      /***/\n    },\n    /* 44 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics16 = function extendStatics(d, b) {\n          _extendStatics16 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics16(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics16(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ConnectionPoint = void 0;\n\n      var point_1 = __webpack_require__(1);\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      var ConnectionPoint =\n      /** @class */\n      function (_super) {\n        __extends(ConnectionPoint, _super);\n\n        function ConnectionPoint(x, y, side) {\n          if (side === void 0) {\n            side = DiagramItem_1.ConnectionPointSide.Undefined;\n          }\n\n          var _this = _super.call(this, x, y) || this;\n\n          _this.side = side;\n          return _this;\n        } // todo delete that\n\n\n        ConnectionPoint.prototype.offset = function (offsetX, offsetY) {\n          _super.prototype.offset.call(this, offsetX, offsetY);\n\n          this.side = DiagramItem_1.ConnectionPointSide.Undefined;\n          return this;\n        }; // todo delete that\n\n\n        ConnectionPoint.prototype.multiply = function (multiplierX, multiplierY) {\n          _super.prototype.multiply.call(this, multiplierX, multiplierY);\n\n          this.side = DiagramItem_1.ConnectionPointSide.Undefined;\n          return this;\n        };\n\n        ConnectionPoint.prototype.clone = function () {\n          return new ConnectionPoint(this.x, this.y, this.side);\n        };\n\n        ConnectionPoint.prototype.toPoint = function () {\n          return new point_1.Point(this.x, this.y);\n        };\n\n        return ConnectionPoint;\n      }(point_1.Point);\n\n      exports.ConnectionPoint = ConnectionPoint;\n      /***/\n    },\n    /* 45 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ImageCache = exports.CacheImageInfo = void 0;\n\n      var base64_1 = __webpack_require__(84);\n\n      var ImageInfo_1 = __webpack_require__(49);\n\n      var Utils_1 = __webpack_require__(3);\n\n      var CacheImageInfo =\n      /** @class */\n      function () {\n        function CacheImageInfo(base64, actualId, imageUrl, referenceInfo, isLoaded) {\n          this._base64 = base64 !== undefined ? base64_1.Base64Utils.normalizeToDataUrl(base64, \"image/png\") : undefined;\n          this.actualId = actualId;\n          this._referenceInfo = referenceInfo;\n          this._isLoaded = isLoaded !== undefined ? isLoaded : false;\n          this.imageUrl = imageUrl;\n        }\n\n        Object.defineProperty(CacheImageInfo.prototype, \"isLoaded\", {\n          get: function get() {\n            return this._referenceInfo ? this._referenceInfo._isLoaded : this._isLoaded;\n          },\n          set: function set(val) {\n            this._isLoaded = val;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(CacheImageInfo.prototype, \"base64\", {\n          get: function get() {\n            return this._base64;\n          },\n          set: function set(val) {\n            this._base64 = base64_1.Base64Utils.normalizeToDataUrl(val, \"image/png\");\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(CacheImageInfo.prototype, \"referenceInfo\", {\n          get: function get() {\n            return this._referenceInfo;\n          },\n          set: function set(val) {\n            this._referenceInfo = val;\n            this._base64 = undefined;\n            this._isLoaded = undefined;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(CacheImageInfo.prototype, \"isLoading\", {\n          get: function get() {\n            return this._referenceInfo ? this.referenceInfo._isLoading : this._isLoading;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        CacheImageInfo.prototype.startLoading = function () {\n          if (this._referenceInfo) this._referenceInfo.startLoading();else this._isLoading = true;\n        };\n\n        CacheImageInfo.prototype.finalizeLoading = function () {\n          if (this._referenceInfo) this._referenceInfo.finalizeLoading();else this._isLoading = false;\n        };\n\n        return CacheImageInfo;\n      }();\n\n      exports.CacheImageInfo = CacheImageInfo;\n\n      var ImageCache =\n      /** @class */\n      function () {\n        function ImageCache() {\n          this.emptyImageId = 0;\n          this.lastActualId = 0;\n          this.onReadyStateChanged = new Utils_1.EventDispatcher();\n          this.cache = [];\n          this.nonLoadedImages = [];\n          var emptyImage = this.createUnloadedInfoByBase64(ImageInfo_1.ImageInfo.transparentOnePixelImage);\n          emptyImage.isLoaded = true;\n        }\n\n        ImageCache.prototype.reset = function () {\n          this.cache.splice(1);\n          this.nonLoadedImages = [];\n          this.lastActualId = 1;\n        };\n\n        Object.defineProperty(ImageCache.prototype, \"emptyImage\", {\n          get: function get() {\n            return this.cache[this.emptyImageId];\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ImageCache.prototype.getImageData = function (id) {\n          return this.cache[id];\n        };\n\n        ImageCache.prototype.createUnloadedInfoByUrl = function (imageUrl) {\n          var info = this.findInfoByUrl(imageUrl);\n          if (info) return info;\n          return this.registerImageData(new CacheImageInfo(undefined, this.getNextActualId(), imageUrl));\n        };\n\n        ImageCache.prototype.createUnloadedInfoByBase64 = function (base64) {\n          var info = this.findInfoByBase64(base64);\n          if (info) return info;\n          return this.registerImageData(new CacheImageInfo(base64, this.getNextActualId()));\n        };\n\n        ImageCache.prototype.createUnloadedInfoByShapeImageInfo = function (imageInfo) {\n          var data = imageInfo.exportUrl;\n          return base64_1.Base64Utils.checkPrependDataUrl(data) ? this.createUnloadedInfoByBase64(data) : this.createUnloadedInfoByUrl(data);\n        };\n\n        ImageCache.prototype.registerImageData = function (data) {\n          var existingData = this.cache[data.actualId];\n          if (!existingData) existingData = data;\n          if (data.actualId !== undefined) this.cache[data.actualId] = existingData;\n\n          if (data.actualId !== 0) {\n            this.nonLoadedImages.push(data);\n            if (this.nonLoadedImages.length === 1) this.raiseReadyStateChanged(false);\n          }\n\n          return existingData;\n        };\n\n        ImageCache.prototype.loadAllImages = function (loader) {\n          var _this = this;\n\n          this.cache.forEach(function (cacheInfo) {\n            if (_this.emptyImageId !== cacheInfo.actualId && !cacheInfo.isLoaded && !cacheInfo.isLoading) loader.load(cacheInfo);\n          });\n        };\n\n        ImageCache.prototype.finalizeLoading = function (existingInfo, loadedInfo) {\n          existingInfo.finalizeLoading();\n          existingInfo.isLoaded = true;\n          var imageInfoIndex = this.nonLoadedImages.indexOf(existingInfo);\n          this.nonLoadedImages.splice(imageInfoIndex, 1);\n          if (this.nonLoadedImages.length === 0) this.raiseReadyStateChanged(true);\n          if (existingInfo.referenceInfo) return;\n\n          if (loadedInfo.base64) {\n            var base64_2 = base64_1.Base64Utils.normalizeToDataUrl(loadedInfo.base64, \"image/png\");\n            this.cache.forEach(function (cacheElem) {\n              var isReference = cacheElem.base64 === base64_2 && cacheElem !== existingInfo && cacheElem.isLoaded;\n              if (isReference) existingInfo.referenceInfo = cacheElem.referenceInfo ? cacheElem.referenceInfo : cacheElem;\n              return isReference;\n            });\n            existingInfo.base64 = base64_2;\n          }\n        };\n\n        ImageCache.prototype.hasNonLoadedImages = function () {\n          return this.nonLoadedImages.length !== 0;\n        };\n\n        ImageCache.prototype.getNextActualId = function () {\n          return this.lastActualId++;\n        };\n\n        ImageCache.prototype.findInfoByBase64 = function (base64) {\n          base64 = base64_1.Base64Utils.normalizeToDataUrl(base64, \"image/png\");\n          return this.findInfoCore(function (cacheImageInfo) {\n            return cacheImageInfo.base64 === base64;\n          });\n        };\n\n        ImageCache.prototype.findInfoByUrl = function (imageUrl) {\n          return this.findInfoCore(function (cacheImageInfo) {\n            return cacheImageInfo.imageUrl === imageUrl;\n          });\n        };\n\n        ImageCache.prototype.findInfoCore = function (callback) {\n          var cacheInfo;\n          this.cache.forEach(function (item) {\n            if (callback(item)) cacheInfo = item;\n          });\n          return cacheInfo;\n        };\n\n        ImageCache.prototype.raiseReadyStateChanged = function (ready) {\n          this.onReadyStateChanged.raise1(function (l) {\n            return l.notifyImageCacheReadyStateChanged(ready);\n          });\n        };\n\n        ImageCache.instance = new ImageCache();\n        return ImageCache;\n      }();\n\n      exports.ImageCache = ImageCache;\n      /***/\n    },\n    /* 46 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.PageOrientation = exports.DiagramUnit = void 0;\n      var DiagramUnit;\n\n      (function (DiagramUnit) {\n        DiagramUnit[DiagramUnit[\"In\"] = 0] = \"In\";\n        DiagramUnit[DiagramUnit[\"Cm\"] = 1] = \"Cm\";\n        DiagramUnit[DiagramUnit[\"Px\"] = 2] = \"Px\";\n      })(DiagramUnit = exports.DiagramUnit || (exports.DiagramUnit = {}));\n\n      var PageOrientation;\n\n      (function (PageOrientation) {\n        PageOrientation[PageOrientation[\"Portrait\"] = 0] = \"Portrait\";\n        PageOrientation[PageOrientation[\"Landscape\"] = 1] = \"Landscape\";\n      })(PageOrientation = exports.PageOrientation || (exports.PageOrientation = {}));\n      /***/\n\n    },\n    /* 47 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics17 = function extendStatics(d, b) {\n          _extendStatics17 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics17(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics17(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.SetConnectionPointIndexHistoryItem = exports.AddConnectionHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var Connector_1 = __webpack_require__(7);\n\n      var AddConnectionHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(AddConnectionHistoryItem, _super);\n\n        function AddConnectionHistoryItem(connector, item, connectionPointIndex, position) {\n          var _this = _super.call(this) || this;\n\n          _this.connectorKey = connector.key;\n          _this.itemKey = item.key;\n          _this.connectionPointIndex = connectionPointIndex;\n          _this.position = position;\n          return _this;\n        }\n\n        AddConnectionHistoryItem.prototype.redo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          var item = manipulator.model.findItem(this.itemKey);\n          manipulator.addConnection(connector, item, this.connectionPointIndex, this.position);\n        };\n\n        AddConnectionHistoryItem.prototype.undo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          manipulator.deleteConnection(connector, this.position);\n        };\n\n        return AddConnectionHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.AddConnectionHistoryItem = AddConnectionHistoryItem;\n\n      var SetConnectionPointIndexHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(SetConnectionPointIndexHistoryItem, _super);\n\n        function SetConnectionPointIndexHistoryItem(connector, connectionPointIndex, position) {\n          var _this = _super.call(this) || this;\n\n          _this.connectorKey = connector.key;\n          _this.connectionPointIndex = connectionPointIndex;\n          _this.position = position;\n          return _this;\n        }\n\n        SetConnectionPointIndexHistoryItem.prototype.redo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          this.oldConnectionPointIndex = this.position === Connector_1.ConnectorPosition.Begin ? connector.beginConnectionPointIndex : connector.endConnectionPointIndex;\n          manipulator.setConnectionPointIndex(connector, this.connectionPointIndex, this.position);\n        };\n\n        SetConnectionPointIndexHistoryItem.prototype.undo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          manipulator.setConnectionPointIndex(connector, this.oldConnectionPointIndex, this.position);\n        };\n\n        return SetConnectionPointIndexHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.SetConnectionPointIndexHistoryItem = SetConnectionPointIndexHistoryItem;\n      /***/\n    },\n    /* 48 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var string_1 = __webpack_require__(58);\n\n      function isDefined(value) {\n        return value !== undefined && value !== null;\n      }\n\n      exports.isDefined = isDefined;\n\n      function boolToInt(value) {\n        return value ? 1 : 0;\n      }\n\n      exports.boolToInt = boolToInt;\n\n      function boolToString(value) {\n        return value ? '1' : '0';\n      }\n\n      exports.boolToString = boolToString;\n\n      function isNumber(obj) {\n        return typeof obj === 'number';\n      }\n\n      exports.isNumber = isNumber;\n\n      function isString(obj) {\n        return typeof obj === 'string';\n      }\n\n      exports.isString = isString;\n\n      function isNonNullString(str) {\n        return !!str;\n      }\n\n      exports.isNonNullString = isNonNullString;\n\n      function isEven(num) {\n        return num % 2 !== 0;\n      }\n\n      exports.isEven = isEven;\n\n      function isOdd(num) {\n        return num % 2 === 0;\n      }\n\n      exports.isOdd = isOdd;\n\n      function numberToStringBin(num, minLength) {\n        if (minLength === void 0) {\n          minLength = 0;\n        }\n\n        return string_1.StringUtils.padLeft(num.toString(2), minLength, '0');\n      }\n\n      exports.numberToStringBin = numberToStringBin;\n\n      function numberToStringHex(num, minLength) {\n        if (minLength === void 0) {\n          minLength = 0;\n        }\n\n        return string_1.StringUtils.padLeft(num.toString(16), minLength, '0');\n      }\n\n      exports.numberToStringHex = numberToStringHex;\n      /***/\n    },\n    /* 49 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ImageInfo = void 0;\n\n      var base64_1 = __webpack_require__(84);\n\n      var ImageInfo =\n      /** @class */\n      function () {\n        function ImageInfo(imageUrlOrBase64) {\n          this.url = undefined;\n          this.base64 = undefined;\n          if (imageUrlOrBase64) if (base64_1.Base64Utils.checkPrependDataUrl(imageUrlOrBase64)) this.base64 = imageUrlOrBase64;else this.url = imageUrlOrBase64;\n          this.loadFailed = false;\n        }\n\n        ImageInfo.prototype.clone = function () {\n          var result = new ImageInfo();\n          result.url = this.url;\n          result.base64 = this.base64;\n          return result;\n        };\n\n        Object.defineProperty(ImageInfo.prototype, \"isEmpty\", {\n          get: function get() {\n            return this.url === undefined && this.base64 === undefined;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ImageInfo.prototype, \"unableToLoad\", {\n          get: function get() {\n            return this.loadFailed;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ImageInfo.prototype, \"renderUrl\", {\n          get: function get() {\n            return this.base64 || \"\";\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ImageInfo.prototype, \"exportUrl\", {\n          get: function get() {\n            return this.base64 ? this.base64 : this.url;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ImageInfo.prototype, \"actualUrl\", {\n          get: function get() {\n            return this.url ? this.url : this.base64;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ImageInfo, \"transparentOnePixelImage\", {\n          get: function get() {\n            return this.transparentWhiteImage1_1;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ImageInfo.prototype.loadBase64Content = function (base64Content) {\n          this.base64 = base64_1.Base64Utils.normalizeToDataUrl(base64Content, \"image/png\");\n        };\n\n        ImageInfo.prototype.setUnableToLoadFlag = function () {\n          this.loadFailed = true;\n        };\n\n        ImageInfo.transparentWhiteImage1_1 = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAANSURBVBhXY/j///9/AAn7A/0FQ0XKAAAAAElFTkSuQmCC\";\n        return ImageInfo;\n      }();\n\n      exports.ImageInfo = ImageInfo;\n      /***/\n    },\n    /* 50 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ConnectorPointsOrthogonalSideCalculatorBase = void 0;\n\n      var rectangle_1 = __webpack_require__(13);\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      var Connector_1 = __webpack_require__(7);\n\n      var ConnectorPointsOrthogonalSideCalculatorBase =\n      /** @class */\n      function () {\n        function ConnectorPointsOrthogonalSideCalculatorBase(parent) {\n          this.parent = parent;\n        }\n\n        Object.defineProperty(ConnectorPointsOrthogonalSideCalculatorBase.prototype, \"connector\", {\n          get: function get() {\n            return this.parent.connector;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ConnectorPointsOrthogonalSideCalculatorBase.prototype, \"beginRect\", {\n          get: function get() {\n            return this.parent.beginRect;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ConnectorPointsOrthogonalSideCalculatorBase.prototype, \"endRect\", {\n          get: function get() {\n            return this.parent.endRect;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ConnectorPointsOrthogonalSideCalculatorBase.prototype.getBeginOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          originPoint = this.getCorrectOriginPoint(originPoint, originRect);\n\n          if (targetSide !== DiagramItem_1.ConnectionPointSide.Undefined) {\n            if (this.isBeginEndSame()) return this.getSameShapeOffsetPoints(targetSide, originPoint, targetPoint, originRect);else if (this.isBeginEndOverlappedPoints(originPoint, targetPoint)) return this.getOverlappedPointsOffsetPoints(targetSide, originPoint, targetPoint, originRect);else if (this.isBeginEndOverlapped()) return this.getBeginOverlappedShapeOffsetPoints(targetSide, originPoint, targetPoint, originRect);\n          } else if (this.isOriginRectContainsTargetPoint(originRect, targetPoint)) return this.getOverlappedPointsOffsetPoints(targetSide, originPoint, targetPoint, originRect);\n\n          if (this.isOnSidePoint(originPoint, targetPoint)) return this.getBeginOnSideOffsetPoints(targetSide, originPoint, targetPoint, originRect);\n          return this.getBeginOffSideOffsetPoints(targetSide, originPoint, targetPoint, originRect);\n        };\n\n        ConnectorPointsOrthogonalSideCalculatorBase.prototype.getEndOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          originPoint = this.getCorrectOriginPoint(originPoint, originRect);\n\n          if (targetSide !== DiagramItem_1.ConnectionPointSide.Undefined) {\n            if (this.isBeginEndSame()) return this.getSameShapeOffsetPoints(targetSide, originPoint, targetPoint, originRect);else if (this.isBeginEndOverlappedPoints(targetPoint, originPoint)) return this.getOverlappedPointsOffsetPoints(targetSide, originPoint, targetPoint, originRect);else if (this.isBeginEndOverlapped()) return this.getEndOverlappedShapeOffsetPoints(targetSide, originPoint, targetPoint, originRect);\n          } else if (this.isOriginRectContainsTargetPoint(originRect, targetPoint)) return this.getOverlappedPointsOffsetPoints(targetSide, originPoint, targetPoint, originRect);\n\n          if (this.isOnSidePoint(originPoint, targetPoint)) return this.getEndOnSideOffsetPoints(targetSide, originPoint, targetPoint, originRect);\n          return this.getEndOffSideOffsetPoints(targetSide, originPoint, targetPoint, originRect);\n        };\n\n        ConnectorPointsOrthogonalSideCalculatorBase.prototype.getSide = function (originPoint, targetPoint) {\n          var diffX = Math.abs(targetPoint.x - originPoint.x);\n          var diffY = Math.abs(targetPoint.y - originPoint.y);\n          if (diffX > diffY) {\n            if (targetPoint.x > originPoint.x) return DiagramItem_1.ConnectionPointSide.East;else return DiagramItem_1.ConnectionPointSide.West;\n          } else if (targetPoint.y > originPoint.y) return DiagramItem_1.ConnectionPointSide.South;else return DiagramItem_1.ConnectionPointSide.North;\n        };\n\n        ConnectorPointsOrthogonalSideCalculatorBase.prototype.getSideCalculator = function (originPoint, targetPoint) {\n          return this.parent.getSideCalculator(this.getSide(originPoint, targetPoint));\n        };\n\n        ConnectorPointsOrthogonalSideCalculatorBase.prototype.getMinOffset = function () {\n          return Connector_1.Connector.minOffset;\n        };\n\n        ConnectorPointsOrthogonalSideCalculatorBase.prototype.isBeginEndSame = function () {\n          return this.connector.beginItem === this.connector.endItem;\n        };\n\n        ConnectorPointsOrthogonalSideCalculatorBase.prototype.isBeginEndOverlapped = function () {\n          return this.beginRect && this.endRect && rectangle_1.Rectangle.areIntersected(this.beginRect, this.endRect);\n        };\n\n        ConnectorPointsOrthogonalSideCalculatorBase.prototype.isBeginEndOverlappedX = function () {\n          return this.beginRect && this.endRect && !!rectangle_1.Rectangle.getHorizIntersection(this.beginRect, this.endRect);\n        };\n\n        ConnectorPointsOrthogonalSideCalculatorBase.prototype.isBeginEndOverlappedY = function () {\n          return this.beginRect && this.endRect && !!rectangle_1.Rectangle.getVertIntersection(this.beginRect, this.endRect);\n        };\n\n        ConnectorPointsOrthogonalSideCalculatorBase.prototype.isBeginEndOverlappedPoints = function (beginPoint, endPoint) {\n          return this.beginRect && this.endRect && (this.beginRect.containsPoint(endPoint) || this.endRect.containsPoint(beginPoint));\n        };\n\n        ConnectorPointsOrthogonalSideCalculatorBase.prototype.isOriginRectContainsTargetPoint = function (originRect, targetPoint) {\n          return originRect && originRect.containsPoint(targetPoint);\n        };\n\n        return ConnectorPointsOrthogonalSideCalculatorBase;\n      }();\n\n      exports.ConnectorPointsOrthogonalSideCalculatorBase = ConnectorPointsOrthogonalSideCalculatorBase;\n      /***/\n    },\n    /* 51 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics18 = function extendStatics(d, b) {\n          _extendStatics18 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics18(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics18(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.AddShapeHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var Shape_1 = __webpack_require__(14);\n\n      var AddShapeHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(AddShapeHistoryItem, _super);\n\n        function AddShapeHistoryItem(shapeDescription, position, text, dataKey) {\n          var _this = _super.call(this) || this;\n\n          _this.shapeDescription = shapeDescription;\n          _this.position = position;\n          _this.text = text;\n          _this.dataKey = dataKey;\n          return _this;\n        }\n\n        AddShapeHistoryItem.prototype.redo = function (manipulator) {\n          var shape = new Shape_1.Shape(this.shapeDescription, this.position);\n          if (typeof this.text === \"string\") shape.text = this.text;\n          if (this.dataKey !== undefined) shape.dataKey = this.dataKey;\n          manipulator.addShape(shape, this.shapeKey);\n          this.shapeKey = shape.key;\n        };\n\n        AddShapeHistoryItem.prototype.undo = function (manipulator) {\n          manipulator.deleteShape(manipulator.model.findShape(this.shapeKey), true);\n        };\n\n        return AddShapeHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.AddShapeHistoryItem = AddShapeHistoryItem;\n      /***/\n    },\n    /* 52 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics19 = function extendStatics(d, b) {\n          _extendStatics19 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics19(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics19(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.EllipsePrimitive = void 0;\n\n      var RenderHelper_1 = __webpack_require__(15);\n\n      var Primitive_1 = __webpack_require__(24);\n\n      var EllipsePrimitive =\n      /** @class */\n      function (_super) {\n        __extends(EllipsePrimitive, _super);\n\n        function EllipsePrimitive(cx, cy, rx, ry, style, className, onApplyProperties) {\n          var _this = _super.call(this, style, className, undefined, onApplyProperties) || this;\n\n          _this.cx = cx;\n          _this.cy = cy;\n          _this.rx = rx;\n          _this.ry = ry;\n          return _this;\n        }\n\n        EllipsePrimitive.prototype.createMainElement = function () {\n          return document.createElementNS(RenderHelper_1.svgNS, \"ellipse\");\n        };\n\n        EllipsePrimitive.prototype.applyElementProperties = function (element, measurer) {\n          this.setUnitAttribute(element, \"cx\", this.cx);\n          this.setUnitAttribute(element, \"cy\", this.cy);\n          this.setUnitAttribute(element, \"rx\", this.rx);\n          this.setUnitAttribute(element, \"ry\", this.ry);\n          this.setPositionCorrectionAttribute(element);\n\n          _super.prototype.applyElementProperties.call(this, element, measurer);\n        };\n\n        return EllipsePrimitive;\n      }(Primitive_1.SvgPrimitive);\n\n      exports.EllipsePrimitive = EllipsePrimitive;\n      /***/\n    },\n    /* 53 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics20 = function extendStatics(d, b) {\n          _extendStatics20 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics20(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics20(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ClipPathPrimitive = void 0;\n\n      var RenderHelper_1 = __webpack_require__(15);\n\n      var Primitive_1 = __webpack_require__(24);\n\n      var ClipPathPrimitive =\n      /** @class */\n      function (_super) {\n        __extends(ClipPathPrimitive, _super);\n\n        function ClipPathPrimitive(id, children) {\n          var _this = _super.call(this) || this;\n\n          _this.id = id;\n          _this.children = children;\n          return _this;\n        }\n\n        ClipPathPrimitive.prototype.createMainElement = function () {\n          var element = document.createElementNS(RenderHelper_1.svgNS, \"clipPath\");\n          element.setAttribute(\"id\", this.id);\n          return element;\n        };\n\n        ClipPathPrimitive.prototype.applyElementProperties = function (element, measurer) {\n          if (this.id) element.setAttribute(\"id\", this.id);\n\n          _super.prototype.applyElementProperties.call(this, element, measurer);\n        };\n\n        return ClipPathPrimitive;\n      }(Primitive_1.SvgPrimitive);\n\n      exports.ClipPathPrimitive = ClipPathPrimitive;\n      /***/\n    },\n    /* 54 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics21 = function extendStatics(d, b) {\n          _extendStatics21 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics21(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics21(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ExportImportCommandBase = void 0;\n\n      var SimpleCommandBase_1 = __webpack_require__(10);\n\n      var ExportImportCommandBase =\n      /** @class */\n      function (_super) {\n        __extends(ExportImportCommandBase, _super);\n\n        function ExportImportCommandBase() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ExportImportCommandBase.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        return ExportImportCommandBase;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ExportImportCommandBase = ExportImportCommandBase;\n      /***/\n    },\n    /* 55 */\n\n    /***/\n    function (module, __webpack_exports__, __webpack_require__) {\n      \"use strict\";\n\n      __webpack_require__.r(__webpack_exports__);\n      /* harmony export (binding) */\n\n\n      __webpack_require__.d(__webpack_exports__, \"__extends\", function () {\n        return __extends;\n      });\n      /* harmony export (binding) */\n\n\n      __webpack_require__.d(__webpack_exports__, \"__assign\", function () {\n        return _assign;\n      });\n      /* harmony export (binding) */\n\n\n      __webpack_require__.d(__webpack_exports__, \"__rest\", function () {\n        return __rest;\n      });\n      /* harmony export (binding) */\n\n\n      __webpack_require__.d(__webpack_exports__, \"__decorate\", function () {\n        return __decorate;\n      });\n      /* harmony export (binding) */\n\n\n      __webpack_require__.d(__webpack_exports__, \"__param\", function () {\n        return __param;\n      });\n      /* harmony export (binding) */\n\n\n      __webpack_require__.d(__webpack_exports__, \"__metadata\", function () {\n        return __metadata;\n      });\n      /* harmony export (binding) */\n\n\n      __webpack_require__.d(__webpack_exports__, \"__awaiter\", function () {\n        return __awaiter;\n      });\n      /* harmony export (binding) */\n\n\n      __webpack_require__.d(__webpack_exports__, \"__generator\", function () {\n        return __generator;\n      });\n      /* harmony export (binding) */\n\n\n      __webpack_require__.d(__webpack_exports__, \"__createBinding\", function () {\n        return __createBinding;\n      });\n      /* harmony export (binding) */\n\n\n      __webpack_require__.d(__webpack_exports__, \"__exportStar\", function () {\n        return __exportStar;\n      });\n      /* harmony export (binding) */\n\n\n      __webpack_require__.d(__webpack_exports__, \"__values\", function () {\n        return __values;\n      });\n      /* harmony export (binding) */\n\n\n      __webpack_require__.d(__webpack_exports__, \"__read\", function () {\n        return __read;\n      });\n      /* harmony export (binding) */\n\n\n      __webpack_require__.d(__webpack_exports__, \"__spread\", function () {\n        return __spread;\n      });\n      /* harmony export (binding) */\n\n\n      __webpack_require__.d(__webpack_exports__, \"__spreadArrays\", function () {\n        return __spreadArrays;\n      });\n      /* harmony export (binding) */\n\n\n      __webpack_require__.d(__webpack_exports__, \"__await\", function () {\n        return __await;\n      });\n      /* harmony export (binding) */\n\n\n      __webpack_require__.d(__webpack_exports__, \"__asyncGenerator\", function () {\n        return __asyncGenerator;\n      });\n      /* harmony export (binding) */\n\n\n      __webpack_require__.d(__webpack_exports__, \"__asyncDelegator\", function () {\n        return __asyncDelegator;\n      });\n      /* harmony export (binding) */\n\n\n      __webpack_require__.d(__webpack_exports__, \"__asyncValues\", function () {\n        return __asyncValues;\n      });\n      /* harmony export (binding) */\n\n\n      __webpack_require__.d(__webpack_exports__, \"__makeTemplateObject\", function () {\n        return __makeTemplateObject;\n      });\n      /* harmony export (binding) */\n\n\n      __webpack_require__.d(__webpack_exports__, \"__importStar\", function () {\n        return __importStar;\n      });\n      /* harmony export (binding) */\n\n\n      __webpack_require__.d(__webpack_exports__, \"__importDefault\", function () {\n        return __importDefault;\n      });\n      /* harmony export (binding) */\n\n\n      __webpack_require__.d(__webpack_exports__, \"__classPrivateFieldGet\", function () {\n        return __classPrivateFieldGet;\n      });\n      /* harmony export (binding) */\n\n\n      __webpack_require__.d(__webpack_exports__, \"__classPrivateFieldSet\", function () {\n        return __classPrivateFieldSet;\n      });\n      /*! *****************************************************************************\r\n      Copyright (c) Microsoft Corporation.\r\n      \r\n      Permission to use, copy, modify, and/or distribute this software for any\r\n      purpose with or without fee is hereby granted.\r\n      \r\n      THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\n      REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\n      AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\n      INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\n      LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\n      OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\n      PERFORMANCE OF THIS SOFTWARE.\r\n      ***************************************************************************** */\n\n      /* global Reflect, Promise */\n\n\n      var _extendStatics22 = function extendStatics(d, b) {\n        _extendStatics22 = Object.setPrototypeOf || {\n          __proto__: []\n        } instanceof Array && function (d, b) {\n          d.__proto__ = b;\n        } || function (d, b) {\n          for (var p in b) {\n            if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n          }\n        };\n\n        return _extendStatics22(d, b);\n      };\n\n      function __extends(d, b) {\n        _extendStatics22(d, b);\n\n        function __() {\n          this.constructor = d;\n        }\n\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n      }\n\n      var _assign = function __assign() {\n        _assign = Object.assign || function __assign(t) {\n          for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n\n            for (var p in s) {\n              if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n            }\n          }\n\n          return t;\n        };\n\n        return _assign.apply(this, arguments);\n      };\n\n      function __rest(s, e) {\n        var t = {};\n\n        for (var p in s) {\n          if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n        }\n\n        if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n        }\n        return t;\n      }\n\n      function __decorate(decorators, target, key, desc) {\n        var c = arguments.length,\n            r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n            d;\n        if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n          if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n        }\n        return c > 3 && r && Object.defineProperty(target, key, r), r;\n      }\n\n      function __param(paramIndex, decorator) {\n        return function (target, key) {\n          decorator(target, key, paramIndex);\n        };\n      }\n\n      function __metadata(metadataKey, metadataValue) {\n        if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n      }\n\n      function __awaiter(thisArg, _arguments, P, generator) {\n        function adopt(value) {\n          return value instanceof P ? value : new P(function (resolve) {\n            resolve(value);\n          });\n        }\n\n        return new (P || (P = Promise))(function (resolve, reject) {\n          function fulfilled(value) {\n            try {\n              step(generator.next(value));\n            } catch (e) {\n              reject(e);\n            }\n          }\n\n          function rejected(value) {\n            try {\n              step(generator[\"throw\"](value));\n            } catch (e) {\n              reject(e);\n            }\n          }\n\n          function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n          }\n\n          step((generator = generator.apply(thisArg, _arguments || [])).next());\n        });\n      }\n\n      function __generator(thisArg, body) {\n        var _ = {\n          label: 0,\n          sent: function sent() {\n            if (t[0] & 1) throw t[1];\n            return t[1];\n          },\n          trys: [],\n          ops: []\n        },\n            f,\n            y,\n            t,\n            g;\n        return g = {\n          next: verb(0),\n          \"throw\": verb(1),\n          \"return\": verb(2)\n        }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n          return this;\n        }), g;\n\n        function verb(n) {\n          return function (v) {\n            return step([n, v]);\n          };\n        }\n\n        function step(op) {\n          if (f) throw new TypeError(\"Generator is already executing.\");\n\n          while (_) {\n            try {\n              if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n              if (y = 0, t) op = [op[0] & 2, t.value];\n\n              switch (op[0]) {\n                case 0:\n                case 1:\n                  t = op;\n                  break;\n\n                case 4:\n                  _.label++;\n                  return {\n                    value: op[1],\n                    done: false\n                  };\n\n                case 5:\n                  _.label++;\n                  y = op[1];\n                  op = [0];\n                  continue;\n\n                case 7:\n                  op = _.ops.pop();\n\n                  _.trys.pop();\n\n                  continue;\n\n                default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n                    _ = 0;\n                    continue;\n                  }\n\n                  if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n                    _.label = op[1];\n                    break;\n                  }\n\n                  if (op[0] === 6 && _.label < t[1]) {\n                    _.label = t[1];\n                    t = op;\n                    break;\n                  }\n\n                  if (t && _.label < t[2]) {\n                    _.label = t[2];\n\n                    _.ops.push(op);\n\n                    break;\n                  }\n\n                  if (t[2]) _.ops.pop();\n\n                  _.trys.pop();\n\n                  continue;\n              }\n\n              op = body.call(thisArg, _);\n            } catch (e) {\n              op = [6, e];\n              y = 0;\n            } finally {\n              f = t = 0;\n            }\n          }\n\n          if (op[0] & 5) throw op[1];\n          return {\n            value: op[0] ? op[1] : void 0,\n            done: true\n          };\n        }\n      }\n\n      var __createBinding = Object.create ? function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        Object.defineProperty(o, k2, {\n          enumerable: true,\n          get: function get() {\n            return m[k];\n          }\n        });\n      } : function (o, m, k, k2) {\n        if (k2 === undefined) k2 = k;\n        o[k2] = m[k];\n      };\n\n      function __exportStar(m, o) {\n        for (var p in m) {\n          if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n        }\n      }\n\n      function __values(o) {\n        var s = typeof Symbol === \"function\" && Symbol.iterator,\n            m = s && o[s],\n            i = 0;\n        if (m) return m.call(o);\n        if (o && typeof o.length === \"number\") return {\n          next: function next() {\n            if (o && i >= o.length) o = void 0;\n            return {\n              value: o && o[i++],\n              done: !o\n            };\n          }\n        };\n        throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n      }\n\n      function __read(o, n) {\n        var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n        if (!m) return o;\n        var i = m.call(o),\n            r,\n            ar = [],\n            e;\n\n        try {\n          while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n            ar.push(r.value);\n          }\n        } catch (error) {\n          e = {\n            error: error\n          };\n        } finally {\n          try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n          } finally {\n            if (e) throw e.error;\n          }\n        }\n\n        return ar;\n      }\n\n      function __spread() {\n        for (var ar = [], i = 0; i < arguments.length; i++) {\n          ar = ar.concat(__read(arguments[i]));\n        }\n\n        return ar;\n      }\n\n      function __spreadArrays() {\n        for (var s = 0, i = 0, il = arguments.length; i < il; i++) {\n          s += arguments[i].length;\n        }\n\n        for (var r = Array(s), k = 0, i = 0; i < il; i++) {\n          for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {\n            r[k] = a[j];\n          }\n        }\n\n        return r;\n      }\n\n      ;\n\n      function __await(v) {\n        return this instanceof __await ? (this.v = v, this) : new __await(v);\n      }\n\n      function __asyncGenerator(thisArg, _arguments, generator) {\n        if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n        var g = generator.apply(thisArg, _arguments || []),\n            i,\n            q = [];\n        return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () {\n          return this;\n        }, i;\n\n        function verb(n) {\n          if (g[n]) i[n] = function (v) {\n            return new Promise(function (a, b) {\n              q.push([n, v, a, b]) > 1 || resume(n, v);\n            });\n          };\n        }\n\n        function resume(n, v) {\n          try {\n            step(g[n](v));\n          } catch (e) {\n            settle(q[0][3], e);\n          }\n        }\n\n        function step(r) {\n          r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);\n        }\n\n        function fulfill(value) {\n          resume(\"next\", value);\n        }\n\n        function reject(value) {\n          resume(\"throw\", value);\n        }\n\n        function settle(f, v) {\n          if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]);\n        }\n      }\n\n      function __asyncDelegator(o) {\n        var i, p;\n        return i = {}, verb(\"next\"), verb(\"throw\", function (e) {\n          throw e;\n        }), verb(\"return\"), i[Symbol.iterator] = function () {\n          return this;\n        }, i;\n\n        function verb(n, f) {\n          i[n] = o[n] ? function (v) {\n            return (p = !p) ? {\n              value: __await(o[n](v)),\n              done: n === \"return\"\n            } : f ? f(v) : v;\n          } : f;\n        }\n      }\n\n      function __asyncValues(o) {\n        if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n        var m = o[Symbol.asyncIterator],\n            i;\n        return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () {\n          return this;\n        }, i);\n\n        function verb(n) {\n          i[n] = o[n] && function (v) {\n            return new Promise(function (resolve, reject) {\n              v = o[n](v), settle(resolve, reject, v.done, v.value);\n            });\n          };\n        }\n\n        function settle(resolve, reject, d, v) {\n          Promise.resolve(v).then(function (v) {\n            resolve({\n              value: v,\n              done: d\n            });\n          }, reject);\n        }\n      }\n\n      function __makeTemplateObject(cooked, raw) {\n        if (Object.defineProperty) {\n          Object.defineProperty(cooked, \"raw\", {\n            value: raw\n          });\n        } else {\n          cooked.raw = raw;\n        }\n\n        return cooked;\n      }\n\n      ;\n\n      var __setModuleDefault = Object.create ? function (o, v) {\n        Object.defineProperty(o, \"default\", {\n          enumerable: true,\n          value: v\n        });\n      } : function (o, v) {\n        o[\"default\"] = v;\n      };\n\n      function __importStar(mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k in mod) {\n          if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n        }\n\n        __setModuleDefault(result, mod);\n\n        return result;\n      }\n\n      function __importDefault(mod) {\n        return mod && mod.__esModule ? mod : {\n          default: mod\n        };\n      }\n\n      function __classPrivateFieldGet(receiver, privateMap) {\n        if (!privateMap.has(receiver)) {\n          throw new TypeError(\"attempted to get private field on non-instance\");\n        }\n\n        return privateMap.get(receiver);\n      }\n\n      function __classPrivateFieldSet(receiver, privateMap, value) {\n        if (!privateMap.has(receiver)) {\n          throw new TypeError(\"attempted to set private field on non-instance\");\n        }\n\n        privateMap.set(receiver, value);\n        return value;\n      }\n      /***/\n\n    },\n    /* 56 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Vector = function () {\n        function Vector(x, y) {\n          if (x === void 0) {\n            x = 0;\n          }\n\n          if (y === void 0) {\n            y = 0;\n          }\n\n          this.x = x;\n          this.y = y;\n        }\n\n        Object.defineProperty(Vector.prototype, \"length\", {\n          get: function get() {\n            return Math.sqrt(this.x * this.x + this.y * this.y);\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        Vector.fromPoints = function (begin, end) {\n          return new Vector(end.x - begin.x, end.y - begin.y);\n        };\n\n        Vector.fromSegment = function (segment) {\n          return new Vector(segment.endPoint.x - segment.startPoint.x, segment.endPoint.y - segment.startPoint.y);\n        };\n\n        Vector.prototype.normalize = function () {\n          var length = this.length;\n\n          if (length !== 0) {\n            this.x /= length;\n            this.y /= length;\n          }\n\n          return this;\n        };\n\n        Vector.prototype.negative = function () {\n          this.x *= -1;\n          this.y *= -1;\n          return this;\n        };\n\n        Object.defineProperty(Vector, \"axisX\", {\n          get: function get() {\n            return new Vector(1, 0);\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(Vector, \"axisY\", {\n          get: function get() {\n            return new Vector(0, 1);\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        Vector.angleBetween = function (a, b) {\n          var cosFi = Vector.scalarProduct(a, b) / (a.length * b.length);\n          return Math.acos(cosFi);\n        };\n\n        Vector.scalarProduct = function (a, b) {\n          return a.x * b.x + a.y * b.y;\n        };\n\n        return Vector;\n      }();\n\n      exports.Vector = Vector;\n      /***/\n    },\n    /* 57 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Diagnostics = void 0;\n      var LoggerDisplayMode;\n\n      (function (LoggerDisplayMode) {\n        LoggerDisplayMode[LoggerDisplayMode[\"Disabled\"] = 0] = \"Disabled\";\n        LoggerDisplayMode[LoggerDisplayMode[\"Console\"] = 1] = \"Console\";\n        LoggerDisplayMode[LoggerDisplayMode[\"Document\"] = 2] = \"Document\";\n      })(LoggerDisplayMode || (LoggerDisplayMode = {}));\n\n      var Diagnostics =\n      /** @class */\n      function () {\n        function Diagnostics() {}\n\n        Diagnostics.beginAverage = function (groupName) {\n          if (!this.enableLogsAndTimers) return;\n          this.lastAverageGroupName = groupName;\n        };\n\n        Diagnostics.endAverage = function () {\n          if (!this.enableLogsAndTimers) return;\n          this.lastAverageGroupName = null;\n        };\n\n        Diagnostics.tryLogAverage = function (groupName) {\n          var _this = this;\n\n          if (this.lastAverageGroupName === groupName) return;\n          var sameGroupTimers = Object.keys(this.timers).map(function (t) {\n            return _this.timers[t];\n          }).filter(function (t) {\n            return t.groupName === groupName;\n          });\n\n          if (!sameGroupTimers.filter(function (t) {\n            return !t.endTime;\n          }).length) {\n            var average = sameGroupTimers.reduce(function (acc, t) {\n              return acc + (t.endTime - t.startTime);\n            }, 0) / sameGroupTimers.length;\n            this.log(\"average: \" + average);\n          }\n        };\n\n        Diagnostics.timer = function (message) {\n          if (!this.enableLogsAndTimers) return;\n          this.lastCreatedTimer = {\n            message: message,\n            startTime: performance.now(),\n            groupName: this.lastAverageGroupName\n          };\n        };\n\n        Diagnostics.endTimer = function () {\n          var _this = this;\n\n          if (!this.enableLogsAndTimers) return;\n          var timer = this.lastCreatedTimer;\n          var timeoutID = setTimeout(function () {\n            timer.endTime = performance.now();\n\n            _this.showMessage(\"timer \\\"\" + timer.message + \"\\\": \" + (timer.endTime - timer.startTime));\n\n            timer.groupName && _this.tryLogAverage(timer.groupName);\n          }, 0);\n          this.timers[timeoutID] = timer;\n          this.lastCreatedTimer = null;\n        };\n\n        Diagnostics.logPerfInfo = function () {\n          var nodesCount = document.querySelector(\".dxdi-control > svg\").querySelectorAll(\"*\").length;\n          var memory = performance[\"memory\"];\n          this.log(\"nodes: \" + nodesCount.toLocaleString() + (memory ? \" memory: \" : \"\") + (memory ? memory[\"usedJSHeapSize\"].toLocaleString() : \"\"));\n        };\n\n        Diagnostics.log = function (message) {\n          this.showMessage(message);\n        };\n\n        Diagnostics.showMessage = function (message) {\n          switch (Diagnostics.mode) {\n            case LoggerDisplayMode.Console:\n              // eslint-disable-next-line no-console\n              console.log(message);\n              break;\n\n            case LoggerDisplayMode.Document:\n              {\n                var existText = this.getElement().value;\n\n                if (this.lastMessage === message) {\n                  var lastLineLength = existText.indexOf(\"\\r\\n\");\n                  if (lastLineLength < 0) lastLineLength = existText.indexOf(\"\\n\");\n                  var lastLine = existText.substr(0, lastLineLength);\n                  var regex = /( \\()([0-9]+)(\\))$/;\n                  if (regex.test(lastLine)) lastLine = lastLine.replace(/( \\()([0-9]+)(\\))$/, function (str, before, val, after) {\n                    return before + ++val + after;\n                  });else lastLine += \" (1)\";\n                  this.getElement().value = lastLine + existText.substr(lastLineLength);\n                } else {\n                  this.getElement().value = message + \"\\r\\n\" + existText;\n                  this.lastMessage = message;\n                }\n              }\n          }\n        };\n\n        Diagnostics.getElement = function () {\n          var _this = this;\n\n          if (!this.el) {\n            this.el = document.createElement(\"textarea\");\n            this.el.style.top = \"0px\";\n            this.el.style.right = \"0px\";\n            this.el.style.position = \"fixed\";\n            this.el.style.background = \"transparent\";\n            this.el.style.fontSize = \"11px\";\n            this.el.style.fontFamily = \"monospace\";\n            this.el.style.overflow = \"auto\";\n            this.el.style.width = \"400px\";\n            document.body.appendChild(this.el);\n            var clr = document.createElement(\"button\");\n            clr.innerHTML = \"x\";\n            clr.addEventListener(\"click\", function () {\n              _this.el.value = \"\";\n              _this.lastMessage = \"\";\n            });\n            clr.style.top = \"0px\";\n            clr.style.right = \"400px\";\n            clr.style.position = \"fixed\";\n            clr.style.opacity = \"0.1\";\n            document.body.appendChild(clr);\n          }\n\n          return this.el;\n        };\n\n        Diagnostics.mode = LoggerDisplayMode.Document;\n        Diagnostics.optimizeUsingRAF = true;\n        Diagnostics.optimizeLayers = true;\n        Diagnostics.timers = {};\n        Diagnostics.enableLogsAndTimers = false;\n        return Diagnostics;\n      }();\n\n      exports.Diagnostics = Diagnostics;\n      /***/\n    },\n    /* 58 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var StringUtils = function () {\n        function StringUtils() {}\n\n        StringUtils.isAlpha = function (ch) {\n          return ch >= 'a' && ch <= 'z' || ch >= 'A' && ch <= 'Z';\n        };\n\n        StringUtils.isDigit = function (ch) {\n          return ch >= '0' && ch <= '9';\n        };\n\n        StringUtils.stringHashCode = function (str) {\n          var hash = 0;\n          if (str.length === 0) return hash;\n          var strLen = str.length;\n\n          for (var i = 0; i < strLen; i++) {\n            hash = (hash << 5) - hash + str.charCodeAt(i);\n            hash |= 0;\n          }\n\n          return hash;\n        };\n\n        StringUtils.endsAt = function (str, template) {\n          var strInd = str.length - 1;\n          var tmplInd = template.length - 1;\n          var strStartInd = strInd - tmplInd;\n          if (strStartInd < 0) return false;\n\n          for (; strInd >= strStartInd; strInd--, tmplInd--) {\n            if (str[strInd] !== template[tmplInd]) return false;\n          }\n\n          return true;\n        };\n\n        StringUtils.startsAt = function (str, template) {\n          return str.substr(0, template.length) === template;\n        };\n\n        StringUtils.stringInLowerCase = function (str) {\n          return str.toLowerCase() === str;\n        };\n\n        StringUtils.stringInUpperCase = function (str) {\n          return str.toUpperCase() === str;\n        };\n\n        StringUtils.atLeastOneSymbolInUpperCase = function (str) {\n          for (var i = 0, char = void 0; char = str[i]; i++) {\n            if (StringUtils.stringInUpperCase(char) && !StringUtils.stringInLowerCase(char)) return true;\n          }\n\n          return false;\n        };\n\n        StringUtils.getSymbolFromEnd = function (text, posFromEnd) {\n          return text[text.length - posFromEnd];\n        };\n\n        StringUtils.trim = function (str, trimChars) {\n          if (trimChars === undefined) return StringUtils.trimInternal(str, true, true);else {\n            var joinedChars = trimChars.join('');\n            return str.replace(new RegExp(\"(^[\" + joinedChars + \"]*)|([\" + joinedChars + \"]*$)\", 'g'), '');\n          }\n        };\n\n        StringUtils.trimStart = function (str, trimChars) {\n          if (trimChars === undefined) return StringUtils.trimInternal(str, true, false);else {\n            var joinedChars = trimChars.join('');\n            return str.replace(new RegExp(\"^[\" + joinedChars + \"]*\", 'g'), '');\n          }\n        };\n\n        StringUtils.trimEnd = function (str, trimChars) {\n          if (trimChars === undefined) return StringUtils.trimInternal(str, false, true);else {\n            var joinedChars = trimChars.join('');\n            return str.replace(new RegExp(\"[\" + joinedChars + \"]*$\", 'g'), '');\n          }\n        };\n\n        StringUtils.getDecimalSeparator = function () {\n          return 1.1.toLocaleString().substr(1, 1);\n        };\n\n        StringUtils.repeat = function (str, count) {\n          return new Array(count <= 0 ? 0 : count + 1).join(str);\n        };\n\n        StringUtils.isNullOrEmpty = function (str) {\n          return !str || !str.length;\n        };\n\n        StringUtils.padLeft = function (str, totalWidth, paddingChar) {\n          return StringUtils.repeat(paddingChar, Math.max(0, totalWidth - str.length)) + str;\n        };\n\n        StringUtils.trimInternal = function (source, trimStart, trimEnd) {\n          var len = source.length;\n          if (!len) return source;\n\n          if (len < 0xBABA1) {\n            var result = source;\n            if (trimStart) result = result.replace(/^\\s+/, '');\n            if (trimEnd) result = result.replace(/\\s+$/, '');\n            return result;\n          } else {\n            var start = 0;\n\n            if (trimEnd) {\n              while (len > 0 && /\\s/.test(source[len - 1])) {\n                len--;\n              }\n            }\n\n            if (trimStart && len > 0) {\n              while (start < len && /\\s/.test(source[start])) {\n                start++;\n              }\n            }\n\n            return source.substring(start, len);\n          }\n        };\n\n        return StringUtils;\n      }();\n\n      exports.StringUtils = StringUtils;\n      /***/\n    },\n    /* 59 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.DiagramModel = void 0;\n\n      var Shape_1 = __webpack_require__(14);\n\n      var Connector_1 = __webpack_require__(7);\n\n      var Utils_1 = __webpack_require__(3);\n\n      var rectangle_1 = __webpack_require__(13);\n\n      var size_1 = __webpack_require__(2);\n\n      var point_1 = __webpack_require__(1);\n\n      var ImageCache_1 = __webpack_require__(45);\n\n      var color_1 = __webpack_require__(22);\n\n      var Enums_1 = __webpack_require__(46);\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var DiagramModel =\n      /** @class */\n      function () {\n        function DiagramModel(pageSize) {\n          if (pageSize === void 0) {\n            pageSize = new size_1.Size(8391, 11906);\n          }\n\n          this.items = [];\n          this.itemIndexByKey = {};\n          this.keyCounter = 0;\n          this.pageSize = new size_1.Size(8391, 11906);\n          this.pageLandscape = false;\n          this.pageColor = DiagramModel.defaultPageColor;\n          this.units = Enums_1.DiagramUnit.In;\n          this.snapStartPoint = new point_1.Point(0, 0);\n          this.pageSize = pageSize;\n          this.size = this.pageSize.clone();\n          this.rectangle = rectangle_1.Rectangle.fromGeometry(new point_1.Point(0, 0), new size_1.Size(0, 0));\n          this.initializeKeyCounter();\n        }\n\n        Object.defineProperty(DiagramModel.prototype, \"pageWidth\", {\n          get: function get() {\n            return this.pageLandscape ? this.pageSize.height : this.pageSize.width;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DiagramModel.prototype, \"pageHeight\", {\n          get: function get() {\n            return this.pageLandscape ? this.pageSize.width : this.pageSize.height;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        DiagramModel.prototype.getRectangle = function (forceUpdate) {\n          if (forceUpdate) this.rectangle = ModelUtils_1.ModelUtils.createRectangle(this.items);\n          return this.rectangle;\n        };\n\n        DiagramModel.prototype.pushItem = function (item) {\n          var index = this.items.push(item);\n          this.itemIndexByKey[item.key] = index - 1;\n          if (item instanceof Shape_1.Shape && !item.image.isEmpty) this.cacheShapeImage(item);\n        };\n\n        DiagramModel.prototype.removeItem = function (item) {\n          var index = this.getItemIndex(item);\n          delete this.itemIndexByKey[item.key];\n          this.items.splice(index, 1);\n          this.updateIndicesHash(index);\n        };\n\n        DiagramModel.prototype.updateIndicesHash = function (startIndex) {\n          for (var i = startIndex; i < this.items.length; i++) {\n            this.itemIndexByKey[this.items[i].key] = i;\n          }\n        };\n\n        DiagramModel.prototype.getItemIndex = function (item) {\n          return this.itemIndexByKey[item.key];\n        };\n\n        DiagramModel.prototype.findShape = function (key) {\n          var shape = this.findItem(key);\n          return shape instanceof Shape_1.Shape ? shape : undefined;\n        };\n\n        DiagramModel.prototype.findShapesCore = function (callback) {\n          var shapes = [];\n          this.items.forEach(function (item) {\n            if (item instanceof Shape_1.Shape) if (callback(item)) {\n              shapes.push(item);\n              return;\n            }\n          });\n          return shapes;\n        };\n\n        DiagramModel.prototype.findShapeCore = function (callback) {\n          for (var i = 0; i < this.items.length; i++) {\n            var item = this.items[i];\n            if (item instanceof Shape_1.Shape) if (callback(item)) return item;\n          }\n        };\n\n        DiagramModel.prototype.findShapeAtPosition = function (position) {\n          return this.findShapeCore(function (shape) {\n            return shape.position.equals(position);\n          });\n        };\n\n        DiagramModel.prototype.findShapeByDataKey = function (key) {\n          return this.findShapeCore(function (shape) {\n            return shape.dataKey === key;\n          });\n        };\n\n        DiagramModel.prototype.findShapesByImageUrl = function (imageUrl) {\n          return this.findShapesCore(function (shape) {\n            return shape.image.url === imageUrl;\n          });\n        };\n\n        DiagramModel.prototype.findShapesByDescription = function (description) {\n          return this.findShapesCore(function (shape) {\n            return shape.description.key === description.key;\n          });\n        };\n\n        DiagramModel.prototype.cacheShapeImage = function (shape) {\n          var cacheImageInfo = ImageCache_1.ImageCache.instance.createUnloadedInfoByShapeImageInfo(shape.image);\n          if (cacheImageInfo.isLoaded) shape.image.loadBase64Content(cacheImageInfo.base64);\n        };\n\n        DiagramModel.prototype.loadAllImages = function (imageLoader) {\n          ImageCache_1.ImageCache.instance.loadAllImages(imageLoader);\n        };\n\n        DiagramModel.prototype.findContainer = function (key) {\n          var shape = this.findShape(key);\n          return shape && shape.enableChildren ? shape : undefined;\n        };\n\n        DiagramModel.prototype.findNearestContainer = function (key) {\n          var shape = this.findShape(key);\n          if (shape) return shape.enableChildren ? shape : shape.container;else return undefined;\n        };\n\n        DiagramModel.prototype.getChildren = function (container) {\n          var _this = this;\n\n          return container.children.map(function (child) {\n            return _this.findItem(child.key);\n          }).filter(function (item) {\n            return item;\n          });\n        };\n\n        DiagramModel.prototype.findChild = function (container, key, recursive) {\n          var _this = this;\n\n          if (recursive === void 0) {\n            recursive = true;\n          }\n\n          var result;\n          container.children.forEach(function (child) {\n            if (result) return;\n\n            if (child.key === key) {\n              result = child;\n              return;\n            }\n\n            if (recursive && child instanceof Shape_1.Shape) {\n              result = _this.findChild(child, key, recursive);\n              if (result) return;\n            }\n          });\n          return result;\n        };\n\n        DiagramModel.prototype.findItemContainerCore = function (item, callback) {\n          var container = item.container;\n\n          while (container) {\n            if (!callback || callback(container)) break;\n            container = container.container;\n          }\n\n          return container;\n        };\n\n        DiagramModel.prototype.findItemContainer = function (item) {\n          return this.findItemContainerCore(item);\n        };\n\n        DiagramModel.prototype.findItemCollapsedContainer = function (item) {\n          return this.findItemContainerCore(item, function (c) {\n            return !c.expanded;\n          });\n        };\n\n        DiagramModel.prototype.findItemTopCollapsedContainer = function (item) {\n          var container = item.container;\n          var collapsedContainer;\n\n          while (container) {\n            if (!container.expanded) collapsedContainer = container;\n            container = container.container;\n          }\n\n          return collapsedContainer;\n        };\n\n        DiagramModel.prototype.isContainerItem = function (container, item) {\n          return this.findItemContainerCore(item, function (c) {\n            return c.key === container.key;\n          }) !== undefined;\n        };\n\n        DiagramModel.prototype.findConnector = function (key) {\n          var connector = this.findItem(key);\n          return connector instanceof Connector_1.Connector ? connector : undefined;\n        };\n\n        DiagramModel.prototype.findConnectorCore = function (callback) {\n          for (var i = 0; i < this.items.length; i++) {\n            var item = this.items[i];\n            if (item instanceof Connector_1.Connector) if (callback(item)) return item;\n          }\n        };\n\n        DiagramModel.prototype.findConnectorAtPoints = function (points) {\n          return this.findConnectorCore(function (connector) {\n            return Utils_1.GeometryUtils.arePointsEqual(connector.points, points);\n          });\n        };\n\n        DiagramModel.prototype.findConnectorByDataKey = function (key) {\n          return this.findConnectorCore(function (connector) {\n            return connector.dataKey === key;\n          });\n        };\n\n        DiagramModel.prototype.findConnectorByBeginEndDataKeys = function (beginDataKey, endDataKey) {\n          return this.findConnectorCore(function (connector) {\n            return connector.beginItem && connector.beginItem.dataKey === beginDataKey && connector.endItem && connector.endItem.dataKey === endDataKey;\n          });\n        };\n\n        DiagramModel.prototype.findConnectorsCore = function (callback) {\n          var result = [];\n          this.items.forEach(function (item) {\n            if (item instanceof Connector_1.Connector) if (callback(item)) {\n              result.push(item);\n              return;\n            }\n          });\n          return result;\n        };\n\n        DiagramModel.prototype.findConnectorsWithoutBeginItem = function () {\n          return this.findConnectorsCore(function (connector) {\n            return !connector.beginItem;\n          });\n        };\n\n        DiagramModel.prototype.findConnectorsWithoutEndItem = function () {\n          return this.findConnectorsCore(function (connector) {\n            return !connector.endItem;\n          });\n        };\n\n        DiagramModel.prototype.findItem = function (key) {\n          return this.items[this.itemIndexByKey[key]];\n        };\n\n        DiagramModel.prototype.findItemByDataKey = function (key) {\n          return this.findItemCore(function (item) {\n            return item.dataKey === key;\n          });\n        };\n\n        DiagramModel.prototype.findItemCore = function (callback) {\n          for (var i = 0; i < this.items.length; i++) {\n            if (callback(this.items[i])) return this.items[i];\n          }\n        };\n\n        DiagramModel.isIntersectedItems = function (item1, item2) {\n          var result = false;\n          if (item1 instanceof Shape_1.Shape) result = item2.intersectedByRect(item1.rectangle);else if (item1 instanceof Connector_1.Connector) item1.getSegments().forEach(function (s1) {\n            if (item2 instanceof Shape_1.Shape) result = result || s1.isIntersectedByRect(item2.rectangle);else if (item2 instanceof Connector_1.Connector) item2.getSegments().forEach(function (s2) {\n              result = result || s1.isIntersected(s2);\n            });\n          });\n          return result;\n        };\n\n        DiagramModel.prototype.getIntersectItems = function (item) {\n          var result = [];\n          this.items.forEach(function (i) {\n            if (i.container !== item.container) return;\n            if (item !== i && (!(i instanceof Connector_1.Connector) || item.attachedConnectors.indexOf(i) === -1) && DiagramModel.isIntersectedItems(i, item)) result.push(i);\n          });\n          return result;\n        };\n\n        DiagramModel.prototype.getIntersectItemsMinZIndex = function (item) {\n          var items = this.getIntersectItems(item);\n          return items.map(function (i) {\n            return i.zIndex;\n          }).reduce(function (prev, cur) {\n            return Math.min(prev, cur);\n          }, Number.MAX_VALUE);\n        };\n\n        DiagramModel.prototype.getIntersectItemsMaxZIndex = function (item) {\n          var items = this.getIntersectItems(item);\n          return items.map(function (i) {\n            return i.zIndex;\n          }).reduce(function (prev, cur) {\n            return Math.max(prev, cur);\n          }, -Number.MAX_VALUE);\n        };\n\n        DiagramModel.prototype.iterateItems = function (callback) {\n          this.items.forEach(callback);\n        };\n\n        DiagramModel.prototype.getNextKey = function () {\n          return (this.keyCounter++).toString();\n        };\n\n        DiagramModel.prototype.initializeKeyCounter = function () {\n          this.keyCounter = this.items.reduce(function (prev, cur) {\n            var num = parseInt(cur.key);\n            return Math.max(prev, isNaN(num) ? 0 : num + 1);\n          }, this.items.length);\n        };\n\n        DiagramModel.defaultPageColor = color_1.ColorUtils.LIGHT_COLOR;\n        return DiagramModel;\n      }();\n\n      exports.DiagramModel = DiagramModel;\n      /***/\n    },\n    /* 60 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics23 = function extendStatics(d, b) {\n          _extendStatics23 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics23(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics23(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.TextPrimitive270degRenderHelper = exports.TextPrimitive180degRenderHelper = exports.TextPrimitive90degRenderHelper = exports.TextPrimitiveRenderHelper = exports.TextPrimitive = exports.TextAngle = void 0;\n\n      var unit_converter_1 = __webpack_require__(12);\n\n      var RenderHelper_1 = __webpack_require__(15);\n\n      var Primitive_1 = __webpack_require__(24);\n\n      var Utils_1 = __webpack_require__(18);\n\n      var TextUtils_1 = __webpack_require__(61);\n\n      var TextAngle;\n\n      (function (TextAngle) {\n        TextAngle[TextAngle[\"Angle0deg\"] = 0] = \"Angle0deg\";\n        TextAngle[TextAngle[\"Angle90deg\"] = 90] = \"Angle90deg\";\n        TextAngle[TextAngle[\"Angle180deg\"] = 180] = \"Angle180deg\";\n        TextAngle[TextAngle[\"Angle270deg\"] = 270] = \"Angle270deg\";\n      })(TextAngle = exports.TextAngle || (exports.TextAngle = {}));\n\n      var TextPrimitive =\n      /** @class */\n      function (_super) {\n        __extends(TextPrimitive, _super);\n\n        function TextPrimitive(x, y, text, owner, textWidth, textHeight, textSpacing, style, reverseTextAhchor, clipPathId, filterId, angle, onApplyProperties) {\n          var _this = _super.call(this, style, \"\", clipPathId, onApplyProperties) || this;\n\n          _this.x = x;\n          _this.y = y;\n          _this.text = text;\n          _this.owner = owner;\n          _this.textWidth = textWidth;\n          _this.textHeight = textHeight;\n          _this.textSpacing = textSpacing;\n          _this.reverseTextAhchor = reverseTextAhchor;\n          _this.angle = angle;\n          _this.filterId = filterId;\n          _this.textSegmens = TextUtils_1.textToParagraphs(_this.text);\n          _this.renderHelper = _this.createRenderHelper();\n\n          if (_this.textWidth !== undefined && _this.textWidth !== undefined) {\n            _this.x = _this.renderHelper.getTextX(_this.x);\n            _this.y = _this.renderHelper.getTextY(_this.y);\n          }\n\n          return _this;\n        }\n\n        TextPrimitive.prototype.createMainElement = function () {\n          return document.createElementNS(RenderHelper_1.svgNS, \"text\");\n        };\n\n        TextPrimitive.prototype.applyElementProperties = function (element, measurer) {\n          this.setUnitAttribute(element, \"x\", this.x);\n          this.setUnitAttribute(element, \"y\", this.y);\n          if (this.filterId) element.setAttribute(\"filter\", Utils_1.RenderUtils.getUrlPathById(this.filterId));\n\n          _super.prototype.applyElementProperties.call(this, element, measurer);\n\n          if (element.getAttribute(\"appliedText\") !== this.text || element.getAttribute(\"appliedSize\") !== (this.fitToSize && this.fitToSize.toString())) {\n            this.createTSpanElements(element, measurer);\n            element.setAttribute(\"appliedText\", this.text);\n            element.setAttribute(\"appliedSize\", this.fitToSize && this.fitToSize.toString());\n          } else this.prepareTSpanElements(element);\n\n          this.renderHelper.prepareMainElement(element, this.x, this.y);\n        };\n\n        TextPrimitive.prototype.createTSpanElements = function (element, measurer) {\n          var _this = this;\n\n          Utils_1.RenderUtils.removeContent(element);\n          this.textSegmens.forEach(function (txt, index) {\n            if (!txt && _this.textSegmens.length > 1) {\n              var span = _this.createTSpanElement(element);\n\n              span.textContent = \" \";\n            } else if (_this.fitToSize) {\n              var words_1 = TextUtils_1.textToWords(txt);\n              var lines = TextUtils_1.wordsByLines(unit_converter_1.UnitConverter.twipsToPixels(_this.fitToSize), words_1, function () {\n                return measurer.measureWords(words_1, _this.style, _this.owner);\n              });\n              lines.forEach(function (line) {\n                var span = _this.createTSpanElement(element);\n\n                span.textContent = line;\n              });\n\n              if (!lines.length) {\n                var span = _this.createTSpanElement(element);\n\n                span.textContent = \" \";\n              }\n            } else {\n              var tSpan = _this.createTSpanElement(element);\n\n              tSpan.textContent = txt;\n            }\n          });\n          var firstTSpan = element.firstChild;\n          if (firstTSpan) this.prepareFirstTSpanElement(firstTSpan, element.childNodes.length);\n        };\n\n        TextPrimitive.prototype.createTSpanElement = function (parent) {\n          var tSpan = document.createElementNS(RenderHelper_1.svgNS, \"tspan\");\n          parent.appendChild(tSpan);\n          this.prepareTSpanElement(tSpan);\n          return tSpan;\n        };\n\n        TextPrimitive.prototype.prepareTSpanElements = function (element) {\n          for (var i = 0; i < element.childNodes.length; i++) {\n            var tSpan = element.childNodes[i];\n            this.prepareTSpanElement(tSpan);\n          }\n\n          var firstTSpan = element.firstChild;\n          if (firstTSpan) this.prepareFirstTSpanElement(firstTSpan, element.childNodes.length);\n        };\n\n        TextPrimitive.prototype.prepareTSpanElement = function (tSpan) {\n          this.renderHelper.prepareTSpanElement(tSpan, this.x, this.y);\n        };\n\n        TextPrimitive.prototype.prepareFirstTSpanElement = function (tSpan, lineCount) {\n          this.renderHelper.prepareFirstTSpanElement(tSpan, lineCount);\n        };\n\n        TextPrimitive.prototype.applyElementStyleProperties = function (element) {\n          this.applyElementStylePropertiesCore(element, this.reverseTextAhchor);\n        };\n\n        Object.defineProperty(TextPrimitive.prototype, \"fitToSize\", {\n          get: function get() {\n            return this.renderHelper.fitToSize;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        TextPrimitive.prototype.createRenderHelper = function () {\n          switch (this.angle) {\n            case TextAngle.Angle90deg:\n              return new TextPrimitive90degRenderHelper(this);\n\n            case TextAngle.Angle180deg:\n              return new TextPrimitive180degRenderHelper(this);\n\n            case TextAngle.Angle270deg:\n              return new TextPrimitive270degRenderHelper(this);\n\n            default:\n              return new TextPrimitiveRenderHelper(this);\n          }\n        };\n\n        TextPrimitive.baselineCorrection = 0.35;\n        return TextPrimitive;\n      }(Primitive_1.SvgPrimitive);\n\n      exports.TextPrimitive = TextPrimitive;\n\n      var TextPrimitiveRenderHelper =\n      /** @class */\n      function () {\n        function TextPrimitiveRenderHelper(primitive) {\n          this.primitive = primitive;\n        }\n\n        Object.defineProperty(TextPrimitiveRenderHelper.prototype, \"textWidth\", {\n          get: function get() {\n            return this.primitive.textWidth;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(TextPrimitiveRenderHelper.prototype, \"textHeight\", {\n          get: function get() {\n            return this.primitive.textHeight;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(TextPrimitiveRenderHelper.prototype, \"fitToSize\", {\n          get: function get() {\n            return this.textWidth;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(TextPrimitiveRenderHelper.prototype, \"textAnchor\", {\n          get: function get() {\n            return this.primitive.style[\"text-anchor\"];\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(TextPrimitiveRenderHelper.prototype, \"textSpacing\", {\n          get: function get() {\n            return this.primitive.textSpacing;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(TextPrimitiveRenderHelper.prototype, \"angle\", {\n          get: function get() {\n            return undefined;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(TextPrimitiveRenderHelper.prototype, \"needRotation\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        TextPrimitiveRenderHelper.prototype.prepareMainElement = function (element, x, y) {\n          if (this.needRotation) element.setAttribute(\"transform\", \"rotate(\" + this.angle + \", \" + unit_converter_1.UnitConverter.twipsToPixels(x) + \", \" + unit_converter_1.UnitConverter.twipsToPixels(y) + \")\");\n        };\n\n        TextPrimitiveRenderHelper.prototype.prepareTSpanElement = function (tSpan, x, y) {\n          this.primitive.setUnitAttribute(tSpan, \"x\", x);\n          tSpan.setAttribute(\"dy\", TextUtils_1.LINE_HEIGHT + \"em\");\n        };\n\n        TextPrimitiveRenderHelper.prototype.prepareFirstTSpanElement = function (tSpan, lineCount) {\n          var dy = -((lineCount - 1) / 2) + TextPrimitive.baselineCorrection;\n          tSpan.setAttribute(\"dy\", dy.toFixed(2) + \"em\");\n        };\n\n        TextPrimitiveRenderHelper.prototype.getTextX = function (x) {\n          if (!this.textAnchor || this.textAnchor === \"middle\") return x + this.textWidth / 2;else if (this.textAnchor === \"end\") return x + this.textWidth - this.textSpacing;else if (this.textAnchor === \"start\") return x + this.textSpacing;\n          return x;\n        };\n\n        TextPrimitiveRenderHelper.prototype.getTextY = function (y) {\n          return y + this.textHeight / 2;\n        };\n\n        TextPrimitiveRenderHelper.prototype.setUnitAttribute = function (element, key, value) {\n          this.primitive.setUnitAttribute(element, key, value);\n        };\n\n        return TextPrimitiveRenderHelper;\n      }();\n\n      exports.TextPrimitiveRenderHelper = TextPrimitiveRenderHelper;\n\n      var TextPrimitive90degRenderHelper =\n      /** @class */\n      function (_super) {\n        __extends(TextPrimitive90degRenderHelper, _super);\n\n        function TextPrimitive90degRenderHelper(primitive) {\n          return _super.call(this, primitive) || this;\n        }\n\n        Object.defineProperty(TextPrimitive90degRenderHelper.prototype, \"fitToSize\", {\n          get: function get() {\n            return this.textHeight;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(TextPrimitive90degRenderHelper.prototype, \"angle\", {\n          get: function get() {\n            return 90;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(TextPrimitive90degRenderHelper.prototype, \"needRotation\", {\n          get: function get() {\n            return true;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        TextPrimitive90degRenderHelper.prototype.getTextX = function (x) {\n          return x + this.textWidth / 2;\n        };\n\n        TextPrimitive90degRenderHelper.prototype.getTextY = function (y) {\n          if (!this.textAnchor || this.textAnchor === \"middle\") return y + this.textHeight / 2;else if (this.textAnchor === \"end\") return y + this.textHeight - this.textSpacing;else if (this.textAnchor === \"start\") return y + this.textSpacing;\n          return y;\n        };\n\n        return TextPrimitive90degRenderHelper;\n      }(TextPrimitiveRenderHelper);\n\n      exports.TextPrimitive90degRenderHelper = TextPrimitive90degRenderHelper;\n\n      var TextPrimitive180degRenderHelper =\n      /** @class */\n      function (_super) {\n        __extends(TextPrimitive180degRenderHelper, _super);\n\n        function TextPrimitive180degRenderHelper(primitive) {\n          return _super.call(this, primitive) || this;\n        }\n\n        Object.defineProperty(TextPrimitive180degRenderHelper.prototype, \"angle\", {\n          get: function get() {\n            return 180;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(TextPrimitive180degRenderHelper.prototype, \"needRotation\", {\n          get: function get() {\n            return true;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        TextPrimitive180degRenderHelper.prototype.getTextX = function (x) {\n          if (!this.textAnchor || this.textAnchor === \"middle\") return x + this.textWidth / 2;else if (this.textAnchor === \"start\") return x + this.textWidth - this.textSpacing;else if (this.textAnchor === \"end\") return x + this.textSpacing;\n          return x;\n        };\n\n        return TextPrimitive180degRenderHelper;\n      }(TextPrimitiveRenderHelper);\n\n      exports.TextPrimitive180degRenderHelper = TextPrimitive180degRenderHelper;\n\n      var TextPrimitive270degRenderHelper =\n      /** @class */\n      function (_super) {\n        __extends(TextPrimitive270degRenderHelper, _super);\n\n        function TextPrimitive270degRenderHelper(primitive) {\n          return _super.call(this, primitive) || this;\n        }\n\n        Object.defineProperty(TextPrimitive270degRenderHelper.prototype, \"angle\", {\n          get: function get() {\n            return 270;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        TextPrimitive270degRenderHelper.prototype.getTextY = function (y) {\n          if (!this.textAnchor || this.textAnchor === \"middle\") return y + this.textHeight / 2;else if (this.textAnchor === \"start\") return y + this.textHeight - this.textSpacing;else if (this.textAnchor === \"end\") return y + this.textSpacing;\n          return y;\n        };\n\n        return TextPrimitive270degRenderHelper;\n      }(TextPrimitive90degRenderHelper);\n\n      exports.TextPrimitive270degRenderHelper = TextPrimitive270degRenderHelper;\n      /***/\n    },\n    /* 61 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.getLineHeight = exports.getTextHeight = exports.getTextLineSize = exports.getOptimalTextRectangle = exports.TEXTRECT_RATIO_EPS = exports.textToParagraphs = exports.textToWords = exports.wordsByLines = exports.LINE_HEIGHT = void 0;\n\n      var Utils_1 = __webpack_require__(3);\n\n      var size_1 = __webpack_require__(2);\n\n      var Data_1 = __webpack_require__(43);\n\n      var WHITESPACES = /\\s/gm;\n      exports.LINE_HEIGHT = 1.05;\n\n      function wordsByLines(absLineWidth, words, measureWords) {\n        if (words.length === 1) return words;\n        var measuredWords = measureWords();\n        var spaceWidth = measuredWords.words[\" \"].width;\n        var result = [];\n        var lastLineWidth = 0;\n        var lastLineIndex = -1;\n\n        for (var i = 0; i < words.length; i++) {\n          var word = words[i];\n          var wordWidth = measuredWords.words[word].width;\n\n          if (lastLineIndex === -1 || lastLineWidth + spaceWidth + wordWidth > absLineWidth) {\n            lastLineIndex = result.push(word) - 1;\n            lastLineWidth = wordWidth;\n          } else {\n            lastLineWidth += spaceWidth + wordWidth;\n            result[lastLineIndex] += \" \" + word;\n          }\n        }\n\n        return result;\n      }\n\n      exports.wordsByLines = wordsByLines;\n\n      function textToWords(text) {\n        return text.split(WHITESPACES).filter(function (t) {\n          return t.length;\n        });\n      }\n\n      exports.textToWords = textToWords;\n\n      function textToParagraphs(text) {\n        return text.split(\"\\n\");\n      }\n\n      exports.textToParagraphs = textToParagraphs;\n      exports.TEXTRECT_RATIO_EPS = 1.2;\n      var TEXTRECT_WIDTH_DIFF_EPS = 1;\n\n      function getOptimalTextRectangle(text, style, owner, measurer, initialSize, keepRatio, minWidth, maxWidth, minHeight, maxHeight) {\n        if (minWidth === void 0) {\n          minWidth = 0;\n        }\n\n        if (maxWidth === void 0) {\n          maxWidth = Number.MAX_SAFE_INTEGER || Number.MAX_VALUE;\n        }\n\n        if (minHeight === void 0) {\n          minHeight = 0;\n        }\n\n        if (maxHeight === void 0) {\n          maxHeight = Number.MAX_SAFE_INTEGER || Number.MAX_VALUE;\n        }\n\n        if (!text) return new size_1.Size(Data_1.Data.byRange(initialSize.width, minWidth, maxWidth), Data_1.Data.byRange(initialSize.height, minHeight, maxHeight));\n        if (minWidth > maxWidth || minHeight > maxHeight) throw new Error(\"Min size cannot exceed max size\");\n        if (minWidth === maxWidth && minHeight === maxHeight) return new size_1.Size(minWidth, minHeight);\n        var measureResult = measurer.measureWords(text, style, owner);\n        var paragraphs = textToParagraphs(text);\n        var maxWordWidth = Object.keys(measureResult.words).reduce(function (acc, word) {\n          return Math.max(acc, measureResult.words[word].width);\n        }, 0);\n        var xRange = new Utils_1.Range(Data_1.Data.byRange(Math.max(initialSize.width, maxWordWidth), minWidth, maxWidth), maxWidth);\n        var yRange = new Utils_1.Range(Data_1.Data.byRange(initialSize.height, minHeight, maxHeight), maxHeight);\n        if (maxWordWidth <= initialSize.width && getTextHeight(paragraphs, initialSize.width, measureResult, false) <= initialSize.height && xRange.includes(initialSize.width) && yRange.includes(initialSize.height)) return initialSize;\n        var ratio = initialSize.width / initialSize.height;\n        return getOptimalTextRectangleCore(paragraphs, measureResult, ratio, xRange, yRange, keepRatio);\n      }\n\n      exports.getOptimalTextRectangle = getOptimalTextRectangle;\n\n      function getOptimalTextRectangleCore(paragraphs, measureResult, initRatio, xRange, yRange, incHeightToRatio) {\n        var _a;\n\n        var maxParagraphWidth = paragraphs.reduce(function (acc, val) {\n          return Math.max(acc, getTextLineSize(val, measureResult).width);\n        }, 0);\n        var size = new size_1.Size(0, 0);\n        var newSize = new size_1.Size(0, 0);\n        var newFitToHeight;\n        var deltaWidth = 0;\n        var error = 0;\n\n        for (var attempt = 0; attempt < 5; attempt++) {\n          if (attempt === 0) newSize.width = calcByFit(maxParagraphWidth, xRange)[0];else if (Math.abs(deltaWidth) > TEXTRECT_WIDTH_DIFF_EPS) newSize.width = calcByFit(size.width + deltaWidth, xRange)[0];else break;\n          _a = calcHeight(paragraphs, newSize.width, measureResult, yRange), newSize.height = _a[0], newFitToHeight = _a[1];\n\n          if (attempt === 0) {\n            size = newSize.clone();\n            error = size.width / size.height / initRatio;\n          }\n\n          if (attempt === 0 && !newFitToHeight) break;\n          var newRatio = newSize.width / newSize.height;\n          var newError = newRatio / initRatio;\n          if (attempt === 0) deltaWidth = (newSize.width / newError - newSize.width) / 2;else if (!newFitToHeight) deltaWidth /= 2;else if (!compareRatio(initRatio, newRatio, exports.TEXTRECT_RATIO_EPS)) {\n            size = newSize.clone();\n            error = newError;\n            break;\n          } else if (compareRatio(error, newError, 1) < 0) {\n            size = newSize.clone();\n            error = newError;\n            deltaWidth = (newSize.width / newError - newSize.width) / 2;\n            if (newError < 1) deltaWidth /= 2;\n          } else break;\n        }\n\n        if (incHeightToRatio) size.height = Data_1.Data.byRange(size.width / initRatio, size.height, yRange.to);\n        return size;\n      }\n\n      function compareRatio(a, b, eps) {\n        var an = a < 1 ? 1 / a : a;\n        var bn = b < 1 ? 1 / b : b;\n        var e = an / bn;\n        var en = e < 1 ? 1 / e : e;\n        return en <= eps ? 0 : bn > an ? 1 : -1;\n      }\n\n      function calcHeight(paragraphs, width, measureResult, yRange) {\n        var height = getTextHeight(paragraphs, width, measureResult, false);\n        return calcByFit(height, yRange);\n      }\n\n      function calcByFit(value, range) {\n        return [Data_1.Data.byRange(value, range.from, range.to), value <= range.to];\n      }\n\n      function getTextLineSize(text, measureResult) {\n        var words = textToWords(text);\n        return words.reduce(function (acc, word, index) {\n          var wordSize = measureResult.words[word];\n          acc.width += wordSize.width;\n          acc.height = Math.max(acc.height, wordSize.height);\n          if (index > 0) acc.width += measureResult.words[\" \"].width;\n          return acc;\n        }, new size_1.Size(0, 0));\n      }\n\n      exports.getTextLineSize = getTextLineSize;\n\n      function getTextHeight(textOrParagraphs, width, measureResult, emptyTextAsSingleLine) {\n        var paragraphs = Array.isArray(textOrParagraphs) ? textOrParagraphs : textToParagraphs(textOrParagraphs);\n        if (emptyTextAsSingleLine && (!paragraphs.length || paragraphs.length === 1 && !paragraphs[0].length)) return getLineHeight(measureResult);\n        return paragraphs.reduce(function (acc, line) {\n          return acc + wordsByLines(width, textToWords(line), function () {\n            return measureResult;\n          }).length;\n        }, 0) * getLineHeight(measureResult);\n      }\n\n      exports.getTextHeight = getTextHeight;\n\n      function getLineHeight(measureResult) {\n        return measureResult.fontSize * exports.LINE_HEIGHT;\n      }\n\n      exports.getLineHeight = getLineHeight;\n      /***/\n    },\n    /* 62 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.RightAngleConnectorRoutingMathOperations = void 0;\n\n      var point_1 = __webpack_require__(1);\n\n      var vector_1 = __webpack_require__(56);\n\n      var segment_1 = __webpack_require__(34);\n\n      var line_equation_1 = __webpack_require__(185);\n\n      var math_1 = __webpack_require__(33);\n\n      var AStarMetrics_1 = __webpack_require__(113);\n\n      var Utils_1 = __webpack_require__(3);\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      var RightAngleConnectorRoutingMathOperations =\n      /** @class */\n      function () {\n        function RightAngleConnectorRoutingMathOperations() {}\n\n        RightAngleConnectorRoutingMathOperations.createSegments = function (points) {\n          var result = [];\n\n          for (var i = 1; i < points.length; i++) {\n            result.push(new segment_1.Segment(points[i - 1], points[i]));\n          }\n\n          return result;\n        };\n\n        RightAngleConnectorRoutingMathOperations.createUnionSegments = function (segments, shouldCreateSegment) {\n          var result = [];\n          var startRenderPoint = segments[0].startPoint;\n          var endRenderPoint = segments[0].endPoint;\n\n          for (var i = 1; i < segments.length; i++) {\n            var currentSegment = segments[i];\n\n            if (shouldCreateSegment(endRenderPoint, currentSegment.startPoint)) {\n              result.push(new segment_1.Segment(startRenderPoint.clone(), endRenderPoint.clone()));\n              startRenderPoint = currentSegment.startPoint;\n            }\n\n            endRenderPoint = currentSegment.endPoint;\n          }\n\n          result.push(new segment_1.Segment(startRenderPoint, endRenderPoint));\n          return result;\n        };\n\n        RightAngleConnectorRoutingMathOperations.unionPoints = function (points) {\n          var index = 0;\n\n          while (index < points.length - 2) {\n            if (this.isCorner(points[index], points[index + 1], points[index + 2])) index++;else {\n              points.splice(index + 1, 1);\n              index = Math.max(0, index - 1);\n            }\n          }\n        };\n\n        RightAngleConnectorRoutingMathOperations.isCorner = function (p1, p2, p3) {\n          return !math_1.MathUtils.numberCloseTo(this.createAngle(p1, p2, p3), 0);\n        };\n\n        RightAngleConnectorRoutingMathOperations.createAngle = function (p1, p2, p3) {\n          var vector1 = vector_1.Vector.fromPoints(p2, p3);\n          var vector2 = vector_1.Vector.fromPoints(p1, p2);\n          var atan = Math.atan2(vector1.x * vector2.y - vector2.x * vector1.y, vector1.x * vector2.x + vector1.y * vector2.y);\n          return atan >= 0 ? atan : 2 * Math.PI + atan;\n        };\n\n        RightAngleConnectorRoutingMathOperations.getTurnDirection = function (angle) {\n          if (math_1.MathUtils.numberCloseTo(angle, 0)) return AStarMetrics_1.RightAngleTurnDirection.Straight;\n          if (math_1.MathUtils.numberCloseTo(angle, Math.PI)) return AStarMetrics_1.RightAngleTurnDirection.Backwards;\n          return angle < Math.PI ? AStarMetrics_1.RightAngleTurnDirection.Left : AStarMetrics_1.RightAngleTurnDirection.Right;\n        };\n\n        RightAngleConnectorRoutingMathOperations.createRectanlePolygonalChain = function (rect) {\n          var result = [];\n          var topLeft = new point_1.Point(rect.x, rect.y);\n          var topRight = new point_1.Point(rect.right, rect.y);\n          var bottomRight = new point_1.Point(rect.right, rect.bottom);\n          var bottomLeft = new point_1.Point(rect.x, rect.bottom);\n          result.push(new segment_1.Segment(topLeft, topRight));\n          result.push(new segment_1.Segment(topRight, bottomRight));\n          result.push(new segment_1.Segment(bottomRight, bottomLeft));\n          result.push(new segment_1.Segment(bottomLeft, topLeft));\n          return result;\n        };\n\n        RightAngleConnectorRoutingMathOperations.isLineIntersected = function (line, segment, excludeBeginPoint, excludeEndPoint) {\n          var intersection = line_equation_1.LineEquation.fromPoints(segment.startPoint, segment.endPoint).getIntersection(line);\n          if (!intersection || !segment.containsPoint(intersection)) return false;\n          if (excludeBeginPoint) return !segment.startPoint.equals(intersection);\n          if (excludeEndPoint) return !segment.endPoint.equals(intersection);\n          return true;\n        };\n\n        RightAngleConnectorRoutingMathOperations.isSegmentNormal = function (segment, isHorizontal) {\n          return isHorizontal ? segment.startPoint.y === segment.endPoint.y : segment.startPoint.x === segment.endPoint.x;\n        };\n\n        RightAngleConnectorRoutingMathOperations.isConnectionRectanleLineIntersected = function (rect, segment, side, excludeBeginPoint, excludeEndPoint, createPoint) {\n          switch (side) {\n            case DiagramItem_1.ConnectionPointSide.North:\n              return this.isLineIntersected(line_equation_1.LineEquation.fromPoints(createPoint(rect.x, rect.y), createPoint(rect.right, rect.y)), segment, excludeBeginPoint, excludeEndPoint);\n\n            case DiagramItem_1.ConnectionPointSide.South:\n              return this.isLineIntersected(line_equation_1.LineEquation.fromPoints(createPoint(rect.right, rect.bottom), createPoint(rect.x, rect.bottom)), segment, excludeBeginPoint, excludeEndPoint);\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              return this.isLineIntersected(line_equation_1.LineEquation.fromPoints(createPoint(rect.x, rect.y), createPoint(rect.x, rect.bottom)), segment, excludeBeginPoint, excludeEndPoint);\n\n            case DiagramItem_1.ConnectionPointSide.East:\n              return this.isLineIntersected(line_equation_1.LineEquation.fromPoints(createPoint(rect.right, rect.y), createPoint(rect.right, rect.bottom)), segment, excludeBeginPoint, excludeEndPoint);\n\n            default:\n              return false;\n          }\n        };\n\n        RightAngleConnectorRoutingMathOperations.isRectangleCut = function (segments, rect) {\n          if (!rect) return false;\n          var rectanlePolygonalChain = this.createRectanlePolygonalChain(rect);\n          var hasSegmentIn = false;\n          var hasSegmentOut = false;\n\n          var _loop_1 = function _loop_1(i) {\n            if (hasSegmentIn && hasSegmentOut) return {\n              value: true\n            };\n            var segment = segments[i];\n\n            if (segment.isIntersectedByRect(rect)) {\n              var startPoint_1 = segment.startPoint;\n              var endPoint_1 = segment.endPoint;\n              var currentContainsStart = rect.containsPoint(startPoint_1);\n              var currentContainsEnd = rect.containsPoint(endPoint_1);\n              if (!currentContainsStart && !currentContainsEnd) return {\n                value: true\n              };\n\n              if (currentContainsStart && !currentContainsEnd) {\n                var rectLinesContainsStart_1 = rectanlePolygonalChain.filter(function (s) {\n                  return s.containsPoint(startPoint_1);\n                });\n\n                if (rectLinesContainsStart_1.length > 0) {\n                  var otherRectSegments = rectanlePolygonalChain.filter(function (s) {\n                    if (rectLinesContainsStart_1.length === 1) return !s.containsPoint(rectLinesContainsStart_1[0].startPoint) && !s.containsPoint(rectLinesContainsStart_1[0].endPoint);\n                    return s !== rectLinesContainsStart_1[0] && s !== rectLinesContainsStart_1[1];\n                  });\n                  if (otherRectSegments.some(function (s) {\n                    return segment.isIntersected(s);\n                  }) && !hasSegmentIn) hasSegmentIn = true;\n                }\n\n                if (!hasSegmentOut) hasSegmentOut = true;\n                return \"continue\";\n              }\n\n              if (!currentContainsStart && currentContainsEnd) {\n                if (!hasSegmentIn) {\n                  hasSegmentIn = true;\n                  if (hasSegmentOut) hasSegmentOut = false;\n                }\n\n                var rectLinesContainsEnd_1 = rectanlePolygonalChain.filter(function (s) {\n                  return s.containsPoint(endPoint_1);\n                });\n\n                if (rectLinesContainsEnd_1.length > 0) {\n                  var otherRectSegments = rectanlePolygonalChain.filter(function (s) {\n                    if (rectLinesContainsEnd_1.length === 1) return !s.containsPoint(rectLinesContainsEnd_1[0].startPoint) && !s.containsPoint(rectLinesContainsEnd_1[0].endPoint);\n                    return s !== rectLinesContainsEnd_1[0] && s !== rectLinesContainsEnd_1[1];\n                  });\n                  if (otherRectSegments.some(function (s) {\n                    return segment.isIntersected(s);\n                  }) && !hasSegmentOut) hasSegmentOut = true;\n                }\n\n                return \"continue\";\n              }\n\n              var rectLinesContainsStart = rectanlePolygonalChain.filter(function (s) {\n                return s.containsPoint(startPoint_1);\n              });\n              var rectLinesContainsEnd = rectanlePolygonalChain.filter(function (s) {\n                return s.containsPoint(endPoint_1);\n              });\n              if (rectLinesContainsStart.length === 2 && rectLinesContainsEnd.length === 2) return {\n                value: true\n              };\n              if (rectLinesContainsStart.length === 1 && rectLinesContainsEnd.length === 1 && rectLinesContainsStart[0] !== rectLinesContainsEnd[0]) return {\n                value: true\n              };\n              if (!hasSegmentOut && rectLinesContainsEnd.length === 1 && !rectLinesContainsStart.length) hasSegmentOut = true;\n\n              if (!hasSegmentIn && rectLinesContainsStart.length === 1 && !rectLinesContainsEnd.length) {\n                hasSegmentIn = true;\n                if (hasSegmentOut) hasSegmentOut = false;\n              }\n            }\n          };\n\n          for (var i = 0; i < segments.length; i++) {\n            var state_1 = _loop_1(i);\n\n            if (typeof state_1 === \"object\") return state_1.value;\n          }\n\n          return hasSegmentIn && hasSegmentOut;\n        };\n\n        RightAngleConnectorRoutingMathOperations.createBeginConnectionSegment = function (beginConnectionSide, beginPoint, offset, createPoint) {\n          switch (beginConnectionSide) {\n            case DiagramItem_1.ConnectionPointSide.North:\n              return new segment_1.Segment(beginPoint, createPoint(beginPoint.x, beginPoint.y - offset));\n\n            case DiagramItem_1.ConnectionPointSide.South:\n              return new segment_1.Segment(beginPoint, createPoint(beginPoint.x, beginPoint.y + offset));\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              return new segment_1.Segment(beginPoint, createPoint(beginPoint.x - offset, beginPoint.y));\n\n            case DiagramItem_1.ConnectionPointSide.East:\n              return new segment_1.Segment(beginPoint, createPoint(beginPoint.x + offset, beginPoint.y));\n\n            default:\n              return beginPoint;\n          }\n        };\n\n        RightAngleConnectorRoutingMathOperations.createEndConnectionSegment = function (endConnectionSide, endPoint, offset, createPoint) {\n          switch (endConnectionSide) {\n            case DiagramItem_1.ConnectionPointSide.North:\n              return new segment_1.Segment(createPoint(endPoint.x, endPoint.y - offset), endPoint);\n\n            case DiagramItem_1.ConnectionPointSide.South:\n              return new segment_1.Segment(createPoint(endPoint.x, endPoint.y + offset), endPoint);\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              return new segment_1.Segment(createPoint(endPoint.x - offset, endPoint.y), endPoint);\n\n            case DiagramItem_1.ConnectionPointSide.East:\n              return new segment_1.Segment(createPoint(endPoint.x + offset, endPoint.y), endPoint);\n\n            default:\n              return endPoint;\n          }\n        };\n\n        RightAngleConnectorRoutingMathOperations.removeOrSkipUnnecessaryPoints = function (points) {\n          Utils_1.GeometryUtils.removeUnnecessaryLinePoints(points, function (pt, index) {\n            if (pt.pointIndex === -1) {\n              points.splice(index, 1);\n              return true;\n            } else {\n              pt.skipped = true;\n              return false;\n            }\n          }, function (pt) {\n            return pt !== undefined && !pt.skipped;\n          });\n        };\n\n        RightAngleConnectorRoutingMathOperations.skipUnnecessaryPoints = function (renderPoints) {\n          var skippedRenderPoints = renderPoints.map(function (p) {\n            return p.clone();\n          });\n          this.removeOrSkipUnnecessaryPoints(skippedRenderPoints);\n          renderPoints.forEach(function (p) {\n            return p.skipped = skippedRenderPoints.some(function (sp) {\n              return sp.equals(p) && sp.skipped;\n            });\n          });\n          renderPoints[0].skipped = false;\n          renderPoints[renderPoints.length - 1].skipped = false;\n        };\n\n        return RightAngleConnectorRoutingMathOperations;\n      }();\n\n      exports.RightAngleConnectorRoutingMathOperations = RightAngleConnectorRoutingMathOperations;\n      /***/\n    },\n    /* 63 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics24 = function extendStatics(d, b) {\n          _extendStatics24 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics24(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics24(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.AddConnectorHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var Connector_1 = __webpack_require__(7);\n\n      var AddConnectorHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(AddConnectorHistoryItem, _super);\n\n        function AddConnectorHistoryItem(points, dataKey, renderPointsContext) {\n          var _this = _super.call(this) || this;\n\n          _this.points = points;\n          _this.dataKey = dataKey;\n          _this.renderPointsContext = renderPointsContext;\n          return _this;\n        }\n\n        AddConnectorHistoryItem.prototype.redo = function (manipulator) {\n          var connector = new Connector_1.Connector(this.points);\n          if (this.dataKey !== undefined) connector.dataKey = this.dataKey;\n          if (this.renderPointsContext !== undefined) connector.replaceRenderPoints(this.renderPointsContext);\n          manipulator.addConnector(connector, this.connectorKey);\n          this.connectorKey = connector.key;\n        };\n\n        AddConnectorHistoryItem.prototype.undo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          manipulator.deleteConnector(connector);\n        };\n\n        return AddConnectorHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.AddConnectorHistoryItem = AddConnectorHistoryItem;\n      /***/\n    },\n    /* 64 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics25 = function extendStatics(d, b) {\n          _extendStatics25 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics25(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics25(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.DeleteConnectionHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var Connector_1 = __webpack_require__(7);\n\n      var DeleteConnectionHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(DeleteConnectionHistoryItem, _super);\n\n        function DeleteConnectionHistoryItem(connector, position) {\n          var _this = _super.call(this) || this;\n\n          _this.connectorKey = connector.key;\n          _this.position = position;\n          _this.itemKey = connector.getExtremeItem(_this.position).key;\n          return _this;\n        }\n\n        DeleteConnectionHistoryItem.prototype.redo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          this.oldConnectionPointIndex = this.position === Connector_1.ConnectorPosition.Begin ? connector.beginConnectionPointIndex : connector.endConnectionPointIndex;\n          manipulator.deleteConnection(connector, this.position);\n        };\n\n        DeleteConnectionHistoryItem.prototype.undo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          var item = manipulator.model.findItem(this.itemKey);\n          manipulator.addConnection(connector, item, this.oldConnectionPointIndex, this.position);\n        };\n\n        return DeleteConnectionHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.DeleteConnectionHistoryItem = DeleteConnectionHistoryItem;\n      /***/\n    },\n    /* 65 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics26 = function extendStatics(d, b) {\n          _extendStatics26 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics26(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics26(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.SetSelectionHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var SetSelectionHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(SetSelectionHistoryItem, _super);\n\n        function SetSelectionHistoryItem(selection, selectedKeys, forceChange) {\n          var _this = _super.call(this) || this;\n\n          _this.selectedKeys = selectedKeys;\n          _this.selection = selection;\n          _this.forceChange = forceChange;\n          return _this;\n        }\n\n        SetSelectionHistoryItem.prototype.redo = function () {\n          this.oldSelection = this.selection.getKeys().slice(0);\n          this.selection.set(this.selectedKeys, this.forceChange);\n        };\n\n        SetSelectionHistoryItem.prototype.undo = function () {\n          this.selection.set(this.oldSelection, this.forceChange);\n        };\n\n        return SetSelectionHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.SetSelectionHistoryItem = SetSelectionHistoryItem;\n      /***/\n    },\n    /* 66 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics27 = function extendStatics(d, b) {\n          _extendStatics27 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics27(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics27(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeConnectorTextHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var ChangeConnectorTextHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangeConnectorTextHistoryItem, _super);\n\n        function ChangeConnectorTextHistoryItem(connector, position, text) {\n          var _this = _super.call(this) || this;\n\n          _this.connectorKey = connector.key;\n          _this.text = text;\n          _this.position = position;\n          return _this;\n        }\n\n        ChangeConnectorTextHistoryItem.prototype.redo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          this.oldText = connector.getText(this.position);\n          manipulator.changeConnectorText(connector, this.text, this.position);\n        };\n\n        ChangeConnectorTextHistoryItem.prototype.undo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          manipulator.changeConnectorText(connector, this.oldText, this.position);\n        };\n\n        return ChangeConnectorTextHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ChangeConnectorTextHistoryItem = ChangeConnectorTextHistoryItem;\n      /***/\n    },\n    /* 67 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics28 = function extendStatics(d, b) {\n          _extendStatics28 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics28(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics28(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeStyleTextHistoryItem = void 0;\n\n      var ChangeStyleHistoryItemBase_1 = __webpack_require__(119);\n\n      var ChangeStyleTextHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangeStyleTextHistoryItem, _super);\n\n        function ChangeStyleTextHistoryItem(itemKey, styleProperty, styleValue) {\n          return _super.call(this, itemKey, styleProperty, styleValue) || this;\n        }\n\n        ChangeStyleTextHistoryItem.prototype.redo = function (manipulator) {\n          var item = manipulator.model.findItem(this.itemKey);\n          this.oldStyleValue = item.styleText[this.styleProperty];\n          manipulator.changeStyleText(item, this.styleProperty, this.styleValue);\n        };\n\n        ChangeStyleTextHistoryItem.prototype.undo = function (manipulator) {\n          var item = manipulator.model.findItem(this.itemKey);\n          manipulator.changeStyleText(item, this.styleProperty, this.oldStyleValue);\n        };\n\n        return ChangeStyleTextHistoryItem;\n      }(ChangeStyleHistoryItemBase_1.ChangeStyleHistoryItemBase);\n\n      exports.ChangeStyleTextHistoryItem = ChangeStyleTextHistoryItem;\n      /***/\n    },\n    /* 68 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics29 = function extendStatics(d, b) {\n          _extendStatics29 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics29(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics29(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.GraphIterator = exports.FastGraph = exports.Graph = void 0;\n\n      var Structures_1 = __webpack_require__(37);\n\n      var Shape_1 = __webpack_require__(14);\n\n      var search_1 = __webpack_require__(40);\n\n      var ListUtils_1 = __webpack_require__(90);\n\n      var GraphBase =\n      /** @class */\n      function () {\n        function GraphBase(nodes, edges) {\n          this.nodeMap = {};\n          this.edgeMap = {};\n          this.nodes = [];\n          this.edges = [];\n          this.onInit();\n          nodes.forEach(this.addNode.bind(this));\n          edges.forEach(this.addEdge.bind(this));\n        }\n\n        Object.defineProperty(GraphBase.prototype, \"items\", {\n          get: function get() {\n            return this.nodes.map(this.getNode.bind(this));\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        GraphBase.prototype.onInit = function () {};\n\n        GraphBase.prototype.addEdge = function (edge) {\n          this.edgeMap[edge.key] = edge;\n          this.edges.push(edge);\n        };\n\n        GraphBase.prototype.addNode = function (node) {\n          this.nodeMap[node.key] = node;\n          this.nodes.push(node.key);\n        };\n\n        GraphBase.prototype.getNode = function (key) {\n          return this.nodeMap[key];\n        };\n\n        GraphBase.prototype.getEdge = function (key) {\n          return this.edgeMap[key];\n        };\n\n        GraphBase.prototype.isEmpty = function () {\n          return !this.nodes.length && !this.edges.length;\n        };\n\n        GraphBase.prototype.getAdjacentEdges = function (nodeKey, connectionMode) {\n          if (connectionMode === void 0) {\n            connectionMode = Structures_1.ConnectionMode.OutgoingAndIncoming;\n          }\n\n          return this.edges.filter(function (e) {\n            return connectionMode & Structures_1.ConnectionMode.Incoming && e.to === nodeKey || connectionMode & Structures_1.ConnectionMode.Outgoing && e.from === nodeKey;\n          });\n        };\n\n        return GraphBase;\n      }();\n\n      var Graph =\n      /** @class */\n      function (_super) {\n        __extends(Graph, _super);\n\n        function Graph() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        Graph.prototype.cast = function (castNode, castEdge) {\n          var _this = this;\n\n          var newNodes = this.nodes.map(function (nk) {\n            return castNode(_this.getNode(nk));\n          });\n          var newEdges = this.edges.map(function (e) {\n            return castEdge ? castEdge(e) : e;\n          });\n          return new Graph(newNodes, newEdges);\n        };\n\n        Graph.prototype.getConnectedComponents = function () {\n          var iterator = this.createIterator(Structures_1.ConnectionMode.OutgoingAndIncoming);\n          iterator.visitEachEdgeOnce = true;\n          var components = [];\n\n          var _loop_1 = function _loop_1(i) {\n            var nodes = [];\n            var edges = [];\n\n            iterator.onNode = function (n) {\n              return nodes.push(n);\n            };\n\n            iterator.onEdge = function (e) {\n              return edges.push(e);\n            };\n\n            iterator.iterate(this_1.nodes[i]);\n            if (nodes.length) components.push(new Graph(nodes, edges));\n          };\n\n          var this_1 = this;\n\n          for (var i = 0; i < this.nodes.length; i++) {\n            _loop_1(i);\n          }\n\n          return components;\n        };\n\n        Graph.prototype.createIterator = function (connectionMode) {\n          var iterator = new GraphIterator(this, connectionMode);\n\n          iterator.comparer = function (a, b) {\n            return a.weight - b.weight;\n          };\n\n          return iterator;\n        };\n\n        Graph.prototype.getSpanningGraph = function (rootKey, connectionMode, edgeWeightFunc) {\n          var _this = this;\n\n          if (edgeWeightFunc === void 0) {\n            edgeWeightFunc = undefined;\n          }\n\n          if (!this.nodes.length) return new Graph([], []);\n          if (!edgeWeightFunc) edgeWeightFunc = function edgeWeightFunc(e) {\n            return e.weight;\n          };\n          var sortedAdjacentEdges = [];\n          var spanningTreeNodesSet = new ListUtils_1.HashSet();\n          var spanningTreeEdgesSet = new ListUtils_1.HashSet([], function (e) {\n            return e.getHashKey();\n          });\n          this.addNodeToSpanningGraph(rootKey, connectionMode, sortedAdjacentEdges, spanningTreeNodesSet, spanningTreeEdgesSet, edgeWeightFunc);\n\n          while (sortedAdjacentEdges.length && spanningTreeNodesSet.length !== this.nodes.length) {\n            var minWeighedEdge = sortedAdjacentEdges.shift();\n            spanningTreeEdgesSet.tryPush(minWeighedEdge);\n            var node = spanningTreeNodesSet.contains(minWeighedEdge.from) ? minWeighedEdge.to : minWeighedEdge.from;\n            this.addNodeToSpanningGraph(node, connectionMode, sortedAdjacentEdges, spanningTreeNodesSet, spanningTreeEdgesSet, edgeWeightFunc);\n            sortedAdjacentEdges = sortedAdjacentEdges.filter(function (e) {\n              return !spanningTreeNodesSet.contains(e.from) || !spanningTreeNodesSet.contains(e.to);\n            });\n          }\n\n          return new Graph(spanningTreeNodesSet.list().map(function (nk) {\n            return _this.getNode(nk);\n          }), spanningTreeEdgesSet.list());\n        };\n\n        Graph.prototype.addNodeToSpanningGraph = function (nodeKey, connectionMode, adjacentEdges, spanningTreeNodesSet, spanningTreeEdgesSet, edgeWeightFunc) {\n          spanningTreeNodesSet.tryPush(nodeKey);\n          this.getAdjacentEdges(nodeKey, connectionMode).filter(function (e) {\n            return !spanningTreeEdgesSet.contains(e);\n          }).forEach(function (e) {\n            var weight = edgeWeightFunc(e);\n            var pos = search_1.SearchUtils.binaryIndexOf(adjacentEdges, function (a) {\n              return a.weight - weight;\n            });\n            pos = pos < 0 ? ~pos : pos;\n\n            while (pos < adjacentEdges.length && edgeWeightFunc(adjacentEdges[pos]) === weight) {\n              pos++;\n            }\n\n            adjacentEdges.splice(pos, 0, new Structures_1.Edge(e.key, e.from, e.to, weight));\n          });\n        };\n\n        Graph.create = function (shapes, connectors) {\n          var nodes = shapes;\n          var edges = connectors.filter(function (i) {\n            return i.beginItem && i.endItem instanceof Shape_1.Shape && i.endItem && i.endItem instanceof Shape_1.Shape && i.beginItem !== i.endItem;\n          }) // TBD: ShapeItem?\n          .map(function (i) {\n            return new Structures_1.Edge(i.key, i.beginItem && i.beginItem.key, i.endItem && i.endItem.key);\n          });\n          return new Graph(nodes, edges);\n        };\n\n        return Graph;\n      }(GraphBase);\n\n      exports.Graph = Graph;\n\n      var FastGraph =\n      /** @class */\n      function (_super) {\n        __extends(FastGraph, _super);\n\n        function FastGraph() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        FastGraph.prototype.onInit = function () {\n          this.parentToChildren = {};\n          this.childToParents = {};\n        };\n\n        FastGraph.prototype.addEdge = function (edge) {\n          _super.prototype.addEdge.call(this, edge);\n\n          (this.parentToChildren[edge.from] || (this.parentToChildren[edge.from] = [])).push(edge.to);\n          (this.childToParents[edge.to] || (this.childToParents[edge.to] = [])).push(edge.from);\n        };\n\n        FastGraph.prototype.getChildren = function (parent) {\n          return this.parentToChildren[parent] || [];\n        };\n\n        FastGraph.prototype.getParents = function (child) {\n          return this.childToParents[child] || [];\n        };\n\n        FastGraph.prototype.createIterator = function (connectionMode) {\n          return new GraphIterator(this, connectionMode);\n        };\n\n        return FastGraph;\n      }(GraphBase);\n\n      exports.FastGraph = FastGraph;\n\n      var GraphIterator =\n      /** @class */\n      function () {\n        function GraphIterator(graph, connectionMode) {\n          if (connectionMode === void 0) {\n            connectionMode = Structures_1.ConnectionMode.OutgoingAndIncoming;\n          }\n\n          this.graph = graph;\n          this.connectionMode = connectionMode;\n          this.visitEachEdgeOnce = true;\n          this.visitEachNodeOnce = true;\n          this.visitedNodes = {};\n          this.visitedEdges = {};\n        }\n\n        GraphIterator.prototype.iterate = function (nodeKey) {\n          if (!this.visitEachNodeOnce && !this.visitEachEdgeOnce && !this.skipNode) throw \"skipNode or visitEachNodeOnce or visitEachEdgeOnce must be set to avoid SOF\";\n          this.iterateCore(nodeKey);\n        };\n\n        GraphIterator.prototype.iterateCore = function (nodeKey) {\n          var _this = this;\n\n          var node = this.graph.getNode(nodeKey);\n          if (!node || this.skipNode && this.skipNode(node) || this.visitEachNodeOnce && this.isNodeVisited(nodeKey)) return;\n          this.visitedNodes[nodeKey] = true;\n          this.onNode && this.onNode(node);\n          var edges = this.graph.getAdjacentEdges(nodeKey, this.connectionMode);\n          if (this.skipEdge) edges = edges.filter(function (e) {\n            return !_this.skipEdge(e);\n          });\n\n          if (this.connectionMode & Structures_1.ConnectionMode.Outgoing) {\n            var outgoing = edges.filter(function (e) {\n              return e.from === nodeKey;\n            });\n            if (this.comparer) outgoing.sort(this.comparer);\n            outgoing.forEach(function (e) {\n              if (_this.visitEachEdgeOnce && _this.visitedEdges[e.key]) return;\n              _this.visitedEdges[e.key] = true;\n              _this.onEdge && _this.onEdge(e, true);\n\n              _this.iterateCore(e.to);\n\n              _this.onAfterEdge && _this.onAfterEdge(e, true);\n            });\n          }\n\n          this.onAllEdges && this.onAllEdges(node, true);\n\n          if (this.connectionMode & Structures_1.ConnectionMode.Incoming) {\n            var incoming = edges.filter(function (e) {\n              return e.to === nodeKey;\n            });\n            if (this.comparer) incoming.sort(this.comparer);\n            incoming.forEach(function (e) {\n              if (_this.visitEachEdgeOnce && _this.visitedEdges[e.key]) return;\n              _this.visitedEdges[e.key] = true;\n              _this.onEdge && _this.onEdge(e, false);\n\n              _this.iterateCore(e.from);\n\n              _this.onAfterEdge && _this.onAfterEdge(e, false);\n            });\n          }\n\n          this.onAllEdges && this.onAllEdges(node, false);\n        };\n\n        GraphIterator.prototype.isNodeVisited = function (nodeKey) {\n          return !!this.visitedNodes[nodeKey];\n        };\n\n        GraphIterator.prototype.isEdgeVisited = function (edgeKey) {\n          return !!this.visitedEdges[edgeKey];\n        };\n\n        return GraphIterator;\n      }();\n\n      exports.GraphIterator = GraphIterator;\n      /***/\n    },\n    /* 69 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Margin = exports.EdgeLayout = exports.NodeLayout = exports.NodeInfo = void 0;\n\n      var rectangle_1 = __webpack_require__(13);\n\n      var NodeInfo =\n      /** @class */\n      function () {\n        function NodeInfo(key, margin, size, connectionPoints) {\n          if (connectionPoints === void 0) {\n            connectionPoints = [];\n          }\n\n          this.key = key;\n          this.margin = margin;\n          this.size = size;\n          this.connectionPoints = connectionPoints;\n        }\n\n        return NodeInfo;\n      }();\n\n      exports.NodeInfo = NodeInfo;\n\n      var NodeLayout =\n      /** @class */\n      function () {\n        function NodeLayout(info, position) {\n          this.info = info;\n          this.position = position;\n        }\n\n        Object.defineProperty(NodeLayout.prototype, \"key\", {\n          get: function get() {\n            return this.info.key;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(NodeLayout.prototype, \"rectangle\", {\n          get: function get() {\n            return rectangle_1.Rectangle.fromGeometry(this.position, this.info.size);\n          },\n          enumerable: false,\n          configurable: true\n        });\n        return NodeLayout;\n      }();\n\n      exports.NodeLayout = NodeLayout;\n\n      var EdgeLayout =\n      /** @class */\n      function () {\n        function EdgeLayout(key, beginIndex, endIndex) {\n          this.key = key;\n          this.beginIndex = beginIndex;\n          this.endIndex = endIndex;\n        }\n\n        return EdgeLayout;\n      }();\n\n      exports.EdgeLayout = EdgeLayout;\n\n      var Margin =\n      /** @class */\n      function () {\n        function Margin(top, right, bottom, left) {\n          if (right === void 0) {\n            right = top;\n          }\n\n          if (bottom === void 0) {\n            bottom = top;\n          }\n\n          if (left === void 0) {\n            left = top;\n          }\n\n          this.top = top;\n          this.right = right;\n          this.bottom = bottom;\n          this.left = left;\n        }\n\n        Margin.empty = function () {\n          return new Margin(0);\n        };\n\n        return Margin;\n      }();\n\n      exports.Margin = Margin;\n      /***/\n    },\n    /* 70 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics30 = function extendStatics(d, b) {\n          _extendStatics30 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics30(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics30(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.EllipseShapeDescription = void 0;\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var size_1 = __webpack_require__(2);\n\n      var EllipsePrimitive_1 = __webpack_require__(52);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var Utils_1 = __webpack_require__(3);\n\n      var rectangle_1 = __webpack_require__(13);\n\n      var EllipseShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(EllipseShapeDescription, _super);\n\n        function EllipseShapeDescription(hasDefaultText) {\n          return _super.call(this, new size_1.Size(ShapeDescription_1.ShapeDefaultDimension, ShapeDescription_1.ShapeDefaultDimension * 0.75), hasDefaultText) || this;\n        }\n\n        Object.defineProperty(EllipseShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Ellipse;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(EllipseShapeDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        EllipseShapeDescription.prototype.getTextRectangle = function (shape) {\n          var textSize = Utils_1.GeometryUtils.getMaxRectangleEnscribedInEllipse(shape.size);\n          return rectangle_1.Rectangle.fromGeometry(shape.position.clone().offset((shape.size.width - textSize.width) / 2, (shape.size.height - textSize.height) / 2), textSize);\n        };\n\n        EllipseShapeDescription.prototype.getSizeByText = function (textSize, _shape) {\n          return Utils_1.GeometryUtils.getEllipseByEnscribedRectangle(textSize);\n        };\n\n        EllipseShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var width = rect.width,\n              height = rect.height;\n          var _a = rect.center,\n              cx = _a.x,\n              cy = _a.y;\n          return [new EllipsePrimitive_1.EllipsePrimitive(cx, cy, width / 2, height / 2, shape.style)];\n        };\n\n        return EllipseShapeDescription;\n      }(ShapeDescription_1.ShapeDescription);\n\n      exports.EllipseShapeDescription = EllipseShapeDescription;\n      /***/\n    },\n    /* 71 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Exporter = void 0;\n\n      var Shape_1 = __webpack_require__(14);\n\n      var Connector_1 = __webpack_require__(7);\n\n      var Utils_1 = __webpack_require__(3);\n\n      var Exporter =\n      /** @class */\n      function () {\n        function Exporter() {}\n\n        Exporter.prototype.export = function (model) {\n          var obj = {\n            page: {},\n            connectors: [],\n            shapes: []\n          };\n          obj.page = {\n            \"width\": model.size.width,\n            \"height\": model.size.height,\n            \"pageColor\": model.pageColor,\n            \"pageWidth\": model.pageSize.width,\n            \"pageHeight\": model.pageSize.height,\n            \"pageLandscape\": model.pageLandscape\n          };\n          this.exportItemsCore(model.items, obj);\n          return JSON.stringify(obj);\n        };\n\n        Exporter.prototype.exportItems = function (items) {\n          var obj = {\n            connectors: [],\n            shapes: []\n          };\n          this.exportItemsCore(items, obj);\n          return JSON.stringify(obj);\n        };\n\n        Exporter.prototype.exportItemsCore = function (items, obj) {\n          var _this = this;\n\n          items.forEach(function (item) {\n            if (item instanceof Shape_1.Shape) obj.shapes.push(_this.exportShape(item));else if (item instanceof Connector_1.Connector) {\n              var connectorObj = _this.exportConnector(item);\n\n              if (item.beginItem) {\n                connectorObj[\"beginItemKey\"] = item.beginItem.key;\n                connectorObj[\"beginConnectionPointIndex\"] = item.beginConnectionPointIndex;\n              }\n\n              if (item.endItem) {\n                connectorObj[\"endItemKey\"] = item.endItem.key;\n                connectorObj[\"endConnectionPointIndex\"] = item.endConnectionPointIndex;\n              }\n\n              obj.connectors.push(connectorObj);\n            }\n          });\n        };\n\n        Exporter.prototype.exportItem = function (item) {\n          return {\n            \"key\": item.key,\n            \"dataKey\": item.dataKey,\n            \"customData\": Utils_1.ObjectUtils.cloneObject(item.customData),\n            \"locked\": item.locked,\n            \"zIndex\": item.zIndex\n          };\n        };\n\n        Exporter.prototype.exportShape = function (shape) {\n          var result = this.exportItem(shape);\n          result[\"type\"] = shape.description.key;\n          result[\"text\"] = shape.text;\n          if (!shape.image.isEmpty) result[\"imageUrl\"] = shape.image.exportUrl;\n          result[\"x\"] = shape.position.x;\n          result[\"y\"] = shape.position.y;\n          result[\"width\"] = shape.size.width;\n          result[\"height\"] = shape.size.height;\n          var paramsObj = shape.parameters.toObject();\n          if (paramsObj) result[\"parameters\"] = paramsObj;\n          var styleObj = shape.style.toObject();\n          if (styleObj) result[\"style\"] = styleObj;\n          var styleTextObj = shape.styleText.toObject();\n          if (styleTextObj) result[\"styleText\"] = styleTextObj;\n          if (shape.children.length) result[\"childKeys\"] = shape.children.map(function (child) {\n            return child.key;\n          });\n          if (!shape.expanded) result[\"expanded\"] = false;\n\n          if (shape.expandedSize) {\n            result[\"expandedWidth\"] = shape.expandedSize.width;\n            result[\"expandedHeight\"] = shape.expandedSize.height;\n          }\n\n          return result;\n        };\n\n        Exporter.prototype.exportConnector = function (connector) {\n          var result = this.exportItem(connector);\n          result[\"points\"] = connector.points.map(function (p) {\n            return {\n              \"x\": p.x,\n              \"y\": p.y\n            };\n          });\n          var textObj = connector.texts.toObject();\n          if (textObj) result[\"texts\"] = textObj;\n          var propsObj = connector.properties.toObject();\n          if (propsObj) result[\"properties\"] = propsObj;\n          var styleObj = connector.style.toObject();\n          if (styleObj) result[\"style\"] = styleObj;\n          var styleTextObj = connector.styleText.toObject();\n          if (styleTextObj) result[\"styleText\"] = styleTextObj;\n          return result;\n        }; // Images\n\n\n        Exporter.prototype.exportSvg = function (modelSize, pageColor, exportManager, callback) {\n          exportManager.exportSvgImage(modelSize, pageColor, callback);\n        };\n\n        Exporter.prototype.exportPng = function (modelSize, pageColor, exportManager, callback) {\n          exportManager.exportPngImage(modelSize, pageColor, callback);\n        };\n\n        Exporter.prototype.exportJpg = function (modelSize, pageColor, exportManager, callback) {\n          exportManager.exportJpgImage(modelSize, pageColor, callback);\n        };\n\n        return Exporter;\n      }();\n\n      exports.Exporter = Exporter;\n      /***/\n    },\n    /* 72 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics31 = function extendStatics(d, b) {\n          _extendStatics31 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics31(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics31(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ToggleStyleTextPropertyCommand = void 0;\n\n      var StylePropertyCommandBase_1 = __webpack_require__(135);\n\n      var ChangeStyleTextHistoryItem_1 = __webpack_require__(67);\n\n      var Style_1 = __webpack_require__(30);\n\n      var ToggleStyleTextPropertyCommand =\n      /** @class */\n      function (_super) {\n        __extends(ToggleStyleTextPropertyCommand, _super);\n\n        function ToggleStyleTextPropertyCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ToggleStyleTextPropertyCommand.prototype.getValue = function () {\n          var value = this.control.selection.inputPosition.getCurrentTextStylePropertyValue(this.getStyleProperty());\n          return value === this.getStylePropertyValue();\n        };\n\n        ToggleStyleTextPropertyCommand.prototype.executeCore = function (state) {\n          var _this = this;\n\n          this.control.history.beginTransaction();\n          var styleProperty = this.getStyleProperty();\n          var styleValue = state.value ? Style_1.TextStyle.defaultInstance[styleProperty] : this.getStylePropertyValue();\n          var items = this.control.selection.getSelectedItems();\n          items.forEach(function (item) {\n            _this.control.history.addAndRedo(new ChangeStyleTextHistoryItem_1.ChangeStyleTextHistoryItem(item.key, styleProperty, styleValue));\n          });\n          this.control.selection.inputPosition.setTextStylePropertyValue(this.getStyleProperty(), styleValue);\n          this.control.history.endTransaction();\n          return true;\n        };\n\n        ToggleStyleTextPropertyCommand.prototype.getStyleObj = function (item) {\n          return item.styleText;\n        };\n\n        ToggleStyleTextPropertyCommand.prototype.getDefaultStyleObj = function () {\n          return new Style_1.TextStyle();\n        };\n\n        return ToggleStyleTextPropertyCommand;\n      }(StylePropertyCommandBase_1.StylePropertyCommandBase);\n\n      exports.ToggleStyleTextPropertyCommand = ToggleStyleTextPropertyCommand;\n      /***/\n    },\n    /* 73 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics32 = function extendStatics(d, b) {\n          _extendStatics32 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics32(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics32(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeStylePropertyCommand = void 0;\n\n      var ChangeStylePropertyCommandBase_1 = __webpack_require__(136);\n\n      var ChangeStyleHistoryItem_1 = __webpack_require__(89);\n\n      var Style_1 = __webpack_require__(30);\n\n      var ChangeStylePropertyCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeStylePropertyCommand, _super);\n\n        function ChangeStylePropertyCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeStylePropertyCommand.prototype.getValue = function () {\n          return this.control.selection.inputPosition.getCurrentStylePropertyValue(this.getStyleProperty());\n        };\n\n        ChangeStylePropertyCommand.prototype.getStyleObj = function (item) {\n          return item.style;\n        };\n\n        ChangeStylePropertyCommand.prototype.getDefaultStyleObj = function () {\n          return new Style_1.Style();\n        };\n\n        ChangeStylePropertyCommand.prototype.createHistoryItem = function (item, styleProperty, styleValue) {\n          return new ChangeStyleHistoryItem_1.ChangeStyleHistoryItem(item.key, styleProperty, styleValue);\n        };\n\n        ChangeStylePropertyCommand.prototype.updateInputPosition = function (value) {\n          this.control.selection.inputPosition.setStylePropertyValue(this.getStyleProperty(), value);\n        };\n\n        return ChangeStylePropertyCommand;\n      }(ChangeStylePropertyCommandBase_1.ChangeStylePropertyCommandBase);\n\n      exports.ChangeStylePropertyCommand = ChangeStylePropertyCommand;\n      /***/\n    },\n    /* 74 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics33 = function extendStatics(d, b) {\n          _extendStatics33 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics33(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics33(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.AutoLayoutCommandBase = void 0;\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var SimpleCommandBase_1 = __webpack_require__(10);\n\n      var Shape_1 = __webpack_require__(14);\n\n      var Connector_1 = __webpack_require__(7);\n\n      var Utils_1 = __webpack_require__(3);\n\n      var rectangle_1 = __webpack_require__(13);\n\n      var ScrollIntoViewHistoryItem_1 = __webpack_require__(252);\n\n      var AutoLayoutCommandBase =\n      /** @class */\n      function (_super) {\n        __extends(AutoLayoutCommandBase, _super);\n\n        function AutoLayoutCommandBase() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        AutoLayoutCommandBase.prototype.executeCore = function (state, parameter) {\n          var _this = this;\n\n          this.control.history.beginTransaction();\n          var shapes = this.getAffectedShapes();\n          var connectors = this.getAffectedConnectors();\n          var settings = this.createLayoutSettings();\n          var graphInfo = ModelUtils_1.ModelUtils.getGraphInfoByItems(this.control.model, shapes, connectors, false);\n\n          if (graphInfo.length) {\n            var rectangle_2;\n            var model_1 = this.control.model;\n            var commonRect = Utils_1.GeometryUtils.getCommonRectangle(Utils_1.Utils.flatten(graphInfo.map(function (g) {\n              return g.graph.items.map(function (i) {\n                return model_1.findItem(i.key);\n              });\n            })).concat(graphInfo.map(function (g) {\n              return g.container;\n            })).filter(function (i) {\n              return i;\n            }).map(function (i) {\n              return i.rectangle;\n            }));\n            this.control.history.addAndRedo(new ScrollIntoViewHistoryItem_1.ScrollIntoViewOnUndoHistoryItem(this.control.view, commonRect));\n            graphInfo.forEach(function (info) {\n              var layout = _this.createLayout(settings, info.graph);\n\n              var nonGraphItems = ModelUtils_1.ModelUtils.getNonGraphItems(_this.control.model, info.container, layout.nodeToLayout, shapes, connectors);\n              var layoutRect = ModelUtils_1.ModelUtils.applyLayout(_this.control.history, _this.control.model, info.container, info.graph, layout, nonGraphItems, settings, _this.control.settings.snapToGrid, _this.control.settings.gridSize, false);\n              rectangle_2 = rectangle_2 && rectangle_1.Rectangle.union(rectangle_2, layoutRect) || layoutRect;\n            });\n            ModelUtils_1.ModelUtils.tryUpdateModelRectangle(this.control.history);\n            this.control.history.addAndRedo(new ScrollIntoViewHistoryItem_1.ScrollIntoViewOnRedoHistoryItem(this.control.view, rectangle_2));\n          }\n\n          this.control.history.endTransaction();\n          return true;\n        };\n\n        AutoLayoutCommandBase.prototype.getAffectedShapes = function () {\n          return this.control.selection.isEmpty() ? this.control.model.items.filter(function (i) {\n            return i instanceof Shape_1.Shape && !i.locked;\n          }) : this.control.selection.getSelectedShapes(false, true);\n        };\n\n        AutoLayoutCommandBase.prototype.getAffectedConnectors = function () {\n          return this.control.selection.isEmpty() ? this.control.model.items.filter(function (i) {\n            return i instanceof Connector_1.Connector && !i.locked;\n          }) : this.control.selection.getSelectedConnectors(false, true);\n        };\n\n        return AutoLayoutCommandBase;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.AutoLayoutCommandBase = AutoLayoutCommandBase;\n      /***/\n    },\n    /* 75 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics34 = function extendStatics(d, b) {\n          _extendStatics34 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics34(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics34(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangePagePropertyCommand = void 0;\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var SimpleCommandBase_1 = __webpack_require__(10);\n\n      var ChangePagePropertyCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangePagePropertyCommand, _super);\n\n        function ChangePagePropertyCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangePagePropertyCommand.prototype.executeCore = function (state, parameter) {\n          var _this = this;\n\n          this.control.history.beginTransaction();\n          var items = this.createHistoryItems(parameter);\n          items.forEach(function (item) {\n            _this.control.history.addAndRedo(item);\n          });\n          ModelUtils_1.ModelUtils.tryUpdateModelRectangle(this.control.history);\n          this.control.history.endTransaction();\n          return true;\n        };\n\n        ChangePagePropertyCommand.prototype.getItems = function () {\n          return null;\n        };\n\n        return ChangePagePropertyCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ChangePagePropertyCommand = ChangePagePropertyCommand;\n      /***/\n    },\n    /* 76 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics35 = function extendStatics(d, b) {\n          _extendStatics35 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics35(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics35(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.CanvasItemsManager = exports.CONNECTOR_CAN_MOVE = exports.NOT_VALID_CSSCLASS = void 0;\n\n      var ModelChange_1 = __webpack_require__(99);\n\n      var Event_1 = __webpack_require__(11);\n\n      var GroupPrimitive_1 = __webpack_require__(38);\n\n      var Utils_1 = __webpack_require__(18);\n\n      var Shape_1 = __webpack_require__(14);\n\n      var Connector_1 = __webpack_require__(7);\n\n      var dom_1 = __webpack_require__(26);\n\n      var CanvasManager_1 = __webpack_require__(141);\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      exports.NOT_VALID_CSSCLASS = \"not-valid\";\n      exports.CONNECTOR_CAN_MOVE = \"can-move\";\n\n      var CanvasItemsManager =\n      /** @class */\n      function (_super) {\n        __extends(CanvasItemsManager, _super);\n\n        function CanvasItemsManager(viewElement, zoomLevel, dom) {\n          var _this = _super.call(this, zoomLevel, dom) || this;\n\n          _this.itemSelectorGroupContainers = {};\n          _this.itemSelectorElements = {};\n          _this.itemGroupContainers = {};\n          _this.itemElements = {};\n          _this.itemChildElements = {};\n          _this.primitives = {};\n          _this.selectorPrimitives = {};\n          _this.selectedItems = {};\n\n          _this.initializeContainerElements(viewElement);\n\n          return _this;\n        }\n\n        CanvasItemsManager.prototype.initializeContainerElements = function (view) {\n          this.itemSelectorsContainer = this.createAndChangePrimitiveElement(new GroupPrimitive_1.GroupPrimitive([], null), view);\n          this.itemsContainer = this.createAndChangePrimitiveElement(new GroupPrimitive_1.GroupPrimitive([], null), view);\n        };\n\n        CanvasItemsManager.prototype.clear = function () {\n          this.primitives = {};\n          this.selectorPrimitives = {};\n          Utils_1.RenderUtils.removeContent(this.itemSelectorsContainer);\n          Utils_1.RenderUtils.removeContent(this.itemsContainer);\n          this.itemSelectorGroupContainers = {};\n          this.itemSelectorElements = {};\n          this.itemGroupContainers = {};\n          this.itemElements = {};\n          this.itemChildElements = {};\n          this.selectedItems = {};\n        };\n\n        CanvasItemsManager.prototype.applyChange = function (change) {\n          var item = change.item;\n          var itemParent = this.getItemParent(item.zIndex, item.container && item.container.key);\n          if (!itemParent) return false;\n          if (item instanceof Shape_1.Shape) this.applyShapeChange(item, change.type, change.isValid);else if (item instanceof Connector_1.Connector) this.applyConnectorChange(item, change.type, change.isValid);\n          return true;\n        }; // Notifications\n\n\n        CanvasItemsManager.prototype.setPointerEventsNone = function (element, value) {\n          var style = element.style;\n          if (style !== undefined && style.pointerEvents !== undefined) style.pointerEvents = value ? \"none\" : \"\";\n          var childNodes = element.childNodes;\n\n          for (var i = 0; i < childNodes.length; i++) {\n            this.setPointerEventsNone(childNodes[i], value);\n          }\n        };\n\n        CanvasItemsManager.prototype.notifyDragStart = function (itemKeys) {\n          var _this = this;\n\n          itemKeys.forEach(function (itemKey) {\n            if (_this.itemElements[itemKey]) _this.setPointerEventsNone(_this.itemElements[itemKey], true);\n            if (_this.itemChildElements[itemKey]) _this.setPointerEventsNone(_this.itemChildElements[itemKey], true);\n            if (_this.itemSelectorElements[itemKey]) _this.setPointerEventsNone(_this.itemSelectorElements[itemKey], true);\n          });\n        };\n\n        CanvasItemsManager.prototype.notifyDragEnd = function (itemKeys) {\n          var _this = this;\n\n          itemKeys.forEach(function (itemKey) {\n            if (_this.itemElements[itemKey]) _this.setPointerEventsNone(_this.itemElements[itemKey], false);\n            if (_this.itemChildElements[itemKey]) _this.setPointerEventsNone(_this.itemChildElements[itemKey], false);\n            if (_this.itemSelectorElements[itemKey]) _this.setPointerEventsNone(_this.itemSelectorElements[itemKey], false);\n          });\n        };\n\n        CanvasItemsManager.prototype.notifyDragScrollStart = function () {};\n\n        CanvasItemsManager.prototype.notifyDragScrollEnd = function () {};\n\n        CanvasItemsManager.prototype.notifyTextInputStart = function (item, text, position, size) {\n          var element = this.itemElements[item.key];\n          dom_1.DomUtils.addClassName(element, \"text-input\");\n        };\n\n        CanvasItemsManager.prototype.notifyTextInputEnd = function (item) {\n          var element = this.itemElements[item.key];\n          dom_1.DomUtils.removeClassName(element, \"text-input\");\n        };\n\n        CanvasItemsManager.prototype.notifyTextInputPermissionsCheck = function (item, allowed) {\n          var element = this.itemElements[item.key];\n          if (allowed) dom_1.DomUtils.removeClassName(element, exports.NOT_VALID_CSSCLASS);else dom_1.DomUtils.addClassName(element, exports.NOT_VALID_CSSCLASS);\n        };\n\n        CanvasItemsManager.prototype.notifyActualZoomChanged = function (actualZoom) {\n          var scale = \"scale(\" + actualZoom + \")\";\n          this.dom.changeByFunc(this.itemsContainer, function (e) {\n            return e.setAttribute(\"transform\", scale);\n          });\n          this.dom.changeByFunc(this.itemSelectorsContainer, function (e) {\n            return e.setAttribute(\"transform\", scale);\n          });\n          this.actualZoom = actualZoom;\n        };\n\n        CanvasItemsManager.prototype.notifyViewAdjusted = function (canvasOffset) {}; // Primitives\n\n\n        CanvasItemsManager.prototype.invalidatePrimitives = function (item) {\n          if (this.primitives[item.key]) {\n            this.primitives[item.key].forEach(function (primitive) {\n              primitive.dispose();\n            });\n            delete this.primitives[item.key];\n          }\n\n          if (this.selectorPrimitives[item.key]) {\n            this.selectorPrimitives[item.key].forEach(function (primitive) {\n              primitive.dispose();\n            });\n            delete this.selectorPrimitives[item.key];\n          }\n        };\n\n        CanvasItemsManager.prototype.getPrimitives = function (item) {\n          if (!this.primitives[item.key]) this.primitives[item.key] = item.createPrimitives();\n          return this.primitives[item.key];\n        };\n\n        CanvasItemsManager.prototype.getSelectorPrimitives = function (item) {\n          if (!this.selectorPrimitives[item.key]) this.selectorPrimitives[item.key] = item.createSelectorPrimitives();\n          return this.selectorPrimitives[item.key];\n        }; // Drawing\n\n\n        CanvasItemsManager.prototype.getShapeSelectorClassName = function (shape) {\n          var className = \"shape\";\n          if (shape.enableChildren) className += \" container\";\n          if (shape.isLocked) className += \" locked\";\n          return className;\n        };\n\n        CanvasItemsManager.prototype.getShapeClassName = function (shape, isValid) {\n          var selectorClassName = this.getShapeSelectorClassName(shape);\n          return isValid ? selectorClassName : selectorClassName + \" \" + exports.NOT_VALID_CSSCLASS;\n        };\n\n        CanvasItemsManager.prototype.applyShapeChange = function (shape, type, isValid) {\n          var key = shape.key;\n          var containerKey = shape.container && shape.container.key;\n          var itemSelectorParent = this.getItemSelectorGroupContainer(shape.zIndex, containerKey);\n          var itemParent = this.getItemGroupContainer(shape.zIndex, containerKey);\n          var itemClassName = this.getShapeClassName(shape, isValid);\n\n          switch (type) {\n            case ModelChange_1.ItemChangeType.Create:\n              this.itemSelectorElements[key] = this.createItemElements(key, this.getSelectorPrimitives(shape), itemSelectorParent, this.getShapeSelectorClassName(shape), Event_1.MouseEventElementType.Shape);\n              this.itemElements[key] = this.createItemElements(key, this.getPrimitives(shape), itemParent, itemClassName, Event_1.MouseEventElementType.Shape);\n\n              if (shape.enableChildren) {\n                this.itemChildElements[key] = this.createItemElements(key, [], itemParent, \"container-children\", Event_1.MouseEventElementType.Undefined);\n                this.changeItemChildrenVisibility(this.itemChildElements[key], shape.expanded);\n              }\n\n              break;\n\n            case ModelChange_1.ItemChangeType.Remove:\n              this.removeItemCustomContent(this.itemSelectorElements[key], this.getSelectorPrimitives(shape));\n              this.removeItemCustomContent(this.itemElements[key], this.getPrimitives(shape));\n              this.invalidatePrimitives(shape);\n              this.removeItemElements(this.itemSelectorElements[key]);\n              delete this.itemSelectorElements[key];\n              this.removeItemElements(this.itemElements[key]);\n              delete this.itemElements[key];\n\n              if (this.itemChildElements[key]) {\n                this.removeItemElements(this.itemChildElements[key]);\n                delete this.itemChildElements[key];\n                delete this.itemGroupContainers[key];\n                delete this.itemSelectorGroupContainers[key];\n              }\n\n              break;\n\n            case ModelChange_1.ItemChangeType.UpdateStructure:\n            case ModelChange_1.ItemChangeType.UpdateProperties:\n            case ModelChange_1.ItemChangeType.Update:\n              if (type !== ModelChange_1.ItemChangeType.Update) {\n                if (type === ModelChange_1.ItemChangeType.UpdateStructure) {\n                  this.removeItemCustomContent(this.itemSelectorElements[key], this.getSelectorPrimitives(shape));\n                  this.removeItemCustomContent(this.itemElements[key], this.getPrimitives(shape));\n                }\n\n                this.invalidatePrimitives(shape);\n              }\n\n              this.changeItemElements(this.getSelectorPrimitives(shape), this.itemSelectorElements[key], type === ModelChange_1.ItemChangeType.UpdateStructure);\n              this.changeItemElements(this.getPrimitives(shape), this.itemElements[key], type === ModelChange_1.ItemChangeType.UpdateStructure);\n              this.changeItemClassName(this.itemElements[key], itemClassName);\n              if (this.itemChildElements[key]) this.changeItemChildrenVisibility(this.itemChildElements[key], shape.expanded);\n              if (itemSelectorParent !== (this.itemSelectorElements[key] && this.itemSelectorElements[key].parentNode)) this.moveItemElements(itemSelectorParent, this.itemSelectorElements[key]);\n              if (itemParent !== (this.itemElements[key] && this.itemElements[key].parentNode)) this.moveItemElements(itemParent, this.itemElements[key]);\n              if (this.itemChildElements[key] && itemParent !== this.itemChildElements[key].parentNode) this.moveItemElements(itemParent, this.itemChildElements[key]);\n              break;\n\n            case ModelChange_1.ItemChangeType.UpdateClassName:\n              this.changeItemClassName(this.itemElements[key], itemClassName);\n          }\n        };\n\n        CanvasItemsManager.prototype.getConnectorSelectorClassName = function (connector) {\n          return \"connector\";\n        };\n\n        CanvasItemsManager.prototype.getConnectorClassName = function (connector, isValid) {\n          var selectorClassName = this.getConnectorSelectorClassName(connector);\n          var selectorMoveClassName = ModelUtils_1.ModelUtils.canMoveConnector(this.selectedItems, connector) ? selectorClassName + \" \" + exports.CONNECTOR_CAN_MOVE : selectorClassName;\n          return isValid ? selectorMoveClassName : selectorMoveClassName + \" \" + exports.NOT_VALID_CSSCLASS;\n        };\n\n        CanvasItemsManager.prototype.applyConnectorChange = function (connector, type, isValid) {\n          var key = connector.key;\n          var containerKey = connector.container && connector.container.key;\n          var itemSelectorParent = this.getItemSelectorGroupContainer(connector.zIndex, containerKey);\n          var itemParent = this.getItemGroupContainer(connector.zIndex, containerKey);\n          var className = this.getConnectorClassName(connector, isValid);\n\n          switch (type) {\n            case ModelChange_1.ItemChangeType.Create:\n              this.itemSelectorElements[key] = this.createItemElements(key, this.getSelectorPrimitives(connector), itemSelectorParent, this.getConnectorSelectorClassName(connector), Event_1.MouseEventElementType.Connector);\n              this.itemElements[key] = this.createItemElements(key, this.getPrimitives(connector), itemParent, className, Event_1.MouseEventElementType.Connector);\n              break;\n\n            case ModelChange_1.ItemChangeType.Remove:\n              this.removeItemCustomContent(this.itemSelectorElements[key], this.getSelectorPrimitives(connector));\n              this.removeItemCustomContent(this.itemElements[key], this.getPrimitives(connector));\n              this.invalidatePrimitives(connector);\n              this.removeItemElements(this.itemSelectorElements[key]);\n              delete this.itemSelectorElements[key];\n              this.removeItemElements(this.itemElements[key]);\n              delete this.itemElements[key];\n              break;\n\n            case ModelChange_1.ItemChangeType.UpdateStructure:\n            case ModelChange_1.ItemChangeType.UpdateProperties:\n            case ModelChange_1.ItemChangeType.Update:\n              if (type !== ModelChange_1.ItemChangeType.Update) {\n                if (type === ModelChange_1.ItemChangeType.UpdateStructure) {\n                  this.removeItemCustomContent(this.itemSelectorElements[key], this.getSelectorPrimitives(connector));\n                  this.removeItemCustomContent(this.itemElements[key], this.getPrimitives(connector));\n                }\n\n                this.invalidatePrimitives(connector);\n              }\n\n              this.changeItemElements(this.getSelectorPrimitives(connector), this.itemSelectorElements[key], type === ModelChange_1.ItemChangeType.UpdateStructure);\n              this.changeItemClassName(this.itemSelectorElements[key], this.getConnectorSelectorClassName(connector));\n              this.changeItemElements(this.getPrimitives(connector), this.itemElements[key], type === ModelChange_1.ItemChangeType.UpdateStructure);\n              this.changeItemClassName(this.itemElements[key], className);\n              if (itemSelectorParent !== (this.itemSelectorElements[key] && this.itemSelectorElements[key].parentNode)) this.moveItemElements(itemSelectorParent, this.itemSelectorElements[key]);\n              if (itemParent !== (this.itemElements[key] && this.itemElements[key].parentNode)) this.moveItemElements(itemParent, this.itemElements[key]);\n              break;\n\n            case ModelChange_1.ItemChangeType.UpdateClassName:\n              this.changeItemClassName(this.itemSelectorElements[key], this.getConnectorSelectorClassName(connector));\n              this.changeItemClassName(this.itemElements[key], className);\n          }\n        };\n\n        CanvasItemsManager.prototype.createItemElements = function (key, primitives, parent, className, type) {\n          var gEl = this.createAndChangePrimitiveElement(new GroupPrimitive_1.GroupPrimitive([], className, undefined, undefined, function (e) {\n            return Utils_1.RenderUtils.setElementEventData(e, type, key);\n          }), parent);\n          this.createAndChangePrimitivesElements(primitives, gEl);\n          return gEl;\n        };\n\n        CanvasItemsManager.prototype.changeItemElements = function (primitives, element, updateStructure) {\n          if (updateStructure || primitives.length !== element.childNodes.length) {\n            Utils_1.RenderUtils.removeContent(element);\n            this.createAndChangePrimitivesElements(primitives, element);\n          } else this.dom.changeChildrenByPrimitives(primitives, element);\n        };\n\n        CanvasItemsManager.prototype.changeItemClassName = function (element, className) {\n          if (className && element) this.changePrimitiveElement(new GroupPrimitive_1.GroupPrimitive([], className), element);\n        };\n\n        CanvasItemsManager.prototype.removeItemElements = function (element) {\n          if (element && element.parentNode) element.parentNode.removeChild(element);\n        };\n\n        CanvasItemsManager.prototype.removeItemCustomContent = function (element, primitives) {\n          if (element && primitives && primitives.length === element.childNodes.length) primitives.forEach(function (primitive, index) {\n            primitive.destroyCustomContent(element.childNodes[index]);\n          });\n        };\n\n        CanvasItemsManager.prototype.moveItemElements = function (parent, element, sibling) {\n          if (element && parent) if (sibling) parent.insertBefore(element, sibling);else parent.appendChild(element);\n        };\n\n        CanvasItemsManager.prototype.changeItemChildrenVisibility = function (element, expanded) {\n          element.style.display = expanded ? \"\" : \"none\";\n        };\n\n        CanvasItemsManager.prototype.getItemGroupContainerKey = function (zIndex, parentContainerKey) {\n          return parentContainerKey !== undefined ? zIndex + \"_\" + parentContainerKey : zIndex.toString();\n        };\n\n        CanvasItemsManager.prototype.getItemGroupContainer = function (zIndex, parentContainerKey) {\n          var parent = parentContainerKey !== undefined ? this.getItemParent(zIndex, parentContainerKey) : this.itemsContainer;\n          var key = parentContainerKey || \"Main\";\n\n          if (this.itemGroupContainers[key] === undefined || this.itemGroupContainers[key][zIndex] === undefined) {\n            if (this.itemGroupContainers[key] === undefined) this.itemGroupContainers[key] = [];\n            this.itemGroupContainers[key][zIndex] = this.createAndChangePrimitiveElement(new GroupPrimitive_1.GroupPrimitive([], null, zIndex), parent, this.itemGroupContainers[key][zIndex + 1]);\n          }\n\n          return this.itemGroupContainers[key][zIndex];\n        };\n\n        CanvasItemsManager.prototype.getItemSelectorGroupContainer = function (zIndex, parentContainerKey) {\n          var parent = parentContainerKey !== undefined ? this.getItemSelectorParent(zIndex, parentContainerKey) : this.itemSelectorsContainer;\n          var key = parentContainerKey || \"Main\";\n\n          if (this.itemSelectorGroupContainers[key] === undefined || this.itemSelectorGroupContainers[key][zIndex] === undefined) {\n            if (this.itemSelectorGroupContainers[key] === undefined) this.itemSelectorGroupContainers[key] = [];\n            this.itemSelectorGroupContainers[key][zIndex] = this.createAndChangePrimitiveElement(new GroupPrimitive_1.GroupPrimitive([], null, zIndex), parent, this.itemSelectorGroupContainers[key][zIndex + 1]);\n          }\n\n          return this.itemSelectorGroupContainers[key][zIndex];\n        };\n\n        CanvasItemsManager.prototype.getItemParent = function (zIndex, parentContainerKey) {\n          return parentContainerKey !== undefined ? this.itemChildElements[parentContainerKey] : this.getItemGroupContainer(zIndex);\n        };\n\n        CanvasItemsManager.prototype.getItemSelectorParent = function (zIndex, parentContainerKey) {\n          return parentContainerKey !== undefined ? this.itemChildElements[parentContainerKey] : this.getItemSelectorGroupContainer(zIndex);\n        };\n\n        CanvasItemsManager.prototype.notifySelectionChanged = function (selection) {\n          var _this = this;\n\n          var newSelectedItems = ModelUtils_1.ModelUtils.createSelectedItems(selection);\n          var itemsToUpdate = [];\n          this.populateItems(itemsToUpdate, newSelectedItems, this.selectedItems);\n          this.populateItems(itemsToUpdate, this.selectedItems, newSelectedItems);\n          this.selectedItems = newSelectedItems;\n          itemsToUpdate.forEach(function (item) {\n            if (item instanceof Connector_1.Connector) _this.applyConnectorChange(item, ModelChange_1.ItemChangeType.UpdateClassName, true);\n          });\n        };\n\n        CanvasItemsManager.prototype.populateItems = function (target, sourceSet, checkSet) {\n          Object.keys(sourceSet).forEach(function (key) {\n            if (!checkSet[key]) target.push(sourceSet[key]);\n          });\n        };\n\n        return CanvasItemsManager;\n      }(CanvasManager_1.CanvasManager);\n\n      exports.CanvasItemsManager = CanvasItemsManager;\n      /***/\n    },\n    /* 77 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.TextMeasurer = void 0;\n\n      var size_1 = __webpack_require__(2);\n\n      var Utils_1 = __webpack_require__(18);\n\n      var Shape_1 = __webpack_require__(14);\n\n      var Connector_1 = __webpack_require__(7);\n\n      var ITextMeasurer_1 = __webpack_require__(42);\n\n      var RenderHelper_1 = __webpack_require__(15);\n\n      var TextUtils_1 = __webpack_require__(61);\n\n      var TextMeasurer =\n      /** @class */\n      function () {\n        function TextMeasurer(parent) {\n          this.cache = {};\n          this.fontSizeCache = {};\n          this.containers = {};\n          this.parent = parent;\n          this.createNodes();\n        }\n\n        TextMeasurer.prototype.measureWords = function (text, style, owner) {\n          var _this = this;\n\n          var result = {\n            words: {},\n            fontSize: -1\n          };\n          var words = typeof text === \"string\" ? this.splitToWords(text, false) : text.reduce(function (acc, t) {\n            return acc.concat(_this.splitToWords(t, false));\n          }, []);\n          words.push(\" \");\n          var styleHashKey = this.getStyleHash(style, owner);\n          var measureElements = this.tryLoadWordsToMeasurer(words, style, styleHashKey, owner, undefined, undefined, undefined, undefined, result);\n\n          if (measureElements) {\n            var container = this.containers[owner];\n            this.putElementsInDOM(container, measureElements);\n            this.beforeMeasureInDOM();\n            this.measureElementsInDOM(measureElements, result);\n            this.afterMeasureInDOM();\n          }\n\n          return result;\n        };\n\n        TextMeasurer.prototype.measureTextLine = function (textLine, style, owner) {\n          var results = this.measureWords(textLine, style, owner);\n          return TextUtils_1.getTextLineSize(textLine, results);\n        };\n\n        TextMeasurer.prototype.onNewModel = function (items, dom) {\n          var _this = this;\n\n          dom.changeByFunc(null, function () {\n            return _this.onNewModelCore(items);\n          });\n        };\n\n        TextMeasurer.prototype.onNewModelCore = function (items) {\n          var shapes = items.filter(function (i) {\n            return i instanceof Shape_1.Shape;\n          });\n          var connectors = items.filter(function (i) {\n            return i instanceof Connector_1.Connector;\n          });\n          var shapeElements = this.tryLoadShapeTexts(shapes);\n          var connectorElements = this.tryLoadConnectorTexts(connectors);\n\n          if (shapeElements || connectorElements) {\n            shapeElements && this.putElementsInDOM(this.containers[ITextMeasurer_1.TextOwner.Shape], shapeElements);\n            connectorElements && this.putElementsInDOM(this.containers[ITextMeasurer_1.TextOwner.Connector], connectorElements);\n            this.beforeMeasureInDOM();\n            shapeElements && this.measureElementsInDOM(shapeElements);\n            connectorElements && this.measureElementsInDOM(connectorElements);\n            this.afterMeasureInDOM();\n          }\n        };\n\n        TextMeasurer.prototype.replaceParent = function (parent) {\n          if (this.parent !== parent) {\n            if (this.mainElement.parentNode) parent.appendChild(this.mainElement);\n            this.parent = parent;\n          }\n        };\n\n        TextMeasurer.prototype.clean = function () {\n          Utils_1.RenderUtils.removeElement(this.mainElement);\n        };\n\n        TextMeasurer.prototype.tryLoadShapeTexts = function (shapes) {\n          var _this = this;\n\n          var newSet = {};\n          var elements = [];\n          var hashes = [];\n          var styleHashes = [];\n          shapes.forEach(function (s) {\n            var styleHashKey = _this.getStyleHash(s.styleText, ITextMeasurer_1.TextOwner.Shape);\n\n            _this.tryLoadWordsToMeasurer(_this.splitToWords(s.text, true), s.styleText, styleHashKey, ITextMeasurer_1.TextOwner.Shape, newSet, elements, hashes, styleHashes);\n          });\n          return elements.length ? {\n            elements: elements,\n            hashes: hashes,\n            styleHashes: styleHashes\n          } : null;\n        };\n\n        TextMeasurer.prototype.tryLoadConnectorTexts = function (connectors) {\n          var _this = this;\n\n          var newSet = {};\n          var elements = [];\n          var hashes = [];\n          var styleHashes = [];\n          connectors.forEach(function (c) {\n            var words = c.texts.map(function (t) {\n              return t.value;\n            }).reduce(function (acc, text) {\n              return acc.concat(_this.splitToWords(text, false));\n            }, []);\n\n            if (words.length) {\n              words.push(\" \");\n\n              var styleHashKey = _this.getStyleHash(c.styleText, ITextMeasurer_1.TextOwner.Connector);\n\n              _this.tryLoadWordsToMeasurer(words, c.styleText, styleHashKey, ITextMeasurer_1.TextOwner.Connector, newSet, elements, hashes, styleHashes);\n            }\n          });\n          return elements.length ? {\n            elements: elements,\n            hashes: hashes,\n            styleHashes: styleHashes\n          } : null;\n        };\n\n        TextMeasurer.prototype.tryLoadWordsToMeasurer = function (words, style, styleHashKey, textOwner, newSet, elementsToMeasure, hashesToMeasure, styleHashesToMeasure, result) {\n          var _this = this;\n\n          var newWords = [];\n          elementsToMeasure = elementsToMeasure || [];\n          hashesToMeasure = hashesToMeasure || [];\n          styleHashesToMeasure = styleHashesToMeasure || [];\n          newSet = newSet || {};\n          words.forEach(function (t) {\n            return _this.tryLoadWordToMeasurer(t, style, styleHashKey, textOwner, newSet, elementsToMeasure, hashesToMeasure, styleHashesToMeasure, newWords, result);\n          });\n          return elementsToMeasure.length ? {\n            elements: elementsToMeasure,\n            hashes: hashesToMeasure,\n            styleHashes: styleHashesToMeasure,\n            newWords: newWords\n          } : null;\n        };\n\n        TextMeasurer.prototype.putElementsInDOM = function (container, measureElements) {\n          container.parentNode && container.parentNode.removeChild(container);\n\n          while (container.firstChild) {\n            container.removeChild(container.firstChild);\n          }\n\n          measureElements.elements.forEach(function (el) {\n            return container.appendChild(el);\n          });\n          this.svgElement.appendChild(container);\n        };\n\n        TextMeasurer.prototype.measureElementsInDOM = function (measureElements, result) {\n          var hashes = measureElements.hashes;\n          var elements = measureElements.elements;\n          var words = measureElements.newWords;\n          var count = hashes.length;\n\n          for (var i = 0; i < count; i++) {\n            var size = this.getDomElementSize(elements[i]);\n\n            if (size) {\n              if (!size.isEmpty()) this.cache[hashes[i]] = size;\n              if (result) result.words[words[i]] = size;\n            }\n\n            var styleHashKey = measureElements.styleHashes[i];\n            if (this.fontSizeCache[styleHashKey] === undefined) this.fontSizeCache[styleHashKey] = this.getDomFontSize(elements[i]);\n            if (result && result.fontSize < 0) result.fontSize = this.fontSizeCache[styleHashKey];\n          }\n        };\n\n        TextMeasurer.prototype.beforeMeasureInDOM = function () {\n          this.parent.appendChild(this.mainElement);\n        };\n\n        TextMeasurer.prototype.afterMeasureInDOM = function () {\n          this.mainElement.parentNode && this.mainElement.parentNode.removeChild(this.mainElement);\n        };\n\n        TextMeasurer.prototype.tryLoadWordToMeasurer = function (word, style, styleHashKey, owner, newSet, elementsToMeasure, hashesToMeasure, styleHashesToMeasure, newWords, result) {\n          var hash = this.getHash(word, style, owner);\n          var cachedSize = this.cache[hash];\n\n          if (!cachedSize && !newSet[hash]) {\n            newSet[hash] = true;\n            hashesToMeasure.push(hash);\n            elementsToMeasure.push(this.createElement(word, style));\n            styleHashesToMeasure.push(styleHashKey);\n            newWords.push(word);\n          } else if (cachedSize && result) {\n            result.words[word] = cachedSize;\n            result.fontSize = this.fontSizeCache[styleHashKey];\n          }\n        };\n\n        TextMeasurer.prototype.getHash = function (text, style, owner) {\n          return owner + \"|\" + (style && style.toHash()) + \"|\" + text;\n        };\n\n        TextMeasurer.prototype.getStyleHash = function (style, owner) {\n          return this.getHash(\" \", style, owner);\n        };\n\n        TextMeasurer.prototype.createElement = function (text, style) {\n          var element = document.createElementNS(RenderHelper_1.svgNS, \"text\");\n          if (text === \" \") element.setAttributeNS(\"http://www.w3.org/XML/1998/namespace\", \"xml:space\", \"preserve\");\n          element.textContent = text;\n          style && Utils_1.RenderUtils.applyStyleToElement(style, element);\n          return element;\n        };\n\n        TextMeasurer.prototype.splitToWords = function (text, includeWhitespace) {\n          var words = TextUtils_1.textToWords(text);\n          includeWhitespace && words.push(\" \");\n          return words;\n        };\n\n        TextMeasurer.prototype.getDomFontSize = function (textEl) {\n          return parseFloat(window.getComputedStyle(textEl).fontSize);\n        };\n\n        TextMeasurer.prototype.getDomElementSize = function (textEl) {\n          var bBox;\n\n          try {\n            bBox = textEl.getBBox();\n          } catch (_a) {} // TODO make measure in another way because of FF error\n\n\n          return bBox ? new size_1.Size(bBox.width, bBox.height) : new size_1.Size(0, 0);\n        };\n\n        TextMeasurer.prototype.createNodes = function () {\n          this.mainElement = RenderHelper_1.RenderHelper.createMainElement(undefined, true);\n          this.svgElement = RenderHelper_1.RenderHelper.createSvgElement(this.mainElement, false);\n          this.createContainer(ITextMeasurer_1.TextOwner.Shape, \"shape\");\n          this.createContainer(ITextMeasurer_1.TextOwner.Connector, \"connector\");\n          this.createContainer(ITextMeasurer_1.TextOwner.ExtensionLine, \"extension-line\");\n          this.createContainer(ITextMeasurer_1.TextOwner.Resize, \"resize-info\");\n        };\n\n        TextMeasurer.prototype.createContainer = function (owner, className) {\n          var element = document.createElementNS(RenderHelper_1.svgNS, \"g\");\n          element.setAttribute(\"class\", className);\n          this.containers[owner] = element;\n        };\n\n        return TextMeasurer;\n      }();\n\n      exports.TextMeasurer = TextMeasurer;\n      /***/\n    },\n    /* 78 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics36 = function extendStatics(d, b) {\n          _extendStatics36 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics36(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics36(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.EdgeOnLayer = exports.NodeOnLayer = exports.SugiyamaNodesOrderer = exports.SugiyamaLayerDistributor = exports.SugiyamaLayoutBuilder = void 0;\n\n      var BaseBuilder_1 = __webpack_require__(140);\n\n      var Graph_1 = __webpack_require__(68);\n\n      var NodeLayout_1 = __webpack_require__(69);\n\n      var Structures_1 = __webpack_require__(37);\n\n      var ListUtils_1 = __webpack_require__(90);\n\n      var search_1 = __webpack_require__(40);\n\n      var point_1 = __webpack_require__(1);\n\n      var LayoutSettings_1 = __webpack_require__(20);\n\n      var GraphLayout_1 = __webpack_require__(139);\n\n      var Connector_1 = __webpack_require__(7);\n\n      var CycleRemover_1 = __webpack_require__(271);\n\n      var SugiyamaLayoutBuilder =\n      /** @class */\n      function (_super) {\n        __extends(SugiyamaLayoutBuilder, _super);\n\n        function SugiyamaLayoutBuilder() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        SugiyamaLayoutBuilder.prototype.build = function () {\n          var _this = this;\n\n          var offset = 0;\n          var layout = new GraphLayout_1.GraphLayout();\n          var nodeOrderer = new SugiyamaNodesOrderer();\n          this.graph.getConnectedComponents().forEach(function (component) {\n            var acyclicGraphInfo = CycleRemover_1.CycleRemover.removeCycles(component);\n            var layers = SugiyamaLayerDistributor.getLayers(acyclicGraphInfo.graph);\n            var orderedGraph = nodeOrderer.orderNodes(acyclicGraphInfo.graph, layers);\n            var removedEdges = Object.keys(acyclicGraphInfo.removedEdges).map(function (ek) {\n              return component.getEdge(ek);\n            });\n            var coordinatedGraph = nodeOrderer.assignAbsCoordinates(orderedGraph);\n\n            var componentLayout = _this.createInfoGraphLayout(coordinatedGraph, acyclicGraphInfo.reversedEdges, removedEdges);\n\n            layout.extend(_this.setComponentOffset(componentLayout, offset));\n            offset += _this.getComponentOffset(componentLayout);\n          });\n          return layout;\n        }; // Order Nodes\n\n\n        SugiyamaLayoutBuilder.prototype.createInfoGraphLayout = function (coordinatedGraph, reversedEdges, removedEdges) {\n          var _this = this;\n\n          var currentPosition = new point_1.Point(0, 0);\n          var items = coordinatedGraph.items;\n          var sortedLayers = new ListUtils_1.HashSet(items.map(function (n) {\n            return n.layer;\n          }).sort(function (a, b) {\n            return a - b;\n          }));\n          var absOffsetInfo = this.getAbsOffsetInfo(coordinatedGraph.items);\n          var positions = {};\n          var totalDepth = 0;\n          var leftEdge = Number.MAX_SAFE_INTEGER || Number.MAX_VALUE;\n          var rightEdge = Number.MIN_SAFE_INTEGER || Number.MAX_VALUE;\n\n          var _loop_1 = function _loop_1(i) {\n            var layer = sortedLayers.item(i);\n            var maxDepthLayer = 0;\n            items.filter(function (n) {\n              return n.layer === layer;\n            }).sort(function (a, b) {\n              return a.position - b.position;\n            }).forEach(function (n) {\n              var depthNodeSize = _this.getDepthNodeSize(n);\n\n              var directionOffset = _this.chooseDirectionValue(0, depthNodeSize);\n\n              var absPosition = _this.getAbsPosition(n.position, _this.getBreadthNodeSize(n), absOffsetInfo);\n\n              currentPosition = _this.setBreadth(currentPosition, absPosition);\n\n              var nodePosition = _this.setDepthOffset(currentPosition, -directionOffset);\n\n              positions[n.key] = nodePosition;\n              if (n.isDummy) return;\n              var breadth = _this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Horizontal ? nodePosition.y : nodePosition.x;\n              leftEdge = Math.min(leftEdge, breadth);\n              rightEdge = Math.max(rightEdge, breadth + _this.getBreadthNodeSize(n));\n              maxDepthLayer = Math.max(maxDepthLayer, _this.getDepthNodeSize(n));\n            });\n            totalDepth += maxDepthLayer;\n            currentPosition = this_1.setBreadth(currentPosition, 0);\n            currentPosition = this_1.setDepthOffset(currentPosition, this_1.getDirectionValue(maxDepthLayer + this_1.settings.layerSpacing));\n          };\n\n          var this_1 = this;\n\n          for (var i = 0; i < sortedLayers.length; i++) {\n            _loop_1(i);\n          }\n\n          totalDepth += (sortedLayers.length - 1) * this.settings.layerSpacing;\n          var layout = new GraphLayout_1.GraphLayout();\n          this.createNodesLayout(coordinatedGraph, layout, leftEdge, totalDepth, positions);\n          this.createEdgesLayout(coordinatedGraph, layout, reversedEdges, removedEdges);\n          return layout; // this.getDummyEdgesRoutes(infoGraph);\n        };\n\n        SugiyamaLayoutBuilder.prototype.createNodesLayout = function (infoGraph, layout, leftEdge, totalDepth, positions) {\n          var _this = this;\n\n          var offset = this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Vertical ? new point_1.Point(-leftEdge, this.chooseDirectionValue(0, totalDepth)) : new point_1.Point(this.chooseDirectionValue(0, totalDepth), -leftEdge);\n          infoGraph.items.forEach(function (n) {\n            if (!n.isDummy) {\n              var node = _this.graph.getNode(n.key);\n\n              layout.addNode(new NodeLayout_1.NodeLayout(node, positions[n.key].clone().offset(offset.x, offset.y)));\n            }\n          });\n        };\n\n        SugiyamaLayoutBuilder.prototype.createEdgesLayout = function (infoGraph, layout, reversedEdges, removedEdges) {\n          var DIRECT = this.getDirectEdgeLayout();\n          var TOP_TO_BOTTOM = this.getDiffLevelEdgeLayout(true);\n          var BOTTOM_TO_TOP = this.getDiffLevelEdgeLayout(false);\n          var TOP_TO_TOP = this.getSameLevelEdgeLayout(true);\n          var BOTTOM_TO_BOTTOM = this.getSameLevelEdgeLayout(false);\n          var occupied = {};\n          infoGraph.edges.filter(function (e) {\n            return !e.isDummy;\n          }).concat(removedEdges.map(function (e) {\n            return new EdgeOnLayer(e.key, false, e.from, e.to);\n          })).sort(function (a, b) {\n            return infoGraph.getNode(a.originFrom).layer - infoGraph.getNode(b.originFrom).layer || infoGraph.getNode(a.to).layer - infoGraph.getNode(b.to).layer;\n          }).forEach(function (e) {\n            var isReversed = reversedEdges[e.key];\n            var from = infoGraph.getNode(isReversed ? e.to : e.originFrom);\n            var to = infoGraph.getNode(isReversed ? e.originFrom : e.to);\n            if (to.layer - from.layer === 1) layout.addEdge(new NodeLayout_1.EdgeLayout(e.key, DIRECT.from, DIRECT.to));else {\n              var candidates_1 = [];\n\n              if (to.position - from.position >= 1) {\n                candidates_1.push(TOP_TO_BOTTOM);\n                candidates_1.push({\n                  from: DIRECT.from,\n                  to: TOP_TO_BOTTOM.to\n                });\n                candidates_1.push({\n                  from: TOP_TO_BOTTOM.from,\n                  to: DIRECT.to\n                });\n              } else if (to.position - from.position <= -1) {\n                candidates_1.push(BOTTOM_TO_TOP);\n                candidates_1.push({\n                  from: DIRECT.from,\n                  to: BOTTOM_TO_TOP.to\n                });\n                candidates_1.push({\n                  from: BOTTOM_TO_TOP.from,\n                  to: DIRECT.to\n                });\n              } else {\n                var oneliner = from.position === to.position && to.position === 0 ? [TOP_TO_TOP, BOTTOM_TO_BOTTOM] : [BOTTOM_TO_BOTTOM, TOP_TO_TOP];\n                oneliner.forEach(function (c) {\n                  return candidates_1.push(c);\n                });\n                oneliner.forEach(function (c) {\n                  candidates_1.push({\n                    from: c.from,\n                    to: DIRECT.to\n                  });\n                  candidates_1.push({\n                    from: DIRECT.from,\n                    to: c.to\n                  });\n                });\n              }\n\n              candidates_1.push(DIRECT);\n\n              for (var i = 0, candidate = void 0; candidate = candidates_1[i]; i++) {\n                var fromKey = from.key + \"_\" + candidate.from;\n                var toKey = to.key + \"_\" + candidate.to;\n\n                if (occupied[fromKey] !== Connector_1.ConnectorPosition.End && occupied[toKey] !== Connector_1.ConnectorPosition.Begin) {\n                  layout.addEdge(new NodeLayout_1.EdgeLayout(e.key, candidate.from, candidate.to));\n                  occupied[fromKey] = Connector_1.ConnectorPosition.Begin;\n                  occupied[toKey] = Connector_1.ConnectorPosition.End;\n                  break;\n                }\n              }\n            }\n          });\n        };\n\n        SugiyamaLayoutBuilder.prototype.getDirectEdgeLayout = function () {\n          if (this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Horizontal) return this.settings.direction === LayoutSettings_1.LogicalDirectionKind.Forward ? {\n            from: 1,\n            to: 3\n          } : {\n            from: 3,\n            to: 1\n          };\n          return this.settings.direction === LayoutSettings_1.LogicalDirectionKind.Forward ? {\n            from: 2,\n            to: 0\n          } : {\n            from: 0,\n            to: 2\n          };\n        };\n\n        SugiyamaLayoutBuilder.prototype.getDiffLevelEdgeLayout = function (topToBottom) {\n          if (this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Horizontal) return topToBottom ? {\n            from: 2,\n            to: 0\n          } : {\n            from: 0,\n            to: 2\n          };\n          return topToBottom ? {\n            from: 3,\n            to: 1\n          } : {\n            from: 1,\n            to: 3\n          };\n        };\n\n        SugiyamaLayoutBuilder.prototype.getSameLevelEdgeLayout = function (topToBottom) {\n          if (this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Horizontal) return topToBottom ? {\n            from: 0,\n            to: 0\n          } : {\n            from: 2,\n            to: 2\n          };\n          return topToBottom ? {\n            from: 3,\n            to: 3\n          } : {\n            from: 1,\n            to: 1\n          };\n        };\n\n        SugiyamaLayoutBuilder.prototype.getAbsOffsetInfo = function (nodesInfos) {\n          var _this = this;\n\n          var absOffsetMatrix = {};\n\n          var addCell = function addCell(n, intAbsCoord) {\n            if (absOffsetMatrix[intAbsCoord] === undefined) absOffsetMatrix[intAbsCoord] = _this.getBreadthNodeSize(n);\n            absOffsetMatrix[intAbsCoord] = Math.max(absOffsetMatrix[intAbsCoord], _this.getBreadthNodeSize(n));\n          };\n\n          nodesInfos.forEach(function (n) {\n            var intAbsCoord = trunc(n.position);\n            addCell(n, intAbsCoord);\n            if (absOffsetMatrix[intAbsCoord] % 1 !== 0) addCell(n, intAbsCoord + 1);\n          });\n          var absOffsetInfo = {};\n          var leftOffset = 0;\n          Object.keys(absOffsetMatrix).sort(function (a, b) {\n            return parseFloat(a) - parseFloat(b);\n          }).forEach(function (coord) {\n            absOffsetInfo[coord] = {\n              leftOffset: leftOffset,\n              width: absOffsetMatrix[coord]\n            };\n            leftOffset += absOffsetMatrix[coord] + _this.settings.columnSpacing;\n          });\n          return absOffsetInfo;\n        };\n\n        SugiyamaLayoutBuilder.prototype.setBreadth = function (position, breadthPosition) {\n          if (this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Vertical) return new point_1.Point(breadthPosition, position.y);\n          return new point_1.Point(position.x, breadthPosition);\n        };\n\n        SugiyamaLayoutBuilder.prototype.setDepthOffset = function (position, offset) {\n          if (this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Horizontal) return new point_1.Point(position.x + offset, position.y);\n          return new point_1.Point(position.x, position.y + offset);\n        };\n\n        SugiyamaLayoutBuilder.prototype.getAbsPosition = function (absCoordinate, itemSize, absoluteOffsetInfo) {\n          var intAbsCoord = trunc(absCoordinate);\n          var absLeftOffset = absoluteOffsetInfo[intAbsCoord].leftOffset;\n          var cellWidth = absoluteOffsetInfo[intAbsCoord].width;\n          if (absCoordinate % 1 === 0) return absLeftOffset + (cellWidth - itemSize) / 2;\n          return absLeftOffset + cellWidth - (itemSize - this.settings.columnSpacing) / 2;\n        };\n\n        SugiyamaLayoutBuilder.prototype.getBreadthNodeSize = function (node) {\n          return node.isDummy ? 0 : this.getBreadthNodeSizeCore(this.graph.getNode(node.key));\n        };\n\n        SugiyamaLayoutBuilder.prototype.getDepthNodeSize = function (node) {\n          return node.isDummy ? 0 : this.getDepthNodeSizeCore(this.graph.getNode(node.key));\n        };\n\n        return SugiyamaLayoutBuilder;\n      }(BaseBuilder_1.LayoutBuilder);\n\n      exports.SugiyamaLayoutBuilder = SugiyamaLayoutBuilder;\n\n      var SugiyamaLayerDistributor =\n      /** @class */\n      function () {\n        function SugiyamaLayerDistributor() {}\n\n        SugiyamaLayerDistributor.getLayers = function (acyclicGraph) {\n          var feasibleTree = this.getFeasibleTree(acyclicGraph);\n          return this.calcNodesLayers(feasibleTree);\n        };\n\n        SugiyamaLayerDistributor.getFeasibleTree = function (graph) {\n          var layers = this.initLayerAssignment(graph);\n          return graph.getSpanningGraph(graph.nodes[0], Structures_1.ConnectionMode.OutgoingAndIncoming, function (e) {\n            return layers[e.to] - layers[e.from];\n          });\n        };\n\n        SugiyamaLayerDistributor.initLayerAssignment = function (graph) {\n          var layers = {};\n          var currentLayer = 0;\n          var actualAssignedNodes = {};\n          var assigningNodes = graph.nodes.filter(function (n) {\n            return !graph.getAdjacentEdges(n, Structures_1.ConnectionMode.Incoming).length;\n          });\n\n          var _loop_2 = function _loop_2() {\n            assigningNodes.forEach(function (n) {\n              layers[n] = currentLayer;\n              actualAssignedNodes[n] = true;\n            });\n            Object.keys(actualAssignedNodes).forEach(function (n) {\n              if (graph.getAdjacentEdges(n, Structures_1.ConnectionMode.Outgoing).filter(function (e) {\n                return layers[e.to] === undefined;\n              }).length === 0) delete actualAssignedNodes[n];\n            });\n            var assigningNodesSet = {};\n            Object.keys(actualAssignedNodes).forEach(function (n) {\n              graph.getAdjacentEdges(n, Structures_1.ConnectionMode.Outgoing).map(function (e) {\n                return e.to;\n              }).filter(function (n) {\n                return layers[n] === undefined && graph.getAdjacentEdges(n, Structures_1.ConnectionMode.Incoming).reduce(function (acc, e) {\n                  return acc && layers[e.from] !== undefined;\n                }, true);\n              }).forEach(function (n) {\n                return assigningNodesSet[n] = true;\n              });\n            });\n            assigningNodes = Object.keys(assigningNodesSet);\n            currentLayer++;\n          };\n\n          while (assigningNodes.length) {\n            _loop_2();\n          }\n\n          return layers;\n        };\n\n        SugiyamaLayerDistributor.calcNodesLayers = function (graph) {\n          var layers = {};\n          var minLayer = Number.MAX_SAFE_INTEGER || Number.MAX_VALUE;\n          var currentLevel = 0;\n          var iterator = graph.createIterator(Structures_1.ConnectionMode.OutgoingAndIncoming);\n          iterator.visitEachEdgeOnce = false;\n\n          iterator.onNode = function (n) {\n            layers[n.key] = currentLevel;\n            minLayer = Math.min(minLayer, currentLevel);\n          };\n\n          iterator.skipNode = function (n) {\n            return layers[n.key] !== undefined;\n          };\n\n          iterator.skipEdge = function (e) {\n            return layers[e.from] !== undefined && layers[e.to] !== undefined;\n          };\n\n          iterator.onEdge = function (e, out) {\n            if (out) currentLevel = layers[e.from] + 1;else currentLevel = layers[e.to] - 1;\n          };\n\n          iterator.iterate(graph.nodes[0]);\n\n          for (var key in layers) {\n            if (!Object.prototype.hasOwnProperty.call(layers, key)) continue;\n            layers[key] -= minLayer;\n          }\n\n          return layers;\n        };\n\n        return SugiyamaLayerDistributor;\n      }();\n\n      exports.SugiyamaLayerDistributor = SugiyamaLayerDistributor;\n\n      var SugiyamaNodesOrderer =\n      /** @class */\n      function () {\n        function SugiyamaNodesOrderer() {\n          this.idCounter = -10000;\n        }\n\n        SugiyamaNodesOrderer.prototype.orderNodes = function (graph, layers) {\n          var maxIteration = 14; // magic number - http://www.graphviz.org/Documentation/TSE93.pdf PAGE (14)\n\n          var currentIteration = 1;\n          var graphInfo = this.initGraphInfo(graph, layers);\n          var nodeInfos = graphInfo.items;\n          var orderInfo = this.initOrder(nodeInfos);\n          var bestNodesPositions = this.getNodeToPositionMap(nodeInfos);\n          var bestCrossCount = this.getCrossCount(orderInfo, graphInfo);\n          var isParentToChildren = true;\n\n          while (currentIteration < maxIteration && bestCrossCount !== 0) {\n            orderInfo = this.getNodesOrder(orderInfo, graphInfo, isParentToChildren);\n            var crossCount = this.getCrossCount(orderInfo, graphInfo);\n\n            if (crossCount < bestCrossCount) {\n              bestNodesPositions = this.getNodeToPositionMap(graphInfo.items);\n              bestCrossCount = crossCount;\n            }\n\n            isParentToChildren = !isParentToChildren;\n            currentIteration++;\n          } // transpose() procedure doesn`t implement.\n          // http://www.graphviz.org/Documentation/TSE93.pdf PAGE(16)\n\n\n          graphInfo.items.forEach(function (n) {\n            return n.position = bestNodesPositions[n.key];\n          });\n          return graphInfo;\n        };\n\n        SugiyamaNodesOrderer.prototype.getNodesOrder = function (current, graph, isParentToChildren) {\n          var _this = this;\n\n          var order = {};\n\n          var _loop_3 = function _loop_3(layer) {\n            if (!Object.prototype.hasOwnProperty.call(current, layer)) return \"continue\";\n            var nodePositions = {};\n            var nodeKeys = [];\n            current[layer].forEach(function (ni) {\n              var adjacentNodesPositions = (isParentToChildren ? graph.getChildren(ni.key) : graph.getParents(ni.key)).map(function (nk) {\n                return graph.getNode(nk).position;\n              });\n              nodeKeys.push(ni.key);\n              nodePositions[ni.key] = _this.getNodePosition(adjacentNodesPositions);\n            });\n            order[layer] = this_2.sortNodes(nodeKeys, nodePositions, graph);\n          };\n\n          var this_2 = this;\n\n          for (var layer in current) {\n            _loop_3(layer);\n          }\n\n          return order;\n        };\n\n        SugiyamaNodesOrderer.prototype.sortNodes = function (nodeKeys, nodePositions, graph) {\n          return nodeKeys.sort(function (a, b) {\n            return nodePositions[a] - nodePositions[b];\n          }).map(function (nk, index) {\n            var node = graph.getNode(nk);\n            node.position = index;\n            return node;\n          });\n        };\n\n        SugiyamaNodesOrderer.prototype.getNodePosition = function (adjacentNodesPositions) {\n          adjacentNodesPositions = adjacentNodesPositions.sort(function (a, b) {\n            return a - b;\n          });\n          if (!adjacentNodesPositions.length) return 0;\n          var medianIndex = Math.floor(adjacentNodesPositions.length / 2);\n          if (adjacentNodesPositions.length === 2 || adjacentNodesPositions.length % 2 === 1) return adjacentNodesPositions[medianIndex];\n          var leftMedianPosition = adjacentNodesPositions[medianIndex - 1] - adjacentNodesPositions[0];\n          var rightMedianPosition = adjacentNodesPositions[adjacentNodesPositions.length - 1] - adjacentNodesPositions[medianIndex];\n          return Math.floor((adjacentNodesPositions[medianIndex - 1] * rightMedianPosition + adjacentNodesPositions[medianIndex] * leftMedianPosition) / (leftMedianPosition + rightMedianPosition));\n        };\n\n        SugiyamaNodesOrderer.prototype.initOrder = function (nodeInfos) {\n          var result = {};\n          nodeInfos.forEach(function (ni) {\n            return (result[ni.layer] || (result[ni.layer] = [])).push(ni);\n          });\n          return result;\n        };\n\n        SugiyamaNodesOrderer.prototype.getCrossCount = function (orderInfo, graph) {\n          var count = 0;\n\n          var _loop_4 = function _loop_4(layer) {\n            if (!Object.prototype.hasOwnProperty.call(orderInfo, layer)) return \"continue\";\n            var viewedAdjacentNodesPositions = [];\n            orderInfo[layer].forEach(function (n) {\n              var positions = graph.getChildren(n.key).map(function (c) {\n                return graph.getNode(c).position;\n              });\n              positions.forEach(function (p) {\n                count += viewedAdjacentNodesPositions.filter(function (vp) {\n                  return p < vp;\n                }).length;\n              });\n              viewedAdjacentNodesPositions = viewedAdjacentNodesPositions.concat(positions);\n            });\n          };\n\n          for (var layer in orderInfo) {\n            _loop_4(layer);\n          }\n\n          return count;\n        };\n\n        SugiyamaNodesOrderer.prototype.initGraphInfo = function (graph, layers) {\n          var _this = this;\n\n          var countNodesOnLayer = {};\n          var nodesInfoMap = {};\n          var nodeInfos = [];\n          var edgeInfos = [];\n          graph.nodes.forEach(function (n) {\n            var layer = layers[n];\n            if (countNodesOnLayer[layer] === undefined) countNodesOnLayer[layer] = 0;\n            var info = new NodeOnLayer(n, false, layer, countNodesOnLayer[layer]++);\n            nodesInfoMap[n] = info;\n            nodeInfos.push(info);\n          });\n          graph.edges.forEach(function (e) {\n            var span = layers[e.to] - layers[e.from];\n\n            if (span > 1) {\n              var prevNodeInfo = nodesInfoMap[e.from];\n\n              for (var delta = 1; delta < span; delta++) {\n                var dNodeInfo = new NodeOnLayer(_this.createDummyID(), true, layers[e.from] + delta, countNodesOnLayer[layers[e.from] + delta]++);\n                edgeInfos.push(new EdgeOnLayer(_this.createDummyID(), true, prevNodeInfo.key, dNodeInfo.key));\n                nodeInfos.push(dNodeInfo);\n                prevNodeInfo = dNodeInfo;\n              }\n\n              edgeInfos.push(new EdgeOnLayer(e.key, false, prevNodeInfo.key, nodesInfoMap[e.to].key, nodesInfoMap[e.from].key));\n            } else edgeInfos.push(new EdgeOnLayer(e.key, false, nodesInfoMap[e.from].key, nodesInfoMap[e.to].key));\n          });\n          return new Graph_1.FastGraph(nodeInfos, edgeInfos);\n        };\n\n        SugiyamaNodesOrderer.prototype.createDummyID = function () {\n          return \"dummy_\" + --this.idCounter;\n        };\n\n        SugiyamaNodesOrderer.prototype.getNodeToPositionMap = function (nodeInfos) {\n          return nodeInfos.reduce(function (acc, ni) {\n            acc[ni.key] = ni.position;\n            return acc;\n          }, {});\n        }; // absolute positioning\n\n\n        SugiyamaNodesOrderer.prototype.assignAbsCoordinates = function (graph) {\n          var absCoordinates = this.getAbsCoodinate(graph);\n          return new Graph_1.FastGraph(graph.items.map(function (n) {\n            return new NodeOnLayer(n.key, n.isDummy, n.layer, absCoordinates[n.key]);\n          }), graph.edges.slice(0));\n        };\n\n        SugiyamaNodesOrderer.prototype.getAbsCoodinate = function (graph) {\n          var _this = this;\n\n          var orderInfo = graph.items.reduce(function (acc, n) {\n            acc[n.layer] = acc[n.layer] || [];\n            var pos = search_1.SearchUtils.binaryIndexOf(acc[n.layer], function (ni) {\n              return ni.position - n.position;\n            });\n            acc[n.layer].splice(pos < 0 ? ~pos : pos, 0, n);\n            return acc;\n          }, {});\n          var medianPositions = [MedianAlignmentMode.TopLeft, MedianAlignmentMode.TopRight, MedianAlignmentMode.BottomLeft, MedianAlignmentMode.BottomRight].map(function (alignment) {\n            return _this.getPositionByMedian(graph, alignment, orderInfo);\n          });\n          var nodeToPosition = {};\n          graph.items.forEach(function (n) {\n            var posList = medianPositions.map(function (positions) {\n              return positions[n.key];\n            }).sort(function (a, b) {\n              return a - b;\n            });\n            nodeToPosition[n.key] = (posList[1] + posList[2]) / 2;\n          });\n          return nodeToPosition;\n        };\n\n        SugiyamaNodesOrderer.prototype.getPositionByMedian = function (graph, alignment, orderInfo) {\n          var nodeInfos = graph.items;\n          var positions = this.getNodeToPositionMap(nodeInfos);\n          var medians = this.getMedians(graph, nodeInfos, alignment);\n          medians = this.resolveMedianConflicts(graph, orderInfo, medians, alignment);\n          this.getSortedBlocks(graph, nodeInfos, medians, alignment).forEach(function (block) {\n            var maxPos = block.reduce(function (acc, n) {\n              return positions[n.key] > acc ? positions[n.key] : acc;\n            }, -2);\n            block.forEach(function (n) {\n              var delta = maxPos - positions[n.key];\n              if (delta > 0) orderInfo[n.layer].filter(function (ln) {\n                return ln.position > n.position;\n              }).forEach(function (ln) {\n                return positions[ln.key] += delta;\n              });\n              positions[n.key] = maxPos;\n            });\n          });\n          return positions;\n        };\n\n        SugiyamaNodesOrderer.prototype.getSortedBlocks = function (graph, nodeInfos, medians, alignment) {\n          var blocks = [];\n          var isBottom = alignment === MedianAlignmentMode.BottomLeft || alignment === MedianAlignmentMode.BottomRight;\n          var allNodesInfo = new ListUtils_1.HashSet(nodeInfos.slice(0).sort(function (a, b) {\n            return isBottom ? a.layer - b.layer : b.layer - a.layer;\n          }), function (n) {\n            return n.key;\n          });\n\n          while (allNodesInfo.length) {\n            var firstNode = allNodesInfo.item(0);\n            var block = this.getBlock(graph, firstNode, medians, alignment);\n            blocks.push(block);\n            block.forEach(function (n) {\n              return allNodesInfo.remove(n);\n            });\n          }\n\n          blocks.sort(function (x, y) {\n            var xMinNodeInfo = x.reduce(function (min, n) {\n              return n.position < min.position ? n : min;\n            }, x[0]);\n            var yOnMinXLayer = y.filter(function (n) {\n              return n.layer === xMinNodeInfo.layer;\n            })[0];\n            if (yOnMinXLayer) return xMinNodeInfo.position > yOnMinXLayer.position ? 1 : -1;\n            var yMinNodeInfo = y.reduce(function (min, n) {\n              return n.position < min.position ? n : min;\n            }, y[0]);\n            var xOnMinYLayer = x.filter(function (n) {\n              return n.layer === yMinNodeInfo.layer;\n            })[0];\n            if (xOnMinYLayer) return xOnMinYLayer.position > yMinNodeInfo.position ? 1 : -1;\n            return xMinNodeInfo.layer > yMinNodeInfo.layer ? 1 : -1;\n          });\n          return blocks;\n        };\n\n        SugiyamaNodesOrderer.prototype.getBlock = function (graph, root, medians, alignment) {\n          var block = [];\n          var median = null;\n\n          do {\n            if (median) root = alignment === MedianAlignmentMode.TopLeft || alignment === MedianAlignmentMode.TopRight ? graph.getNode(median.from) : graph.getNode(median.to);\n            block.push(root);\n            median = medians[root.key];\n          } while (median);\n\n          return block;\n        };\n\n        SugiyamaNodesOrderer.prototype.resolveMedianConflicts = function (graph, layers, medians, alignment) {\n          var _this = this;\n\n          var filteredMedians = {};\n\n          var _loop_5 = function _loop_5(layer) {\n            if (!Object.prototype.hasOwnProperty.call(layers, layer)) return \"continue\";\n            var minPos;\n            var maxPos;\n            var nodeInfos = layers[layer];\n            if (alignment === MedianAlignmentMode.TopRight || alignment === MedianAlignmentMode.BottomRight) nodeInfos = nodeInfos.slice(0).sort(function (a, b) {\n              return b.position - a.position;\n            }); // sorted descending\n\n            nodeInfos.forEach(function (n) {\n              var median = medians[n.key];\n              if (!median) filteredMedians[n.key] = null;else {\n                var medianItemKey = alignment === MedianAlignmentMode.TopLeft || alignment === MedianAlignmentMode.TopRight ? median.from : median.to;\n                var medianPosition = graph.getNode(medianItemKey).position;\n                if (_this.checkMedianConfict(minPos, maxPos, medianPosition, alignment)) filteredMedians[n.key] = null;else {\n                  minPos = minPos === undefined ? medianPosition : Math.min(minPos, medianPosition);\n                  maxPos = maxPos === undefined ? medianPosition : Math.max(maxPos, medianPosition);\n                  filteredMedians[n.key] = median;\n                }\n              }\n            });\n          };\n\n          for (var layer in layers) {\n            _loop_5(layer);\n          }\n\n          return filteredMedians;\n        };\n\n        SugiyamaNodesOrderer.prototype.checkMedianConfict = function (min, max, medianPosition, alignment) {\n          if (min === undefined || max === undefined) return false;\n          if (alignment === MedianAlignmentMode.TopLeft || alignment === MedianAlignmentMode.BottomLeft) return max >= medianPosition;\n          return min <= medianPosition;\n        };\n\n        SugiyamaNodesOrderer.prototype.getMedians = function (graph, nodeInfos, alignment) {\n          var _this = this;\n\n          var medians = {};\n          nodeInfos.forEach(function (n) {\n            var actualAdjacentEdges = _this.getActualAdjacentEdges(graph, n, alignment);\n\n            var medianPosition = _this.getMedianPosition(actualAdjacentEdges.length, alignment);\n\n            medians[n.key] = actualAdjacentEdges[medianPosition];\n          });\n          return medians;\n        };\n\n        SugiyamaNodesOrderer.prototype.getMedianPosition = function (length, alignment) {\n          if (length === 0) return -1;\n          if (length % 2 !== 0) return Math.floor(length / 2);\n          if (alignment === MedianAlignmentMode.TopLeft || alignment === MedianAlignmentMode.BottomLeft) return Math.floor(length / 2) - 1;\n          if (alignment === MedianAlignmentMode.TopRight || alignment === MedianAlignmentMode.BottomRight) return Math.floor(length / 2);\n          throw new Error(\"Invalid Operation\");\n        };\n\n        SugiyamaNodesOrderer.prototype.getActualAdjacentEdges = function (graph, node, alignment) {\n          if (alignment === MedianAlignmentMode.TopLeft || alignment === MedianAlignmentMode.TopRight) return graph.getAdjacentEdges(node.key, Structures_1.ConnectionMode.Incoming).sort(function (a, b) {\n            return graph.getNode(a.from).position - graph.getNode(b.from).position;\n          });\n          return graph.getAdjacentEdges(node.key, Structures_1.ConnectionMode.Outgoing).sort(function (a, b) {\n            return graph.getNode(a.to).position - graph.getNode(b.to).position;\n          });\n        };\n\n        return SugiyamaNodesOrderer;\n      }();\n\n      exports.SugiyamaNodesOrderer = SugiyamaNodesOrderer;\n\n      var NodeOnLayer =\n      /** @class */\n      function () {\n        function NodeOnLayer(key, isDummy, layer, position) {\n          this.key = key;\n          this.isDummy = isDummy;\n          this.layer = layer;\n          this.position = position;\n        }\n\n        NodeOnLayer.prototype.getHashCode = function () {\n          return this.key.toString();\n        };\n\n        return NodeOnLayer;\n      }();\n\n      exports.NodeOnLayer = NodeOnLayer;\n\n      var EdgeOnLayer =\n      /** @class */\n      function () {\n        function EdgeOnLayer(key, isDummy, from, to, originFrom) {\n          this.key = key;\n          this.isDummy = isDummy;\n          this.from = from;\n          this.to = to;\n          this._originFrom = originFrom;\n        }\n\n        EdgeOnLayer.prototype.getHashCode = function () {\n          return this.from + \"-\" + this.to;\n        };\n\n        Object.defineProperty(EdgeOnLayer.prototype, \"originFrom\", {\n          get: function get() {\n            return this._originFrom !== undefined ? this._originFrom : this.from;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        return EdgeOnLayer;\n      }();\n\n      exports.EdgeOnLayer = EdgeOnLayer;\n      var MedianAlignmentMode;\n\n      (function (MedianAlignmentMode) {\n        MedianAlignmentMode[MedianAlignmentMode[\"TopLeft\"] = 0] = \"TopLeft\";\n        MedianAlignmentMode[MedianAlignmentMode[\"TopRight\"] = 1] = \"TopRight\";\n        MedianAlignmentMode[MedianAlignmentMode[\"BottomLeft\"] = 2] = \"BottomLeft\";\n        MedianAlignmentMode[MedianAlignmentMode[\"BottomRight\"] = 3] = \"BottomRight\";\n      })(MedianAlignmentMode || (MedianAlignmentMode = {}));\n\n      function trunc(val) {\n        if (Math.trunc) return Math.trunc(val);\n        if (!isFinite(val)) return val;\n        return val - val % 1 || (val < 0 ? -0 : val === 0 ? val : 0);\n      }\n      /***/\n\n    },\n    /* 79 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var BatchUpdatableObject = function () {\n        function BatchUpdatableObject() {\n          this.suspendUpdateCount = 0;\n          this.occurredEvents = 0;\n        }\n\n        BatchUpdatableObject.prototype.beginUpdate = function () {\n          if (this.suspendUpdateCount === 0) this.onUpdateLocked();\n          if (this.suspendUpdateCount < 0) this.suspendUpdateCount--;else this.suspendUpdateCount++;\n        };\n\n        BatchUpdatableObject.prototype.endUpdate = function () {\n          if (this.suspendUpdateCount < 0) this.suspendUpdateCount++;else if (this.suspendUpdateCount > 0) this.suspendUpdateCount--;\n\n          if (!this.isUpdateLocked()) {\n            var occurredEvents = this.occurredEvents;\n            this.occurredEvents = 0;\n            this.onUpdateUnlocked(occurredEvents);\n          }\n        };\n\n        BatchUpdatableObject.prototype.suspendUpdate = function () {\n          if (this.suspendUpdateCount > 0) {\n            this.suspendUpdateCount *= -1;\n            var occurredEvents = this.occurredEvents;\n            this.occurredEvents = 0;\n            this.onUpdateUnlocked(occurredEvents);\n          }\n        };\n\n        BatchUpdatableObject.prototype.continueUpdate = function () {\n          if (this.suspendUpdateCount < 0) this.suspendUpdateCount *= -1;\n        };\n\n        BatchUpdatableObject.prototype.isUpdateLocked = function () {\n          return this.suspendUpdateCount > 0;\n        };\n\n        BatchUpdatableObject.prototype.onUpdateLocked = function () {};\n\n        BatchUpdatableObject.prototype.registerOccurredEvent = function (eventMask) {\n          this.occurredEvents |= eventMask;\n        };\n\n        BatchUpdatableObject.prototype.resetOccurredEvents = function () {\n          this.occurredEvents = 0;\n        };\n\n        BatchUpdatableObject.prototype.isLocked = function () {\n          return this.suspendUpdateCount !== 0;\n        };\n\n        return BatchUpdatableObject;\n      }();\n\n      exports.BatchUpdatableObject = BatchUpdatableObject;\n\n      var EmptyBatchUpdatableObject = function () {\n        function EmptyBatchUpdatableObject() {}\n\n        EmptyBatchUpdatableObject.prototype.beginUpdate = function () {};\n\n        EmptyBatchUpdatableObject.prototype.endUpdate = function () {};\n\n        return EmptyBatchUpdatableObject;\n      }();\n\n      exports.EmptyBatchUpdatableObject = EmptyBatchUpdatableObject;\n      /***/\n    },\n    /* 80 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var browser_1 = __webpack_require__(17);\n\n      var common_1 = __webpack_require__(48);\n\n      var dom_1 = __webpack_require__(26);\n\n      var touch_1 = __webpack_require__(105);\n\n      var EvtUtils = function () {\n        function EvtUtils() {}\n\n        EvtUtils.preventEvent = function (evt) {\n          if (evt.preventDefault) evt.preventDefault();else evt.returnValue = false;\n        };\n\n        EvtUtils.getEventSource = function (evt) {\n          if (!common_1.isDefined(evt)) return null;\n          return evt.srcElement ? evt.srcElement : evt.target;\n        };\n\n        EvtUtils.getEventSourceByPosition = function (evt) {\n          if (!common_1.isDefined(evt)) return null;\n          if (document.elementFromPoint && EvtUtils.getEventX(evt) !== undefined && EvtUtils.getEventY(evt) !== undefined) return document.elementFromPoint(EvtUtils.getEventX(evt), EvtUtils.getEventY(evt));\n          return evt.srcElement ? evt.srcElement : evt.target;\n        };\n\n        EvtUtils.getMouseWheelEventName = function () {\n          if (browser_1.Browser.Safari) return 'mousewheel';\n          if (browser_1.Browser.NetscapeFamily && browser_1.Browser.MajorVersion < 17) return 'DOMMouseScroll';\n          return 'wheel';\n        };\n\n        EvtUtils.isLeftButtonPressed = function (evt) {\n          if (touch_1.TouchUtils.isTouchEvent(evt)) return true;\n          evt = browser_1.Browser.IE && common_1.isDefined(event) ? event : evt;\n          if (!evt) return false;\n\n          if (browser_1.Browser.IE && browser_1.Browser.Version < 11) {\n            if (browser_1.Browser.MSTouchUI) return true;\n            return evt.button % 2 === 1;\n          } else if (browser_1.Browser.WebKitFamily) {\n            if (evt.type === 'pointermove') return evt.buttons === 1;\n            return evt.which === 1;\n          } else if (browser_1.Browser.NetscapeFamily || browser_1.Browser.Edge || browser_1.Browser.IE && browser_1.Browser.Version >= 11) {\n            if (evt.type === touch_1.TouchUtils.touchMouseMoveEventName) return evt.buttons === 1;\n            return evt.which === 1;\n          } else if (browser_1.Browser.Opera) return evt.button === 0;\n\n          return true;\n        };\n\n        EvtUtils.preventEventAndBubble = function (evt) {\n          EvtUtils.preventEvent(evt);\n          if (evt.stopPropagation) evt.stopPropagation();\n          evt.cancelBubble = true;\n        };\n\n        EvtUtils.clientEventRequiresDocScrollCorrection = function () {\n          var isSafariVerLess3 = browser_1.Browser.Safari && browser_1.Browser.Version < 3;\n          var isMacOSMobileVerLess51 = browser_1.Browser.MacOSMobilePlatform && browser_1.Browser.Version < 5.1;\n          return browser_1.Browser.AndroidDefaultBrowser || browser_1.Browser.AndroidChromeBrowser || !(isSafariVerLess3 || isMacOSMobileVerLess51);\n        };\n\n        EvtUtils.getEventX = function (evt) {\n          if (touch_1.TouchUtils.isTouchEvent(evt)) return touch_1.TouchUtils.getEventX(evt);\n          return evt.clientX + (EvtUtils.clientEventRequiresDocScrollCorrection() ? dom_1.DomUtils.getDocumentScrollLeft() : 0);\n        };\n\n        EvtUtils.getEventY = function (evt) {\n          if (touch_1.TouchUtils.isTouchEvent(evt)) return touch_1.TouchUtils.getEventY(evt);\n          return evt.clientY + (EvtUtils.clientEventRequiresDocScrollCorrection() ? dom_1.DomUtils.getDocumentScrollTop() : 0);\n        };\n\n        EvtUtils.cancelBubble = function (evt) {\n          evt.cancelBubble = true;\n        };\n\n        EvtUtils.getWheelDelta = function (evt) {\n          var ret;\n          if (browser_1.Browser.NetscapeFamily && browser_1.Browser.MajorVersion < 17) ret = -evt.detail;else if (browser_1.Browser.Safari) ret = evt.wheelDelta;else ret = -evt.deltaY;\n          if (browser_1.Browser.Opera && browser_1.Browser.Version < 9) ret = -ret;\n          return ret;\n        };\n\n        return EvtUtils;\n      }();\n\n      exports.EvtUtils = EvtUtils;\n      /***/\n    },\n    /* 81 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.CommandManager = exports.DiagramCommand = void 0;\n\n      var DeleteCommand_1 = __webpack_require__(162);\n\n      var UndoCommand_1 = __webpack_require__(200);\n\n      var RedoCommand_1 = __webpack_require__(201);\n\n      var ImportCommand_1 = __webpack_require__(202);\n\n      var ExportCommand_1 = __webpack_require__(239);\n\n      var ToggleFontBoldCommand_1 = __webpack_require__(240);\n\n      var ToggleFontItalicCommand_1 = __webpack_require__(241);\n\n      var ToggleFontUnderlineCommand_1 = __webpack_require__(242);\n\n      var ChangeFontNameCommand_1 = __webpack_require__(243);\n\n      var ChangeFontSizeCommand_1 = __webpack_require__(244);\n\n      var ChangeFontColorCommand_1 = __webpack_require__(245);\n\n      var ChangeFillColorCommand_1 = __webpack_require__(246);\n\n      var ChangeStrokeColorCommand_1 = __webpack_require__(247);\n\n      var ChangeTextAlignCommand_1 = __webpack_require__(248);\n\n      var ChangeConnectorLineEndingCommand_1 = __webpack_require__(249);\n\n      var ChangeConnectorLineOptionCommand_1 = __webpack_require__(250);\n\n      var SelectAllCommand_1 = __webpack_require__(251);\n\n      var key_1 = __webpack_require__(25);\n\n      var AutoLayoutTreeVerticalCommand_1 = __webpack_require__(138);\n\n      var ChangeSnapToGridCommand_1 = __webpack_require__(254);\n\n      var ChangeGridSizeCommand_1 = __webpack_require__(255);\n\n      var ChangePageLandscapeCommand_1 = __webpack_require__(256);\n\n      var ChangePageSizeCommand_1 = __webpack_require__(258);\n\n      var ExportPngCommand_1 = __webpack_require__(260);\n\n      var ExportSvgCommand_1 = __webpack_require__(262);\n\n      var ExportJpgCommand_1 = __webpack_require__(263);\n\n      var CopySelectionCommand_1 = __webpack_require__(264);\n\n      var CutSelectionCommand_1 = __webpack_require__(265);\n\n      var PasteSelectionCommand_1 = __webpack_require__(266);\n\n      var ImportBPMNCommand_1 = __webpack_require__(269);\n\n      var SendToBackCommand_1 = __webpack_require__(272);\n\n      var BringToFrontCommand_1 = __webpack_require__(273);\n\n      var AutoLayoutLayeredHorizontalCommand_1 = __webpack_require__(143);\n\n      var MoveCommands_1 = __webpack_require__(274);\n\n      var ChangeZoomLevelCommand_1 = __webpack_require__(275);\n\n      var BindDocumentCommand_1 = __webpack_require__(276);\n\n      var UnbindDocumentCommand_1 = __webpack_require__(277);\n\n      var AutoLayoutTreeHorizontalCommand_1 = __webpack_require__(144);\n\n      var AutoLayoutLayeredVerticalCommand_1 = __webpack_require__(145);\n\n      var LockCommand_1 = __webpack_require__(278);\n\n      var UnlockCommand_1 = __webpack_require__(279);\n\n      var CloneCommand_1 = __webpack_require__(280);\n\n      var ChangeUnitsCommand_1 = __webpack_require__(281);\n\n      var ChangePageColorCommand_1 = __webpack_require__(283);\n\n      var ChangeShowGridCommand_1 = __webpack_require__(285);\n\n      var ToggleFullscreenCommand_1 = __webpack_require__(286);\n\n      var ToggleSimpleViewCommand_1 = __webpack_require__(287);\n\n      var ToggleReadOnlyCommand_1 = __webpack_require__(288);\n\n      var EditShapeImageCommand_1 = __webpack_require__(289);\n\n      var PasteSelectionInPosition_1 = __webpack_require__(290);\n\n      var ImportXMLCommand_1 = __webpack_require__(291);\n\n      var InsertShapeImageCommand_1 = __webpack_require__(293);\n\n      var DeleteShapeImageCommand_1 = __webpack_require__(294);\n\n      var ChangeStrokeStyleCommand_1 = __webpack_require__(295);\n\n      var ChangeStrokeWidthCommand_1 = __webpack_require__(296);\n\n      var AutoLayoutTreeVerticalBottomToTopCommand_1 = __webpack_require__(297);\n\n      var AutoLayoutTreeHorizontalRightToLeftCommand_1 = __webpack_require__(298);\n\n      var AutoLayoutLayeredVerticalBottomToTopCommand_1 = __webpack_require__(299);\n\n      var AutoLayoutLayeredHorizontalRightToLeftCommand_1 = __webpack_require__(300);\n\n      var ChangeConnectorRoutingModeCommand_1 = __webpack_require__(301);\n\n      var DiagramCommand;\n\n      (function (DiagramCommand) {\n        DiagramCommand[DiagramCommand[\"Undo\"] = 0] = \"Undo\";\n        DiagramCommand[DiagramCommand[\"Redo\"] = 1] = \"Redo\";\n        DiagramCommand[DiagramCommand[\"Cut\"] = 2] = \"Cut\";\n        DiagramCommand[DiagramCommand[\"Copy\"] = 3] = \"Copy\";\n        DiagramCommand[DiagramCommand[\"Paste\"] = 4] = \"Paste\";\n        DiagramCommand[DiagramCommand[\"PasteInPosition\"] = 5] = \"PasteInPosition\";\n        DiagramCommand[DiagramCommand[\"SelectAll\"] = 6] = \"SelectAll\";\n        DiagramCommand[DiagramCommand[\"Delete\"] = 7] = \"Delete\";\n        DiagramCommand[DiagramCommand[\"Import\"] = 8] = \"Import\";\n        DiagramCommand[DiagramCommand[\"ImportBPMN\"] = 9] = \"ImportBPMN\";\n        DiagramCommand[DiagramCommand[\"Export\"] = 10] = \"Export\";\n        DiagramCommand[DiagramCommand[\"ExportSvg\"] = 11] = \"ExportSvg\";\n        DiagramCommand[DiagramCommand[\"ExportPng\"] = 12] = \"ExportPng\";\n        DiagramCommand[DiagramCommand[\"ExportJpg\"] = 13] = \"ExportJpg\";\n        DiagramCommand[DiagramCommand[\"BindDocument\"] = 14] = \"BindDocument\";\n        DiagramCommand[DiagramCommand[\"UnbindDocument\"] = 15] = \"UnbindDocument\";\n        DiagramCommand[DiagramCommand[\"Bold\"] = 16] = \"Bold\";\n        DiagramCommand[DiagramCommand[\"Italic\"] = 17] = \"Italic\";\n        DiagramCommand[DiagramCommand[\"Underline\"] = 18] = \"Underline\";\n        DiagramCommand[DiagramCommand[\"FontName\"] = 19] = \"FontName\";\n        DiagramCommand[DiagramCommand[\"FontSize\"] = 20] = \"FontSize\";\n        DiagramCommand[DiagramCommand[\"FontColor\"] = 21] = \"FontColor\";\n        DiagramCommand[DiagramCommand[\"FillColor\"] = 22] = \"FillColor\";\n        DiagramCommand[DiagramCommand[\"StrokeColor\"] = 23] = \"StrokeColor\";\n        DiagramCommand[DiagramCommand[\"TextLeftAlign\"] = 24] = \"TextLeftAlign\";\n        DiagramCommand[DiagramCommand[\"TextCenterAlign\"] = 25] = \"TextCenterAlign\";\n        DiagramCommand[DiagramCommand[\"TextRightAlign\"] = 26] = \"TextRightAlign\";\n        DiagramCommand[DiagramCommand[\"ConnectorLineOption\"] = 27] = \"ConnectorLineOption\";\n        DiagramCommand[DiagramCommand[\"ConnectorStartLineEnding\"] = 28] = \"ConnectorStartLineEnding\";\n        DiagramCommand[DiagramCommand[\"ConnectorEndLineEnding\"] = 29] = \"ConnectorEndLineEnding\";\n        DiagramCommand[DiagramCommand[\"BringToFront\"] = 30] = \"BringToFront\";\n        DiagramCommand[DiagramCommand[\"SendToBack\"] = 31] = \"SendToBack\";\n        DiagramCommand[DiagramCommand[\"MoveLeft\"] = 32] = \"MoveLeft\";\n        DiagramCommand[DiagramCommand[\"MoveStepLeft\"] = 33] = \"MoveStepLeft\";\n        DiagramCommand[DiagramCommand[\"MoveRight\"] = 34] = \"MoveRight\";\n        DiagramCommand[DiagramCommand[\"MoveStepRight\"] = 35] = \"MoveStepRight\";\n        DiagramCommand[DiagramCommand[\"MoveUp\"] = 36] = \"MoveUp\";\n        DiagramCommand[DiagramCommand[\"MoveStepUp\"] = 37] = \"MoveStepUp\";\n        DiagramCommand[DiagramCommand[\"MoveDown\"] = 38] = \"MoveDown\";\n        DiagramCommand[DiagramCommand[\"MoveStepDown\"] = 39] = \"MoveStepDown\";\n        DiagramCommand[DiagramCommand[\"CloneLeft\"] = 40] = \"CloneLeft\";\n        DiagramCommand[DiagramCommand[\"CloneRight\"] = 41] = \"CloneRight\";\n        DiagramCommand[DiagramCommand[\"CloneUp\"] = 42] = \"CloneUp\";\n        DiagramCommand[DiagramCommand[\"CloneDown\"] = 43] = \"CloneDown\";\n        DiagramCommand[DiagramCommand[\"AutoLayoutTree\"] = 44] = \"AutoLayoutTree\";\n        DiagramCommand[DiagramCommand[\"AutoLayoutFlow\"] = 45] = \"AutoLayoutFlow\";\n        DiagramCommand[DiagramCommand[\"AutoLayoutTreeVertical\"] = 46] = \"AutoLayoutTreeVertical\";\n        DiagramCommand[DiagramCommand[\"AutoLayoutTreeHorizontal\"] = 47] = \"AutoLayoutTreeHorizontal\";\n        DiagramCommand[DiagramCommand[\"AutoLayoutLayeredVertical\"] = 48] = \"AutoLayoutLayeredVertical\";\n        DiagramCommand[DiagramCommand[\"AutoLayoutLayeredHorizontal\"] = 49] = \"AutoLayoutLayeredHorizontal\";\n        DiagramCommand[DiagramCommand[\"Lock\"] = 50] = \"Lock\";\n        DiagramCommand[DiagramCommand[\"Unlock\"] = 51] = \"Unlock\";\n        DiagramCommand[DiagramCommand[\"Units\"] = 52] = \"Units\";\n        DiagramCommand[DiagramCommand[\"ViewUnits\"] = 53] = \"ViewUnits\";\n        DiagramCommand[DiagramCommand[\"PageSize\"] = 54] = \"PageSize\";\n        DiagramCommand[DiagramCommand[\"PageLandscape\"] = 55] = \"PageLandscape\";\n        DiagramCommand[DiagramCommand[\"PageColor\"] = 56] = \"PageColor\";\n        DiagramCommand[DiagramCommand[\"GridSize\"] = 57] = \"GridSize\";\n        DiagramCommand[DiagramCommand[\"ShowGrid\"] = 58] = \"ShowGrid\";\n        DiagramCommand[DiagramCommand[\"SnapToGrid\"] = 59] = \"SnapToGrid\";\n        DiagramCommand[DiagramCommand[\"ZoomLevel\"] = 60] = \"ZoomLevel\";\n        DiagramCommand[DiagramCommand[\"Fullscreen\"] = 61] = \"Fullscreen\";\n        DiagramCommand[DiagramCommand[\"ToggleSimpleView\"] = 62] = \"ToggleSimpleView\";\n        DiagramCommand[DiagramCommand[\"ToggleReadOnly\"] = 63] = \"ToggleReadOnly\";\n        DiagramCommand[DiagramCommand[\"EditShapeImage\"] = 64] = \"EditShapeImage\";\n        DiagramCommand[DiagramCommand[\"FitToScreen\"] = 65] = \"FitToScreen\";\n        DiagramCommand[DiagramCommand[\"SwitchAutoZoom\"] = 66] = \"SwitchAutoZoom\";\n        DiagramCommand[DiagramCommand[\"ToggleAutoZoom\"] = 67] = \"ToggleAutoZoom\";\n        DiagramCommand[DiagramCommand[\"FitToWidth\"] = 68] = \"FitToWidth\";\n        DiagramCommand[DiagramCommand[\"ZoomLevelItems\"] = 69] = \"ZoomLevelItems\";\n        DiagramCommand[DiagramCommand[\"GridSizeItems\"] = 70] = \"GridSizeItems\";\n        DiagramCommand[DiagramCommand[\"PageSizeItems\"] = 71] = \"PageSizeItems\";\n        DiagramCommand[DiagramCommand[\"ImportXML\"] = 72] = \"ImportXML\";\n        DiagramCommand[DiagramCommand[\"InsertShapeImage\"] = 73] = \"InsertShapeImage\";\n        DiagramCommand[DiagramCommand[\"DeleteShapeImage\"] = 74] = \"DeleteShapeImage\";\n        DiagramCommand[DiagramCommand[\"StrokeStyle\"] = 75] = \"StrokeStyle\";\n        DiagramCommand[DiagramCommand[\"StrokeWidth\"] = 76] = \"StrokeWidth\";\n        DiagramCommand[DiagramCommand[\"AutoLayoutTreeVerticalBottomToTop\"] = 77] = \"AutoLayoutTreeVerticalBottomToTop\";\n        DiagramCommand[DiagramCommand[\"AutoLayoutTreeHorizontalRightToLeft\"] = 78] = \"AutoLayoutTreeHorizontalRightToLeft\";\n        DiagramCommand[DiagramCommand[\"AutoLayoutLayeredVerticalBottomToTop\"] = 79] = \"AutoLayoutLayeredVerticalBottomToTop\";\n        DiagramCommand[DiagramCommand[\"AutoLayoutLayeredHorizontalRightToLeft\"] = 80] = \"AutoLayoutLayeredHorizontalRightToLeft\";\n        DiagramCommand[DiagramCommand[\"Zoom25\"] = 81] = \"Zoom25\";\n        DiagramCommand[DiagramCommand[\"Zoom50\"] = 82] = \"Zoom50\";\n        DiagramCommand[DiagramCommand[\"Zoom75\"] = 83] = \"Zoom75\";\n        DiagramCommand[DiagramCommand[\"Zoom100\"] = 84] = \"Zoom100\";\n        DiagramCommand[DiagramCommand[\"Zoom125\"] = 85] = \"Zoom125\";\n        DiagramCommand[DiagramCommand[\"Zoom150\"] = 86] = \"Zoom150\";\n        DiagramCommand[DiagramCommand[\"Zoom200\"] = 87] = \"Zoom200\";\n        DiagramCommand[DiagramCommand[\"AutoZoomToContent\"] = 88] = \"AutoZoomToContent\";\n        DiagramCommand[DiagramCommand[\"AutoZoomToWidth\"] = 89] = \"AutoZoomToWidth\";\n        DiagramCommand[DiagramCommand[\"ZoomLevelInPercentage\"] = 90] = \"ZoomLevelInPercentage\";\n        DiagramCommand[DiagramCommand[\"ConnectorRoutingMode\"] = 91] = \"ConnectorRoutingMode\";\n      })(DiagramCommand = exports.DiagramCommand || (exports.DiagramCommand = {}));\n\n      var CommandManager =\n      /** @class */\n      function () {\n        function CommandManager(control) {\n          this.commands = {};\n          this.shortcutsToCommand = {};\n          this.lastCommandsChain = [];\n          this.executingCommandsChain = [];\n          this.executingCommandCounter = 0;\n          this.isPublicApiCall = false;\n          this.createCommand(control, DiagramCommand.Undo, UndoCommand_1.UndoCommand, key_1.ModifierKey.Ctrl | key_1.KeyCode.Key_z, key_1.ModifierKey.Meta | key_1.KeyCode.Key_z);\n          this.createCommand(control, DiagramCommand.Redo, RedoCommand_1.RedoCommand, key_1.ModifierKey.Ctrl | key_1.KeyCode.Key_y, key_1.ModifierKey.Ctrl | key_1.ModifierKey.Shift | key_1.KeyCode.Key_z, key_1.ModifierKey.Meta | key_1.ModifierKey.Shift | key_1.KeyCode.Key_z);\n          this.createCommand(control, DiagramCommand.Cut, CutSelectionCommand_1.CutSelectionCommand, key_1.KeyCode.Key_x | key_1.ModifierKey.Ctrl, key_1.KeyCode.Key_x | key_1.ModifierKey.Meta, key_1.KeyCode.Delete | key_1.ModifierKey.Shift);\n          this.createCommand(control, DiagramCommand.Copy, CopySelectionCommand_1.CopySelectionCommand, key_1.KeyCode.Key_c | key_1.ModifierKey.Ctrl, key_1.KeyCode.Key_c | key_1.ModifierKey.Meta, key_1.KeyCode.Insert | key_1.ModifierKey.Ctrl);\n          this.createCommand(control, DiagramCommand.Paste, PasteSelectionCommand_1.PasteSelectionCommand);\n          this.createCommand(control, DiagramCommand.PasteInPosition, PasteSelectionInPosition_1.PasteSelectionInPositionCommand);\n          this.createCommand(control, DiagramCommand.SelectAll, SelectAllCommand_1.SelectAllCommand, key_1.KeyCode.Key_a | key_1.ModifierKey.Ctrl, key_1.KeyCode.Key_a | key_1.ModifierKey.Meta);\n          this.createCommand(control, DiagramCommand.Delete, DeleteCommand_1.DeleteCommand, key_1.KeyCode.Delete, key_1.KeyCode.Backspace);\n          this.createCommand(control, DiagramCommand.Import, ImportCommand_1.ImportCommand);\n          this.createCommand(control, DiagramCommand.ImportBPMN, ImportBPMNCommand_1.ImportBPMNCommand);\n          this.createCommand(control, DiagramCommand.ImportXML, ImportXMLCommand_1.ImportXMLCommand);\n          this.createCommand(control, DiagramCommand.Export, ExportCommand_1.ExportCommand);\n          this.createCommand(control, DiagramCommand.ExportSvg, ExportSvgCommand_1.ExportSvgCommand);\n          this.createCommand(control, DiagramCommand.ExportPng, ExportPngCommand_1.ExportPngCommand);\n          this.createCommand(control, DiagramCommand.ExportJpg, ExportJpgCommand_1.ExportJpgCommand);\n          this.createCommand(control, DiagramCommand.BindDocument, BindDocumentCommand_1.BindDocumentCommand);\n          this.createCommand(control, DiagramCommand.UnbindDocument, UnbindDocumentCommand_1.UnbindDocumentCommand);\n          this.createCommand(control, DiagramCommand.Bold, ToggleFontBoldCommand_1.ToggleFontBoldCommand, key_1.ModifierKey.Ctrl | key_1.KeyCode.Key_b, key_1.ModifierKey.Meta | key_1.KeyCode.Key_b);\n          this.createCommand(control, DiagramCommand.Italic, ToggleFontItalicCommand_1.ToggleFontItalicCommand, key_1.ModifierKey.Ctrl | key_1.KeyCode.Key_i, key_1.ModifierKey.Meta | key_1.KeyCode.Key_i);\n          this.createCommand(control, DiagramCommand.Underline, ToggleFontUnderlineCommand_1.ToggleFontUnderlineCommand, key_1.ModifierKey.Ctrl | key_1.KeyCode.Key_u, key_1.ModifierKey.Meta | key_1.KeyCode.Key_u);\n          this.createCommand(control, DiagramCommand.FontName, ChangeFontNameCommand_1.ChangeFontNameCommand);\n          this.createCommand(control, DiagramCommand.FontSize, ChangeFontSizeCommand_1.ChangeFontSizeCommand);\n          this.createCommand(control, DiagramCommand.FontColor, ChangeFontColorCommand_1.ChangeFontColorCommand);\n          this.createCommand(control, DiagramCommand.FillColor, ChangeFillColorCommand_1.ChangeFillColorCommand);\n          this.createCommand(control, DiagramCommand.StrokeColor, ChangeStrokeColorCommand_1.ChangeStrokeColorCommand);\n          this.createCommand(control, DiagramCommand.StrokeStyle, ChangeStrokeStyleCommand_1.ChangeStrokeStyleCommand);\n          this.createCommand(control, DiagramCommand.StrokeWidth, ChangeStrokeWidthCommand_1.ChangeStrokeWidthCommand);\n          this.createCommand(control, DiagramCommand.TextLeftAlign, ChangeTextAlignCommand_1.TextLeftAlignCommand);\n          this.createCommand(control, DiagramCommand.TextCenterAlign, ChangeTextAlignCommand_1.TextCenterAlignCommand);\n          this.createCommand(control, DiagramCommand.TextRightAlign, ChangeTextAlignCommand_1.TextRightAlignCommand);\n          this.createCommand(control, DiagramCommand.ConnectorLineOption, ChangeConnectorLineOptionCommand_1.ChangeConnectorLineOptionCommand);\n          this.createCommand(control, DiagramCommand.ConnectorStartLineEnding, ChangeConnectorLineEndingCommand_1.ChangeConnectorStartLineEndingCommand);\n          this.createCommand(control, DiagramCommand.ConnectorEndLineEnding, ChangeConnectorLineEndingCommand_1.ChangeConnectorEndLineEndingCommand);\n          this.createCommand(control, DiagramCommand.BringToFront, BringToFrontCommand_1.BringToFrontCommand);\n          this.createCommand(control, DiagramCommand.SendToBack, SendToBackCommand_1.SendToBackCommand);\n          this.createCommand(control, DiagramCommand.MoveLeft, MoveCommands_1.MoveLeftCommand, key_1.ModifierKey.Ctrl | key_1.KeyCode.Left, key_1.ModifierKey.Ctrl | key_1.ModifierKey.Shift | key_1.KeyCode.Left);\n          this.createCommand(control, DiagramCommand.MoveRight, MoveCommands_1.MoveRightCommand, key_1.ModifierKey.Ctrl | key_1.KeyCode.Right, key_1.ModifierKey.Ctrl | key_1.ModifierKey.Shift | key_1.KeyCode.Right);\n          this.createCommand(control, DiagramCommand.MoveUp, MoveCommands_1.MoveUpCommand, key_1.ModifierKey.Ctrl | key_1.KeyCode.Up, key_1.ModifierKey.Ctrl | key_1.ModifierKey.Shift | key_1.KeyCode.Up);\n          this.createCommand(control, DiagramCommand.MoveDown, MoveCommands_1.MoveDownCommand, key_1.ModifierKey.Ctrl | key_1.KeyCode.Down, key_1.ModifierKey.Ctrl | key_1.ModifierKey.Shift | key_1.KeyCode.Down);\n          this.createCommand(control, DiagramCommand.MoveStepLeft, MoveCommands_1.MoveStepLeftCommand, key_1.KeyCode.Left, key_1.ModifierKey.Shift | key_1.KeyCode.Left);\n          this.createCommand(control, DiagramCommand.MoveStepRight, MoveCommands_1.MoveStepRightCommand, key_1.KeyCode.Right, key_1.ModifierKey.Shift | key_1.KeyCode.Right);\n          this.createCommand(control, DiagramCommand.MoveStepUp, MoveCommands_1.MoveStepUpCommand, key_1.KeyCode.Up, key_1.ModifierKey.Shift | key_1.KeyCode.Up);\n          this.createCommand(control, DiagramCommand.MoveStepDown, MoveCommands_1.MoveStepDownCommand, key_1.KeyCode.Down, key_1.ModifierKey.Shift | key_1.KeyCode.Down);\n          this.createCommand(control, DiagramCommand.CloneLeft, CloneCommand_1.CloneLeftCommand, key_1.ModifierKey.Alt | key_1.KeyCode.Left, key_1.ModifierKey.Alt | key_1.ModifierKey.Shift | key_1.KeyCode.Left);\n          this.createCommand(control, DiagramCommand.CloneRight, CloneCommand_1.CloneRightCommand, key_1.ModifierKey.Alt | key_1.KeyCode.Right, key_1.ModifierKey.Alt | key_1.ModifierKey.Shift | key_1.KeyCode.Right);\n          this.createCommand(control, DiagramCommand.CloneUp, CloneCommand_1.CloneUpCommand, key_1.ModifierKey.Alt | key_1.KeyCode.Up, key_1.ModifierKey.Alt | key_1.ModifierKey.Shift | key_1.KeyCode.Up);\n          this.createCommand(control, DiagramCommand.CloneDown, CloneCommand_1.CloneDownCommand, key_1.ModifierKey.Alt | key_1.KeyCode.Down, key_1.ModifierKey.Alt | key_1.ModifierKey.Shift | key_1.KeyCode.Down);\n          this.createCommand(control, DiagramCommand.Lock, LockCommand_1.LockCommand);\n          this.createCommand(control, DiagramCommand.Unlock, UnlockCommand_1.UnLockCommand);\n          this.createCommand(control, DiagramCommand.AutoLayoutTree, AutoLayoutTreeVerticalCommand_1.AutoLayoutTreeVerticalCommand); // TODO: remove after, need for BC\n\n          this.createCommand(control, DiagramCommand.AutoLayoutFlow, AutoLayoutLayeredHorizontalCommand_1.AutoLayoutLayeredHorizontalCommand); // TODO: remove after, need for BC\n\n          this.createCommand(control, DiagramCommand.Units, ChangeUnitsCommand_1.ChangeUnitsCommand);\n          this.createCommand(control, DiagramCommand.ViewUnits, ChangeUnitsCommand_1.ChangeViewUnitsCommand);\n          this.createCommand(control, DiagramCommand.PageSize, ChangePageSizeCommand_1.ChangePageSizeCommand);\n          this.createCommand(control, DiagramCommand.PageLandscape, ChangePageLandscapeCommand_1.ChangePageLandscapeCommand);\n          this.createCommand(control, DiagramCommand.PageColor, ChangePageColorCommand_1.ChangePageColorCommand);\n          this.createCommand(control, DiagramCommand.GridSize, ChangeGridSizeCommand_1.ChangeGridSizeCommand);\n          this.createCommand(control, DiagramCommand.ShowGrid, ChangeShowGridCommand_1.ChangeShowGridCommand);\n          this.createCommand(control, DiagramCommand.SnapToGrid, ChangeSnapToGridCommand_1.ChangeSnapToGridCommand);\n          this.createCommand(control, DiagramCommand.ZoomLevel, ChangeZoomLevelCommand_1.ChangeZoomLevelCommand);\n          this.createCommand(control, DiagramCommand.ZoomLevelInPercentage, ChangeZoomLevelCommand_1.ChangeZoomLevelInPercentageCommand);\n          this.createCommand(control, DiagramCommand.AutoLayoutTreeVertical, AutoLayoutTreeVerticalCommand_1.AutoLayoutTreeVerticalCommand);\n          this.createCommand(control, DiagramCommand.AutoLayoutTreeVerticalBottomToTop, AutoLayoutTreeVerticalBottomToTopCommand_1.AutoLayoutTreeVerticalBottomToTopCommand);\n          this.createCommand(control, DiagramCommand.AutoLayoutTreeHorizontal, AutoLayoutTreeHorizontalCommand_1.AutoLayoutTreeHorizontalCommand);\n          this.createCommand(control, DiagramCommand.AutoLayoutTreeHorizontalRightToLeft, AutoLayoutTreeHorizontalRightToLeftCommand_1.AutoLayoutTreeHorizontalRightToLeftCommand);\n          this.createCommand(control, DiagramCommand.AutoLayoutLayeredVertical, AutoLayoutLayeredVerticalCommand_1.AutoLayoutLayeredVerticalCommand);\n          this.createCommand(control, DiagramCommand.AutoLayoutLayeredVerticalBottomToTop, AutoLayoutLayeredVerticalBottomToTopCommand_1.AutoLayoutLayeredVerticalBottomToTopCommand);\n          this.createCommand(control, DiagramCommand.AutoLayoutLayeredHorizontal, AutoLayoutLayeredHorizontalCommand_1.AutoLayoutLayeredHorizontalCommand);\n          this.createCommand(control, DiagramCommand.AutoLayoutLayeredHorizontalRightToLeft, AutoLayoutLayeredHorizontalRightToLeftCommand_1.AutoLayoutLayeredHorizontalRightToLeftCommand);\n          this.createCommand(control, DiagramCommand.Fullscreen, ToggleFullscreenCommand_1.ToggleFullscreenCommand, key_1.KeyCode.F11);\n          this.createCommand(control, DiagramCommand.ToggleSimpleView, ToggleSimpleViewCommand_1.ToggleSimpleViewCommand);\n          this.createCommand(control, DiagramCommand.ToggleReadOnly, ToggleReadOnlyCommand_1.ToggleReadOnlyCommand);\n          this.createCommand(control, DiagramCommand.InsertShapeImage, InsertShapeImageCommand_1.InsertShapeImageCommand);\n          this.createCommand(control, DiagramCommand.EditShapeImage, EditShapeImageCommand_1.EditShapeImageCommand);\n          this.createCommand(control, DiagramCommand.DeleteShapeImage, DeleteShapeImageCommand_1.DeleteShapeImageCommand);\n          this.createCommand(control, DiagramCommand.FitToScreen, ChangeZoomLevelCommand_1.FitToScreenCommand);\n          this.createCommand(control, DiagramCommand.FitToWidth, ChangeZoomLevelCommand_1.FitToWidthCommand);\n          this.createCommand(control, DiagramCommand.SwitchAutoZoom, ChangeZoomLevelCommand_1.SwitchAutoZoomCommand);\n          this.createCommand(control, DiagramCommand.ToggleAutoZoom, ChangeZoomLevelCommand_1.ToggleAutoZoomCommand);\n          this.createCommand(control, DiagramCommand.ZoomLevelItems, ChangeZoomLevelCommand_1.ChangeZoomLevelItemsCommand);\n          this.createCommand(control, DiagramCommand.GridSizeItems, ChangeGridSizeCommand_1.ChangeGridSizeItemsCommand);\n          this.createCommand(control, DiagramCommand.PageSizeItems, ChangePageSizeCommand_1.ChangePageSizeItemsCommand);\n          this.createCommand(control, DiagramCommand.Zoom25, ChangeZoomLevelCommand_1.ChangeZoomLevelTo25Command);\n          this.createCommand(control, DiagramCommand.Zoom50, ChangeZoomLevelCommand_1.ChangeZoomLevelTo50Command);\n          this.createCommand(control, DiagramCommand.Zoom75, ChangeZoomLevelCommand_1.ChangeZoomLevelTo75Command);\n          this.createCommand(control, DiagramCommand.Zoom100, ChangeZoomLevelCommand_1.ChangeZoomLevelTo100Command);\n          this.createCommand(control, DiagramCommand.Zoom125, ChangeZoomLevelCommand_1.ChangeZoomLevelTo125Command);\n          this.createCommand(control, DiagramCommand.Zoom150, ChangeZoomLevelCommand_1.ChangeZoomLevelTo150Command);\n          this.createCommand(control, DiagramCommand.Zoom200, ChangeZoomLevelCommand_1.ChangeZoomLevelTo200Command);\n          this.createCommand(control, DiagramCommand.AutoZoomToContent, ChangeZoomLevelCommand_1.ToggleAutoZoomToContentCommand);\n          this.createCommand(control, DiagramCommand.AutoZoomToWidth, ChangeZoomLevelCommand_1.ToggleAutoZoomToWidthCommand);\n          this.createCommand(control, DiagramCommand.ConnectorRoutingMode, ChangeConnectorRoutingModeCommand_1.ChangeConnectorRoutingModeCommand);\n        }\n\n        CommandManager.prototype.getCommand = function (key) {\n          return this.commands[key];\n        };\n\n        CommandManager.prototype.beforeExecuting = function (command) {\n          this.executingCommandsChain.push(command);\n          this.executingCommandCounter++;\n        };\n\n        CommandManager.prototype.afterExecuting = function () {\n          this.executingCommandCounter--;\n\n          if (this.executingCommandCounter === 0) {\n            this.lastCommandsChain = this.executingCommandsChain;\n            this.executingCommandsChain = [];\n          }\n        };\n\n        CommandManager.prototype.processShortcut = function (code) {\n          var command = this.shortcutsToCommand[code];\n          if (command) return command.execute();\n          return false;\n        };\n\n        CommandManager.prototype.processPaste = function (clipboardData) {\n          var command = this.getCommand(DiagramCommand.Paste);\n          if (command && command.isEnabled()) command.execute(clipboardData);\n          return true;\n        }; // ISelectionChangesListener\n\n\n        CommandManager.prototype.notifySelectionChanged = function (_selection) {\n          this.lastCommandsChain = [];\n        };\n\n        CommandManager.prototype.notifyScrollPositionChanged = function () {};\n\n        CommandManager.prototype.createCommand = function (control, commandId, commandType) {\n          var shortcuts = [];\n\n          for (var _i = 3; _i < arguments.length; _i++) {\n            shortcuts[_i - 3] = arguments[_i];\n          }\n\n          this.commands[commandId] = new commandType(control);\n\n          for (var i = 0; i < shortcuts.length; i++) {\n            var shortcut = shortcuts[i];\n            if (typeof shortcut === \"number\") this.shortcutsToCommand[shortcut] = this.commands[commandId];\n          }\n        };\n\n        return CommandManager;\n      }();\n\n      exports.CommandManager = CommandManager;\n      /***/\n    },\n    /* 82 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var min_max_1 = __webpack_require__(165);\n\n      var comparers_1 = __webpack_require__(166);\n\n      var ListUtils = function () {\n        function ListUtils() {}\n\n        ListUtils.remove = function (list, element) {\n          var index = list.indexOf(element, 0);\n          if (index >= 0) list.splice(index, 1);\n        };\n\n        ListUtils.removeBy = function (list, callback) {\n          var len = list.length;\n\n          for (var index = 0; index < len; index++) {\n            if (callback(list[index], index)) return list.splice(index, 1)[0];\n          }\n\n          return null;\n        };\n\n        ListUtils.shallowCopy = function (list) {\n          return list.slice();\n        };\n\n        ListUtils.deepCopy = function (list) {\n          return ListUtils.map(list, function (val) {\n            return val.clone();\n          });\n        };\n\n        ListUtils.initByValue = function (numElements, initValue) {\n          var result = [];\n\n          for (; numElements > 0; numElements--) {\n            result.push(initValue);\n          }\n\n          return result;\n        };\n\n        ListUtils.initByCallback = function (numElements, initCallback) {\n          var result = [];\n\n          for (var index = 0; index < numElements; index++) {\n            result.push(initCallback(index));\n          }\n\n          return result;\n        };\n\n        ListUtils.forEachOnInterval = function (interval, callback) {\n          var end = interval.end;\n\n          for (var index = interval.start; index < end; index++) {\n            callback(index);\n          }\n        };\n\n        ListUtils.reverseForEachOnInterval = function (interval, callback) {\n          var start = interval.start;\n\n          for (var index = interval.end - 1; index >= start; index--) {\n            callback(index);\n          }\n        };\n\n        ListUtils.reducedMap = function (list, callback, startIndex, endIndex) {\n          if (startIndex === void 0) {\n            startIndex = 0;\n          }\n\n          if (endIndex === void 0) {\n            endIndex = list.length;\n          }\n\n          var result = [];\n\n          for (var index = startIndex; index < endIndex; index++) {\n            var newItem = callback(list[index], index);\n            if (newItem !== null) result.push(newItem);\n          }\n\n          return result;\n        };\n\n        ListUtils.filter = function (list, callback, startIndex, endIndex) {\n          if (startIndex === void 0) {\n            startIndex = 0;\n          }\n\n          if (endIndex === void 0) {\n            endIndex = list.length;\n          }\n\n          var result = [];\n\n          for (var index = startIndex; index < endIndex; index++) {\n            var item = list[index];\n            if (callback(item, index)) result.push(item);\n          }\n\n          return result;\n        };\n\n        ListUtils.map = function (list, callback, startIndex, endIndex) {\n          if (startIndex === void 0) {\n            startIndex = 0;\n          }\n\n          if (endIndex === void 0) {\n            endIndex = list.length;\n          }\n\n          var result = [];\n\n          for (var index = startIndex; index < endIndex; index++) {\n            result.push(callback(list[index], index));\n          }\n\n          return result;\n        };\n\n        ListUtils.indexBy = function (list, callback, startIndex, endIndex) {\n          if (startIndex === void 0) {\n            startIndex = 0;\n          }\n\n          if (endIndex === void 0) {\n            endIndex = list.length;\n          }\n\n          for (var ind = startIndex; ind < endIndex; ind++) {\n            if (callback(list[ind], ind)) return ind;\n          }\n\n          return -1;\n        };\n\n        ListUtils.reverseIndexBy = function (list, callback, startIndex, endIndex) {\n          if (startIndex === void 0) {\n            startIndex = list.length - 1;\n          }\n\n          if (endIndex === void 0) {\n            endIndex = 0;\n          }\n\n          for (var ind = startIndex; ind >= endIndex; ind--) {\n            if (callback(list[ind], ind)) return ind;\n          }\n\n          return -1;\n        };\n\n        ListUtils.elementBy = function (list, callback, startIndex, endIndex) {\n          if (startIndex === void 0) {\n            startIndex = 0;\n          }\n\n          if (endIndex === void 0) {\n            endIndex = list.length;\n          }\n\n          var ind = ListUtils.indexBy(list, callback, startIndex, endIndex);\n          return ind < 0 ? null : list[ind];\n        };\n\n        ListUtils.reverseElementBy = function (list, callback, startIndex, endIndex) {\n          if (startIndex === void 0) {\n            startIndex = list.length - 1;\n          }\n\n          if (endIndex === void 0) {\n            endIndex = 0;\n          }\n\n          var ind = ListUtils.reverseIndexBy(list, callback, startIndex, endIndex);\n          return ind < 0 ? null : list[ind];\n        };\n\n        ListUtils.last = function (list) {\n          return list[list.length - 1];\n        };\n\n        ListUtils.setLast = function (list, newVal) {\n          return list[list.length - 1] = newVal;\n        };\n\n        ListUtils.incLast = function (list) {\n          return ++list[list.length - 1];\n        };\n\n        ListUtils.decLast = function (list) {\n          return --list[list.length - 1];\n        };\n\n        ListUtils.equals = function (a, b) {\n          return a.length === b.length && ListUtils.allOf2(a, b, function (a, b) {\n            return a.equals(b);\n          });\n        };\n\n        ListUtils.equalsByReference = function (a, b) {\n          var aLen = a.length;\n          var bLen = a.length;\n          if (aLen !== bLen) return false;\n\n          for (var i = 0; i < aLen; i++) {\n            if (a[i] !== b[i]) return false;\n          }\n\n          return true;\n        };\n\n        ListUtils.unique = function (list, cmp, equal, finalizeObj) {\n          if (equal === void 0) {\n            equal = cmp;\n          }\n\n          if (finalizeObj === void 0) {\n            finalizeObj = function finalizeObj() {};\n          }\n\n          var len = list.length;\n          if (len === 0) return [];\n          list = list.sort(cmp);\n          var prevValue = list[0];\n          var result = ListUtils.reducedMap(list, function (v) {\n            if (equal(prevValue, v) !== 0) {\n              prevValue = v;\n              return v;\n            }\n\n            finalizeObj(v);\n            return null;\n          }, 1, len);\n          result.unshift(list[0]);\n          return result;\n        };\n\n        ListUtils.uniqueNumber = function (list) {\n          list = list.sort(comparers_1.Comparers.number);\n          var prevValue = Number.NaN;\n\n          for (var i = list.length - 1; i >= 0; i--) {\n            if (prevValue === list[i]) list.splice(i, 1);else prevValue = list[i];\n          }\n\n          return list;\n        };\n\n        ListUtils.forEach = function (list, callback, startIndex, endIndex) {\n          if (startIndex === void 0) {\n            startIndex = 0;\n          }\n\n          if (endIndex === void 0) {\n            endIndex = list.length;\n          }\n\n          for (var index = startIndex; index < endIndex; index++) {\n            callback(list[index], index);\n          }\n        };\n\n        ListUtils.forEach2 = function (listA, listB, callback, startIndex, endIndex) {\n          if (startIndex === void 0) {\n            startIndex = 0;\n          }\n\n          if (endIndex === void 0) {\n            endIndex = listA.length;\n          }\n\n          for (var index = startIndex; index < endIndex; index++) {\n            callback(listA[index], listB[index], index);\n          }\n        };\n\n        ListUtils.reverseForEach = function (list, callback, startIndex, endIndex) {\n          if (startIndex === void 0) {\n            startIndex = list.length - 1;\n          }\n\n          if (endIndex === void 0) {\n            endIndex = 0;\n          }\n\n          for (var index = startIndex; index >= endIndex; index--) {\n            callback(list[index], index);\n          }\n        };\n\n        ListUtils.reverseIndexOf = function (list, element, startIndex, endIndex) {\n          if (startIndex === void 0) {\n            startIndex = list.length - 1;\n          }\n\n          if (endIndex === void 0) {\n            endIndex = 0;\n          }\n\n          for (var index = startIndex; index >= endIndex; index--) {\n            if (list[index] === element) return index;\n          }\n\n          return -1;\n        };\n\n        ListUtils.accumulate = function (list, initAccValue, callback, startIndex, endIndex) {\n          if (startIndex === void 0) {\n            startIndex = 0;\n          }\n\n          if (endIndex === void 0) {\n            endIndex = list.length;\n          }\n\n          var acc = initAccValue;\n\n          for (var ind = startIndex; ind < endIndex; ind++) {\n            acc = callback(acc, list[ind], ind);\n          }\n\n          return acc;\n        };\n\n        ListUtils.accumulateNumber = function (list, callback, initAccValue, startIndex, endIndex) {\n          if (initAccValue === void 0) {\n            initAccValue = 0;\n          }\n\n          if (startIndex === void 0) {\n            startIndex = 0;\n          }\n\n          if (endIndex === void 0) {\n            endIndex = list.length;\n          }\n\n          var acc = initAccValue;\n\n          for (var ind = startIndex; ind < endIndex; ind++) {\n            acc += callback(list[ind], ind, acc);\n          }\n\n          return acc;\n        };\n\n        ListUtils.anyOf = function (list, callback, startIndex, endIndex) {\n          if (startIndex === void 0) {\n            startIndex = 0;\n          }\n\n          if (endIndex === void 0) {\n            endIndex = list.length;\n          }\n\n          for (var index = startIndex; index < endIndex; index++) {\n            if (callback(list[index], index)) return true;\n          }\n\n          return false;\n        };\n\n        ListUtils.unsafeAnyOf = function (list, callback, startIndex, endIndex) {\n          if (startIndex === void 0) {\n            startIndex = 0;\n          }\n\n          if (endIndex === void 0) {\n            endIndex = list.length;\n          }\n\n          for (var index = startIndex; index < endIndex; index++) {\n            var currResult = callback(list[index], index);\n            if (currResult) return currResult;\n          }\n\n          return null;\n        };\n\n        ListUtils.reverseAnyOf = function (list, callback, startIndex, endIndex) {\n          if (startIndex === void 0) {\n            startIndex = list.length - 1;\n          }\n\n          if (endIndex === void 0) {\n            endIndex = 0;\n          }\n\n          for (var index = startIndex; index >= endIndex; index--) {\n            if (callback(list[index], index)) return true;\n          }\n\n          return false;\n        };\n\n        ListUtils.unsafeReverseAnyOf = function (list, callback, startIndex, endIndex) {\n          if (startIndex === void 0) {\n            startIndex = list.length - 1;\n          }\n\n          if (endIndex === void 0) {\n            endIndex = 0;\n          }\n\n          for (var index = startIndex; index >= endIndex; index--) {\n            var currResult = callback(list[index], index);\n            if (currResult) return currResult;\n          }\n\n          return null;\n        };\n\n        ListUtils.anyOf2 = function (listA, listB, callback, startIndex, endIndex) {\n          if (startIndex === void 0) {\n            startIndex = 0;\n          }\n\n          if (endIndex === void 0) {\n            endIndex = listA.length;\n          }\n\n          for (var index = startIndex; index < endIndex; index++) {\n            if (callback(listA[index], listB[index], index)) return true;\n          }\n\n          return false;\n        };\n\n        ListUtils.allOf = function (list, callback, startIndex, endIndex) {\n          if (startIndex === void 0) {\n            startIndex = 0;\n          }\n\n          if (endIndex === void 0) {\n            endIndex = list.length;\n          }\n\n          for (var index = startIndex; index < endIndex; index++) {\n            if (!callback(list[index], index)) return false;\n          }\n\n          return true;\n        };\n\n        ListUtils.allOf2 = function (listA, listB, callback, startIndex, endIndex) {\n          if (startIndex === void 0) {\n            startIndex = 0;\n          }\n\n          if (endIndex === void 0) {\n            endIndex = listA.length;\n          }\n\n          for (var index = startIndex; index < endIndex; index++) {\n            if (!callback(listA[index], listB[index], index)) return false;\n          }\n\n          return true;\n        };\n\n        ListUtils.allOfOnInterval = function (interval, callback) {\n          var endIndex = interval.end;\n\n          for (var index = interval.start; index < endIndex; index++) {\n            if (!callback(index)) return false;\n          }\n\n          return true;\n        };\n\n        ListUtils.addListOnTail = function (resultList, addedList) {\n          for (var i = 0, elem = void 0; elem = addedList[i]; i++) {\n            resultList.push(elem);\n          }\n\n          return resultList;\n        };\n\n        ListUtils.joinLists = function (converter) {\n          var lists = [];\n\n          for (var _i = 1; _i < arguments.length; _i++) {\n            lists[_i - 1] = arguments[_i];\n          }\n\n          return ListUtils.accumulate(lists, [], function (accList, list) {\n            ListUtils.addListOnTail(accList, converter(list));\n            return accList;\n          });\n        };\n\n        ListUtils.push = function (list, element) {\n          list.push(element);\n          return list;\n        };\n\n        ListUtils.countIf = function (list, callback) {\n          return ListUtils.accumulateNumber(list, function (elem, ind) {\n            return callback(elem, ind) ? 1 : 0;\n          });\n        };\n\n        ListUtils.clear = function (list) {\n          list.splice(0);\n        };\n\n        ListUtils.merge = function (list, cmp, shouldMerge, merge, startIndex, endIndex) {\n          if (startIndex === void 0) {\n            startIndex = 0;\n          }\n\n          if (endIndex === void 0) {\n            endIndex = list.length;\n          }\n\n          list = list.slice(startIndex, endIndex);\n          if (endIndex - startIndex < 2) return list;\n          list = list.sort(cmp);\n          var prevObj = list[startIndex];\n          var result = [prevObj];\n\n          for (var ind = startIndex + 1; ind < endIndex; ind++) {\n            var obj = list[ind];\n            if (shouldMerge(prevObj, obj)) merge(prevObj, obj);else {\n              prevObj = obj;\n              result.push(prevObj);\n            }\n          }\n\n          return result;\n        };\n\n        ListUtils.min = function (list, getValue, startIndex, endIndex) {\n          if (startIndex === void 0) {\n            startIndex = 0;\n          }\n\n          if (endIndex === void 0) {\n            endIndex = list.length;\n          }\n\n          var res = ListUtils.minExtended(list, getValue, startIndex, endIndex);\n          return res ? res.minElement : null;\n        };\n\n        ListUtils.max = function (list, getValue, startIndex, endIndex) {\n          if (startIndex === void 0) {\n            startIndex = 0;\n          }\n\n          if (endIndex === void 0) {\n            endIndex = list.length;\n          }\n\n          var res = ListUtils.maxExtended(list, getValue, startIndex, endIndex);\n          return res ? res.maxElement : null;\n        };\n\n        ListUtils.minMax = function (list, getValue, startIndex, endIndex) {\n          if (startIndex === void 0) {\n            startIndex = 0;\n          }\n\n          if (endIndex === void 0) {\n            endIndex = list.length;\n          }\n\n          var res = ListUtils.minMaxExtended(list, getValue, startIndex, endIndex);\n          return res ? new min_max_1.MinMax(res.minElement, res.maxElement) : null;\n        };\n\n        ListUtils.minExtended = function (list, getValue, startIndex, endIndex) {\n          if (startIndex === void 0) {\n            startIndex = 0;\n          }\n\n          if (endIndex === void 0) {\n            endIndex = list.length;\n          }\n\n          if (list.length === 0) return null;\n          var minElement = list[startIndex];\n          var minValue = getValue(minElement);\n\n          for (var index = startIndex + 1; index < endIndex; index++) {\n            var elem = list[index];\n            var elemValue = getValue(elem);\n\n            if (elemValue < minValue) {\n              minValue = elemValue;\n              minElement = elem;\n            }\n          }\n\n          return new min_max_1.ExtendedMin(minElement, minValue);\n        };\n\n        ListUtils.maxExtended = function (list, getValue, startIndex, endIndex) {\n          if (startIndex === void 0) {\n            startIndex = 0;\n          }\n\n          if (endIndex === void 0) {\n            endIndex = list.length;\n          }\n\n          if (list.length === 0) return null;\n          var maxElement = list[startIndex];\n          var maxValue = getValue(maxElement);\n\n          for (var index = startIndex + 1; index < endIndex; index++) {\n            var elem = list[index];\n            var elemValue = getValue(elem);\n\n            if (elemValue > maxValue) {\n              maxValue = elemValue;\n              maxElement = elem;\n            }\n          }\n\n          return new min_max_1.ExtendedMax(maxElement, maxValue);\n        };\n\n        ListUtils.minMaxExtended = function (list, getValue, startIndex, endIndex) {\n          if (startIndex === void 0) {\n            startIndex = 0;\n          }\n\n          if (endIndex === void 0) {\n            endIndex = list.length;\n          }\n\n          if (list.length === 0) return null;\n          var minElement = list[startIndex];\n          var maxElement = minElement;\n          var minValue = getValue(minElement);\n          var maxValue = minValue;\n\n          for (var index = startIndex + 1; index < endIndex; index++) {\n            var elem = list[index];\n            var elemValue = getValue(elem);\n\n            if (elemValue < minValue) {\n              minValue = elemValue;\n              minElement = elem;\n            } else if (elemValue > maxValue) {\n              maxValue = elemValue;\n              maxElement = elem;\n            }\n          }\n\n          return new min_max_1.ExtendedMinMax(minElement, minValue, maxElement, maxValue);\n        };\n\n        ListUtils.minByCmp = function (list, cmp, startIndex, endIndex) {\n          if (startIndex === void 0) {\n            startIndex = 0;\n          }\n\n          if (endIndex === void 0) {\n            endIndex = list.length;\n          }\n\n          if (list.length === 0) return null;\n          var found = list[startIndex];\n\n          for (var index = startIndex + 1; index < endIndex; index++) {\n            var elem = list[index];\n            if (cmp(elem, found) < 0) found = elem;\n          }\n\n          return found;\n        };\n\n        ListUtils.maxByCmp = function (list, cmp, startIndex, endIndex) {\n          if (startIndex === void 0) {\n            startIndex = 0;\n          }\n\n          if (endIndex === void 0) {\n            endIndex = list.length;\n          }\n\n          if (list.length === 0) return null;\n          var found = list[startIndex];\n\n          for (var index = startIndex + 1; index < endIndex; index++) {\n            var elem = list[index];\n            if (cmp(elem, found) > 0) found = elem;\n          }\n\n          return found;\n        };\n\n        ListUtils.minMaxByCmp = function (list, cmp, startIndex, endIndex) {\n          if (startIndex === void 0) {\n            startIndex = 0;\n          }\n\n          if (endIndex === void 0) {\n            endIndex = list.length;\n          }\n\n          if (list.length === 0) return null;\n          var min = list[startIndex];\n          var max = min;\n\n          for (var index = startIndex + 1; index < endIndex; index++) {\n            var elem = list[index];\n            var res = cmp(elem, min);\n            if (res > 0) max = elem;else if (res < 0) min = elem;\n          }\n\n          return new min_max_1.MinMax(min, max);\n        };\n\n        return ListUtils;\n      }();\n\n      exports.ListUtils = ListUtils;\n      /***/\n    },\n    /* 83 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Metrics = function () {\n        function Metrics() {}\n\n        Metrics.euclideanDistance = function (a, b) {\n          var xDist = a.x - b.x;\n          var yDist = a.y - b.y;\n          return Math.sqrt(xDist * xDist + yDist * yDist);\n        };\n\n        Metrics.manhattanDistance = function (a, b) {\n          return Math.abs(a.x - b.x) + Math.abs(a.y - b.y);\n        };\n\n        return Metrics;\n      }();\n\n      exports.Metrics = Metrics;\n      /***/\n    },\n    /* 84 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var file_1 = __webpack_require__(176);\n\n      var mime_type_1 = __webpack_require__(177);\n\n      var Base64Utils = function () {\n        function Base64Utils() {}\n\n        Base64Utils.normalizeToDataUrl = function (base64, mimeType) {\n          if (!Base64Utils.checkPrependDataUrl(base64)) base64 = Base64Utils.prependByDataUrl(base64, mimeType);\n          return base64;\n        };\n\n        Base64Utils.prependByDataUrl = function (base64, mimeType) {\n          return \"data:\" + mimeType + \";base64,\" + base64;\n        };\n\n        Base64Utils.checkPrependDataUrl = function (base64) {\n          return Base64Utils.dataUrl.test(base64);\n        };\n\n        Base64Utils.deleteDataUrlPrefix = function (base64DataUrl) {\n          return base64DataUrl.replace(Base64Utils.dataUrl, '');\n        };\n\n        Base64Utils.getUint8Array = function (base64) {\n          base64 = atob(base64);\n          var n = base64.length;\n          var arr = new Uint8Array(n);\n\n          while (n--) {\n            arr[n] = base64.charCodeAt(n);\n          }\n\n          return arr;\n        };\n\n        Base64Utils.fromArrayBuffer = function (buffer) {\n          var binary = [];\n          var bytes = new Uint8Array(buffer);\n          var len = bytes.byteLength;\n\n          for (var i = 0; i < len; i++) {\n            binary.push(String.fromCharCode(bytes[i]));\n          }\n\n          return window.btoa(binary.join(''));\n        };\n\n        Base64Utils.getFileFromBase64 = function (base64, fileName, options) {\n          if (fileName === void 0) {\n            fileName = '';\n          }\n\n          var data = Base64Utils.getUint8Array(base64);\n          return file_1.FileUtils.createFile([data], fileName, options);\n        };\n\n        Base64Utils.getMimeTypeAsString = function (base64) {\n          var match = base64.match(Base64Utils.dataUrl);\n          return match ? match[1] : null;\n        };\n\n        Base64Utils.getKnownMimeType = function (base64) {\n          var match = base64.match(Base64Utils.dataUrl);\n          return match ? mime_type_1.MimeTypeUtils.stringTypeToType(match[1]) : mime_type_1.DxMimeType.Unknown;\n        };\n\n        Base64Utils.fromBlobAsArrayBuffer = function (blob, callback) {\n          var reader = new FileReader();\n\n          reader.onloadend = function () {\n            return callback(Base64Utils.fromArrayBuffer(reader.result));\n          };\n\n          reader.readAsArrayBuffer(blob);\n        };\n\n        Base64Utils.fromBlobAsDataUrl = function (blob, callback) {\n          var reader = new FileReader();\n\n          reader.onloadend = function () {\n            return callback(reader.result);\n          };\n\n          reader.readAsDataURL(blob);\n        };\n\n        Base64Utils.dataUrl = /^data:(.*?)(;(.*?))??(;base64)?,/;\n        return Base64Utils;\n      }();\n\n      exports.Base64Utils = Base64Utils;\n      /***/\n    },\n    /* 85 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics37 = function extendStatics(d, b) {\n          _extendStatics37 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics37(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics37(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.NativeConnector = exports.NativeShape = exports.NativeItem = void 0;\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var NativeItem =\n      /** @class */\n      function () {\n        function NativeItem(id, key) {\n          this.id = id;\n          this.key = key;\n          this.unitsApplied = false;\n        }\n\n        NativeItem.prototype.applyUnits = function (units) {\n          if (!this.unitsApplied && units !== undefined) {\n            this.applyUnitsCore(units);\n            this.unitsApplied = true;\n          }\n        };\n\n        return NativeItem;\n      }();\n\n      exports.NativeItem = NativeItem;\n\n      var NativeShape =\n      /** @class */\n      function (_super) {\n        __extends(NativeShape, _super);\n\n        function NativeShape() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        NativeShape.prototype.applyUnitsCore = function (units) {\n          this.position.x = ModelUtils_1.ModelUtils.getlUnitValue(units, this.position.x);\n          this.position.y = ModelUtils_1.ModelUtils.getlUnitValue(units, this.position.y);\n          this.size.width = ModelUtils_1.ModelUtils.getlUnitValue(units, this.size.width);\n          this.size.height = ModelUtils_1.ModelUtils.getlUnitValue(units, this.size.height);\n        };\n\n        return NativeShape;\n      }(NativeItem);\n\n      exports.NativeShape = NativeShape;\n\n      var NativeConnector =\n      /** @class */\n      function (_super) {\n        __extends(NativeConnector, _super);\n\n        function NativeConnector() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        NativeConnector.prototype.applyUnitsCore = function (units) {\n          this.points.forEach(function (pt) {\n            pt.x = ModelUtils_1.ModelUtils.getlUnitValue(units, pt.x);\n            pt.y = ModelUtils_1.ModelUtils.getlUnitValue(units, pt.y);\n          });\n        };\n\n        return NativeConnector;\n      }(NativeItem);\n\n      exports.NativeConnector = NativeConnector;\n      /***/\n    },\n    /* 86 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ConnectorRenderPointsContext = void 0;\n\n      var ConnectorRenderPointsContext =\n      /** @class */\n      function () {\n        function ConnectorRenderPointsContext(renderPoints, lockCreateRenderPoints, actualRoutingMode) {\n          this.renderPoints = renderPoints;\n          this.lockCreateRenderPoints = lockCreateRenderPoints;\n          this.actualRoutingMode = actualRoutingMode;\n        }\n\n        return ConnectorRenderPointsContext;\n      }();\n\n      exports.ConnectorRenderPointsContext = ConnectorRenderPointsContext;\n      /***/\n    },\n    /* 87 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Offsets = function () {\n        function Offsets(left, right, top, bottom) {\n          this.left = left;\n          this.right = right;\n          this.top = top;\n          this.bottom = bottom;\n        }\n\n        Offsets.empty = function () {\n          return new Offsets(0, 0, 0, 0);\n        };\n\n        Object.defineProperty(Offsets.prototype, \"horizontal\", {\n          get: function get() {\n            return this.left + this.right;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(Offsets.prototype, \"vertical\", {\n          get: function get() {\n            return this.top + this.bottom;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        Offsets.fromNumber = function (offset) {\n          return new Offsets(offset, offset, offset, offset);\n        };\n\n        Offsets.fromOffsets = function (offsets) {\n          return new Offsets(offsets.left, offsets.right, offsets.top, offsets.bottom);\n        };\n\n        Offsets.fromSide = function (horizontal, vertical) {\n          return new Offsets(horizontal, horizontal, vertical, vertical);\n        };\n\n        Offsets.prototype.normalize = function () {\n          this.left = Math.max(0, this.left);\n          this.right = Math.max(0, this.right);\n          this.top = Math.max(0, this.top);\n          this.bottom = Math.max(0, this.bottom);\n          return this;\n        };\n\n        Offsets.prototype.toString = function () {\n          return JSON.stringify(this);\n        };\n\n        Offsets.prototype.isEmpty = function () {\n          return this.left === 0 && this.right === 0 && this.top === 0 && this.bottom === 0;\n        };\n\n        Offsets.prototype.offset = function (offset) {\n          this.left += offset.left;\n          this.right += offset.right;\n          this.top += offset.top;\n          this.bottom += offset.bottom;\n          return this;\n        };\n\n        Offsets.prototype.multiply = function (multLeft, multRight, multTop, multBottom) {\n          switch (arguments.length) {\n            case 1:\n              {\n                this.left *= multLeft;\n                this.right *= multLeft;\n                this.top *= multLeft;\n                this.bottom *= multLeft;\n                return this;\n              }\n\n            case 2:\n              {\n                this.left *= multLeft;\n                this.right *= multLeft;\n                this.top *= multRight;\n                this.bottom *= multRight;\n                return this;\n              }\n\n            case 4:\n              {\n                this.left *= multLeft;\n                this.right *= multRight;\n                this.top *= multTop;\n                this.bottom *= multBottom;\n                return this;\n              }\n          }\n\n          return this;\n        };\n\n        Offsets.prototype.clone = function () {\n          return new Offsets(this.left, this.right, this.top, this.bottom);\n        };\n\n        Offsets.prototype.copyFrom = function (obj) {\n          this.left = obj.left;\n          this.right = obj.right;\n          this.top = obj.top;\n          this.bottom = obj.bottom;\n        };\n\n        Offsets.prototype.equals = function (obj) {\n          return this.top === obj.top && this.bottom === obj.bottom && this.right === obj.right && this.left === obj.left;\n        };\n\n        Offsets.prototype.applyConverter = function (converter) {\n          this.left = converter(this.left);\n          this.right = converter(this.right);\n          this.top = converter(this.top);\n          this.bottom = converter(this.bottom);\n          return this;\n        };\n\n        return Offsets;\n      }();\n\n      exports.Offsets = Offsets;\n      /***/\n    },\n    /* 88 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics38 = function extendStatics(d, b) {\n          _extendStatics38 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics38(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics38(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeConnectorPropertyHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var ChangeConnectorPropertyHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangeConnectorPropertyHistoryItem, _super);\n\n        function ChangeConnectorPropertyHistoryItem(connectorKey, propertyName, value) {\n          var _this = _super.call(this) || this;\n\n          _this.connectorKey = connectorKey;\n          _this.propertyName = propertyName;\n          _this.value = value;\n          return _this;\n        }\n\n        ChangeConnectorPropertyHistoryItem.prototype.redo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          this.oldValue = connector.properties[this.propertyName];\n          manipulator.changeConnectorProperty(connector, this.propertyName, this.value);\n        };\n\n        ChangeConnectorPropertyHistoryItem.prototype.undo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          manipulator.changeConnectorProperty(connector, this.propertyName, this.oldValue);\n        };\n\n        return ChangeConnectorPropertyHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ChangeConnectorPropertyHistoryItem = ChangeConnectorPropertyHistoryItem;\n      /***/\n    },\n    /* 89 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics39 = function extendStatics(d, b) {\n          _extendStatics39 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics39(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics39(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeStyleHistoryItem = void 0;\n\n      var ChangeStyleHistoryItemBase_1 = __webpack_require__(119);\n\n      var ChangeStyleHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangeStyleHistoryItem, _super);\n\n        function ChangeStyleHistoryItem(itemKey, styleProperty, styleValue) {\n          return _super.call(this, itemKey, styleProperty, styleValue) || this;\n        }\n\n        ChangeStyleHistoryItem.prototype.redo = function (manipulator) {\n          var item = manipulator.model.findItem(this.itemKey);\n          this.oldStyleValue = item.style[this.styleProperty];\n          manipulator.changeStyle(item, this.styleProperty, this.styleValue);\n        };\n\n        ChangeStyleHistoryItem.prototype.undo = function (manipulator) {\n          var item = manipulator.model.findItem(this.itemKey);\n          manipulator.changeStyle(item, this.styleProperty, this.oldStyleValue);\n        };\n\n        return ChangeStyleHistoryItem;\n      }(ChangeStyleHistoryItemBase_1.ChangeStyleHistoryItemBase);\n\n      exports.ChangeStyleHistoryItem = ChangeStyleHistoryItem;\n      /***/\n    },\n    /* 90 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.HashSet = void 0;\n\n      var HashSet =\n      /** @class */\n      function () {\n        function HashSet(list, getHashCode) {\n          var _this = this;\n\n          if (list === void 0) {\n            list = [];\n          }\n\n          if (getHashCode === void 0) {\n            getHashCode = function getHashCode(item) {\n              return item.toString();\n            };\n          }\n\n          this.items = [];\n          this.map = {};\n          this.getHashCode = getHashCode;\n          list.forEach(function (i) {\n            return _this.tryPush(i);\n          });\n        }\n\n        HashSet.prototype.tryPush = function (item) {\n          var code = this.getHashCode(item);\n\n          if (this.map[code] === undefined) {\n            this.map[code] = this.items.push(item) - 1;\n            return true;\n          }\n\n          return false;\n        };\n\n        HashSet.prototype.contains = function (item) {\n          return this.map[this.getHashCode(item)] !== undefined;\n        };\n\n        HashSet.prototype.forEach = function (callback) {\n          this.items.forEach(callback);\n        };\n\n        HashSet.prototype.filter = function (predicate) {\n          return this.items.filter(predicate);\n        };\n\n        HashSet.prototype.list = function () {\n          return this.items.slice(0);\n        };\n\n        HashSet.prototype.item = function (index) {\n          return this.items[index];\n        };\n\n        HashSet.prototype.first = function () {\n          return this.items[0];\n        };\n\n        HashSet.prototype.remove = function (item) {\n          var code = this.getHashCode(item);\n          var index = this.map[code];\n\n          if (typeof index === \"number\") {\n            delete this.map[code];\n            this.items.splice(index, 1);\n\n            for (var i = index; i < this.items.length; i++) {\n              this.map[this.getHashCode(this.items[i])]--;\n            }\n          } else throw \"Item not found\";\n        };\n\n        Object.defineProperty(HashSet.prototype, \"length\", {\n          get: function get() {\n            return this.items.length;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        return HashSet;\n      }();\n\n      exports.HashSet = HashSet;\n      /***/\n    },\n    /* 91 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ShapeDescriptionManager = void 0;\n\n      var ProcessShapeDescription_1 = __webpack_require__(203);\n\n      var DecisionShapeDescription_1 = __webpack_require__(204);\n\n      var ManualInputShapeDescription_1 = __webpack_require__(205);\n\n      var DataShapeDescription_1 = __webpack_require__(206);\n\n      var TerminatorShapeDescription_1 = __webpack_require__(207);\n\n      var PredefinedProcessShapeDescription_1 = __webpack_require__(208);\n\n      var ArrowUpDownShapeDescription_1 = __webpack_require__(209);\n\n      var ArrowRightShapeDescription_1 = __webpack_require__(210);\n\n      var ArrowUpShapeDescription_1 = __webpack_require__(211);\n\n      var CrossShapeDescription_1 = __webpack_require__(212);\n\n      var DiamondShapeDescription_1 = __webpack_require__(121);\n\n      var EllipseShapeDescription_1 = __webpack_require__(70);\n\n      var HeartShapeDescription_1 = __webpack_require__(213);\n\n      var RectangleShapeDescription_1 = __webpack_require__(19);\n\n      var TextShapeDescription_1 = __webpack_require__(122);\n\n      var PentagonShapeDescription_1 = __webpack_require__(123);\n\n      var HexagonShapeDescription_1 = __webpack_require__(124);\n\n      var OctagonShapeDescription_1 = __webpack_require__(214);\n\n      var StarShapeDescription_1 = __webpack_require__(215);\n\n      var ArrowDownShapeDescription_1 = __webpack_require__(216);\n\n      var ArrowLeftRightShapeDescription_1 = __webpack_require__(217);\n\n      var ArrowLeftShapeDescription_1 = __webpack_require__(218);\n\n      var TriangleShapeDescription_1 = __webpack_require__(125);\n\n      var DocumentShapeDescription_1 = __webpack_require__(126);\n\n      var MultipleDocumentsShapeDescription_1 = __webpack_require__(219);\n\n      var PreparationShapeDescription_1 = __webpack_require__(220);\n\n      var HardDiskShapeDescription_1 = __webpack_require__(221);\n\n      var DatabaseShapeDescription_1 = __webpack_require__(222);\n\n      var InternalStorageShapeDescription_1 = __webpack_require__(223);\n\n      var PaperTapeShapeDescription_1 = __webpack_require__(224);\n\n      var ManualOperationShapeDescription_1 = __webpack_require__(225);\n\n      var DelayShapeDescription_1 = __webpack_require__(226);\n\n      var StoredDataShapeDescription_1 = __webpack_require__(227);\n\n      var MergeShapeDescription_1 = __webpack_require__(228);\n\n      var DisplayShapeDescription_1 = __webpack_require__(229);\n\n      var OrShapeDescription_1 = __webpack_require__(230);\n\n      var SummingJunctionShapeDescription_1 = __webpack_require__(231);\n\n      var CustomShapeDescription_1 = __webpack_require__(127);\n\n      var VerticalContainerDescription_1 = __webpack_require__(233);\n\n      var HorizontalContainerDescription_1 = __webpack_require__(234);\n\n      var CardWithImageOnTopDescription_1 = __webpack_require__(235);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var ConnectorShapeDescription_1 = __webpack_require__(237);\n\n      var Utils_1 = __webpack_require__(3);\n\n      var CardWithHorizontalImageDescription_1 = __webpack_require__(238);\n\n      var ShapeDescriptionManager =\n      /** @class */\n      function () {\n        function ShapeDescriptionManager() {\n          this.descriptions = {};\n          this.descriptionTypes = {};\n          this.descriptionCategories = {};\n          this.onShapeDecriptionChanged = new Utils_1.EventDispatcher();\n          this.register(new TextShapeDescription_1.TextShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n          this.register(new RectangleShapeDescription_1.RectangleShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n          this.register(new EllipseShapeDescription_1.EllipseShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n          this.register(new CrossShapeDescription_1.CrossShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n          this.register(new TriangleShapeDescription_1.TriangleShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n          this.register(new DiamondShapeDescription_1.DiamondShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n          this.register(new HeartShapeDescription_1.HeartShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n          this.register(new PentagonShapeDescription_1.PentagonShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n          this.register(new HexagonShapeDescription_1.HexagonShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n          this.register(new OctagonShapeDescription_1.OctagonShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n          this.register(new StarShapeDescription_1.StarShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n          this.register(new ArrowUpShapeDescription_1.ArrowUpShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n          this.register(new ArrowDownShapeDescription_1.ArrowDownShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n          this.register(new ArrowLeftShapeDescription_1.ArrowLeftShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n          this.register(new ArrowRightShapeDescription_1.ArrowRightShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n          this.register(new ArrowUpDownShapeDescription_1.ArrowUpDownShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n          this.register(new ArrowLeftRightShapeDescription_1.ArrowLeftRightShapeDescription(), ShapeTypes_1.ShapeCategories.General);\n          this.register(new ProcessShapeDescription_1.ProcessShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n          this.register(new DecisionShapeDescription_1.DecisionShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n          this.register(new TerminatorShapeDescription_1.TerminatorShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n          this.register(new PredefinedProcessShapeDescription_1.PredefinedProcessShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n          this.register(new DocumentShapeDescription_1.DocumentShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n          this.register(new MultipleDocumentsShapeDescription_1.MultipleDocumentsShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n          this.register(new ManualInputShapeDescription_1.ManualInputShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n          this.register(new PreparationShapeDescription_1.PreparationShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n          this.register(new DataShapeDescription_1.DataShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n          this.register(new DatabaseShapeDescription_1.DatabaseShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n          this.register(new HardDiskShapeDescription_1.HardDiskShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n          this.register(new InternalStorageShapeDescription_1.InternalStorageShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n          this.register(new PaperTapeShapeDescription_1.PaperTapeShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n          this.register(new ManualOperationShapeDescription_1.ManualOperationShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n          this.register(new DelayShapeDescription_1.DelayShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n          this.register(new StoredDataShapeDescription_1.StoredDataShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n          this.register(new DisplayShapeDescription_1.DisplayShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n          this.register(new MergeShapeDescription_1.MergeShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n          this.register(new ConnectorShapeDescription_1.ConnectorShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n          this.register(new OrShapeDescription_1.OrShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n          this.register(new SummingJunctionShapeDescription_1.SummingJunctionShapeDescription(), ShapeTypes_1.ShapeCategories.Flowchart);\n          this.register(new CardWithHorizontalImageDescription_1.CardWithImageOnLeftDescription(), ShapeTypes_1.ShapeCategories.OrgChart);\n          this.register(new CardWithHorizontalImageDescription_1.CardWithImageOnRightDescription(), ShapeTypes_1.ShapeCategories.OrgChart);\n          this.register(new CardWithImageOnTopDescription_1.CardWithImageOnTopDescription(), ShapeTypes_1.ShapeCategories.OrgChart);\n          this.register(new VerticalContainerDescription_1.VerticalContainerDescription(), ShapeTypes_1.ShapeCategories.Containers);\n          this.register(new HorizontalContainerDescription_1.HorizontalContainerDescription(), ShapeTypes_1.ShapeCategories.Containers);\n        }\n\n        Object.defineProperty(ShapeDescriptionManager, \"default\", {\n          get: function get() {\n            return ShapeDescriptionManager.defaultInstance;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ShapeDescriptionManager, \"defaultContainer\", {\n          get: function get() {\n            return ShapeDescriptionManager.defaultContainerInstance;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ShapeDescriptionManager.prototype.get = function (type) {\n          return this.descriptions[type];\n        };\n\n        ShapeDescriptionManager.prototype.getTypesByCategory = function (category) {\n          return this.descriptionTypes[category] || [];\n        };\n\n        ShapeDescriptionManager.prototype.getCategoryByType = function (type) {\n          return this.descriptionCategories[type];\n        };\n\n        ShapeDescriptionManager.prototype.getCategoryByDescription = function (description) {\n          return this.getCategoryByType(description.key);\n        };\n\n        ShapeDescriptionManager.prototype.register = function (description, category, type) {\n          if (type === void 0) {\n            type = description.key;\n          }\n\n          if (this.descriptions[type] !== undefined) throw Error(\"Description key is duplicated\");\n          this.descriptions[type] = description;\n          if (!this.descriptionTypes[category]) this.descriptionTypes[category] = [];\n          this.descriptionTypes[category].push(type);\n          this.descriptionCategories[type] = category;\n          description.onChanged.add(this);\n        };\n\n        ShapeDescriptionManager.prototype.registerCustomShape = function (shape) {\n          if (shape.type === undefined) throw Error(\"Custom shape type is not defined\");\n          if (this.descriptions[shape.type] !== undefined) throw Error(\"Custom shape type is duplicated\");\n          var baseDescription = shape.baseType && this.descriptions[shape.baseType];\n          if (shape.minWidth > shape.maxWidth) shape.maxWidth = shape.minWidth;\n          if (shape.minHeight > shape.maxHeight) shape.maxHeight = shape.minHeight;\n          this.register(new CustomShapeDescription_1.CustomShapeDescription(shape, baseDescription), shape.category || ShapeTypes_1.ShapeCategories.Custom);\n        };\n\n        ShapeDescriptionManager.prototype.unregisterCustomShape = function (shapeType) {\n          var description = this.descriptions[shapeType];\n\n          if (description instanceof CustomShapeDescription_1.CustomShapeDescription) {\n            description.onChanged.remove(this);\n            var category = this.descriptionCategories[shapeType];\n            delete this.descriptions[shapeType];\n            delete this.descriptionCategories[shapeType];\n            var index = this.descriptionTypes[category].indexOf(shapeType);\n            this.descriptionTypes[category].splice(index, 1);\n            if (this.descriptionTypes[category].length === 0) delete this.descriptionTypes[category];\n          }\n        };\n\n        ShapeDescriptionManager.prototype.notifyShapeDescriptionChanged = function (description) {\n          this.onShapeDecriptionChanged.raise1(function (l) {\n            return l.notifyShapeDescriptionChanged(description);\n          });\n        };\n\n        ShapeDescriptionManager.defaultInstance = new RectangleShapeDescription_1.RectangleShapeDescription();\n        ShapeDescriptionManager.defaultContainerInstance = new VerticalContainerDescription_1.VerticalContainerDescription();\n        return ShapeDescriptionManager;\n      }();\n\n      exports.ShapeDescriptionManager = ShapeDescriptionManager;\n      /***/\n    },\n    /* 92 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics40 = function extendStatics(d, b) {\n          _extendStatics40 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics40(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics40(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ArrowVerticalShapeDescription = exports.ArrowVerticalLineWidthParameterName = exports.ArrowVerticalTriangleHeightParameterName = void 0;\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var size_1 = __webpack_require__(2);\n\n      var ShapeParameters_1 = __webpack_require__(36);\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      exports.ArrowVerticalTriangleHeightParameterName = \"th\";\n      exports.ArrowVerticalLineWidthParameterName = \"lw\";\n\n      var ArrowVerticalShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(ArrowVerticalShapeDescription, _super);\n\n        function ArrowVerticalShapeDescription() {\n          return _super.call(this, new size_1.Size(ShapeDescription_1.ShapeDefaultDimension * 0.375, ShapeDescription_1.ShapeDefaultDimension)) || this;\n        }\n\n        Object.defineProperty(ArrowVerticalShapeDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ArrowVerticalShapeDescription.prototype.createParameters = function (parameters) {\n          parameters.addRange([new ShapeParameters_1.ShapeParameter(exports.ArrowVerticalTriangleHeightParameterName, Math.sqrt(Math.pow(this.defaultSize.width, 2) - Math.pow(this.defaultSize.width / 2, 2))), new ShapeParameters_1.ShapeParameter(exports.ArrowVerticalLineWidthParameterName, this.defaultSize.width / 3)]);\n        };\n\n        ArrowVerticalShapeDescription.prototype.normalizeParameters = function (shape, parameters) {\n          this.changeParameterValue(parameters, exports.ArrowVerticalTriangleHeightParameterName, function (p) {\n            return Math.max(0, Math.min(shape.size.height, p.value));\n          });\n          this.changeParameterValue(parameters, exports.ArrowVerticalLineWidthParameterName, function (p) {\n            return Math.max(0, Math.min(shape.size.width, p.value));\n          });\n        };\n\n        ArrowVerticalShapeDescription.prototype.processConnectionPoint = function (shape, point) {\n          var delta = (shape.size.width - shape.parameters.get(exports.ArrowVerticalLineWidthParameterName).value) / 2;\n          var side = shape.getConnectionPointSide(point);\n          if (side === DiagramItem_1.ConnectionPointSide.East) point.x -= delta;else if (side === DiagramItem_1.ConnectionPointSide.West) point.x += delta;\n        };\n\n        ArrowVerticalShapeDescription.prototype.getTextRectangle = function (shape) {\n          return shape.rectangle.clone().inflate(-ShapeDescription_1.ShapeTextPadding, -ShapeDescription_1.ShapeTextPadding);\n        };\n\n        ArrowVerticalShapeDescription.prototype.getSizeByText = function (textSize, _shape) {\n          return textSize.clone().offset(ShapeDescription_1.ShapeTextPadding * 2, ShapeDescription_1.ShapeTextPadding * 2);\n        };\n\n        return ArrowVerticalShapeDescription;\n      }(ShapeDescription_1.ShapeDescription);\n\n      exports.ArrowVerticalShapeDescription = ArrowVerticalShapeDescription;\n      /***/\n    },\n    /* 93 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics41 = function extendStatics(d, b) {\n          _extendStatics41 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics41(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics41(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ArrowHorizontalShapeDescription = exports.ArrowVerticalLineHeightParameterName = exports.ArrowVerticalTriangleWidthParameterName = void 0;\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var size_1 = __webpack_require__(2);\n\n      var ShapeParameters_1 = __webpack_require__(36);\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      exports.ArrowVerticalTriangleWidthParameterName = \"tw\";\n      exports.ArrowVerticalLineHeightParameterName = \"lh\";\n\n      var ArrowHorizontalShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(ArrowHorizontalShapeDescription, _super);\n\n        function ArrowHorizontalShapeDescription() {\n          return _super.call(this, new size_1.Size(ShapeDescription_1.ShapeDefaultDimension, ShapeDescription_1.ShapeDefaultDimension * 0.375)) || this;\n        }\n\n        Object.defineProperty(ArrowHorizontalShapeDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ArrowHorizontalShapeDescription.prototype.createParameters = function (parameters) {\n          parameters.addRange([new ShapeParameters_1.ShapeParameter(exports.ArrowVerticalTriangleWidthParameterName, Math.sqrt(Math.pow(this.defaultSize.height, 2) - Math.pow(this.defaultSize.height / 2, 2))), new ShapeParameters_1.ShapeParameter(exports.ArrowVerticalLineHeightParameterName, this.defaultSize.height / 3)]);\n        };\n\n        ArrowHorizontalShapeDescription.prototype.normalizeParameters = function (shape, parameters) {\n          this.changeParameterValue(parameters, exports.ArrowVerticalTriangleWidthParameterName, function (p) {\n            return Math.max(0, Math.min(shape.size.width, p.value));\n          });\n          this.changeParameterValue(parameters, exports.ArrowVerticalLineHeightParameterName, function (p) {\n            return Math.max(0, Math.min(shape.size.height, p.value));\n          });\n        };\n\n        ArrowHorizontalShapeDescription.prototype.processConnectionPoint = function (shape, point) {\n          var delta = (shape.size.height - shape.parameters.get(exports.ArrowVerticalLineHeightParameterName).value) / 2;\n          var side = shape.getConnectionPointSide(point);\n          if (side === DiagramItem_1.ConnectionPointSide.North) point.y += delta;else if (side === DiagramItem_1.ConnectionPointSide.South) point.y -= delta;\n        };\n\n        ArrowHorizontalShapeDescription.prototype.getTextRectangle = function (shape) {\n          return shape.rectangle.clone().inflate(-ShapeDescription_1.ShapeTextPadding, -ShapeDescription_1.ShapeTextPadding);\n        };\n\n        ArrowHorizontalShapeDescription.prototype.getSizeByText = function (textSize, _shape) {\n          return textSize.clone().offset(ShapeDescription_1.ShapeTextPadding * 2, ShapeDescription_1.ShapeTextPadding * 2);\n        };\n\n        return ArrowHorizontalShapeDescription;\n      }(ShapeDescription_1.ShapeDescription);\n\n      exports.ArrowHorizontalShapeDescription = ArrowHorizontalShapeDescription;\n      /***/\n    },\n    /* 94 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics42 = function extendStatics(d, b) {\n          _extendStatics42 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics42(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics42(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.PolygonShapeDescription = void 0;\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var PolygonShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(PolygonShapeDescription, _super);\n\n        function PolygonShapeDescription(hasDefaultText) {\n          var _this = _super.call(this, undefined, hasDefaultText) || this;\n\n          _this.defaultSize.height = _this.calculateHeight(ShapeDescription_1.ShapeDefaultDimension);\n          return _this;\n        }\n\n        Object.defineProperty(PolygonShapeDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return true;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(PolygonShapeDescription.prototype, \"angle\", {\n          get: function get() {\n            return Math.PI * (this.angleCount - 2) / this.angleCount;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        return PolygonShapeDescription;\n      }(ShapeDescription_1.ShapeDescription);\n\n      exports.PolygonShapeDescription = PolygonShapeDescription;\n      /***/\n    },\n    /* 95 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ImportUtils = void 0;\n\n      var ImportUtils =\n      /** @class */\n      function () {\n        function ImportUtils() {}\n\n        ImportUtils.parseJSON = function (json) {\n          if (!json || json === \"\") return {};\n\n          try {\n            return JSON.parse(json);\n          } catch (_a) {\n            return {};\n          }\n        };\n\n        ImportUtils.createDocument = function (xml) {\n          var parser = new DOMParser();\n          return parser.parseFromString(xml, \"application/xml\");\n        };\n\n        return ImportUtils;\n      }();\n\n      exports.ImportUtils = ImportUtils;\n      /***/\n    },\n    /* 96 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics43 = function extendStatics(d, b) {\n          _extendStatics43 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics43(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics43(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeStyleTextPropertyCommand = void 0;\n\n      var ChangeStylePropertyCommandBase_1 = __webpack_require__(136);\n\n      var ChangeStyleTextHistoryItem_1 = __webpack_require__(67);\n\n      var Style_1 = __webpack_require__(30);\n\n      var ChangeStyleTextPropertyCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeStyleTextPropertyCommand, _super);\n\n        function ChangeStyleTextPropertyCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeStyleTextPropertyCommand.prototype.getValue = function () {\n          return this.control.selection.inputPosition.getCurrentTextStylePropertyValue(this.getStyleProperty());\n        };\n\n        ChangeStyleTextPropertyCommand.prototype.getStyleObj = function (item) {\n          return item.styleText;\n        };\n\n        ChangeStyleTextPropertyCommand.prototype.getDefaultStyleObj = function () {\n          return new Style_1.TextStyle();\n        };\n\n        ChangeStyleTextPropertyCommand.prototype.createHistoryItem = function (item, styleProperty, styleValue) {\n          return new ChangeStyleTextHistoryItem_1.ChangeStyleTextHistoryItem(item.key, styleProperty, styleValue);\n        };\n\n        ChangeStyleTextPropertyCommand.prototype.updateInputPosition = function (value) {\n          this.control.selection.inputPosition.setTextStylePropertyValue(this.getStyleProperty(), value);\n        };\n\n        return ChangeStyleTextPropertyCommand;\n      }(ChangeStylePropertyCommandBase_1.ChangeStylePropertyCommandBase);\n\n      exports.ChangeStyleTextPropertyCommand = ChangeStyleTextPropertyCommand;\n      /***/\n    },\n    /* 97 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics44 = function extendStatics(d, b) {\n          _extendStatics44 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics44(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics44(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.TreeLayoutBuilder = void 0;\n\n      var GraphLayout_1 = __webpack_require__(139);\n\n      var Tree_1 = __webpack_require__(253);\n\n      var NodeLayout_1 = __webpack_require__(69);\n\n      var Utils_1 = __webpack_require__(3);\n\n      var point_1 = __webpack_require__(1);\n\n      var BaseBuilder_1 = __webpack_require__(140);\n\n      var Structures_1 = __webpack_require__(37);\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      var LayoutSettings_1 = __webpack_require__(20);\n\n      var TreeLayoutBuilder =\n      /** @class */\n      function (_super) {\n        __extends(TreeLayoutBuilder, _super);\n\n        function TreeLayoutBuilder() {\n          var _this = _super !== null && _super.apply(this, arguments) || this;\n\n          _this.nodeToLevel = {};\n          _this.levelDepthSize = {};\n          return _this;\n        }\n\n        TreeLayoutBuilder.prototype.build = function () {\n          var _this = this;\n\n          var layout = new GraphLayout_1.GraphLayout();\n          var offset = 0;\n          this.graph.getConnectedComponents().forEach(function (c) {\n            var tree = Tree_1.Tree.createSpanningTree(c);\n\n            var componentLayout = _this.processTree(tree);\n\n            layout.extend(_this.setComponentOffset(componentLayout, offset));\n            offset += _this.getComponentOffset(componentLayout);\n          });\n          return layout;\n        };\n\n        TreeLayoutBuilder.prototype.preProcessTree = function (tree, parents, level) {\n          var _this = this;\n\n          parents = parents.filter(function (p) {\n            return (_this.nodeToLevel[p.key] === undefined ? _this.nodeToLevel[p.key] = level : -1) >= 0;\n          });\n\n          if (parents.length) {\n            var maxDepthSize = this.getMaxDepthSize(parents);\n            this.levelDepthSize[level] = maxDepthSize;\n            this.preProcessTree(tree, [].concat.apply([], parents.map(function (p) {\n              return tree.getChildren(p);\n            })), level + 1);\n          }\n        };\n\n        TreeLayoutBuilder.prototype.loadNodes = function (tree, layout, parent) {\n          if (!parent) return [layout.addNode(new NodeLayout_1.NodeLayout(tree.root, point_1.Point.zero()))];\n          return tree.getChildren(parent.info).map(function (child) {\n            return !layout.hasNode(child.key) ? layout.addNode(new NodeLayout_1.NodeLayout(child, point_1.Point.zero())) : undefined;\n          }).filter(function (nl) {\n            return nl;\n          });\n        };\n\n        TreeLayoutBuilder.prototype.processTree = function (tree) {\n          var _this = this;\n\n          var layout = new GraphLayout_1.GraphLayout();\n          this.preProcessTree(tree, [tree.root], 0);\n          this.processLevel(tree, layout, 0, new Utils_1.Range(0), 0);\n\n          if (this.settings.direction === LayoutSettings_1.LogicalDirectionKind.Backward) {\n            var levelDepths = Object.keys(this.levelDepthSize).map(function (l) {\n              return _this.levelDepthSize[l];\n            });\n            var mostDepthPos_1 = levelDepths.reduce(function (acc, v) {\n              return acc + v;\n            }, 0) + (levelDepths.length - 1) * this.settings.layerSpacing;\n            layout.forEachNode(function (n) {\n              return _this.setDepthPos(n, _this.getDepthPos(n) + mostDepthPos_1);\n            });\n          }\n\n          return layout;\n        };\n\n        TreeLayoutBuilder.prototype.processLevel = function (tree, layout, depthPos, breadthParentRange, level, parent) {\n          var _this = this;\n\n          var nodes = this.addNodes(tree, layout, level, parent);\n          var parentEdges = parent ? this.graph.getAdjacentEdges(parent.key, Structures_1.ConnectionMode.Outgoing) : [];\n          var maxDepthSize = this.getDirectionValue(this.levelDepthSize[level]);\n          var layerSpacing = this.getDirectionValue(this.settings.layerSpacing);\n          var prevRange;\n          nodes.forEach(function (node) {\n            var range = Utils_1.Range.fromLength(prevRange ? prevRange.to + _this.settings.columnSpacing : breadthParentRange.from, _this.getBreadthNodeSizeCore(node.info));\n            node.position = _this.getNodePosition(range.from, depthPos, maxDepthSize).clone().offset(node.info.margin.left, node.info.margin.top);\n\n            _this.processLevel(tree, layout, depthPos + maxDepthSize + layerSpacing, range, level + 1, node);\n\n            _this.updateEdgeConnections(layout, parentEdges, node);\n\n            breadthParentRange.extend(range);\n            prevRange = range;\n          });\n\n          if (parent && nodes.length) {\n            var lastChild = nodes[nodes.length - 1];\n            var childRange = new Utils_1.Range(this.getBreadthPos(nodes[0]), this.getBreadthPos(lastChild) + this.getBreadthNodeSizeCore(lastChild.info, true));\n            this.alignParent(parent, childRange, breadthParentRange);\n          }\n        };\n\n        TreeLayoutBuilder.prototype.addNodes = function (tree, layout, level, parent) {\n          var _this = this;\n\n          if (level === 0) return [layout.addNode(new NodeLayout_1.NodeLayout(tree.root, point_1.Point.zero()))];\n          return tree.getChildren(parent.info).reduce(function (acc, n) {\n            if (_this.nodeToLevel[n.key] === level && !layout.hasNode(n.key)) acc.push(layout.addNode(new NodeLayout_1.NodeLayout(n, point_1.Point.zero())));\n            return acc;\n          }, []);\n        };\n\n        TreeLayoutBuilder.prototype.getMaxDepthSize = function (nodes) {\n          var _this = this;\n\n          return nodes.reduce(function (acc, node) {\n            return Math.max(acc, _this.getDepthNodeSizeCore(node));\n          }, 0); // make it negative\n          // return this.settings.direction === LogicalDirectionKind.Forward ? maxSide : -maxSide;\n        };\n\n        TreeLayoutBuilder.prototype.getNodePosition = function (breadthPos, depthPos, maxDepthSide) {\n          if (this.settings.direction === LayoutSettings_1.LogicalDirectionKind.Forward) return this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Vertical ? new point_1.Point(breadthPos, depthPos) : new point_1.Point(depthPos, breadthPos);\n          return this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Vertical ? new point_1.Point(breadthPos, depthPos + maxDepthSide) : new point_1.Point(depthPos + maxDepthSide, breadthPos);\n        };\n\n        TreeLayoutBuilder.prototype.updateEdgeConnections = function (layout, edges, node) {\n          var _this = this;\n\n          edges.filter(function (e) {\n            return e.to === node.key;\n          }).forEach(function (e) {\n            var beginIndex = _this.getBeginEdgeIndex();\n\n            var endIndex = _this.getEndEdgeIndex();\n\n            layout.addEdge(new NodeLayout_1.EdgeLayout(e.key, beginIndex, endIndex));\n          });\n        };\n\n        TreeLayoutBuilder.prototype.getBeginEdgeIndex = function () {\n          if (this.settings.direction === LayoutSettings_1.LogicalDirectionKind.Forward) return this.isVertical() ? DiagramItem_1.ConnectionPointSide.South : DiagramItem_1.ConnectionPointSide.East;\n          return this.isVertical() ? DiagramItem_1.ConnectionPointSide.North : DiagramItem_1.ConnectionPointSide.West;\n        };\n\n        TreeLayoutBuilder.prototype.getEndEdgeIndex = function () {\n          if (this.settings.direction === LayoutSettings_1.LogicalDirectionKind.Forward) return this.isVertical() ? DiagramItem_1.ConnectionPointSide.North : DiagramItem_1.ConnectionPointSide.West;\n          return this.isVertical() ? DiagramItem_1.ConnectionPointSide.South : DiagramItem_1.ConnectionPointSide.East;\n        };\n\n        TreeLayoutBuilder.prototype.alignParent = function (parent, childRange, availableRange) {\n          if (this.settings.alignment === LayoutSettings_1.Alignment.Center) {\n            var alignedPosition = childRange.from + childRange.length / 2 - this.getBreadthNodeSizeCore(parent.info, true) / 2;\n\n            if (this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Vertical) {\n              parent.position.x = Math.max(availableRange.from + parent.info.margin.left, alignedPosition);\n              parent.position.x = Math.min(availableRange.to - parent.info.size.width - parent.info.margin.right, parent.position.x);\n            } else {\n              parent.position.y = Math.max(availableRange.from + parent.info.margin.top, alignedPosition);\n              parent.position.y = Math.min(availableRange.to - parent.info.size.height - parent.info.margin.bottom, parent.position.y);\n            }\n          }\n        };\n\n        TreeLayoutBuilder.prototype.getDepthPos = function (node) {\n          return this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Vertical ? node.position.y : node.position.x;\n        };\n\n        TreeLayoutBuilder.prototype.getBreadthPos = function (node) {\n          return this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Vertical ? node.position.x : node.position.y;\n        };\n\n        TreeLayoutBuilder.prototype.setDepthPos = function (node, pos) {\n          if (this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Vertical) node.position.y = pos;else node.position.x = pos;\n        };\n\n        TreeLayoutBuilder.prototype.isVertical = function () {\n          return this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Vertical;\n        };\n\n        return TreeLayoutBuilder;\n      }(BaseBuilder_1.LayoutBuilder);\n\n      exports.TreeLayoutBuilder = TreeLayoutBuilder;\n      /***/\n    },\n    /* 98 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics45 = function extendStatics(d, b) {\n          _extendStatics45 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics45(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics45(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ExportImageCommand = void 0;\n\n      var CanvasItemsManager_1 = __webpack_require__(76);\n\n      var CanvasExportManager_1 = __webpack_require__(261);\n\n      var ExportImportCommandBase_1 = __webpack_require__(54);\n\n      var Exporter_1 = __webpack_require__(71);\n\n      var RenderHelper_1 = __webpack_require__(15);\n\n      var TextMeasurer_1 = __webpack_require__(77);\n\n      var DOMManipulator_1 = __webpack_require__(100);\n\n      var ImageCache_1 = __webpack_require__(45);\n\n      var ExportImageCommand =\n      /** @class */\n      function (_super) {\n        __extends(ExportImageCommand, _super);\n\n        function ExportImageCommand(control) {\n          var _this = _super.call(this, control) || this;\n\n          _this.exporter = new Exporter_1.Exporter();\n          return _this;\n        }\n\n        ExportImageCommand.prototype.isEnabled = function () {\n          return !ImageCache_1.ImageCache.instance.hasNonLoadedImages();\n        };\n\n        ExportImageCommand.prototype.executeCore = function (state, parameter) {\n          var _this = this;\n\n          try {\n            var exportManager = this.getExportManager();\n            var exportFunc = this.getExportFunc();\n            exportFunc(this.control.model.size.clone(), this.control.model.pageColor, exportManager, function (url) {\n              parameter(url, _this.getExtension());\n\n              _this.tryDispose();\n            });\n          } catch (e) {\n            this.tryDispose();\n            throw e;\n          }\n\n          return true;\n        };\n\n        ExportImageCommand.prototype.getExportManager = function () {\n          var measurer = this.getOrCreateMeasurer();\n          var itemsManager = this.control.render && this.control.render.items || this.createItemsManager(measurer);\n          return this.exportManager || (this.exportManager = new CanvasExportManager_1.CanvasExportManager(itemsManager.itemsContainer, measurer));\n        };\n\n        ExportImageCommand.prototype.createItemsManager = function (measurer) {\n          this.svgElement = RenderHelper_1.RenderHelper.createSvgElement(document.body, true);\n          var canvasManager = new CanvasItemsManager_1.CanvasItemsManager(this.svgElement, 1, new DOMManipulator_1.ExportDOMManipulator(measurer));\n          this.control.modelManipulator.onModelChanged.add(canvasManager);\n          this.control.modelManipulator.commitItemsCreateChanges();\n          return canvasManager;\n        };\n\n        ExportImageCommand.prototype.tryDispose = function () {\n          if (this.svgElement) {\n            document.body.removeChild(this.svgElement);\n            delete this.svgElement;\n          }\n\n          if (this.tempMeasurer) {\n            this.tempMeasurer.clean();\n            this.tempMeasurer = undefined;\n          }\n\n          this.exportManager = undefined;\n        };\n\n        ExportImageCommand.prototype.getOrCreateMeasurer = function () {\n          return this.control.measurer || (this.tempMeasurer = new TextMeasurer_1.TextMeasurer(document.body));\n        };\n\n        return ExportImageCommand;\n      }(ExportImportCommandBase_1.ExportImportCommandBase);\n\n      exports.ExportImageCommand = ExportImageCommand;\n      /***/\n    },\n    /* 99 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ItemChange = exports.ItemChangeType = void 0;\n      var ItemChangeType;\n\n      (function (ItemChangeType) {\n        ItemChangeType[ItemChangeType[\"Create\"] = 0] = \"Create\";\n        ItemChangeType[ItemChangeType[\"UpdateProperties\"] = 1] = \"UpdateProperties\";\n        ItemChangeType[ItemChangeType[\"UpdateStructure\"] = 2] = \"UpdateStructure\";\n        ItemChangeType[ItemChangeType[\"Update\"] = 3] = \"Update\";\n        ItemChangeType[ItemChangeType[\"Remove\"] = 4] = \"Remove\";\n        ItemChangeType[ItemChangeType[\"UpdateClassName\"] = 5] = \"UpdateClassName\";\n      })(ItemChangeType = exports.ItemChangeType || (exports.ItemChangeType = {}));\n\n      var ItemChange =\n      /** @class */\n      function () {\n        function ItemChange(item, type, isValid) {\n          if (isValid === void 0) {\n            isValid = true;\n          }\n\n          this.item = item;\n          this.type = type;\n          this.isValid = isValid;\n        }\n\n        Object.defineProperty(ItemChange.prototype, \"key\", {\n          get: function get() {\n            return this.item.key;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        return ItemChange;\n      }();\n\n      exports.ItemChange = ItemChange;\n      /***/\n    },\n    /* 100 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics46 = function extendStatics(d, b) {\n          _extendStatics46 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics46(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics46(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ExportDOMManipulator = exports.DOMManipulator = void 0;\n\n      var Diagnostics_1 = __webpack_require__(57);\n\n      var RAF_CHANGES_LIMIT = 2000;\n\n      var DOMManipulator =\n      /** @class */\n      function () {\n        function DOMManipulator(measurer) {\n          this.measurer = measurer;\n          this.queue = [];\n        }\n\n        DOMManipulator.prototype.createElement = function (primitive, parent, sibling) {\n          return primitive.createElement(function (el) {\n            if (parent != null) if (sibling !== undefined) parent.insertBefore(el, sibling);else parent.appendChild(el);\n          });\n        };\n\n        DOMManipulator.prototype.changeChildrenByPrimitives = function (primitives, parent) {\n          var _this = this;\n\n          primitives.forEach(function (primitive, index) {\n            var element = parent.childNodes[index];\n\n            _this.changeByPrimitive(element, primitive);\n          });\n        };\n\n        DOMManipulator.prototype.changeByFunc = function (element, func) {\n          this.doChange(element, func);\n        };\n\n        DOMManipulator.prototype.changeByPrimitive = function (element, primitive) {\n          this.doChange(element, primitive);\n        };\n\n        DOMManipulator.prototype.cancelAnimation = function () {\n          if (this.rafId !== undefined) {\n            cancelAnimationFrame(this.rafId);\n            this.queue = [];\n          }\n        };\n\n        DOMManipulator.prototype.doChange = function (element, action) {\n          if (Diagnostics_1.Diagnostics.optimizeUsingRAF) {\n            this.queue.push([element, action]);\n            this.requestAnimation();\n          } else this.doChangeSync(element, action);\n        };\n\n        DOMManipulator.prototype.doChangeSync = function (element, action) {\n          if (typeof action === \"function\") action(element);else action.applyElementProperties(element, this.measurer);\n        };\n\n        DOMManipulator.prototype.requestAnimation = function () {\n          var _this = this;\n\n          if (!this.rafRequested) {\n            this.rafRequested = true;\n\n            var func_1 = function func_1() {\n              _this.queue.splice(0, RAF_CHANGES_LIMIT).forEach(function (t) {\n                return _this.doChangeSync(t[0], t[1]);\n              });\n\n              if (_this.queue.length) _this.rafId = requestAnimationFrame(func_1);else {\n                _this.rafRequested = false;\n                _this.rafId = undefined;\n              }\n            };\n\n            this.rafId = requestAnimationFrame(func_1);\n          }\n        };\n\n        return DOMManipulator;\n      }();\n\n      exports.DOMManipulator = DOMManipulator;\n\n      var ExportDOMManipulator =\n      /** @class */\n      function (_super) {\n        __extends(ExportDOMManipulator, _super);\n\n        function ExportDOMManipulator() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ExportDOMManipulator.prototype.doChange = function (element, action) {\n          this.doChangeSync(element, action);\n        };\n\n        return ExportDOMManipulator;\n      }(DOMManipulator);\n\n      exports.ExportDOMManipulator = ExportDOMManipulator;\n      /***/\n    },\n    /* 101 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics47 = function extendStatics(d, b) {\n          _extendStatics47 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics47(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics47(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ClipboardCommand = void 0;\n\n      var SimpleCommandBase_1 = __webpack_require__(10);\n\n      var ClipboardCommand =\n      /** @class */\n      function (_super) {\n        __extends(ClipboardCommand, _super);\n\n        function ClipboardCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ClipboardCommand.prototype.setClipboardData = function (data) {\n          if (this.control.render) this.control.render.input.setClipboardData(data);\n          ClipboardCommand.clipboardData = data;\n        };\n\n        ClipboardCommand.prototype.getClipboardData = function (callback) {\n          if (this.control.render && this.isPasteSupportedByBrowser()) this.control.render.input.getClipboardData(callback);else callback(ClipboardCommand.clipboardData);\n        };\n\n        ClipboardCommand.prototype.isPasteSupportedByBrowser = function () {\n          return this.control.render && this.control.render.input.isPasteSupportedByBrowser();\n        };\n\n        return ClipboardCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ClipboardCommand = ClipboardCommand;\n      /***/\n    },\n    /* 102 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics48 = function extendStatics(d, b) {\n          _extendStatics48 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics48(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics48(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeZindexHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var ChangeZindexHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangeZindexHistoryItem, _super);\n\n        function ChangeZindexHistoryItem(item, zIndex) {\n          var _this = _super.call(this) || this;\n\n          _this.itemKey = item.key;\n          _this.zIndex = zIndex;\n          return _this;\n        }\n\n        ChangeZindexHistoryItem.prototype.redo = function (manipulator) {\n          var item = manipulator.model.findItem(this.itemKey);\n          this.oldZIndex = item.zIndex;\n          manipulator.changeZIndex(item, this.zIndex);\n        };\n\n        ChangeZindexHistoryItem.prototype.undo = function (manipulator) {\n          var item = manipulator.model.findItem(this.itemKey);\n          manipulator.changeZIndex(item, this.oldZIndex);\n        };\n\n        return ChangeZindexHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ChangeZindexHistoryItem = ChangeZindexHistoryItem;\n      /***/\n    },\n    /* 103 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.DataLayoutParameters = exports.DataLayoutType = void 0;\n\n      var LayoutSettings_1 = __webpack_require__(20);\n\n      var WideTree_1 = __webpack_require__(97);\n\n      var Sugiyama_1 = __webpack_require__(78);\n\n      var DataLayoutType;\n\n      (function (DataLayoutType) {\n        DataLayoutType[DataLayoutType[\"Tree\"] = 0] = \"Tree\";\n        DataLayoutType[DataLayoutType[\"Sugiyama\"] = 1] = \"Sugiyama\";\n      })(DataLayoutType = exports.DataLayoutType || (exports.DataLayoutType = {}));\n\n      var DataLayoutParameters =\n      /** @class */\n      function () {\n        function DataLayoutParameters(sizeSettings, parameter) {\n          this.sizeSettings = sizeSettings;\n\n          if (parameter) {\n            if (parameter.type !== undefined) {\n              this.layoutType = parameter.type;\n              this.layoutSettings = this.layoutType === DataLayoutType.Sugiyama ? new LayoutSettings_1.LayoutSettings() : new LayoutSettings_1.TreeLayoutSettings();\n            }\n\n            if (parameter.orientation !== undefined) this.layoutSettings.orientation = parameter.orientation;\n            this.skipPointIndices = parameter.skipPointIndices;\n            this.autoSizeEnabled = parameter.autoSizeEnabled;\n          }\n        }\n\n        Object.defineProperty(DataLayoutParameters.prototype, \"needAutoLayout\", {\n          get: function get() {\n            return this.layoutType !== undefined;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        DataLayoutParameters.prototype.getLayoutBuilder = function (graph) {\n          return this.layoutType === DataLayoutType.Tree ? new WideTree_1.TreeLayoutBuilder(this.layoutSettings, graph) : new Sugiyama_1.SugiyamaLayoutBuilder(this.layoutSettings, graph);\n        };\n\n        return DataLayoutParameters;\n      }();\n\n      exports.DataLayoutParameters = DataLayoutParameters;\n      /***/\n    },\n    /* 104 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics49 = function extendStatics(d, b) {\n          _extendStatics49 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics49(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics49(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.EditShapeImageCommandBase = void 0;\n\n      var ChangeShapeImageHistoryItem_1 = __webpack_require__(147);\n\n      var SimpleCommandBase_1 = __webpack_require__(10);\n\n      var EditShapeImageCommandBase =\n      /** @class */\n      function (_super) {\n        __extends(EditShapeImageCommandBase, _super);\n\n        function EditShapeImageCommandBase() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        EditShapeImageCommandBase.prototype.isEnabled = function () {\n          var selectedShape = this.getSelectedShape();\n          return _super.prototype.isEnabled.call(this) && !!selectedShape && !selectedShape.locked && selectedShape.enableImage && selectedShape.allowEditImage;\n        };\n\n        EditShapeImageCommandBase.prototype.getValue = function () {\n          var selectedShape = this.getSelectedShape();\n          var imageUrl = selectedShape ? selectedShape.image.exportUrl : undefined;\n          return imageUrl;\n        };\n\n        EditShapeImageCommandBase.prototype.getSelectedShape = function () {\n          var selectedShapes = this.control.selection.getSelectedShapes(true);\n          return selectedShapes.length === 1 ? selectedShapes[0] : undefined;\n        };\n\n        EditShapeImageCommandBase.prototype.executeCore = function (state, parameter) {\n          this.control.history.beginTransaction();\n          var selectedUnlockedShapes = this.control.selection.getSelectedShapes(false);\n          this.control.history.addAndRedo(new ChangeShapeImageHistoryItem_1.ChangeShapeImageHistoryItem(selectedUnlockedShapes[0], parameter));\n          this.control.history.endTransaction();\n          return true;\n        };\n\n        return EditShapeImageCommandBase;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.EditShapeImageCommandBase = EditShapeImageCommandBase;\n      /***/\n    },\n    /* 105 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var browser_1 = __webpack_require__(17);\n\n      var common_1 = __webpack_require__(48);\n\n      var TouchUtils = function () {\n        function TouchUtils() {}\n\n        TouchUtils.onEventAttachingToDocument = function (eventName, func) {\n          if (browser_1.Browser.MacOSMobilePlatform && TouchUtils.isTouchEventName(eventName)) {\n            if (!TouchUtils.documentTouchHandlers[eventName]) TouchUtils.documentTouchHandlers[eventName] = [];\n            TouchUtils.documentTouchHandlers[eventName].push(func);\n            return TouchUtils.documentEventAttachingAllowed;\n          }\n\n          return true;\n        };\n\n        TouchUtils.isTouchEventName = function (eventName) {\n          return browser_1.Browser.WebKitTouchUI && (eventName.indexOf('touch') > -1 || eventName.indexOf('gesture') > -1);\n        };\n\n        TouchUtils.isTouchEvent = function (evt) {\n          return browser_1.Browser.WebKitTouchUI && common_1.isDefined(evt.changedTouches);\n        };\n\n        TouchUtils.getEventX = function (evt) {\n          return browser_1.Browser.IE ? evt.pageX : evt.changedTouches[0].pageX;\n        };\n\n        TouchUtils.getEventY = function (evt) {\n          return browser_1.Browser.IE ? evt.pageY : evt.changedTouches[0].pageY;\n        };\n\n        TouchUtils.touchMouseDownEventName = browser_1.Browser.WebKitTouchUI ? 'touchstart' : browser_1.Browser.Edge && browser_1.Browser.MSTouchUI && window.PointerEvent ? 'pointerdown' : 'mousedown';\n        TouchUtils.touchMouseUpEventName = browser_1.Browser.WebKitTouchUI ? 'touchend' : browser_1.Browser.Edge && browser_1.Browser.MSTouchUI && window.PointerEvent ? 'pointerup' : 'mouseup';\n        TouchUtils.touchMouseMoveEventName = browser_1.Browser.WebKitTouchUI ? 'touchmove' : browser_1.Browser.Edge && browser_1.Browser.MSTouchUI && window.PointerEvent ? 'pointermove' : 'mousemove';\n        TouchUtils.msTouchDraggableClassName = 'dxMSTouchDraggable';\n        TouchUtils.documentTouchHandlers = {};\n        TouchUtils.documentEventAttachingAllowed = true;\n        return TouchUtils;\n      }();\n\n      exports.TouchUtils = TouchUtils;\n      /***/\n    },\n    /* 106 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.DiagramModelOperation = exports.Diagnostics = exports.RenderHelper = exports.DiagramLocalizationService = exports.NativeConnector = exports.NativeShape = exports.ShapeType = exports.ColorUtils = exports.PageOrientation = exports.ConnectorPosition = exports.ConnectorLineOption = exports.ConnectorLineEnding = exports.AutoZoomMode = exports.Browser = exports.UnitConverter = exports.EventDispatcher = exports.DataLayoutOrientation = exports.DataLayoutType = exports.ShapeCategories = exports.ShapeTypes = exports.DiagramUnit = exports.default = exports.DiagramControl = exports.DiagramCommand = exports.Point = exports.Size = void 0;\n\n      var CommandManager_1 = __webpack_require__(81);\n\n      Object.defineProperty(exports, \"DiagramCommand\", {\n        enumerable: true,\n        get: function get() {\n          return CommandManager_1.DiagramCommand;\n        }\n      });\n\n      var Diagram_1 = __webpack_require__(302);\n\n      Object.defineProperty(exports, \"DiagramControl\", {\n        enumerable: true,\n        get: function get() {\n          return Diagram_1.DiagramControl;\n        }\n      });\n      Object.defineProperty(exports, \"default\", {\n        enumerable: true,\n        get: function get() {\n          return Diagram_1.DiagramControl;\n        }\n      });\n\n      var size_1 = __webpack_require__(2);\n\n      Object.defineProperty(exports, \"Size\", {\n        enumerable: true,\n        get: function get() {\n          return size_1.Size;\n        }\n      });\n\n      var point_1 = __webpack_require__(1);\n\n      Object.defineProperty(exports, \"Point\", {\n        enumerable: true,\n        get: function get() {\n          return point_1.Point;\n        }\n      });\n\n      var Utils_1 = __webpack_require__(3);\n\n      Object.defineProperty(exports, \"EventDispatcher\", {\n        enumerable: true,\n        get: function get() {\n          return Utils_1.EventDispatcher;\n        }\n      });\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      Object.defineProperty(exports, \"ShapeTypes\", {\n        enumerable: true,\n        get: function get() {\n          return ShapeTypes_1.ShapeTypes;\n        }\n      });\n      Object.defineProperty(exports, \"ShapeCategories\", {\n        enumerable: true,\n        get: function get() {\n          return ShapeTypes_1.ShapeCategories;\n        }\n      });\n      Object.defineProperty(exports, \"ShapeType\", {\n        enumerable: true,\n        get: function get() {\n          return ShapeTypes_1.ShapeType;\n        }\n      });\n\n      var unit_converter_1 = __webpack_require__(12);\n\n      Object.defineProperty(exports, \"UnitConverter\", {\n        enumerable: true,\n        get: function get() {\n          return unit_converter_1.UnitConverter;\n        }\n      });\n\n      var browser_1 = __webpack_require__(17);\n\n      Object.defineProperty(exports, \"Browser\", {\n        enumerable: true,\n        get: function get() {\n          return browser_1.Browser;\n        }\n      });\n\n      var Settings_1 = __webpack_require__(27);\n\n      Object.defineProperty(exports, \"AutoZoomMode\", {\n        enumerable: true,\n        get: function get() {\n          return Settings_1.AutoZoomMode;\n        }\n      });\n\n      var DataLayoutParameters_1 = __webpack_require__(103);\n\n      Object.defineProperty(exports, \"DataLayoutType\", {\n        enumerable: true,\n        get: function get() {\n          return DataLayoutParameters_1.DataLayoutType;\n        }\n      });\n\n      var LayoutSettings_1 = __webpack_require__(20);\n\n      Object.defineProperty(exports, \"DataLayoutOrientation\", {\n        enumerable: true,\n        get: function get() {\n          return LayoutSettings_1.DataLayoutOrientation;\n        }\n      });\n\n      __webpack_require__(382);\n\n      var ConnectorProperties_1 = __webpack_require__(31);\n\n      Object.defineProperty(exports, \"ConnectorLineEnding\", {\n        enumerable: true,\n        get: function get() {\n          return ConnectorProperties_1.ConnectorLineEnding;\n        }\n      });\n      Object.defineProperty(exports, \"ConnectorLineOption\", {\n        enumerable: true,\n        get: function get() {\n          return ConnectorProperties_1.ConnectorLineOption;\n        }\n      });\n\n      var color_1 = __webpack_require__(22);\n\n      Object.defineProperty(exports, \"ColorUtils\", {\n        enumerable: true,\n        get: function get() {\n          return color_1.ColorUtils;\n        }\n      });\n\n      var Diagnostics_1 = __webpack_require__(57);\n\n      Object.defineProperty(exports, \"Diagnostics\", {\n        enumerable: true,\n        get: function get() {\n          return Diagnostics_1.Diagnostics;\n        }\n      });\n\n      var NativeItem_1 = __webpack_require__(85);\n\n      Object.defineProperty(exports, \"NativeShape\", {\n        enumerable: true,\n        get: function get() {\n          return NativeItem_1.NativeShape;\n        }\n      });\n      Object.defineProperty(exports, \"NativeConnector\", {\n        enumerable: true,\n        get: function get() {\n          return NativeItem_1.NativeConnector;\n        }\n      });\n\n      var LocalizationService_1 = __webpack_require__(35);\n\n      Object.defineProperty(exports, \"DiagramLocalizationService\", {\n        enumerable: true,\n        get: function get() {\n          return LocalizationService_1.DiagramLocalizationService;\n        }\n      });\n\n      var RenderHelper_1 = __webpack_require__(15);\n\n      Object.defineProperty(exports, \"RenderHelper\", {\n        enumerable: true,\n        get: function get() {\n          return RenderHelper_1.RenderHelper;\n        }\n      });\n\n      var Enums_1 = __webpack_require__(46);\n\n      Object.defineProperty(exports, \"DiagramUnit\", {\n        enumerable: true,\n        get: function get() {\n          return Enums_1.DiagramUnit;\n        }\n      });\n      Object.defineProperty(exports, \"PageOrientation\", {\n        enumerable: true,\n        get: function get() {\n          return Enums_1.PageOrientation;\n        }\n      });\n\n      var ModelOperationSettings_1 = __webpack_require__(16);\n\n      Object.defineProperty(exports, \"DiagramModelOperation\", {\n        enumerable: true,\n        get: function get() {\n          return ModelOperationSettings_1.DiagramModelOperation;\n        }\n      });\n\n      var Connector_1 = __webpack_require__(7);\n\n      Object.defineProperty(exports, \"ConnectorPosition\", {\n        enumerable: true,\n        get: function get() {\n          return Connector_1.ConnectorPosition;\n        }\n      });\n      /***/\n    },\n    /* 107 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var tslib_1 = __webpack_require__(55);\n\n      var mutable_1 = __webpack_require__(167);\n\n      var FixedInterval = function (_super) {\n        tslib_1.__extends(FixedInterval, _super);\n\n        function FixedInterval(start, length) {\n          var _this = _super.call(this) || this;\n\n          _this.start = start;\n          _this.length = length;\n          return _this;\n        }\n\n        Object.defineProperty(FixedInterval.prototype, \"end\", {\n          get: function get() {\n            return this.start + this.length;\n          },\n          set: function set(newEnd) {\n            this.length = newEnd - this.start;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(FixedInterval.prototype, \"center\", {\n          get: function get() {\n            return this.start + this.length / 2;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        FixedInterval.prototype.copyFrom = function (obj) {\n          this.start = obj.start;\n          this.length = obj.length;\n        };\n\n        FixedInterval.prototype.equals = function (obj) {\n          return obj && this.start === obj.start && this.length === obj.length;\n        };\n\n        FixedInterval.prototype.clone = function () {\n          return new FixedInterval(this.start, this.length);\n        };\n\n        FixedInterval.prototype.makeByStartEnd = function (start, end) {\n          return new FixedInterval(start, end - start);\n        };\n\n        FixedInterval.prototype.makeByStartLength = function (start, length) {\n          return new FixedInterval(start, length);\n        };\n\n        FixedInterval.prototype.makeByLengthEnd = function (length, end) {\n          return new FixedInterval(end - length, length);\n        };\n\n        FixedInterval.fromPositions = function (start, end) {\n          return new FixedInterval(start, end - start);\n        };\n\n        FixedInterval.makeByConstInterval = function (interval) {\n          return new FixedInterval(interval.start, interval.length);\n        };\n\n        FixedInterval.prototype.expand = function (interval) {\n          var end = Math.max(interval.end, this.end);\n          this.start = Math.min(interval.start, this.start);\n          this.end = end;\n          return this;\n        };\n\n        return FixedInterval;\n      }(mutable_1.MutableInterval);\n\n      exports.FixedInterval = FixedInterval;\n      /***/\n    },\n    /* 108 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var SparseIntervalsIterator = function () {\n        function SparseIntervalsIterator(sparseIntervals) {\n          this.sparseIntervals = sparseIntervals;\n          this.intervalIndex = -1;\n        }\n\n        Object.defineProperty(SparseIntervalsIterator.prototype, \"isStarted\", {\n          get: function get() {\n            return !!this.curr;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        SparseIntervalsIterator.prototype.moveNext = function () {\n          if (this.curr && this.posInInterval + 1 < this.curr.length) {\n            this.posInInterval++;\n            this.index++;\n            this.initObject();\n            return true;\n          }\n\n          if (this.intervalIndex + 1 < this.sparseIntervals.numIntervals) {\n            this.intervalIndex++;\n            this.curr = this.sparseIntervals.getInterval(this.intervalIndex);\n            if (!this.curr.length) return this.moveNext();\n            this.posInInterval = 0;\n            this.index = this.curr.start;\n            this.initObject();\n            return true;\n          }\n\n          return false;\n        };\n\n        SparseIntervalsIterator.prototype.movePrev = function () {\n          if (this.curr && this.posInInterval - 1 >= this.curr.start) {\n            this.posInInterval--;\n            this.index--;\n            this.initObject();\n            return true;\n          }\n\n          if (!this.isStarted) this.intervalIndex = this.sparseIntervals.numIntervals;\n\n          if (this.intervalIndex - 1 >= 0) {\n            this.intervalIndex--;\n            this.curr = this.sparseIntervals.getInterval(this.intervalIndex);\n            this.posInInterval = Math.max(this.curr.length - 1, this.curr.start);\n            this.index = this.curr.start;\n            this.initObject();\n            return true;\n          }\n\n          return false;\n        };\n\n        SparseIntervalsIterator.prototype.initObject = function () {};\n\n        return SparseIntervalsIterator;\n      }();\n\n      exports.SparseIntervalsIterator = SparseIntervalsIterator;\n      /***/\n    },\n    /* 109 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics50 = function extendStatics(d, b) {\n          _extendStatics50 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics50(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics50(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.FilterPrimitive = void 0;\n\n      var RenderHelper_1 = __webpack_require__(15);\n\n      var Primitive_1 = __webpack_require__(24);\n\n      var FilterPrimitive =\n      /** @class */\n      function (_super) {\n        __extends(FilterPrimitive, _super);\n\n        function FilterPrimitive(id, x, y, width, height) {\n          var _this = _super.call(this) || this;\n\n          _this.id = id;\n          _this.x = x;\n          _this.y = y;\n          _this.width = width;\n          _this.height = height;\n          return _this;\n        }\n\n        FilterPrimitive.prototype.createMainElement = function () {\n          var element = document.createElementNS(RenderHelper_1.svgNS, \"filter\");\n          element.setAttribute(\"id\", this.id);\n          return element;\n        };\n\n        FilterPrimitive.prototype.applyElementProperties = function (element, measurer) {\n          if (this.id) element.setAttribute(\"id\", this.id);\n          this.setUnitAttribute(element, \"x\", this.x);\n          this.setUnitAttribute(element, \"y\", this.y);\n          this.setUnitAttribute(element, \"width\", this.width);\n          this.setUnitAttribute(element, \"height\", this.height);\n          this.setPositionCorrectionAttribute(element);\n\n          _super.prototype.applyElementProperties.call(this, element, measurer);\n        };\n\n        return FilterPrimitive;\n      }(Primitive_1.SvgPrimitive);\n\n      exports.FilterPrimitive = FilterPrimitive;\n      /***/\n    },\n    /* 110 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.PrimitiveObject = void 0;\n\n      var unit_converter_1 = __webpack_require__(12);\n\n      var PrimitiveObject =\n      /** @class */\n      function () {\n        function PrimitiveObject(style) {\n          this.style = style;\n        }\n\n        Object.defineProperty(PrimitiveObject.prototype, \"strokeWidthPx\", {\n          get: function get() {\n            return this.style ? this.style.strokeWidthPx : 0;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(PrimitiveObject.prototype, \"strokeOffset\", {\n          get: function get() {\n            return this.style ? this.style.strokeOffset : 0;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        PrimitiveObject.prototype.getUnitVaue = function (value) {\n          return typeof value === \"number\" ? unit_converter_1.UnitConverter.twipsToPixels(value).toString() : value;\n        };\n\n        PrimitiveObject.prototype.setUnitAttribute = function (element, key, value) {\n          if (value === undefined || value === null) return;\n          element.setAttribute(key, this.getUnitVaue(value));\n        };\n\n        PrimitiveObject.prototype.setPositionCorrectionAttribute = function (element) {\n          var transformAttr = this.strokeWidthPx % 2 === 1 ? \"translate(\" + this.strokeOffset + \", \" + this.strokeOffset + \")\" : \"\";\n          element.setAttribute(\"transform\", transformAttr);\n        };\n\n        return PrimitiveObject;\n      }();\n\n      exports.PrimitiveObject = PrimitiveObject;\n      /***/\n    },\n    /* 111 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.isColorProperty = void 0;\n      var COLOR_PROPERTIES = {\n        \"stroke\": true,\n        \"fill\": true\n      };\n\n      function isColorProperty(propName) {\n        return COLOR_PROPERTIES[propName];\n      }\n\n      exports.isColorProperty = isColorProperty;\n      /***/\n    },\n    /* 112 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ConnectorPointsCalculatorBase = void 0;\n\n      var ConnectorPointsCalculatorBase =\n      /** @class */\n      function () {\n        function ConnectorPointsCalculatorBase(connector) {\n          this.connector = connector;\n        }\n\n        return ConnectorPointsCalculatorBase;\n      }();\n\n      exports.ConnectorPointsCalculatorBase = ConnectorPointsCalculatorBase;\n      /***/\n    },\n    /* 113 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.IntersectedShapeZone = exports.AStarMetrics = exports.IntersectedShapesMetrics = exports.TurnDirectionMetrics = exports.IntersectedShapeMetrics = exports.RightAngleTurnDirection = void 0;\n\n      var point_1 = __webpack_require__(1);\n\n      var metrics_1 = __webpack_require__(83);\n\n      var RightAngleTurnDirection;\n\n      (function (RightAngleTurnDirection) {\n        RightAngleTurnDirection[RightAngleTurnDirection[\"Straight\"] = 0] = \"Straight\";\n        RightAngleTurnDirection[RightAngleTurnDirection[\"Left\"] = 1] = \"Left\";\n        RightAngleTurnDirection[RightAngleTurnDirection[\"Right\"] = 2] = \"Right\";\n        RightAngleTurnDirection[RightAngleTurnDirection[\"Backwards\"] = 3] = \"Backwards\";\n      })(RightAngleTurnDirection = exports.RightAngleTurnDirection || (exports.RightAngleTurnDirection = {}));\n\n      var IntersectedShapeMetrics =\n      /** @class */\n      function () {\n        function IntersectedShapeMetrics(description, shapeMargin) {\n          this.description = description;\n          this.shapeMargin = shapeMargin;\n        }\n\n        IntersectedShapeMetrics.prototype.penalty = function (oldValue, distance, position, item) {\n          var rectangle = item.rectangle;\n          if (rectangle.containsPoint(position)) return oldValue + this.description.shape * distance;\n          var relativePenalty = this.createRelativeMarginPenalty(position, rectangle, this.shapeMargin);\n          if (relativePenalty > 0) return oldValue + this.description.margin * relativePenalty * distance;\n          return oldValue;\n        };\n\n        IntersectedShapeMetrics.prototype.createRelativeMarginPenalty = function (point, rectangle, margin) {\n          var isTopPosition = this.isTopPosition(point, rectangle, margin);\n          var isLeftPosition = this.isLeftPosition(point, rectangle, margin);\n          var isBottomPosition = this.isBottomPosition(point, rectangle, margin);\n          var isRightPosition = this.isRightPosition(point, rectangle, margin);\n\n          if (isTopPosition) {\n            if (isLeftPosition) {\n              var extendedRectangle = rectangle.clone().inflate(margin);\n              var extendedTopLeft = extendedRectangle.createPosition();\n              var rectangleTopLeft = rectangle.createPosition();\n              var topLeftDistance = metrics_1.Metrics.euclideanDistance(rectangleTopLeft, extendedTopLeft);\n              var currentDistance = metrics_1.Metrics.euclideanDistance(rectangleTopLeft, point);\n              return 1 - currentDistance / topLeftDistance;\n            }\n\n            if (isRightPosition) {\n              var extendedRectangle = rectangle.clone().inflate(margin);\n              var extendedTopRight = new point_1.Point(extendedRectangle.right, extendedRectangle.y);\n              var rectangleTopRight = new point_1.Point(rectangle.right, rectangle.y);\n              var topRightDistance = metrics_1.Metrics.euclideanDistance(rectangleTopRight, extendedTopRight);\n              var currentDistance = metrics_1.Metrics.euclideanDistance(rectangleTopRight, point);\n              return 1 - currentDistance / topRightDistance;\n            }\n\n            return 1 - (rectangle.y - point.y) / margin;\n          }\n\n          if (isBottomPosition) {\n            if (isLeftPosition) {\n              var extendedRectangle = rectangle.clone().inflate(margin);\n              var extendedBottomLeft = new point_1.Point(extendedRectangle.x, extendedRectangle.bottom);\n              var rectangleBottomLeft = new point_1.Point(rectangle.x, rectangle.bottom);\n              var bottomLeftDistance = metrics_1.Metrics.euclideanDistance(rectangleBottomLeft, extendedBottomLeft);\n              var currentDistance = metrics_1.Metrics.euclideanDistance(rectangleBottomLeft, point);\n              return 1 - currentDistance / bottomLeftDistance;\n            }\n\n            if (isRightPosition) {\n              var extendedRectangle = rectangle.clone().inflate(margin);\n              var extendedBottomRight = new point_1.Point(extendedRectangle.right, extendedRectangle.bottom);\n              var rectangleBottomRight = new point_1.Point(rectangle.right, rectangle.bottom);\n              var bottomRightDistance = metrics_1.Metrics.euclideanDistance(rectangleBottomRight, extendedBottomRight);\n              var currentDistance = metrics_1.Metrics.euclideanDistance(rectangleBottomRight, point);\n              return 1 - currentDistance / bottomRightDistance;\n            }\n\n            return 1 - (point.y - rectangle.bottom) / margin;\n          }\n\n          if (isLeftPosition) return 1 - (rectangle.x - point.x) / margin;\n          if (isRightPosition) return 1 - (point.x - rectangle.right) / margin;\n          return 0;\n        };\n\n        IntersectedShapeMetrics.prototype.isTopPosition = function (point, rectangle, margin) {\n          return point.x > rectangle.x - margin && point.x < rectangle.right + margin && point.y > rectangle.y - margin && point.y < rectangle.y;\n        };\n\n        IntersectedShapeMetrics.prototype.isBottomPosition = function (point, rectangle, margin) {\n          return point.x > rectangle.x - margin && point.x < rectangle.right + margin && point.y > rectangle.bottom && point.y < rectangle.bottom + margin;\n        };\n\n        IntersectedShapeMetrics.prototype.isLeftPosition = function (point, rectangle, margin) {\n          return point.x > rectangle.x - margin && point.x < rectangle.x && point.y > rectangle.y - margin && point.y < rectangle.bottom + margin;\n        };\n\n        IntersectedShapeMetrics.prototype.isRightPosition = function (point, rectangle, margin) {\n          return point.x > rectangle.right && point.x < rectangle.right + margin && point.y > rectangle.y - margin && point.y < rectangle.bottom + margin;\n        };\n\n        return IntersectedShapeMetrics;\n      }();\n\n      exports.IntersectedShapeMetrics = IntersectedShapeMetrics;\n\n      var TurnDirectionMetrics =\n      /** @class */\n      function () {\n        function TurnDirectionMetrics(description) {\n          this.description = description;\n        }\n\n        TurnDirectionMetrics.prototype.penalty = function (oldValue, turnDirection) {\n          switch (turnDirection) {\n            case RightAngleTurnDirection.Backwards:\n              return oldValue * this.description.turnBack;\n\n            case RightAngleTurnDirection.Left:\n              return oldValue * this.description.turnLeft;\n\n            case RightAngleTurnDirection.Right:\n              return oldValue * this.description.turnRight;\n          }\n\n          return oldValue;\n        };\n\n        return TurnDirectionMetrics;\n      }();\n\n      exports.TurnDirectionMetrics = TurnDirectionMetrics;\n\n      var IntersectedShapesMetrics =\n      /** @class */\n      function () {\n        function IntersectedShapesMetrics(shapeMetrics) {\n          this.shapeMetrics = shapeMetrics;\n        }\n\n        IntersectedShapesMetrics.prototype.penalty = function (oldValue, distance, position, intersectedItems) {\n          var _this = this;\n\n          if (!intersectedItems || !intersectedItems.length) return oldValue;\n          var result = oldValue;\n          intersectedItems.forEach(function (item) {\n            return result = _this.shapeMetrics.penalty(result, distance, position, item);\n          });\n          return result;\n        };\n\n        return IntersectedShapesMetrics;\n      }();\n\n      exports.IntersectedShapesMetrics = IntersectedShapesMetrics;\n\n      var AStarMetrics =\n      /** @class */\n      function () {\n        function AStarMetrics(turnDirectionMetrics, shapesMetrics) {\n          this.turnDirectionMetrics = turnDirectionMetrics;\n          this.shapesMetrics = shapesMetrics;\n        }\n\n        AStarMetrics.prototype.distance = function (point1, point2) {\n          return metrics_1.Metrics.manhattanDistance(point1, point2);\n        };\n\n        AStarMetrics.prototype.penalty = function (distance, position, turnDirection, intersectedItems) {\n          var result = distance;\n          result = this.shapesMetrics.penalty(result, distance, position, intersectedItems);\n          result = this.turnDirectionMetrics.penalty(result, turnDirection);\n          return result;\n        };\n\n        return AStarMetrics;\n      }();\n\n      exports.AStarMetrics = AStarMetrics;\n      var IntersectedShapeZone;\n\n      (function (IntersectedShapeZone) {\n        IntersectedShapeZone[IntersectedShapeZone[\"None\"] = 0] = \"None\";\n        IntersectedShapeZone[IntersectedShapeZone[\"Shape\"] = 1] = \"Shape\";\n        IntersectedShapeZone[IntersectedShapeZone[\"Margin\"] = 2] = \"Margin\";\n      })(IntersectedShapeZone = exports.IntersectedShapeZone || (exports.IntersectedShapeZone = {}));\n      /***/\n\n    },\n    /* 114 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics51 = function extendStatics(d, b) {\n          _extendStatics51 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics51(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics51(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeShapeParametersHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var ChangeShapeParametersHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangeShapeParametersHistoryItem, _super);\n\n        function ChangeShapeParametersHistoryItem(shapeKey, parameters) {\n          var _this = _super.call(this) || this;\n\n          _this.shapeKey = shapeKey;\n          _this.parameters = parameters;\n          return _this;\n        }\n\n        ChangeShapeParametersHistoryItem.prototype.redo = function (manipulator) {\n          var shape = manipulator.model.findShape(this.shapeKey);\n          this.oldParameters = shape.parameters.clone();\n          manipulator.changeShapeParameters(shape, this.parameters);\n        };\n\n        ChangeShapeParametersHistoryItem.prototype.undo = function (manipulator) {\n          var shape = manipulator.model.findShape(this.shapeKey);\n          manipulator.changeShapeParameters(shape, this.oldParameters);\n        };\n\n        return ChangeShapeParametersHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ChangeShapeParametersHistoryItem = ChangeShapeParametersHistoryItem;\n      /***/\n    },\n    /* 115 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics52 = function extendStatics(d, b) {\n          _extendStatics52 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics52(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics52(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.DeleteConnectorHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var DeleteConnectorHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(DeleteConnectorHistoryItem, _super);\n\n        function DeleteConnectorHistoryItem(connectorKey) {\n          var _this = _super.call(this) || this;\n\n          _this.connectorKey = connectorKey;\n          return _this;\n        }\n\n        DeleteConnectorHistoryItem.prototype.redo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          this.connector = connector.clone();\n          manipulator.deleteConnector(connector);\n        };\n\n        DeleteConnectorHistoryItem.prototype.undo = function (manipulator) {\n          manipulator.addConnector(this.connector, this.connector.key);\n        };\n\n        return DeleteConnectorHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.DeleteConnectorHistoryItem = DeleteConnectorHistoryItem;\n      /***/\n    },\n    /* 116 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics53 = function extendStatics(d, b) {\n          _extendStatics53 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics53(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics53(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.DeleteShapeHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var DeleteShapeHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(DeleteShapeHistoryItem, _super);\n\n        function DeleteShapeHistoryItem(shapeKey, allowed) {\n          if (allowed === void 0) {\n            allowed = true;\n          }\n\n          var _this = _super.call(this) || this;\n\n          _this.shapeKey = shapeKey;\n          _this.allowed = allowed;\n          return _this;\n        }\n\n        DeleteShapeHistoryItem.prototype.redo = function (manipulator) {\n          var shape = manipulator.model.findShape(this.shapeKey);\n          this.shape = shape.clone();\n          manipulator.deleteShape(shape, this.allowed);\n        };\n\n        DeleteShapeHistoryItem.prototype.undo = function (manipulator) {\n          manipulator.addShape(this.shape, this.shape.key);\n        };\n\n        return DeleteShapeHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.DeleteShapeHistoryItem = DeleteShapeHistoryItem;\n      /***/\n    },\n    /* 117 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics54 = function extendStatics(d, b) {\n          _extendStatics54 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics54(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics54(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ResizeShapeHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var ResizeShapeHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ResizeShapeHistoryItem, _super);\n\n        function ResizeShapeHistoryItem(shapeKey, position, size) {\n          var _this = _super.call(this) || this;\n\n          _this.shapeKey = shapeKey;\n          _this.position = position;\n          _this.size = size;\n          return _this;\n        }\n\n        ResizeShapeHistoryItem.prototype.redo = function (manipulator) {\n          var shape = manipulator.model.findShape(this.shapeKey);\n          this.oldPosition = shape.position.clone();\n          this.oldSize = shape.size.clone();\n          manipulator.resizeShape(shape, this.position, this.size);\n        };\n\n        ResizeShapeHistoryItem.prototype.undo = function (manipulator) {\n          var shape = manipulator.model.findShape(this.shapeKey);\n          manipulator.resizeShape(shape, this.oldPosition, this.oldSize);\n        };\n\n        return ResizeShapeHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ResizeShapeHistoryItem = ResizeShapeHistoryItem;\n      /***/\n    },\n    /* 118 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics55 = function extendStatics(d, b) {\n          _extendStatics55 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics55(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics55(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeLockedHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var ChangeLockedHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangeLockedHistoryItem, _super);\n\n        function ChangeLockedHistoryItem(item, locked) {\n          var _this = _super.call(this) || this;\n\n          _this.itemKey = item.key;\n          _this.locked = locked;\n          return _this;\n        }\n\n        ChangeLockedHistoryItem.prototype.redo = function (manipulator) {\n          var item = manipulator.model.findItem(this.itemKey);\n          this.oldLocked = item.locked;\n          manipulator.changeLocked(item, this.locked);\n        };\n\n        ChangeLockedHistoryItem.prototype.undo = function (manipulator) {\n          var item = manipulator.model.findItem(this.itemKey);\n          manipulator.changeLocked(item, this.oldLocked);\n        };\n\n        return ChangeLockedHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ChangeLockedHistoryItem = ChangeLockedHistoryItem;\n      /***/\n    },\n    /* 119 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics56 = function extendStatics(d, b) {\n          _extendStatics56 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics56(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics56(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeStyleHistoryItemBase = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var ChangeStyleHistoryItemBase =\n      /** @class */\n      function (_super) {\n        __extends(ChangeStyleHistoryItemBase, _super);\n\n        function ChangeStyleHistoryItemBase(itemKey, styleProperty, styleValue) {\n          var _this = _super.call(this) || this;\n\n          _this.itemKey = itemKey;\n          _this.styleProperty = styleProperty;\n          _this.styleValue = styleValue;\n          return _this;\n        }\n\n        ChangeStyleHistoryItemBase.prototype.redo = function (manipulator) {\n          var item = manipulator.model.findItem(this.itemKey);\n          this.oldStyleValue = item.style[this.styleProperty];\n          manipulator.changeStyle(item, this.styleProperty, this.styleValue);\n        };\n\n        ChangeStyleHistoryItemBase.prototype.undo = function (manipulator) {\n          var item = manipulator.model.findItem(this.itemKey);\n          manipulator.changeStyle(item, this.styleProperty, this.oldStyleValue);\n        };\n\n        return ChangeStyleHistoryItemBase;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ChangeStyleHistoryItemBase = ChangeStyleHistoryItemBase;\n      /***/\n    },\n    /* 120 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics57 = function extendStatics(d, b) {\n          _extendStatics57 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics57(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics57(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Importer = void 0;\n\n      var Shape_1 = __webpack_require__(14);\n\n      var Utils_1 = __webpack_require__(3);\n\n      var size_1 = __webpack_require__(2);\n\n      var point_1 = __webpack_require__(1);\n\n      var ShapeDescriptionManager_1 = __webpack_require__(91);\n\n      var Connector_1 = __webpack_require__(7);\n\n      var ImageInfo_1 = __webpack_require__(49);\n\n      var ImporterBase_1 = __webpack_require__(134);\n\n      var ImportUtils_1 = __webpack_require__(95);\n\n      var color_1 = __webpack_require__(22);\n\n      var Importer =\n      /** @class */\n      function (_super) {\n        __extends(Importer, _super);\n\n        function Importer(shapeDescriptionManager, json) {\n          var _this = _super.call(this, shapeDescriptionManager) || this;\n\n          _this.obj = ImportUtils_1.ImportUtils.parseJSON(json);\n          return _this;\n        }\n\n        Importer.prototype.getObject = function () {\n          return this.obj;\n        };\n\n        Importer.prototype.getPageObject = function (obj) {\n          return obj[\"page\"];\n        };\n\n        Importer.prototype.getShapeObjects = function (obj) {\n          return obj[\"shapes\"];\n        };\n\n        Importer.prototype.getConnectorObjects = function (obj) {\n          return obj[\"connectors\"];\n        };\n\n        Importer.prototype.importPageSettings = function (model, pageObj) {\n          if (!pageObj) return;\n          this.assert(pageObj[\"width\"], \"number\");\n          this.assert(pageObj[\"height\"], \"number\");\n          if (typeof pageObj[\"width\"] === \"number\") model.size.width = pageObj[\"width\"];\n          if (typeof pageObj[\"height\"] === \"number\") model.size.height = pageObj[\"height\"];\n          if (typeof pageObj[\"pageColor\"] === \"number\") model.pageColor = pageObj[\"pageColor\"];else if (typeof pageObj[\"pageColor\"] === \"string\") model.pageColor = color_1.ColorUtils.fromString(pageObj[\"pageColor\"]);\n          if (typeof pageObj[\"pageWidth\"] === \"number\") model.pageSize.width = pageObj[\"pageWidth\"];\n          if (typeof pageObj[\"pageHeight\"] === \"number\") model.pageSize.height = pageObj[\"pageHeight\"];\n          if (typeof pageObj[\"pageLandscape\"] === \"boolean\") model.pageLandscape = pageObj[\"pageLandscape\"];\n        };\n\n        Importer.prototype.importShape = function (shapeObj) {\n          this.assert(shapeObj[\"key\"], \"string\");\n          this.assert(shapeObj[\"x\"], \"number\");\n          this.assert(shapeObj[\"y\"], \"number\");\n          this.assert(shapeObj[\"type\"], \"string\");\n          var shapeType = shapeObj[\"type\"];\n          var description = this.shapeDescriptionManager.get(shapeType);\n          var position = new point_1.Point(shapeObj[\"x\"], shapeObj[\"y\"]);\n          var shape = new Shape_1.Shape(description || ShapeDescriptionManager_1.ShapeDescriptionManager.default, position);\n          shape.key = shapeObj[\"key\"];\n          if (typeof shapeObj[\"dataKey\"] === \"string\" || typeof shapeObj[\"dataKey\"] === \"number\") shape.dataKey = shapeObj[\"dataKey\"];\n          if (typeof shapeObj[\"customData\"] === \"object\") shape.customData = Utils_1.ObjectUtils.cloneObject(shapeObj[\"customData\"]);\n          if (typeof shapeObj[\"locked\"] === \"boolean\") shape.locked = shapeObj[\"locked\"];\n          if (typeof shapeObj[\"width\"] === \"number\") shape.size.width = shapeObj[\"width\"];\n          if (typeof shapeObj[\"height\"] === \"number\") shape.size.height = shapeObj[\"height\"];\n          if (typeof shapeObj[\"text\"] === \"string\") shape.text = shapeObj[\"text\"];\n          if (typeof shapeObj[\"imageUrl\"] === \"string\") shape.image = new ImageInfo_1.ImageInfo(shapeObj[\"imageUrl\"]);\n\n          if (shapeObj[\"parameters\"]) {\n            shape.parameters.fromObject(shapeObj[\"parameters\"]);\n            shape.description.normalizeParameters(shape, shape.parameters);\n          }\n\n          if (shapeObj[\"style\"]) shape.style.fromObject(shapeObj[\"style\"]);\n          if (shapeObj[\"styleText\"]) shape.styleText.fromObject(shapeObj[\"styleText\"]);\n          if (typeof shapeObj[\"zIndex\"] === \"number\") shape.zIndex = shapeObj[\"zIndex\"];\n          if (Array.isArray(shapeObj[\"childKeys\"])) shape[\"childKeys\"] = shapeObj[\"childKeys\"].slice();\n          if (typeof shapeObj[\"expanded\"] === \"boolean\") shape.expanded = shapeObj[\"expanded\"];\n          if (typeof shapeObj[\"expandedWidth\"] === \"number\" && typeof shapeObj[\"expandedHeight\"] === \"number\") shape.expandedSize = new size_1.Size(shapeObj[\"expandedWidth\"], shapeObj[\"expandedHeight\"]);\n          return shape;\n        };\n\n        Importer.prototype.importShapeChildren = function (shapeObj, shape) {\n          return [];\n        };\n\n        Importer.prototype.importConnector = function (connectorObj) {\n          var _this = this;\n\n          this.assert(connectorObj[\"key\"], \"string\");\n          if (!Array.isArray(connectorObj[\"points\"])) throw Error(\"Invalid Format\");\n          var points = connectorObj[\"points\"].map(function (pt) {\n            _this.assert(pt[\"x\"], \"number\");\n\n            _this.assert(pt[\"y\"], \"number\");\n\n            return new point_1.Point(pt[\"x\"], pt[\"y\"]);\n          });\n          var connector = new Connector_1.Connector(points);\n          connector.key = connectorObj[\"key\"];\n          if (typeof connectorObj[\"dataKey\"] === \"string\" || typeof connectorObj[\"dataKey\"] === \"number\") connector.dataKey = connectorObj[\"dataKey\"];\n          if (typeof connectorObj[\"customData\"] === \"object\") connector.customData = Utils_1.ObjectUtils.cloneObject(connectorObj[\"customData\"]);\n          if (typeof connectorObj[\"locked\"] === \"boolean\") connector.locked = connectorObj[\"locked\"];\n          connector.endConnectionPointIndex = typeof connectorObj[\"endConnectionPointIndex\"] === \"number\" ? connectorObj[\"endConnectionPointIndex\"] : -1;\n          connector.beginConnectionPointIndex = typeof connectorObj[\"beginConnectionPointIndex\"] === \"number\" ? connectorObj[\"beginConnectionPointIndex\"] : -1;\n          if (connectorObj[\"endItemKey\"] !== undefined) this.assert(connectorObj[\"endItemKey\"], \"string\");\n          if (connectorObj[\"beginItemKey\"] !== undefined) this.assert(connectorObj[\"beginItemKey\"], \"string\");\n          connector[\"endItemKey\"] = connectorObj[\"endItemKey\"];\n          connector[\"beginItemKey\"] = connectorObj[\"beginItemKey\"];\n          if (connectorObj[\"texts\"]) connector.texts.fromObject(connectorObj[\"texts\"]);\n          if (connectorObj[\"properties\"]) connector.properties.fromObject(connectorObj[\"properties\"]);\n          if (connectorObj[\"style\"]) connector.style.fromObject(connectorObj[\"style\"]);\n          if (connectorObj[\"styleText\"]) connector.styleText.fromObject(connectorObj[\"styleText\"]);\n          if (typeof connectorObj[\"zIndex\"] === \"number\") connector.zIndex = connectorObj[\"zIndex\"];\n          return connector;\n        };\n\n        return Importer;\n      }(ImporterBase_1.ImporterBase);\n\n      exports.Importer = Importer;\n      /***/\n    },\n    /* 121 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics58 = function extendStatics(d, b) {\n          _extendStatics58 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics58(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics58(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.DiamondShapeDescription = void 0;\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var DiamondShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(DiamondShapeDescription, _super);\n\n        function DiamondShapeDescription(defaultSize, hasDefaultText) {\n          if (defaultSize === void 0) {\n            defaultSize = ShapeDescription_1.ShapeDefaultSize.clone();\n          }\n\n          return _super.call(this, defaultSize, hasDefaultText) || this;\n        }\n\n        Object.defineProperty(DiamondShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Diamond;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DiamondShapeDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        DiamondShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.x,\n              top = rect.y,\n              right = rect.right,\n              bottom = rect.bottom;\n          var _a = rect.center,\n              cx = _a.x,\n              cy = _a.y;\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(cx, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, cy), new PathPrimitive_1.PathPrimitiveLineToCommand(cx, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(left, cy), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        DiamondShapeDescription.prototype.getTextRectangle = function (shape) {\n          return shape.rectangle.clone().inflate(-shape.size.width / 4, -shape.size.height / 4);\n        };\n\n        DiamondShapeDescription.prototype.getSizeByText = function (textSize, _shape) {\n          return textSize.clone().multiply(2, 2);\n        };\n\n        return DiamondShapeDescription;\n      }(ShapeDescription_1.ShapeDescription);\n\n      exports.DiamondShapeDescription = DiamondShapeDescription;\n      /***/\n    },\n    /* 122 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics59 = function extendStatics(d, b) {\n          _extendStatics59 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics59(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics59(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.TextShapeDescription = void 0;\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var size_1 = __webpack_require__(2);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var ClipPathPrimitive_1 = __webpack_require__(53);\n\n      var RectaglePrimitive_1 = __webpack_require__(21);\n\n      var Utils_1 = __webpack_require__(18);\n\n      var TextShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(TextShapeDescription, _super);\n\n        function TextShapeDescription() {\n          var _this = _super.call(this, new size_1.Size(ShapeDescription_1.ShapeDefaultDimension, ShapeDescription_1.ShapeDefaultDimension * 0.5), true) || this;\n\n          _this.textClipPathId = Utils_1.RenderUtils.generateSvgElementId(\"clipRect\");\n          return _this;\n        }\n\n        Object.defineProperty(TextShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Text;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(TextShapeDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        TextShapeDescription.prototype.createShapePrimitives = function (shape, forToolbox) {\n          if (forToolbox) {\n            var _a = shape.rectangle,\n                left = _a.x,\n                top_1 = _a.y,\n                width = _a.width,\n                height = _a.height;\n            return [new ClipPathPrimitive_1.ClipPathPrimitive(this.getTextClipPathId(forToolbox), [new RectaglePrimitive_1.RectanglePrimitive(left, top_1, width, height)])];\n          }\n\n          return [];\n        };\n\n        TextShapeDescription.prototype.getTextClipPathId = function (forToolbox) {\n          return forToolbox ? this.textClipPathId : undefined;\n        };\n\n        TextShapeDescription.prototype.getSizeByTextRectangle = function (textSize) {\n          return textSize;\n        };\n\n        TextShapeDescription.prototype.getSizeByText = function (textSize, shape) {\n          return textSize.clone();\n        };\n\n        TextShapeDescription.prototype.getTextRectangle = function (shape) {\n          return shape.rectangle;\n        };\n\n        return TextShapeDescription;\n      }(ShapeDescription_1.ShapeDescription);\n\n      exports.TextShapeDescription = TextShapeDescription;\n      /***/\n    },\n    /* 123 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics60 = function extendStatics(d, b) {\n          _extendStatics60 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics60(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics60(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.PentagonShapeDescription = void 0;\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var PolygonShapeDescription_1 = __webpack_require__(94);\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      var Utils_1 = __webpack_require__(3);\n\n      var rectangle_1 = __webpack_require__(13);\n\n      var PentagonShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(PentagonShapeDescription, _super);\n\n        function PentagonShapeDescription(hasDefaultText) {\n          var _this = _super.call(this, hasDefaultText) || this;\n\n          _this.defaultRatio = _this.defaultSize.height / _this.defaultSize.width;\n          return _this;\n        }\n\n        Object.defineProperty(PentagonShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Pentagon;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(PentagonShapeDescription.prototype, \"angleCount\", {\n          get: function get() {\n            return 5;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        PentagonShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.x,\n              top = rect.y,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          var cx = rect.center.x;\n          var ratio = height / width / this.defaultRatio;\n          var angle = Math.PI - this.angle;\n          var py = width / 2 * Math.tan(angle / 2) * ratio;\n          var y = top + py;\n          var px = (height - py) / Math.tan(angle) / ratio;\n          var x1 = left + px;\n          var x2 = right - px;\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(cx, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, y), new PathPrimitive_1.PathPrimitiveLineToCommand(x2, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(x1, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(left, y), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        PentagonShapeDescription.prototype.processConnectionPoint = function (shape, point) {\n          var side = shape.getConnectionPointSide(point);\n\n          if (side === DiagramItem_1.ConnectionPointSide.East || side === DiagramItem_1.ConnectionPointSide.West) {\n            var rect = shape.rectangle;\n            var top_1 = rect.y,\n                width = rect.width,\n                height = rect.height;\n            var ratio = height / width / this.defaultRatio;\n            var angle = Math.PI - this.angle;\n            var py = width / 2 * Math.tan(angle / 2) * ratio;\n            var y = top_1 + py;\n            if (side === DiagramItem_1.ConnectionPointSide.East) point.y = y;else if (side === DiagramItem_1.ConnectionPointSide.West) point.y = y;\n          }\n        };\n\n        PentagonShapeDescription.prototype.calculateHeight = function (width) {\n          var angle = Math.PI - this.angle;\n          var h1 = width / 2 * Math.tan(angle / 2);\n          var side = width / 2 / Math.cos(angle / 2);\n          var h2 = side * Math.sin(angle);\n          return h1 + h2;\n        };\n\n        PentagonShapeDescription.prototype.getTextRectangle = function (shape) {\n          var textSize = Utils_1.GeometryUtils.getMaxRectangleEnscribedInEllipse(shape.size);\n          return rectangle_1.Rectangle.fromGeometry(shape.position.clone().offset((shape.size.width - textSize.width) / 2, (shape.size.height - textSize.height) / 2), textSize);\n        };\n\n        PentagonShapeDescription.prototype.getSizeByText = function (textSize, _shape) {\n          return Utils_1.GeometryUtils.getEllipseByEnscribedRectangle(textSize);\n        };\n\n        return PentagonShapeDescription;\n      }(PolygonShapeDescription_1.PolygonShapeDescription);\n\n      exports.PentagonShapeDescription = PentagonShapeDescription;\n      /***/\n    },\n    /* 124 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics61 = function extendStatics(d, b) {\n          _extendStatics61 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics61(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics61(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.HexagonShapeDescription = void 0;\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var PolygonShapeDescription_1 = __webpack_require__(94);\n\n      var Utils_1 = __webpack_require__(3);\n\n      var rectangle_1 = __webpack_require__(13);\n\n      var HexagonShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(HexagonShapeDescription, _super);\n\n        function HexagonShapeDescription() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        Object.defineProperty(HexagonShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Hexagon;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(HexagonShapeDescription.prototype, \"angleCount\", {\n          get: function get() {\n            return 6;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        HexagonShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.x,\n              top = rect.y,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width;\n          var cy = rect.center.y;\n          var angle = Math.PI - this.angle;\n          var sideX = width / (1 + 2 * Math.cos(angle));\n          var x1 = left + (width - sideX) / 2;\n          var x2 = x1 + sideX;\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(x1, top), new PathPrimitive_1.PathPrimitiveLineToCommand(x2, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, cy), new PathPrimitive_1.PathPrimitiveLineToCommand(x2, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(x1, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(left, cy), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        HexagonShapeDescription.prototype.calculateHeight = function (width) {\n          var angle = Math.PI - this.angle;\n          var sideX = width / (1 + 2 * Math.cos(angle));\n          return 2 * sideX * Math.sin(angle);\n        };\n\n        HexagonShapeDescription.prototype.getTextRectangle = function (shape) {\n          var textSize = Utils_1.GeometryUtils.getMaxRectangleEnscribedInEllipse(shape.size);\n          return rectangle_1.Rectangle.fromGeometry(shape.position.clone().offset((shape.size.width - textSize.width) / 2, (shape.size.height - textSize.height) / 2), textSize);\n        };\n\n        HexagonShapeDescription.prototype.getSizeByText = function (textSize, _shape) {\n          return Utils_1.GeometryUtils.getEllipseByEnscribedRectangle(textSize);\n        };\n\n        return HexagonShapeDescription;\n      }(PolygonShapeDescription_1.PolygonShapeDescription);\n\n      exports.HexagonShapeDescription = HexagonShapeDescription;\n      /***/\n    },\n    /* 125 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics62 = function extendStatics(d, b) {\n          _extendStatics62 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics62(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics62(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.TriangleShapeDescription = void 0;\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var ConnectionPoint_1 = __webpack_require__(44);\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      var rectangle_1 = __webpack_require__(13);\n\n      var size_1 = __webpack_require__(2);\n\n      var TriangleShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(TriangleShapeDescription, _super);\n\n        function TriangleShapeDescription(hasDefaultText) {\n          var _this = _super.call(this, undefined, hasDefaultText) || this;\n\n          _this.defaultSize.height = _this.calculateHeight(ShapeDescription_1.ShapeDefaultDimension);\n          return _this;\n        }\n\n        Object.defineProperty(TriangleShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Triangle;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(TriangleShapeDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        TriangleShapeDescription.prototype.createConnectionPoints = function () {\n          return [new ConnectionPoint_1.ConnectionPoint(0.5, 0, DiagramItem_1.ConnectionPointSide.North), new ConnectionPoint_1.ConnectionPoint(0.75, 0.5, DiagramItem_1.ConnectionPointSide.East), new ConnectionPoint_1.ConnectionPoint(0.5, 1, DiagramItem_1.ConnectionPointSide.South), new ConnectionPoint_1.ConnectionPoint(0.25, 0.5, DiagramItem_1.ConnectionPointSide.West)];\n        };\n\n        TriangleShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.x,\n              top = rect.y,\n              right = rect.right,\n              bottom = rect.bottom;\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(rect.center.x, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(left, bottom), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        TriangleShapeDescription.prototype.calculateHeight = function (width) {\n          return Math.sqrt(Math.pow(width, 2) - Math.pow(width / 2, 2));\n        };\n\n        TriangleShapeDescription.prototype.getTextRectangle = function (shape) {\n          return new rectangle_1.Rectangle(shape.position.x + shape.size.width / 4, shape.position.y + shape.size.height / 2, shape.size.width / 2, shape.size.height / 2 - ShapeDescription_1.ShapeTextPadding).nonNegativeSize();\n        };\n\n        TriangleShapeDescription.prototype.getSizeByText = function (textSize, _shape) {\n          return new size_1.Size(textSize.width * 2, textSize.height * 2 + ShapeDescription_1.ShapeTextPadding);\n        };\n\n        return TriangleShapeDescription;\n      }(ShapeDescription_1.ShapeDescription);\n\n      exports.TriangleShapeDescription = TriangleShapeDescription;\n      /***/\n    },\n    /* 126 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics63 = function extendStatics(d, b) {\n          _extendStatics63 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics63(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics63(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.DocumentShapeDescription = void 0;\n\n      var RectangleShapeDescription_1 = __webpack_require__(19);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      var DocumentShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(DocumentShapeDescription, _super);\n\n        function DocumentShapeDescription() {\n          return _super.call(this, undefined, true) || this;\n        }\n\n        Object.defineProperty(DocumentShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Document;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DocumentShapeDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        DocumentShapeDescription.prototype.createShapePrimitives = function (shape) {\n          return this.createDocumentPrimitives(shape.rectangle, shape.style);\n        };\n\n        DocumentShapeDescription.prototype.createDocumentPrimitives = function (rect, style) {\n          var left = rect.x,\n              top = rect.y,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          var cx = rect.center.x;\n          var dy = height * DocumentShapeDescription.curveOffsetRatio;\n          var primitives = [];\n          return primitives.concat([new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(left, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, bottom), new PathPrimitive_1.PathPrimitiveQuadraticCurveToCommand(right - width * 0.25, bottom - 2 * dy, cx, bottom - dy), new PathPrimitive_1.PathPrimitiveQuadraticCurveToCommand(left + width * 0.25, bottom + dy, left, bottom - dy), new PathPrimitive_1.PathPrimitiveClosePathCommand()], style)]);\n        };\n\n        DocumentShapeDescription.prototype.processConnectionPoint = function (shape, point) {\n          var side = shape.getConnectionPointSide(point);\n          if (side === DiagramItem_1.ConnectionPointSide.South) point.y -= shape.size.height * DocumentShapeDescription.curveOffsetRatio;\n        };\n\n        DocumentShapeDescription.prototype.getTextRectangle = function (shape) {\n          var rect = shape.rectangle;\n          return rect.clone().resize(0, -rect.height * DocumentShapeDescription.curveOffsetRatio);\n        };\n\n        DocumentShapeDescription.curveOffsetRatio = 0.1;\n        return DocumentShapeDescription;\n      }(RectangleShapeDescription_1.RectangleShapeDescription);\n\n      exports.DocumentShapeDescription = DocumentShapeDescription;\n      /***/\n    },\n    /* 127 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics64 = function extendStatics(d, b) {\n          _extendStatics64 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics64(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics64(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.CustomShapeDescription = void 0;\n\n      var ImagePrimitive_1 = __webpack_require__(128);\n\n      var rectangle_1 = __webpack_require__(13);\n\n      var size_1 = __webpack_require__(2);\n\n      var point_1 = __webpack_require__(1);\n\n      var ConnectionPoint_1 = __webpack_require__(44);\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      var ShapeWithImageDescription_1 = __webpack_require__(129);\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var ImageInfo_1 = __webpack_require__(49);\n\n      var ImageCache_1 = __webpack_require__(45);\n\n      var ImageLoader_1 = __webpack_require__(131);\n\n      var SvgElementPrimitive_1 = __webpack_require__(232);\n\n      var CustomShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(CustomShapeDescription, _super);\n\n        function CustomShapeDescription(properties, baseDescription) {\n          var _this = _super.call(this, new size_1.Size(properties.defaultWidth || baseDescription && baseDescription.defaultSize.width || ShapeDescription_1.ShapeDefaultDimension, properties.defaultHeight || baseDescription && baseDescription.defaultSize.height || ShapeDescription_1.ShapeDefaultDimension)) || this;\n\n          _this.properties = properties;\n          _this.baseDescription = baseDescription;\n          _this.imageLoader = new ImageLoader_1.ImageLoader(_this.updateSvgImage.bind(_this));\n          _this.defaultText = properties.defaultText !== undefined ? properties.defaultText : baseDescription && baseDescription.getDefaultText();\n          _this.defaultImageUrl = properties.defaultImageUrl || baseDescription && baseDescription.getDefaultImageUrl();\n          _this.title = properties.title || baseDescription && baseDescription.getTitle() || _this.defaultText || \"\";\n          _this.connectionPoints = _this.createConnectionPoints();\n\n          if (properties.svgUrl) {\n            _this.svgImage = new ImageInfo_1.ImageInfo(properties.svgUrl);\n            var cachedImage = ImageCache_1.ImageCache.instance.createUnloadedInfoByShapeImageInfo(_this.svgImage);\n\n            _this.imageLoader.load(cachedImage);\n          }\n\n          if (properties.svgToolboxUrl) {\n            _this.svgToolboxImage = new ImageInfo_1.ImageInfo(properties.svgToolboxUrl);\n            var cachedImage = ImageCache_1.ImageCache.instance.createUnloadedInfoByShapeImageInfo(_this.svgToolboxImage);\n\n            _this.imageLoader.load(cachedImage);\n          }\n\n          return _this;\n        }\n\n        Object.defineProperty(CustomShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return this.properties.type;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(CustomShapeDescription.prototype, \"allowEditText\", {\n          get: function get() {\n            return this.properties.allowEditText !== false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(CustomShapeDescription.prototype, \"allowEditImage\", {\n          get: function get() {\n            return this.baseDescription ? this.baseDescription.allowEditImage : this.properties.allowEditImage === true;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(CustomShapeDescription.prototype, \"enableChildren\", {\n          get: function get() {\n            return this.baseDescription && this.baseDescription.enableChildren;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(CustomShapeDescription.prototype, \"hasTemplate\", {\n          get: function get() {\n            return !!this.properties.createTemplate;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(CustomShapeDescription.prototype, \"minWidth\", {\n          get: function get() {\n            return this.properties.minWidth || this.baseDescription && this.baseDescription.minWidth;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(CustomShapeDescription.prototype, \"minHeight\", {\n          get: function get() {\n            return this.properties.minHeight || this.baseDescription && this.baseDescription.minHeight;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(CustomShapeDescription.prototype, \"maxWidth\", {\n          get: function get() {\n            return this.properties.maxWidth || this.baseDescription && this.baseDescription.maxWidth;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(CustomShapeDescription.prototype, \"maxHeight\", {\n          get: function get() {\n            return this.properties.maxHeight || this.baseDescription && this.baseDescription.maxHeight;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(CustomShapeDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return this.properties.keepRatioOnAutoSize;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(CustomShapeDescription.prototype, \"toolboxSize\", {\n          get: function get() {\n            if (this.properties.toolboxWidthToHeightRatio) return new size_1.Size(this.defaultSize.width, this.defaultSize.width / this.properties.toolboxWidthToHeightRatio);\n            return this.defaultSize;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        CustomShapeDescription.prototype.getTextAngle = function () {\n          return this.baseDescription && this.baseDescription.getTextAngle() || _super.prototype.getTextAngle.call(this);\n        };\n\n        CustomShapeDescription.prototype.getTitle = function () {\n          return this.title !== undefined ? this.title : _super.prototype.getTitle.call(this);\n        };\n\n        CustomShapeDescription.prototype.getDefaultText = function () {\n          return this.defaultText !== undefined ? this.defaultText : _super.prototype.getDefaultText.call(this);\n        };\n\n        CustomShapeDescription.prototype.getDefaultImageUrl = function () {\n          return this.defaultImageUrl !== undefined ? this.defaultImageUrl : _super.prototype.getDefaultImageUrl.call(this);\n        };\n\n        CustomShapeDescription.prototype.allowResizeHorizontally = function (shape) {\n          if (this.properties.allowResize === false) return false;\n          if (this.baseDescription) return this.baseDescription.allowResizeHorizontally(shape);\n          return _super.prototype.allowResizeHorizontally.call(this, shape);\n        };\n\n        CustomShapeDescription.prototype.allowResizeVertically = function (shape) {\n          if (this.properties.allowResize === false) return false;\n          if (this.baseDescription) return this.baseDescription.allowResizeVertically(shape);\n          return _super.prototype.allowResizeVertically.call(this, shape);\n        };\n\n        CustomShapeDescription.prototype.createConnectionPoints = function () {\n          if (this.properties && this.properties.connectionPoints && this.properties.connectionPoints.length) return this.properties.connectionPoints.map(function (ptObj) {\n            if (ptObj && typeof ptObj[\"x\"] === \"number\" && typeof ptObj[\"y\"] === \"number\") {\n              var side = typeof ptObj[\"side\"] === \"number\" ? ptObj[\"side\"] : DiagramItem_1.ConnectionPointSide.Undefined;\n              return new ConnectionPoint_1.ConnectionPoint(ptObj[\"x\"], ptObj[\"y\"], side);\n            }\n          }).filter(function (pt) {\n            return pt;\n          });\n          return _super.prototype.createConnectionPoints.call(this);\n        };\n\n        CustomShapeDescription.prototype.createImagePrimitives = function (shape, forToolbox) {\n          if (this.baseDescription) return this.baseDescription.createImagePrimitives(shape, forToolbox);\n          return _super.prototype.createImagePrimitives.call(this, shape, forToolbox);\n        };\n\n        CustomShapeDescription.prototype.createShapePrimitives = function (shape, forToolbox) {\n          var primitives = [];\n          var _a = shape.rectangle,\n              left = _a.x,\n              top = _a.y,\n              width = _a.width,\n              height = _a.height;\n          if (this.baseDescription) primitives = this.baseDescription.createShapePrimitives(shape, forToolbox);else {\n            var svgImage = forToolbox && this.svgToolboxImage ? this.svgToolboxImage : this.svgImage;\n\n            if (svgImage) {\n              var svgLeft = left + (this.properties.svgLeft && !forToolbox ? this.properties.svgLeft * width : 0);\n              var svgTop = top + (this.properties.svgTop && !forToolbox ? this.properties.svgTop * height : 0);\n              var svgWidth = this.properties.svgWidth && !forToolbox ? this.properties.svgWidth * width : width;\n              var svgHeight = this.properties.svgHeight && !forToolbox ? this.properties.svgHeight * height : height;\n              primitives = primitives.concat([new ImagePrimitive_1.ImagePrimitive(svgLeft, svgTop, svgWidth, svgHeight, svgImage.exportUrl)]);\n            }\n          }\n          var createTemplate = forToolbox && this.properties.createToolboxTemplate || this.properties.createTemplate;\n\n          if (createTemplate) {\n            var templateLeft = left + (this.properties.templateLeft && !forToolbox ? this.properties.templateLeft * width : 0);\n            var templateTop = top + (this.properties.templateTop && !forToolbox ? this.properties.templateTop * height : 0);\n            var templateWidth = this.properties.templateWidth && !forToolbox ? this.properties.templateWidth * width : width;\n            var templateHeight = this.properties.templateHeight && !forToolbox ? this.properties.templateHeight * height : height;\n            var nativeShape = this.properties.apiController ? this.properties.apiController.createNativeShape(shape) : shape.toNative();\n            primitives = primitives.concat([new SvgElementPrimitive_1.SvgElementPrimitive(templateLeft, templateTop, templateWidth, templateHeight, createTemplate, this.properties.destroyTemplate, nativeShape)]);\n          }\n\n          return primitives;\n        };\n\n        CustomShapeDescription.prototype.createParameters = function (parameters) {\n          if (this.baseDescription) return this.baseDescription.createParameters(parameters);else return _super.prototype.createParameters.call(this, parameters);\n        };\n\n        CustomShapeDescription.prototype.normalizeParameters = function (shape, parameters) {\n          if (this.baseDescription) this.baseDescription.normalizeParameters(shape, parameters);else _super.prototype.normalizeParameters.call(this, shape, parameters);\n        };\n\n        CustomShapeDescription.prototype.modifyParameters = function (shape, parameters, deltaX, deltaY) {\n          if (this.baseDescription) this.baseDescription.modifyParameters(shape, parameters, deltaX, deltaY);else _super.prototype.modifyParameters.call(this, shape, parameters, deltaX, deltaY);\n        };\n\n        CustomShapeDescription.prototype.getParameterPoints = function (shape) {\n          if (this.baseDescription) return this.baseDescription.getParameterPoints(shape);else return _super.prototype.getParameterPoints.call(this, shape);\n        };\n\n        CustomShapeDescription.prototype.getTextRectangle = function (shape) {\n          if (this.baseDescription) return this.baseDescription.getTextRectangle(shape);else {\n            var _a = shape.rectangle,\n                left = _a.x,\n                top_1 = _a.y,\n                width = _a.width,\n                height = _a.height;\n            return new rectangle_1.Rectangle(left + (this.properties.textLeft ? this.properties.textLeft * width : 0), top_1 + (this.properties.textTop ? this.properties.textTop * height : 0), this.properties.textWidth ? this.properties.textWidth * width : width, this.properties.textHeight ? this.properties.textHeight * height : height);\n          }\n        };\n\n        CustomShapeDescription.prototype.getSizeByText = function (textSize, shape) {\n          if (this.baseDescription) return this.baseDescription.getSizeByText(textSize, shape);else return new size_1.Size(textSize.width / this.properties.textWidth, textSize.height / this.properties.textHeight);\n        };\n\n        CustomShapeDescription.prototype.getImageSize = function (shapeSize, includeMargins, forToolbox) {\n          if (this.baseDescription) {\n            if (this.baseDescription instanceof ShapeWithImageDescription_1.ShapeWithImageDescription) return this.baseDescription.getImageSize(shapeSize, includeMargins, forToolbox);\n            return size_1.Size.empty();\n          }\n\n          return new size_1.Size(this.properties.imageWidth ? this.properties.imageWidth * shapeSize.width : shapeSize.width, this.properties.imageHeight ? this.properties.imageHeight * shapeSize.height : shapeSize.height).nonNegativeSize();\n        };\n\n        CustomShapeDescription.prototype.getImagePlacementRectangle = function (rect, forToolbox) {\n          if (this.baseDescription) {\n            if (this.baseDescription instanceof ShapeWithImageDescription_1.ShapeWithImageDescription) return this.baseDescription.getImagePlacementRectangle(rect, forToolbox);\n            return rectangle_1.Rectangle.fromGeometry(point_1.Point.zero(), size_1.Size.empty());\n          }\n\n          var left = rect.x,\n              top = rect.y,\n              width = rect.width,\n              height = rect.height;\n          return new rectangle_1.Rectangle(left + (this.properties.imageLeft && !forToolbox ? this.properties.imageLeft * width : 0), top + (this.properties.imageTop && !forToolbox ? this.properties.imageTop * height : 0), this.properties.imageWidth && !forToolbox ? this.properties.imageWidth * width : width, this.properties.imageHeight && !forToolbox ? this.properties.imageHeight * height : height);\n        };\n\n        CustomShapeDescription.prototype.updateSvgImage = function (cacheImageInfo) {\n          var isToolboxImage = cacheImageInfo.imageUrl && cacheImageInfo.imageUrl === this.properties.svgToolboxUrl;\n          var svgImage = isToolboxImage ? this.svgToolboxImage : this.svgImage;\n          if (cacheImageInfo.base64) svgImage.loadBase64Content(cacheImageInfo.base64);else svgImage.setUnableToLoadFlag();\n          if (!isToolboxImage) this.raiseShapeDescriptionChanged(this);\n        };\n\n        return CustomShapeDescription;\n      }(ShapeWithImageDescription_1.ShapeWithImageDescription);\n\n      exports.CustomShapeDescription = CustomShapeDescription;\n      /***/\n    },\n    /* 128 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics65 = function extendStatics(d, b) {\n          _extendStatics65 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics65(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics65(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ImagePrimitive = void 0;\n\n      var RenderHelper_1 = __webpack_require__(15);\n\n      var Primitive_1 = __webpack_require__(24);\n\n      var ImagePrimitive =\n      /** @class */\n      function (_super) {\n        __extends(ImagePrimitive, _super);\n\n        function ImagePrimitive(x, y, width, height, url, preserveAspectRatio, style, className) {\n          if (preserveAspectRatio === void 0) {\n            preserveAspectRatio = \"none\";\n          }\n\n          var _this = _super.call(this, style, className) || this;\n\n          _this.x = x;\n          _this.y = y;\n          _this.width = width;\n          _this.height = height;\n          _this.url = url;\n          _this.preserveAspectRatio = preserveAspectRatio;\n          return _this;\n        }\n\n        ImagePrimitive.prototype.createMainElement = function () {\n          return document.createElementNS(RenderHelper_1.svgNS, \"image\");\n        };\n\n        ImagePrimitive.prototype.applyElementProperties = function (element, measurer) {\n          this.setUnitAttribute(element, \"x\", this.x);\n          this.setUnitAttribute(element, \"y\", this.y);\n          this.setUnitAttribute(element, \"width\", this.width);\n          this.setUnitAttribute(element, \"height\", this.height);\n          this.setPositionCorrectionAttribute(element);\n          element.setAttribute(\"href\", this.url);\n          element.setAttribute(\"preserveAspectRatio\", this.preserveAspectRatio);\n\n          _super.prototype.applyElementProperties.call(this, element, measurer);\n        };\n\n        return ImagePrimitive;\n      }(Primitive_1.SvgPrimitive);\n\n      exports.ImagePrimitive = ImagePrimitive;\n      /***/\n    },\n    /* 129 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics66 = function extendStatics(d, b) {\n          _extendStatics66 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics66(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics66(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ShapeWithImageDescription = exports.SHAPE_IMAGE_CLASSNAMES = exports.ShapeDefaultSize = exports.ShapeDefaultDimension = void 0;\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var rectangle_1 = __webpack_require__(13);\n\n      var size_1 = __webpack_require__(2);\n\n      var point_1 = __webpack_require__(1);\n\n      var unit_converter_1 = __webpack_require__(12);\n\n      var ImagePrimitive_1 = __webpack_require__(128);\n\n      var RectaglePrimitive_1 = __webpack_require__(21);\n\n      var GroupPrimitive_1 = __webpack_require__(38);\n\n      var Utils_1 = __webpack_require__(18);\n\n      var ClipPathPrimitive_1 = __webpack_require__(53);\n\n      var ShapeImageIndicator_1 = __webpack_require__(130);\n\n      exports.ShapeDefaultDimension = 1440;\n      exports.ShapeDefaultSize = new size_1.Size(exports.ShapeDefaultDimension, exports.ShapeDefaultDimension);\n      exports.SHAPE_IMAGE_CLASSNAMES = {\n        IMAGE: \"dxdi-image\",\n        IMAGE_PLACEHOLDER: \"dxdi-image-placeholder\",\n        LOADING_INDICATOR: \"dxdi-spinner\",\n        USER_PIC: \"dxdi-user\",\n        WARNING_MARK: \"dxdi-warning\"\n      };\n\n      var ShapeWithImageDescription =\n      /** @class */\n      function (_super) {\n        __extends(ShapeWithImageDescription, _super);\n\n        function ShapeWithImageDescription(defaultSize, hasDefaultText) {\n          if (defaultSize === void 0) {\n            defaultSize = exports.ShapeDefaultSize.clone();\n          }\n\n          var _this = _super.call(this, defaultSize, hasDefaultText) || this;\n\n          _this.hasDefaultText = hasDefaultText;\n          _this.defaultIconSize = 480;\n          return _this;\n        }\n\n        Object.defineProperty(ShapeWithImageDescription.prototype, \"enableImage\", {\n          get: function get() {\n            return true;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ShapeWithImageDescription.prototype.getImageMargin = function (forToolbox) {\n          return forToolbox ? unit_converter_1.UnitConverter.pixelsToTwips(2) : unit_converter_1.UnitConverter.pixelsToTwips(3);\n        };\n\n        ShapeWithImageDescription.prototype.createImagePrimitives = function (shape, forToolbox) {\n          if (!this.enableImage) return [];\n          var rect = this.getImagePlacementRectangle(shape.rectangle, forToolbox);\n          if (forToolbox) return this.createImagePlaceholder(rect);\n          var imagePrimitives = [];\n          if (shape.image.isEmpty || shape.image.unableToLoad) imagePrimitives = imagePrimitives.concat(this.createEmptyImagePrimitives(rect, shape.image.unableToLoad));else if (shape.image.renderUrl === \"\") imagePrimitives = imagePrimitives.concat(this.createLoadingImagePrimitives(rect));else imagePrimitives = imagePrimitives.concat(this.createLoadedImagePrimitives(rect, shape.image.renderUrl));\n\n          if (shape.image.renderUrl === \"\") {\n            var clipPathId = Utils_1.RenderUtils.generateSvgElementId(\"clipImage\");\n            return [].concat([new GroupPrimitive_1.GroupPrimitive(imagePrimitives, exports.SHAPE_IMAGE_CLASSNAMES.IMAGE, undefined, clipPathId), new ClipPathPrimitive_1.ClipPathPrimitive(clipPathId, [new RectaglePrimitive_1.RectanglePrimitive(rect.x, rect.y, rect.width, rect.height)])]);\n          } else return imagePrimitives;\n        };\n\n        ShapeWithImageDescription.prototype.createImagePlaceholder = function (rect) {\n          return [];\n        };\n\n        ShapeWithImageDescription.prototype.createLoadedImagePrimitives = function (rect, imageUrl) {\n          return [new ImagePrimitive_1.ImagePrimitive(rect.x, rect.y, rect.width, rect.height, imageUrl, ShapeWithImageDescription.imageScalingRule, undefined, exports.SHAPE_IMAGE_CLASSNAMES.IMAGE)];\n        };\n\n        ShapeWithImageDescription.prototype.createLoadingImagePrimitives = function (rect) {\n          var loadingRect = this.getIconPlacementRectangle(rect);\n          return [ShapeImageIndicator_1.ShapeImageIndicator.createLoadingIndicatorPrimitives(loadingRect.x, loadingRect.y, this.defaultIconSize, unit_converter_1.UnitConverter.pixelsToTwips(5), exports.SHAPE_IMAGE_CLASSNAMES.LOADING_INDICATOR)];\n        };\n\n        ShapeWithImageDescription.prototype.createEmptyImagePrimitives = function (rect, showWarning) {\n          var loadingRect = this.getIconPlacementRectangle(rect);\n          var primitives = [];\n          primitives = primitives.concat(this.createEmptyImagePrimitive(loadingRect));\n          if (showWarning) primitives = primitives.concat(this.createWarningPrimitive(loadingRect));\n          return primitives;\n        };\n\n        ShapeWithImageDescription.prototype.createEmptyImagePrimitive = function (rect) {\n          return new GroupPrimitive_1.GroupPrimitive([]);\n        };\n\n        ShapeWithImageDescription.prototype.createWarningPrimitive = function (rect) {\n          return new GroupPrimitive_1.GroupPrimitive([]);\n        };\n\n        ShapeWithImageDescription.prototype.getIconPlacementRectangle = function (rect) {\n          var iconRect = rectangle_1.Rectangle.fromGeometry(new point_1.Point(rect.x, rect.y), new size_1.Size(this.defaultIconSize, this.defaultIconSize));\n          if (iconRect.width < rect.width) iconRect.x = rect.x + (rect.width - iconRect.width) / 2;\n          if (iconRect.height < rect.height) iconRect.y = rect.y + (rect.height - iconRect.height) / 2;\n          return iconRect;\n        };\n\n        ShapeWithImageDescription.imageScalingRule = \"xMidYMid meet\";\n        return ShapeWithImageDescription;\n      }(ShapeDescription_1.ShapeDescription);\n\n      exports.ShapeWithImageDescription = ShapeWithImageDescription;\n      /***/\n    },\n    /* 130 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ShapeImageIndicator = void 0;\n\n      var EllipsePrimitive_1 = __webpack_require__(52);\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var GroupPrimitive_1 = __webpack_require__(38);\n\n      var browser_1 = __webpack_require__(17);\n\n      var RectaglePrimitive_1 = __webpack_require__(21);\n\n      var unit_converter_1 = __webpack_require__(12);\n\n      var ShapeImageIndicator =\n      /** @class */\n      function () {\n        function ShapeImageIndicator(x, y, size, borderThickness, className) {\n          this.x = x;\n          this.y = y;\n          this.size = size;\n          this.borderThickness = borderThickness;\n          this.className = className;\n          this.animationStarted = false;\n        }\n\n        ShapeImageIndicator.createLoadingIndicatorPrimitives = function (x, y, r, borderThickness, className) {\n          var indicator = new ShapeImageIndicator(x, y, r, borderThickness, className);\n          return indicator.createLoadingIndicatorPrimitive();\n        };\n\n        ShapeImageIndicator.createUserIconPrimitives = function (x, y, r, borderThickness, className) {\n          var indicator = new ShapeImageIndicator(x, y, r, borderThickness, className);\n          return indicator.createUserIconPrimitive();\n        };\n\n        ShapeImageIndicator.createWarningIconPrimitives = function (x, y, size, className) {\n          var indicator = new ShapeImageIndicator(x, y, size, undefined, className);\n          return indicator.createWarningIconPrimitive();\n        };\n\n        ShapeImageIndicator.prototype.rotate = function (element, centerX, centerY, timestamp) {\n          if (!this.animationStarted) return;\n          var angle = Math.round(timestamp) % 1080 / 3;\n          var transformAttributeValue = \"rotate(\" + angle + \" \" + centerX + \" \" + centerY + \")\";\n          element.setAttribute(\"transform\", transformAttributeValue);\n          this.animationRequestId = requestAnimationFrame(function (timestamp) {\n            this.rotate(element, centerX, centerY, timestamp);\n          }.bind(this));\n        };\n\n        ShapeImageIndicator.prototype.onApplyLoadingIndicatorElementProperties = function (element) {\n          var _a = [unit_converter_1.UnitConverter.twipsToPixelsF(this.x + this.size / 2), unit_converter_1.UnitConverter.twipsToPixelsF(this.y + this.size / 2)],\n              centerX = _a[0],\n              centerY = _a[1];\n\n          if (browser_1.Browser.IE) {\n            this.animationRequestId = requestAnimationFrame(function (timestamp) {\n              this.rotate(element, centerX, centerY, timestamp);\n            }.bind(this));\n            this.animationStarted = true;\n          } else element.style.setProperty(\"transform-origin\", centerX + \"px \" + centerY + \"px\");\n        };\n\n        ShapeImageIndicator.prototype.center = function () {\n          return [unit_converter_1.UnitConverter.twipsToPixelsF(this.x + this.size / 2), unit_converter_1.UnitConverter.twipsToPixelsF(this.y + this.size / 2)];\n        };\n\n        ShapeImageIndicator.prototype.createLoadingIndicatorPrimitive = function () {\n          var _a = this.center(),\n              centerX = _a[0],\n              centerY = _a[1];\n\n          var radius = unit_converter_1.UnitConverter.twipsToPixelsF(this.size / 2 - this.borderThickness / 2);\n          return new GroupPrimitive_1.GroupPrimitive([new EllipsePrimitive_1.EllipsePrimitive(centerX + \"\", centerY + \"\", radius + \"\", radius + \"\"), new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(centerX + radius + \"\", centerY + \"\"), new PathPrimitive_1.PathPrimitiveArcToCommand(radius + \"\", radius + \"\", 0, false, false, centerX + \"\", centerY - radius + \"\")])], this.className, undefined, undefined, this.onApplyLoadingIndicatorElementProperties.bind(this), this.onBeforeDispose.bind(this));\n        };\n\n        ShapeImageIndicator.prototype.createUserIconPrimitive = function () {\n          var _a = this.center(),\n              centerX = _a[0],\n              centerY = _a[1];\n\n          var radius = unit_converter_1.UnitConverter.twipsToPixelsF(this.size / 2 - this.borderThickness / 2);\n          var sizeInPixels = unit_converter_1.UnitConverter.twipsToPixelsF(this.size);\n          return new GroupPrimitive_1.GroupPrimitive([new EllipsePrimitive_1.EllipsePrimitive(centerX + \"\", centerY + \"\", radius + \"\", radius + \"\", undefined, \"dxdi-background\"), new EllipsePrimitive_1.EllipsePrimitive(centerX + \"\", centerY - sizeInPixels / 8 + \"\", sizeInPixels / 8 + \"\", sizeInPixels / 8 + \"\"), new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(centerX + \"\", centerY + sizeInPixels / 16 + \"\"), new PathPrimitive_1.PathPrimitiveCubicCurveToCommand(centerX + 0.1375 * sizeInPixels + \"\", centerY + sizeInPixels / 16 + \"\", centerX + sizeInPixels / 4 + \"\", centerY + 0.11875 * sizeInPixels + \"\", centerX + sizeInPixels / 4 + \"\", centerY + 0.1875 * sizeInPixels + \"\"), new PathPrimitive_1.PathPrimitiveLineToCommand(centerX + sizeInPixels / 4 + \"\", centerY + sizeInPixels / 4 + \"\"), new PathPrimitive_1.PathPrimitiveLineToCommand(centerX - sizeInPixels / 4 + \"\", centerY + sizeInPixels / 4 + \"\"), new PathPrimitive_1.PathPrimitiveLineToCommand(centerX - sizeInPixels / 4 + \"\", centerY + 0.1875 * sizeInPixels + \"\"), new PathPrimitive_1.PathPrimitiveCubicCurveToCommand(centerX - sizeInPixels / 4 + \"\", centerY + 0.11875 * sizeInPixels + \"\", centerX - 0.1375 * sizeInPixels + \"\", centerY + sizeInPixels / 16 + \"\", centerX + \"\", centerY + sizeInPixels / 16 + \"\"), new PathPrimitive_1.PathPrimitiveClosePathCommand()])], this.className);\n        };\n\n        ShapeImageIndicator.prototype.createWarningIconPrimitive = function () {\n          var _a = this.center(),\n              centerX = _a[0],\n              centerY = _a[1];\n\n          var radius = unit_converter_1.UnitConverter.twipsToPixelsF(this.size / 2) - 1;\n          var exclamationLineWidth = unit_converter_1.UnitConverter.twipsToPixelsF(this.size / 8);\n          return new GroupPrimitive_1.GroupPrimitive([new EllipsePrimitive_1.EllipsePrimitive(centerX + \"\", centerY + \"\", radius + \"\", radius + \"\"), new RectaglePrimitive_1.RectanglePrimitive(centerX - exclamationLineWidth / 2 + 0.5 + \"\", centerY + radius - unit_converter_1.UnitConverter.twipsToPixelsF(this.size / 4) + \"\", exclamationLineWidth + \"\", exclamationLineWidth + \"\"), new RectaglePrimitive_1.RectanglePrimitive(centerX - exclamationLineWidth / 2 + 0.5 + \"\", centerY - radius + unit_converter_1.UnitConverter.twipsToPixelsF(this.size / 4) - exclamationLineWidth + \"\", exclamationLineWidth + \"\", radius + \"\")], this.className);\n        };\n\n        ShapeImageIndicator.prototype.onBeforeDispose = function () {\n          if (this.animationRequestId) cancelAnimationFrame(this.animationRequestId);\n          this.animationStarted = false;\n        };\n\n        return ShapeImageIndicator;\n      }();\n\n      exports.ShapeImageIndicator = ShapeImageIndicator;\n      /***/\n    },\n    /* 131 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ImageLoader = void 0;\n\n      var ImageCache_1 = __webpack_require__(45);\n\n      var ImageLoader =\n      /** @class */\n      function () {\n        function ImageLoader(loadedCallback) {\n          this.loadedCallback = loadedCallback;\n        }\n\n        ImageLoader.prototype.load = function (data) {\n          if (data.isLoaded) this.loadedCallback(data);else if (!data.isLoading) this.loadInner(data);\n        };\n\n        ImageLoader.prototype.loadInner = function (data) {\n          var _this = this;\n\n          if (data.imageUrl) this.loadPictureByUrl(data, function () {\n            return _this.finalizeLoading(data, data);\n          });else if (data.base64) this.loadPictureByBase64(data, function () {\n            return _this.finalizeLoading(data, data);\n          });\n          return data;\n        };\n\n        ImageLoader.prototype.finalizeLoading = function (loadedData, existingInfo) {\n          if (!existingInfo) existingInfo = ImageCache_1.ImageCache.instance.getImageData(loadedData.actualId);\n          if (!existingInfo.isLoaded) ImageCache_1.ImageCache.instance.finalizeLoading(existingInfo, loadedData);\n          this.loadedCallback(existingInfo);\n        };\n\n        ImageLoader.prototype.loadPictureByBase64 = function (data, imageLoaded) {\n          var img = new Image();\n\n          img.onload = function () {\n            imageLoaded(data);\n          };\n\n          img.src = data.base64;\n        };\n\n        ImageLoader.prototype.loadPictureByUrl = function (data, imageLoaded) {\n          var _this = this;\n\n          var xhr = new XMLHttpRequest();\n\n          try {\n            xhr.onload = function () {\n              var reader = new FileReader();\n\n              reader.onloadend = function () {\n                data.base64 = reader.result;\n\n                _this.loadPictureByBase64(data, function (data) {\n                  return imageLoaded(data);\n                });\n              };\n\n              reader.readAsDataURL(xhr.response);\n            }; // Access to XMLHttpRequest at 'https://url.jpg' from origin 'http://myurl' has been blocked by CORS policy:\n            // No 'Access-Control-Allow-Origin' header is present on the requested resource.\n\n\n            xhr.onerror = function ()\n            /* this: XMLHttpRequest*/\n            {\n              return imageLoaded(data);\n            };\n\n            xhr.onloadend = function () {\n              if (xhr.status === 404) imageLoaded(data);\n            };\n\n            xhr.open(\"GET\", data.imageUrl, true);\n            xhr.responseType = \"blob\";\n            data.startLoading();\n            xhr.send();\n          } catch (_a) {}\n        };\n\n        return ImageLoader;\n      }();\n\n      exports.ImageLoader = ImageLoader;\n      /***/\n    },\n    /* 132 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics67 = function extendStatics(d, b) {\n          _extendStatics67 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics67(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics67(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ContainerDescription = exports.CONTAINER_EXPAND_BUTTON_SIGN_RATIO = exports.CONTAINER_EXPAND_BUTTON_RECT_RATIO = exports.CONTAINER_HEADER_TOOLBOX_SIZE_RATIO = exports.CONTAINER_HEADER_SIZE = void 0;\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var size_1 = __webpack_require__(2);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var RectaglePrimitive_1 = __webpack_require__(21);\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var Utils_1 = __webpack_require__(18);\n\n      var Event_1 = __webpack_require__(11);\n\n      var GroupPrimitive_1 = __webpack_require__(38);\n\n      var ConnectionPoint_1 = __webpack_require__(44);\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      var LocalizationService_1 = __webpack_require__(35);\n\n      exports.CONTAINER_HEADER_SIZE = 360;\n      exports.CONTAINER_HEADER_TOOLBOX_SIZE_RATIO = 0.2;\n      exports.CONTAINER_EXPAND_BUTTON_RECT_RATIO = 0.5;\n      exports.CONTAINER_EXPAND_BUTTON_SIGN_RATIO = 0.3;\n\n      var ContainerDescription =\n      /** @class */\n      function (_super) {\n        __extends(ContainerDescription, _super);\n\n        function ContainerDescription(defaultSize) {\n          if (defaultSize === void 0) {\n            defaultSize = new size_1.Size(ShapeDescription_1.ShapeDefaultDimension * 2, ShapeDescription_1.ShapeDefaultDimension * 1.5);\n          }\n\n          return _super.call(this, defaultSize, true) || this;\n        }\n\n        Object.defineProperty(ContainerDescription.prototype, \"enableChildren\", {\n          get: function get() {\n            return true;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ContainerDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ContainerDescription.prototype.getDefaultText = function () {\n          return LocalizationService_1.DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.Container];\n        };\n\n        ContainerDescription.prototype.createConnectionPoints = function () {\n          return [new ConnectionPoint_1.ConnectionPoint(0.25, 0, DiagramItem_1.ConnectionPointSide.North), new ConnectionPoint_1.ConnectionPoint(0.5, 0, DiagramItem_1.ConnectionPointSide.North), new ConnectionPoint_1.ConnectionPoint(0.75, 0, DiagramItem_1.ConnectionPointSide.North), new ConnectionPoint_1.ConnectionPoint(1, 0.25, DiagramItem_1.ConnectionPointSide.East), new ConnectionPoint_1.ConnectionPoint(1, 0.5, DiagramItem_1.ConnectionPointSide.East), new ConnectionPoint_1.ConnectionPoint(1, 0.75, DiagramItem_1.ConnectionPointSide.East), new ConnectionPoint_1.ConnectionPoint(0.75, 1, DiagramItem_1.ConnectionPointSide.South), new ConnectionPoint_1.ConnectionPoint(0.5, 1, DiagramItem_1.ConnectionPointSide.South), new ConnectionPoint_1.ConnectionPoint(0.25, 1, DiagramItem_1.ConnectionPointSide.South), new ConnectionPoint_1.ConnectionPoint(0, 0.75, DiagramItem_1.ConnectionPointSide.West), new ConnectionPoint_1.ConnectionPoint(0, 0.5, DiagramItem_1.ConnectionPointSide.West), new ConnectionPoint_1.ConnectionPoint(0, 0.25, DiagramItem_1.ConnectionPointSide.West)];\n        };\n\n        ContainerDescription.prototype.getConnectionPointIndexForItem = function (item, connectionPointIndex) {\n          var shapeConnectionPoints = item && item.getConnectionPoints();\n          if (shapeConnectionPoints.length === 4) return connectionPointIndex * 3 + 1;\n          return connectionPointIndex;\n        };\n\n        ContainerDescription.prototype.getConnectionPointIndexForSide = function (side) {\n          return side * 3 + 1;\n        };\n\n        ContainerDescription.prototype.createShapePrimitives = function (shape, forToolbox) {\n          var _a = shape.rectangle,\n              left = _a.x,\n              top = _a.y,\n              width = _a.width,\n              height = _a.height;\n          var primitives = [];\n          if (shape.expanded) primitives = primitives.concat([new RectaglePrimitive_1.RectanglePrimitive(left, top, width, height, shape.style)]);\n          return primitives.concat(this.createHeaderPrimitives(shape, forToolbox));\n        };\n\n        ContainerDescription.prototype.createExpandButtonPrimitives = function (shape, rect) {\n          var commands = [new PathPrimitive_1.PathPrimitiveMoveToCommand(rect.x + rect.width * ((1 - exports.CONTAINER_EXPAND_BUTTON_SIGN_RATIO) / 2), rect.center.y), new PathPrimitive_1.PathPrimitiveLineToCommand(rect.x + rect.width * ((1 - exports.CONTAINER_EXPAND_BUTTON_SIGN_RATIO) / 2 + exports.CONTAINER_EXPAND_BUTTON_SIGN_RATIO), rect.center.y)];\n          if (!shape.expanded) commands = commands.concat([new PathPrimitive_1.PathPrimitiveMoveToCommand(rect.center.x, rect.y + rect.height * ((1 - exports.CONTAINER_EXPAND_BUTTON_SIGN_RATIO) / 2)), new PathPrimitive_1.PathPrimitiveLineToCommand(rect.center.x, rect.y + rect.height * ((1 - exports.CONTAINER_EXPAND_BUTTON_SIGN_RATIO) / 2 + exports.CONTAINER_EXPAND_BUTTON_SIGN_RATIO))]);\n          var buttonRect = rect.clone().inflate(-rect.width * (1 - exports.CONTAINER_EXPAND_BUTTON_RECT_RATIO) / 2, -rect.height * (1 - exports.CONTAINER_EXPAND_BUTTON_RECT_RATIO) / 2);\n          return [new GroupPrimitive_1.GroupPrimitive([new RectaglePrimitive_1.RectanglePrimitive(buttonRect.x, buttonRect.y, buttonRect.width, buttonRect.height, shape.style), new PathPrimitive_1.PathPrimitive(commands, shape.style)], \"shape-expand-btn\", null, null, function (el) {\n            Utils_1.RenderUtils.setElementEventData(el, Event_1.MouseEventElementType.ShapeExpandButton, shape.key);\n          })];\n        };\n\n        return ContainerDescription;\n      }(ShapeDescription_1.ShapeDescription);\n\n      exports.ContainerDescription = ContainerDescription;\n      /***/\n    },\n    /* 133 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics68 = function extendStatics(d, b) {\n          _extendStatics68 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics68(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics68(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.CardBaseDescription = void 0;\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var rectangle_1 = __webpack_require__(13);\n\n      var size_1 = __webpack_require__(2);\n\n      var ShapeWithImageDescription_1 = __webpack_require__(129);\n\n      var RoundedRectanglePrimitive_1 = __webpack_require__(236);\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var GroupPrimitive_1 = __webpack_require__(38);\n\n      var ShapeImageIndicator_1 = __webpack_require__(130);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var LocalizationService_1 = __webpack_require__(35);\n\n      var unit_converter_1 = __webpack_require__(12);\n\n      var point_1 = __webpack_require__(1);\n\n      var CardBaseDescription =\n      /** @class */\n      function (_super) {\n        __extends(CardBaseDescription, _super);\n\n        function CardBaseDescription(defaultSize) {\n          if (defaultSize === void 0) {\n            defaultSize = new size_1.Size(ShapeDescription_1.ShapeDefaultDimension, 26 / 46 * ShapeDescription_1.ShapeDefaultDimension);\n          }\n\n          return _super.call(this, defaultSize, true) || this;\n        }\n\n        Object.defineProperty(CardBaseDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        CardBaseDescription.prototype.getDefaultText = function () {\n          return LocalizationService_1.DiagramLocalizationService.shapeTexts[ShapeTypes_1.ShapeTypes.Card];\n        };\n\n        CardBaseDescription.prototype.createShapePrimitives = function (shape, forToolbox) {\n          var _a = shape.rectangle,\n              left = _a.x,\n              top = _a.y,\n              width = _a.width,\n              height = _a.height;\n          return [new RoundedRectanglePrimitive_1.RoundedRectanglePrimitive(left, top, width, height, forToolbox ? 30 : 60, forToolbox ? 30 : 60, shape.style)];\n        };\n\n        CardBaseDescription.prototype.createImagePlaceholder = function (rect) {\n          return [new RoundedRectanglePrimitive_1.RoundedRectanglePrimitive(rect.x, rect.y, rect.width, rect.height, unit_converter_1.UnitConverter.pixelsToTwips(2), unit_converter_1.UnitConverter.pixelsToTwips(2), undefined, ShapeWithImageDescription_1.SHAPE_IMAGE_CLASSNAMES.IMAGE_PLACEHOLDER)];\n        };\n\n        CardBaseDescription.prototype.createEmptyImagePrimitive = function (rect) {\n          return ShapeImageIndicator_1.ShapeImageIndicator.createUserIconPrimitives(rect.x, rect.y, this.defaultIconSize, unit_converter_1.UnitConverter.pixelsToTwips(1), ShapeWithImageDescription_1.SHAPE_IMAGE_CLASSNAMES.USER_PIC);\n        };\n\n        CardBaseDescription.prototype.createWarningPrimitive = function (rect) {\n          return ShapeImageIndicator_1.ShapeImageIndicator.createWarningIconPrimitives(rect.x + this.defaultIconSize / 2, rect.y + this.defaultIconSize / 2, this.defaultIconSize / 2, ShapeWithImageDescription_1.SHAPE_IMAGE_CLASSNAMES.WARNING_MARK);\n        };\n\n        CardBaseDescription.prototype.getTextRectangle = function (shape) {\n          var rect = shape.rectangle;\n          var textRectangle = rect.clone().inflate(-ShapeDescription_1.ShapeTextPadding, -ShapeDescription_1.ShapeTextPadding);\n          var imgBlockSize = this.getImageSize(rect.createSize(), true);\n          if (this.isTextAfterImage) textRectangle.moveRectangle(this.isHorizontal ? imgBlockSize.width : 0, this.isHorizontal ? 0 : imgBlockSize.height);\n          textRectangle.resize(this.isHorizontal ? -imgBlockSize.width : 0, this.isHorizontal ? 0 : -imgBlockSize.height);\n          return textRectangle.nonNegativeSize();\n        };\n\n        CardBaseDescription.prototype.getSizeByText = function (textSize, _shape) {\n          var size = textSize.clone().offset(ShapeDescription_1.ShapeTextPadding * 2, ShapeDescription_1.ShapeTextPadding * 2);\n          var imgBlockSize = this.getImageSizeByTextBlockSize(size);\n          if (this.isHorizontal) size.width += imgBlockSize.width;else size.height += imgBlockSize.height;\n          return size;\n        };\n\n        CardBaseDescription.prototype.createTextPrimitives = function (shape, forToolbox) {\n          if (forToolbox) return this.createGraphicalTextRepresentation(shape.rectangle);else return _super.prototype.createTextPrimitives.call(this, shape, forToolbox);\n        };\n\n        CardBaseDescription.prototype.createGraphicalTextRepresentation = function (rect) {\n          var textRect = new rectangle_1.Rectangle(0, 0, 0, 0);\n          var imgBlockSize = this.getImageSize(rect.createSize(), true, true);\n\n          if (this.isHorizontal) {\n            var horizontalShift = this.isTextAfterImage ? rect.width / 2 - unit_converter_1.UnitConverter.pixelsToTwips(2) : 0;\n            textRect.x = rect.x + horizontalShift + unit_converter_1.UnitConverter.pixelsToTwips(4);\n            textRect.y = rect.y + unit_converter_1.UnitConverter.pixelsToTwips(5);\n            textRect.width = imgBlockSize.width - unit_converter_1.UnitConverter.pixelsToTwips(4);\n            textRect.height = rect.height - unit_converter_1.UnitConverter.pixelsToTwips(6);\n          } else {\n            var verticalShift = this.isTextAfterImage ? rect.height / 2 - unit_converter_1.UnitConverter.pixelsToTwips(2) : 0;\n            textRect.x = rect.x + rect.width / 4;\n            textRect.y = rect.y + verticalShift + unit_converter_1.UnitConverter.pixelsToTwips(4);\n            textRect.width = rect.width / 2;\n            textRect.height = imgBlockSize.height - unit_converter_1.UnitConverter.pixelsToTwips(2);\n          }\n\n          return this.createTextRepresentationPrimitives(textRect);\n        };\n\n        CardBaseDescription.prototype.getImagePlacementRectangle = function (rect, forToolbox) {\n          var imageSize = this.getImageSize(rect.createSize(), false, forToolbox);\n          var imageRectangle = rectangle_1.Rectangle.fromGeometry(new point_1.Point(rect.x, rect.y), imageSize);\n          var imgBlockSize = this.getImageSize(rect.createSize(), true, forToolbox);\n          if (this.isHorizontal && this.isTextAfterImage) imageRectangle.x += this.getImageMargin(forToolbox);else if (this.isHorizontal) imageRectangle.x = rect.right - imgBlockSize.width - this.getImageMargin(forToolbox);\n          if (!this.isHorizontal && !this.isTextAfterImage) imageRectangle.y = rect.bottom - imgBlockSize.height - this.getImageMargin(forToolbox);else imageRectangle.y += this.getImageMargin(forToolbox);\n          if (!this.isHorizontal) imageRectangle.x += (rect.width - imageRectangle.width) / 2;\n          return imageRectangle;\n        };\n\n        CardBaseDescription.prototype.createTextRepresentationPrimitives = function (rect) {\n          var lineHeight = unit_converter_1.UnitConverter.pixelsToTwips(unit_converter_1.UnitConverter.twipsToPixels(rect.height / 3));\n          return [new GroupPrimitive_1.GroupPrimitive([new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(rect.x, rect.y), new PathPrimitive_1.PathPrimitiveLineToCommand(rect.x + rect.width, rect.y)]), new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(rect.x, rect.y + lineHeight), new PathPrimitive_1.PathPrimitiveLineToCommand(rect.x + rect.width, rect.y + lineHeight)]), new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(rect.x, rect.y + lineHeight * 2), new PathPrimitive_1.PathPrimitiveLineToCommand(rect.x + rect.width * 0.66, rect.y + lineHeight * 2)])], \"dxdi-shape-text\")];\n        };\n\n        return CardBaseDescription;\n      }(ShapeWithImageDescription_1.ShapeWithImageDescription);\n\n      exports.CardBaseDescription = CardBaseDescription;\n      /***/\n    },\n    /* 134 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ImporterBase = void 0;\n\n      var Model_1 = __webpack_require__(59);\n\n      var Shape_1 = __webpack_require__(14);\n\n      var ImporterBase =\n      /** @class */\n      function () {\n        function ImporterBase(shapeDescriptionManager) {\n          this.shapeDescriptionManager = shapeDescriptionManager;\n        }\n\n        ImporterBase.prototype.import = function () {\n          var model = new Model_1.DiagramModel();\n          var obj = this.getObject();\n          this.importPageSettings(model, this.getPageObject(obj));\n          var shapes = this.importShapes(this.getShapeObjects(obj));\n\n          for (var i = 0; i < shapes.length; i++) {\n            var shape = shapes[i];\n            if (model.findItem(shape.key)) throw Error(\"Item key is duplicated\");\n            model.pushItem(shape);\n          }\n\n          var connectors = this.importConnectors(this.getConnectorObjects(obj));\n\n          for (var i = 0; i < connectors.length; i++) {\n            var connector = connectors[i];\n            connector.endItem = model.findItem(connector[\"endItemKey\"]) || undefined;\n            delete connector[\"endItemKey\"];\n            connector.beginItem = model.findItem(connector[\"beginItemKey\"]) || undefined;\n            delete connector[\"beginItemKey\"];\n            if (model.findItem(connector.key)) throw Error(\"Item key is duplicated\");\n            model.pushItem(connector);\n            this.updateConnections(connector);\n          }\n\n          this.updateChildren(model.items, function (key) {\n            return model.findItem(key);\n          });\n          return model;\n        };\n\n        ImporterBase.prototype.importItems = function (model) {\n          var result = [];\n          var obj = this.getObject();\n          var itemHash = {};\n          var shapes = this.importShapes(this.getShapeObjects(obj));\n          var key;\n\n          for (var i = 0; i < shapes.length; i++) {\n            var shape = shapes[i];\n            var oldKey = shape.key;\n            key = model.getNextKey();\n            shape.key = key;\n            itemHash[oldKey] = shape;\n            if (shape.dataKey !== undefined) shape.dataKey = undefined;\n            result.push(shape);\n          }\n\n          var connectors = this.importConnectors(this.getConnectorObjects(obj));\n\n          for (var i = 0; i < connectors.length; i++) {\n            var connector = connectors[i];\n            var oldKey = connector.key;\n            key = model.getNextKey();\n            connector.key = key;\n            itemHash[oldKey] = connector;\n            if (connector.dataKey !== undefined) connector.dataKey = undefined;\n            var endItemKey = connector[\"endItemKey\"];\n            connector.endItem = itemHash[endItemKey];\n            delete connector[\"endItemKey\"];\n            var beginItemKey = connector[\"beginItemKey\"];\n            connector.beginItem = itemHash[beginItemKey];\n            delete connector[\"beginItemKey\"];\n            result.push(connector);\n            this.updateConnections(connector);\n          }\n\n          this.updateChildren(result, function (key) {\n            return itemHash[key];\n          });\n          return result;\n        };\n\n        ImporterBase.prototype.importItemsData = function (model) {\n          var obj = this.getObject();\n          var shapes = this.importShapes(this.getShapeObjects(obj));\n          var shapeDataKeys = {};\n\n          for (var i = 0; i < shapes.length; i++) {\n            var srcShape = shapes[i];\n            var destShape = void 0;\n            if (srcShape.dataKey !== undefined) destShape = model.findShapeByDataKey(srcShape.dataKey);\n\n            if (destShape) {\n              destShape.dataKey = srcShape.dataKey;\n              shapeDataKeys[srcShape.key] = srcShape.dataKey;\n              destShape.locked = srcShape.locked;\n              destShape.position = srcShape.position.clone();\n              destShape.expanded = srcShape.expanded;\n              if (srcShape.expandedSize) destShape.expandedSize = srcShape.expandedSize.clone();\n              destShape.size = srcShape.size.clone();\n              destShape.parameters = srcShape.parameters.clone();\n              destShape.style = srcShape.style.clone();\n              destShape.styleText = srcShape.styleText.clone();\n              destShape.zIndex = srcShape.zIndex;\n              destShape.text = srcShape.text;\n              destShape.description = srcShape.description;\n              destShape.image = srcShape.image.clone();\n            }\n          }\n\n          var connectors = this.importConnectors(this.getConnectorObjects(obj));\n\n          for (var i = 0; i < connectors.length; i++) {\n            var srcConnector = connectors[i];\n            var destConnector = void 0;\n            if (srcConnector.dataKey !== undefined) destConnector = model.findConnectorByDataKey(srcConnector.dataKey);\n            if (!destConnector) destConnector = model.findConnectorByBeginEndDataKeys(shapeDataKeys[srcConnector[\"beginItemKey\"]], shapeDataKeys[srcConnector[\"endItemKey\"]]);\n\n            if (destConnector) {\n              destConnector.dataKey = srcConnector.dataKey;\n              destConnector.locked = srcConnector.locked;\n              destConnector.points = srcConnector.points.slice();\n              destConnector.properties = srcConnector.properties.clone();\n              destConnector.style = srcConnector.style.clone();\n              destConnector.endConnectionPointIndex = srcConnector.endConnectionPointIndex;\n              destConnector.beginConnectionPointIndex = srcConnector.beginConnectionPointIndex;\n              destConnector.texts = srcConnector.texts.clone();\n              destConnector.styleText = srcConnector.styleText.clone();\n              destConnector.zIndex = srcConnector.zIndex;\n            }\n          }\n        };\n\n        ImporterBase.prototype.importShapes = function (shapeObjs) {\n          var result = [];\n          if (!shapeObjs) return result;\n          if (!Array.isArray(shapeObjs)) throw Error(\"Invalid Format\");\n\n          for (var i = 0; i < shapeObjs.length; i++) {\n            var shapeObj = shapeObjs[i];\n            var shape = this.importShape(shapeObj);\n            result.push(shape);\n            result = result.concat(this.importShapeChildren(shapeObj, shape));\n          }\n\n          return result;\n        };\n\n        ImporterBase.prototype.importConnectors = function (connectorObjs) {\n          var result = [];\n          if (!connectorObjs) return result;\n          if (!Array.isArray(connectorObjs)) throw Error(\"Invalid Format\");\n\n          for (var i = 0; i < connectorObjs.length; i++) {\n            var shapeObj = connectorObjs[i];\n            result.push(this.importConnector(shapeObj));\n          }\n\n          return result;\n        };\n\n        ImporterBase.prototype.updateChildren = function (items, findItem) {\n          items.forEach(function (item) {\n            if (item instanceof Shape_1.Shape && item[\"childKeys\"]) {\n              item[\"childKeys\"].forEach(function (childKey) {\n                var child = findItem(childKey);\n\n                if (child) {\n                  item.children.push(child);\n                  child.container = item;\n                }\n              });\n              delete item[\"childKeys\"];\n            }\n          });\n        };\n\n        ImporterBase.prototype.updateConnections = function (connector) {\n          if (connector.endItem) if (connector.endItem instanceof Shape_1.Shape) {\n            connector.endItem.attachedConnectors.push(connector);\n            connector.points[connector.points.length - 1] = connector.endItem.getConnectionPointPosition(connector.endConnectionPointIndex, connector.points[connector.points.length - 2]);\n          } else {\n            connector.endItem = undefined;\n            connector.endConnectionPointIndex = -1;\n          }\n          if (connector.beginItem) if (connector.beginItem instanceof Shape_1.Shape) {\n            connector.beginItem.attachedConnectors.push(connector);\n            connector.points[0] = connector.beginItem.getConnectionPointPosition(connector.beginConnectionPointIndex, connector.points[1]);\n          } else {\n            connector.beginItem = undefined;\n            connector.beginConnectionPointIndex = -1;\n          }\n        };\n\n        ImporterBase.prototype.assert = function (value, type) {\n          if (value === undefined) throw Error(\"Invalid Format\");\n          if (type !== undefined && typeof value !== type) throw Error(\"Invalid Format\");\n        };\n\n        return ImporterBase;\n      }();\n\n      exports.ImporterBase = ImporterBase;\n      /***/\n    },\n    /* 135 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics69 = function extendStatics(d, b) {\n          _extendStatics69 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics69(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics69(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.StylePropertyCommandBase = void 0;\n\n      var SimpleCommandBase_1 = __webpack_require__(10);\n\n      var StylePropertyCommandBase =\n      /** @class */\n      function (_super) {\n        __extends(StylePropertyCommandBase, _super);\n\n        function StylePropertyCommandBase() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        StylePropertyCommandBase.prototype.lockInputPositionUpdating = function () {\n          return true;\n        };\n\n        return StylePropertyCommandBase;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.StylePropertyCommandBase = StylePropertyCommandBase;\n      /***/\n    },\n    /* 136 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics70 = function extendStatics(d, b) {\n          _extendStatics70 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics70(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics70(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeStylePropertyCommandBase = void 0;\n\n      var StylePropertyCommandBase_1 = __webpack_require__(135);\n\n      var ChangeStylePropertyCommandBase =\n      /** @class */\n      function (_super) {\n        __extends(ChangeStylePropertyCommandBase, _super);\n\n        function ChangeStylePropertyCommandBase() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeStylePropertyCommandBase.prototype.executeCore = function (state, parameter) {\n          var _this = this;\n\n          this.control.history.beginTransaction();\n          var items = this.control.selection.getSelectedItems();\n          parameter = this.processParameter(parameter);\n          items.forEach(function (item) {\n            var styleProperty = _this.getStyleProperty();\n\n            _this.control.history.addAndRedo(_this.createHistoryItem(item, styleProperty, parameter));\n          });\n          this.updateInputPosition(parameter);\n          this.control.history.endTransaction();\n          return true;\n        };\n\n        ChangeStylePropertyCommandBase.prototype.getDefaultValue = function () {\n          return this.getDefaultStyleObj()[this.getStyleProperty()];\n        };\n\n        ChangeStylePropertyCommandBase.prototype.processParameter = function (parameter) {\n          return parameter;\n        };\n\n        return ChangeStylePropertyCommandBase;\n      }(StylePropertyCommandBase_1.StylePropertyCommandBase);\n\n      exports.ChangeStylePropertyCommandBase = ChangeStylePropertyCommandBase;\n      /***/\n    },\n    /* 137 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics71 = function extendStatics(d, b) {\n          _extendStatics71 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics71(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics71(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeConnectorPropertyCommand = void 0;\n\n      var ChangeConnectorPropertyHistoryItem_1 = __webpack_require__(88);\n\n      var SimpleCommandBase_1 = __webpack_require__(10);\n\n      var ChangeConnectorPropertyCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeConnectorPropertyCommand, _super);\n\n        function ChangeConnectorPropertyCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeConnectorPropertyCommand.prototype.getValue = function () {\n          return this.control.selection.inputPosition.getCurrentConnectorPropertyValue(this.getPropertyName());\n        };\n\n        ChangeConnectorPropertyCommand.prototype.getDefaultValue = function () {\n          return this.getPropertyDefaultValue();\n        };\n\n        ChangeConnectorPropertyCommand.prototype.executeCore = function (state, parameter) {\n          var _this = this;\n\n          this.control.history.beginTransaction();\n          var connectors = this.control.selection.getSelectedConnectors();\n          connectors.forEach(function (connector) {\n            var propertyName = _this.getPropertyName();\n\n            _this.control.history.addAndRedo(new ChangeConnectorPropertyHistoryItem_1.ChangeConnectorPropertyHistoryItem(connector.key, propertyName, parameter));\n          });\n          this.control.selection.inputPosition.setConnectorPropertyValue(this.getPropertyName(), parameter);\n          this.control.history.endTransaction();\n          return true;\n        };\n\n        ChangeConnectorPropertyCommand.prototype.lockInputPositionUpdating = function () {\n          return true;\n        };\n\n        return ChangeConnectorPropertyCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ChangeConnectorPropertyCommand = ChangeConnectorPropertyCommand;\n      /***/\n    },\n    /* 138 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics72 = function extendStatics(d, b) {\n          _extendStatics72 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics72(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics72(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.AutoLayoutTreeVerticalCommand = void 0;\n\n      var AutoLayoutCommandBase_1 = __webpack_require__(74);\n\n      var WideTree_1 = __webpack_require__(97);\n\n      var LayoutSettings_1 = __webpack_require__(20);\n\n      var AutoLayoutTreeVerticalCommand =\n      /** @class */\n      function (_super) {\n        __extends(AutoLayoutTreeVerticalCommand, _super);\n\n        function AutoLayoutTreeVerticalCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        AutoLayoutTreeVerticalCommand.prototype.createLayoutSettings = function () {\n          var gridSize = this.control.settings.snapToGrid ? this.control.settings.gridSize : undefined;\n          var settings = new LayoutSettings_1.TreeLayoutSettings(gridSize);\n          settings.orientation = LayoutSettings_1.DataLayoutOrientation.Vertical;\n          return settings;\n        };\n\n        AutoLayoutTreeVerticalCommand.prototype.createLayout = function (settings, graph) {\n          return new WideTree_1.TreeLayoutBuilder(settings, graph).build();\n        };\n\n        return AutoLayoutTreeVerticalCommand;\n      }(AutoLayoutCommandBase_1.AutoLayoutCommandBase);\n\n      exports.AutoLayoutTreeVerticalCommand = AutoLayoutTreeVerticalCommand;\n      /***/\n    },\n    /* 139 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.GraphLayout = void 0;\n\n      var Utils_1 = __webpack_require__(3);\n\n      var NodeLayout_1 = __webpack_require__(69);\n\n      var GraphLayout =\n      /** @class */\n      function () {\n        function GraphLayout() {\n          this.nodeKeys = [];\n          this.nodeToLayout = {};\n          this.edgeToPosition = {};\n        }\n\n        GraphLayout.prototype.forEachNode = function (callback) {\n          var _this = this;\n\n          this.nodeKeys.forEach(function (nk) {\n            return callback(_this.nodeToLayout[nk], nk);\n          });\n        };\n\n        GraphLayout.prototype.reduce = function (callback, initValue) {\n          var _this = this;\n\n          return this.nodeKeys.reduce(function (acc, key, index) {\n            return callback(acc, _this.nodeToLayout[key], index);\n          }, initValue);\n        };\n\n        GraphLayout.prototype.addNode = function (nodeLayout) {\n          if (this.nodeToLayout[nodeLayout.key]) throw Error(\"Node layout is already registered\");\n          this.nodeKeys.push(nodeLayout.key);\n          this.nodeToLayout[nodeLayout.key] = nodeLayout;\n          return nodeLayout;\n        };\n\n        GraphLayout.prototype.hasNode = function (key) {\n          return !!this.nodeToLayout[key];\n        };\n\n        GraphLayout.prototype.addEdge = function (edgeLayout) {\n          if (this.edgeToPosition[edgeLayout.key]) throw Error(\"Edge layout is already registered\");\n          this.edgeToPosition[edgeLayout.key] = edgeLayout;\n        };\n\n        GraphLayout.prototype.getRectangle = function (includeMargins) {\n          var _this = this;\n\n          return Utils_1.GeometryUtils.getCommonRectangle(this.nodeKeys.map(function (nk) {\n            return _this.nodeToLayout[nk].rectangle;\n          }));\n        };\n\n        GraphLayout.prototype.offsetNodes = function (deltaX, deltaY) {\n          var _this = this;\n\n          if (deltaX === void 0) {\n            deltaX = 0;\n          }\n\n          if (deltaY === void 0) {\n            deltaY = 0;\n          }\n\n          var layout = new GraphLayout();\n          this.nodeKeys.forEach(function (nk) {\n            var nl = _this.nodeToLayout[nk];\n            layout.addNode(new NodeLayout_1.NodeLayout(nl.info, nl.position.clone().offset(deltaX, deltaY)));\n          });\n          layout.copyEdges(this);\n          return layout;\n        };\n\n        GraphLayout.prototype.extend = function (layout) {\n          var _this = this;\n\n          layout.forEachNode(function (nl) {\n            return _this.addNode(nl);\n          });\n          this.copyEdges(layout);\n        };\n\n        GraphLayout.prototype.copyEdges = function (source) {\n          var _this = this;\n\n          Object.keys(source.edgeToPosition).forEach(function (e) {\n            var edge = source.edgeToPosition[e];\n\n            _this.addEdge(new NodeLayout_1.EdgeLayout(edge.key, edge.beginIndex, edge.endIndex));\n          });\n        };\n\n        return GraphLayout;\n      }();\n\n      exports.GraphLayout = GraphLayout;\n      /***/\n    },\n    /* 140 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.LayoutBuilder = void 0;\n\n      var LayoutSettings_1 = __webpack_require__(20);\n\n      var LayoutBuilder =\n      /** @class */\n      function () {\n        function LayoutBuilder(settings, graph) {\n          this.settings = settings;\n          this.graph = graph;\n        }\n\n        LayoutBuilder.prototype.getBreadthNodeSizeCore = function (node, excludeMargins) {\n          var size = this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Vertical ? node.size.width : node.size.height;\n          if (!excludeMargins) size += this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Vertical ? node.margin.left + node.margin.right : node.margin.top + node.margin.bottom;\n          return size;\n        };\n\n        LayoutBuilder.prototype.getDepthNodeSizeCore = function (node) {\n          return this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Horizontal ? node.size.width + node.margin.left + node.margin.right : node.size.height + node.margin.top + node.margin.bottom;\n        };\n\n        LayoutBuilder.prototype.chooseDirectionValue = function (near, far) {\n          return this.settings.direction === LayoutSettings_1.LogicalDirectionKind.Forward ? near : far;\n        };\n\n        LayoutBuilder.prototype.getDirectionValue = function (value) {\n          return this.settings.direction === LayoutSettings_1.LogicalDirectionKind.Forward ? value : -value;\n        };\n\n        LayoutBuilder.prototype.getComponentOffset = function (graphLayout) {\n          var rect = graphLayout.getRectangle(true);\n          var offset = this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Vertical ? rect.width : rect.height;\n          return offset + this.settings.componentSpacing;\n        };\n\n        LayoutBuilder.prototype.setComponentOffset = function (graphLayout, offset) {\n          return this.settings.orientation === LayoutSettings_1.DataLayoutOrientation.Vertical ? graphLayout.offsetNodes(offset) : graphLayout.offsetNodes(0, offset);\n        };\n\n        return LayoutBuilder;\n      }();\n\n      exports.LayoutBuilder = LayoutBuilder;\n      /***/\n    },\n    /* 141 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics73 = function extendStatics(d, b) {\n          _extendStatics73 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics73(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics73(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.CanvasManager = void 0;\n\n      var ModelChange_1 = __webpack_require__(99);\n\n      var CanvasManagerBase_1 = __webpack_require__(41);\n\n      var CanvasManager =\n      /** @class */\n      function (_super) {\n        __extends(CanvasManager, _super);\n\n        function CanvasManager() {\n          var _this = _super !== null && _super.apply(this, arguments) || this;\n\n          _this.pendingChanges = {};\n          _this.pendingRemoveChanges = {};\n          _this.updatesLock = 0;\n          return _this;\n        }\n\n        CanvasManager.prototype.beginUpdate = function () {\n          this.updatesLock++;\n        };\n\n        CanvasManager.prototype.endUpdate = function () {\n          this.updatesLock--;\n          if (this.updatesLock === 0) this.applyPendingChanges();\n        };\n\n        CanvasManager.prototype.getPendingChanges = function () {\n          var _this = this;\n\n          return Object.keys(this.pendingChanges).map(function (key) {\n            return _this.pendingChanges[key];\n          });\n        };\n\n        CanvasManager.prototype.getPendingRemoveChanges = function () {\n          var _this = this;\n\n          return Object.keys(this.pendingRemoveChanges).map(function (key) {\n            return _this.pendingRemoveChanges[key];\n          });\n        };\n\n        CanvasManager.prototype.applyPendingChanges = function () {\n          var removeChanges = this.getPendingRemoveChanges();\n\n          if (removeChanges.length) {\n            this.applyChangesCore(removeChanges);\n            this.pendingRemoveChanges = {};\n          }\n\n          var changes = this.getPendingChanges();\n\n          if (changes.length) {\n            this.applyChangesCore(changes);\n            this.pendingChanges = {};\n          }\n        };\n\n        CanvasManager.prototype.applyChangesCore = function (changes) {\n          var _this = this;\n\n          var changesToReapply = [];\n          changes.forEach(function (change) {\n            if (!_this.applyChange(change)) changesToReapply.push(change);\n          });\n          if (changesToReapply.length && changesToReapply.length !== changes.length) this.applyChangesCore(changesToReapply);\n        };\n\n        CanvasManager.prototype.postponeChanges = function (changes) {\n          var _this = this;\n\n          changes.forEach(function (change) {\n            if (change.type === ModelChange_1.ItemChangeType.Remove) {\n              _this.pendingRemoveChanges[change.key] = change;\n              delete _this.pendingChanges[change.key];\n            } else if (!_this.pendingChanges[change.key]) {\n              if (_this.pendingRemoveChanges[change.key] && change.type !== ModelChange_1.ItemChangeType.Create) throw new Error(\"Incorrect model changes sequence.\");\n              _this.pendingChanges[change.key] = change;\n            } else if (change.type === ModelChange_1.ItemChangeType.Create) _this.pendingChanges[change.key] = change;else if (change.type === ModelChange_1.ItemChangeType.UpdateStructure) {\n              if (_this.pendingChanges[change.key].type === ModelChange_1.ItemChangeType.UpdateProperties) _this.pendingChanges[change.key] = change;\n            } else if (change.type === ModelChange_1.ItemChangeType.UpdateProperties) if (_this.pendingChanges[change.key].type === ModelChange_1.ItemChangeType.Update) _this.pendingChanges[change.key] = change;\n          });\n        }; // Notifications\n\n\n        CanvasManager.prototype.notifyModelChanged = function (changes) {\n          if (this.updatesLock === 0) this.applyChangesCore(changes);else this.postponeChanges(changes);\n        };\n\n        CanvasManager.prototype.notifyPageColorChanged = function (color) {};\n\n        CanvasManager.prototype.notifyPageSizeChanged = function (pageSize, pageLandscape) {};\n\n        return CanvasManager;\n      }(CanvasManagerBase_1.CanvasManagerBase);\n\n      exports.CanvasManager = CanvasManager;\n      /***/\n    },\n    /* 142 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics74 = function extendStatics(d, b) {\n          _extendStatics74 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics74(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics74(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.PasteSelectionCommandBase = void 0;\n\n      var ClipboardCommand_1 = __webpack_require__(101);\n\n      var Importer_1 = __webpack_require__(120);\n\n      var Shape_1 = __webpack_require__(14);\n\n      var ImportShapeHistoryItem_1 = __webpack_require__(267);\n\n      var Connector_1 = __webpack_require__(7);\n\n      var ImportConnectorHistoryItem_1 = __webpack_require__(268);\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var SetSelectionHistoryItem_1 = __webpack_require__(65);\n\n      var unit_converter_1 = __webpack_require__(12);\n\n      var PasteSelectionCommandBase =\n      /** @class */\n      function (_super) {\n        __extends(PasteSelectionCommandBase, _super);\n\n        function PasteSelectionCommandBase() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        PasteSelectionCommandBase.prototype.isEnabled = function () {\n          return _super.prototype.isEnabled.call(this) && (this.isPasteSupportedByBrowser() || ClipboardCommand_1.ClipboardCommand.clipboardData !== undefined);\n        };\n\n        PasteSelectionCommandBase.prototype.isVisible = function () {\n          return this.isPasteSupportedByBrowser() || ClipboardCommand_1.ClipboardCommand.clipboardData !== undefined;\n        };\n\n        PasteSelectionCommandBase.prototype.parseClipboardData = function (data) {\n          var items = [];\n          var importer = new Importer_1.Importer(this.control.shapeDescriptionManager, data);\n          items = importer.importItems(this.control.model);\n          if (this.control.contextMenuPosition) this.calculateSelectionOffset(items, this.control.contextMenuPosition);\n\n          for (var i = 0; i < items.length; i++) {\n            var item = items[i];\n            if (item instanceof Shape_1.Shape) item.position = this.getShapeNewPosition(item.position);else if (item instanceof Connector_1.Connector) this.changeConnectorPoints(item);\n          }\n\n          return items;\n        };\n\n        PasteSelectionCommandBase.prototype.executeCore = function (state, parameter) {\n          var _this = this;\n\n          var ret = true;\n          if (parameter) this.performPaste(parameter);else this.getClipboardData(function (data) {\n            ret = _this.execute(data); // may be async\n          });\n          return ret;\n        };\n\n        PasteSelectionCommandBase.prototype.addItemForSortingRecursive = function (itemsHashtable, item) {\n          if (itemsHashtable[item.key]) return itemsHashtable[item.key];\n\n          if (item instanceof Connector_1.Connector) {\n            if (item.endItem) itemsHashtable[item.key] = this.addItemForSortingRecursive(itemsHashtable, item.endItem) - 0.5;else if (item.beginItem) itemsHashtable[item.key] = this.addItemForSortingRecursive(itemsHashtable, item.beginItem) + 0.5;else itemsHashtable[item.key] = -1;\n            return itemsHashtable[item.key];\n          }\n\n          if (item.attachedConnectors.length === 0) return itemsHashtable[item.key] = 0;else for (var i = 0; i < item.attachedConnectors.length; i++) {\n            var beginItem = item.attachedConnectors[i].beginItem;\n            if (item.attachedConnectors[i].endItem === item && beginItem && beginItem !== item.attachedConnectors[i].endItem) return itemsHashtable[item.key] = this.addItemForSortingRecursive(itemsHashtable, beginItem) + 1;else return itemsHashtable[item.key] = 0; // no parent\n          }\n        };\n\n        PasteSelectionCommandBase.prototype.getSortedPasteItems = function (items) {\n          var sortedItems = [];\n          var connectors = [];\n          var itemsHashtable = {};\n\n          for (var i = 0; i < items.length; i++) {\n            var item = items[i];\n            if (item instanceof Shape_1.Shape) sortedItems.push(item);else if (item instanceof Connector_1.Connector) {\n              connectors.push(item);\n              this.addItemForSortingRecursive(itemsHashtable, item);\n            }\n          }\n\n          connectors.sort(function (a, b) {\n            return itemsHashtable[b.key] - itemsHashtable[a.key];\n          });\n          return sortedItems.concat(connectors);\n        };\n\n        PasteSelectionCommandBase.prototype.performPaste = function (data) {\n          this.control.beginUpdateCanvas();\n          this.control.history.beginTransaction();\n          var ids = [];\n          var items = this.parseClipboardData(data);\n          items = this.getSortedPasteItems(items);\n\n          for (var i = 0; i < items.length; i++) {\n            var item = items[i];\n            if (item instanceof Shape_1.Shape) this.control.history.addAndRedo(new ImportShapeHistoryItem_1.ImportShapeHistoryItem(item));else if (item instanceof Connector_1.Connector) this.control.history.addAndRedo(new ImportConnectorHistoryItem_1.ImportConnectorHistoryItem(item));\n            var containerKey = item.container && item.container.key;\n            if (!containerKey || ids.indexOf(containerKey) === -1) ids.push(item.key);\n          }\n\n          ModelUtils_1.ModelUtils.tryUpdateModelRectangle(this.control.history);\n          this.control.history.addAndRedo(new SetSelectionHistoryItem_1.SetSelectionHistoryItem(this.control.selection, ids));\n          this.control.history.endTransaction();\n          this.control.endUpdateCanvas();\n          this.control.barManager.updateItemsState();\n        };\n\n        PasteSelectionCommandBase.prototype.calculateSelectionOffset = function (items, position) {};\n\n        Object.defineProperty(PasteSelectionCommandBase.prototype, \"isPermissionsRequired\", {\n          get: function get() {\n            return true;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        PasteSelectionCommandBase.getShapeNewPosition = function (model, position) {\n          while (model.findShapeAtPosition(position)) {\n            position = position.clone().offset(PasteSelectionCommandBase.positionOffset, PasteSelectionCommandBase.positionOffset);\n          }\n\n          return position;\n        };\n\n        PasteSelectionCommandBase.changeConnectorPoints = function (model, connector) {\n          while (model.findConnectorAtPoints(connector.points)) {\n            connector.points.forEach(function (pt) {\n              pt.x += PasteSelectionCommandBase.positionOffset;\n              pt.y += PasteSelectionCommandBase.positionOffset;\n            });\n          }\n        };\n\n        PasteSelectionCommandBase.positionOffset = unit_converter_1.UnitConverter.pixelsToTwips(10);\n        return PasteSelectionCommandBase;\n      }(ClipboardCommand_1.ClipboardCommand);\n\n      exports.PasteSelectionCommandBase = PasteSelectionCommandBase;\n      /***/\n    },\n    /* 143 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics75 = function extendStatics(d, b) {\n          _extendStatics75 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics75(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics75(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.AutoLayoutLayeredHorizontalCommand = void 0;\n\n      var AutoLayoutCommandBase_1 = __webpack_require__(74);\n\n      var Sugiyama_1 = __webpack_require__(78);\n\n      var LayoutSettings_1 = __webpack_require__(20);\n\n      var AutoLayoutLayeredHorizontalCommand =\n      /** @class */\n      function (_super) {\n        __extends(AutoLayoutLayeredHorizontalCommand, _super);\n\n        function AutoLayoutLayeredHorizontalCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        AutoLayoutLayeredHorizontalCommand.prototype.createLayoutSettings = function () {\n          var settings = new LayoutSettings_1.LayoutSettings();\n          settings.orientation = LayoutSettings_1.DataLayoutOrientation.Horizontal;\n          return settings;\n        };\n\n        AutoLayoutLayeredHorizontalCommand.prototype.createLayout = function (settings, graph) {\n          return new Sugiyama_1.SugiyamaLayoutBuilder(settings, graph).build();\n        };\n\n        return AutoLayoutLayeredHorizontalCommand;\n      }(AutoLayoutCommandBase_1.AutoLayoutCommandBase);\n\n      exports.AutoLayoutLayeredHorizontalCommand = AutoLayoutLayeredHorizontalCommand;\n      /***/\n    },\n    /* 144 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics76 = function extendStatics(d, b) {\n          _extendStatics76 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics76(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics76(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.AutoLayoutTreeHorizontalCommand = void 0;\n\n      var AutoLayoutCommandBase_1 = __webpack_require__(74);\n\n      var WideTree_1 = __webpack_require__(97);\n\n      var LayoutSettings_1 = __webpack_require__(20);\n\n      var AutoLayoutTreeHorizontalCommand =\n      /** @class */\n      function (_super) {\n        __extends(AutoLayoutTreeHorizontalCommand, _super);\n\n        function AutoLayoutTreeHorizontalCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        AutoLayoutTreeHorizontalCommand.prototype.createLayoutSettings = function () {\n          var gridSize = this.control.settings.snapToGrid ? this.control.settings.gridSize : undefined;\n          var settings = new LayoutSettings_1.TreeLayoutSettings(gridSize);\n          settings.orientation = LayoutSettings_1.DataLayoutOrientation.Horizontal;\n          return settings;\n        };\n\n        AutoLayoutTreeHorizontalCommand.prototype.createLayout = function (settings, graph) {\n          return new WideTree_1.TreeLayoutBuilder(settings, graph).build();\n        };\n\n        return AutoLayoutTreeHorizontalCommand;\n      }(AutoLayoutCommandBase_1.AutoLayoutCommandBase);\n\n      exports.AutoLayoutTreeHorizontalCommand = AutoLayoutTreeHorizontalCommand;\n      /***/\n    },\n    /* 145 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics77 = function extendStatics(d, b) {\n          _extendStatics77 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics77(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics77(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.AutoLayoutLayeredVerticalCommand = void 0;\n\n      var AutoLayoutCommandBase_1 = __webpack_require__(74);\n\n      var Sugiyama_1 = __webpack_require__(78);\n\n      var LayoutSettings_1 = __webpack_require__(20);\n\n      var AutoLayoutLayeredVerticalCommand =\n      /** @class */\n      function (_super) {\n        __extends(AutoLayoutLayeredVerticalCommand, _super);\n\n        function AutoLayoutLayeredVerticalCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        AutoLayoutLayeredVerticalCommand.prototype.createLayoutSettings = function () {\n          var settings = new LayoutSettings_1.LayoutSettings();\n          settings.orientation = LayoutSettings_1.DataLayoutOrientation.Vertical;\n          return settings;\n        };\n\n        AutoLayoutLayeredVerticalCommand.prototype.createLayout = function (settings, graph) {\n          return new Sugiyama_1.SugiyamaLayoutBuilder(settings, graph).build();\n        };\n\n        return AutoLayoutLayeredVerticalCommand;\n      }(AutoLayoutCommandBase_1.AutoLayoutCommandBase);\n\n      exports.AutoLayoutLayeredVerticalCommand = AutoLayoutLayeredVerticalCommand;\n      /***/\n    },\n    /* 146 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics78 = function extendStatics(d, b) {\n          _extendStatics78 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics78(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics78(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeLockedCommand = void 0;\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var SimpleCommandBase_1 = __webpack_require__(10);\n\n      var ChangeLockedCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeLockedCommand, _super);\n\n        function ChangeLockedCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeLockedCommand.prototype.isEnabled = function () {\n          var _this = this;\n\n          var items = this.control.selection.getSelectedItems(true);\n          var enabled = false;\n          items.forEach(function (item) {\n            if (item.locked !== _this.getLockState()) enabled = true;\n          });\n          return _super.prototype.isEnabled.call(this) && enabled;\n        };\n\n        ChangeLockedCommand.prototype.executeCore = function (state, parameter) {\n          ModelUtils_1.ModelUtils.changeSelectionLocked(this.control.history, this.control.model, this.control.selection, this.getLockState());\n          return true;\n        };\n\n        return ChangeLockedCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ChangeLockedCommand = ChangeLockedCommand;\n      /***/\n    },\n    /* 147 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics79 = function extendStatics(d, b) {\n          _extendStatics79 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics79(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics79(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeShapeImageHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var ImageInfo_1 = __webpack_require__(49);\n\n      var ChangeShapeImageHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangeShapeImageHistoryItem, _super);\n\n        function ChangeShapeImageHistoryItem(item, imageUrl) {\n          var _this = _super.call(this) || this;\n\n          _this.shapeKey = item.key;\n          _this.imageUrl = imageUrl;\n          return _this;\n        }\n\n        ChangeShapeImageHistoryItem.prototype.redo = function (manipulator) {\n          var item = manipulator.model.findShape(this.shapeKey);\n          this.oldImage = item.image;\n          manipulator.changeShapeImage(item, new ImageInfo_1.ImageInfo(this.imageUrl));\n        };\n\n        ChangeShapeImageHistoryItem.prototype.undo = function (manipulator) {\n          var item = manipulator.model.findShape(this.shapeKey);\n          manipulator.changeShapeImage(item, this.oldImage);\n        };\n\n        return ChangeShapeImageHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ChangeShapeImageHistoryItem = ChangeShapeImageHistoryItem;\n      /***/\n    },\n    /* 148 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics80 = function extendStatics(d, b) {\n          _extendStatics80 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics80(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics80(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MouseHandlerDefaultState = void 0;\n\n      var Event_1 = __webpack_require__(11);\n\n      var MouseHandlerMoveConnectorPointState_1 = __webpack_require__(306);\n\n      var MouseHandlerResizeShapeState_1 = __webpack_require__(307);\n\n      var MouseHandlerMoveConnectorSideState_1 = __webpack_require__(308);\n\n      var MouseHandlerDragParameterPointState_1 = __webpack_require__(309);\n\n      var MouseHandlerCreateConnectorState_1 = __webpack_require__(310);\n\n      var MouseHandlerMoveConnectorOrthogonalSideState_1 = __webpack_require__(311);\n\n      var MouseHandlerToolboxDraggingState_1 = __webpack_require__(312);\n\n      var MouseHandlerMoveConnectorTextState_1 = __webpack_require__(313);\n\n      var MouseHandlerDefaultStateBase_1 = __webpack_require__(150);\n\n      var MouseHandlerMoveShapeState_1 = __webpack_require__(319);\n\n      var Connector_1 = __webpack_require__(7);\n\n      var MouseHandlerMoveConnectorState_1 = __webpack_require__(320);\n\n      var MouseHandlerDefaultState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerDefaultState, _super);\n\n        function MouseHandlerDefaultState() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MouseHandlerDefaultState.prototype.finish = function () {\n          this.visualizerManager.resetConnectionPoints();\n\n          _super.prototype.finish.call(this);\n        };\n\n        MouseHandlerDefaultState.prototype.onMouseDownCore = function (evt) {\n          if (this.handler.canScrollPage(evt)) this.startScrolling(evt);else if (evt.button === Event_1.MouseButton.Left && evt.source.type === Event_1.MouseEventElementType.ConnectorText) {\n            this.handler.changeSingleSelection(evt.source.key);\n            this.handler.switchState(new MouseHandlerMoveConnectorTextState_1.MouseHandlerMoveConnectorTextState(this.handler, this.history, this.model));\n          } else if (evt.button === Event_1.MouseButton.Left && evt.source.type === Event_1.MouseEventElementType.ShapeResizeBox) this.handler.switchState(new MouseHandlerResizeShapeState_1.MouseHandlerResizeShapeState(this.handler, this.history, this.model, this.selection, this.visualizerManager, this.settings));else if (evt.button === Event_1.MouseButton.Left && evt.source.type === Event_1.MouseEventElementType.ShapeParameterBox) this.handler.switchState(new MouseHandlerDragParameterPointState_1.MouseHandlerDragParameterPointState(this.handler, this.history, this.model));else if (evt.button === Event_1.MouseButton.Left && evt.source.type === Event_1.MouseEventElementType.ConnectorPoint) this.handler.switchState(new MouseHandlerMoveConnectorPointState_1.MouseHandlerMoveConnectorPointState(this.handler, this.history, this.model, this.visualizerManager));else if (evt.button === Event_1.MouseButton.Left && evt.source.type === Event_1.MouseEventElementType.ConnectorSide) this.handler.switchState(new MouseHandlerMoveConnectorSideState_1.MouseHandlerMoveConnectorSideState(this.handler, this.history, this.model));else if (evt.button === Event_1.MouseButton.Left && evt.source.type === Event_1.MouseEventElementType.ConnectorOrthogonalSide) this.handler.switchState(new MouseHandlerMoveConnectorOrthogonalSideState_1.MouseHandlerMoveConnectorOrthogonalSideState(this.handler, this.history, this.model));else if (evt.button === Event_1.MouseButton.Left && evt.source.type === Event_1.MouseEventElementType.ShapeConnectionPoint) this.handler.switchState(new MouseHandlerCreateConnectorState_1.MouseHandlerCreateConnectorState(this.handler, this.history, this.model, this.visualizerManager, this.shapeDescriptionManager, this.selection));else _super.prototype.onMouseDownCore.call(this, evt);\n        };\n\n        MouseHandlerDefaultState.prototype.onDragDiagramItemOnMouseDown = function (evt) {\n          if (!this.handler.canAddDiagramItemToSelection(evt)) _super.prototype.onDragDiagramItemOnMouseDown.call(this, evt);else if (evt.source.type === Event_1.MouseEventElementType.Shape) this.handler.switchState(new MouseHandlerMoveShapeState_1.MouseHandlerMoveShapeState(this.handler, this.history, this.model, this.selection, this.visualizerManager));else if (evt.source.type === Event_1.MouseEventElementType.Connector) this.handler.switchState(new MouseHandlerMoveConnectorState_1.MouseHandlerMoveConnectorState(this.handler, this.history, this.model, this.selection, this.visualizerManager));\n        };\n\n        MouseHandlerDefaultState.prototype.onDragStart = function (evt) {\n          this.handler.switchState(new MouseHandlerToolboxDraggingState_1.MouseHandlerBeforeToolboxDraggingState(this.handler, this.history, this.model, this.selection, this.visualizerManager, this.shapeDescriptionManager));\n          this.handler.state.onDragStart(evt);\n        };\n\n        MouseHandlerDefaultState.prototype.onMouseMoveCore = function (evt) {\n          this.updateConnectionsOnMouseMove(evt);\n\n          _super.prototype.onMouseMoveCore.call(this, evt);\n        };\n\n        MouseHandlerDefaultState.prototype.onMouseUp = function (evt) {\n          if (this.handler.canRemoveDiagramItemToSelection(evt)) this.handler.removeDiagramItemFromSelection(evt.button, evt.source.key);else _super.prototype.onMouseUp.call(this, evt);\n        };\n\n        MouseHandlerDefaultState.prototype.updateConnectionsOnMouseMove = function (evt) {\n          var item = this.model.findItem(evt.source.key);\n          this.visualizerManager.updateConnections(item, evt.source.type, evt.source.value);\n        };\n\n        MouseHandlerDefaultState.prototype.canDragObjectOnMouseDown = function (key) {\n          return true;\n        };\n\n        MouseHandlerDefaultState.prototype.canExpandContainerOnMouseDown = function (key) {\n          return true;\n        };\n\n        MouseHandlerDefaultState.prototype.canClearSelectionOnMouseDown = function () {\n          return false;\n        };\n\n        MouseHandlerDefaultState.prototype.processOnMouseMoveAfterLimit = function (evt) {\n          this.startSelection(evt);\n        };\n\n        MouseHandlerDefaultState.prototype.canSelectOnMouseUp = function (key) {\n          return false;\n        };\n\n        MouseHandlerDefaultState.prototype.canClearSelectionOnMouseUp = function () {\n          return true;\n        };\n\n        MouseHandlerDefaultState.prototype.onConnectionPointsShow = function (key, points) {\n          var _this = this;\n\n          var shape = this.model.findShape(key);\n          if (shape) points.forEach(function (point, index) {\n            point.allowed = _this.handler.canPerformChangeConnectionOnUpdateUI(undefined, {\n              item: shape,\n              position: Connector_1.ConnectorPosition.Begin,\n              connectionPointIndex: index\n            });\n          });\n        };\n\n        return MouseHandlerDefaultState;\n      }(MouseHandlerDefaultStateBase_1.MouseHandlerDefaultStateBase);\n\n      exports.MouseHandlerDefaultState = MouseHandlerDefaultState;\n      /***/\n    },\n    /* 149 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics81 = function extendStatics(d, b) {\n          _extendStatics81 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics81(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics81(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MouseHandlerMoveConnectorPointStateBase = void 0;\n\n      var Connector_1 = __webpack_require__(7);\n\n      var Event_1 = __webpack_require__(11);\n\n      var MouseHandlerDraggingState_1 = __webpack_require__(32);\n\n      var DeleteConnectionHistoryItem_1 = __webpack_require__(64);\n\n      var AddConnectionHistoryItem_1 = __webpack_require__(47);\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var MouseHandlerMoveConnectorPointStateBase =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerMoveConnectorPointStateBase, _super);\n\n        function MouseHandlerMoveConnectorPointStateBase(handler, history, model, visualizerManager) {\n          var _this = _super.call(this, handler, history) || this;\n\n          _this.model = model;\n          _this.visualizerManager = visualizerManager;\n          return _this;\n        }\n\n        MouseHandlerMoveConnectorPointStateBase.prototype.finish = function () {\n          this.visualizerManager.resetConnectionTarget();\n          this.visualizerManager.resetConnectionPoints();\n\n          _super.prototype.finish.call(this);\n        };\n\n        MouseHandlerMoveConnectorPointStateBase.prototype.onMouseDown = function (evt) {\n          _super.prototype.onMouseDown.call(this, evt);\n\n          if (this.connector) this.handler.addInteractingItem(this.connector);\n        };\n\n        MouseHandlerMoveConnectorPointStateBase.prototype.onMouseMove = function (evt) {\n          _super.prototype.onMouseMove.call(this, evt);\n\n          if (!this.allowAttachToObjects(evt, false, false)) {\n            this.visualizerManager.resetConnectionTarget();\n            this.visualizerManager.resetConnectionPoints();\n          } else if (this.connector) {\n            var item = this.connector.getExtremeItem(this.pointPosition);\n            this.visualizerManager.setConnectionTarget(item, evt.source.type);\n            var pointIndex = this.connector.getExtremeConnectionPointIndex(this.pointPosition);\n            if (!item && this.oppositeConnectionPointIndex !== -1 || !this.allowAttachToObjects(evt, true, false)) item = this.model.findItem(evt.source.key);\n            this.visualizerManager.setConnectionPoints(item, evt.source.type, pointIndex, true);\n          }\n        };\n\n        MouseHandlerMoveConnectorPointStateBase.prototype.onApplyChanges = function (evt) {\n          var point = this.getSnappedPoint(evt, evt.modelPoint);\n\n          if (this.pointPosition !== undefined) {\n            if (this.oppositePointPosition === undefined) {\n              this.oppositePointPosition = this.getOppositePointPosition();\n              this.oppositeItem = this.connector.getExtremeItem(this.oppositePointPosition);\n              this.oppositeConnectionPointIndex = this.connector.getExtremeConnectionPointIndex(this.oppositePointPosition);\n            }\n\n            this.targetItem = this.model.findItem(evt.source.key);\n            var item = this.allowAttachToObjects(evt, true, true) ? this.targetItem : undefined;\n            var connectionPointIndex = -1;\n            if (evt.source.type === Event_1.MouseEventElementType.ShapeConnectionPoint) connectionPointIndex = parseInt(evt.source.value);\n\n            if (item && (evt.source.type === Event_1.MouseEventElementType.Shape || evt.source.type === Event_1.MouseEventElementType.ShapeConnectionPoint) && (this.connector.getExtremeItem(this.oppositePointPosition) !== item || connectionPointIndex !== -1 && this.oppositeConnectionPointIndex !== -1 && connectionPointIndex !== this.oppositeConnectionPointIndex)) {\n              if (this.connector.getExtremeItem(this.pointPosition) !== item || this.connector.getExtremeConnectionPointIndex(this.pointPosition) !== connectionPointIndex) {\n                if (this.connector.getExtremeItem(this.pointPosition)) this.history.addAndRedo(new DeleteConnectionHistoryItem_1.DeleteConnectionHistoryItem(this.connector, this.pointPosition));\n                this.history.addAndRedo(new AddConnectionHistoryItem_1.AddConnectionHistoryItem(this.connector, item, connectionPointIndex, this.pointPosition));\n                if (this.oppositeItem) this.updateOppositeItemConnectionPointIndex(connectionPointIndex);\n              }\n\n              point = item.getConnectionPointPosition(connectionPointIndex, this.connector.points[this.pointIndex + (this.pointPosition === Connector_1.ConnectorPosition.End ? -1 : 1)]);\n              this.visualizerManager.setConnectionPointIndex(connectionPointIndex);\n            } else if (this.connector.getExtremeItem(this.pointPosition)) {\n              this.history.addAndRedo(new DeleteConnectionHistoryItem_1.DeleteConnectionHistoryItem(this.connector, this.pointPosition));\n              if (this.oppositeItem) this.updateOppositeItemConnectionPointIndex(this.oppositeConnectionPointIndex);\n            }\n          }\n\n          ModelUtils_1.ModelUtils.moveConnectorPoint(this.history, this.connector, this.pointIndex, point);\n          ModelUtils_1.ModelUtils.updateConnectorAttachedPoints(this.history, this.model, this.connector);\n          this.handler.tryUpdateModelSize();\n        };\n\n        MouseHandlerMoveConnectorPointStateBase.prototype.updateOppositeItemConnectionPointIndex = function (connectionPointIndex) {\n          var pointIndex = connectionPointIndex === -1 ? -1 : this.oppositeConnectionPointIndex;\n\n          if (pointIndex !== this.connector.getExtremeConnectionPointIndex(this.oppositePointPosition)) {\n            this.history.addAndRedo(new DeleteConnectionHistoryItem_1.DeleteConnectionHistoryItem(this.connector, this.oppositePointPosition));\n            this.history.addAndRedo(new AddConnectionHistoryItem_1.AddConnectionHistoryItem(this.connector, this.oppositeItem, pointIndex, this.oppositePointPosition));\n          }\n        };\n\n        MouseHandlerMoveConnectorPointStateBase.prototype.onFinishWithChanges = function () {\n          ModelUtils_1.ModelUtils.updateConnectorContainer(this.history, this.model, this.connector);\n          ModelUtils_1.ModelUtils.deleteConnectorUnnecessaryPoints(this.history, this.connector);\n        };\n\n        MouseHandlerMoveConnectorPointStateBase.prototype.getDraggingElementKeys = function () {\n          return this.connector ? [this.connector.key] : [];\n        };\n\n        MouseHandlerMoveConnectorPointStateBase.prototype.getOppositePointPosition = function () {\n          return this.pointPosition === Connector_1.ConnectorPosition.Begin ? Connector_1.ConnectorPosition.End : Connector_1.ConnectorPosition.Begin;\n        };\n\n        MouseHandlerMoveConnectorPointStateBase.prototype.allowAttachToObjects = function (evt, checkContainers, checkOppositeItem) {\n          if (this.handler.canMultipleSelection(evt)) return false;\n          var connector = this.connector;\n\n          if (connector && evt.source.type === Event_1.MouseEventElementType.Shape) {\n            var targetItem_1 = this.model.findItem(evt.source.key);\n            if (checkContainers && this.model.findItemContainerCore(connector, function (c) {\n              return c === targetItem_1;\n            })) return false;\n            if (checkContainers && this.oppositeItem && this.model.findItemContainerCore(this.oppositeItem, function (c) {\n              return c === targetItem_1;\n            })) return false;\n            if (checkOppositeItem && this.oppositeItem === targetItem_1 && this.oppositeConnectionPointIndex === -1) return false;\n          }\n\n          return true;\n        };\n\n        MouseHandlerMoveConnectorPointStateBase.prototype.onConnectionPointsShow = function (key, points) {\n          var _this = this;\n\n          if (this.connector && this.pointPosition !== undefined && (this.connector.endItem && this.connector.endItem.key === key || this.connector.beginItem && this.connector.beginItem.key === key)) {\n            var position_1 = this.connector.beginItem && this.connector.beginItem.key === key ? Connector_1.ConnectorPosition.Begin : Connector_1.ConnectorPosition.End;\n            points.forEach(function (point, index) {\n              point.allowed = _this.handler.canPerformChangeConnectionOnUpdateUI(_this.connector, {\n                item: _this.connector.getExtremeItem(position_1),\n                position: position_1,\n                connectionPointIndex: index\n              });\n            });\n          }\n        };\n\n        MouseHandlerMoveConnectorPointStateBase.prototype.onConnectionTargetShow = function (key, info) {\n          if (this.connector && this.pointPosition !== undefined && (this.connector.endItem && this.connector.endItem.key === key || this.connector.beginItem && this.connector.beginItem.key === key)) {\n            var position = this.connector.beginItem && this.connector.beginItem.key === key ? Connector_1.ConnectorPosition.Begin : Connector_1.ConnectorPosition.End;\n            info.allowed = this.handler.canPerformChangeConnectionOnUpdateUI(this.connector, {\n              item: this.connector.getExtremeItem(position),\n              position: position,\n              connectionPointIndex: -1\n            });\n          }\n        };\n\n        return MouseHandlerMoveConnectorPointStateBase;\n      }(MouseHandlerDraggingState_1.MouseHandlerDraggingState);\n\n      exports.MouseHandlerMoveConnectorPointStateBase = MouseHandlerMoveConnectorPointStateBase;\n      /***/\n    },\n    /* 150 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics82 = function extendStatics(d, b) {\n          _extendStatics82 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics82(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics82(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MouseHandlerDefaultStateBase = void 0;\n\n      var MouseHandlerStateBase_1 = __webpack_require__(39);\n\n      var Event_1 = __webpack_require__(11);\n\n      var MouseHandlerToggleShapeExpandedState_1 = __webpack_require__(315);\n\n      var MouseHandlerSelectionState_1 = __webpack_require__(317);\n\n      var MouseHandlerZoomOnWheelState_1 = __webpack_require__(318);\n\n      var MouseHandlerScrollingState_1 = __webpack_require__(151);\n\n      var unit_converter_1 = __webpack_require__(12);\n\n      var MouseHandlerDefaultStateBase =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerDefaultStateBase, _super);\n\n        function MouseHandlerDefaultStateBase(handler, history, selection, model, view, visualizerManager, shapeDescriptionManager, settings) {\n          var _this = _super.call(this, handler) || this;\n\n          _this.history = history;\n          _this.selection = selection;\n          _this.model = model;\n          _this.view = view;\n          _this.visualizerManager = visualizerManager;\n          _this.shapeDescriptionManager = shapeDescriptionManager;\n          _this.settings = settings;\n          return _this;\n        }\n\n        MouseHandlerDefaultStateBase.prototype.onKeyDown = function (evt) {\n          this.handler.onStartScrollPageByKeyboard(evt);\n        };\n\n        MouseHandlerDefaultStateBase.prototype.onKeyUp = function (evt) {\n          this.handler.onFinishScrollPageByKeyboard(evt);\n        };\n\n        MouseHandlerDefaultStateBase.prototype.onMouseDown = function (evt) {\n          if (!this.handler.canFinishTextEditing()) return;\n          this.onMouseDownCore(evt);\n          if (this.handler.state !== this) this.handler.state.onMouseDown(evt);\n        };\n\n        MouseHandlerDefaultStateBase.prototype.onMouseDownCore = function (evt) {\n          if (this.handler.canScrollPage(evt)) this.startScrolling(evt);else if (this.hasDiagramItem(evt) && this.canDragObjectOnMouseDown(evt.source.key)) this.onDragDiagramItemOnMouseDown(evt);else if (evt.button === Event_1.MouseButton.Left && evt.source.type === Event_1.MouseEventElementType.ShapeExpandButton && this.canExpandContainerOnMouseDown(evt.source.key)) this.onShapeExpandBtnMouseDown(evt);else {\n            if (!this.hasDiagramItem(evt) && this.canClearSelectionOnMouseDown()) this.clearSelection();\n            this.startPoint = evt.modelPoint;\n          }\n        };\n\n        MouseHandlerDefaultStateBase.prototype.onDragDiagramItemOnMouseDown = function (evt) {\n          this.replaceSelection(evt);\n        };\n\n        MouseHandlerDefaultStateBase.prototype.onMouseMove = function (evt) {\n          this.onMouseMoveCore(evt);\n\n          if (this.handler.state !== this) {\n            this.handler.state.onMouseDown(this.handler.mouseDownEvent);\n            this.handler.state.onMouseMove(evt);\n          }\n        };\n\n        MouseHandlerDefaultStateBase.prototype.onMouseMoveCore = function (evt) {\n          if (this.startPoint && (Math.abs(this.startPoint.x - evt.modelPoint.x) > MouseHandlerDefaultStateBase.startLimit || Math.abs(this.startPoint.y - evt.modelPoint.y) > MouseHandlerDefaultStateBase.startLimit)) {\n            this.processOnMouseMoveAfterLimit(evt);\n            this.startPoint = undefined;\n          }\n        };\n\n        MouseHandlerDefaultStateBase.prototype.onMouseUp = function (evt) {\n          this.onMouseUpCore(evt);\n          if (this.handler.state !== this) this.handler.state.onMouseUp(evt);\n        };\n\n        MouseHandlerDefaultStateBase.prototype.onMouseUpCore = function (evt) {\n          if (evt.source.type === Event_1.MouseEventElementType.Shape && this.canSelectOnMouseUp(evt.source.key)) this.replaceSelection(evt);else if (evt.source.type === Event_1.MouseEventElementType.Connector && this.canSelectOnMouseUp(evt.source.key)) this.replaceSelection(evt);else if (evt.source.type === Event_1.MouseEventElementType.ShapeExpandButton && this.canSelectOnMouseUp(evt.source.key)) this.replaceSelection(evt);else if (this.startPoint && this.canClearSelectionOnMouseUp()) this.clearSelection();\n          this.startPoint = undefined;\n        };\n\n        MouseHandlerDefaultStateBase.prototype.onMouseWheel = function (evt) {\n          if (this.handler.canStartZoomOnWheel(evt)) {\n            this.handler.switchState(new MouseHandlerZoomOnWheelState_1.MouseHandlerZoomOnWheelState(this.handler, this.settings, this.view));\n            this.handler.state.onMouseWheel(evt);\n            return true;\n          }\n\n          return false;\n        };\n\n        MouseHandlerDefaultStateBase.prototype.onLongTouch = function (evt) {\n          this.replaceMultipleSelection(evt.source.key);\n        };\n\n        MouseHandlerDefaultStateBase.prototype.finish = function () {\n          this.startPoint = undefined;\n        };\n\n        MouseHandlerDefaultStateBase.prototype.startSelection = function (evt) {\n          if (evt.button === Event_1.MouseButton.Left) this.handler.switchState(new MouseHandlerSelectionState_1.MouseHandlerSelectionState(this.handler, this.selection, this.visualizerManager));\n        };\n\n        MouseHandlerDefaultStateBase.prototype.startScrolling = function (evt) {\n          if (evt.button === Event_1.MouseButton.Left) {\n            this.handler.raiseDragScrollStart();\n            this.handler.switchState(new MouseHandlerScrollingState_1.MouseHandlerScrollingState(this.handler, this.view, this.selection));\n          }\n        };\n\n        MouseHandlerDefaultStateBase.prototype.inSelection = function (key) {\n          return this.selection.hasKey(key);\n        };\n\n        MouseHandlerDefaultStateBase.prototype.hasDiagramItem = function (evt) {\n          return evt.source.type === Event_1.MouseEventElementType.Shape || evt.source.type === Event_1.MouseEventElementType.Connector;\n        };\n\n        MouseHandlerDefaultStateBase.prototype.onShapeExpandBtnMouseDown = function (evt) {\n          this.handler.addDiagramItemToSelection(evt);\n          this.handler.switchState(new MouseHandlerToggleShapeExpandedState_1.MouseHandlerToggleShapeExpandedState(this.handler, this.history, this.model, this.selection));\n        };\n\n        MouseHandlerDefaultStateBase.prototype.replaceSelection = function (evt) {\n          if (this.handler.canMultipleSelection(evt)) this.replaceMultipleSelection(evt.source.key);else this.handler.changeSingleSelection(evt.source.key);\n        };\n\n        MouseHandlerDefaultStateBase.prototype.replaceMultipleSelection = function (key) {\n          if (this.selection.hasKey(key)) this.selection.remove(key);else this.selection.add(key);\n        };\n\n        MouseHandlerDefaultStateBase.prototype.clearSelection = function () {\n          this.selection.set([]);\n        };\n\n        MouseHandlerDefaultStateBase.startLimit = unit_converter_1.UnitConverter.pixelsToTwips(1);\n        return MouseHandlerDefaultStateBase;\n      }(MouseHandlerStateBase_1.MouseHandlerStateBase);\n\n      exports.MouseHandlerDefaultStateBase = MouseHandlerDefaultStateBase;\n      /***/\n    },\n    /* 151 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics83 = function extendStatics(d, b) {\n          _extendStatics83 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics83(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics83(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MouseHandlerScrollingState = void 0;\n\n      var MouseHandlerStateBase_1 = __webpack_require__(39);\n\n      var Event_1 = __webpack_require__(11);\n\n      var point_1 = __webpack_require__(1);\n\n      var MouseHandlerScrollingState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerScrollingState, _super);\n\n        function MouseHandlerScrollingState(handler, view, selection) {\n          var _this = _super.call(this, handler) || this;\n\n          _this.view = view;\n          _this.selection = selection;\n          _this.lastOffset = new point_1.Point(0, 0);\n          return _this;\n        }\n\n        MouseHandlerScrollingState.prototype.onKeyUp = function (evt) {\n          this.handler.onFinishScrollPageByKeyboard(evt);\n        };\n\n        MouseHandlerScrollingState.prototype.onMouseDown = function (evt) {\n          evt.preventDefault = true;\n          this.startPoint = this.getPointByEvent(evt);\n        };\n\n        MouseHandlerScrollingState.prototype.onMouseMove = function (evt) {\n          if (evt.button !== Event_1.MouseButton.Left) {\n            this.handler.onFinishScrollPageByMouse(evt);\n            return;\n          }\n\n          var prevPoint = this.currentPoint || this.startPoint;\n          evt.preventDefault = true;\n          var point = this.getPointByEvent(evt);\n          var actualOffset = this.view.scrollBy(new point_1.Point(point.x - prevPoint.x, point.y - prevPoint.y));\n          this.lastOffset = this.lastOffset.clone().offset(actualOffset.x, actualOffset.y);\n          this.currentPoint = point;\n        };\n\n        MouseHandlerScrollingState.prototype.onMouseUp = function (evt) {\n          if (evt.button === Event_1.MouseButton.Left) this.handler.onFinishScrollPageByMouse(evt);\n          this.handler.switchToDefaultState();\n        };\n\n        MouseHandlerScrollingState.prototype.cancelChanges = function () {\n          if (this.currentPoint) this.view.scrollBy(this.lastOffset.clone().multiply(-1, -1));\n        };\n\n        MouseHandlerScrollingState.prototype.finish = function () {\n          if (!this.currentPoint || !this.startPoint || this.currentPoint.equals(this.startPoint)) this.selection.set([]);\n\n          _super.prototype.finish.call(this);\n        };\n\n        MouseHandlerScrollingState.prototype.getPointByEvent = function (evt) {\n          return evt.offsetPoint;\n        };\n\n        return MouseHandlerScrollingState;\n      }(MouseHandlerStateBase_1.MouseHandlerCancellableState);\n\n      exports.MouseHandlerScrollingState = MouseHandlerScrollingState;\n      /***/\n    },\n    /* 152 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics84 = function extendStatics(d, b) {\n          _extendStatics84 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics84(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics84(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MouseHandlerDragDiagramItemStateBase = exports.DraggingConnector = void 0;\n\n      var vector_1 = __webpack_require__(56);\n\n      var ChangeConnectorPointsHistoryItem_1 = __webpack_require__(153);\n\n      var ConnectorRenderPoint_1 = __webpack_require__(28);\n\n      var ConnectorRenderPointsContext_1 = __webpack_require__(86);\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var ModelOperationSettings_1 = __webpack_require__(16);\n\n      var Event_1 = __webpack_require__(11);\n\n      var MouseHandlerDraggingState_1 = __webpack_require__(32);\n\n      var DraggingConnector =\n      /** @class */\n      function () {\n        function DraggingConnector(connector) {\n          this.connector = connector;\n          this.startPoints = connector.points.map(function (x) {\n            return x.clone();\n          });\n          this.startRenderContext = connector.createRenderPointsContext();\n        }\n\n        return DraggingConnector;\n      }();\n\n      exports.DraggingConnector = DraggingConnector;\n\n      var DraggingShape =\n      /** @class */\n      function () {\n        function DraggingShape(shape) {\n          this.shape = shape;\n          this.startPosition = shape.position.clone();\n        }\n\n        return DraggingShape;\n      }();\n\n      var MouseHandlerDragDiagramItemStateBase =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerDragDiagramItemStateBase, _super);\n\n        function MouseHandlerDragDiagramItemStateBase(handler, history, model, selection, visualizerManager) {\n          var _this = _super.call(this, handler, history) || this;\n\n          _this.model = model;\n          _this.selection = selection;\n          _this.visualizerManager = visualizerManager;\n          _this.startScrollLeft = 0;\n          _this.startScrollTop = 0;\n          return _this;\n        }\n\n        MouseHandlerDragDiagramItemStateBase.prototype.finish = function () {\n          this.visualizerManager.resetExtensionLines();\n          this.visualizerManager.resetContainerTarget();\n          this.visualizerManager.resetConnectionTarget();\n          this.visualizerManager.resetConnectionPoints();\n\n          _super.prototype.finish.call(this);\n        };\n\n        MouseHandlerDragDiagramItemStateBase.prototype.onMouseDown = function (evt) {\n          var _this = this;\n\n          this.handler.addDiagramItemToSelection(evt);\n          this.shouldClone = this.handler.canCopySelectedItems(evt);\n          this.startPoint = evt.modelPoint;\n          this.initDrag();\n          this.lockInitDrag = false;\n          if (!this.shouldClone) this.draggingShapes.forEach(function (draggingShape) {\n            return _this.handler.addInteractingItem(draggingShape.shape, ModelOperationSettings_1.DiagramModelOperation.MoveShape);\n          });\n\n          _super.prototype.onMouseDown.call(this, evt);\n        };\n\n        MouseHandlerDragDiagramItemStateBase.prototype.onMouseMove = function (evt) {\n          this.mouseMoveEvent = evt;\n\n          if (evt.button !== Event_1.MouseButton.Left) {\n            this.cancelChanges();\n            this.handler.switchToDefaultState();\n          }\n\n          if (!this.canApplyChangesOnMouseMove(this.startPoint, evt.modelPoint)) return;\n          if (this.handler.canCopySelectedItems(evt)) if (!this.lockInitDrag) {\n            this.cancelChanges();\n            this.shouldClone = true;\n            this.copySelection();\n            this.initDrag();\n            this.lockInitDrag = true;\n          }\n          this.onApplyChanges(evt);\n          this.onAfterApplyChanges();\n          this.updateContainers(evt);\n        };\n\n        MouseHandlerDragDiagramItemStateBase.prototype.updateContainers = function (evt) {\n          this.visualizerManager.setExtensionLines(this.selection.getSelectedShapes(false, true));\n          var container = ModelUtils_1.ModelUtils.findContainerByEventKey(this.model, this.selection, evt.source.key);\n          if (container && this.allowInsertToContainer(evt, container)) this.visualizerManager.setContainerTarget(container, evt.source.type);else this.visualizerManager.resetContainerTarget();\n        };\n\n        MouseHandlerDragDiagramItemStateBase.prototype.onMouseUp = function (evt) {\n          _super.prototype.onMouseUp.call(this, evt);\n\n          this.handler.removeDiagramItemFromSelection(evt.button, evt.source.key);\n        };\n\n        MouseHandlerDragDiagramItemStateBase.prototype.onApplyChanges = function (evt) {\n          var _this = this;\n\n          this.calculateFixedPosition(evt);\n\n          if (this.draggingShapes.length) {\n            this.draggingShapes.forEach(function (ds) {\n              return _this.moveShape(ds, evt);\n            });\n            var firstDraggingShape = this.draggingShapes[0];\n            var offset_1 = vector_1.Vector.fromPoints(firstDraggingShape.startPosition.clone(), firstDraggingShape.shape.position.clone());\n            if (offset_1.x || offset_1.y) this.draggingConnectors.forEach(function (dc) {\n              return _this.moveConnectorCore(dc.connector, dc.startPoints, dc.startRenderContext, offset_1);\n            });\n          } else this.draggingConnectors.forEach(function (x) {\n            return _this.moveConnector(x, evt);\n          });\n\n          var container = ModelUtils_1.ModelUtils.findContainerByEventKey(this.model, this.selection, evt.source.key);\n          if (container && this.allowInsertToContainer(evt, container)) ModelUtils_1.ModelUtils.insertSelectionToContainer(this.history, this.model, this.selection, container);else ModelUtils_1.ModelUtils.removeSelectionFromContainer(this.history, this.model, this.selection);\n          this.handler.tryUpdateModelSize(function (offsetLeft, offsetTop) {\n            _this.modelConnectorsWithoutBeginItemInfo.forEach(function (pi) {\n              pi.point.x += offsetLeft;\n              pi.point.y += offsetTop;\n            });\n\n            _this.modelConnectorsWithoutEndItemInfo.forEach(function (pi) {\n              pi.point.x += offsetLeft;\n              pi.point.y += offsetTop;\n            });\n          });\n        };\n\n        MouseHandlerDragDiagramItemStateBase.prototype.getDraggingElementKeys = function () {\n          return this.draggingShapes.map(function (x) {\n            return x.shape.key;\n          }).concat(this.draggingConnectors.map(function (x) {\n            return x.connector.key;\n          }));\n        };\n\n        MouseHandlerDragDiagramItemStateBase.prototype.getSnappedPoint = function (evt, point) {\n          return this.handler.getSnappedPointOnDragDiagramItem(evt, point, this.fixedX, this.fixedY, this.startPoint);\n        };\n\n        MouseHandlerDragDiagramItemStateBase.prototype.initDrag = function () {\n          this.selectedItems = ModelUtils_1.ModelUtils.createSelectedItems(this.selection);\n          this.initDraggingShapes();\n\n          if (!this.areValidDraggingShapes) {\n            this.handler.switchToDefaultState();\n            return;\n          }\n\n          this.initDraggingConnectors();\n\n          if (!this.areValidDraggingConnectors) {\n            this.handler.switchToDefaultState();\n            return;\n          }\n\n          this.modelConnectorsWithoutBeginItemInfo = this.createModelConnectorsWithoutBeginItemInfo();\n          this.modelConnectorsWithoutEndItemInfo = this.createModelConnectorsWithoutEndItemInfo();\n        };\n\n        MouseHandlerDragDiagramItemStateBase.prototype.initDraggingShapes = function () {\n          this.draggingShapes = this.selection.getSelectedShapes(false, true).map(function (s) {\n            return new DraggingShape(s);\n          });\n        };\n\n        MouseHandlerDragDiagramItemStateBase.prototype.initDraggingConnectors = function () {\n          var _this = this;\n\n          this.draggingConnectors = [];\n          this.draggingConnectorsIndexByKey = {};\n          this.selection.getSelectedConnectors(false, true).forEach(function (c) {\n            return _this.registerConnector(c);\n          });\n          if (this.shouldClone) return;\n          this.draggingShapes.forEach(function (x) {\n            var attachedConnectors = x.shape.attachedConnectors;\n            if (attachedConnectors) attachedConnectors.forEach(function (c) {\n              if (!_this.containsDraggingConnectorByKey(c.key)) _this.registerConnector(c);\n            });\n          });\n        };\n\n        MouseHandlerDragDiagramItemStateBase.prototype.copySelection = function () {\n          var _this = this;\n\n          ModelUtils_1.ModelUtils.cloneSelectionToOffset(this.history, this.model, function (key) {\n            var item = _this.model.findItem(key);\n\n            if (item) _this.handler.addInteractingItem(item, ModelOperationSettings_1.DiagramModelOperation.AddShape);\n          }, this.selection, 0, 0);\n        };\n\n        MouseHandlerDragDiagramItemStateBase.prototype.calculateFixedPosition = function (evt) {\n          this.fixedX = false;\n          this.fixedY = false;\n\n          if (this.handler.canCalculateFixedPosition(evt)) {\n            var dx = Math.abs(this.startPoint.x - evt.modelPoint.x);\n            var dy = Math.abs(this.startPoint.y - evt.modelPoint.y);\n            if (dx < dy) this.fixedX = true;else this.fixedY = true;\n          }\n        };\n\n        MouseHandlerDragDiagramItemStateBase.prototype.containsDraggingConnectorByKey = function (key) {\n          return this.draggingConnectorsIndexByKey[key] !== undefined;\n        };\n\n        MouseHandlerDragDiagramItemStateBase.prototype.allowInsertToContainer = function (evt, container) {\n          if (this.handler.canMultipleSelection(evt)) return false;\n          return container && container.expanded && ModelUtils_1.ModelUtils.canInsertSelectionToContainer(this.model, this.selection, container);\n        };\n\n        MouseHandlerDragDiagramItemStateBase.prototype.registerConnector = function (connector) {\n          this.draggingConnectorsIndexByKey[connector.key] = this.draggingConnectors.push(new DraggingConnector(connector)) - 1;\n        };\n\n        MouseHandlerDragDiagramItemStateBase.prototype.createModelConnectorsWithoutBeginItemInfo = function () {\n          var _this = this;\n\n          var connectors = this.model.findConnectorsCore(function (c) {\n            return !c.beginItem && !_this.containsDraggingConnectorByKey(c.key);\n          });\n          return connectors.map(function (c) {\n            return {\n              connector: c,\n              point: c.points[0].clone()\n            };\n          });\n        };\n\n        MouseHandlerDragDiagramItemStateBase.prototype.createModelConnectorsWithoutEndItemInfo = function () {\n          var _this = this;\n\n          var connectors = this.model.findConnectorsCore(function (c) {\n            return !c.endItem && !_this.containsDraggingConnectorByKey(c.key);\n          });\n          return connectors.map(function (c) {\n            return {\n              connector: c,\n              point: c.points[c.points.length - 1].clone()\n            };\n          });\n        };\n\n        MouseHandlerDragDiagramItemStateBase.prototype.moveConnector = function (dc, evt) {\n          var startPoints = dc.startPoints;\n          var offset = vector_1.Vector.fromPoints(startPoints[0].clone(), this.getSnappedPoint(evt, startPoints[0]).clone());\n          if (offset.x || offset.y) this.moveConnectorCore(dc.connector, startPoints, dc.startRenderContext, offset);\n        };\n\n        MouseHandlerDragDiagramItemStateBase.prototype.moveConnectorCore = function (connector, startPoints, startRenderContext, offset) {\n          if (this.shouldClone || ModelUtils_1.ModelUtils.canMoveConnector(this.selectedItems, connector)) this.offsetConnector(connector, startPoints, startRenderContext, offset);else this.changeConnector(connector);\n        };\n\n        MouseHandlerDragDiagramItemStateBase.prototype.moveShape = function (ds, evt) {\n          var _this = this;\n\n          var shape = ds.shape;\n          var position = this.getSnappedPoint(evt, ds.startPosition);\n          ModelUtils_1.ModelUtils.setShapePosition(this.history, this.model, shape, position);\n          ModelUtils_1.ModelUtils.updateMovingShapeConnections(this.history, shape, this.modelConnectorsWithoutBeginItemInfo, this.modelConnectorsWithoutEndItemInfo, function () {\n            _this.visualizerManager.resetConnectionTarget();\n\n            _this.visualizerManager.resetConnectionPoints();\n          }, function (shape, connectionPointIndex) {\n            _this.visualizerManager.setConnectionTarget(shape, Event_1.MouseEventElementType.Shape);\n\n            _this.visualizerManager.setConnectionPoints(shape, Event_1.MouseEventElementType.Shape, connectionPointIndex, true);\n          }, function (connector) {\n            return _this.handler.addInteractingItem(connector);\n          });\n          if (!this.draggingConnectors.filter(function (dc) {\n            return !!_this.selectedItems[dc.connector.key];\n          }).length) ModelUtils_1.ModelUtils.updateShapeAttachedConnectors(this.history, this.model, shape);\n        };\n\n        MouseHandlerDragDiagramItemStateBase.prototype.offsetConnector = function (connector, startPoints, startRenderContext, offset) {\n          var _this = this;\n\n          var newPoints = startPoints.map(function (p) {\n            return _this.offsetPoint(p, offset);\n          });\n          if (!newPoints[0].equals(connector.points[0])) this.history.addAndRedo(new ChangeConnectorPointsHistoryItem_1.ChangeConnectorPointsHistoryItem(connector.key, newPoints, this.offsetRenderContext(startRenderContext, offset)));\n        };\n\n        MouseHandlerDragDiagramItemStateBase.prototype.offsetRenderContext = function (context, offset) {\n          var _this = this;\n\n          if (context === undefined) return undefined;\n          return new ConnectorRenderPointsContext_1.ConnectorRenderPointsContext(context.renderPoints.map(function (p) {\n            var newPoint = _this.offsetPoint(p, offset);\n\n            return new ConnectorRenderPoint_1.ConnectorRenderPoint(newPoint.x, newPoint.y, p.pointIndex, p.skipped);\n          }), true, context.actualRoutingMode);\n        };\n\n        MouseHandlerDragDiagramItemStateBase.prototype.offsetPoint = function (point, offset) {\n          var pointOffset = vector_1.Vector.fromPoints(point, this.startPoint);\n          return this.startPoint.clone().offset(offset.x - pointOffset.x, offset.y - pointOffset.y);\n        };\n\n        MouseHandlerDragDiagramItemStateBase.prototype.changeConnector = function (connector) {\n          ModelUtils_1.ModelUtils.removeConnectorIntermediatePoints(this.history, connector);\n          ModelUtils_1.ModelUtils.updateConnectorAttachedPoints(this.history, this.model, connector);\n        };\n\n        return MouseHandlerDragDiagramItemStateBase;\n      }(MouseHandlerDraggingState_1.MouseHandlerDraggingState);\n\n      exports.MouseHandlerDragDiagramItemStateBase = MouseHandlerDragDiagramItemStateBase;\n      /***/\n    },\n    /* 153 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics85 = function extendStatics(d, b) {\n          _extendStatics85 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics85(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics85(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ReplaceConnectorPointsHistoryItem = exports.ChangeConnectorPointsHistoryItem = exports.UpdateConnectorPointsHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var UpdateConnectorPointsHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(UpdateConnectorPointsHistoryItem, _super);\n\n        function UpdateConnectorPointsHistoryItem(connectorKey, newPoints) {\n          var _this = _super.call(this) || this;\n\n          _this.connectorKey = connectorKey;\n          _this.newPoints = newPoints;\n          return _this;\n        }\n\n        UpdateConnectorPointsHistoryItem.prototype.redo = function (manipulator) {\n          var _this = this;\n\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          this.oldRenderContext = connector.createRenderPointsContext();\n          this.oldPoints = connector.points.map(function (p) {\n            return p.clone();\n          });\n          manipulator.changeConnectorPoints(connector, function (connector) {\n            connector.points = _this.newPoints;\n\n            _this.updateRenderPoints(connector);\n          });\n        };\n\n        UpdateConnectorPointsHistoryItem.prototype.undo = function (manipulator) {\n          var _this = this;\n\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          manipulator.changeConnectorPoints(connector, function (connector) {\n            connector.points = _this.oldPoints;\n            connector.replaceRenderPoints(_this.oldRenderContext);\n          });\n        };\n\n        return UpdateConnectorPointsHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.UpdateConnectorPointsHistoryItem = UpdateConnectorPointsHistoryItem;\n\n      var ChangeConnectorPointsHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangeConnectorPointsHistoryItem, _super);\n\n        function ChangeConnectorPointsHistoryItem(connectorKey, newPoints, newRenderContext) {\n          var _this = _super.call(this, connectorKey, newPoints) || this;\n\n          _this.connectorKey = connectorKey;\n          _this.newPoints = newPoints;\n          _this.newRenderContext = newRenderContext;\n          return _this;\n        }\n\n        ChangeConnectorPointsHistoryItem.prototype.updateRenderPoints = function (connector) {\n          connector.replaceRenderPoints(this.newRenderContext);\n        };\n\n        return ChangeConnectorPointsHistoryItem;\n      }(UpdateConnectorPointsHistoryItem);\n\n      exports.ChangeConnectorPointsHistoryItem = ChangeConnectorPointsHistoryItem;\n\n      var ReplaceConnectorPointsHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ReplaceConnectorPointsHistoryItem, _super);\n\n        function ReplaceConnectorPointsHistoryItem(connectorKey, newPoints) {\n          var _this = _super.call(this, connectorKey, newPoints) || this;\n\n          _this.connectorKey = connectorKey;\n          _this.newPoints = newPoints;\n          return _this;\n        }\n\n        ReplaceConnectorPointsHistoryItem.prototype.updateRenderPoints = function (connector) {\n          connector.clearRenderPoints();\n        };\n\n        return ReplaceConnectorPointsHistoryItem;\n      }(UpdateConnectorPointsHistoryItem);\n\n      exports.ReplaceConnectorPointsHistoryItem = ReplaceConnectorPointsHistoryItem;\n      /***/\n    },\n    /* 154 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics86 = function extendStatics(d, b) {\n          _extendStatics86 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics86(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics86(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MouseHandlerDefaultReadOnlyState = void 0;\n\n      var MouseHandlerDefaultStateBase_1 = __webpack_require__(150);\n\n      var MouseHandlerDefaultReadOnlyState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerDefaultReadOnlyState, _super);\n\n        function MouseHandlerDefaultReadOnlyState() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MouseHandlerDefaultReadOnlyState.prototype.canDragObjectOnMouseDown = function (key) {\n          return false;\n        };\n\n        MouseHandlerDefaultReadOnlyState.prototype.canExpandContainerOnMouseDown = function (key) {\n          return false;\n        };\n\n        MouseHandlerDefaultReadOnlyState.prototype.canClearSelectionOnMouseDown = function () {\n          return false;\n        };\n\n        MouseHandlerDefaultReadOnlyState.prototype.processOnMouseMoveAfterLimit = function (evt) {\n          this.startSelection(evt);\n        };\n\n        MouseHandlerDefaultReadOnlyState.prototype.canSelectOnMouseUp = function (key) {\n          return true;\n        };\n\n        MouseHandlerDefaultReadOnlyState.prototype.canClearSelectionOnMouseUp = function () {\n          return true;\n        };\n\n        MouseHandlerDefaultReadOnlyState.prototype.updateConnectionsOnMouseMove = function (evt) {};\n\n        return MouseHandlerDefaultReadOnlyState;\n      }(MouseHandlerDefaultStateBase_1.MouseHandlerDefaultStateBase);\n\n      exports.MouseHandlerDefaultReadOnlyState = MouseHandlerDefaultReadOnlyState;\n      /***/\n    },\n    /* 155 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics87 = function extendStatics(d, b) {\n          _extendStatics87 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics87(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics87(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeShapeTextHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var ChangeShapeTextHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangeShapeTextHistoryItem, _super);\n\n        function ChangeShapeTextHistoryItem(item, text) {\n          var _this = _super.call(this) || this;\n\n          _this.shapeKey = item.key;\n          _this.text = text;\n          return _this;\n        }\n\n        ChangeShapeTextHistoryItem.prototype.redo = function (manipulator) {\n          var item = manipulator.model.findShape(this.shapeKey);\n          this.oldText = item.text;\n          manipulator.changeShapeText(item, this.text);\n        };\n\n        ChangeShapeTextHistoryItem.prototype.undo = function (manipulator) {\n          var item = manipulator.model.findShape(this.shapeKey);\n          manipulator.changeShapeText(item, this.oldText);\n        };\n\n        return ChangeShapeTextHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ChangeShapeTextHistoryItem = ChangeShapeTextHistoryItem;\n      /***/\n    },\n    /* 156 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics88 = function extendStatics(d, b) {\n          _extendStatics88 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics88(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics88(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ContextMenuHandler = void 0;\n\n      var Utils_1 = __webpack_require__(3);\n\n      var Event_1 = __webpack_require__(11);\n\n      var key_1 = __webpack_require__(25);\n\n      var batch_updatable_1 = __webpack_require__(79);\n\n      var browser_1 = __webpack_require__(17);\n\n      var ContextMenuHandler =\n      /** @class */\n      function (_super) {\n        __extends(ContextMenuHandler, _super);\n\n        function ContextMenuHandler() {\n          var _this = _super !== null && _super.apply(this, arguments) || this;\n\n          _this.contextMenuVisible = false;\n          _this.textInputStarted = false;\n          _this.canHideContextMenu = true;\n          _this.onVisibilityChanged = new Utils_1.EventDispatcher();\n          return _this;\n        }\n\n        ContextMenuHandler.prototype.onMouseDown = function (evt) {\n          if (evt.button === Event_1.MouseButton.Left && evt.source.type !== Event_1.MouseEventElementType.Undefined) this.hideContextMenu();\n        };\n\n        ContextMenuHandler.prototype.onMouseUp = function (evt) {\n          if (!browser_1.Browser.MacOSPlatform || browser_1.Browser.MacOSPlatform && this.canHideContextMenu) this.hideContextMenu();\n          this.canHideContextMenu = true;\n        };\n\n        ContextMenuHandler.prototype.onContextMenu = function (evt) {\n          // on Mac OS event sequence is mousedown - contextmenu - mouseup\n          // on Windows - mousedown - mouseup - contextmenu\n          // Thats why context menu immediately closes on Mac OS after showing\n          if (browser_1.Browser.MacOSPlatform) this.canHideContextMenu = false;\n          this.showContextMenu(evt.eventPoint, evt.modelPoint);\n        };\n\n        ContextMenuHandler.prototype.onFocus = function (evt) {};\n\n        ContextMenuHandler.prototype.onBlur = function (evt) {};\n\n        ContextMenuHandler.prototype.onTextInputFocus = function (evt) {};\n\n        ContextMenuHandler.prototype.onTextInputBlur = function (evt) {};\n\n        ContextMenuHandler.prototype.onLongTouch = function (evt) {};\n\n        ContextMenuHandler.prototype.onKeyDown = function (evt) {\n          if (evt.keyCode === key_1.KeyCode.Esc) this.hideContextMenu();\n        };\n\n        ContextMenuHandler.prototype.onShortcut = function (evt) {\n          this.hideContextMenu();\n        };\n\n        ContextMenuHandler.prototype.showContextMenu = function (eventPoint, modelPoint) {\n          if (this.textInputStarted) return;\n          this.onVisibilityChanged.raise1(function (l) {\n            return l.notifyShowContextMenu(eventPoint, modelPoint);\n          });\n          this.contextMenuVisible = true;\n        };\n\n        ContextMenuHandler.prototype.hideContextMenu = function () {\n          if (this.contextMenuVisible) {\n            this.onVisibilityChanged.raise1(function (l) {\n              return l.notifyHideContextMenu();\n            });\n            this.contextMenuVisible = false;\n          }\n        };\n\n        ContextMenuHandler.prototype.notifyDragStart = function (itemKeys) {};\n\n        ContextMenuHandler.prototype.notifyDragEnd = function (itemKeys) {};\n\n        ContextMenuHandler.prototype.notifyDragScrollStart = function () {};\n\n        ContextMenuHandler.prototype.notifyDragScrollEnd = function () {};\n\n        ContextMenuHandler.prototype.notifyShowContextToolbox = function (modelPoint, getPositionToInsertShapeTo, side, category, callback) {};\n\n        ContextMenuHandler.prototype.notifyHideContextToolbox = function () {};\n\n        ContextMenuHandler.prototype.notifyTextInputStart = function (item, text, position, size) {\n          this.textInputStarted = true;\n        };\n\n        ContextMenuHandler.prototype.notifyTextInputEnd = function (item) {\n          this.textInputStarted = false;\n        };\n\n        ContextMenuHandler.prototype.notifyTextInputPermissionsCheck = function (item, allowed) {};\n\n        ContextMenuHandler.prototype.onUpdateUnlocked = function (occurredEvents) {};\n\n        return ContextMenuHandler;\n      }(batch_updatable_1.BatchUpdatableObject);\n\n      exports.ContextMenuHandler = ContextMenuHandler;\n      /***/\n    },\n    /* 157 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics89 = function extendStatics(d, b) {\n          _extendStatics89 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics89(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics89(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.VisualizerManager = void 0;\n\n      var ConnectionTargetVisualizer_1 = __webpack_require__(326);\n\n      var ContainerTargetVisualizer_1 = __webpack_require__(327);\n\n      var ExtensionLinesVisualizer_1 = __webpack_require__(159);\n\n      var Event_1 = __webpack_require__(11);\n\n      var ConnectionPointsVisualizer_1 = __webpack_require__(328);\n\n      var Shape_1 = __webpack_require__(14);\n\n      var Utils_1 = __webpack_require__(3);\n\n      var segment_1 = __webpack_require__(34);\n\n      var point_1 = __webpack_require__(1);\n\n      var CanvasSelectionManager_1 = __webpack_require__(160);\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var ResizeInfoVisualizer_1 = __webpack_require__(329);\n\n      var SelectionRectVisualizer_1 = __webpack_require__(330);\n\n      var batch_updatable_1 = __webpack_require__(79);\n\n      var LocalizationService_1 = __webpack_require__(35);\n\n      var VisualizerManager =\n      /** @class */\n      function (_super) {\n        __extends(VisualizerManager, _super);\n\n        function VisualizerManager(selection, model, eventManager, settings, readOnly) {\n          if (readOnly === void 0) {\n            readOnly = settings.readOnly;\n          }\n\n          var _this = _super.call(this) || this;\n\n          _this.selection = selection;\n          _this.model = model;\n          _this.eventManager = eventManager;\n          _this.settings = settings;\n          _this.readOnly = readOnly;\n          _this.onVisualizersUpdate = new Utils_1.EventDispatcher();\n          _this.connectionPointsVisualizer = new ConnectionPointsVisualizer_1.ConnectionPointsVisualizer(_this.onVisualizersUpdate);\n          _this.connectionPointsVisualizer = new ConnectionPointsVisualizer_1.ConnectionPointsVisualizer(_this.onVisualizersUpdate);\n          _this.connectionTargetVisualizer = new ConnectionTargetVisualizer_1.ConnectionTargetVisualizer(_this.onVisualizersUpdate);\n          _this.containerTargetVisualizer = new ContainerTargetVisualizer_1.ContainerTargetVisualizer(_this.onVisualizersUpdate);\n          _this.extensionLinesVisualizer = new ExtensionLinesVisualizer_1.ExtensionLinesVisualizer(_this.onVisualizersUpdate);\n          _this.resizeInfoVisualizer = new ResizeInfoVisualizer_1.ResizeInfoVisualizer(_this.onVisualizersUpdate);\n          _this.selectionRectangleVisualizer = new SelectionRectVisualizer_1.SelectionRectVisualizer(_this.onVisualizersUpdate);\n          return _this;\n        }\n\n        VisualizerManager.prototype.initialize = function (model) {\n          this.model = model;\n        };\n\n        VisualizerManager.prototype.onMouseDown = function (evt) {};\n\n        VisualizerManager.prototype.onMouseUp = function (evt) {};\n\n        VisualizerManager.prototype.onMouseEnter = function (evt) {};\n\n        VisualizerManager.prototype.onMouseLeave = function (evt) {\n          this.resetConnectionPoints();\n          this.resetConnectionTarget();\n          this.resetExtensionLines();\n          this.resetContainerTarget();\n          this.resetResizeInfo();\n          this.resetSelectionRectangle();\n        };\n\n        VisualizerManager.prototype.onBlur = function (evt) {};\n\n        VisualizerManager.prototype.onFocus = function (evt) {};\n\n        VisualizerManager.prototype.updateConnections = function (item, type, value) {\n          var pointIndex = -1;\n          if (value && type === Event_1.MouseEventElementType.ShapeConnectionPoint) pointIndex = parseInt(value);\n          var preventShowOutside = item && (!item.allowResizeHorizontally && !item.allowResizeVertically || item.isLocked);\n          this.setConnectionPoints(item, type, pointIndex, preventShowOutside);\n        };\n\n        VisualizerManager.prototype.setConnectionPoints = function (item, type, pointIndex, preventShowOutside) {\n          if (!this.eventManager.isFocused()) return;\n\n          if (item && (type === Event_1.MouseEventElementType.Shape || type === Event_1.MouseEventElementType.ShapeResizeBox || type === Event_1.MouseEventElementType.ShapeConnectionPoint) && item !== undefined) {\n            var key = item.key;\n            var isSelected = this.selection.hasKey(key);\n            var points = item.getConnectionPoints();\n            this.connectionPointsVisualizer.setPoints(key, points.map(function (pt) {\n              return new ConnectionPointsVisualizer_1.ConnectionPointInfo(pt, item.getConnectionPointSide(pt));\n            }), pointIndex, isSelected && !preventShowOutside && item.rectangle);\n          } else this.connectionPointsVisualizer.reset();\n        };\n\n        VisualizerManager.prototype.setConnectionPointIndex = function (index) {\n          this.connectionPointsVisualizer.setPointIndex(index);\n        };\n\n        VisualizerManager.prototype.updateConnectionPoints = function () {\n          var item = this.model.findItem(this.connectionPointsVisualizer.getKey());\n          if (item !== undefined) this.connectionPointsVisualizer.update();else this.connectionPointsVisualizer.reset();\n        };\n\n        VisualizerManager.prototype.resetConnectionPoints = function () {\n          this.connectionPointsVisualizer.reset();\n        };\n\n        VisualizerManager.prototype.setConnectionTarget = function (item, type) {\n          if (item && (type === Event_1.MouseEventElementType.Shape || type === Event_1.MouseEventElementType.ShapeConnectionPoint)) this.connectionTargetVisualizer.setTargetRect(item.key, item.rectangle, item.strokeWidth);else this.connectionTargetVisualizer.reset();\n        };\n\n        VisualizerManager.prototype.resetConnectionTarget = function () {\n          this.connectionTargetVisualizer.reset();\n        };\n\n        VisualizerManager.prototype.setContainerTarget = function (item, type) {\n          if (item && !item.isLocked && type === Event_1.MouseEventElementType.Shape && item.enableChildren) this.containerTargetVisualizer.setTargetRect(item.key, item.rectangle, item.strokeWidth);else this.containerTargetVisualizer.reset();\n        };\n\n        VisualizerManager.prototype.resetContainerTarget = function () {\n          this.containerTargetVisualizer.reset();\n        };\n\n        VisualizerManager.prototype.setExtensionLines = function (items) {\n          var _this = this;\n\n          if (!this.eventManager.isFocused()) return;\n          this.extensionLinesVisualizer.reset();\n          var rect = ModelUtils_1.ModelUtils.createRectangle(items.filter(function (item) {\n            return item;\n          }));\n          this.addPageExtensionLines(rect);\n          this.model.items.forEach(function (item) {\n            if (items.indexOf(item) > -1) return;\n            if (item instanceof Shape_1.Shape) _this.addShapeExtensionLines(item, rect);\n          });\n        };\n\n        VisualizerManager.prototype.addPageExtensionLines = function (rect) {\n          var horPages = Math.round(this.model.size.width / this.model.pageWidth);\n          var verPages = Math.round(this.model.size.height / this.model.pageHeight);\n\n          for (var i = 0; i < horPages; i++) {\n            for (var j = 0; j < verPages; j++) {\n              var center = new point_1.Point(i * this.model.pageWidth + this.model.pageWidth / 2, j * this.model.pageHeight + this.model.pageHeight / 2);\n\n              if (Math.abs(rect.center.x - center.x) < this.settings.gridSize / 2) {\n                var segment = new segment_1.Segment(new point_1.Point(rect.center.x, 0), new point_1.Point(rect.center.x, this.model.size.height));\n                this.extensionLinesVisualizer.addSegment(ExtensionLinesVisualizer_1.ExtensionLineType.HorizontalCenterToPageCenter, segment, \"\");\n              }\n\n              if (Math.abs(rect.center.y - center.y) < this.settings.gridSize / 2) {\n                var segment = new segment_1.Segment(new point_1.Point(0, rect.center.y), new point_1.Point(this.model.size.width, rect.center.y));\n                this.extensionLinesVisualizer.addSegment(ExtensionLinesVisualizer_1.ExtensionLineType.VerticalCenterToPageCenter, segment, \"\");\n              }\n\n              if (Math.abs(rect.x - center.x) < this.settings.gridSize / 2) {\n                var segment = new segment_1.Segment(new point_1.Point(rect.x, 0), new point_1.Point(rect.x, this.model.size.height));\n                this.extensionLinesVisualizer.addSegment(ExtensionLinesVisualizer_1.ExtensionLineType.LeftToPageCenter, segment, \"\");\n              }\n\n              if (Math.abs(rect.y - center.y) < this.settings.gridSize / 2) {\n                var segment = new segment_1.Segment(new point_1.Point(0, rect.y), new point_1.Point(this.model.size.width, rect.y));\n                this.extensionLinesVisualizer.addSegment(ExtensionLinesVisualizer_1.ExtensionLineType.TopToPageCenter, segment, \"\");\n              }\n\n              if (Math.abs(rect.right - center.x) < this.settings.gridSize / 2) {\n                var segment = new segment_1.Segment(new point_1.Point(rect.right, 0), new point_1.Point(rect.right, this.model.size.height));\n                this.extensionLinesVisualizer.addSegment(ExtensionLinesVisualizer_1.ExtensionLineType.RightToPageCenter, segment, \"\");\n              }\n\n              if (Math.abs(rect.bottom - center.y) < this.settings.gridSize / 2) {\n                var segment = new segment_1.Segment(new point_1.Point(0, rect.bottom), new point_1.Point(this.model.size.width, rect.bottom));\n                this.extensionLinesVisualizer.addSegment(ExtensionLinesVisualizer_1.ExtensionLineType.BottomToPageCenter, segment, \"\");\n              }\n            }\n          }\n        };\n\n        VisualizerManager.prototype.addShapeExtensionLines = function (shape, rect) {\n          var sRect = shape.rectangle;\n          var lwCor = shape.strokeWidth - CanvasSelectionManager_1.CanvasSelectionManager.extensionLineWidth;\n          var showDistance = true;\n          var x1nc;\n          var y1nc;\n          var x2nc;\n          var y2nc;\n          var x1;\n          var y1;\n          var x2;\n          var y2;\n\n          if (rect.right < sRect.x) {\n            x1nc = rect.right;\n            x2nc = sRect.x;\n            x1 = x1nc + lwCor + CanvasSelectionManager_1.CanvasSelectionManager.extensionLineOffset;\n            x2 = x2nc - CanvasSelectionManager_1.CanvasSelectionManager.extensionLineOffset;\n          } else if (rect.x > sRect.right) {\n            x1nc = rect.x;\n            x2nc = sRect.right;\n            x1 = x1nc - CanvasSelectionManager_1.CanvasSelectionManager.extensionLineOffset;\n            x2 = x2nc + lwCor + CanvasSelectionManager_1.CanvasSelectionManager.extensionLineOffset;\n          }\n\n          if (rect.bottom < sRect.y) {\n            y1nc = rect.bottom;\n            y2nc = sRect.y;\n            y1 = y1nc + lwCor + CanvasSelectionManager_1.CanvasSelectionManager.extensionLineOffset;\n            y2 = y2nc - CanvasSelectionManager_1.CanvasSelectionManager.extensionLineOffset;\n          } else if (rect.y > sRect.bottom) {\n            y1nc = rect.y;\n            y2nc = sRect.bottom;\n            y1 = y1nc - CanvasSelectionManager_1.CanvasSelectionManager.extensionLineOffset;\n            y2 = y2nc + lwCor + CanvasSelectionManager_1.CanvasSelectionManager.extensionLineOffset;\n          }\n\n          if (x1 !== undefined && x2 !== undefined) {\n            var distanceText = this.getViewUnitText(Math.abs(x1nc - x2nc));\n\n            if (rect.center.y === sRect.center.y) {\n              var segment = new segment_1.Segment(new point_1.Point(x1, rect.center.y), new point_1.Point(x2, sRect.center.y));\n              this.extensionLinesVisualizer.addSegment(x1 > x2 ? ExtensionLinesVisualizer_1.ExtensionLineType.VerticalCenterAfter : ExtensionLinesVisualizer_1.ExtensionLineType.VerticalCenterBefore, segment, showDistance ? distanceText : \"\");\n              showDistance = false;\n            }\n\n            if (rect.y === sRect.y) {\n              var segment = new segment_1.Segment(new point_1.Point(x1, rect.y), new point_1.Point(x2, sRect.y));\n              this.extensionLinesVisualizer.addSegment(x1 > x2 ? ExtensionLinesVisualizer_1.ExtensionLineType.TopToTopAfter : ExtensionLinesVisualizer_1.ExtensionLineType.TopToTopBefore, segment, showDistance ? distanceText : \"\");\n            }\n\n            if (rect.bottom === sRect.bottom) {\n              var segment = new segment_1.Segment(new point_1.Point(x1, rect.bottom + lwCor), new point_1.Point(x2, sRect.bottom + lwCor));\n              this.extensionLinesVisualizer.addSegment(x1 > x2 ? ExtensionLinesVisualizer_1.ExtensionLineType.BottomToBottomAfter : ExtensionLinesVisualizer_1.ExtensionLineType.BottomToBottomBefore, segment, showDistance ? distanceText : \"\");\n            }\n\n            if (rect.y === sRect.bottom) {\n              var segment = new segment_1.Segment(new point_1.Point(x1, rect.y), new point_1.Point(x2, sRect.bottom + lwCor));\n              this.extensionLinesVisualizer.addSegment(x1 > x2 ? ExtensionLinesVisualizer_1.ExtensionLineType.TopToBottomAfter : ExtensionLinesVisualizer_1.ExtensionLineType.TopToBottomBefore, segment, showDistance ? distanceText : \"\");\n            }\n\n            if (rect.bottom === sRect.y) {\n              var segment = new segment_1.Segment(new point_1.Point(x1, rect.bottom + lwCor), new point_1.Point(x2, sRect.y));\n              this.extensionLinesVisualizer.addSegment(x1 > x2 ? ExtensionLinesVisualizer_1.ExtensionLineType.BottomToTopAfter : ExtensionLinesVisualizer_1.ExtensionLineType.BottomToTopBefore, segment, showDistance ? distanceText : \"\");\n            }\n          }\n\n          if (y1 !== undefined && y2 !== undefined) {\n            var distanceText = this.getViewUnitText(Math.abs(y1nc - y2nc));\n\n            if (rect.center.x === sRect.center.x) {\n              var segment = new segment_1.Segment(new point_1.Point(rect.center.x, y1), new point_1.Point(sRect.center.x, y2));\n              this.extensionLinesVisualizer.addSegment(y1 > y2 ? ExtensionLinesVisualizer_1.ExtensionLineType.HorizontalCenterBelow : ExtensionLinesVisualizer_1.ExtensionLineType.HorizontalCenterAbove, segment, showDistance ? distanceText : \"\");\n              showDistance = false;\n            }\n\n            if (rect.x === sRect.x) {\n              var segment = new segment_1.Segment(new point_1.Point(rect.x, y1), new point_1.Point(sRect.x, y2));\n              this.extensionLinesVisualizer.addSegment(y1 > y2 ? ExtensionLinesVisualizer_1.ExtensionLineType.LeftToLeftBelow : ExtensionLinesVisualizer_1.ExtensionLineType.LeftToLeftAbove, segment, showDistance ? distanceText : \"\");\n            }\n\n            if (rect.right === sRect.right) {\n              var segment = new segment_1.Segment(new point_1.Point(rect.right + lwCor, y1), new point_1.Point(sRect.right + lwCor, y2));\n              this.extensionLinesVisualizer.addSegment(y1 > y2 ? ExtensionLinesVisualizer_1.ExtensionLineType.RightToRightBelow : ExtensionLinesVisualizer_1.ExtensionLineType.RightToRightAbove, segment, showDistance ? distanceText : \"\");\n            }\n\n            if (rect.x === sRect.right) {\n              var segment = new segment_1.Segment(new point_1.Point(rect.x, y1), new point_1.Point(sRect.right + lwCor, y2));\n              this.extensionLinesVisualizer.addSegment(y1 > y2 ? ExtensionLinesVisualizer_1.ExtensionLineType.LeftToRightBelow : ExtensionLinesVisualizer_1.ExtensionLineType.LeftToRightAbove, segment, showDistance ? distanceText : \"\");\n            }\n\n            if (rect.right === sRect.x) {\n              var segment = new segment_1.Segment(new point_1.Point(rect.right + lwCor, y1), new point_1.Point(sRect.x, y2));\n              this.extensionLinesVisualizer.addSegment(y1 > y2 ? ExtensionLinesVisualizer_1.ExtensionLineType.RightToLeftBelow : ExtensionLinesVisualizer_1.ExtensionLineType.RightToLeftAbove, segment, showDistance ? distanceText : \"\");\n            }\n          }\n        };\n\n        VisualizerManager.prototype.resetExtensionLines = function () {\n          this.extensionLinesVisualizer.reset();\n        };\n\n        VisualizerManager.prototype.setResizeInfo = function (items) {\n          var rect = ModelUtils_1.ModelUtils.createRectangle(items);\n          var point = new point_1.Point(rect.center.x, rect.bottom + CanvasSelectionManager_1.CanvasSelectionManager.resizeInfoOffset);\n          var text = this.getViewUnitText(rect.width) + \" x \" + this.getViewUnitText(rect.height);\n          this.resizeInfoVisualizer.set(point, text);\n        };\n\n        VisualizerManager.prototype.resetResizeInfo = function () {\n          this.resizeInfoVisualizer.reset();\n        };\n\n        VisualizerManager.prototype.setSelectionRectangle = function (rect) {\n          this.selectionRectangleVisualizer.setRectangle(rect);\n        };\n\n        VisualizerManager.prototype.resetSelectionRectangle = function () {\n          this.selectionRectangleVisualizer.reset();\n        }; // utils\n\n\n        VisualizerManager.prototype.getViewUnitText = function (value) {\n          return ModelUtils_1.ModelUtils.getUnitText(this.settings.viewUnits, LocalizationService_1.DiagramLocalizationService.unitItems, LocalizationService_1.DiagramLocalizationService.formatUnit, value);\n        };\n\n        VisualizerManager.prototype.notifyReadOnlyChanged = function (readOnly) {\n          this.readOnly = readOnly;\n\n          if (this.readOnly) {\n            this.resetConnectionPoints();\n            this.resetConnectionTarget();\n            this.resetExtensionLines();\n            this.resetContainerTarget();\n            this.resetResizeInfo();\n            this.resetSelectionRectangle();\n          }\n        };\n\n        VisualizerManager.prototype.notifyDragStart = function (itemKeys) {};\n\n        VisualizerManager.prototype.notifyDragEnd = function (itemKeys) {};\n\n        VisualizerManager.prototype.notifyDragScrollStart = function () {};\n\n        VisualizerManager.prototype.notifyDragScrollEnd = function () {};\n\n        VisualizerManager.prototype.onUpdateUnlocked = function (occurredEvents) {};\n\n        return VisualizerManager;\n      }(batch_updatable_1.BatchUpdatableObject);\n\n      exports.VisualizerManager = VisualizerManager;\n      /***/\n    },\n    /* 158 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.TargetVisualizerBase = void 0;\n\n      var TargetVisualizerBase =\n      /** @class */\n      function () {\n        function TargetVisualizerBase(dispatcher) {\n          this.dispatcher = dispatcher;\n        }\n\n        TargetVisualizerBase.prototype.getKey = function () {\n          return this.key;\n        };\n\n        TargetVisualizerBase.prototype.setTargetRect = function (key, targetRect, targetStrokeWidth) {\n          if (this.key !== key) {\n            this.key = key;\n            this.targetRect = targetRect;\n            this.targetStrokeWidth = targetStrokeWidth;\n            this.raiseShow();\n          }\n        };\n\n        TargetVisualizerBase.prototype.reset = function () {\n          if (this.key !== \"-1\") {\n            this.key = \"-1\";\n            this.targetRect = undefined;\n            this.targetStrokeWidth = 0;\n            this.raiseHide();\n          }\n        };\n\n        return TargetVisualizerBase;\n      }();\n\n      exports.TargetVisualizerBase = TargetVisualizerBase;\n      /***/\n    },\n    /* 159 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ExtensionLinesVisualizer = exports.ExtensionLine = exports.ExtensionLineType = void 0;\n      var ExtensionLineType;\n\n      (function (ExtensionLineType) {\n        ExtensionLineType[ExtensionLineType[\"LeftToLeftAbove\"] = 0] = \"LeftToLeftAbove\";\n        ExtensionLineType[ExtensionLineType[\"LeftToLeftBelow\"] = 1] = \"LeftToLeftBelow\";\n        ExtensionLineType[ExtensionLineType[\"RightToRightAbove\"] = 2] = \"RightToRightAbove\";\n        ExtensionLineType[ExtensionLineType[\"RightToRightBelow\"] = 3] = \"RightToRightBelow\";\n        ExtensionLineType[ExtensionLineType[\"LeftToRightAbove\"] = 4] = \"LeftToRightAbove\";\n        ExtensionLineType[ExtensionLineType[\"LeftToRightBelow\"] = 5] = \"LeftToRightBelow\";\n        ExtensionLineType[ExtensionLineType[\"RightToLeftAbove\"] = 6] = \"RightToLeftAbove\";\n        ExtensionLineType[ExtensionLineType[\"RightToLeftBelow\"] = 7] = \"RightToLeftBelow\";\n        ExtensionLineType[ExtensionLineType[\"TopToTopBefore\"] = 8] = \"TopToTopBefore\";\n        ExtensionLineType[ExtensionLineType[\"TopToTopAfter\"] = 9] = \"TopToTopAfter\";\n        ExtensionLineType[ExtensionLineType[\"BottomToBottomBefore\"] = 10] = \"BottomToBottomBefore\";\n        ExtensionLineType[ExtensionLineType[\"BottomToBottomAfter\"] = 11] = \"BottomToBottomAfter\";\n        ExtensionLineType[ExtensionLineType[\"TopToBottomBefore\"] = 12] = \"TopToBottomBefore\";\n        ExtensionLineType[ExtensionLineType[\"TopToBottomAfter\"] = 13] = \"TopToBottomAfter\";\n        ExtensionLineType[ExtensionLineType[\"BottomToTopBefore\"] = 14] = \"BottomToTopBefore\";\n        ExtensionLineType[ExtensionLineType[\"BottomToTopAfter\"] = 15] = \"BottomToTopAfter\";\n        ExtensionLineType[ExtensionLineType[\"HorizontalCenterAbove\"] = 16] = \"HorizontalCenterAbove\";\n        ExtensionLineType[ExtensionLineType[\"HorizontalCenterBelow\"] = 17] = \"HorizontalCenterBelow\";\n        ExtensionLineType[ExtensionLineType[\"VerticalCenterBefore\"] = 18] = \"VerticalCenterBefore\";\n        ExtensionLineType[ExtensionLineType[\"VerticalCenterAfter\"] = 19] = \"VerticalCenterAfter\";\n        ExtensionLineType[ExtensionLineType[\"VerticalCenterToPageCenter\"] = 20] = \"VerticalCenterToPageCenter\";\n        ExtensionLineType[ExtensionLineType[\"HorizontalCenterToPageCenter\"] = 21] = \"HorizontalCenterToPageCenter\";\n        ExtensionLineType[ExtensionLineType[\"LeftToPageCenter\"] = 22] = \"LeftToPageCenter\";\n        ExtensionLineType[ExtensionLineType[\"RightToPageCenter\"] = 23] = \"RightToPageCenter\";\n        ExtensionLineType[ExtensionLineType[\"TopToPageCenter\"] = 24] = \"TopToPageCenter\";\n        ExtensionLineType[ExtensionLineType[\"BottomToPageCenter\"] = 25] = \"BottomToPageCenter\";\n      })(ExtensionLineType = exports.ExtensionLineType || (exports.ExtensionLineType = {}));\n\n      var ExtensionLine =\n      /** @class */\n      function () {\n        function ExtensionLine(type, segment, text) {\n          this.type = type;\n          this.segment = segment;\n          this.text = text;\n        }\n\n        return ExtensionLine;\n      }();\n\n      exports.ExtensionLine = ExtensionLine;\n\n      var ExtensionLinesVisualizer =\n      /** @class */\n      function () {\n        function ExtensionLinesVisualizer(dispatcher) {\n          this.dispatcher = dispatcher;\n          this.lines = [];\n          this.lineIndexByType = {};\n        }\n\n        ExtensionLinesVisualizer.prototype.addSegment = function (type, segment, text) {\n          var curIndex = this.lineIndexByType[type];\n\n          if (curIndex === undefined) {\n            var line = new ExtensionLine(type, segment, text);\n            var index = this.lines.push(line);\n            this.lineIndexByType[line.type] = index - 1;\n            this.raiseShow();\n          } else if (segment.length < this.lines[curIndex].segment.length) {\n            var line = new ExtensionLine(type, segment, text);\n            this.lines.splice(curIndex, 1, line);\n            this.raiseShow();\n          }\n        };\n\n        ExtensionLinesVisualizer.prototype.update = function () {\n          this.raiseShow();\n        };\n\n        ExtensionLinesVisualizer.prototype.reset = function () {\n          if (this.lines.length) {\n            this.lines = [];\n            this.lineIndexByType = {};\n            this.raiseHide();\n          }\n        };\n\n        ExtensionLinesVisualizer.prototype.raiseShow = function () {\n          var _this = this;\n\n          this.dispatcher.raise1(function (l) {\n            return l.notifyExtensionLinesShow(_this.lines);\n          });\n        };\n\n        ExtensionLinesVisualizer.prototype.raiseHide = function () {\n          this.dispatcher.raise1(function (l) {\n            return l.notifyExtensionLinesHide();\n          });\n        };\n\n        return ExtensionLinesVisualizer;\n      }();\n\n      exports.ExtensionLinesVisualizer = ExtensionLinesVisualizer;\n      /***/\n    },\n    /* 160 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics90 = function extendStatics(d, b) {\n          _extendStatics90 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics90(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics90(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.CanvasSelectionManager = exports.ACTIVE_SELECTION_CSSCLASS = exports.SELECTION_ELEMENT_CLASSNAMES = void 0;\n\n      var CanvasManagerBase_1 = __webpack_require__(41);\n\n      var GroupPrimitive_1 = __webpack_require__(38);\n\n      var Utils_1 = __webpack_require__(18);\n\n      var Event_1 = __webpack_require__(11);\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      var Utils_2 = __webpack_require__(3);\n\n      var point_1 = __webpack_require__(1);\n\n      var ExtensionLinesVisualizer_1 = __webpack_require__(159);\n\n      var Shape_1 = __webpack_require__(14);\n\n      var Connector_1 = __webpack_require__(7);\n\n      var ConnectorProperties_1 = __webpack_require__(31);\n\n      var RectaglePrimitive_1 = __webpack_require__(21);\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var TextPrimitive_1 = __webpack_require__(60);\n\n      var EllipsePrimitive_1 = __webpack_require__(52);\n\n      var Style_1 = __webpack_require__(30);\n\n      var unit_converter_1 = __webpack_require__(12);\n\n      var ITextMeasurer_1 = __webpack_require__(42);\n\n      var browser_1 = __webpack_require__(17);\n\n      var dom_1 = __webpack_require__(26);\n\n      var CanvasItemsManager_1 = __webpack_require__(76);\n\n      var CanvasManager_1 = __webpack_require__(141);\n\n      var metrics_1 = __webpack_require__(83);\n\n      var MULTIPLE_SELECTION_KEY = \"-1\";\n      exports.SELECTION_ELEMENT_CLASSNAMES = {\n        SELECTION_RECTANGLE: \"selection-rect\",\n        CONNECTION_POINT: \"connection-point\",\n        ACTIVE: \"active\",\n        CONTAINER_TARGET: \"container-target\",\n        CONNECTION_TARGET: \"connection-target\",\n        EXTENSION_LINE: \"extension-line\",\n        CONNECTION_MARK: \"connection-mark\",\n        SELECTION_MARK: \"selection-mark\",\n        LOCKED_SELECTION_MARK: \"locked-selection-mark\",\n        ITEMS_SELECTION_RECT: \"items-selection-rect\",\n        CONNECTOR_MULTI_SELECTION: \"connector-multi-selection\",\n        CONNECTOR_SELECTION: \"connector-selection\",\n        CONNECTOR_POINT_MARK: \"connector-point-mark\",\n        CONNECTOR_SELECTION_MASK: \"connector-selection-mask\",\n        CONNECTOR_SIDE_MARK: \"connector-side-mark\",\n        ITEM_SELECTION_RECT: \"item-selection-rect\",\n        ITEM_MULTI_SELECTION: \"item-multi-selection-rect\"\n      };\n      exports.ACTIVE_SELECTION_CSSCLASS = \"dxdi-active-selection\";\n\n      var CanvasSelectionManager =\n      /** @class */\n      function (_super) {\n        __extends(CanvasSelectionManager, _super);\n\n        function CanvasSelectionManager(parent, zoomLevel, readOnly, dom) {\n          var _this = _super.call(this, zoomLevel, dom) || this;\n\n          _this.readOnly = readOnly;\n          _this.connectionPointElements = [];\n          _this.extensionLineElements = [];\n          _this.selectionMap = {};\n          _this.parentContainer = parent;\n\n          _this.initializeContainerElements(parent);\n\n          return _this;\n        }\n\n        CanvasSelectionManager.prototype.initializeContainerElements = function (parent) {\n          this.itemSelectionContainer = this.createAndChangePrimitiveElement(new GroupPrimitive_1.GroupPrimitive([], null), parent);\n          this.visualizersContainer = this.createAndChangePrimitiveElement(new GroupPrimitive_1.GroupPrimitive([], null), parent);\n          this.selectionMarksContainer = this.createAndChangePrimitiveElement(new GroupPrimitive_1.GroupPrimitive([], null), parent);\n        };\n\n        CanvasSelectionManager.prototype.clear = function () {\n          Utils_1.RenderUtils.removeContent(this.itemSelectionContainer);\n          Utils_1.RenderUtils.removeContent(this.selectionMarksContainer);\n          Utils_1.RenderUtils.removeContent(this.visualizersContainer);\n          this.selectionRectElement = undefined;\n          this.resizeInfoElement = undefined;\n          this.connectionPointElements = [];\n          this.connectionTargetElement = undefined;\n          this.containerTargetElement = undefined;\n          this.extensionLineElements = [];\n          this.selectionMap = {};\n        };\n\n        CanvasSelectionManager.prototype.showSelectionRect = function (rect) {\n          dom_1.DomUtils.addClassName(this.parentContainer, exports.ACTIVE_SELECTION_CSSCLASS);\n          var primitive = new RectaglePrimitive_1.RectanglePrimitive(rect.x, rect.y, rect.width, rect.height, Style_1.StrokeStyle.default1pxInstance, exports.SELECTION_ELEMENT_CLASSNAMES.SELECTION_RECTANGLE);\n          var rectEl = this.getSelectionRectElement(primitive);\n          this.changePrimitiveElement(primitive, rectEl);\n        };\n\n        CanvasSelectionManager.prototype.hideSelectionRect = function () {\n          dom_1.DomUtils.removeClassName(this.parentContainer, exports.ACTIVE_SELECTION_CSSCLASS);\n          if (this.selectionRectElement !== undefined) this.dom.changeByFunc(this.selectionRectElement, function (e) {\n            return e.style.display = \"none\";\n          });\n        };\n\n        CanvasSelectionManager.prototype.getSelectionRectElement = function (primitive) {\n          if (this.selectionRectElement !== undefined) this.dom.changeByFunc(this.selectionRectElement, function (e) {\n            return e.style.display = \"\";\n          });else this.selectionRectElement = this.createPrimitiveElement(primitive, this.visualizersContainer);\n          return this.selectionRectElement;\n        };\n\n        CanvasSelectionManager.prototype.showResizeInfo = function (point, text) {\n          var rectPrimitive = new RectaglePrimitive_1.RectanglePrimitive(point.x, point.y, 0, 0, Style_1.StrokeStyle.default1pxInstance);\n          var primitive = new GroupPrimitive_1.GroupPrimitive([rectPrimitive, new TextPrimitive_1.TextPrimitive(point.x, point.y, text, ITextMeasurer_1.TextOwner.Resize)], \"resize-info\");\n          var groupEl = this.getResizeInfoElement(primitive);\n          this.changePrimitiveElement(primitive, groupEl);\n          var textSize = this.dom.measurer.measureTextLine(text, null, ITextMeasurer_1.TextOwner.Resize).applyConverter(unit_converter_1.UnitConverter.pixelsToTwips);\n          rectPrimitive.width = textSize.width + CanvasSelectionManager.resizeInfoTextOffset * 2;\n          rectPrimitive.height = textSize.height + CanvasSelectionManager.resizeInfoTextOffset * 2;\n          rectPrimitive.x = point.x - textSize.width / 2 - CanvasSelectionManager.resizeInfoTextOffset;\n          rectPrimitive.y = point.y - textSize.height / 2 - CanvasSelectionManager.resizeInfoTextOffset;\n          this.changePrimitiveElement(primitive, groupEl);\n        };\n\n        CanvasSelectionManager.prototype.hideResizeInfo = function () {\n          if (this.resizeInfoElement !== undefined) this.dom.changeByFunc(this.resizeInfoElement, function (e) {\n            return e.style.display = \"none\";\n          });\n        };\n\n        CanvasSelectionManager.prototype.getResizeInfoElement = function (primitive) {\n          if (this.resizeInfoElement !== undefined) this.dom.changeByFunc(this.resizeInfoElement, function (e) {\n            return e.style.display = \"\";\n          });else this.resizeInfoElement = this.createPrimitiveElement(primitive, this.visualizersContainer);\n          return this.resizeInfoElement;\n        };\n\n        CanvasSelectionManager.prototype.getConnectionPointClassName = function (active, allowed) {\n          var className = exports.SELECTION_ELEMENT_CLASSNAMES.CONNECTION_POINT;\n          if (active) className += \" \" + exports.SELECTION_ELEMENT_CLASSNAMES.ACTIVE;\n          if (!allowed) className += \" \" + CanvasItemsManager_1.NOT_VALID_CSSCLASS;\n          return className;\n        };\n\n        CanvasSelectionManager.prototype.showConnectionPoint = function (index, point, key, value, active, allowed) {\n          this.showConnectionPointCore(index * 2, point.x, point.y, CanvasSelectionManager.connectionPointLargeSize, CanvasSelectionManager.connectionPointLargeSize, Event_1.MouseEventElementType.ShapeConnectionPoint, key, value, exports.SELECTION_ELEMENT_CLASSNAMES.CONNECTION_POINT + \" selector\" + (!allowed ? \" \" + CanvasItemsManager_1.NOT_VALID_CSSCLASS : \"\"));\n          this.showConnectionPointCore(index * 2 + 1, point.x, point.y, CanvasSelectionManager.connectionPointSmallSize, CanvasSelectionManager.connectionPointSmallSize, Event_1.MouseEventElementType.ShapeConnectionPoint, key, value, this.getConnectionPointClassName(active, allowed));\n        };\n\n        CanvasSelectionManager.prototype.showConnectionPointCore = function (index, cx, cy, rx, ry, type, key, value, className) {\n          var primitive = new EllipsePrimitive_1.EllipsePrimitive(cx, cy, rx, ry, null, className, function (e) {\n            return Utils_1.RenderUtils.setElementEventData(e, type, key, value);\n          });\n          var ellEl = this.getConnectionPointElement(primitive, index);\n          this.changePrimitiveElement(primitive, ellEl);\n        };\n\n        CanvasSelectionManager.prototype.hideConnectionPoints = function () {\n          for (var i = 0; i < this.connectionPointElements.length; i++) {\n            this.dom.changeByFunc(this.connectionPointElements[i], function (e) {\n              return e.style.display = \"none\";\n            });\n          }\n        };\n\n        CanvasSelectionManager.prototype.getConnectionPointElement = function (primitive, index) {\n          var ellEl = this.connectionPointElements[index];\n          if (ellEl !== undefined) this.dom.changeByFunc(ellEl, function (e) {\n            return e.style.display = \"\";\n          });else {\n            ellEl = this.createPrimitiveElement(primitive, this.visualizersContainer);\n            this.connectionPointElements[index] = ellEl;\n          }\n          return ellEl;\n        };\n\n        CanvasSelectionManager.prototype.showContainerTarget = function (index, targetRect) {\n          var primitive = new RectaglePrimitive_1.RectanglePrimitive(targetRect.x, targetRect.y, targetRect.width, targetRect.height, null, exports.SELECTION_ELEMENT_CLASSNAMES.CONTAINER_TARGET);\n          var rectEl = this.getContainerTargetElement(primitive);\n          this.changePrimitiveElement(primitive, rectEl);\n        };\n\n        CanvasSelectionManager.prototype.hideContainerTarget = function () {\n          if (this.containerTargetElement) this.dom.changeByFunc(this.containerTargetElement, function (e) {\n            return e.style.display = \"none\";\n          });\n        };\n\n        CanvasSelectionManager.prototype.getContainerTargetElement = function (primitive) {\n          if (this.containerTargetElement !== undefined) this.dom.changeByFunc(this.containerTargetElement, function (e) {\n            return e.style.display = \"\";\n          });else this.containerTargetElement = this.createPrimitiveElement(primitive, this.itemSelectionContainer);\n          return this.containerTargetElement;\n        };\n\n        CanvasSelectionManager.prototype.showConnectionTarget = function (index, targetRect) {\n          var primitive = new RectaglePrimitive_1.RectanglePrimitive(targetRect.x, targetRect.y, targetRect.width, targetRect.height, null, exports.SELECTION_ELEMENT_CLASSNAMES.CONNECTION_TARGET);\n          var rectEl = this.getConnectionTargetElement(primitive);\n          this.changePrimitiveElement(primitive, rectEl);\n        };\n\n        CanvasSelectionManager.prototype.hideConnectionTarget = function () {\n          if (this.connectionTargetElement) this.dom.changeByFunc(this.connectionTargetElement, function (e) {\n            return e.style.display = \"none\";\n          });\n        };\n\n        CanvasSelectionManager.prototype.getConnectionTargetElement = function (primitive) {\n          if (this.connectionTargetElement !== undefined) this.dom.changeByFunc(this.connectionTargetElement, function (e) {\n            return e.style.display = \"\";\n          });else this.connectionTargetElement = this.createPrimitiveElement(primitive, this.itemSelectionContainer);\n          return this.connectionTargetElement;\n        };\n\n        CanvasSelectionManager.prototype.showExtensionLine = function (index, type, startPoint, endPoint, text) {\n          var className = exports.SELECTION_ELEMENT_CLASSNAMES.EXTENSION_LINE;\n          if (type === ExtensionLinesVisualizer_1.ExtensionLineType.VerticalCenterAfter || type === ExtensionLinesVisualizer_1.ExtensionLineType.VerticalCenterBefore || type === ExtensionLinesVisualizer_1.ExtensionLineType.HorizontalCenterAbove || type === ExtensionLinesVisualizer_1.ExtensionLineType.HorizontalCenterBelow) className += \" center\";\n          if (type === ExtensionLinesVisualizer_1.ExtensionLineType.VerticalCenterToPageCenter || type === ExtensionLinesVisualizer_1.ExtensionLineType.HorizontalCenterToPageCenter || type === ExtensionLinesVisualizer_1.ExtensionLineType.LeftToPageCenter || type === ExtensionLinesVisualizer_1.ExtensionLineType.RightToPageCenter || type === ExtensionLinesVisualizer_1.ExtensionLineType.TopToPageCenter || type === ExtensionLinesVisualizer_1.ExtensionLineType.BottomToPageCenter) className += \" page\";\n          var x1_1 = 0;\n          var y1_1 = 0;\n          var x1_2 = 0;\n          var y1_2 = 0;\n          var x2_1 = 0;\n          var y2_1 = 0;\n          var x2_2 = 0;\n          var y2_2 = 0;\n\n          if (startPoint.y === endPoint.y) {\n            x1_1 = startPoint.x - CanvasSelectionManager.extensionLineWidth;\n            y1_1 = startPoint.y - CanvasSelectionManager.extensionLineEndingSize;\n            x1_2 = startPoint.x - CanvasSelectionManager.extensionLineWidth;\n            y1_2 = startPoint.y + CanvasSelectionManager.extensionLineEndingSize;\n            x2_1 = endPoint.x - CanvasSelectionManager.extensionLineWidth;\n            y2_1 = startPoint.y - CanvasSelectionManager.extensionLineEndingSize;\n            x2_2 = endPoint.x - CanvasSelectionManager.extensionLineWidth;\n            y2_2 = startPoint.y + CanvasSelectionManager.extensionLineEndingSize;\n          } else if (startPoint.x === endPoint.x) {\n            x1_1 = startPoint.x - CanvasSelectionManager.extensionLineEndingSize;\n            y1_1 = startPoint.y - CanvasSelectionManager.extensionLineWidth;\n            x1_2 = startPoint.x + CanvasSelectionManager.extensionLineEndingSize;\n            y1_2 = startPoint.y - CanvasSelectionManager.extensionLineWidth;\n            x2_1 = startPoint.x - CanvasSelectionManager.extensionLineEndingSize;\n            y2_1 = endPoint.y - CanvasSelectionManager.extensionLineWidth;\n            x2_2 = startPoint.x + CanvasSelectionManager.extensionLineEndingSize;\n            y2_2 = endPoint.y - CanvasSelectionManager.extensionLineWidth;\n          }\n\n          var sizeLineXCorr = 0;\n          var sizeLineYCorr = 0;\n          if (type === ExtensionLinesVisualizer_1.ExtensionLineType.RightToRightAbove || type === ExtensionLinesVisualizer_1.ExtensionLineType.RightToRightBelow) sizeLineXCorr -= CanvasSelectionManager.extensionLineWidth;\n          if (type === ExtensionLinesVisualizer_1.ExtensionLineType.BottomToBottomAfter || type === ExtensionLinesVisualizer_1.ExtensionLineType.BottomToBottomBefore) sizeLineYCorr -= CanvasSelectionManager.extensionLineWidth;\n          var children = [new PathPrimitive_1.PathPrimitive([PathPrimitive_1.PathPrimitiveMoveToCommand.fromPoint(startPoint.clone().offset(sizeLineXCorr, sizeLineYCorr)), PathPrimitive_1.PathPrimitiveLineToCommand.fromPoint(endPoint.clone().offset(sizeLineXCorr, sizeLineYCorr))], Style_1.StrokeStyle.default1pxInstance, \"size-line\"), new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(x1_1, y1_1), new PathPrimitive_1.PathPrimitiveLineToCommand(x1_2, y1_2), new PathPrimitive_1.PathPrimitiveMoveToCommand(x2_1, y2_1), new PathPrimitive_1.PathPrimitiveLineToCommand(x2_2, y2_2)], Style_1.StrokeStyle.default1pxInstance), new TextPrimitive_1.TextPrimitive((endPoint.x + startPoint.x) / 2, (endPoint.y + startPoint.y) / 2, text, ITextMeasurer_1.TextOwner.ExtensionLine, undefined, undefined, undefined, null, undefined, null, CanvasManagerBase_1.PAGE_BG_TEXTFLOOR_FILTER_ID)];\n          var primitive = new GroupPrimitive_1.GroupPrimitive(children, className);\n          var ellEl = this.getExtensionLineElement(primitive, index);\n          this.changePrimitiveElement(primitive, ellEl);\n        };\n\n        CanvasSelectionManager.prototype.hideExtensionLines = function () {\n          for (var i = 0; i < this.extensionLineElements.length; i++) {\n            if (this.extensionLineElements[i]) this.dom.changeByFunc(this.extensionLineElements[i], function (e) {\n              return e.style.display = \"none\";\n            });\n          }\n        };\n\n        CanvasSelectionManager.prototype.getExtensionLineElement = function (primitive, index) {\n          var ellEl = this.extensionLineElements[index];\n          if (ellEl !== undefined) this.dom.changeByFunc(ellEl, function (e) {\n            return e.style.display = \"\";\n          });else {\n            ellEl = this.createPrimitiveElement(primitive, this.visualizersContainer);\n            this.extensionLineElements[index] = ellEl;\n          }\n          return ellEl;\n        };\n\n        CanvasSelectionManager.prototype.getOrCreateShapeSelection = function (shape, usedItems) {\n          var element = this.selectionMap[shape.key];\n\n          if (!element) {\n            element = new ShapeSelectionElement(this.itemSelectionContainer, this.selectionMarksContainer, this.actualZoom, this.readOnly, this.dom, shape.key, shape.isLocked, shape.rectangle, shape.style, shape.allowResizeHorizontally, shape.allowResizeVertically, shape.description.getParameterPoints(shape));\n            this.selectionMap[shape.key] = element;\n          }\n\n          usedItems && (usedItems[shape.key] = true);\n          return element;\n        };\n\n        CanvasSelectionManager.prototype.getOrCreateConnectorSelection = function (connector, usedItems) {\n          var element = this.selectionMap[connector.key];\n          var points = connector.getRenderPoints();\n\n          if (!element) {\n            element = new ConnectorSelectionElement(this.itemSelectionContainer, this.selectionMarksContainer, this.actualZoom, this.readOnly, this.dom, connector.key, connector.isLocked, connector.rectangle, points, connector.style, connector.styleText, connector.enableText, connector.texts.map(function (t) {\n              var textInfo = Utils_2.GeometryUtils.getPathPointByPosition(points, t.position);\n              return {\n                text: connector.getText(t.position),\n                point: textInfo[0],\n                pointIndex: textInfo[1],\n                pos: t.position\n              };\n            }).sort(function (a, b) {\n              return a.pos - b.pos;\n            }), connector.points, connector.properties.lineOption);\n            this.selectionMap[connector.key] = element;\n          }\n\n          usedItems && (usedItems[connector.key] = true);\n          return element;\n        };\n\n        CanvasSelectionManager.prototype.getOrCreateMultipleSelection = function (usedItems) {\n          var element = this.selectionMap[MULTIPLE_SELECTION_KEY];\n\n          if (!element) {\n            element = new MultipleSelectionElement(this.itemSelectionContainer, this.selectionMarksContainer, this.actualZoom, this.readOnly, this.dom);\n            this.selectionMap[MULTIPLE_SELECTION_KEY] = element;\n          }\n\n          usedItems[MULTIPLE_SELECTION_KEY] = true;\n          return element;\n        };\n\n        CanvasSelectionManager.prototype.getMultipleSelection = function () {\n          return this.selectionMap[MULTIPLE_SELECTION_KEY];\n        };\n\n        CanvasSelectionManager.prototype.updateShapeSelection = function (shape, multipleSelection) {\n          if (shape.key in this.selectionMap) {\n            this.getOrCreateShapeSelection(shape).onModelChanged(shape.isLocked, shape.rectangle, shape.style, shape.allowResizeHorizontally, shape.allowResizeVertically, shape.description.getParameterPoints(shape));\n            multipleSelection && multipleSelection.onModelItemChanged(shape.key, shape.rectangle);\n          }\n        };\n\n        CanvasSelectionManager.prototype.updateConnectorSelection = function (connector, multipleSelection) {\n          if (connector.key in this.selectionMap) {\n            var renderPoints_1 = connector.getRenderPoints();\n            this.getOrCreateConnectorSelection(connector).onModelChanged(connector.isLocked, connector.rectangle, renderPoints_1, connector.style, connector.styleText, connector.enableText, connector.texts.map(function (t) {\n              var textPos = Utils_2.GeometryUtils.getPathPointByPosition(renderPoints_1, t.position);\n              return {\n                text: connector.getText(t.position),\n                pointIndex: textPos[1],\n                pos: t.position,\n                point: textPos[0]\n              };\n            }).sort(function (a, b) {\n              return a.pos - b.pos;\n            }), connector.points, connector.properties.lineOption);\n            multipleSelection && multipleSelection.onModelItemChanged(connector.key, connector.rectangle);\n          }\n        };\n\n        CanvasSelectionManager.prototype.hideOutdatedSelection = function (updated) {\n          var _this = this;\n\n          Object.keys(this.selectionMap).filter(function (k) {\n            return !updated[k];\n          }).forEach(function (k) {\n            _this.selectionMap[k].destroy();\n\n            delete _this.selectionMap[k];\n          });\n        };\n\n        CanvasSelectionManager.prototype.selectionCanBeDrawn = function (item) {\n          return !item.container || item.container.expanded && this.selectionCanBeDrawn(item.container);\n        };\n\n        CanvasSelectionManager.prototype.notifySelectionChanged = function (selection) {\n          var _this = this;\n\n          var items = selection.getSelectedItems(true).filter(function (item) {\n            return _this.selectionCanBeDrawn(item);\n          });\n          var changedItems = {};\n          var isMultipleSelection = items.length > 1;\n          var shapes = selection.getSelectedShapes(true).filter(function (shape) {\n            return _this.selectionCanBeDrawn(shape);\n          });\n          var connectors = selection.getSelectedConnectors(true).filter(function (connector) {\n            return _this.selectionCanBeDrawn(connector);\n          });\n          shapes.forEach(function (shape) {\n            return _this.getOrCreateShapeSelection(shape, changedItems).onSelectionChanged(isMultipleSelection);\n          });\n          connectors.forEach(function (connector) {\n            return _this.getOrCreateConnectorSelection(connector, changedItems).onSelectionChanged(isMultipleSelection);\n          });\n\n          if (isMultipleSelection) {\n            var strokeWidth = items.length > 0 ? items[0].strokeWidth : 0;\n            var rectangles_1 = {};\n            items.filter(function (i) {\n              return !i.isLocked;\n            }).forEach(function (item) {\n              return rectangles_1[item.key] = item.rectangle;\n            });\n            this.getOrCreateMultipleSelection(changedItems).onSelectionChanged(!!shapes.filter(function (i) {\n              return !i.isLocked;\n            }).length, strokeWidth, rectangles_1);\n          }\n\n          this.hideOutdatedSelection(changedItems);\n        };\n\n        CanvasSelectionManager.prototype.applyChangesCore = function (changes) {\n          _super.prototype.applyChangesCore.call(this, changes);\n\n          var multipleSelection = this.getMultipleSelection();\n          multipleSelection && multipleSelection.onModelChanged();\n        };\n\n        CanvasSelectionManager.prototype.applyChange = function (change) {\n          var multipleSelection = this.getMultipleSelection();\n          if (change.item instanceof Shape_1.Shape) this.updateShapeSelection(change.item, multipleSelection);else if (change.item instanceof Connector_1.Connector) this.updateConnectorSelection(change.item, multipleSelection);\n        };\n\n        CanvasSelectionManager.prototype.notifyPageColorChanged = function (color) {};\n\n        CanvasSelectionManager.prototype.notifyPageSizeChanged = function (pageSize, pageLandscape) {};\n\n        CanvasSelectionManager.prototype.notifyActualZoomChanged = function (actualZoom) {\n          var _this = this;\n\n          Object.keys(this.selectionMap).forEach(function (k) {\n            return _this.selectionMap[k].notifyZoomChanged(actualZoom);\n          });\n          this.actualZoom = actualZoom;\n        };\n\n        CanvasSelectionManager.prototype.notifyViewAdjusted = function (canvasOffset) {};\n\n        CanvasSelectionManager.prototype.notifyReadOnlyChanged = function (readOnly) {\n          var _this = this;\n\n          this.readOnly = readOnly;\n          Object.keys(this.selectionMap).forEach(function (k) {\n            return _this.selectionMap[k].notifyReadOnlyChanged(readOnly);\n          });\n        };\n\n        CanvasSelectionManager.prototype.notifySelectionRectShow = function (rect) {\n          this.showSelectionRect(rect.clone().multiply(this.actualZoom, this.actualZoom));\n        };\n\n        CanvasSelectionManager.prototype.notifySelectionRectHide = function () {\n          this.hideSelectionRect();\n        };\n\n        CanvasSelectionManager.prototype.notifyResizeInfoShow = function (point, text) {\n          this.showResizeInfo(point.clone().multiply(this.actualZoom, this.actualZoom), text);\n        };\n\n        CanvasSelectionManager.prototype.notifyResizeInfoHide = function () {\n          this.hideResizeInfo();\n        };\n\n        CanvasSelectionManager.prototype.notifyConnectionPointsShow = function (key, points, activePointIndex, outsideRectangle) {\n          var _this = this;\n\n          this.hideConnectionPoints();\n          points.forEach(function (p, index) {\n            var point = p.point.clone().multiply(_this.actualZoom, _this.actualZoom);\n            if (outsideRectangle) switch (p.side) {\n              case DiagramItem_1.ConnectionPointSide.North:\n                point.y = outsideRectangle.y * _this.actualZoom - CanvasSelectionManager.connectionPointShift;\n                break;\n\n              case DiagramItem_1.ConnectionPointSide.South:\n                point.y = outsideRectangle.bottom * _this.actualZoom + CanvasSelectionManager.connectionPointShift;\n                break;\n\n              case DiagramItem_1.ConnectionPointSide.West:\n                point.x = outsideRectangle.x * _this.actualZoom - CanvasSelectionManager.connectionPointShift;\n                break;\n\n              case DiagramItem_1.ConnectionPointSide.East:\n                point.x = outsideRectangle.right * _this.actualZoom + CanvasSelectionManager.connectionPointShift;\n                break;\n            }\n\n            _this.showConnectionPoint(index, point, key, index, index === activePointIndex, p.allowed);\n          });\n        };\n\n        CanvasSelectionManager.prototype.notifyConnectionPointsHide = function () {\n          this.hideConnectionPoints();\n        };\n\n        CanvasSelectionManager.prototype.notifyConnectionTargetShow = function (key, info) {\n          if (!info.allowed) return;\n          var rect = CanvasSelectionManager.correctSelectionRect(info.rect.clone().multiply(this.actualZoom, this.actualZoom), info.strokeWidth, CanvasSelectionManager.connectionTargetBorderWidth, this.actualZoom, 0);\n          this.showConnectionTarget(0, rect);\n        };\n\n        CanvasSelectionManager.prototype.notifyConnectionTargetHide = function () {\n          this.hideConnectionTarget();\n        };\n\n        CanvasSelectionManager.prototype.notifyContainerTargetShow = function (key, info) {\n          var rect = CanvasSelectionManager.correctSelectionRect(info.rect.clone().multiply(this.actualZoom, this.actualZoom), info.strokeWidth, CanvasSelectionManager.connectionTargetBorderWidth, this.actualZoom, 0);\n          this.showContainerTarget(0, rect);\n        };\n\n        CanvasSelectionManager.prototype.notifyContainerTargetHide = function () {\n          this.hideContainerTarget();\n        };\n\n        CanvasSelectionManager.prototype.notifyExtensionLinesShow = function (lines) {\n          var _this = this;\n\n          this.hideExtensionLines();\n          lines.forEach(function (line, index) {\n            _this.showExtensionLine(index, line.type, line.segment.startPoint.clone().multiply(_this.actualZoom, _this.actualZoom), line.segment.endPoint.clone().multiply(_this.actualZoom, _this.actualZoom), line.text);\n          });\n        };\n\n        CanvasSelectionManager.prototype.notifyExtensionLinesHide = function () {\n          this.hideExtensionLines();\n        };\n\n        CanvasSelectionManager.prototype.notifyDragStart = function (itemKeys) {\n          this.dom.changeByFunc(this.selectionMarksContainer, function (e) {\n            return e.style.display = \"none\";\n          });\n        };\n\n        CanvasSelectionManager.prototype.notifyDragEnd = function (itemKeys) {\n          this.dom.changeByFunc(this.selectionMarksContainer, function (e) {\n            return e.style.display = \"\";\n          });\n        };\n\n        CanvasSelectionManager.prototype.notifyDragScrollStart = function () {};\n\n        CanvasSelectionManager.prototype.notifyDragScrollEnd = function () {};\n\n        CanvasSelectionManager.prototype.notifyTextInputStart = function (item, text, position, size) {\n          this.dom.changeByFunc(this.visualizersContainer, function (e) {\n            return e.style.display = \"none\";\n          });\n        };\n\n        CanvasSelectionManager.prototype.notifyTextInputEnd = function (item) {\n          this.dom.changeByFunc(this.visualizersContainer, function (e) {\n            return e.style.display = \"\";\n          });\n        };\n\n        CanvasSelectionManager.prototype.notifyTextInputPermissionsCheck = function (item, allowed) {};\n\n        CanvasSelectionManager.correctSelectionRect = function (rect, targetLineWidth, selectionLineWidth, zoomLevel, outsideOffset) {\n          if (outsideOffset === void 0) {\n            outsideOffset = CanvasSelectionManager.selectionOffset;\n          }\n\n          var evenOddWidth = unit_converter_1.UnitConverter.twipsToPixels(targetLineWidth) % 2 !== unit_converter_1.UnitConverter.twipsToPixels(selectionLineWidth) % 2;\n          var corr = Math.ceil(targetLineWidth / 2 * zoomLevel);\n          rect = rect.clone().inflate(corr, corr);\n          var lwCorr = Math.floor(selectionLineWidth / 2);\n          rect.x -= lwCorr;\n          rect.y -= lwCorr;\n          rect.width += selectionLineWidth;\n          rect.height += selectionLineWidth;\n\n          if (evenOddWidth) {\n            var correction = CanvasSelectionManager.evenOddSelectionCorrection * (unit_converter_1.UnitConverter.twipsToPixels(selectionLineWidth) % 2 === 1 ? -1 : 1);\n            rect = rect.clone().moveRectangle(correction, correction);\n          }\n\n          return rect.clone().inflate(outsideOffset, outsideOffset);\n        };\n\n        CanvasSelectionManager.selectionMarkSize = unit_converter_1.UnitConverter.pixelsToTwips(10);\n        CanvasSelectionManager.lockedSelectionMarkSize = unit_converter_1.UnitConverter.pixelsToTwips(8);\n        CanvasSelectionManager.selectionOffset = unit_converter_1.UnitConverter.pixelsToTwips(2);\n        CanvasSelectionManager.selectionRectLineWidth = unit_converter_1.UnitConverter.pixelsToTwips(1);\n        CanvasSelectionManager.multiSelectionRectLineWidth = unit_converter_1.UnitConverter.pixelsToTwips(1);\n        CanvasSelectionManager.connectionPointSmallSize = unit_converter_1.UnitConverter.pixelsToTwips(5);\n        CanvasSelectionManager.connectionPointLargeSize = unit_converter_1.UnitConverter.pixelsToTwips(12);\n        CanvasSelectionManager.connectionPointShift = unit_converter_1.UnitConverter.pixelsToTwips(16);\n        CanvasSelectionManager.connectionTargetBorderWidth = unit_converter_1.UnitConverter.pixelsToTwips(2);\n        CanvasSelectionManager.geomertyMarkSize = unit_converter_1.UnitConverter.pixelsToTwips(8);\n        CanvasSelectionManager.connectorPointMarkSize = unit_converter_1.UnitConverter.pixelsToTwips(6);\n        CanvasSelectionManager.connectorSideMarkSize = unit_converter_1.UnitConverter.pixelsToTwips(6);\n        CanvasSelectionManager.extensionLineWidth = unit_converter_1.UnitConverter.pixelsToTwips(1);\n        CanvasSelectionManager.extensionLineOffset = unit_converter_1.UnitConverter.pixelsToTwips(1);\n        CanvasSelectionManager.extensionLineEndingSize = unit_converter_1.UnitConverter.pixelsToTwips(6);\n        CanvasSelectionManager.resizeInfoOffset = unit_converter_1.UnitConverter.pixelsToTwips(16);\n        CanvasSelectionManager.resizeInfoTextOffset = unit_converter_1.UnitConverter.pixelsToTwips(2);\n        CanvasSelectionManager.resizeInfoLineWidth = unit_converter_1.UnitConverter.pixelsToTwips(1);\n        CanvasSelectionManager.evenOddSelectionCorrection = unit_converter_1.UnitConverter.pixelsToTwips(1);\n        return CanvasSelectionManager;\n      }(CanvasManager_1.CanvasManager);\n\n      exports.CanvasSelectionManager = CanvasSelectionManager;\n\n      var CanvasElement =\n      /** @class */\n      function () {\n        function CanvasElement(rectsContainer, marksContainer, key, zoomLevel, readOnly, dom) {\n          this.rectsContainer = rectsContainer;\n          this.marksContainer = marksContainer;\n          this.key = key;\n          this.zoomLevel = zoomLevel;\n          this.readOnly = readOnly;\n          this.dom = dom;\n          this.elements = {};\n          this.updatedElements = {};\n        }\n\n        CanvasElement.prototype.notifyZoomChanged = function (zoom) {\n          if (this.zoomLevel !== zoom) {\n            this.zoomLevel = zoom;\n            this.redraw();\n          }\n        };\n\n        CanvasElement.prototype.notifyReadOnlyChanged = function (readOnly) {\n          this.readOnly = readOnly;\n          this.redraw();\n        };\n\n        CanvasElement.prototype.destroy = function () {\n          var _this = this;\n\n          Object.keys(this.elements).forEach(function (key) {\n            _this.elements[key].parentNode.removeChild(_this.elements[key]);\n\n            delete _this.elements[key];\n          });\n        };\n\n        CanvasElement.prototype.redraw = function () {\n          var _this = this;\n\n          this.updatedElements = {};\n          this.redrawCore();\n          Object.keys(this.elements).filter(function (key) {\n            return !_this.updatedElements[key];\n          }).forEach(function (key) {\n            _this.elements[key].parentNode.removeChild(_this.elements[key]);\n\n            delete _this.elements[key];\n          });\n          this.updatedElements = {};\n        };\n\n        CanvasElement.prototype.drawSelectionMarks = function (rect, allowResizeHorizontally, allowResizeVertically) {\n          if (this.readOnly) return;\n          var hasEWMarks = allowResizeHorizontally && rect.height > CanvasSelectionManager.selectionMarkSize * 3;\n          var hasNSMarks = allowResizeVertically && rect.width > CanvasSelectionManager.selectionMarkSize * 3;\n          var hasCornerMarks = allowResizeHorizontally || allowResizeVertically;\n          if (hasCornerMarks) this.drawSelectionMark(0, new point_1.Point(rect.x, rect.y), CanvasSelectionManager.selectionMarkSize, Event_1.MouseEventElementType.ShapeResizeBox, Event_1.ResizeEventSource.ResizeBox_NW, exports.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK);\n          if (hasNSMarks && !browser_1.Browser.TouchUI) this.drawSelectionMark(1, new point_1.Point(rect.x + rect.width / 2, rect.y), CanvasSelectionManager.selectionMarkSize, Event_1.MouseEventElementType.ShapeResizeBox, Event_1.ResizeEventSource.ResizeBox_N, exports.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK);\n          if (hasCornerMarks) this.drawSelectionMark(2, new point_1.Point(rect.right, rect.y), CanvasSelectionManager.selectionMarkSize, Event_1.MouseEventElementType.ShapeResizeBox, Event_1.ResizeEventSource.ResizeBox_NE, exports.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK);\n          if (hasEWMarks && !browser_1.Browser.TouchUI) this.drawSelectionMark(3, new point_1.Point(rect.right, rect.y + rect.height / 2), CanvasSelectionManager.selectionMarkSize, Event_1.MouseEventElementType.ShapeResizeBox, Event_1.ResizeEventSource.ResizeBox_E, exports.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK);\n          if (hasCornerMarks) this.drawSelectionMark(4, new point_1.Point(rect.right, rect.bottom), CanvasSelectionManager.selectionMarkSize, Event_1.MouseEventElementType.ShapeResizeBox, Event_1.ResizeEventSource.ResizeBox_SE, exports.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK);\n          if (hasNSMarks && !browser_1.Browser.TouchUI) this.drawSelectionMark(5, new point_1.Point(rect.x + rect.width / 2, rect.bottom), CanvasSelectionManager.selectionMarkSize, Event_1.MouseEventElementType.ShapeResizeBox, Event_1.ResizeEventSource.ResizeBox_S, exports.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK);\n          if (hasCornerMarks) this.drawSelectionMark(6, new point_1.Point(rect.x, rect.bottom), CanvasSelectionManager.selectionMarkSize, Event_1.MouseEventElementType.ShapeResizeBox, Event_1.ResizeEventSource.ResizeBox_SW, exports.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK);\n          if (hasEWMarks && !browser_1.Browser.TouchUI) this.drawSelectionMark(7, new point_1.Point(rect.x, rect.y + rect.height / 2), CanvasSelectionManager.selectionMarkSize, Event_1.MouseEventElementType.ShapeResizeBox, Event_1.ResizeEventSource.ResizeBox_W, exports.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK);\n        };\n\n        CanvasElement.prototype.drawSelectionMark = function (index, point, size, type, value, className) {\n          var _this = this;\n\n          this.getOrCreateElement(\"SM\" + index, new RectaglePrimitive_1.RectanglePrimitive(point.x - size / 2, point.y - size / 2, size, size, null, className, undefined, function (el) {\n            Utils_1.RenderUtils.setElementEventData(el, type, _this.key, value);\n          }), this.marksContainer);\n        };\n\n        CanvasElement.prototype.drawSelectionRect = function (rectangle, type, className) {\n          var primitive = new RectaglePrimitive_1.RectanglePrimitive(rectangle.x, rectangle.y, rectangle.width, rectangle.height, Style_1.StrokeStyle.default1pxInstance, className, undefined, function (el) {\n            Utils_1.RenderUtils.setElementEventData(el, type, \"-1\", -1);\n          });\n          this.getOrCreateElement(\"shapeSelection\", primitive, this.rectsContainer);\n        };\n\n        CanvasElement.prototype.getOrCreateElement = function (cacheKey, primitive, container) {\n          var element = this.elements[cacheKey];\n\n          if (!element) {\n            element = primitive.createElement(function (el) {\n              return container.appendChild(el);\n            });\n            this.elements[cacheKey] = element;\n          }\n\n          this.updatedElements[cacheKey] = true;\n          this.dom.changeByPrimitive(element, primitive);\n          return element;\n        };\n\n        return CanvasElement;\n      }();\n\n      var ItemSelectionElement =\n      /** @class */\n      function (_super) {\n        __extends(ItemSelectionElement, _super);\n\n        function ItemSelectionElement(rectsContainer, marksContainer, key, zoomLevel, readOnly, dom, isLocked, rectangle) {\n          var _this = _super.call(this, rectsContainer, marksContainer, key, zoomLevel, readOnly, dom) || this;\n\n          _this.isLocked = isLocked;\n          _this.rectangle = rectangle;\n          return _this;\n        }\n\n        ItemSelectionElement.prototype.onSelectionChanged = function (isMultipleSelection) {\n          if (this.isMultipleSelection !== isMultipleSelection) {\n            this.isMultipleSelection = isMultipleSelection;\n            this.redraw();\n          }\n        };\n\n        ItemSelectionElement.prototype.isLockedRender = function () {\n          return this.isLocked && !this.readOnly;\n        };\n\n        ItemSelectionElement.prototype.drawLockedSelectionMark = function (index, point, size, className) {\n          var primitive = new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(point.x - size / 2, point.y - size / 2), new PathPrimitive_1.PathPrimitiveLineToCommand(point.x + size / 2, point.y + size / 2), new PathPrimitive_1.PathPrimitiveMoveToCommand(point.x + size / 2, point.y - size / 2), new PathPrimitive_1.PathPrimitiveLineToCommand(point.x - size / 2, point.y + size / 2)], null, className);\n          this.getOrCreateElement(\"LSM\" + index, primitive, this.marksContainer);\n        };\n\n        return ItemSelectionElement;\n      }(CanvasElement);\n\n      var MultipleSelectionElement =\n      /** @class */\n      function (_super) {\n        __extends(MultipleSelectionElement, _super);\n\n        function MultipleSelectionElement(rectsContainer, marksContainer, zoomLevel, readOnly, dom) {\n          var _this = _super.call(this, rectsContainer, marksContainer, \"-1\", zoomLevel, readOnly, dom) || this;\n\n          _this.rectangles = {};\n          return _this;\n        }\n\n        MultipleSelectionElement.prototype.onModelItemChanged = function (key, rectangle) {\n          if (key in this.rectangles) this.rectangles[key] = rectangle;\n        };\n\n        MultipleSelectionElement.prototype.onModelChanged = function () {\n          this.redraw();\n        };\n\n        MultipleSelectionElement.prototype.onSelectionChanged = function (needDrawSelectionMarks, strokeWidth, rectangles) {\n          this.needDrawSelectionMarks = needDrawSelectionMarks;\n          this.strokeWidth = strokeWidth;\n          this.rectangles = rectangles;\n          this.redraw();\n        };\n\n        MultipleSelectionElement.prototype.redrawCore = function () {\n          var _this = this;\n\n          var rectKeys = Object.keys(this.rectangles);\n          if (!rectKeys.length) return;\n          var rect = Utils_2.GeometryUtils.getCommonRectangle(rectKeys.map(function (key) {\n            return _this.rectangles[key];\n          })).clone().multiply(this.zoomLevel, this.zoomLevel);\n          var selRect = CanvasSelectionManager.correctSelectionRect(rect, this.strokeWidth, CanvasSelectionManager.selectionRectLineWidth, this.zoomLevel);\n          this.drawSelectionRect(selRect, Event_1.MouseEventElementType.SelectionRect, exports.SELECTION_ELEMENT_CLASSNAMES.ITEMS_SELECTION_RECT);\n          if (this.needDrawSelectionMarks) this.drawSelectionMarks(rect, true, true);\n        };\n\n        return MultipleSelectionElement;\n      }(CanvasElement);\n\n      var ShapeSelectionElement =\n      /** @class */\n      function (_super) {\n        __extends(ShapeSelectionElement, _super);\n\n        function ShapeSelectionElement(rectsContainer, marksContainer, zoomLevel, readOnly, dom, key, isLocked, rectangle, style, allowResizeHorizontally, allowResizeVertically, shapeParameterPoints) {\n          var _this = _super.call(this, rectsContainer, marksContainer, key, zoomLevel, readOnly, dom, isLocked, rectangle) || this;\n\n          _this.style = style;\n          _this.allowResizeHorizontally = allowResizeHorizontally;\n          _this.allowResizeVertically = allowResizeVertically;\n          _this.shapeParameterPoints = shapeParameterPoints;\n          return _this;\n        }\n\n        ShapeSelectionElement.prototype.onModelChanged = function (isLocked, rectangle, style, allowResizeHorizontally, allowResizeVertically, shapeParameterPoints) {\n          this.isLocked = isLocked;\n          this.rectangle = rectangle;\n          this.style = style;\n          this.allowResizeHorizontally = allowResizeHorizontally;\n          this.allowResizeVertically = allowResizeVertically;\n          this.shapeParameterPoints = shapeParameterPoints;\n          this.redraw();\n        };\n\n        ShapeSelectionElement.prototype.redrawCore = function () {\n          var rect = this.rectangle.clone().multiply(this.zoomLevel, this.zoomLevel);\n          if (this.isLockedRender()) this.drawLockedSelection(rect);else this.drawUnlockedSelection(rect);\n        };\n\n        ShapeSelectionElement.prototype.drawLockedSelection = function (rect) {\n          this.drawLockedSelectionMark(0, new point_1.Point(rect.x, rect.y), CanvasSelectionManager.lockedSelectionMarkSize, exports.SELECTION_ELEMENT_CLASSNAMES.LOCKED_SELECTION_MARK);\n          this.drawLockedSelectionMark(1, new point_1.Point(rect.right, rect.y), CanvasSelectionManager.lockedSelectionMarkSize, exports.SELECTION_ELEMENT_CLASSNAMES.LOCKED_SELECTION_MARK);\n          this.drawLockedSelectionMark(2, new point_1.Point(rect.right, rect.bottom), CanvasSelectionManager.lockedSelectionMarkSize, exports.SELECTION_ELEMENT_CLASSNAMES.LOCKED_SELECTION_MARK);\n          this.drawLockedSelectionMark(3, new point_1.Point(rect.x, rect.bottom), CanvasSelectionManager.lockedSelectionMarkSize, exports.SELECTION_ELEMENT_CLASSNAMES.LOCKED_SELECTION_MARK);\n        };\n\n        ShapeSelectionElement.prototype.drawUnlockedSelection = function (rect) {\n          var selRect = CanvasSelectionManager.correctSelectionRect(rect, this.style.strokeWidth, CanvasSelectionManager.selectionRectLineWidth, this.zoomLevel);\n          this.drawSelectionRect(selRect, Event_1.MouseEventElementType.SelectionRect, this.isMultipleSelection ? exports.SELECTION_ELEMENT_CLASSNAMES.ITEM_MULTI_SELECTION : exports.SELECTION_ELEMENT_CLASSNAMES.ITEM_SELECTION_RECT);\n          if (!this.isMultipleSelection) this.drawSelectionMarks(rect, this.allowResizeHorizontally, this.allowResizeVertically);\n          this.drawShapeParameterPoints();\n        };\n\n        ShapeSelectionElement.prototype.drawShapeParameterPoints = function () {\n          var _this = this;\n\n          if (this.readOnly) return;\n          this.shapeParameterPoints.forEach(function (pp, index) {\n            var point = pp.point.clone().multiply(_this.zoomLevel, _this.zoomLevel);\n\n            _this.drawShapeParameterPoint(point, index, pp.key);\n          });\n        };\n\n        ShapeSelectionElement.prototype.drawShapeParameterPoint = function (point, index, pointKey) {\n          var _this = this;\n\n          var size = CanvasSelectionManager.geomertyMarkSize;\n          var primitive = new RectaglePrimitive_1.RectanglePrimitive(point.x - size / 2, point.y - size / 2, size, size, null, \"geometry-mark\", undefined, function (el) {\n            Utils_1.RenderUtils.setElementEventData(el, Event_1.MouseEventElementType.ShapeParameterBox, _this.key, pointKey);\n          });\n          this.getOrCreateElement(\"pp\" + index.toString(), primitive, this.marksContainer);\n        };\n\n        return ShapeSelectionElement;\n      }(ItemSelectionElement);\n\n      var ConnectorSelectionElement =\n      /** @class */\n      function (_super) {\n        __extends(ConnectorSelectionElement, _super);\n\n        function ConnectorSelectionElement(rectsContainer, marksContainer, zoomLevel, readOnly, dom, key, isLocked, rectangle, renderPoints, style, styleText, enableText, texts, points, lineType) {\n          var _this = _super.call(this, rectsContainer, marksContainer, key, zoomLevel, readOnly, dom, isLocked, rectangle) || this;\n\n          _this.renderPoints = renderPoints;\n          _this.style = style;\n          _this.styleText = styleText;\n          _this.enableText = enableText;\n          _this.texts = texts;\n          _this.points = points;\n          _this.lineType = lineType;\n          return _this;\n        }\n\n        ConnectorSelectionElement.prototype.onModelChanged = function (isLocked, rectangle, renderPoints, style, styleText, enableText, texts, points, lineType) {\n          this.isLocked = isLocked;\n          this.rectangle = rectangle;\n          this.renderPoints = renderPoints;\n          this.style = style;\n          this.styleText = styleText;\n          this.enableText = enableText;\n          this.texts = texts;\n          this.points = points;\n          this.lineType = lineType;\n          this.redraw();\n        };\n\n        ConnectorSelectionElement.prototype.redrawCore = function () {\n          if (this.isLockedRender()) this.drawLockedSelection();else this.drawUnlockedSelection();\n        };\n\n        ConnectorSelectionElement.prototype.drawLockedSelection = function () {\n          var _this = this;\n\n          this.renderPoints.forEach(function (pt, index) {\n            _this.drawLockedSelectionMark(index, pt, CanvasSelectionManager.lockedSelectionMarkSize, exports.SELECTION_ELEMENT_CLASSNAMES.LOCKED_SELECTION_MARK);\n          });\n        };\n\n        ConnectorSelectionElement.prototype.drawUnlockedSelection = function () {\n          this.drawConnectorSelection(this.isMultipleSelection ? exports.SELECTION_ELEMENT_CLASSNAMES.CONNECTOR_MULTI_SELECTION : exports.SELECTION_ELEMENT_CLASSNAMES.CONNECTOR_SELECTION);\n          if (!this.isMultipleSelection && !this.readOnly) this.drawConnectorSelectionMarks();\n        };\n\n        ConnectorSelectionElement.prototype.drawConnectorSelection = function (className) {\n          var _a;\n\n          var texts = this.texts;\n          var textIndex = 0;\n          var txtAlign = this.styleText.getAlignment();\n          var commands = [];\n          var commandsWB = [];\n          var points = this.renderPoints;\n          var zoomLevel = this.zoomLevel;\n          var prevPt = points[0];\n          var offset;\n          var r;\n          var nextOffset;\n          var nextR;\n\n          for (var i = 1, pt = void 0; pt = points[i]; i++) {\n            var nextPt = points[i + 1];\n\n            if (offset === undefined) {\n              r = metrics_1.Metrics.euclideanDistance(prevPt, pt);\n              if (r === 0) continue;\n              offset = this.getSelectionOffsetPoints(prevPt, pt, r);\n            }\n\n            if (nextPt) {\n              nextR = metrics_1.Metrics.euclideanDistance(pt, nextPt);\n              if (nextR === 0) continue;\n              nextOffset = this.getSelectionOffsetPoints(pt, nextPt, nextR);\n            }\n\n            var offsetX = offset.x;\n            var offsetY = offset.y;\n            var offsetXNegative = -offset.x;\n            var offsetYNegative = -offset.y;\n            var nextOffsetX = nextOffset && nextOffset.x;\n            var nextOffsetY = nextOffset && nextOffset.y;\n            var nextOffsetXNegative = nextOffset && -nextOffset.x;\n            var nextOffsetYNegative = nextOffset && -nextOffset.y;\n\n            if (this.style.strokeWidthPx % 2 === 0) {\n              if (offsetXNegative > 0) offsetXNegative -= CanvasSelectionManager.evenOddSelectionCorrection;else if (offsetX > 0) offsetX -= CanvasSelectionManager.evenOddSelectionCorrection;\n              if (offsetYNegative > 0) offsetYNegative -= CanvasSelectionManager.evenOddSelectionCorrection;else if (offsetY > 0) offsetY -= CanvasSelectionManager.evenOddSelectionCorrection;\n              if (nextOffsetXNegative > 0) nextOffsetXNegative -= CanvasSelectionManager.evenOddSelectionCorrection;else if (nextOffsetX > 0) nextOffsetX -= CanvasSelectionManager.evenOddSelectionCorrection;\n              if (nextOffsetYNegative > 0) nextOffsetYNegative -= CanvasSelectionManager.evenOddSelectionCorrection;else if (nextOffsetY > 0) nextOffsetY -= CanvasSelectionManager.evenOddSelectionCorrection;\n            }\n\n            while (texts[textIndex] && texts[textIndex].pointIndex <= i) {\n              var text = texts[textIndex];\n              var cos = (pt.x - prevPt.x) / r;\n              var sin = (pt.y - prevPt.y) / r;\n              var textPts = this.getTextStartEndPoints(sin, cos, text.point, text.text, txtAlign);\n\n              if (texts[textIndex].pointIndex < i) {\n                prevPt = textPts[1];\n                commands.push(PathPrimitive_1.PathPrimitiveMoveToCommand.fromPoint(prevPt.clone().offset(offsetX, offsetY).multiply(zoomLevel, zoomLevel)));\n                commandsWB.push(PathPrimitive_1.PathPrimitiveLineToCommand.fromPoint(prevPt.clone().offset(offsetXNegative, offsetYNegative).multiply(zoomLevel, zoomLevel)));\n              } else {\n                if (!commands.length) {\n                  commands.push(PathPrimitive_1.PathPrimitiveMoveToCommand.fromPoint(prevPt.clone().offset(offsetX, offsetY).multiply(zoomLevel, zoomLevel)));\n                  commandsWB.push(PathPrimitive_1.PathPrimitiveLineToCommand.fromPoint(prevPt.clone().offset(offsetXNegative, offsetYNegative).multiply(zoomLevel, zoomLevel)));\n                }\n\n                commands.push(PathPrimitive_1.PathPrimitiveLineToCommand.fromPoint(textPts[0].clone().offset(offsetX, offsetY).multiply(zoomLevel, zoomLevel)));\n                commands.push(PathPrimitive_1.PathPrimitiveMoveToCommand.fromPoint(textPts[1].clone().offset(offsetX, offsetY).multiply(zoomLevel, zoomLevel)));\n                commandsWB.push(PathPrimitive_1.PathPrimitiveMoveToCommand.fromPoint(textPts[0].clone().offset(offsetXNegative, offsetYNegative).multiply(zoomLevel, zoomLevel)));\n                commandsWB.push(PathPrimitive_1.PathPrimitiveLineToCommand.fromPoint(textPts[1].clone().offset(offsetXNegative, offsetYNegative).multiply(zoomLevel, zoomLevel)));\n                prevPt = textPts[1];\n              }\n\n              textIndex++;\n            }\n\n            if (!commands.length) {\n              commands.push(PathPrimitive_1.PathPrimitiveMoveToCommand.fromPoint(prevPt.clone().offset(offsetX, offsetY).multiply(zoomLevel, zoomLevel)));\n              commandsWB.push(PathPrimitive_1.PathPrimitiveLineToCommand.fromPoint(prevPt.clone().offset(offsetXNegative, offsetYNegative).multiply(zoomLevel, zoomLevel)));\n            }\n\n            if (nextPt) {\n              var a1 = pt.y - prevPt.y;\n              var b1 = prevPt.x - pt.x;\n              var c1 = a1 * (prevPt.x + offsetX) + b1 * (prevPt.y + offsetY);\n              var c1wb = a1 * (prevPt.x + offsetXNegative) + b1 * (prevPt.y + offsetYNegative);\n              var a2 = nextPt.y - pt.y;\n              var b2 = pt.x - nextPt.x;\n              var c2 = a2 * (pt.x + nextOffsetX) + b2 * (pt.y + nextOffsetY);\n              var c2wb = a2 * (pt.x + nextOffsetXNegative) + b2 * (pt.y + nextOffsetYNegative);\n              var det = a1 * b2 - a2 * b1;\n\n              if (det !== 0) {\n                commands.push(new PathPrimitive_1.PathPrimitiveLineToCommand(zoomLevel * (b2 * c1 - b1 * c2) / det, zoomLevel * (a1 * c2 - a2 * c1) / det));\n                commandsWB.push(new PathPrimitive_1.PathPrimitiveLineToCommand(zoomLevel * (b2 * c1wb - b1 * c2wb) / det, zoomLevel * (a1 * c2wb - a2 * c1wb) / det));\n              }\n\n              _a = [nextOffset, nextR], offset = _a[0], r = _a[1];\n            } else {\n              commands.push(PathPrimitive_1.PathPrimitiveLineToCommand.fromPoint(pt.clone().offset(offsetX, offsetY).multiply(zoomLevel, zoomLevel)));\n              commandsWB.push(PathPrimitive_1.PathPrimitiveMoveToCommand.fromPoint(pt.clone().offset(offsetXNegative, offsetYNegative).multiply(zoomLevel, zoomLevel)));\n            }\n\n            prevPt = pt;\n          }\n\n          var primitive = new PathPrimitive_1.PathPrimitive(commands.concat(commandsWB.reverse()), Style_1.StrokeStyle.default1pxInstance, className);\n          this.getOrCreateElement(\"CS\", primitive, this.rectsContainer);\n        };\n\n        ConnectorSelectionElement.prototype.getSelectionOffset = function () {\n          return CanvasSelectionManager.selectionOffset + unit_converter_1.UnitConverter.pixelsToTwips(Math.round(this.style.strokeWidthPx / 2) + (this.style.strokeWidthPx + 1) % 2);\n        };\n\n        ConnectorSelectionElement.prototype.getSelectionOffsetPoints = function (pt1, pt2, r) {\n          return new point_1.Point(this.getSelectionOffset() / r * (pt1.y - pt2.y), this.getSelectionOffset() / r * (pt2.x - pt1.x));\n        };\n\n        ConnectorSelectionElement.prototype.getTextStartEndPoints = function (sin, cos, center, text, align) {\n          var size = this.dom.measurer.measureTextLine(text, this.styleText, ITextMeasurer_1.TextOwner.Connector).applyConverter(unit_converter_1.UnitConverter.pixelsToTwips).clone().offset(this.getSelectionOffset(), this.getSelectionOffset()).nonNegativeSize();\n          var width = size.width * cos + size.height * sin;\n\n          switch (align) {\n            case Style_1.TextAlignment.Left:\n              return [center, new point_1.Point(center.x + cos * width, center.y + sin * width)];\n\n            case Style_1.TextAlignment.Right:\n              return [new point_1.Point(center.x - cos * width, center.y - sin * width), center];\n\n            default:\n              return [new point_1.Point(center.x - 0.5 * cos * width, center.y - 0.5 * sin * width), new point_1.Point(center.x + 0.5 * cos * width, center.y + 0.5 * sin * width)];\n          }\n        };\n\n        ConnectorSelectionElement.prototype.drawConnectorSelectionMarks = function () {\n          var _this = this;\n\n          var pointsCount = this.points.length - 1;\n          this.points.forEach(function (pt, index) {\n            var isEdgePoint = index === 0 || index === pointsCount;\n            var className = isEdgePoint ? exports.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK : exports.SELECTION_ELEMENT_CLASSNAMES.CONNECTOR_POINT_MARK;\n            var markSize = isEdgePoint ? CanvasSelectionManager.selectionMarkSize : CanvasSelectionManager.connectorPointMarkSize;\n            if (isEdgePoint || _this.lineType === ConnectorProperties_1.ConnectorLineOption.Straight) _this.drawSelectionMark(index, pt.clone().multiply(_this.zoomLevel, _this.zoomLevel), markSize, Event_1.MouseEventElementType.ConnectorPoint, index, className);else _this.drawSelectionMark(index, pt.clone().multiply(_this.zoomLevel, _this.zoomLevel), markSize, Event_1.MouseEventElementType.Undefined, -1, className + \" disabled\");\n          });\n          this.drawConnectorSideMarks();\n        };\n\n        ConnectorSelectionElement.prototype.drawConnectorSideMarks = function () {\n          var _this = this;\n\n          var type = this.lineType === ConnectorProperties_1.ConnectorLineOption.Straight ? Event_1.MouseEventElementType.ConnectorSide : Event_1.MouseEventElementType.ConnectorOrthogonalSide;\n          var prevPt;\n          var prevPtIndex;\n          this.renderPoints.filter(function (rp) {\n            return !rp.skipped;\n          }).forEach(function (pt, index) {\n            if (pt.skipped) return;\n            if (prevPt !== undefined) if (_this.canDrawConnectorSideMark(pt, prevPt)) {\n              var classNameSuffix = _this.lineType === ConnectorProperties_1.ConnectorLineOption.Orthogonal ? pt.x - prevPt.x === 0 ? \"vertical\" : \"horizontal\" : \"\";\n\n              _this.drawSelectionMark(_this.points.length + index - 1, new point_1.Point(prevPt.x + (pt.x - prevPt.x) / 2, prevPt.y + (pt.y - prevPt.y) / 2).clone().multiply(_this.zoomLevel, _this.zoomLevel), CanvasSelectionManager.connectorSideMarkSize, type, prevPtIndex + \"_\" + index, exports.SELECTION_ELEMENT_CLASSNAMES.CONNECTOR_SIDE_MARK + \" \" + classNameSuffix);\n            }\n            prevPt = pt;\n            prevPtIndex = index;\n          });\n        };\n\n        ConnectorSelectionElement.prototype.canDrawConnectorSideMark = function (point1, point2) {\n          if (this.lineType === ConnectorProperties_1.ConnectorLineOption.Straight) {\n            var minSize = CanvasSelectionManager.selectionMarkSize + CanvasSelectionManager.connectorSideMarkSize;\n            return Utils_2.GeometryUtils.getDistance(point1, point2) > minSize;\n          }\n\n          if (this.lineType === ConnectorProperties_1.ConnectorLineOption.Orthogonal) return (point1.x - point2.x === 0 || Math.abs(point1.x - point2.x) > Connector_1.Connector.minOffset) && (point1.y - point2.y === 0 || Math.abs(point1.y - point2.y) > Connector_1.Connector.minOffset);\n          return false;\n        };\n\n        return ConnectorSelectionElement;\n      }(ItemSelectionElement);\n      /***/\n\n    },\n    /* 161 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.DiagramDraggingEvent = exports.ToolboxDraggingObject = exports.Toolbox = void 0;\n\n      var Utils_1 = __webpack_require__(3);\n\n      var point_1 = __webpack_require__(1);\n\n      var evt_1 = __webpack_require__(80);\n\n      var Data_1 = __webpack_require__(43);\n\n      var dom_1 = __webpack_require__(26);\n\n      var touch_1 = __webpack_require__(105);\n\n      var browser_1 = __webpack_require__(17);\n\n      var RenderHelper_1 = __webpack_require__(15);\n\n      var CanvasItemsManager_1 = __webpack_require__(76);\n\n      var TOOLBOX_CSSCLASS = \"dxdi-toolbox\";\n      var DRAG_CAPTURED_CSSCLASS = \"dxdi-tb-drag-captured\";\n      var TOUCH_DRAGTIMEOUT_MS = 800;\n\n      var Toolbox =\n      /** @class */\n      function () {\n        function Toolbox(parent, readOnly, allowDragging, shapeDescriptionManager, shapeTypes, getAllowedShapeTypes) {\n          this.readOnly = readOnly;\n          this.allowDragging = allowDragging;\n          this.shapeDescriptionManager = shapeDescriptionManager;\n          this.shapeTypes = shapeTypes;\n          this.getAllowedShapeTypes = getAllowedShapeTypes;\n          this.dragPrepareTimeout = -1;\n          this.dragState = DragState.None;\n          this.emulateDragEvents = browser_1.Browser.WebKitTouchUI || browser_1.Browser.AndroidMobilePlatform;\n          this.onDragOperation = new Utils_1.EventDispatcher();\n          this.onClickOperation = new Utils_1.EventDispatcher();\n          if (!parent) return;\n          this.mainElement = this.createMainElement(parent);\n          this.attachHandlers(this.mainElement);\n        }\n\n        Toolbox.prototype.clean = function (removeElement) {\n          this.detachHandlers(this.mainElement);\n          if (removeElement) removeElement(this.mainElement);\n        };\n\n        Toolbox.prototype.createMainElement = function (parent) {\n          var element = document.createElement(\"div\");\n          element.setAttribute(\"class\", TOOLBOX_CSSCLASS);\n          element.draggable = true;\n          if (this.emulateDragEvents) element.tabIndex = 0;\n          parent.appendChild(element);\n          return element;\n        };\n\n        Toolbox.prototype.attachHandlers = function (element) {\n          this.onElementMouseDownHandler = this.onElementMouseDown.bind(this);\n          this.onElementMouseUpHandler = this.onElementMouseUp.bind(this);\n          this.onMouseDownHandler = this.onMouseDown.bind(this);\n          this.onMouseMoveHandler = this.onMouseMove.bind(this);\n          this.onMouseUpHandler = this.onMouseUp.bind(this);\n          this.onDragStartHandler = this.onDragStart.bind(this);\n          this.onTouchMoveHandler = this.onTouchMove.bind(this);\n          if (this.emulateDragEvents) this.onSelectionChangeHandler = this.onSelectionChange.bind(this);\n          if (!this.emulateDragEvents) RenderHelper_1.RenderHelper.addEventListener(element, \"dragstart\", this.onDragStartHandler);\n          RenderHelper_1.RenderHelper.addEventListener(element, \"touchmove\", this.onTouchMoveHandler);\n          RenderHelper_1.RenderHelper.addEventListener(element, touch_1.TouchUtils.touchMouseDownEventName, this.onElementMouseDownHandler);\n          RenderHelper_1.RenderHelper.addEventListener(element, touch_1.TouchUtils.touchMouseUpEventName, this.onElementMouseUpHandler);\n          RenderHelper_1.RenderHelper.addEventListener(element, touch_1.TouchUtils.touchMouseDownEventName, this.onMouseDownHandler);\n          RenderHelper_1.RenderHelper.addEventListener(document, touch_1.TouchUtils.touchMouseMoveEventName, this.onMouseMoveHandler);\n          RenderHelper_1.RenderHelper.addEventListener(document, touch_1.TouchUtils.touchMouseUpEventName, this.onMouseUpHandler);\n          if (this.emulateDragEvents) RenderHelper_1.RenderHelper.addEventListener(document, \"selectionchange\", this.onSelectionChangeHandler);\n        };\n\n        Toolbox.prototype.detachHandlers = function (element) {\n          if (!this.emulateDragEvents) RenderHelper_1.RenderHelper.removeEventListener(element, \"dragstart\", this.onDragStartHandler);\n          RenderHelper_1.RenderHelper.removeEventListener(element, \"touchmove\", this.onTouchMoveHandler);\n          RenderHelper_1.RenderHelper.removeEventListener(element, touch_1.TouchUtils.touchMouseDownEventName, this.onElementMouseDownHandler);\n          RenderHelper_1.RenderHelper.removeEventListener(element, touch_1.TouchUtils.touchMouseUpEventName, this.onElementMouseUpHandler);\n          RenderHelper_1.RenderHelper.removeEventListener(element, touch_1.TouchUtils.touchMouseDownEventName, this.onMouseDownHandler);\n          RenderHelper_1.RenderHelper.removeEventListener(document, touch_1.TouchUtils.touchMouseMoveEventName, this.onMouseMoveHandler);\n          RenderHelper_1.RenderHelper.removeEventListener(document, touch_1.TouchUtils.touchMouseUpEventName, this.onMouseUpHandler);\n          if (this.emulateDragEvents) RenderHelper_1.RenderHelper.removeEventListener(document, \"selectionchange\", this.onSelectionChangeHandler);\n        };\n\n        Toolbox.prototype.render = function (filter) {\n          if (this.mainElement.childNodes) this.mainElement.innerHTML = \"\";\n          var shapeTypes = this.shapeTypes;\n          shapeTypes = this.getAllowedShapeTypes ? this.getAllowedShapeTypes(shapeTypes) : shapeTypes;\n          shapeTypes = filter ? shapeTypes.filter(filter) : shapeTypes;\n          if (shapeTypes.length) this.createElements(this.mainElement, shapeTypes);\n          return !!shapeTypes.length;\n        };\n\n        Toolbox.prototype.createDraggingObject = function (shapeType) {\n          var evt = new DiagramDraggingEvent();\n          evt.data = shapeType;\n          evt.onFinishDragging = this.resetDragState.bind(this);\n          evt.onCaptured = this.capture.bind(this);\n          return new ToolboxDraggingObject(evt);\n        };\n\n        Toolbox.prototype.getDragShapeType = function (element) {\n          while (element && !dom_1.DomUtils.hasClassName(element, TOOLBOX_CSSCLASS)) {\n            if (element.getAttribute && element.getAttribute(\"data-tb-type\")) return element.getAttribute(\"data-tb-type\");\n            element = element.parentNode;\n          }\n\n          return undefined;\n        };\n\n        Toolbox.prototype.onElementMouseDown = function (evt) {\n          this.mouseDownShapeType = this.getDragShapeType(evt_1.EvtUtils.getEventSource(evt));\n        };\n\n        Toolbox.prototype.onElementMouseUp = function (evt) {\n          var shapeType = this.getDragShapeType(evt_1.EvtUtils.getEventSource(evt));\n          if (shapeType && shapeType === this.mouseDownShapeType) this.onClickOperation.raise(\"notifyToolboxClick\", shapeType);\n          this.mouseDownShapeType = undefined;\n        };\n\n        Toolbox.prototype.onMouseDown = function (evt) {\n          this.setDragState(DragState.Prepare, evt);\n        };\n\n        Toolbox.prototype.onDragStart = function (evt) {\n          this.setDragState(DragState.Start, evt);\n          evt.preventDefault();\n        };\n\n        Toolbox.prototype.onTouchMove = function (evt) {\n          if (this.draggingObject) evt.preventDefault();\n        };\n\n        Toolbox.prototype.onSelectionChange = function () {// this.setDragState(DragState.Start, null);\n        };\n\n        Toolbox.prototype.onMouseMove = function (evt) {\n          this.setDragState(evt_1.EvtUtils.isLeftButtonPressed(evt) ? DragState.Dragging : DragState.None, evt);\n        };\n\n        Toolbox.prototype.onMouseUp = function (evt) {\n          this.setDragState(DragState.None, evt);\n        };\n\n        Toolbox.prototype.updateDraggingElementPosition = function (evtX, evtY) {\n          var element = this.draggingObject.element;\n          var xPos = evtX - element.offsetWidth / 2;\n          var yPos = evtY - element.offsetHeight / 2;\n          Data_1.SetAbsoluteX(element, xPos);\n          Data_1.SetAbsoluteY(element, yPos);\n        };\n\n        Toolbox.prototype.setDragState = function (newState, evt) {\n          if (this.readOnly || !this.allowDragging) return;\n          if (newState === DragState.None && newState === this.dragState) return;\n\n          if (this.dragPrepareTimeout > -1) {\n            clearTimeout(this.dragPrepareTimeout);\n            this.dragPrepareTimeout = -1;\n          }\n\n          if (newState - this.dragState > 1 || newState !== DragState.None && newState < this.dragState) return;\n          this.dragState = newState;\n\n          switch (newState) {\n            case DragState.Prepare:\n              if (!this.prepareDragging(evt)) this.setDragState(DragState.None, evt);\n              if (this.emulateDragEvents) this.dragPrepareTimeout = setTimeout(this.onDragPrepareTimeout.bind(this), TOUCH_DRAGTIMEOUT_MS);\n              break;\n\n            case DragState.Start:\n              dom_1.DomUtils.addClassName(document.body, \"dxdi-dragging\");\n              this.startDragging();\n              break;\n\n            case DragState.Dragging:\n              this.doDragging(evt);\n              break;\n\n            case DragState.None:\n              this.finishDragging();\n              break;\n          }\n        };\n\n        Toolbox.prototype.resetDragState = function (evt) {\n          this.setDragState(DragState.None, evt);\n        };\n\n        Toolbox.prototype.onDragPrepareTimeout = function () {\n          this.dragPrepareTimeout = -1;\n          if (this.dragState === DragState.Prepare) this.setDragState(DragState.Start, null);\n        };\n\n        Toolbox.prototype.prepareDragging = function (evt) {\n          this.dragStartPoint = new point_1.Point(evt_1.EvtUtils.getEventX(evt), evt_1.EvtUtils.getEventY(evt));\n          this.dragStartShapeType = this.getDragShapeType(evt_1.EvtUtils.getEventSource(evt));\n          if (this.emulateDragEvents) this.mainElement.focus();\n          return !!this.dragStartShapeType;\n        };\n\n        Toolbox.prototype.startDragging = function () {\n          this.draggingObject = this.createDraggingObject(this.dragStartShapeType);\n\n          if (this.dragStartShapeType) {\n            this.raiseDragStart();\n            this.draggingObject.element = this.createDraggingElement(this.draggingObject);\n            if (this.draggingObject.captured !== undefined) this.capture(this.draggingObject.captured, true);\n            this.updateDraggingElementPosition(this.dragStartPoint.x, this.dragStartPoint.y);\n          } else dom_1.DomUtils.addClassName(document.body, CanvasItemsManager_1.NOT_VALID_CSSCLASS);\n        };\n\n        Toolbox.prototype.doDragging = function (evt) {\n          if (this.draggingObject.element) this.updateDraggingElementPosition(evt_1.EvtUtils.getEventX(evt), evt_1.EvtUtils.getEventY(evt));\n        };\n\n        Toolbox.prototype.finishDragging = function () {\n          if (this.draggingObject) {\n            this.raiseDragEnd();\n            var element = this.draggingObject.element;\n            if (element) element.parentNode.removeChild(element);\n            delete this.draggingObject;\n          }\n\n          this.dragStartPoint = undefined;\n          this.dragStartShapeType = undefined;\n          dom_1.DomUtils.removeClassName(document.body, CanvasItemsManager_1.NOT_VALID_CSSCLASS);\n          setTimeout(function () {\n            return dom_1.DomUtils.removeClassName(document.body, \"dxdi-dragging\");\n          }, 500); // prevent selection on dragend\n        };\n\n        Toolbox.prototype.capture = function (captured, forced) {\n          if (this.draggingObject && (this.draggingObject.captured !== captured || forced)) {\n            this.draggingObject.captured = captured;\n            if (this.draggingObject.element) dom_1.DomUtils.toggleClassName(this.draggingObject.element, DRAG_CAPTURED_CSSCLASS, captured);\n          }\n        };\n\n        Toolbox.prototype.raiseDragStart = function () {\n          this.onDragOperation.raise(\"notifyToolboxDragStart\");\n        };\n\n        Toolbox.prototype.raiseDragEnd = function () {\n          this.onDragOperation.raise(\"notifyToolboxDragEnd\");\n        };\n\n        Toolbox.prototype.notifyReadOnlyChanged = function (readOnly) {\n          this.readOnly = readOnly;\n        };\n\n        return Toolbox;\n      }();\n\n      exports.Toolbox = Toolbox;\n      var DragState;\n\n      (function (DragState) {\n        DragState[DragState[\"None\"] = -1] = \"None\";\n        DragState[DragState[\"Prepare\"] = 0] = \"Prepare\";\n        DragState[DragState[\"Start\"] = 1] = \"Start\";\n        DragState[DragState[\"Dragging\"] = 2] = \"Dragging\";\n      })(DragState || (DragState = {}));\n\n      var ToolboxDraggingObject =\n      /** @class */\n      function () {\n        function ToolboxDraggingObject(evt) {\n          this.evt = evt;\n        }\n\n        return ToolboxDraggingObject;\n      }();\n\n      exports.ToolboxDraggingObject = ToolboxDraggingObject;\n\n      var DiagramDraggingEvent =\n      /** @class */\n      function () {\n        function DiagramDraggingEvent() {}\n\n        return DiagramDraggingEvent;\n      }();\n\n      exports.DiagramDraggingEvent = DiagramDraggingEvent;\n      /***/\n    },\n    /* 162 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics91 = function extendStatics(d, b) {\n          _extendStatics91 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics91(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics91(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.DeleteCommand = void 0;\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var SimpleCommandBase_1 = __webpack_require__(10);\n\n      var DeleteCommand =\n      /** @class */\n      function (_super) {\n        __extends(DeleteCommand, _super);\n\n        function DeleteCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        DeleteCommand.prototype.isEnabled = function () {\n          var items = this.control.selection.getSelectedItems();\n          return _super.prototype.isEnabled.call(this) && items.length && (items.length > 1 || this.permissionsProvider.canDeleteItems(items));\n        };\n\n        DeleteCommand.prototype.executeCore = function (state) {\n          this.permissionsProvider.beginDeleteItems(this.control.selection.getSelectedItems());\n          ModelUtils_1.ModelUtils.deleteSelection(this.control.history, this.control.model, this.control.selection);\n          this.permissionsProvider.endDeleteItems();\n          return true;\n        };\n\n        Object.defineProperty(DeleteCommand.prototype, \"isPermissionsRequired\", {\n          get: function get() {\n            return true;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        return DeleteCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.DeleteCommand = DeleteCommand;\n      /***/\n    },\n    /* 163 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Flag = function () {\n        function Flag(initValue) {\n          if (initValue === void 0) {\n            initValue = 0;\n          }\n\n          this.value = initValue;\n        }\n\n        Flag.prototype.get = function (enumVal) {\n          return (this.value & enumVal) === enumVal;\n        };\n\n        Flag.prototype.set = function (enumVal, newValue) {\n          var currVal = (this.value & enumVal) === enumVal;\n\n          if (currVal !== newValue) {\n            if (newValue) this.value |= enumVal;else this.value ^= enumVal;\n          }\n\n          return this;\n        };\n\n        Flag.prototype.add = function (value) {\n          this.value |= value;\n        };\n\n        Flag.prototype.anyOf = function () {\n          var flags = [];\n\n          for (var _i = 0; _i < arguments.length; _i++) {\n            flags[_i] = arguments[_i];\n          }\n\n          for (var _a = 0, flags_1 = flags; _a < flags_1.length; _a++) {\n            var flag = flags_1[_a];\n            if ((this.value & flag) === flag) return true;\n          }\n\n          return false;\n        };\n\n        Flag.prototype.getValue = function () {\n          return this.value;\n        };\n\n        Flag.prototype.clone = function () {\n          return new Flag(this.value);\n        };\n\n        return Flag;\n      }();\n\n      exports.Flag = Flag;\n      /***/\n    },\n    /* 164 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var list_1 = __webpack_require__(82);\n\n      var search_1 = __webpack_require__(40);\n\n      var fixed_1 = __webpack_require__(107);\n\n      var collector_1 = __webpack_require__(169);\n\n      var IntervalAlgorithms = function () {\n        function IntervalAlgorithms() {}\n\n        IntervalAlgorithms.oneConstainsOtherArraysOfInterval = function (mergedIntervalsA, intervalsB) {\n          var shouldBeContais = list_1.ListUtils.deepCopy(intervalsB);\n          var currenInterval = shouldBeContais.pop();\n\n          while (currenInterval) {\n            if (!list_1.ListUtils.unsafeAnyOf(mergedIntervalsA, function (mergedInterval) {\n              return mergedInterval.containsInterval(currenInterval);\n            })) return false;\n            currenInterval = shouldBeContais.pop();\n          }\n\n          return true;\n        };\n\n        IntervalAlgorithms.getIntersection = function (intervalA, intervalB) {\n          return IntervalAlgorithms.getIntersectionTemplate(intervalA, intervalB, intervalA);\n        };\n\n        IntervalAlgorithms.getIntersectionTemplate = function (intervalA, intervalB, template) {\n          var start = Math.max(intervalA.start, intervalB.start);\n          var end = Math.min(intervalA.end, intervalB.end);\n          if (start > end) return null;\n          return template.makeByStartEnd(start, end);\n        };\n\n        IntervalAlgorithms.getIntersectionNonNullLength = function (intervalA, intervalB) {\n          return IntervalAlgorithms.getIntersectionNonNullLengthTemplate(intervalA, intervalB, intervalA);\n        };\n\n        IntervalAlgorithms.getIntersectionNonNullLengthTemplate = function (intervalA, intervalB, template) {\n          var inters = IntervalAlgorithms.getIntersectionTemplate(intervalA, intervalB, template);\n          return inters && inters.length ? inters : null;\n        };\n\n        IntervalAlgorithms.getIntersectionsTwoArraysOfInterval = function (intervalsA, intervalsB) {\n          return IntervalAlgorithms.getIntersectionsTwoArraysOfIntervalTemplate(intervalsA, intervalsB, intervalsA[0]);\n        };\n\n        IntervalAlgorithms.getIntersectionsTwoArraysOfIntervalTemplate = function (intervalsA, intervalsB, template) {\n          var result = [];\n          var lengthIntervalsA = intervalsA.length;\n          var lengthIntervalsB = intervalsB.length;\n          var intervalsAIndex = 0;\n          var intervalsBIndex = 0;\n          var currAInterval = intervalsA[intervalsAIndex];\n          var currBInterval = intervalsB[intervalsBIndex];\n          var currResultInterval = null;\n\n          while (intervalsAIndex < lengthIntervalsA && intervalsBIndex < lengthIntervalsB) {\n            var intersection = IntervalAlgorithms.getIntersectionTemplate(currAInterval, currBInterval, template);\n\n            if (intersection) {\n              if (currResultInterval && currResultInterval.end === intersection.start) currResultInterval.length += intersection.length;else {\n                currResultInterval = intersection;\n                result.push(currResultInterval);\n              }\n            }\n\n            if (currAInterval.end < currBInterval.end) {\n              intervalsAIndex++;\n              currAInterval = intervalsA[intervalsAIndex];\n            } else {\n              intervalsBIndex++;\n              currBInterval = intervalsB[intervalsBIndex];\n            }\n          }\n\n          return result;\n        };\n\n        IntervalAlgorithms.getAffectedObjects = function (objects, intervals, getFirstIndex, conflictResolver) {\n          if (getFirstIndex === void 0) {\n            getFirstIndex = function getFirstIndex(start) {\n              return search_1.SearchUtils.normedInterpolationIndexOf(objects, function (obj) {\n                return obj.interval.start;\n              }, start);\n            };\n          }\n\n          if (conflictResolver === void 0) {\n            conflictResolver = function conflictResolver(objectInterval, touchingIntervalLength, touchPoint) {\n              return objectInterval.start === touchPoint && touchingIntervalLength === 0;\n            };\n          }\n\n          return IntervalAlgorithms.getAffectedObjectsTemplate(objects, intervals, intervals[0], getFirstIndex, conflictResolver);\n        };\n\n        IntervalAlgorithms.getAffectedObjectsTemplate = function (objects, intervals, template, getFirstIndex, conflictResolver) {\n          if (getFirstIndex === void 0) {\n            getFirstIndex = function getFirstIndex(start) {\n              return search_1.SearchUtils.normedInterpolationIndexOf(objects, function (obj) {\n                return obj.interval.start;\n              }, start);\n            };\n          }\n\n          if (conflictResolver === void 0) {\n            conflictResolver = function conflictResolver(objectInterval, touchingIntervalLength, touchPoint) {\n              return objectInterval.start === touchPoint && touchingIntervalLength === 0;\n            };\n          }\n\n          var collector = new collector_1.SparseIntervalsCollector(template);\n\n          for (var _i = 0, intervals_1 = intervals; _i < intervals_1.length; _i++) {\n            var interval = intervals_1[_i];\n            var ind = Math.max(0, getFirstIndex(interval.start, objects));\n\n            for (var obj = void 0; obj = objects[ind]; ind++) {\n              var objInterval = obj.interval;\n              if (objInterval.start > interval.end) break;\n              var intersection = IntervalAlgorithms.getIntersectionTemplate(objInterval, interval, template);\n              if (intersection && (intersection.length || conflictResolver(objInterval, interval.length, intersection.start))) collector.add(ind);\n            }\n          }\n\n          return collector.getIntervals();\n        };\n\n        IntervalAlgorithms.handleAffectedObjects = function (objects, intervals, callback, getFirstIndex) {\n          if (getFirstIndex === void 0) {\n            getFirstIndex = function getFirstIndex(start) {\n              return search_1.SearchUtils.normedInterpolationIndexOf(objects, function (obj) {\n                return obj.interval.start;\n              }, start);\n            };\n          }\n\n          var template = new fixed_1.FixedInterval(0, 0);\n\n          for (var _i = 0, intervals_2 = intervals; _i < intervals_2.length; _i++) {\n            var interval = intervals_2[_i];\n            var ind = Math.max(0, getFirstIndex(interval.start, objects));\n\n            for (var obj = void 0; obj = objects[ind]; ind++) {\n              var objInterval = obj.interval;\n              if (objInterval.start > interval.end) break;\n              var intersection = IntervalAlgorithms.getIntersectionTemplate(objInterval, interval, template);\n              if (intersection) callback(obj, ind, interval, intersection);\n            }\n          }\n        };\n\n        IntervalAlgorithms.getMergedIntervals = function (intervals, needSort) {\n          return IntervalAlgorithms.getMergedIntervalsTemplate(intervals, needSort, intervals[0]);\n        };\n\n        IntervalAlgorithms.getMergedIntervalsTemplate = function (intervals, needSort, template) {\n          if (intervals.length < 2) return intervals.length > 0 ? [template.makeByStartLength(intervals[0].start, intervals[0].length)] : [];\n          var sortedIntervals = needSort ? [].concat(intervals).sort(function (a, b) {\n            return a.start - b.start;\n          }) : intervals;\n          var result = [];\n\n          for (var i = 0, interval = void 0; interval = sortedIntervals[i];) {\n            var minBound = interval.start;\n            var maxBound = interval.end;\n\n            for (++i; (interval = sortedIntervals[i]) !== undefined && interval.start <= maxBound; i++) {\n              if (interval.end > maxBound) maxBound = interval.end;\n            }\n\n            result.push(template.makeByStartEnd(minBound, maxBound));\n          }\n\n          return result;\n        };\n\n        IntervalAlgorithms.reflectIntervals = function (intervals, bounds) {\n          return IntervalAlgorithms.reflectIntervalsTemplate(intervals, bounds, bounds);\n        };\n\n        IntervalAlgorithms.reflectIntervalsTemplate = function (intervals, bounds, template) {\n          if (!intervals.length) return [template.makeByStartLength(bounds.start, bounds.length)];\n          var lastIntervalEnd = list_1.ListUtils.last(intervals).end;\n          var result = list_1.ListUtils.reducedMap(intervals, function (curr, i) {\n            return IntervalAlgorithms.getIntersectionNonNullLengthTemplate(template.makeByStartEnd(intervals[i - 1].end, curr.start), bounds, template);\n          }, 1);\n          if (bounds.start < intervals[0].start) result.unshift(template.makeByStartEnd(bounds.start, intervals[0].start));\n          if (bounds.end > lastIntervalEnd) result.push(template.makeByStartEnd(lastIntervalEnd, bounds.end));\n          return result;\n        };\n\n        IntervalAlgorithms.reflectionOfPointOnInterval = function (value, valInterval, targetInterval) {\n          return (value - valInterval.start) / valInterval.length * targetInterval.length + targetInterval.start;\n        };\n\n        return IntervalAlgorithms;\n      }();\n\n      exports.IntervalAlgorithms = IntervalAlgorithms;\n      /***/\n    },\n    /* 165 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var tslib_1 = __webpack_require__(55);\n\n      var MinMax = function () {\n        function MinMax(minElement, maxElement) {\n          this.minElement = minElement;\n          this.maxElement = maxElement;\n        }\n\n        return MinMax;\n      }();\n\n      exports.MinMax = MinMax;\n\n      var MinMaxNumber = function (_super) {\n        tslib_1.__extends(MinMaxNumber, _super);\n\n        function MinMaxNumber() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        Object.defineProperty(MinMaxNumber.prototype, \"length\", {\n          get: function get() {\n            return this.maxElement - this.minElement;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        return MinMaxNumber;\n      }(MinMax);\n\n      exports.MinMaxNumber = MinMaxNumber;\n\n      var ExtendedMin = function () {\n        function ExtendedMin(minElement, minValue) {\n          this.minElement = minElement;\n          this.minValue = minValue;\n        }\n\n        return ExtendedMin;\n      }();\n\n      exports.ExtendedMin = ExtendedMin;\n\n      var ExtendedMax = function () {\n        function ExtendedMax(maxElement, maxValue) {\n          this.maxElement = maxElement;\n          this.maxValue = maxValue;\n        }\n\n        return ExtendedMax;\n      }();\n\n      exports.ExtendedMax = ExtendedMax;\n\n      var ExtendedMinMax = function (_super) {\n        tslib_1.__extends(ExtendedMinMax, _super);\n\n        function ExtendedMinMax(minElement, minValue, maxElement, maxValue) {\n          var _this = _super.call(this, minElement, maxElement) || this;\n\n          _this.minValue = minValue;\n          _this.maxValue = maxValue;\n          return _this;\n        }\n\n        return ExtendedMinMax;\n      }(MinMax);\n\n      exports.ExtendedMinMax = ExtendedMinMax;\n      /***/\n    },\n    /* 166 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var Comparers = function () {\n        function Comparers() {}\n\n        Comparers.number = function (a, b) {\n          return a - b;\n        };\n\n        Comparers.string = function (a, b) {\n          return a === b ? 0 : a > b ? 1 : -1;\n        };\n\n        Comparers.stringIgnoreCase = function (a, b) {\n          a = a.toLowerCase();\n          b = b.toLowerCase();\n          return a === b ? 0 : a > b ? 1 : -1;\n        };\n\n        return Comparers;\n      }();\n\n      exports.Comparers = Comparers;\n\n      var Equals = function () {\n        function Equals() {}\n\n        Equals.simpleType = function (a, b) {\n          return a === b;\n        };\n\n        Equals.object = function (a, b) {\n          return a && b && (a === b || a.equals(b));\n        };\n\n        return Equals;\n      }();\n\n      exports.Equals = Equals;\n      /***/\n    },\n    /* 167 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var tslib_1 = __webpack_require__(55);\n\n      var const_1 = __webpack_require__(168);\n\n      var MutableInterval = function (_super) {\n        tslib_1.__extends(MutableInterval, _super);\n\n        function MutableInterval() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MutableInterval.prototype.normalizeLength = function () {\n          if (this.length < 0) this.length = 0;\n          return this;\n        };\n\n        return MutableInterval;\n      }(const_1.ConstInterval);\n\n      exports.MutableInterval = MutableInterval;\n      /***/\n    },\n    /* 168 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var ConstInterval = function () {\n        function ConstInterval() {}\n\n        Object.defineProperty(ConstInterval.prototype, \"center\", {\n          get: function get() {\n            return this.start + this.length / 2;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        ConstInterval.prototype.isNormalized = function () {\n          return this.end >= this.start;\n        };\n\n        ConstInterval.prototype.isCollapsed = function () {\n          return this.length === 0;\n        };\n\n        ConstInterval.prototype.equals = function (obj) {\n          return this.start === obj.start && this.end === obj.end;\n        };\n\n        ConstInterval.isCollapsed = function (intervals) {\n          return !intervals[1] && intervals[0].isCollapsed();\n        };\n\n        ConstInterval.prototype.containsInterval = function (interval) {\n          return this.start <= interval.start && this.end >= interval.end;\n        };\n\n        ConstInterval.prototype.containsIntervalWithoutEnd = function (interval) {\n          return this.start <= interval.start && this.end > interval.end;\n        };\n\n        ConstInterval.prototype.contains = function (pos) {\n          return this.start <= pos && pos < this.end;\n        };\n\n        ConstInterval.prototype.containsWithIntervalEnd = function (val) {\n          return this.start <= val && val <= this.end;\n        };\n\n        ConstInterval.prototype.containsWithoutIntervalEndAndStart = function (pos) {\n          return this.start < pos && pos < this.end;\n        };\n\n        return ConstInterval;\n      }();\n\n      exports.ConstInterval = ConstInterval;\n      /***/\n    },\n    /* 169 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var intervals_1 = __webpack_require__(170);\n\n      var SparseIntervalsCollector = function () {\n        function SparseIntervalsCollector(template) {\n          this.intervals = [];\n          this.template = template;\n        }\n\n        SparseIntervalsCollector.prototype.add = function (index) {\n          if (this.curr && this.curr.end === index) {\n            this.curr.length++;\n            return;\n          }\n\n          this.curr = this.template.makeByStartLength(index, 1);\n          this.intervals.push(this.curr);\n        };\n\n        SparseIntervalsCollector.prototype.getIntervals = function () {\n          return new intervals_1.SparseIntervals(this.intervals);\n        };\n\n        return SparseIntervalsCollector;\n      }();\n\n      exports.SparseIntervalsCollector = SparseIntervalsCollector;\n      /***/\n    },\n    /* 170 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var iterator_1 = __webpack_require__(108);\n\n      var objects_iterator_1 = __webpack_require__(171);\n\n      var SparseIntervals = function () {\n        function SparseIntervals(list) {\n          if (list === void 0) {\n            list = [];\n          }\n\n          this.list = list;\n          this._count = 0;\n          this._numIntervals = 0;\n\n          for (var _i = 0, list_1 = list; _i < list_1.length; _i++) {\n            var curr = list_1[_i];\n            this._count += curr.length;\n            this._numIntervals++;\n          }\n        }\n\n        Object.defineProperty(SparseIntervals.prototype, \"count\", {\n          get: function get() {\n            return this._count;\n          },\n          enumerable: true,\n          configurable: true\n        });\n        Object.defineProperty(SparseIntervals.prototype, \"numIntervals\", {\n          get: function get() {\n            return this._numIntervals;\n          },\n          enumerable: true,\n          configurable: true\n        });\n\n        SparseIntervals.prototype.getInterval = function (index) {\n          return this.list[index];\n        };\n\n        SparseIntervals.prototype.getNativeIterator = function () {\n          return new iterator_1.SparseIntervalsIterator(this);\n        };\n\n        SparseIntervals.prototype.getObjectsIterator = function (objects) {\n          return new objects_iterator_1.SparseObjectsIterator(this, objects);\n        };\n\n        return SparseIntervals;\n      }();\n\n      exports.SparseIntervals = SparseIntervals;\n      /***/\n    },\n    /* 171 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var tslib_1 = __webpack_require__(55);\n\n      var iterator_1 = __webpack_require__(108);\n\n      var SparseObjectsIterator = function (_super) {\n        tslib_1.__extends(SparseObjectsIterator, _super);\n\n        function SparseObjectsIterator(sparseIntervals, objects) {\n          var _this = _super.call(this, sparseIntervals) || this;\n\n          _this.objects = objects;\n          return _this;\n        }\n\n        SparseObjectsIterator.prototype.initObject = function () {\n          this.obj = this.objects[this.index];\n        };\n\n        return SparseObjectsIterator;\n      }(iterator_1.SparseIntervalsIterator);\n\n      exports.SparseObjectsIterator = SparseObjectsIterator;\n      /***/\n    },\n    /* 172 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics92 = function extendStatics(d, b) {\n          _extendStatics92 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics92(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics92(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.TextFloodFilterPrimitive = exports.TextFilterPrimitive = void 0;\n\n      var RenderHelper_1 = __webpack_require__(15);\n\n      var FilterPrimitive_1 = __webpack_require__(109);\n\n      var Model_1 = __webpack_require__(59);\n\n      var color_1 = __webpack_require__(22);\n\n      var TextFilterPrimitive =\n      /** @class */\n      function (_super) {\n        __extends(TextFilterPrimitive, _super);\n\n        function TextFilterPrimitive(id, x, y, width, height) {\n          if (x === void 0) {\n            x = \"-0.05\";\n          }\n\n          if (y === void 0) {\n            y = \"-0.05\";\n          }\n\n          if (width === void 0) {\n            width = \"1.1\";\n          }\n\n          if (height === void 0) {\n            height = \"1.1\";\n          }\n\n          var _this = _super.call(this, id, x, y, width, height) || this;\n\n          _this.id = id;\n          _this.x = x;\n          _this.y = y;\n          _this.width = width;\n          _this.height = height;\n          return _this;\n        }\n\n        TextFilterPrimitive.prototype.createChildElements = function (parent) {\n          var feFlood = document.createElementNS(RenderHelper_1.svgNS, \"feFlood\");\n          parent.appendChild(feFlood);\n          var feComposite = document.createElementNS(RenderHelper_1.svgNS, \"feComposite\");\n          feComposite.setAttribute(\"in\", \"SourceGraphic\");\n          feComposite.setAttribute(\"operator\", \"atop\");\n          parent.appendChild(feComposite);\n        };\n\n        return TextFilterPrimitive;\n      }(FilterPrimitive_1.FilterPrimitive);\n\n      exports.TextFilterPrimitive = TextFilterPrimitive;\n\n      var TextFloodFilterPrimitive =\n      /** @class */\n      function (_super) {\n        __extends(TextFloodFilterPrimitive, _super);\n\n        function TextFloodFilterPrimitive(id, floodColor, x, y, width, height) {\n          if (x === void 0) {\n            x = \"-0.05\";\n          }\n\n          if (y === void 0) {\n            y = \"-0.05\";\n          }\n\n          if (width === void 0) {\n            width = \"1.1\";\n          }\n\n          if (height === void 0) {\n            height = \"1.1\";\n          }\n\n          var _this = _super.call(this, id, x, y, width, height) || this;\n\n          _this.id = id;\n          _this.floodColor = floodColor;\n          _this.x = x;\n          _this.y = y;\n          _this.width = width;\n          _this.height = height;\n          return _this;\n        }\n\n        TextFloodFilterPrimitive.prototype.applyChildrenProperties = function (element) {\n          for (var child = void 0, i = 0; child = element.childNodes[i]; i++) {\n            if (child.nodeName && child.nodeName.toUpperCase() === \"FEFLOOD\") {\n              this.prepareFEFloodNode(child);\n              break;\n            }\n          }\n        };\n\n        TextFloodFilterPrimitive.prototype.prepareFEFloodNode = function (node) {\n          var colorHash = color_1.ColorUtils.colorToHash(this.floodColor);\n          node.setAttribute(\"flood-color\", colorHash);\n          node.setAttribute(\"class\", \"text-filter-flood\");\n          if (this.floodColor !== Model_1.DiagramModel.defaultPageColor) node.style.setProperty(\"flood-color\", colorHash);else node.style.setProperty(\"flood-color\", \"\");\n        };\n\n        return TextFloodFilterPrimitive;\n      }(TextFilterPrimitive);\n\n      exports.TextFloodFilterPrimitive = TextFloodFilterPrimitive;\n      /***/\n    },\n    /* 173 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var EncodeUtils = function () {\n        function EncodeUtils() {}\n\n        EncodeUtils.encodeHtml = function (text) {\n          return text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n        };\n\n        EncodeUtils.decodeHtml = function (text) {\n          return text.replace(/&amp;/g, '&').replace(/&lt;/g, '<').replace(/&gt;/g, '>');\n        };\n\n        EncodeUtils.prepareTextForRequest = function (text) {\n          return text.replace(/%/g, '%25').replace(/&/g, '%26amp;').replace(/\\+/g, '%2B').replace(/</g, '%26lt;').replace(/>/g, '%26gt;').replace(/\"/g, '%26quot;');\n        };\n\n        EncodeUtils.prepareTextForCallBackRequest = function (text) {\n          return text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\n        };\n\n        EncodeUtils.decodeViaTextArea = function (html) {\n          var textArea = document.createElement('TEXTAREA');\n          textArea.innerHTML = html;\n          return textArea.value;\n        };\n\n        return EncodeUtils;\n      }();\n\n      exports.EncodeUtils = EncodeUtils;\n      /***/\n    },\n    /* 174 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      __webpack_require__(175).polyfill();\n      /***/\n\n    },\n    /* 175 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n      /**\n       * Code refactored from Mozilla Developer Network:\n       * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n       */\n\n      function assign(target, firstSource) {\n        if (target === undefined || target === null) {\n          throw new TypeError('Cannot convert first argument to object');\n        }\n\n        var to = Object(target);\n\n        for (var i = 1; i < arguments.length; i++) {\n          var nextSource = arguments[i];\n\n          if (nextSource === undefined || nextSource === null) {\n            continue;\n          }\n\n          var keysArray = Object.keys(Object(nextSource));\n\n          for (var nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) {\n            var nextKey = keysArray[nextIndex];\n            var desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\n\n            if (desc !== undefined && desc.enumerable) {\n              to[nextKey] = nextSource[nextKey];\n            }\n          }\n        }\n\n        return to;\n      }\n\n      function polyfill() {\n        if (!Object.assign) {\n          Object.defineProperty(Object, 'assign', {\n            enumerable: false,\n            configurable: true,\n            writable: true,\n            value: assign\n          });\n        }\n      }\n\n      module.exports = {\n        assign: assign,\n        polyfill: polyfill\n      };\n      /***/\n    },\n    /* 176 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var browser_1 = __webpack_require__(17);\n\n      var base64_1 = __webpack_require__(84);\n\n      var common_1 = __webpack_require__(48);\n\n      var FileUtils = function () {\n        function FileUtils() {}\n\n        FileUtils.loadJavascriptFile = function (srcUri, callback) {\n          var _a;\n\n          var headElem = document.getElementsByTagName('head')[0];\n\n          if (!headElem) {\n            headElem = document.createElement('head');\n            var bodyElem = document.getElementsByTagName('body')[0];\n            (_a = bodyElem.parentNode) === null || _a === void 0 ? void 0 : _a.insertBefore(headElem, bodyElem);\n          }\n\n          var scriptElem = document.createElement('script');\n          scriptElem.onload = callback;\n          scriptElem.src = srcUri;\n          headElem.appendChild(scriptElem);\n          return {\n            htmlScriptElement: scriptElem\n          };\n        };\n\n        FileUtils.startDownloadFileLocal = function (content, fileName) {\n          if (content instanceof ArrayBuffer) content = base64_1.Base64Utils.fromArrayBuffer(content);\n          if (common_1.isString(content)) content = base64_1.Base64Utils.getFileFromBase64(content);\n          if (window.navigator.msSaveOrOpenBlob) window.navigator.msSaveOrOpenBlob(content, fileName);else {\n            var a_1 = document.createElement('a');\n            var url_1 = URL.createObjectURL(content);\n            a_1.href = url_1;\n            a_1.download = fileName;\n            document.body.appendChild(a_1);\n            a_1.click();\n            setTimeout(function () {\n              document.body.removeChild(a_1);\n              window.URL.revokeObjectURL(url_1);\n            }, 0);\n          }\n        };\n\n        FileUtils.createFile = function (fileBits, fileName, options) {\n          var _a;\n\n          if (browser_1.Browser.IE || browser_1.Browser.Edge && browser_1.Browser.MajorVersion < 86) {\n            var blob = new Blob(fileBits, options);\n            blob['lastModifiedDate'] = (_a = options === null || options === void 0 ? void 0 : options.lastModified) !== null && _a !== void 0 ? _a : Date.now();\n            blob['name'] = fileName;\n            return blob;\n          } else return new File(fileBits, fileName, options);\n        };\n\n        FileUtils.isFile = function (file) {\n          if (browser_1.Browser.IE || browser_1.Browser.Edge && browser_1.Browser.MajorVersion < 86) return file instanceof File || file instanceof Blob && common_1.isDefined(file.name);else return file instanceof File;\n        };\n\n        return FileUtils;\n      }();\n\n      exports.FileUtils = FileUtils;\n      /***/\n    },\n    /* 177 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var _a, _b, _c;\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.OpenXmlMimeType = 'application/vnd.openxmlformats-officedocument.wordprocessingml.document';\n      exports.RtfMimeType = 'application/rtf';\n      exports.PlainTextMimeType = 'text/plain';\n      exports.DocmMimeType = 'application/vnd.ms-word.document.macroEnabled.12';\n      exports.ImagePngMimeType = 'image/png';\n      exports.ImageGifMimeType = 'image/gif';\n      exports.ImageJpegMimeType = 'image/jpeg';\n      exports.ImagePjpegMimeType = 'image/pjpeg';\n      exports.ImageSvgMimeType = 'image/svg+xml';\n      exports.ImageTiffMimeType = 'image/tiff';\n      exports.ImageIcoMimeType = 'image/vnd.microsoft.icon';\n      exports.ImageWbmpMimeType = 'image/vnd.wap.wbmp';\n      exports.ImageWebpMimeType = 'image/webp';\n      var DxMimeType;\n\n      (function (DxMimeType) {\n        DxMimeType[DxMimeType[\"Unknown\"] = 0] = \"Unknown\";\n        DxMimeType[DxMimeType[\"OpenXml\"] = 1] = \"OpenXml\";\n        DxMimeType[DxMimeType[\"Rtf\"] = 2] = \"Rtf\";\n        DxMimeType[DxMimeType[\"PlainText\"] = 3] = \"PlainText\";\n        DxMimeType[DxMimeType[\"Docm\"] = 4] = \"Docm\";\n        DxMimeType[DxMimeType[\"Png\"] = 5] = \"Png\";\n        DxMimeType[DxMimeType[\"Gif\"] = 6] = \"Gif\";\n        DxMimeType[DxMimeType[\"Jpeg\"] = 7] = \"Jpeg\";\n        DxMimeType[DxMimeType[\"Pjpeg\"] = 8] = \"Pjpeg\";\n        DxMimeType[DxMimeType[\"Svg\"] = 9] = \"Svg\";\n        DxMimeType[DxMimeType[\"Tiff\"] = 10] = \"Tiff\";\n        DxMimeType[DxMimeType[\"Ico\"] = 11] = \"Ico\";\n        DxMimeType[DxMimeType[\"Wbmp\"] = 12] = \"Wbmp\";\n        DxMimeType[DxMimeType[\"Webp\"] = 13] = \"Webp\";\n      })(DxMimeType = exports.DxMimeType || (exports.DxMimeType = {}));\n\n      var MimeTypeUtils = function () {\n        function MimeTypeUtils() {}\n\n        MimeTypeUtils.stringTypeToExtension = function (mimeTypeAsStr) {\n          var mimeType = MimeTypeUtils.stringTypeToTypeMap[mimeTypeAsStr];\n          return mimeType === undefined ? '' : MimeTypeUtils.typeToExtensionMap[mimeType];\n        };\n\n        MimeTypeUtils.typeToExtension = function (mimeType) {\n          var ext = MimeTypeUtils.typeToExtensionMap[mimeType];\n          return ext !== null && ext !== void 0 ? ext : '';\n        };\n\n        MimeTypeUtils.extensionToType = function (extension) {\n          extension = extension.toLowerCase();\n          if (extension[0] !== '.') extension += '.';\n          var mimeType = MimeTypeUtils.extensionToTypeMap[extension];\n          return mimeType !== null && mimeType !== void 0 ? mimeType : DxMimeType.Unknown;\n        };\n\n        MimeTypeUtils.typeToStringType = function (mimeType) {\n          var str = MimeTypeUtils.typeToStringTypeMap[mimeType];\n          return str !== null && str !== void 0 ? str : '';\n        };\n\n        MimeTypeUtils.stringTypeToType = function (mimeTypeAsStr) {\n          var mimeType = MimeTypeUtils.stringTypeToTypeMap[mimeTypeAsStr];\n          return mimeType === undefined ? DxMimeType.Unknown : mimeType;\n        };\n\n        MimeTypeUtils.stringTypeToTypeMap = (_a = {}, _a[exports.OpenXmlMimeType] = DxMimeType.OpenXml, _a[exports.RtfMimeType] = DxMimeType.Rtf, _a[exports.PlainTextMimeType] = DxMimeType.PlainText, _a[exports.DocmMimeType] = DxMimeType.Docm, _a[exports.ImagePngMimeType] = DxMimeType.Png, _a[exports.ImageGifMimeType] = DxMimeType.Gif, _a[exports.ImageJpegMimeType] = DxMimeType.Jpeg, _a[exports.ImagePjpegMimeType] = DxMimeType.Pjpeg, _a[exports.ImageSvgMimeType] = DxMimeType.Svg, _a[exports.ImageTiffMimeType] = DxMimeType.Tiff, _a[exports.ImageIcoMimeType] = DxMimeType.Ico, _a[exports.ImageWbmpMimeType] = DxMimeType.Wbmp, _a[exports.ImageWebpMimeType] = DxMimeType.Webp, _a);\n        MimeTypeUtils.typeToStringTypeMap = (_b = {}, _b[DxMimeType.Unknown] = undefined, _b[DxMimeType.OpenXml] = exports.OpenXmlMimeType, _b[DxMimeType.Rtf] = exports.RtfMimeType, _b[DxMimeType.PlainText] = exports.PlainTextMimeType, _b[DxMimeType.Docm] = exports.DocmMimeType, _b[DxMimeType.Png] = exports.ImagePngMimeType, _b[DxMimeType.Gif] = exports.ImageGifMimeType, _b[DxMimeType.Jpeg] = exports.ImageJpegMimeType, _b[DxMimeType.Pjpeg] = exports.ImagePjpegMimeType, _b[DxMimeType.Svg] = exports.ImageSvgMimeType, _b[DxMimeType.Tiff] = exports.ImageTiffMimeType, _b[DxMimeType.Ico] = exports.ImageIcoMimeType, _b[DxMimeType.Wbmp] = exports.ImageWbmpMimeType, _b[DxMimeType.Webp] = exports.ImageWebpMimeType, _b);\n        MimeTypeUtils.typeToExtensionMap = (_c = {}, _c[DxMimeType.Unknown] = undefined, _c[DxMimeType.OpenXml] = '.docx', _c[DxMimeType.Rtf] = '.rtf', _c[DxMimeType.PlainText] = '.txt', _c[DxMimeType.Docm] = '.docm', _c[DxMimeType.Png] = '.png', _c[DxMimeType.Gif] = '.gif', _c[DxMimeType.Jpeg] = '.jpeg', _c[DxMimeType.Pjpeg] = '.pjpeg', _c[DxMimeType.Svg] = '.svg', _c[DxMimeType.Tiff] = '.tiff', _c[DxMimeType.Ico] = '.ico', _c[DxMimeType.Wbmp] = '.wbmp', _c[DxMimeType.Webp] = '.webp', _c);\n        MimeTypeUtils.extensionToTypeMap = {\n          '.docx': DxMimeType.OpenXml,\n          '.rtf': DxMimeType.Rtf,\n          '.txt': DxMimeType.PlainText,\n          '.docm': DxMimeType.Docm,\n          '.png': DxMimeType.Png,\n          '.gif': DxMimeType.Gif,\n          '.jpeg': DxMimeType.Jpeg,\n          '.pjpeg': DxMimeType.Pjpeg,\n          '.svg': DxMimeType.Svg,\n          '.tiff': DxMimeType.Tiff,\n          '.ico': DxMimeType.Ico,\n          '.wbmp': DxMimeType.Wbmp,\n          '.webp': DxMimeType.Webp\n        };\n        return MimeTypeUtils;\n      }();\n\n      exports.MimeTypeUtils = MimeTypeUtils;\n      /***/\n    },\n    /* 178 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics93 = function extendStatics(d, b) {\n          _extendStatics93 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics93(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics93(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ConnectorPointsCalculator = void 0;\n\n      var ConnectorPointsCalculatorBase_1 = __webpack_require__(112);\n\n      var ConnectorRenderPoint_1 = __webpack_require__(28);\n\n      var ConnectorPointsCalculator =\n      /** @class */\n      function (_super) {\n        __extends(ConnectorPointsCalculator, _super);\n\n        function ConnectorPointsCalculator() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ConnectorPointsCalculator.prototype.getPoints = function () {\n          return this.connector.points.map(function (pt, index) {\n            return new ConnectorRenderPoint_1.ConnectorRenderPoint(pt.x, pt.y, index);\n          });\n        };\n\n        return ConnectorPointsCalculator;\n      }(ConnectorPointsCalculatorBase_1.ConnectorPointsCalculatorBase);\n\n      exports.ConnectorPointsCalculator = ConnectorPointsCalculator;\n      /***/\n    },\n    /* 179 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics94 = function extendStatics(d, b) {\n          _extendStatics94 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics94(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics94(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ConnectorPointsOrthogonalCalculator = void 0;\n\n      var rectangle_1 = __webpack_require__(13);\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      var ConnectorPointsCalculatorBase_1 = __webpack_require__(112);\n\n      var ConnectorPointsOrthogonalUndefinedSideCalculator_1 = __webpack_require__(180);\n\n      var ConnectorPointsOrthogonalSouthSideCalculator_1 = __webpack_require__(181);\n\n      var ConnectorPointsOrthogonalNorthSideCalculator_1 = __webpack_require__(182);\n\n      var ConnectorPointsOrthogonalEastSideCalculator_1 = __webpack_require__(183);\n\n      var ConnectorPointsOrthogonalWestSideCalculator_1 = __webpack_require__(184);\n\n      var ConnectorRenderPoint_1 = __webpack_require__(28);\n\n      var RightAngleConnectorRoutingMathOperations_1 = __webpack_require__(62);\n\n      var ConnectorPointsOrthogonalCalculator =\n      /** @class */\n      function (_super) {\n        __extends(ConnectorPointsOrthogonalCalculator, _super);\n\n        function ConnectorPointsOrthogonalCalculator(connector) {\n          var _this = _super.call(this, connector) || this;\n\n          _this.sideCalculators = {};\n          _this.sideCalculators[DiagramItem_1.ConnectionPointSide.Undefined] = new ConnectorPointsOrthogonalUndefinedSideCalculator_1.ConnectorPointsOrthogonalUndefinedSideCalculator(_this);\n          _this.sideCalculators[DiagramItem_1.ConnectionPointSide.South] = new ConnectorPointsOrthogonalSouthSideCalculator_1.ConnectorPointsOrthogonalSouthSideCalculator(_this);\n          _this.sideCalculators[DiagramItem_1.ConnectionPointSide.North] = new ConnectorPointsOrthogonalNorthSideCalculator_1.ConnectorPointsOrthogonalNorthSideCalculator(_this);\n          _this.sideCalculators[DiagramItem_1.ConnectionPointSide.East] = new ConnectorPointsOrthogonalEastSideCalculator_1.ConnectorPointsOrthogonalEastSideCalculator(_this);\n          _this.sideCalculators[DiagramItem_1.ConnectionPointSide.West] = new ConnectorPointsOrthogonalWestSideCalculator_1.ConnectorPointsOrthogonalWestSideCalculator(_this);\n          return _this;\n        }\n\n        Object.defineProperty(ConnectorPointsOrthogonalCalculator.prototype, \"beginRect\", {\n          get: function get() {\n            return this.connector.beginItem ? this.connector.beginItem.rectangle : undefined;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ConnectorPointsOrthogonalCalculator.prototype, \"endRect\", {\n          get: function get() {\n            return this.connector.endItem ? this.connector.endItem.rectangle : undefined;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ConnectorPointsOrthogonalCalculator.prototype.getPoints = function () {\n          var points = this.connector.points.map(function (pt, index) {\n            return new ConnectorRenderPoint_1.ConnectorRenderPoint(pt.x, pt.y, index);\n          });\n          RightAngleConnectorRoutingMathOperations_1.RightAngleConnectorRoutingMathOperations.removeOrSkipUnnecessaryPoints(points);\n          var beginIndex = 0;\n          var endIndex = points.length - 1;\n          var beginSide = this.getPointSide(points, 0);\n          var beginNextSide = this.getPointSide(points, 1);\n          var endSide = this.getPointSide(points, points.length - 1);\n          var endPrevSide = this.getPointSide(points, points.length - 1 - 1);\n          var beginSideCalculator = this.getSideCalculator(beginSide);\n          var endSideCalculator = this.getSideCalculator(endSide);\n          var originRect = this.beginRect;\n          var originPoint = beginSideCalculator.getCorrectOriginPoint(points[beginIndex], originRect);\n          var targetPoint = points[beginIndex + 1];\n\n          if (points.length === 2 && beginSideCalculator.isOnSidePoint(originPoint, targetPoint) && beginSideCalculator.isDirectConnectionAllowed(beginNextSide, originPoint, targetPoint)) {\n            var directConnectionPoints = beginSideCalculator.getDirectConnectionPoints(originPoint, targetPoint);\n            directConnectionPoints.forEach(function (pt) {\n              points.splice(beginIndex + 1, 0, pt);\n              beginIndex++;\n              endIndex++;\n            });\n          } else {\n            var bOffsetPoints = beginSideCalculator.getBeginOffsetPoints(beginNextSide, points[beginIndex], points[beginIndex + 1], this.beginRect);\n            bOffsetPoints.forEach(function (pt) {\n              points.splice(beginIndex + 1, 0, pt);\n            });\n            beginIndex += bOffsetPoints.length;\n            endIndex += bOffsetPoints.length;\n            var eOffsetPoints = endSideCalculator.getEndOffsetPoints(endPrevSide, points[endIndex], points[endIndex - 1], this.endRect);\n            eOffsetPoints.forEach(function (pt, index) {\n              points.splice(endIndex + index, 0, pt);\n            });\n            this.addMiddlePoints(points, beginIndex, endIndex);\n          }\n\n          RightAngleConnectorRoutingMathOperations_1.RightAngleConnectorRoutingMathOperations.removeOrSkipUnnecessaryPoints(points);\n          return points;\n        };\n\n        ConnectorPointsOrthogonalCalculator.prototype.getSideCalculator = function (side) {\n          return this.sideCalculators[side];\n        };\n\n        ConnectorPointsOrthogonalCalculator.prototype.getPointSide = function (points, index) {\n          if (index === 0 && this.connector.beginItem) {\n            var connectionPointIndex = this.connector.beginConnectionPointIndex;\n            return this.connector.beginItem.getConnectionPointSideByIndex(connectionPointIndex, points[1]);\n          }\n\n          if (index === points.length - 1 && this.connector.endItem) {\n            var connectionPointIndex = this.connector.endConnectionPointIndex;\n            return this.connector.endItem.getConnectionPointSideByIndex(connectionPointIndex, points[points.length - 2]);\n          }\n\n          return DiagramItem_1.ConnectionPointSide.Undefined;\n        };\n\n        ConnectorPointsOrthogonalCalculator.prototype.addMiddlePoints = function (points, beginIndex, endIndex) {\n          for (var index = beginIndex; index < endIndex; index++) {\n            var nextIndex = index + 1;\n            var middlePoint = this.getMiddlePoint(points[index], points[index - 1], index - 1 === 0, points[nextIndex], points[nextIndex + 1], nextIndex + 1 === points.length - 1);\n\n            if (middlePoint !== undefined) {\n              points.splice(index + 1, 0, middlePoint);\n              index++;\n              endIndex++;\n            }\n          }\n        };\n\n        ConnectorPointsOrthogonalCalculator.prototype.getMiddlePoints = function (point1, point2) {\n          if (point1.x === point2.x || point1.y === point2.y) return [];\n          return [new ConnectorRenderPoint_1.ConnectorRenderPoint(point1.x, point2.y), new ConnectorRenderPoint_1.ConnectorRenderPoint(point2.x, point1.y)];\n        };\n\n        ConnectorPointsOrthogonalCalculator.prototype.getMiddlePoint = function (point1, directionPoint1, nextToBegin, point2, directionPoint2, nextToEnd) {\n          var _this = this;\n\n          var point;\n          var points = this.getMiddlePoints(point1, point2);\n          points.forEach(function (pt) {\n            var rect1 = _this.createPointsRect(point1, pt);\n\n            var rect2 = _this.createPointsRect(pt, point2);\n\n            var itemRect1 = _this.connector.beginItem ? _this.connector.beginItem.rectangle : undefined;\n            var itemRect2 = _this.connector.endItem ? _this.connector.endItem.rectangle : undefined;\n            if (itemRect1) if (rectangle_1.Rectangle.areIntersected(itemRect1, rect1) || rectangle_1.Rectangle.areIntersected(itemRect1, rect2)) return;\n            if (itemRect2) if (rectangle_1.Rectangle.areIntersected(itemRect2, rect1) || rectangle_1.Rectangle.areIntersected(itemRect2, rect2)) return;\n            if ((!_this.isReturnPoint(pt, point1, directionPoint1) || _this.isIntermediatePoints(point1, directionPoint1)) && (!_this.isReturnPoint(pt, point2, directionPoint2) || _this.isIntermediatePoints(point2, directionPoint2))) if (point === undefined) point = pt;else if (_this.isPriorMiddlePoint(pt, point1, directionPoint1, point2, directionPoint2)) point = pt;\n          });\n          if (point === undefined && points.length > 0) point = points[0];\n          return point;\n        };\n\n        ConnectorPointsOrthogonalCalculator.prototype.createPointsRect = function (point1, point2) {\n          var result = rectangle_1.Rectangle.fromPoints(point1, point2);\n          if (result.width > 0) result = result.clone().inflate(-1, 0);\n          if (result.height > 0) result = result.clone().inflate(0, -1);\n          return result;\n        };\n\n        ConnectorPointsOrthogonalCalculator.prototype.isPriorMiddlePoint = function (point, point1, directionPoint1, point2, directionPoint2) {\n          if (directionPoint1) if (point.x === directionPoint1.x || point.y === directionPoint1.y) return true;\n          if (directionPoint2) if (point.x === directionPoint2.x || point.y === directionPoint2.y) return true;\n          return false;\n        };\n\n        ConnectorPointsOrthogonalCalculator.prototype.isReturnPoint = function (point, point1, point2) {\n          if (point1 !== undefined && point2 !== undefined) {\n            if (point.x === point2.x) if (point1.y < point.y && point.y < point2.y || point1.y > point.y && point.y > point2.y) return true;\n            if (point.y === point2.y) if (point1.x < point.x && point.x < point2.x || point1.x > point.x && point.x > point2.x) return true;\n          }\n\n          return false;\n        };\n\n        ConnectorPointsOrthogonalCalculator.prototype.isIntermediatePoints = function (point1, point2) {\n          return 0 < point1.pointIndex && point1.pointIndex < this.connector.points.length - 1 && 0 < point2.pointIndex && point2.pointIndex < this.connector.points.length - 1;\n        };\n\n        return ConnectorPointsOrthogonalCalculator;\n      }(ConnectorPointsCalculatorBase_1.ConnectorPointsCalculatorBase);\n\n      exports.ConnectorPointsOrthogonalCalculator = ConnectorPointsOrthogonalCalculator;\n      /***/\n    },\n    /* 180 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics95 = function extendStatics(d, b) {\n          _extendStatics95 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics95(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics95(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ConnectorPointsOrthogonalUndefinedSideCalculator = void 0;\n\n      var ConnectorPointsOrthogonalSideCalculatorBase_1 = __webpack_require__(50);\n\n      var ConnectorRenderPoint_1 = __webpack_require__(28);\n\n      var ConnectorPointsOrthogonalUndefinedSideCalculator =\n      /** @class */\n      function (_super) {\n        __extends(ConnectorPointsOrthogonalUndefinedSideCalculator, _super);\n\n        function ConnectorPointsOrthogonalUndefinedSideCalculator(parent) {\n          return _super.call(this, parent) || this;\n        }\n\n        ConnectorPointsOrthogonalUndefinedSideCalculator.prototype.getCorrectOriginPoint = function (originPoint, originRect) {\n          return originPoint;\n        };\n\n        ConnectorPointsOrthogonalUndefinedSideCalculator.prototype.getSameShapeOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [];\n        };\n\n        ConnectorPointsOrthogonalUndefinedSideCalculator.prototype.getOverlappedPointsOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [];\n        };\n\n        ConnectorPointsOrthogonalUndefinedSideCalculator.prototype.getBeginOverlappedShapeOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [];\n        };\n\n        ConnectorPointsOrthogonalUndefinedSideCalculator.prototype.getEndOverlappedShapeOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [];\n        };\n\n        ConnectorPointsOrthogonalUndefinedSideCalculator.prototype.getBeginOnSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [];\n        };\n\n        ConnectorPointsOrthogonalUndefinedSideCalculator.prototype.getEndOnSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [];\n        };\n\n        ConnectorPointsOrthogonalUndefinedSideCalculator.prototype.getBeginOffSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [];\n        };\n\n        ConnectorPointsOrthogonalUndefinedSideCalculator.prototype.getEndOffSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [];\n        };\n\n        ConnectorPointsOrthogonalUndefinedSideCalculator.prototype.isOnSidePoint = function (originPoint, targetPoint) {\n          return true;\n        };\n\n        ConnectorPointsOrthogonalUndefinedSideCalculator.prototype.isDirectConnectionAllowed = function (targetSide, originPoint, targetPoint) {\n          var calculator = this.getSideCalculator(originPoint, targetPoint);\n          if (calculator !== undefined) return calculator.isDirectConnectionAllowed(targetSide, originPoint, targetPoint);\n          return true;\n        };\n\n        ConnectorPointsOrthogonalUndefinedSideCalculator.prototype.getDirectConnectionPoints = function (originPoint, targetPoint) {\n          var diffX = Math.abs(targetPoint.x - originPoint.x);\n          var diffY = Math.abs(targetPoint.y - originPoint.y);\n\n          if (diffX > diffY) {\n            var minX = Math.min(originPoint.x, targetPoint.x);\n            var cx = minX + diffX / 2;\n            return [new ConnectorRenderPoint_1.ConnectorRenderPoint(cx, originPoint.y), new ConnectorRenderPoint_1.ConnectorRenderPoint(cx, targetPoint.y)];\n          } else {\n            var minY = Math.min(originPoint.y, targetPoint.y);\n            var cy = minY + diffY / 2;\n            return [new ConnectorRenderPoint_1.ConnectorRenderPoint(originPoint.x, cy), new ConnectorRenderPoint_1.ConnectorRenderPoint(targetPoint.x, cy)];\n          }\n        };\n\n        return ConnectorPointsOrthogonalUndefinedSideCalculator;\n      }(ConnectorPointsOrthogonalSideCalculatorBase_1.ConnectorPointsOrthogonalSideCalculatorBase);\n\n      exports.ConnectorPointsOrthogonalUndefinedSideCalculator = ConnectorPointsOrthogonalUndefinedSideCalculator;\n      /***/\n    },\n    /* 181 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics96 = function extendStatics(d, b) {\n          _extendStatics96 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics96(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics96(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ConnectorPointsOrthogonalSouthSideCalculator = void 0;\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      var ConnectorPointsOrthogonalSideCalculatorBase_1 = __webpack_require__(50);\n\n      var ConnectorRenderPoint_1 = __webpack_require__(28);\n\n      var ConnectorPointsOrthogonalSouthSideCalculator =\n      /** @class */\n      function (_super) {\n        __extends(ConnectorPointsOrthogonalSouthSideCalculator, _super);\n\n        function ConnectorPointsOrthogonalSouthSideCalculator(parent) {\n          return _super.call(this, parent) || this;\n        }\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.getCorrectOriginPoint = function (originPoint, originRect) {\n          if (originPoint.y < originRect.bottom) originPoint = originPoint.clone().offset(0, originRect.bottom - originPoint.y);\n          return originPoint;\n        };\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.getSameShapeOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.East:\n            case DiagramItem_1.ConnectionPointSide.West:\n            case DiagramItem_1.ConnectionPointSide.South:\n              return [originPoint.clone().offset(0, this.getMinOffset())];\n\n            case DiagramItem_1.ConnectionPointSide.North:\n              return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset());\n          }\n        };\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.getOverlappedPointsOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.South:\n              return [originPoint.clone().offset(0, this.getMinOffset())];\n\n            case DiagramItem_1.ConnectionPointSide.North:\n              return [originPoint.clone().offset(0, -this.getMinOffset())];\n          }\n\n          return [];\n        };\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.getBeginOverlappedShapeOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.East:\n              if (originPoint.y < targetPoint.y) if (originPoint.x > targetPoint.x) return [];else return [originPoint.clone().offset(0, this.getMinOffset())];\n              if (originPoint.y > this.endRect.bottom) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), false);\n              return [originPoint.clone().offset(0, this.getMinOffset())];\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              if (originPoint.y < targetPoint.y) if (originPoint.x < targetPoint.x) return [];else return [originPoint.clone().offset(0, this.getMinOffset())];\n              if (originPoint.y > this.endRect.bottom) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), true);\n              return [originPoint.clone().offset(0, this.getMinOffset())];\n\n            case DiagramItem_1.ConnectionPointSide.South:\n              return [originPoint.clone().offset(0, this.getMinOffset())];\n\n            case DiagramItem_1.ConnectionPointSide.North:\n              return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), originPoint.x < targetPoint.x);\n          }\n        };\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.getEndOverlappedShapeOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.East:\n              if (targetPoint.y < originPoint.y) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), false);\n              if (originPoint.x < targetPoint.x) return [originPoint.clone().offset(0, this.getMinOffset())];\n              return [];\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              if (targetPoint.y < originPoint.y) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), true);\n              if (originPoint.x > targetPoint.x) return [originPoint.clone().offset(0, this.getMinOffset())];\n              return [];\n\n            case DiagramItem_1.ConnectionPointSide.South:\n              return [originPoint.clone().offset(0, this.getMinOffset())];\n\n            case DiagramItem_1.ConnectionPointSide.North:\n              {\n                var offset = this.getMinOffset();\n                if (this.beginRect.bottom > originPoint.y) offset += this.beginRect.bottom - originPoint.y;\n                return [originPoint.clone().offset(0, offset)];\n              }\n          }\n        };\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.getBeginOnSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [originPoint.clone().offset(0, this.getScaleableOffsetY(originPoint, targetPoint, false))];\n        };\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.getEndOnSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [originPoint.clone().offset(0, this.getScaleableOffsetY(originPoint, targetPoint, true))];\n        };\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.getBeginOffSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.East:\n              if (this.isBeginEndOverlappedX()) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false, false);\n              break;\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              if (this.isBeginEndOverlappedX()) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false, true);\n              break;\n\n            case DiagramItem_1.ConnectionPointSide.South:\n              if (this.isBeginEndOverlappedX()) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false);\n              break;\n\n            case DiagramItem_1.ConnectionPointSide.Undefined:\n            case DiagramItem_1.ConnectionPointSide.North:\n              return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false);\n          }\n\n          return [originPoint.clone().offset(0, this.getScaleableOffsetY(originPoint, targetPoint, false))];\n        };\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.getEndOffSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          if (targetSide === DiagramItem_1.ConnectionPointSide.Undefined) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, true);else if (this.isBeginEndOverlappedX()) {\n            var direction = this.beginRect.center.x > this.endRect.center.x;\n            return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, true, direction);\n          }\n          return [originPoint.clone().offset(0, this.getScaleableOffsetY(originPoint, targetPoint, true))];\n        };\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.getAsideOffsetPoints = function (originPoint, targetPoint, originRect, offset, asideOffset, direction) {\n          var points = [];\n\n          if (originRect !== undefined) {\n            if (direction === undefined) direction = targetPoint.x < originPoint.x;\n            if (direction) points.push(originPoint.clone().offset(-(originPoint.x - originRect.x + asideOffset), offset));else points.push(originPoint.clone().offset(originRect.right - originPoint.x + asideOffset, offset));\n          }\n\n          points.push(originPoint.clone().offset(0, offset));\n          return points;\n        };\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.getScaleableAsideOffsetPoints = function (originPoint, targetPoint, originRect, isEnd, direction) {\n          var offset = this.getScaleableOffsetY(originPoint, targetPoint, isEnd);\n          var asideOffset = this.getScaleableOffsetX(originPoint, targetPoint, isEnd);\n          return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, offset, asideOffset, direction);\n        };\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.getScaleableOffsetX = function (originPoint, targetPoint, isEnd) {\n          if (this.beginRect && this.endRect) if (!isEnd && !this.isBeginEndOverlappedX()) {\n            var distance = void 0;\n            if (targetPoint.x < originPoint.x) distance = this.beginRect.x - this.endRect.right;else distance = this.endRect.x - this.beginRect.right;\n            if (distance < this.getMinOffset() * 2) return distance / 2;\n          }\n          return this.getMinOffset();\n        };\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.getScaleableOffsetY = function (originPoint, targetPoint, isEnd) {\n          if (this.beginRect && this.endRect) {\n            var distance = isEnd ? this.beginRect.y - originPoint.y : this.endRect.y - originPoint.y;\n            if (distance > 0 && distance < this.getMinOffset() * 2) return distance / 2;\n          }\n\n          return this.getMinOffset();\n        };\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.isOnSidePoint = function (originPoint, targetPoint) {\n          return targetPoint.y > originPoint.y;\n        };\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.isDirectConnectionAllowed = function (targetSide, originPoint, targetPoint) {\n          return targetSide === DiagramItem_1.ConnectionPointSide.North || targetSide === DiagramItem_1.ConnectionPointSide.Undefined;\n        };\n\n        ConnectorPointsOrthogonalSouthSideCalculator.prototype.getDirectConnectionPoints = function (originPoint, targetPoint) {\n          var cy = originPoint.y + (targetPoint.y - originPoint.y) / 2;\n          return [new ConnectorRenderPoint_1.ConnectorRenderPoint(originPoint.x, cy), new ConnectorRenderPoint_1.ConnectorRenderPoint(targetPoint.x, cy)];\n        };\n\n        return ConnectorPointsOrthogonalSouthSideCalculator;\n      }(ConnectorPointsOrthogonalSideCalculatorBase_1.ConnectorPointsOrthogonalSideCalculatorBase);\n\n      exports.ConnectorPointsOrthogonalSouthSideCalculator = ConnectorPointsOrthogonalSouthSideCalculator;\n      /***/\n    },\n    /* 182 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics97 = function extendStatics(d, b) {\n          _extendStatics97 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics97(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics97(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ConnectorPointsOrthogonalNorthSideCalculator = void 0;\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      var ConnectorPointsOrthogonalSideCalculatorBase_1 = __webpack_require__(50);\n\n      var ConnectorRenderPoint_1 = __webpack_require__(28);\n\n      var ConnectorPointsOrthogonalNorthSideCalculator =\n      /** @class */\n      function (_super) {\n        __extends(ConnectorPointsOrthogonalNorthSideCalculator, _super);\n\n        function ConnectorPointsOrthogonalNorthSideCalculator(parent) {\n          return _super.call(this, parent) || this;\n        }\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.getCorrectOriginPoint = function (originPoint, originRect) {\n          if (originPoint.y > originRect.y) originPoint = originPoint.clone().offset(0, originRect.y - originPoint.y);\n          return originPoint;\n        };\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.getSameShapeOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.East:\n            case DiagramItem_1.ConnectionPointSide.West:\n            case DiagramItem_1.ConnectionPointSide.North:\n              return [originPoint.clone().offset(0, -this.getMinOffset())];\n\n            case DiagramItem_1.ConnectionPointSide.South:\n              return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset());\n          }\n        };\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.getOverlappedPointsOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.South:\n              return [originPoint.clone().offset(0, this.getMinOffset())];\n\n            case DiagramItem_1.ConnectionPointSide.North:\n              return [originPoint.clone().offset(0, -this.getMinOffset())];\n          }\n\n          return [];\n        };\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.getBeginOverlappedShapeOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.East:\n              if (originPoint.y > targetPoint.y) if (originPoint.x > targetPoint.x) return [];else return [originPoint.clone().offset(0, -this.getMinOffset())];\n              if (originPoint.y < this.endRect.y) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), false);\n              return [originPoint.clone().offset(0, -this.getMinOffset())];\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              if (originPoint.y > targetPoint.y) if (originPoint.x < targetPoint.x) return [];else return [originPoint.clone().offset(0, -this.getMinOffset())];\n              if (originPoint.y < this.endRect.y) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), true);\n              return [originPoint.clone().offset(0, -this.getMinOffset())];\n\n            case DiagramItem_1.ConnectionPointSide.North:\n              return [originPoint.clone().offset(0, -this.getMinOffset())];\n\n            case DiagramItem_1.ConnectionPointSide.South:\n              return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), originPoint.x < targetPoint.x);\n          }\n        };\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.getEndOverlappedShapeOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.East:\n              if (targetPoint.y > originPoint.y) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), false);\n              if (originPoint.x < targetPoint.x) return [originPoint.clone().offset(0, -this.getMinOffset())];\n              return [];\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              if (targetPoint.y > originPoint.y) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), true);\n              if (originPoint.x > targetPoint.x) return [originPoint.clone().offset(0, -this.getMinOffset())];\n              return [];\n\n            case DiagramItem_1.ConnectionPointSide.North:\n              return [originPoint.clone().offset(0, -this.getMinOffset())];\n\n            case DiagramItem_1.ConnectionPointSide.South:\n              {\n                var offset = -this.getMinOffset();\n                if (this.beginRect.y < originPoint.y) offset -= originPoint.y - this.beginRect.y;\n                return [originPoint.clone().offset(0, offset)];\n              }\n          }\n        };\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.getBeginOnSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [originPoint.clone().offset(0, -this.getScaleableOffsetY(originPoint, targetPoint, false))];\n        };\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.getEndOnSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [originPoint.clone().offset(0, -this.getScaleableOffsetY(originPoint, targetPoint, true))];\n        };\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.getBeginOffSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.East:\n              if (this.isBeginEndOverlappedX()) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false, false);\n              break;\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              if (this.isBeginEndOverlappedX()) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false, true);\n              break;\n\n            case DiagramItem_1.ConnectionPointSide.North:\n              if (this.isBeginEndOverlappedX()) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false);\n              break;\n\n            case DiagramItem_1.ConnectionPointSide.Undefined:\n            case DiagramItem_1.ConnectionPointSide.South:\n              return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false);\n          }\n\n          return [originPoint.clone().offset(0, -this.getScaleableOffsetY(originPoint, targetPoint, false))];\n        };\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.getEndOffSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          if (targetSide === DiagramItem_1.ConnectionPointSide.Undefined) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, true);else if (this.isBeginEndOverlappedX()) {\n            var direction = this.beginRect.center.x > this.endRect.center.x;\n            return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, true, direction);\n          }\n          return [originPoint.clone().offset(0, -this.getScaleableOffsetY(originPoint, targetPoint, true))];\n        };\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.getAsideOffsetPoints = function (originPoint, targetPoint, originRect, offset, asideOffset, direction) {\n          var points = [];\n\n          if (originRect !== undefined) {\n            if (direction === undefined) direction = targetPoint.x < originPoint.x;\n            if (direction) points.push(originPoint.clone().offset(-(originPoint.x - originRect.x + asideOffset), -offset));else points.push(originPoint.clone().offset(originRect.right - originPoint.x + asideOffset, -offset));\n          }\n\n          points.push(originPoint.clone().offset(0, -offset));\n          return points;\n        };\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.getScaleableAsideOffsetPoints = function (originPoint, targetPoint, originRect, isEnd, direction) {\n          var offset = this.getScaleableOffsetY(originPoint, targetPoint, isEnd);\n          var asideOffset = this.getScaleableOffsetX(originPoint, targetPoint, isEnd);\n          return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, offset, asideOffset, direction);\n        };\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.getScaleableOffsetX = function (originPoint, targetPoint, isEnd) {\n          if (this.beginRect && this.endRect) if (!isEnd && !this.isBeginEndOverlappedX()) {\n            var distance = void 0;\n            if (targetPoint.x < originPoint.x) distance = this.beginRect.x - this.endRect.right;else distance = this.endRect.x - this.beginRect.right;\n            if (distance < this.getMinOffset() * 2) return distance / 2;\n          }\n          return this.getMinOffset();\n        };\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.getScaleableOffsetY = function (originPoint, targetPoint, isEnd) {\n          if (this.beginRect && this.endRect) {\n            var distance = isEnd ? originPoint.y - this.beginRect.bottom : originPoint.y - this.endRect.bottom;\n            if (distance > 0 && distance < this.getMinOffset() * 2) return distance / 2;\n          }\n\n          return this.getMinOffset();\n        };\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.isOnSidePoint = function (originPoint, targetPoint) {\n          return targetPoint.y < originPoint.y;\n        };\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.isDirectConnectionAllowed = function (targetSide, originPoint, targetPoint) {\n          return targetSide === DiagramItem_1.ConnectionPointSide.South || targetSide === DiagramItem_1.ConnectionPointSide.Undefined;\n        };\n\n        ConnectorPointsOrthogonalNorthSideCalculator.prototype.getDirectConnectionPoints = function (originPoint, targetPoint) {\n          var cy = targetPoint.y + (originPoint.y - targetPoint.y) / 2;\n          return [new ConnectorRenderPoint_1.ConnectorRenderPoint(originPoint.x, cy), new ConnectorRenderPoint_1.ConnectorRenderPoint(targetPoint.x, cy)];\n        };\n\n        return ConnectorPointsOrthogonalNorthSideCalculator;\n      }(ConnectorPointsOrthogonalSideCalculatorBase_1.ConnectorPointsOrthogonalSideCalculatorBase);\n\n      exports.ConnectorPointsOrthogonalNorthSideCalculator = ConnectorPointsOrthogonalNorthSideCalculator;\n      /***/\n    },\n    /* 183 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics98 = function extendStatics(d, b) {\n          _extendStatics98 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics98(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics98(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ConnectorPointsOrthogonalEastSideCalculator = void 0;\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      var ConnectorPointsOrthogonalSideCalculatorBase_1 = __webpack_require__(50);\n\n      var ConnectorRenderPoint_1 = __webpack_require__(28);\n\n      var ConnectorPointsOrthogonalEastSideCalculator =\n      /** @class */\n      function (_super) {\n        __extends(ConnectorPointsOrthogonalEastSideCalculator, _super);\n\n        function ConnectorPointsOrthogonalEastSideCalculator(parent) {\n          return _super.call(this, parent) || this;\n        }\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.getCorrectOriginPoint = function (originPoint, originRect) {\n          if (originPoint.x < originRect.right) originPoint = originPoint.clone().offset(originRect.right - originPoint.x, 0);\n          return originPoint;\n        };\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.getSameShapeOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.North:\n            case DiagramItem_1.ConnectionPointSide.South:\n            case DiagramItem_1.ConnectionPointSide.East:\n              return [originPoint.clone().offset(this.getMinOffset(), 0)];\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset());\n          }\n        };\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.getOverlappedPointsOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.East:\n              return [originPoint.clone().offset(this.getMinOffset(), 0)];\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              return [originPoint.clone().offset(-this.getMinOffset(), 0)];\n          }\n\n          return [];\n        };\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.getBeginOverlappedShapeOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.North:\n              if (originPoint.x < targetPoint.x) if (originPoint.y < targetPoint.y) return [];else return [originPoint.clone().offset(this.getMinOffset(), 0)];\n              if (originPoint.x > this.endRect.right) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), true);\n              return [originPoint.clone().offset(this.getMinOffset(), 0)];\n\n            case DiagramItem_1.ConnectionPointSide.South:\n              if (originPoint.x < targetPoint.x) if (originPoint.y > targetPoint.y) return [];else return [originPoint.clone().offset(this.getMinOffset(), 0)];\n              if (originPoint.x > this.endRect.right) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), false);\n              return [originPoint.clone().offset(this.getMinOffset(), 0)];\n\n            case DiagramItem_1.ConnectionPointSide.East:\n              return [originPoint.clone().offset(this.getMinOffset(), 0)];\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), originPoint.y < targetPoint.y);\n          }\n        };\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.getEndOverlappedShapeOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.East:\n              return [originPoint.clone().offset(this.getMinOffset(), 0)];\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              {\n                var offset = this.getMinOffset();\n                if (this.beginRect.right > originPoint.x) offset += this.beginRect.right - originPoint.x;\n                return [originPoint.clone().offset(offset, 0)];\n              }\n\n            case DiagramItem_1.ConnectionPointSide.North:\n              if (targetPoint.x < originPoint.x) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), true);\n              if (originPoint.y > targetPoint.y) return [originPoint.clone().offset(this.getMinOffset(), 0)];\n              return [];\n\n            case DiagramItem_1.ConnectionPointSide.South:\n              if (targetPoint.x < originPoint.x) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), false);\n              if (originPoint.y < targetPoint.y) return [originPoint.clone().offset(this.getMinOffset(), 0)];\n              return [];\n          }\n        };\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.getBeginOnSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [originPoint.clone().offset(this.getScaleableOffsetX(originPoint, targetPoint, false), 0)];\n        };\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.getEndOnSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [originPoint.clone().offset(this.getScaleableOffsetX(originPoint, targetPoint, true), 0)];\n        };\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.getBeginOffSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.South:\n              if (this.isBeginEndOverlappedY()) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false, false);\n              break;\n\n            case DiagramItem_1.ConnectionPointSide.North:\n              if (this.isBeginEndOverlappedY()) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false, true);\n              break;\n\n            case DiagramItem_1.ConnectionPointSide.East:\n              if (this.isBeginEndOverlappedY()) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false);\n              break;\n\n            case DiagramItem_1.ConnectionPointSide.Undefined:\n            case DiagramItem_1.ConnectionPointSide.West:\n              return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false);\n          }\n\n          return [originPoint.clone().offset(this.getScaleableOffsetX(originPoint, targetPoint, false), 0)];\n        };\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.getEndOffSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          if (targetSide === DiagramItem_1.ConnectionPointSide.Undefined) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, true);else if (this.isBeginEndOverlappedY()) {\n            var direction = this.beginRect.center.y > this.endRect.center.y;\n            return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, true, direction);\n          }\n          return [originPoint.clone().offset(this.getScaleableOffsetX(originPoint, targetPoint, true), 0)];\n        };\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.getAsideOffsetPoints = function (originPoint, targetPoint, originRect, offset, asideOffset, direction) {\n          var points = [];\n\n          if (originRect !== undefined) {\n            if (direction === undefined) direction = targetPoint.y < originPoint.y;\n            if (direction) points.push(originPoint.clone().offset(offset, -(originPoint.y - originRect.y + asideOffset)));else points.push(originPoint.clone().offset(offset, originRect.bottom - originPoint.y + asideOffset));\n          }\n\n          points.push(originPoint.clone().offset(offset, 0));\n          return points;\n        };\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.getScaleableAsideOffsetPoints = function (originPoint, targetPoint, originRect, isEnd, direction) {\n          var offset = this.getScaleableOffsetX(originPoint, targetPoint, isEnd);\n          var asideOffset = this.getScaleableOffsetY(originPoint, targetPoint, isEnd);\n          return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, offset, asideOffset, direction);\n        };\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.getScaleableOffsetX = function (originPoint, targetPoint, isEnd) {\n          if (this.beginRect && this.endRect) {\n            var distance = isEnd ? this.beginRect.x - originPoint.x : this.endRect.x - originPoint.x;\n            if (distance > 0 && distance < this.getMinOffset() * 2) return distance / 2;\n          }\n\n          return this.getMinOffset();\n        };\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.getScaleableOffsetY = function (originPoint, targetPoint, isEnd) {\n          if (this.beginRect && this.endRect) if (!isEnd && !this.isBeginEndOverlappedY()) {\n            var distance = void 0;\n            if (targetPoint.y < originPoint.y) distance = this.beginRect.y - this.endRect.bottom;else distance = this.endRect.y - this.beginRect.bottom;\n            if (distance < this.getMinOffset() * 2) return distance / 2;\n          }\n          return this.getMinOffset();\n        };\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.isOnSidePoint = function (originPoint, targetPoint) {\n          return targetPoint.x > originPoint.x;\n        };\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.isDirectConnectionAllowed = function (targetSide, originPoint, targetPoint) {\n          return targetSide === DiagramItem_1.ConnectionPointSide.West || targetSide === DiagramItem_1.ConnectionPointSide.Undefined;\n        };\n\n        ConnectorPointsOrthogonalEastSideCalculator.prototype.getDirectConnectionPoints = function (originPoint, targetPoint) {\n          var cx = originPoint.x + (targetPoint.x - originPoint.x) / 2;\n          return [new ConnectorRenderPoint_1.ConnectorRenderPoint(cx, originPoint.y), new ConnectorRenderPoint_1.ConnectorRenderPoint(cx, targetPoint.y)];\n        };\n\n        return ConnectorPointsOrthogonalEastSideCalculator;\n      }(ConnectorPointsOrthogonalSideCalculatorBase_1.ConnectorPointsOrthogonalSideCalculatorBase);\n\n      exports.ConnectorPointsOrthogonalEastSideCalculator = ConnectorPointsOrthogonalEastSideCalculator;\n      /***/\n    },\n    /* 184 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics99 = function extendStatics(d, b) {\n          _extendStatics99 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics99(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics99(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ConnectorPointsOrthogonalWestSideCalculator = void 0;\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      var ConnectorPointsOrthogonalSideCalculatorBase_1 = __webpack_require__(50);\n\n      var ConnectorRenderPoint_1 = __webpack_require__(28);\n\n      var ConnectorPointsOrthogonalWestSideCalculator =\n      /** @class */\n      function (_super) {\n        __extends(ConnectorPointsOrthogonalWestSideCalculator, _super);\n\n        function ConnectorPointsOrthogonalWestSideCalculator(parent) {\n          return _super.call(this, parent) || this;\n        }\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.getCorrectOriginPoint = function (originPoint, originRect) {\n          if (originPoint.x > originRect.x) originPoint = originPoint.clone().offset(originRect.x - originPoint.x, 0);\n          return originPoint;\n        };\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.getSameShapeOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.North:\n            case DiagramItem_1.ConnectionPointSide.South:\n            case DiagramItem_1.ConnectionPointSide.West:\n              return [originPoint.clone().offset(-this.getMinOffset(), 0)];\n\n            case DiagramItem_1.ConnectionPointSide.East:\n              return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset());\n          }\n        };\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.getOverlappedPointsOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.East:\n              return [originPoint.clone().offset(this.getMinOffset(), 0)];\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              return [originPoint.clone().offset(-this.getMinOffset(), 0)];\n          }\n\n          return [];\n        };\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.getBeginOverlappedShapeOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.North:\n              if (originPoint.x > targetPoint.x) if (originPoint.y < targetPoint.y) return [];else return [originPoint.clone().offset(-this.getMinOffset(), 0)];\n              if (originPoint.x < this.endRect.x) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), true);\n              return [originPoint.clone().offset(-this.getMinOffset(), 0)];\n\n            case DiagramItem_1.ConnectionPointSide.South:\n              if (originPoint.x > targetPoint.x) if (originPoint.y > targetPoint.y) return [];else return [originPoint.clone().offset(-this.getMinOffset(), 0)];\n              if (originPoint.x < this.endRect.x) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), false);\n              return [originPoint.clone().offset(-this.getMinOffset(), 0)];\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              return [originPoint.clone().offset(-this.getMinOffset(), 0)];\n\n            case DiagramItem_1.ConnectionPointSide.East:\n              return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), originPoint.y < targetPoint.y);\n          }\n        };\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.getEndOverlappedShapeOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.East:\n              {\n                var offset = -this.getMinOffset();\n                if (this.beginRect.x < originPoint.x) offset -= originPoint.x - this.beginRect.x;\n                return [originPoint.clone().offset(offset, 0)];\n              }\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              return [originPoint.clone().offset(-this.getMinOffset(), 0)];\n\n            case DiagramItem_1.ConnectionPointSide.North:\n              if (targetPoint.x > originPoint.x) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), true);\n              if (originPoint.y > targetPoint.y) return [originPoint.clone().offset(-this.getMinOffset(), 0)];\n              return [];\n\n            case DiagramItem_1.ConnectionPointSide.South:\n              if (targetPoint.x > originPoint.x) return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, this.getMinOffset(), this.getMinOffset(), false);\n              if (originPoint.y < targetPoint.y) return [originPoint.clone().offset(-this.getMinOffset(), 0)];\n              return [];\n          }\n        };\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.getBeginOnSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [originPoint.clone().offset(-this.getScaleableOffsetX(originPoint, false), 0)];\n        };\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.getEndOnSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          return [originPoint.clone().offset(-this.getScaleableOffsetX(originPoint, true), 0)];\n        };\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.getBeginOffSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          switch (targetSide) {\n            case DiagramItem_1.ConnectionPointSide.South:\n              if (this.isBeginEndOverlappedY()) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false, false);\n              break;\n\n            case DiagramItem_1.ConnectionPointSide.North:\n              if (this.isBeginEndOverlappedY()) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false, true);\n              break;\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              if (this.isBeginEndOverlappedY()) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false);\n              break;\n\n            case DiagramItem_1.ConnectionPointSide.Undefined:\n            case DiagramItem_1.ConnectionPointSide.East:\n              return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, false);\n          }\n\n          return [originPoint.clone().offset(-this.getScaleableOffsetX(originPoint, false), 0)];\n        };\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.getEndOffSideOffsetPoints = function (targetSide, originPoint, targetPoint, originRect) {\n          if (targetSide === DiagramItem_1.ConnectionPointSide.Undefined) return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, true);else if (this.isBeginEndOverlappedY()) {\n            var direction = this.beginRect.center.y > this.endRect.center.y;\n            return this.getScaleableAsideOffsetPoints(originPoint, targetPoint, originRect, true, direction);\n          }\n          return [originPoint.clone().offset(-this.getScaleableOffsetX(originPoint, true), 0)];\n        };\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.getAsideOffsetPoints = function (originPoint, targetPoint, originRect, offset, asideOffset, direction) {\n          var points = [];\n\n          if (originRect !== undefined) {\n            if (direction === undefined) direction = targetPoint.y < originPoint.y;\n            if (direction) points.push(originPoint.clone().offset(-offset, -(originPoint.y - originRect.y + asideOffset)));else points.push(originPoint.clone().offset(-offset, originRect.bottom - originPoint.y + asideOffset));\n          }\n\n          points.push(originPoint.clone().offset(-offset, 0));\n          return points;\n        };\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.getScaleableAsideOffsetPoints = function (originPoint, targetPoint, originRect, isEnd, direction) {\n          var offset = this.getScaleableOffsetX(originPoint, isEnd);\n          var asideOffset = this.getScaleableOffsetY(originPoint, targetPoint, isEnd);\n          return this.getAsideOffsetPoints(originPoint, targetPoint, originRect, offset, asideOffset, direction);\n        };\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.getScaleableOffsetX = function (originPoint, isEnd) {\n          if (this.beginRect && this.endRect) {\n            var distance = isEnd ? originPoint.x - this.beginRect.right : originPoint.x - this.endRect.right;\n            if (distance > 0 && distance < this.getMinOffset() * 2) return distance / 2;\n          }\n\n          return this.getMinOffset();\n        };\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.getScaleableOffsetY = function (originPoint, targetPoint, isEnd) {\n          if (this.beginRect && this.endRect) if (!isEnd && !this.isBeginEndOverlappedY()) {\n            var distance = void 0;\n            if (targetPoint.y < originPoint.y) distance = this.beginRect.y - this.endRect.bottom;else distance = this.endRect.y - this.beginRect.bottom;\n            if (distance < this.getMinOffset() * 2) return distance / 2;\n          }\n          return this.getMinOffset();\n        };\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.isOnSidePoint = function (originPoint, targetPoint) {\n          return targetPoint.x < originPoint.x;\n        };\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.isDirectConnectionAllowed = function (targetSide, originPoint, targetPoint) {\n          return targetSide === DiagramItem_1.ConnectionPointSide.East || targetSide === DiagramItem_1.ConnectionPointSide.Undefined;\n        };\n\n        ConnectorPointsOrthogonalWestSideCalculator.prototype.getDirectConnectionPoints = function (originPoint, targetPoint) {\n          var cx = targetPoint.x + (originPoint.x - targetPoint.x) / 2;\n          return [new ConnectorRenderPoint_1.ConnectorRenderPoint(cx, originPoint.y), new ConnectorRenderPoint_1.ConnectorRenderPoint(cx, targetPoint.y)];\n        };\n\n        return ConnectorPointsOrthogonalWestSideCalculator;\n      }(ConnectorPointsOrthogonalSideCalculatorBase_1.ConnectorPointsOrthogonalSideCalculatorBase);\n\n      exports.ConnectorPointsOrthogonalWestSideCalculator = ConnectorPointsOrthogonalWestSideCalculator;\n      /***/\n    },\n    /* 185 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      var math_1 = __webpack_require__(33);\n\n      var point_1 = __webpack_require__(1);\n\n      var LineEquation = function () {\n        function LineEquation(aParam, bParam, cParam) {\n          this.aParam = aParam;\n          this.bParam = bParam;\n          this.cParam = cParam;\n        }\n\n        LineEquation.prototype.equals = function (obj) {\n          return this.aParam === obj.aParam && this.bParam === obj.bParam && this.cParam === obj.cParam;\n        };\n\n        LineEquation.prototype.getIntersection = function (equation) {\n          return LineEquation.getIntersection(this, equation);\n        };\n\n        LineEquation.fromPoints = function (pointA, pointB) {\n          return new LineEquation(pointB.y - pointA.y, pointA.x - pointB.x, pointB.x * pointA.y - pointA.x * pointB.y);\n        };\n\n        LineEquation.getIntersection = function (a, b) {\n          var A1 = a.aParam;\n          var B1 = a.bParam;\n          var C1 = a.cParam;\n          var A2 = b.aParam;\n          var B2 = b.bParam;\n          var C2 = b.cParam;\n          var v = A2 * B1 - A1 * B2;\n          if (math_1.MathUtils.numberCloseTo(v, 0)) return null;\n\n          if (A1 === 0) {\n            var x = (B2 * C1 - C2 * B1) / (B1 * A2);\n            return new point_1.Point(x, -C1 / B1);\n          }\n\n          var y = (C2 * A1 - C1 * A2) / v;\n          return new point_1.Point((-B1 * y - C1) / A1, y);\n        };\n\n        LineEquation.equals = function (a, b) {\n          return a.aParam === b.bParam && a.bParam === b.bParam && a.cParam === b.cParam;\n        };\n\n        return LineEquation;\n      }();\n\n      exports.LineEquation = LineEquation;\n      /***/\n    },\n    /* 186 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics100 = function extendStatics(d, b) {\n          _extendStatics100 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics100(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics100(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ConnectorLineEndingFilledTriangleStrategy = exports.ConnectorLineEndingOutlinedTriangleStrategy = exports.ConnectorLineEndingArrowStrategy = exports.ConnectorLineEndingNoneStrategy = exports.ConnectorLineEndingStrategy = void 0;\n\n      var Utils_1 = __webpack_require__(3);\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var ConnectorLineEndingStrategy =\n      /** @class */\n      function () {\n        function ConnectorLineEndingStrategy(style) {\n          this.style = style;\n        }\n\n        ConnectorLineEndingStrategy.prototype.hasCommands = function () {\n          return true;\n        };\n\n        ConnectorLineEndingStrategy.prototype.needCreateSeparatePrimitive = function () {\n          return false;\n        };\n\n        ConnectorLineEndingStrategy.prototype.createPrimitive = function () {\n          return new PathPrimitive_1.PathPrimitive([], this.getStyle(), this.getCssClass());\n        };\n\n        ConnectorLineEndingStrategy.prototype.createCommands = function (point, directionPoint) {\n          return [];\n        };\n\n        ConnectorLineEndingStrategy.prototype.getStyle = function () {\n          var style = this.style.clone();\n          style.resetStrokeDashArray();\n          return style;\n        };\n\n        ConnectorLineEndingStrategy.prototype.getCssClass = function () {\n          return undefined;\n        };\n\n        return ConnectorLineEndingStrategy;\n      }();\n\n      exports.ConnectorLineEndingStrategy = ConnectorLineEndingStrategy;\n\n      var ConnectorLineEndingNoneStrategy =\n      /** @class */\n      function (_super) {\n        __extends(ConnectorLineEndingNoneStrategy, _super);\n\n        function ConnectorLineEndingNoneStrategy() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ConnectorLineEndingNoneStrategy.prototype.hasCommands = function () {\n          return false;\n        };\n\n        return ConnectorLineEndingNoneStrategy;\n      }(ConnectorLineEndingStrategy);\n\n      exports.ConnectorLineEndingNoneStrategy = ConnectorLineEndingNoneStrategy;\n\n      var ConnectorLineEndingArrowStrategy =\n      /** @class */\n      function (_super) {\n        __extends(ConnectorLineEndingArrowStrategy, _super);\n\n        function ConnectorLineEndingArrowStrategy() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        Object.defineProperty(ConnectorLineEndingArrowStrategy.prototype, \"arrowHeight\", {\n          get: function get() {\n            return this.style.strokeWidth * 6;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ConnectorLineEndingArrowStrategy.prototype, \"arrowWidth\", {\n          get: function get() {\n            return this.style.strokeWidth * 2;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ConnectorLineEndingArrowStrategy.prototype.needCreateSeparatePrimitive = function () {\n          return !this.style.isDefaultStrokeDashArray();\n        };\n\n        ConnectorLineEndingArrowStrategy.prototype.createCommands = function (point, directionPoint) {\n          var arrowPoints = this.getArrowPoints(point, directionPoint);\n          var commands = [new PathPrimitive_1.PathPrimitiveMoveToCommand(arrowPoints.point1.x, arrowPoints.point1.y), new PathPrimitive_1.PathPrimitiveLineToCommand(point.x, point.y), new PathPrimitive_1.PathPrimitiveLineToCommand(arrowPoints.point2.x, arrowPoints.point2.y)];\n          if (!this.style.isDefaultStrokeDashArray()) commands = commands.concat([new PathPrimitive_1.PathPrimitiveMoveToCommand(point.x, point.y), new PathPrimitive_1.PathPrimitiveLineToCommand(arrowPoints.point3.x, arrowPoints.point3.y)]);\n          return commands;\n        };\n\n        ConnectorLineEndingArrowStrategy.prototype.getArrowPoints = function (point, directionPoint) {\n          var arrowHeight = this.arrowHeight;\n\n          if (point.x === directionPoint.x) {\n            var distance = Math.abs(point.y - directionPoint.y);\n            if (distance < arrowHeight) arrowHeight = distance;\n          }\n\n          if (point.y === directionPoint.y) {\n            var distance = Math.abs(point.x - directionPoint.x);\n            if (distance < arrowHeight) arrowHeight = distance;\n          }\n\n          return Utils_1.GeometryUtils.getArrowPoints(point, directionPoint, arrowHeight, this.arrowWidth);\n        };\n\n        return ConnectorLineEndingArrowStrategy;\n      }(ConnectorLineEndingStrategy);\n\n      exports.ConnectorLineEndingArrowStrategy = ConnectorLineEndingArrowStrategy;\n\n      var ConnectorLineEndingOutlinedTriangleStrategy =\n      /** @class */\n      function (_super) {\n        __extends(ConnectorLineEndingOutlinedTriangleStrategy, _super);\n\n        function ConnectorLineEndingOutlinedTriangleStrategy() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ConnectorLineEndingOutlinedTriangleStrategy.prototype.needCreateSeparatePrimitive = function () {\n          return true;\n        };\n\n        ConnectorLineEndingOutlinedTriangleStrategy.prototype.createCommands = function (point, directionPoint) {\n          var arrowPoints = this.getArrowPoints(point, directionPoint);\n          return [new PathPrimitive_1.PathPrimitiveMoveToCommand(arrowPoints.point1.x, arrowPoints.point1.y), new PathPrimitive_1.PathPrimitiveLineToCommand(point.x, point.y), new PathPrimitive_1.PathPrimitiveLineToCommand(arrowPoints.point2.x, arrowPoints.point2.y), new PathPrimitive_1.PathPrimitiveClosePathCommand()];\n        };\n\n        ConnectorLineEndingOutlinedTriangleStrategy.prototype.getCssClass = function () {\n          return \"outlined-line-ending\";\n        };\n\n        return ConnectorLineEndingOutlinedTriangleStrategy;\n      }(ConnectorLineEndingArrowStrategy);\n\n      exports.ConnectorLineEndingOutlinedTriangleStrategy = ConnectorLineEndingOutlinedTriangleStrategy;\n\n      var ConnectorLineEndingFilledTriangleStrategy =\n      /** @class */\n      function (_super) {\n        __extends(ConnectorLineEndingFilledTriangleStrategy, _super);\n\n        function ConnectorLineEndingFilledTriangleStrategy() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ConnectorLineEndingFilledTriangleStrategy.prototype.getStyle = function () {\n          var style = _super.prototype.getStyle.call(this);\n\n          style[\"fill\"] = style[\"stroke\"];\n          return style;\n        };\n\n        ConnectorLineEndingFilledTriangleStrategy.prototype.getCssClass = function () {\n          return \"filled-line-ending\";\n        };\n\n        return ConnectorLineEndingFilledTriangleStrategy;\n      }(ConnectorLineEndingOutlinedTriangleStrategy);\n\n      exports.ConnectorLineEndingFilledTriangleStrategy = ConnectorLineEndingFilledTriangleStrategy;\n      /***/\n    },\n    /* 187 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ConnectorTexts = exports.ConnectorText = void 0;\n\n      var ConnectorText =\n      /** @class */\n      function () {\n        function ConnectorText(position, value) {\n          this.position = position;\n          this.value = value;\n        }\n\n        return ConnectorText;\n      }();\n\n      exports.ConnectorText = ConnectorText;\n\n      var ConnectorTexts =\n      /** @class */\n      function () {\n        function ConnectorTexts() {\n          this.items = {};\n        }\n\n        ConnectorTexts.prototype.get = function (position) {\n          return this.items[position];\n        };\n\n        ConnectorTexts.prototype.set = function (position, text) {\n          this.items[position] = text;\n        };\n\n        ConnectorTexts.prototype.remove = function (position) {\n          delete this.items[position];\n        };\n\n        ConnectorTexts.prototype.map = function (callback) {\n          var list = [];\n          this.forEach(function (t) {\n            return list.push(callback(t));\n          });\n          return list;\n        };\n\n        ConnectorTexts.prototype.forEach = function (callback) {\n          for (var key in this.items) {\n            if (Object.prototype.hasOwnProperty.call(this.items, key)) callback(this.items[key]);\n          }\n        };\n\n        ConnectorTexts.prototype.count = function () {\n          return Object.keys(this.items).length;\n        };\n\n        ConnectorTexts.prototype.clone = function () {\n          var result = new ConnectorTexts();\n          this.forEach(function (t) {\n            result.set(t.position, new ConnectorText(t.position, t.value));\n          });\n          return result;\n        };\n\n        ConnectorTexts.prototype.toObject = function () {\n          var result = {};\n          var modified = false;\n          this.forEach(function (t) {\n            result[t.position] = t.value;\n            modified = true;\n          });\n          return modified ? result : null;\n        };\n\n        ConnectorTexts.prototype.fromObject = function (obj) {\n          for (var key in obj) {\n            if (Object.prototype.hasOwnProperty.call(obj, key)) {\n              var position = parseFloat(key);\n              if (!isNaN(position) && typeof obj[key] === \"string\") this.set(position, new ConnectorText(position, obj[key]));\n            }\n          }\n        };\n\n        return ConnectorTexts;\n      }();\n\n      exports.ConnectorTexts = ConnectorTexts;\n      /***/\n    },\n    /* 188 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics101 = function extendStatics(d, b) {\n          _extendStatics101 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics101(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics101(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.AddConnectorPointHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var AddConnectorPointHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(AddConnectorPointHistoryItem, _super);\n\n        function AddConnectorPointHistoryItem(connectorKey, pointIndex, point) {\n          var _this = _super.call(this) || this;\n\n          _this.connectorKey = connectorKey;\n          _this.pointIndex = pointIndex;\n          _this.point = point;\n          return _this;\n        }\n\n        AddConnectorPointHistoryItem.prototype.redo = function (manipulator) {\n          var _this = this;\n\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          this.renderContext = connector.createRenderPointsContext();\n          manipulator.addDeleteConnectorPoint(connector, function (connector) {\n            connector.addPoint(_this.pointIndex, _this.point);\n            connector.onAddPoint(_this.pointIndex, _this.point);\n          });\n        };\n\n        AddConnectorPointHistoryItem.prototype.undo = function (manipulator) {\n          var _this = this;\n\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          manipulator.addDeleteConnectorPoint(connector, function (connector) {\n            connector.deletePoint(_this.pointIndex);\n            connector.replaceRenderPoints(_this.renderContext);\n          });\n        };\n\n        return AddConnectorPointHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.AddConnectorPointHistoryItem = AddConnectorPointHistoryItem;\n      /***/\n    },\n    /* 189 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics102 = function extendStatics(d, b) {\n          _extendStatics102 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics102(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics102(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.DeleteConnectorUnnecessaryPointsHistoryItem = exports.DeleteConnectorPointHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var DeleteConnectorPointHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(DeleteConnectorPointHistoryItem, _super);\n\n        function DeleteConnectorPointHistoryItem(connectorKey, pointIndex) {\n          var _this = _super.call(this) || this;\n\n          _this.connectorKey = connectorKey;\n          _this.pointIndex = pointIndex;\n          return _this;\n        }\n\n        DeleteConnectorPointHistoryItem.prototype.redo = function (manipulator) {\n          var _this = this;\n\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          this.oldRenderContext = connector.createRenderPointsContext();\n          this.oldPoint = connector.points[this.pointIndex].clone();\n          manipulator.addDeleteConnectorPoint(connector, function (connector) {\n            connector.deletePoint(_this.pointIndex);\n            connector.onDeletePoint(_this.pointIndex);\n          });\n        };\n\n        DeleteConnectorPointHistoryItem.prototype.undo = function (manipulator) {\n          var _this = this;\n\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          manipulator.addDeleteConnectorPoint(connector, function (connector) {\n            connector.addPoint(_this.pointIndex, _this.oldPoint);\n            connector.replaceRenderPoints(_this.oldRenderContext);\n          });\n        };\n\n        return DeleteConnectorPointHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.DeleteConnectorPointHistoryItem = DeleteConnectorPointHistoryItem;\n\n      var DeleteConnectorUnnecessaryPointsHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(DeleteConnectorUnnecessaryPointsHistoryItem, _super);\n\n        function DeleteConnectorUnnecessaryPointsHistoryItem(connectorKey, unnecessaryPoints, validateRenderPoints) {\n          var _this = _super.call(this) || this;\n\n          _this.connectorKey = connectorKey;\n          _this.unnecessaryPoints = unnecessaryPoints;\n          _this.validateRenderPoints = validateRenderPoints;\n          return _this;\n        }\n\n        DeleteConnectorUnnecessaryPointsHistoryItem.prototype.redo = function (manipulator) {\n          var _this = this;\n\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          this.oldRenderContext = connector.createRenderPointsContext();\n          this.oldPoints = connector.points.map(function (p) {\n            return p.clone();\n          });\n          manipulator.changeConnectorPoints(connector, function (connector) {\n            connector.points = ModelUtils_1.ModelUtils.createNecessaryPoints(_this.oldPoints, _this.unnecessaryPoints);\n            if (_this.validateRenderPoints) connector.onDeleteUnnecessaryPoints(_this.unnecessaryPoints);else connector.invalidateRenderPoints();\n          });\n        };\n\n        DeleteConnectorUnnecessaryPointsHistoryItem.prototype.undo = function (manipulator) {\n          var _this = this;\n\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          manipulator.changeConnectorPoints(connector, function (connector) {\n            connector.points = _this.oldPoints;\n            if (_this.validateRenderPoints) connector.replaceRenderPoints(_this.oldRenderContext);else connector.invalidateRenderPoints();\n          });\n        };\n\n        return DeleteConnectorUnnecessaryPointsHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.DeleteConnectorUnnecessaryPointsHistoryItem = DeleteConnectorUnnecessaryPointsHistoryItem;\n      /***/\n    },\n    /* 190 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics103 = function extendStatics(d, b) {\n          _extendStatics103 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics103(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics103(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.InsertToContainerHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var InsertToContainerHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(InsertToContainerHistoryItem, _super);\n\n        function InsertToContainerHistoryItem(item, container) {\n          var _this = _super.call(this) || this;\n\n          _this.containerKey = container.key;\n          _this.itemKey = item.key;\n          return _this;\n        }\n\n        InsertToContainerHistoryItem.prototype.redo = function (manipulator) {\n          var item = manipulator.model.findItem(this.itemKey);\n          var container = manipulator.model.findShape(this.containerKey);\n          manipulator.insertToContainer(item, container);\n        };\n\n        InsertToContainerHistoryItem.prototype.undo = function (manipulator) {\n          var item = manipulator.model.findItem(this.itemKey);\n          manipulator.removeFromContainer(item);\n        };\n\n        return InsertToContainerHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.InsertToContainerHistoryItem = InsertToContainerHistoryItem;\n      /***/\n    },\n    /* 191 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics104 = function extendStatics(d, b) {\n          _extendStatics104 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics104(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics104(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MoveConnectorPointHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var MoveConnectorPointHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(MoveConnectorPointHistoryItem, _super);\n\n        function MoveConnectorPointHistoryItem(connectorKey, pointIndex, newPoint) {\n          var _this = _super.call(this) || this;\n\n          _this.connectorKey = connectorKey;\n          _this.pointIndex = pointIndex;\n          _this.newPoint = newPoint.clone();\n          return _this;\n        }\n\n        MoveConnectorPointHistoryItem.prototype.redo = function (manipulator) {\n          var _this = this;\n\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          this.oldPoint = connector.points[this.pointIndex].clone();\n          this.renderContext = connector.createRenderPointsContext();\n          manipulator.moveConnectorPoint(connector, this.pointIndex, function (connector) {\n            connector.movePoint(_this.pointIndex, _this.newPoint);\n            connector.onMovePoint(_this.pointIndex, _this.newPoint);\n          });\n        };\n\n        MoveConnectorPointHistoryItem.prototype.undo = function (manipulator) {\n          var _this = this;\n\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          manipulator.moveConnectorPoint(connector, this.pointIndex, function (connector) {\n            connector.movePoint(_this.pointIndex, _this.oldPoint);\n            connector.replaceRenderPoints(_this.renderContext);\n          });\n        };\n\n        return MoveConnectorPointHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.MoveConnectorPointHistoryItem = MoveConnectorPointHistoryItem;\n      /***/\n    },\n    /* 192 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics105 = function extendStatics(d, b) {\n          _extendStatics105 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics105(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics105(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MoveShapeHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var MoveShapeHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(MoveShapeHistoryItem, _super);\n\n        function MoveShapeHistoryItem(shapeKey, position) {\n          var _this = _super.call(this) || this;\n\n          _this.shapeKey = shapeKey;\n          _this.position = position;\n          return _this;\n        }\n\n        MoveShapeHistoryItem.prototype.redo = function (manipulator) {\n          var shape = manipulator.model.findShape(this.shapeKey);\n          this.oldPosition = shape.position.clone();\n          manipulator.moveShape(shape, this.position);\n        };\n\n        MoveShapeHistoryItem.prototype.undo = function (manipulator) {\n          var shape = manipulator.model.findShape(this.shapeKey);\n          manipulator.moveShape(shape, this.oldPosition);\n        };\n\n        return MoveShapeHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.MoveShapeHistoryItem = MoveShapeHistoryItem;\n      /***/\n    },\n    /* 193 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics106 = function extendStatics(d, b) {\n          _extendStatics106 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics106(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics106(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.RemoveFromContainerHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var RemoveFromContainerHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(RemoveFromContainerHistoryItem, _super);\n\n        function RemoveFromContainerHistoryItem(item) {\n          var _this = _super.call(this) || this;\n\n          _this.itemKey = item.key;\n          return _this;\n        }\n\n        RemoveFromContainerHistoryItem.prototype.redo = function (manipulator) {\n          var item = manipulator.model.findItem(this.itemKey);\n          this.containerKey = item.container && item.container.key;\n          manipulator.removeFromContainer(item);\n        };\n\n        RemoveFromContainerHistoryItem.prototype.undo = function (manipulator) {\n          var container = manipulator.model.findContainer(this.containerKey);\n          var item = manipulator.model.findItem(this.itemKey);\n          manipulator.insertToContainer(item, container);\n        };\n\n        return RemoveFromContainerHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.RemoveFromContainerHistoryItem = RemoveFromContainerHistoryItem;\n      /***/\n    },\n    /* 194 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics107 = function extendStatics(d, b) {\n          _extendStatics107 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics107(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics107(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ModelResizeHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var offsets_1 = __webpack_require__(87);\n\n      var size_1 = __webpack_require__(2);\n\n      var ModelResizeHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ModelResizeHistoryItem, _super);\n\n        function ModelResizeHistoryItem(offset) {\n          var _this = _super.call(this) || this;\n\n          _this.offset = offset;\n          return _this;\n        }\n\n        ModelResizeHistoryItem.prototype.redo = function (manipulator) {\n          this.oldSize = manipulator.model.size.clone();\n          this.backOffset = new offsets_1.Offsets(-this.offset.left, -this.offset.right, -this.offset.top, -this.offset.bottom);\n          var newWidth = Math.max(this.oldSize.width + this.offset.left + this.offset.right, manipulator.model.pageWidth);\n          var newHeight = Math.max(this.oldSize.height + this.offset.top + this.offset.bottom, manipulator.model.pageHeight);\n          manipulator.changeModelSize(new size_1.Size(newWidth, newHeight), this.offset);\n        };\n\n        ModelResizeHistoryItem.prototype.undo = function (manipulator) {\n          manipulator.changeModelSize(this.oldSize, this.backOffset);\n        };\n\n        return ModelResizeHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ModelResizeHistoryItem = ModelResizeHistoryItem;\n      /***/\n    },\n    /* 195 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics108 = function extendStatics(d, b) {\n          _extendStatics108 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics108(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics108(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.UpdatePositionsOnPageResizeHistoryItem = void 0;\n\n      var Connector_1 = __webpack_require__(7);\n\n      var Shape_1 = __webpack_require__(14);\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var UpdatePositionsOnPageResizeHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(UpdatePositionsOnPageResizeHistoryItem, _super);\n\n        function UpdatePositionsOnPageResizeHistoryItem(offset) {\n          var _this = _super.call(this) || this;\n\n          _this.offset = offset;\n          return _this;\n        }\n\n        UpdatePositionsOnPageResizeHistoryItem.prototype.redo = function (manipulator) {\n          var _this = this;\n\n          manipulator.model.iterateItems(function (item) {\n            if (item instanceof Shape_1.Shape) manipulator.moveShape(item, _this.applyOffset(item.position, _this.offset.x, _this.offset.y));\n            if (item instanceof Connector_1.Connector) manipulator.changeConnectorPoints(item, function (i) {\n              return i.updatePointsOnPageResize(_this.offset.x, _this.offset.y);\n            });\n          });\n        };\n\n        UpdatePositionsOnPageResizeHistoryItem.prototype.undo = function (manipulator) {\n          var _this = this;\n\n          manipulator.model.iterateItems(function (item) {\n            if (item instanceof Shape_1.Shape) manipulator.moveShape(item, _this.applyOffset(item.position, -_this.offset.x, -_this.offset.y));\n            if (item instanceof Connector_1.Connector) manipulator.changeConnectorPoints(item, function (i) {\n              return i.updatePointsOnPageResize(-_this.offset.x, -_this.offset.y);\n            });\n          });\n        };\n\n        UpdatePositionsOnPageResizeHistoryItem.prototype.applyOffset = function (point, offsetX, offsetY) {\n          return point.clone().offset(offsetX, offsetY);\n        };\n\n        return UpdatePositionsOnPageResizeHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.UpdatePositionsOnPageResizeHistoryItem = UpdatePositionsOnPageResizeHistoryItem;\n      /***/\n    },\n    /* 196 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.GraphInfo = void 0;\n\n      var LayoutUtils_1 = __webpack_require__(197);\n\n      var GraphInfo =\n      /** @class */\n      function () {\n        function GraphInfo(container, sourceGraph) {\n          this.container = container;\n          this.sourceGraph = sourceGraph;\n        }\n\n        Object.defineProperty(GraphInfo.prototype, \"graph\", {\n          get: function get() {\n            return this._graph || (this._graph = this.getNodeInfoGraph());\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(GraphInfo.prototype, \"level\", {\n          get: function get() {\n            return this._level !== undefined ? this._level : this._level = this.getLevel();\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        GraphInfo.prototype.getNodeInfoGraph = function () {\n          return this.sourceGraph.cast(LayoutUtils_1.LayoutUtils.shapeToLayout);\n        };\n\n        GraphInfo.prototype.getLevel = function () {\n          var level = 0;\n          if (this.container) level = this.getContainerLevel(this.container);\n          return level;\n        };\n\n        GraphInfo.prototype.getContainerLevel = function (container) {\n          var level = 1;\n          var parentContainer = container.container;\n          if (parentContainer) level += this.getContainerLevel(parentContainer);\n          return level;\n        };\n\n        return GraphInfo;\n      }();\n\n      exports.GraphInfo = GraphInfo;\n      /***/\n    },\n    /* 197 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.LayoutUtils = void 0;\n\n      var NodeLayout_1 = __webpack_require__(69);\n\n      var LayoutUtils =\n      /** @class */\n      function () {\n        function LayoutUtils() {}\n\n        LayoutUtils.shapeToLayout = function (shape) {\n          var margin = new NodeLayout_1.Margin(0);\n          var shapeRect = shape.rectangle;\n          shape.attachedConnectors.filter(function (c) {\n            return !c.beginItem || !c.endItem;\n          }).forEach(function (c) {\n            var connRect = c.rectangle;\n            margin.left = Math.max(margin.left, shapeRect.x - connRect.x);\n            margin.right = Math.max(margin.right, connRect.right - shapeRect.right);\n            margin.top = Math.max(margin.top, shapeRect.y - connRect.y);\n            margin.bottom = Math.max(margin.bottom, connRect.bottom - shapeRect.bottom);\n          });\n          var layout = new NodeLayout_1.NodeInfo(shape.key, margin, shape.size.clone());\n          layout.connectionPoints = shape.description.getConnectionPoints();\n          return layout;\n        };\n\n        return LayoutUtils;\n      }();\n\n      exports.LayoutUtils = LayoutUtils;\n      /***/\n    },\n    /* 198 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.CommandBase = void 0;\n\n      var CommandBase =\n      /** @class */\n      function () {\n        function CommandBase(control) {\n          this.control = control;\n        }\n\n        CommandBase.prototype.execute = function (parameter) {\n          if (this.isPermissionsRequired) this.permissionsProvider.lockPermissions();\n          var state = this.getState();\n          if (this.isPermissionsRequired) this.permissionsProvider.unlockPermissions();\n          if (!state.enabled) return false;\n          this.control.beginUpdate();\n          var executed = false;\n          if (this.isPermissionsRequired) executed = this.executeWithPermissions(state, parameter);else executed = this.executeCore(state, parameter);\n          this.control.endUpdate();\n          if (executed) this.updateControlState();\n          return executed;\n        };\n\n        CommandBase.prototype.executeWithPermissions = function (state, parameter) {\n          var executed = false;\n          this.permissionsProvider.beginStorePermissions();\n          this.control.history.beginTransaction();\n          executed = this.executeCore(state, parameter);\n\n          if (!this.permissionsProvider.isStoredPermissionsGranted()) {\n            this.permissionsProvider.lockPermissions();\n            this.control.history.undoTransaction();\n            this.permissionsProvider.unlockPermissions();\n            executed = false;\n          }\n\n          this.control.history.endTransaction();\n          this.permissionsProvider.endStorePermissions();\n          return executed;\n        };\n\n        CommandBase.prototype.updateControlState = function () {\n          if (!this.lockInputPositionUpdating()) this.control.selection.inputPosition.reset();\n          if (!this.lockUIUpdating()) this.control.barManager.updateItemsState();\n        };\n\n        Object.defineProperty(CommandBase.prototype, \"permissionsProvider\", {\n          get: function get() {\n            return this.control && this.control.permissionsProvider;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(CommandBase.prototype, \"isPermissionsRequired\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        CommandBase.prototype.lockUIUpdating = function () {\n          return false;\n        };\n\n        CommandBase.prototype.lockInputPositionUpdating = function () {\n          return false;\n        };\n\n        return CommandBase;\n      }();\n\n      exports.CommandBase = CommandBase;\n      /***/\n    },\n    /* 199 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.SimpleCommandState = void 0;\n\n      var SimpleCommandState =\n      /** @class */\n      function () {\n        function SimpleCommandState(enabled, value, defaultValue, items, visible) {\n          this.visible = true;\n          this.denyUpdateValue = false;\n          this.enabled = enabled;\n          this.value = value;\n          this.items = items;\n          this.visible = visible;\n          this.defaultValue = defaultValue;\n        }\n\n        return SimpleCommandState;\n      }();\n\n      exports.SimpleCommandState = SimpleCommandState;\n      /***/\n    },\n    /* 200 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics109 = function extendStatics(d, b) {\n          _extendStatics109 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics109(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics109(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.UndoCommand = void 0;\n\n      var SimpleCommandBase_1 = __webpack_require__(10);\n\n      var UndoCommand =\n      /** @class */\n      function (_super) {\n        __extends(UndoCommand, _super);\n\n        function UndoCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        UndoCommand.prototype.executeCore = function (state) {\n          this.control.beginUpdateCanvas();\n          this.permissionsProvider.lockPermissions();\n          this.control.history.undo();\n          this.permissionsProvider.unlockPermissions();\n          this.control.endUpdateCanvas();\n          return true;\n        };\n\n        UndoCommand.prototype.isEnabled = function () {\n          return _super.prototype.isEnabled.call(this) && this.control.history.canUndo();\n        };\n\n        return UndoCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.UndoCommand = UndoCommand;\n      /***/\n    },\n    /* 201 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics110 = function extendStatics(d, b) {\n          _extendStatics110 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics110(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics110(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.RedoCommand = void 0;\n\n      var SimpleCommandBase_1 = __webpack_require__(10);\n\n      var RedoCommand =\n      /** @class */\n      function (_super) {\n        __extends(RedoCommand, _super);\n\n        function RedoCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        RedoCommand.prototype.executeCore = function (state) {\n          this.control.beginUpdateCanvas();\n          this.permissionsProvider.lockPermissions();\n          this.control.history.redo();\n          this.permissionsProvider.unlockPermissions();\n          this.control.endUpdateCanvas();\n          return true;\n        };\n\n        RedoCommand.prototype.isEnabled = function () {\n          return _super.prototype.isEnabled.call(this) && this.control.history.canRedo();\n        };\n\n        return RedoCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.RedoCommand = RedoCommand;\n      /***/\n    },\n    /* 202 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics111 = function extendStatics(d, b) {\n          _extendStatics111 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics111(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics111(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ImportCommand = void 0;\n\n      var Importer_1 = __webpack_require__(120);\n\n      var ExportImportCommandBase_1 = __webpack_require__(54);\n\n      var ImportCommand =\n      /** @class */\n      function (_super) {\n        __extends(ImportCommand, _super);\n\n        function ImportCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ImportCommand.prototype.executeCore = function (state, parameter) {\n          this.permissionsProvider.lockPermissions();\n          var data = parameter[\"data\"] ? parameter[\"data\"] : parameter;\n          var importer = new Importer_1.Importer(this.control.shapeDescriptionManager, data);\n\n          if (parameter[\"keepExistingItems\"] === true) {\n            importer.importItemsData(this.control.model);\n            this.control.importItemsData();\n          } else {\n            var model = importer.import();\n            this.control.importModel(model);\n          }\n\n          this.permissionsProvider.unlockPermissions();\n          return true;\n        };\n\n        return ImportCommand;\n      }(ExportImportCommandBase_1.ExportImportCommandBase);\n\n      exports.ImportCommand = ImportCommand;\n      /***/\n    },\n    /* 203 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics112 = function extendStatics(d, b) {\n          _extendStatics112 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics112(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics112(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ProcessShapeDescription = void 0;\n\n      var RectangleShapeDescription_1 = __webpack_require__(19);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var ProcessShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(ProcessShapeDescription, _super);\n\n        function ProcessShapeDescription() {\n          return _super.call(this, undefined, true) || this;\n        }\n\n        Object.defineProperty(ProcessShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Process;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ProcessShapeDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        return ProcessShapeDescription;\n      }(RectangleShapeDescription_1.RectangleShapeDescription);\n\n      exports.ProcessShapeDescription = ProcessShapeDescription;\n      /***/\n    },\n    /* 204 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics113 = function extendStatics(d, b) {\n          _extendStatics113 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics113(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics113(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.DecisionShapeDescription = void 0;\n\n      var DiamondShapeDescription_1 = __webpack_require__(121);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var size_1 = __webpack_require__(2);\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var DecisionShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(DecisionShapeDescription, _super);\n\n        function DecisionShapeDescription() {\n          return _super.call(this, new size_1.Size(ShapeDescription_1.ShapeDefaultDimension, ShapeDescription_1.ShapeDefaultDimension * 0.75), true) || this;\n        }\n\n        Object.defineProperty(DecisionShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Decision;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        return DecisionShapeDescription;\n      }(DiamondShapeDescription_1.DiamondShapeDescription);\n\n      exports.DecisionShapeDescription = DecisionShapeDescription;\n      /***/\n    },\n    /* 205 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics114 = function extendStatics(d, b) {\n          _extendStatics114 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics114(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics114(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ManualInputShapeDescription = void 0;\n\n      var RectangleShapeDescription_1 = __webpack_require__(19);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var ManualInputShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(ManualInputShapeDescription, _super);\n\n        function ManualInputShapeDescription() {\n          return _super.call(this, undefined, true) || this;\n        }\n\n        Object.defineProperty(ManualInputShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.ManualInput;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ManualInputShapeDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ManualInputShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var _a = shape.rectangle,\n              left = _a.x,\n              top = _a.y,\n              right = _a.right,\n              bottom = _a.bottom,\n              height = _a.height;\n          var y1 = top + height * ManualInputShapeDescription.slopeHeightRatio;\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(left, y1), new PathPrimitive_1.PathPrimitiveLineToCommand(right, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(left, bottom), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        ManualInputShapeDescription.prototype.processConnectionPoint = function (shape, point) {\n          var side = shape.getConnectionPointSide(point);\n          if (side === DiagramItem_1.ConnectionPointSide.North) point.y += ManualInputShapeDescription.slopeHeightRatio / 2 * shape.size.height;\n        };\n\n        ManualInputShapeDescription.prototype.getTextRectangle = function (shape) {\n          var yOffset = shape.size.height * ManualInputShapeDescription.slopeHeightRatio;\n          return shape.rectangle.clone().moveRectangle(ShapeDescription_1.ShapeTextPadding, yOffset).resize(-ShapeDescription_1.ShapeTextPadding * 2, -yOffset - ShapeDescription_1.ShapeTextPadding).nonNegativeSize();\n        };\n\n        ManualInputShapeDescription.slopeHeightRatio = 0.1;\n        return ManualInputShapeDescription;\n      }(RectangleShapeDescription_1.RectangleShapeDescription);\n\n      exports.ManualInputShapeDescription = ManualInputShapeDescription;\n      /***/\n    },\n    /* 206 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics115 = function extendStatics(d, b) {\n          _extendStatics115 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics115(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics115(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.DataShapeDescription = void 0;\n\n      var RectangleShapeDescription_1 = __webpack_require__(19);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var DataShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(DataShapeDescription, _super);\n\n        function DataShapeDescription() {\n          return _super.call(this, undefined, true) || this;\n        }\n\n        Object.defineProperty(DataShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Data;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DataShapeDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        DataShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var _a = shape.rectangle,\n              left = _a.x,\n              top = _a.y,\n              right = _a.right,\n              bottom = _a.bottom,\n              width = _a.width,\n              height = _a.height;\n          var px = Math.min(Math.max(0, height / Math.tan(DataShapeDescription.slopeAngle)), width);\n          var x1 = left + px;\n          var x2 = right - px;\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(x1, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, top), new PathPrimitive_1.PathPrimitiveLineToCommand(x2, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(left, bottom), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        DataShapeDescription.prototype.processConnectionPoint = function (shape, point) {\n          var offset = shape.size.height / Math.tan(DataShapeDescription.slopeAngle);\n          var side = shape.getConnectionPointSide(point);\n          if (side === DiagramItem_1.ConnectionPointSide.East) point.x -= offset / 2;else if (side === DiagramItem_1.ConnectionPointSide.West) point.x += offset / 2;\n        };\n\n        DataShapeDescription.prototype.getTextRectangle = function (shape) {\n          var px = Math.min(Math.max(0, shape.size.height / Math.tan(DataShapeDescription.slopeAngle)), shape.size.width);\n          return shape.rectangle.clone().moveRectangle(px, ShapeDescription_1.ShapeTextPadding).resize(-px * 2, -ShapeDescription_1.ShapeTextPadding * 2);\n        };\n\n        DataShapeDescription.slopeAngle = 81 * Math.PI / 180;\n        return DataShapeDescription;\n      }(RectangleShapeDescription_1.RectangleShapeDescription);\n\n      exports.DataShapeDescription = DataShapeDescription;\n      /***/\n    },\n    /* 207 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics116 = function extendStatics(d, b) {\n          _extendStatics116 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics116(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics116(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.TerminatorShapeDescription = void 0;\n\n      var RectangleShapeDescription_1 = __webpack_require__(19);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var size_1 = __webpack_require__(2);\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var rectangle_1 = __webpack_require__(13);\n\n      var Utils_1 = __webpack_require__(3);\n\n      var TerminatorShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(TerminatorShapeDescription, _super);\n\n        function TerminatorShapeDescription() {\n          return _super.call(this, new size_1.Size(ShapeDescription_1.ShapeDefaultDimension, ShapeDescription_1.ShapeDefaultDimension * 0.5), true) || this;\n        }\n\n        Object.defineProperty(TerminatorShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Terminator;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(TerminatorShapeDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        TerminatorShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.x,\n              top = rect.y,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width;\n          var cy = rect.center.y;\n          var x1 = left + width * TerminatorShapeDescription.curveWidthRatio;\n          var x2 = left + width * (1 - TerminatorShapeDescription.curveWidthRatio);\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(x1, top), new PathPrimitive_1.PathPrimitiveLineToCommand(x2, top), new PathPrimitive_1.PathPrimitiveQuadraticCurveToCommand(right, top, right, cy), new PathPrimitive_1.PathPrimitiveQuadraticCurveToCommand(right, bottom, x2, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(x1, bottom), new PathPrimitive_1.PathPrimitiveQuadraticCurveToCommand(left, bottom, left, cy), new PathPrimitive_1.PathPrimitiveQuadraticCurveToCommand(left, top, x1, top), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        TerminatorShapeDescription.prototype.getTextRectangle = function (shape) {\n          var textSize = Utils_1.GeometryUtils.getMaxRectangleEnscribedInEllipse(shape.size);\n          return rectangle_1.Rectangle.fromGeometry(shape.position.clone().offset((shape.size.width - textSize.width) / 2, (shape.size.height - textSize.height) / 2), textSize);\n        };\n\n        TerminatorShapeDescription.prototype.getSizeByText = function (textSize, _shape) {\n          return Utils_1.GeometryUtils.getEllipseByEnscribedRectangle(textSize);\n        };\n\n        TerminatorShapeDescription.curveWidthRatio = 0.3;\n        return TerminatorShapeDescription;\n      }(RectangleShapeDescription_1.RectangleShapeDescription);\n\n      exports.TerminatorShapeDescription = TerminatorShapeDescription;\n      /***/\n    },\n    /* 208 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics117 = function extendStatics(d, b) {\n          _extendStatics117 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics117(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics117(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.PredefinedProcessShapeDescription = exports.PredefinedProcessEdgeParameterName = void 0;\n\n      var RectangleShapeDescription_1 = __webpack_require__(19);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var ShapeParameters_1 = __webpack_require__(36);\n\n      var ShapeParameterPoint_1 = __webpack_require__(29);\n\n      var point_1 = __webpack_require__(1);\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      exports.PredefinedProcessEdgeParameterName = \"e\";\n\n      var PredefinedProcessShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(PredefinedProcessShapeDescription, _super);\n\n        function PredefinedProcessShapeDescription() {\n          return _super.call(this, undefined, true) || this;\n        }\n\n        Object.defineProperty(PredefinedProcessShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.PredefinedProcess;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(PredefinedProcessShapeDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        PredefinedProcessShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.x,\n              top = rect.y,\n              right = rect.right,\n              bottom = rect.bottom;\n          var x1 = left + shape.parameters.get(exports.PredefinedProcessEdgeParameterName).value;\n          var x2 = right - shape.parameters.get(exports.PredefinedProcessEdgeParameterName).value;\n\n          var primitives = _super.prototype.createShapePrimitives.call(this, shape);\n\n          return primitives.concat([new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(x1, top), new PathPrimitive_1.PathPrimitiveLineToCommand(x1, bottom), new PathPrimitive_1.PathPrimitiveMoveToCommand(x2, top), new PathPrimitive_1.PathPrimitiveLineToCommand(x2, bottom)], shape.style)]);\n        };\n\n        PredefinedProcessShapeDescription.prototype.createParameters = function (parameters) {\n          parameters.add(new ShapeParameters_1.ShapeParameter(exports.PredefinedProcessEdgeParameterName, this.defaultSize.width * 0.1));\n        };\n\n        PredefinedProcessShapeDescription.prototype.normalizeParameters = function (shape, parameters) {\n          this.changeParameterValue(parameters, exports.PredefinedProcessEdgeParameterName, function (p) {\n            return Math.max(PredefinedProcessShapeDescription.minEdge, Math.min(shape.size.width * 0.3, p.value));\n          });\n        };\n\n        PredefinedProcessShapeDescription.prototype.modifyParameters = function (shape, parameters, deltaX, deltaY) {\n          this.changeParameterValue(parameters, exports.PredefinedProcessEdgeParameterName, function (p) {\n            return p.value + deltaX;\n          });\n          this.normalizeParameters(shape, parameters);\n        };\n\n        PredefinedProcessShapeDescription.prototype.getParameterPoints = function (shape) {\n          return [new ShapeParameterPoint_1.ShapeParameterPoint(\"c\", new point_1.Point(shape.normalizeX(shape.position.x + shape.parameters.get(exports.PredefinedProcessEdgeParameterName).value), shape.position.y))];\n        };\n\n        PredefinedProcessShapeDescription.prototype.getTextRectangle = function (shape) {\n          var rect = shape.rectangle;\n          var dx = shape.parameters.get(exports.PredefinedProcessEdgeParameterName).value;\n          return rect.clone().resize(-2 * dx, 0).clone().moveRectangle(dx, 0);\n        };\n\n        PredefinedProcessShapeDescription.minEdge = 72;\n        return PredefinedProcessShapeDescription;\n      }(RectangleShapeDescription_1.RectangleShapeDescription);\n\n      exports.PredefinedProcessShapeDescription = PredefinedProcessShapeDescription;\n      /***/\n    },\n    /* 209 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics118 = function extendStatics(d, b) {\n          _extendStatics118 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics118(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics118(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ArrowUpDownShapeDescription = void 0;\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var ShapeParameterPoint_1 = __webpack_require__(29);\n\n      var point_1 = __webpack_require__(1);\n\n      var ArrowVerticalShapeDescription_1 = __webpack_require__(92);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var ArrowUpDownShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(ArrowUpDownShapeDescription, _super);\n\n        function ArrowUpDownShapeDescription() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        Object.defineProperty(ArrowUpDownShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.ArrowUpDown;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ArrowUpDownShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.x,\n              top = rect.y,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width;\n          var cx = rect.center.x;\n          var p1dx = (width - shape.parameters.get(ArrowVerticalShapeDescription_1.ArrowVerticalLineWidthParameterName).value) / 2;\n          var p0dy = shape.parameters.get(ArrowVerticalShapeDescription_1.ArrowVerticalTriangleHeightParameterName).value;\n          var p1x1 = shape.normalizeX(left + p1dx);\n          var p0y1 = shape.normalizeY(top + p0dy);\n          var p1x2 = shape.normalizeX(right - p1dx);\n          var p0y2 = shape.normalizeY(bottom - p0dy);\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(cx, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, p0y1), new PathPrimitive_1.PathPrimitiveLineToCommand(p1x2, p0y1), new PathPrimitive_1.PathPrimitiveLineToCommand(p1x2, p0y2), new PathPrimitive_1.PathPrimitiveLineToCommand(right, p0y2), new PathPrimitive_1.PathPrimitiveLineToCommand(cx, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(left, p0y2), new PathPrimitive_1.PathPrimitiveLineToCommand(p1x1, p0y2), new PathPrimitive_1.PathPrimitiveLineToCommand(p1x1, p0y1), new PathPrimitive_1.PathPrimitiveLineToCommand(left, p0y1), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        ArrowUpDownShapeDescription.prototype.normalizeParameters = function (shape, parameters) {\n          this.changeParameterValue(parameters, ArrowVerticalShapeDescription_1.ArrowVerticalTriangleHeightParameterName, function (p) {\n            return Math.max(0, Math.min(shape.size.height / 2 - 2 * shape.strokeWidth, p.value));\n          });\n          this.changeParameterValue(parameters, ArrowVerticalShapeDescription_1.ArrowVerticalLineWidthParameterName, function (p) {\n            return Math.max(0, Math.min(shape.size.width, p.value));\n          });\n        };\n\n        ArrowUpDownShapeDescription.prototype.modifyParameters = function (shape, parameters, deltaX, deltaY) {\n          this.changeParameterValue(parameters, ArrowVerticalShapeDescription_1.ArrowVerticalTriangleHeightParameterName, function (p) {\n            return p.value + deltaY;\n          });\n          this.changeParameterValue(parameters, ArrowVerticalShapeDescription_1.ArrowVerticalLineWidthParameterName, function (p) {\n            return p.value - deltaX * 2;\n          });\n          this.normalizeParameters(shape, parameters);\n        };\n\n        ArrowUpDownShapeDescription.prototype.getParameterPoints = function (shape) {\n          return [new ShapeParameterPoint_1.ShapeParameterPoint(\"c\", new point_1.Point(shape.normalizeX(shape.position.x + (shape.size.width - shape.parameters.get(ArrowVerticalShapeDescription_1.ArrowVerticalLineWidthParameterName).value) / 2), shape.normalizeY(shape.position.y + shape.parameters.get(ArrowVerticalShapeDescription_1.ArrowVerticalTriangleHeightParameterName).value)))];\n        };\n\n        return ArrowUpDownShapeDescription;\n      }(ArrowVerticalShapeDescription_1.ArrowVerticalShapeDescription);\n\n      exports.ArrowUpDownShapeDescription = ArrowUpDownShapeDescription;\n      /***/\n    },\n    /* 210 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics119 = function extendStatics(d, b) {\n          _extendStatics119 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics119(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics119(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ArrowRightShapeDescription = void 0;\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var ArrowHorizontalShapeDescription_1 = __webpack_require__(93);\n\n      var ShapeParameterPoint_1 = __webpack_require__(29);\n\n      var point_1 = __webpack_require__(1);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      var ArrowRightShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(ArrowRightShapeDescription, _super);\n\n        function ArrowRightShapeDescription() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        Object.defineProperty(ArrowRightShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.ArrowRight;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ArrowRightShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.x,\n              top = rect.y,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          var cy = rect.center.y;\n          var p0dx = width - shape.parameters.get(ArrowHorizontalShapeDescription_1.ArrowVerticalTriangleWidthParameterName).value;\n          var p1dy = (height - shape.parameters.get(ArrowHorizontalShapeDescription_1.ArrowVerticalLineHeightParameterName).value) / 2;\n          var p0x1 = shape.normalizeX(left + p0dx);\n          var p1y1 = shape.normalizeY(top + p1dy);\n          var p1y2 = shape.normalizeY(bottom - p1dy);\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(left, p1y1), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, p1y1), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, cy), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, p1y2), new PathPrimitive_1.PathPrimitiveLineToCommand(left, p1y2), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        ArrowRightShapeDescription.prototype.modifyParameters = function (shape, parameters, deltaX, deltaY) {\n          this.changeParameterValue(parameters, ArrowHorizontalShapeDescription_1.ArrowVerticalTriangleWidthParameterName, function (p) {\n            return p.value - deltaX;\n          });\n          this.changeParameterValue(parameters, ArrowHorizontalShapeDescription_1.ArrowVerticalLineHeightParameterName, function (p) {\n            return p.value - deltaY * 2;\n          });\n          this.normalizeParameters(shape, parameters);\n        };\n\n        ArrowRightShapeDescription.prototype.getParameterPoints = function (shape) {\n          return [new ShapeParameterPoint_1.ShapeParameterPoint(\"c\", new point_1.Point(shape.normalizeX(shape.position.x + shape.size.width - shape.parameters.get(ArrowHorizontalShapeDescription_1.ArrowVerticalTriangleWidthParameterName).value), shape.normalizeY(shape.position.y + (shape.size.height - shape.parameters.get(ArrowHorizontalShapeDescription_1.ArrowVerticalLineHeightParameterName).value) / 2)))];\n        };\n\n        ArrowRightShapeDescription.prototype.processConnectionPoint = function (shape, point) {\n          var triangleWidth = shape.parameters.get(ArrowHorizontalShapeDescription_1.ArrowVerticalTriangleWidthParameterName).value;\n\n          if (point.x > shape.position.x + shape.size.width - triangleWidth) {\n            var tg = shape.size.height / 2 / triangleWidth;\n            var delta = (point.x - (shape.position.x + shape.size.width - triangleWidth)) * tg;\n            var side = shape.getConnectionPointSide(point);\n            if (side === DiagramItem_1.ConnectionPointSide.North) point.y += delta;else if (side === DiagramItem_1.ConnectionPointSide.South) point.y -= delta;\n          } else _super.prototype.processConnectionPoint.call(this, shape, point);\n        };\n\n        return ArrowRightShapeDescription;\n      }(ArrowHorizontalShapeDescription_1.ArrowHorizontalShapeDescription);\n\n      exports.ArrowRightShapeDescription = ArrowRightShapeDescription;\n      /***/\n    },\n    /* 211 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics120 = function extendStatics(d, b) {\n          _extendStatics120 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics120(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics120(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ArrowUpShapeDescription = void 0;\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var ShapeParameterPoint_1 = __webpack_require__(29);\n\n      var point_1 = __webpack_require__(1);\n\n      var ArrowVerticalShapeDescription_1 = __webpack_require__(92);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      var ArrowUpShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(ArrowUpShapeDescription, _super);\n\n        function ArrowUpShapeDescription() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        Object.defineProperty(ArrowUpShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.ArrowUp;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ArrowUpShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.x,\n              top = rect.y,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width;\n          var cx = rect.center.x;\n          var p1dx = (width - shape.parameters.get(ArrowVerticalShapeDescription_1.ArrowVerticalLineWidthParameterName).value) / 2;\n          var p0dy = shape.parameters.get(ArrowVerticalShapeDescription_1.ArrowVerticalTriangleHeightParameterName).value;\n          var p1x1 = shape.normalizeX(left + p1dx);\n          var p0y1 = shape.normalizeY(top + p0dy);\n          var p1x2 = shape.normalizeX(right - p1dx);\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(cx, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, p0y1), new PathPrimitive_1.PathPrimitiveLineToCommand(p1x2, p0y1), new PathPrimitive_1.PathPrimitiveLineToCommand(p1x2, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(p1x1, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(p1x1, p0y1), new PathPrimitive_1.PathPrimitiveLineToCommand(left, p0y1), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        ArrowUpShapeDescription.prototype.modifyParameters = function (shape, parameters, deltaX, deltaY) {\n          this.changeParameterValue(parameters, ArrowVerticalShapeDescription_1.ArrowVerticalTriangleHeightParameterName, function (p) {\n            return p.value + deltaY;\n          });\n          this.changeParameterValue(parameters, ArrowVerticalShapeDescription_1.ArrowVerticalLineWidthParameterName, function (p) {\n            return p.value - deltaX * 2;\n          });\n          this.normalizeParameters(shape, parameters);\n        };\n\n        ArrowUpShapeDescription.prototype.getParameterPoints = function (shape) {\n          return [new ShapeParameterPoint_1.ShapeParameterPoint(\"c\", new point_1.Point(shape.normalizeX(shape.position.x + (shape.size.width - shape.parameters.get(ArrowVerticalShapeDescription_1.ArrowVerticalLineWidthParameterName).value) / 2), shape.normalizeY(shape.position.y + shape.parameters.get(ArrowVerticalShapeDescription_1.ArrowVerticalTriangleHeightParameterName).value)))];\n        };\n\n        ArrowUpShapeDescription.prototype.processConnectionPoint = function (shape, point) {\n          var triangleHeight = shape.parameters.get(ArrowVerticalShapeDescription_1.ArrowVerticalTriangleHeightParameterName).value;\n\n          if (point.y < shape.position.y + triangleHeight) {\n            var tg = shape.size.width / 2 / triangleHeight;\n            var delta = (shape.position.y + triangleHeight - point.y) * tg;\n            var side = shape.getConnectionPointSide(point);\n            if (side === DiagramItem_1.ConnectionPointSide.East) point.x -= delta;else if (side === DiagramItem_1.ConnectionPointSide.West) point.x += delta;\n          } else _super.prototype.processConnectionPoint.call(this, shape, point);\n        };\n\n        return ArrowUpShapeDescription;\n      }(ArrowVerticalShapeDescription_1.ArrowVerticalShapeDescription);\n\n      exports.ArrowUpShapeDescription = ArrowUpShapeDescription;\n      /***/\n    },\n    /* 212 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics121 = function extendStatics(d, b) {\n          _extendStatics121 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics121(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics121(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.CrossShapeDescription = exports.CrossVerticalWidthParameterName = exports.CrossHorizontalWidthParameterName = void 0;\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var point_1 = __webpack_require__(1);\n\n      var ShapeParameters_1 = __webpack_require__(36);\n\n      var ShapeParameterPoint_1 = __webpack_require__(29);\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      exports.CrossHorizontalWidthParameterName = \"chw\";\n      exports.CrossVerticalWidthParameterName = \"cvw\";\n\n      var CrossShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(CrossShapeDescription, _super);\n\n        function CrossShapeDescription() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        Object.defineProperty(CrossShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Cross;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(CrossShapeDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return true;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        CrossShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.x,\n              top = rect.y,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          var p0dx = (width - shape.parameters.get(exports.CrossHorizontalWidthParameterName).value) / 2;\n          var p1dy = (height - shape.parameters.get(exports.CrossVerticalWidthParameterName).value) / 2;\n          var p0x1 = shape.normalizeX(left + p0dx);\n          var p1y1 = shape.normalizeY(top + p1dy);\n          var p0x2 = shape.normalizeX(right - p0dx);\n          var p1y2 = shape.normalizeY(bottom - p1dy);\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(left, p1y1), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, p1y1), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, top), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x2, top), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x2, p1y1), new PathPrimitive_1.PathPrimitiveLineToCommand(right, p1y1), new PathPrimitive_1.PathPrimitiveLineToCommand(right, p1y2), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x2, p1y2), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x2, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, p1y2), new PathPrimitive_1.PathPrimitiveLineToCommand(left, p1y2), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        CrossShapeDescription.prototype.createParameters = function (parameters) {\n          parameters.addRange([new ShapeParameters_1.ShapeParameter(exports.CrossHorizontalWidthParameterName, this.defaultSize.width * 0.2), new ShapeParameters_1.ShapeParameter(exports.CrossVerticalWidthParameterName, this.defaultSize.height * 0.2)]);\n        };\n\n        CrossShapeDescription.prototype.normalizeParameters = function (shape, parameters) {\n          this.changeParameterValue(parameters, exports.CrossHorizontalWidthParameterName, function (p) {\n            return Math.max(0, Math.min(shape.size.width, p.value));\n          });\n          this.changeParameterValue(parameters, exports.CrossVerticalWidthParameterName, function (p) {\n            return Math.max(0, Math.min(shape.size.height, p.value));\n          });\n        };\n\n        CrossShapeDescription.prototype.modifyParameters = function (shape, parameters, deltaX, deltaY) {\n          this.changeParameterValue(parameters, exports.CrossHorizontalWidthParameterName, function (p) {\n            return p.value - deltaX * 2;\n          });\n          this.changeParameterValue(parameters, exports.CrossVerticalWidthParameterName, function (p) {\n            return p.value - deltaY * 2;\n          });\n          this.normalizeParameters(shape, parameters);\n        };\n\n        CrossShapeDescription.prototype.getParameterPoints = function (shape) {\n          return [new ShapeParameterPoint_1.ShapeParameterPoint(\"c\", new point_1.Point(shape.normalizeX(shape.position.x + (shape.size.width - shape.parameters.get(exports.CrossHorizontalWidthParameterName).value) / 2), shape.normalizeY(shape.position.y + (shape.size.height - shape.parameters.get(exports.CrossVerticalWidthParameterName).value) / 2)))];\n        };\n\n        CrossShapeDescription.prototype.getTextRectangle = function (shape) {\n          return shape.rectangle.clone().inflate(-ShapeDescription_1.ShapeTextPadding, -ShapeDescription_1.ShapeTextPadding);\n        };\n\n        CrossShapeDescription.prototype.getSizeByText = function (textSize, _shape) {\n          return textSize.clone().offset(ShapeDescription_1.ShapeTextPadding * 2, ShapeDescription_1.ShapeTextPadding * 2);\n        };\n\n        return CrossShapeDescription;\n      }(ShapeDescription_1.ShapeDescription);\n\n      exports.CrossShapeDescription = CrossShapeDescription;\n      /***/\n    },\n    /* 213 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics122 = function extendStatics(d, b) {\n          _extendStatics122 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics122(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics122(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.HeartShapeDescription = void 0;\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var ConnectionPoint_1 = __webpack_require__(44);\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      var HeartShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(HeartShapeDescription, _super);\n\n        function HeartShapeDescription() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        Object.defineProperty(HeartShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Heart;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(HeartShapeDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return true;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        HeartShapeDescription.prototype.createConnectionPoints = function () {\n          return [new ConnectionPoint_1.ConnectionPoint(0.5, 0.15, DiagramItem_1.ConnectionPointSide.North), new ConnectionPoint_1.ConnectionPoint(1, 0.25, DiagramItem_1.ConnectionPointSide.East), new ConnectionPoint_1.ConnectionPoint(0.5, 1, DiagramItem_1.ConnectionPointSide.South), new ConnectionPoint_1.ConnectionPoint(0, 0.25, DiagramItem_1.ConnectionPointSide.West)];\n        };\n\n        HeartShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.x,\n              top = rect.y,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(right - width * 0.25, top), new PathPrimitive_1.PathPrimitiveCubicCurveToCommand(right - width * 0.15, top, right, top + height * 0.1, right, top + height * 0.25), new PathPrimitive_1.PathPrimitiveCubicCurveToCommand(right, top + height * 0.3, right - width * 0.02, top + height * 0.35, right - width * 0.05, top + height * 0.4), new PathPrimitive_1.PathPrimitiveLineToCommand(rect.center.x, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(left + width * 0.05, top + height * 0.4), new PathPrimitive_1.PathPrimitiveCubicCurveToCommand(left + width * 0.02, top + height * 0.35, left, top + height * 0.3, left, top + height * 0.25), new PathPrimitive_1.PathPrimitiveCubicCurveToCommand(left, top + height * 0.1, left + width * 0.15, top, left + width * 0.25, top), new PathPrimitive_1.PathPrimitiveCubicCurveToCommand(left + width * 0.3, top, left + width * 0.45, top + height * 0.03, left + width * 0.5, top + height * 0.15), new PathPrimitive_1.PathPrimitiveCubicCurveToCommand(right - width * 0.45, top + height * 0.03, right - width * 0.3, top, right - width * 0.25, top), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        HeartShapeDescription.prototype.getTextRectangle = function (shape) {\n          return shape.rectangle.clone().inflate(-ShapeDescription_1.ShapeTextPadding, -ShapeDescription_1.ShapeTextPadding);\n        };\n\n        HeartShapeDescription.prototype.getSizeByText = function (_textSize, shape) {\n          return shape.size.clone().offset(ShapeDescription_1.ShapeTextPadding * 2, ShapeDescription_1.ShapeTextPadding * 2);\n        };\n\n        return HeartShapeDescription;\n      }(ShapeDescription_1.ShapeDescription);\n\n      exports.HeartShapeDescription = HeartShapeDescription;\n      /***/\n    },\n    /* 214 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics123 = function extendStatics(d, b) {\n          _extendStatics123 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics123(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics123(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.OctagonShapeDescription = void 0;\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var PolygonShapeDescription_1 = __webpack_require__(94);\n\n      var Utils_1 = __webpack_require__(3);\n\n      var rectangle_1 = __webpack_require__(13);\n\n      var OctagonShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(OctagonShapeDescription, _super);\n\n        function OctagonShapeDescription() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        Object.defineProperty(OctagonShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Octagon;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(OctagonShapeDescription.prototype, \"angleCount\", {\n          get: function get() {\n            return 8;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        OctagonShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.x,\n              top = rect.y,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          var angle = Math.PI - this.angle;\n          var sideX = width / (1 + 2 * Math.cos(angle));\n          var sideY = height / (1 + 2 * Math.cos(angle));\n          var x1 = left + (width - sideX) / 2;\n          var x2 = x1 + sideX;\n          var y1 = top + (height - sideY) / 2;\n          var y2 = y1 + sideY;\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(x1, top), new PathPrimitive_1.PathPrimitiveLineToCommand(x2, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, y1), new PathPrimitive_1.PathPrimitiveLineToCommand(right, y2), new PathPrimitive_1.PathPrimitiveLineToCommand(x2, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(x1, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(left, y2), new PathPrimitive_1.PathPrimitiveLineToCommand(left, y1), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        OctagonShapeDescription.prototype.calculateHeight = function (width) {\n          return width;\n        };\n\n        OctagonShapeDescription.prototype.getTextRectangle = function (shape) {\n          var textSize = Utils_1.GeometryUtils.getMaxRectangleEnscribedInEllipse(shape.size);\n          return rectangle_1.Rectangle.fromGeometry(shape.position.clone().offset((shape.size.width - textSize.width) / 2, (shape.size.height - textSize.height) / 2), textSize);\n        };\n\n        OctagonShapeDescription.prototype.getSizeByText = function (textSize, _shape) {\n          return Utils_1.GeometryUtils.getEllipseByEnscribedRectangle(textSize);\n        };\n\n        return OctagonShapeDescription;\n      }(PolygonShapeDescription_1.PolygonShapeDescription);\n\n      exports.OctagonShapeDescription = OctagonShapeDescription;\n      /***/\n    },\n    /* 215 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics124 = function extendStatics(d, b) {\n          _extendStatics124 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics124(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics124(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.StarShapeDescription = exports.StarConvexParameterName = void 0;\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var PentagonShapeDescription_1 = __webpack_require__(123);\n\n      var ShapeParameters_1 = __webpack_require__(36);\n\n      var ShapeParameterPoint_1 = __webpack_require__(29);\n\n      var point_1 = __webpack_require__(1);\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      exports.StarConvexParameterName = \"sc\";\n\n      var StarShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(StarShapeDescription, _super);\n\n        function StarShapeDescription() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        Object.defineProperty(StarShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Star;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        StarShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.x,\n              top = rect.y,\n              right = rect.right,\n              width = rect.width,\n              height = rect.height;\n          var bottom = this.getActualBottom(top, rect.bottom, width, height);\n          var cx = rect.center.x;\n          var cy = top + (bottom - top) / 2;\n          var ratio = height / width;\n          var angle = Math.PI - this.angle;\n          var py = width / 2 * Math.tan(angle / 2) * ratio;\n          var y = top + py;\n          var px = (height - py) / Math.tan(angle) / ratio;\n          var x1 = left + px;\n          var x2 = right - px;\n          var pDistance = shape.parameters.get(exports.StarConvexParameterName).value;\n          var distance = this.getInnerPointDistance(cx, cx, right, cy, top, y);\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(cx, top), new PathPrimitive_1.PathPrimitiveLineToCommand(this.getInnerPointPos(cx, cx, right, pDistance, distance), this.getInnerPointPos(cy, top, y, pDistance, distance)), new PathPrimitive_1.PathPrimitiveLineToCommand(right, y), new PathPrimitive_1.PathPrimitiveLineToCommand(this.getInnerPointPos(cx, right, x2, pDistance, distance), this.getInnerPointPos(cy, y, bottom, pDistance, distance)), new PathPrimitive_1.PathPrimitiveLineToCommand(x2, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(this.getInnerPointPos(cx, x2, x1, pDistance, distance), this.getInnerPointPos(cy, bottom, bottom, pDistance, distance)), new PathPrimitive_1.PathPrimitiveLineToCommand(x1, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(this.getInnerPointPos(cx, x1, left, pDistance, distance), this.getInnerPointPos(cy, bottom, y, pDistance, distance)), new PathPrimitive_1.PathPrimitiveLineToCommand(left, y), new PathPrimitive_1.PathPrimitiveLineToCommand(this.getInnerPointPos(cx, left, cx, pDistance, distance), this.getInnerPointPos(cy, y, top, pDistance, distance)), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        StarShapeDescription.prototype.createParameters = function (parameters) {\n          parameters.addRange([new ShapeParameters_1.ShapeParameter(exports.StarConvexParameterName, 300)]);\n        };\n\n        StarShapeDescription.prototype.normalizeParameters = function (shape, parameters) {\n          var rect = shape.rectangle;\n          var top = rect.y,\n              right = rect.right,\n              width = rect.width,\n              height = rect.height;\n          var bottom = this.getActualBottom(top, rect.bottom, width, height);\n          var cx = rect.center.x;\n          var cy = top + (bottom - top) / 2;\n          var ratio = height / width;\n          var angle = Math.PI - this.angle;\n          var py = width / 2 * Math.tan(angle / 2) * ratio;\n          var y = top + py;\n          var distance = this.getInnerPointDistance(cx, cx, right, cy, top, y);\n          this.changeParameterValue(parameters, exports.StarConvexParameterName, function (p) {\n            return Math.max(0, Math.min(distance, p.value));\n          });\n        };\n\n        StarShapeDescription.prototype.modifyParameters = function (shape, parameters, deltaX, deltaY) {\n          var distance = Math.sqrt(Math.pow(deltaX, 2) + Math.pow(deltaY, 2));\n          if (deltaX < 0 || deltaY > 0) distance = -distance;\n          this.changeParameterValue(parameters, exports.StarConvexParameterName, function (p) {\n            return p.value + distance;\n          });\n          this.normalizeParameters(shape, parameters);\n        };\n\n        StarShapeDescription.prototype.getParameterPoints = function (shape) {\n          var rect = shape.rectangle;\n          var top = rect.y,\n              right = rect.right,\n              width = rect.width,\n              height = rect.height;\n          var bottom = this.getActualBottom(top, rect.bottom, width, height);\n          var cx = rect.center.x;\n          var cy = top + (bottom - top) / 2;\n          var ratio = height / width;\n          var angle = Math.PI - this.angle;\n          var py = width / 2 * Math.tan(angle / 2) * ratio;\n          var y = top + py;\n          var pDistance = shape.parameters.get(exports.StarConvexParameterName).value;\n          var distance = this.getInnerPointDistance(cx, cx, right, cy, top, y);\n          var innerPointX = this.getInnerPointPos(cx, cx, right, pDistance, distance);\n          var innerPointY = this.getInnerPointPos(cy, top, y, pDistance, distance);\n          return [new ShapeParameterPoint_1.ShapeParameterPoint(\"c\", new point_1.Point(innerPointX, innerPointY))];\n        };\n\n        StarShapeDescription.prototype.processConnectionPoint = function (shape, point) {\n          _super.prototype.processConnectionPoint.call(this, shape, point);\n\n          var side = shape.getConnectionPointSide(point);\n\n          if (side === DiagramItem_1.ConnectionPointSide.South) {\n            var rect = shape.rectangle;\n            var top_1 = rect.y,\n                right = rect.right,\n                width = rect.width,\n                height = rect.height;\n            var bottom = this.getActualBottom(top_1, rect.bottom, width, height);\n            var cx = rect.center.x;\n            var cy = top_1 + (bottom - top_1) / 2;\n            var ratio = height / width;\n            var angle = Math.PI - this.angle;\n            var py = width / 2 * Math.tan(angle / 2) * ratio;\n            var y = top_1 + py;\n            var pDistance = shape.parameters.get(exports.StarConvexParameterName).value;\n            var distance = this.getInnerPointDistance(cx, cx, right, cy, top_1, y);\n            point.y = this.getInnerPointPos(cy, bottom, bottom, pDistance, distance);\n          }\n        };\n\n        StarShapeDescription.prototype.getInnerPointDistanceByAxis = function (center, edge1, edge2) {\n          var edgeX = Math.min(edge1, edge2) + Math.abs(edge1 - edge2) / 2;\n          return edgeX - center;\n        };\n\n        StarShapeDescription.prototype.getInnerPointPos = function (center, edge1, edge2, pDistance, distance) {\n          var ratio = Math.min(1, pDistance / distance);\n          return center + this.getInnerPointDistanceByAxis(center, edge1, edge2) * ratio;\n        };\n\n        StarShapeDescription.prototype.getInnerPointDistance = function (centerX, edgeX1, edgeX2, centerY, edgeY1, edgeY2) {\n          var disX = this.getInnerPointDistanceByAxis(centerX, edgeX1, edgeX2);\n          var disY = this.getInnerPointDistanceByAxis(centerY, edgeY1, edgeY2);\n          return Math.sqrt(Math.pow(disX, 2) + Math.pow(disY, 2));\n        };\n\n        StarShapeDescription.prototype.getActualBottom = function (top, bottom, width, height) {\n          var result = top + _super.prototype.calculateHeight.call(this, width) * height / width;\n          return result < bottom ? result : bottom;\n        };\n\n        StarShapeDescription.prototype.calculateHeight = function (width) {\n          return width;\n        };\n\n        return StarShapeDescription;\n      }(PentagonShapeDescription_1.PentagonShapeDescription);\n\n      exports.StarShapeDescription = StarShapeDescription;\n      /***/\n    },\n    /* 216 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics125 = function extendStatics(d, b) {\n          _extendStatics125 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics125(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics125(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ArrowDownShapeDescription = void 0;\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var ShapeParameterPoint_1 = __webpack_require__(29);\n\n      var point_1 = __webpack_require__(1);\n\n      var ArrowVerticalShapeDescription_1 = __webpack_require__(92);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      var ArrowDownShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(ArrowDownShapeDescription, _super);\n\n        function ArrowDownShapeDescription() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        Object.defineProperty(ArrowDownShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.ArrowDown;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ArrowDownShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.x,\n              top = rect.y,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          var cx = rect.center.x;\n          var p1dx = (width - shape.parameters.get(ArrowVerticalShapeDescription_1.ArrowVerticalLineWidthParameterName).value) / 2;\n          var p0dy = height - shape.parameters.get(ArrowVerticalShapeDescription_1.ArrowVerticalTriangleHeightParameterName).value;\n          var p1x1 = shape.normalizeX(left + p1dx);\n          var p0y1 = shape.normalizeY(top + p0dy);\n          var p1x2 = shape.normalizeX(right - p1dx);\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(p1x1, top), new PathPrimitive_1.PathPrimitiveLineToCommand(p1x2, top), new PathPrimitive_1.PathPrimitiveLineToCommand(p1x2, p0y1), new PathPrimitive_1.PathPrimitiveLineToCommand(right, p0y1), new PathPrimitive_1.PathPrimitiveLineToCommand(cx, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(left, p0y1), new PathPrimitive_1.PathPrimitiveLineToCommand(p1x1, p0y1), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        ArrowDownShapeDescription.prototype.modifyParameters = function (shape, parameters, deltaX, deltaY) {\n          this.changeParameterValue(parameters, ArrowVerticalShapeDescription_1.ArrowVerticalTriangleHeightParameterName, function (p) {\n            return p.value - deltaY;\n          });\n          this.changeParameterValue(parameters, ArrowVerticalShapeDescription_1.ArrowVerticalLineWidthParameterName, function (p) {\n            return p.value - deltaX * 2;\n          });\n          this.normalizeParameters(shape, parameters);\n        };\n\n        ArrowDownShapeDescription.prototype.getParameterPoints = function (shape) {\n          return [new ShapeParameterPoint_1.ShapeParameterPoint(\"c\", new point_1.Point(shape.normalizeX(shape.position.x + (shape.size.width - shape.parameters.get(ArrowVerticalShapeDescription_1.ArrowVerticalLineWidthParameterName).value) / 2), shape.normalizeY(shape.position.y + shape.size.height - shape.parameters.get(ArrowVerticalShapeDescription_1.ArrowVerticalTriangleHeightParameterName).value)))];\n        };\n\n        ArrowDownShapeDescription.prototype.processConnectionPoint = function (shape, point) {\n          var triangleHeight = shape.parameters.get(ArrowVerticalShapeDescription_1.ArrowVerticalTriangleHeightParameterName).value;\n\n          if (point.y > shape.position.y + shape.size.height - triangleHeight) {\n            var tg = shape.size.width / 2 / triangleHeight;\n            var delta = (point.y - (shape.position.y + shape.size.height - triangleHeight)) * tg;\n            var side = shape.getConnectionPointSide(point);\n            if (side === DiagramItem_1.ConnectionPointSide.East) point.x -= delta;else if (side === DiagramItem_1.ConnectionPointSide.West) point.x += delta;\n          } else _super.prototype.processConnectionPoint.call(this, shape, point);\n        };\n\n        return ArrowDownShapeDescription;\n      }(ArrowVerticalShapeDescription_1.ArrowVerticalShapeDescription);\n\n      exports.ArrowDownShapeDescription = ArrowDownShapeDescription;\n      /***/\n    },\n    /* 217 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics126 = function extendStatics(d, b) {\n          _extendStatics126 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics126(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics126(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ArrowLeftRightShapeDescription = void 0;\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var ArrowHorizontalShapeDescription_1 = __webpack_require__(93);\n\n      var ShapeParameterPoint_1 = __webpack_require__(29);\n\n      var point_1 = __webpack_require__(1);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var ArrowLeftRightShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(ArrowLeftRightShapeDescription, _super);\n\n        function ArrowLeftRightShapeDescription() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        Object.defineProperty(ArrowLeftRightShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.ArrowLeftRight;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ArrowLeftRightShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.x,\n              top = rect.y,\n              right = rect.right,\n              bottom = rect.bottom,\n              height = rect.height;\n          var cy = rect.center.y;\n          var p0dx = shape.parameters.get(ArrowHorizontalShapeDescription_1.ArrowVerticalTriangleWidthParameterName).value;\n          var p1dy = (height - shape.parameters.get(ArrowHorizontalShapeDescription_1.ArrowVerticalLineHeightParameterName).value) / 2;\n          var p0x1 = shape.normalizeX(left + p0dx);\n          var p1y1 = shape.normalizeY(top + p1dy);\n          var p0x2 = shape.normalizeX(right - p0dx);\n          var p1y2 = shape.normalizeY(bottom - p1dy);\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(left, cy), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, top), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, p1y1), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x2, p1y1), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x2, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, cy), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x2, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x2, p1y2), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, p1y2), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, bottom), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        ArrowLeftRightShapeDescription.prototype.normalizeParameters = function (shape, parameters) {\n          this.changeParameterValue(parameters, ArrowHorizontalShapeDescription_1.ArrowVerticalTriangleWidthParameterName, function (p) {\n            return Math.max(0, Math.min(shape.size.width / 2 - 2 * shape.strokeWidth, p.value));\n          });\n          this.changeParameterValue(parameters, ArrowHorizontalShapeDescription_1.ArrowVerticalLineHeightParameterName, function (p) {\n            return Math.max(0, Math.min(shape.size.height, p.value));\n          });\n        };\n\n        ArrowLeftRightShapeDescription.prototype.modifyParameters = function (shape, parameters, deltaX, deltaY) {\n          this.changeParameterValue(parameters, ArrowHorizontalShapeDescription_1.ArrowVerticalTriangleWidthParameterName, function (p) {\n            return p.value + deltaX;\n          });\n          this.changeParameterValue(parameters, ArrowHorizontalShapeDescription_1.ArrowVerticalLineHeightParameterName, function (p) {\n            return p.value - deltaY * 2;\n          });\n          this.normalizeParameters(shape, parameters);\n        };\n\n        ArrowLeftRightShapeDescription.prototype.getParameterPoints = function (shape) {\n          return [new ShapeParameterPoint_1.ShapeParameterPoint(\"c\", new point_1.Point(shape.normalizeX(shape.position.x + shape.parameters.get(ArrowHorizontalShapeDescription_1.ArrowVerticalTriangleWidthParameterName).value), shape.normalizeY(shape.position.y + (shape.size.height - shape.parameters.get(ArrowHorizontalShapeDescription_1.ArrowVerticalLineHeightParameterName).value) / 2)))];\n        };\n\n        return ArrowLeftRightShapeDescription;\n      }(ArrowHorizontalShapeDescription_1.ArrowHorizontalShapeDescription);\n\n      exports.ArrowLeftRightShapeDescription = ArrowLeftRightShapeDescription;\n      /***/\n    },\n    /* 218 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics127 = function extendStatics(d, b) {\n          _extendStatics127 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics127(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics127(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ArrowLeftShapeDescription = void 0;\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var ArrowHorizontalShapeDescription_1 = __webpack_require__(93);\n\n      var ShapeParameterPoint_1 = __webpack_require__(29);\n\n      var point_1 = __webpack_require__(1);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      var ArrowLeftShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(ArrowLeftShapeDescription, _super);\n\n        function ArrowLeftShapeDescription() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        Object.defineProperty(ArrowLeftShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.ArrowLeft;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ArrowLeftShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.x,\n              top = rect.y,\n              right = rect.right,\n              bottom = rect.bottom,\n              height = rect.height;\n          var cy = rect.center.y;\n          var p0dx = shape.parameters.get(ArrowHorizontalShapeDescription_1.ArrowVerticalTriangleWidthParameterName).value;\n          var p1dy = (height - shape.parameters.get(ArrowHorizontalShapeDescription_1.ArrowVerticalLineHeightParameterName).value) / 2;\n          var p0x1 = shape.normalizeX(left + p0dx);\n          var p1y1 = shape.normalizeY(top + p1dy);\n          var p1y2 = shape.normalizeY(bottom - p1dy);\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(left, cy), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, top), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, p1y1), new PathPrimitive_1.PathPrimitiveLineToCommand(right, p1y1), new PathPrimitive_1.PathPrimitiveLineToCommand(right, p1y2), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, p1y2), new PathPrimitive_1.PathPrimitiveLineToCommand(p0x1, bottom), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        ArrowLeftShapeDescription.prototype.modifyParameters = function (shape, parameters, deltaX, deltaY) {\n          this.changeParameterValue(parameters, ArrowHorizontalShapeDescription_1.ArrowVerticalTriangleWidthParameterName, function (p) {\n            return p.value + deltaX;\n          });\n          this.changeParameterValue(parameters, ArrowHorizontalShapeDescription_1.ArrowVerticalLineHeightParameterName, function (p) {\n            return p.value - deltaY * 2;\n          });\n          this.normalizeParameters(shape, parameters);\n        };\n\n        ArrowLeftShapeDescription.prototype.getParameterPoints = function (shape) {\n          return [new ShapeParameterPoint_1.ShapeParameterPoint(\"c\", new point_1.Point(shape.normalizeX(shape.position.x + shape.parameters.get(ArrowHorizontalShapeDescription_1.ArrowVerticalTriangleWidthParameterName).value), shape.normalizeY(shape.position.y + (shape.size.height - shape.parameters.get(ArrowHorizontalShapeDescription_1.ArrowVerticalLineHeightParameterName).value) / 2)))];\n        };\n\n        ArrowLeftShapeDescription.prototype.processConnectionPoint = function (shape, point) {\n          var triangleWidth = shape.parameters.get(ArrowHorizontalShapeDescription_1.ArrowVerticalTriangleWidthParameterName).value;\n\n          if (point.x < shape.position.x + triangleWidth) {\n            var tg = shape.size.height / 2 / triangleWidth;\n            var delta = (shape.position.x + triangleWidth - point.x) * tg;\n            var side = shape.getConnectionPointSide(point);\n            if (side === DiagramItem_1.ConnectionPointSide.North) point.y += delta;else if (side === DiagramItem_1.ConnectionPointSide.South) point.y -= delta;\n          } else _super.prototype.processConnectionPoint.call(this, shape, point);\n        };\n\n        return ArrowLeftShapeDescription;\n      }(ArrowHorizontalShapeDescription_1.ArrowHorizontalShapeDescription);\n\n      exports.ArrowLeftShapeDescription = ArrowLeftShapeDescription;\n      /***/\n    },\n    /* 219 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics128 = function extendStatics(d, b) {\n          _extendStatics128 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics128(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics128(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MultipleDocumentsShapeDescription = void 0;\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var DocumentShapeDescription_1 = __webpack_require__(126);\n\n      var ClipPathPrimitive_1 = __webpack_require__(53);\n\n      var Utils_1 = __webpack_require__(18);\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var size_1 = __webpack_require__(2);\n\n      var MultipleDocumentsShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(MultipleDocumentsShapeDescription, _super);\n\n        function MultipleDocumentsShapeDescription() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        Object.defineProperty(MultipleDocumentsShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.MultipleDocuments;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(MultipleDocumentsShapeDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        MultipleDocumentsShapeDescription.prototype.createShapePrimitives = function (shape, forToolbox) {\n          var rect = shape.rectangle;\n          var _a = shape.rectangle,\n              width = _a.width,\n              height = _a.height;\n          var ratio = forToolbox ? MultipleDocumentsShapeDescription.documentsOffsetRatioForToolbox : MultipleDocumentsShapeDescription.documentsOffsetRatio;\n          var documentOffsetX = Math.ceil(width * ratio);\n          var documentOffsetY = Math.ceil(height * ratio);\n          rect = rect.clone().inflate(-documentOffsetX, -documentOffsetY).clone().moveRectangle(-documentOffsetX, -documentOffsetY);\n          var rect1 = rect.clone().moveRectangle(documentOffsetX, documentOffsetY);\n          var rect2 = rect1.clone().moveRectangle(documentOffsetX, documentOffsetY);\n          var clipPathId = Utils_1.RenderUtils.generateSvgElementId(\"clipRect\");\n          var primitives = [];\n          return primitives.concat(this.createDocumentPrimitives(rect, shape.style, clipPathId + \"1\", rect1)).concat(this.createDocumentPrimitives(rect1, shape.style, clipPathId + \"2\", rect2)).concat(this.createDocumentPrimitives(rect2, shape.style));\n        };\n\n        MultipleDocumentsShapeDescription.prototype.createDocumentPrimitives = function (rect, style, clipPathId, clipRect) {\n          var left = rect.x,\n              top = rect.y,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          var cx = rect.center.x;\n          var dy = height * DocumentShapeDescription_1.DocumentShapeDescription.curveOffsetRatio;\n          var primitives = [];\n          primitives = primitives.concat([new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(left, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, bottom), new PathPrimitive_1.PathPrimitiveQuadraticCurveToCommand(right - width * 0.25, bottom - 2 * dy, cx, bottom - dy), new PathPrimitive_1.PathPrimitiveQuadraticCurveToCommand(left + width * 0.25, bottom + dy, left, bottom - dy), new PathPrimitive_1.PathPrimitiveClosePathCommand()], style, undefined, clipRect && clipPathId)]);\n          if (clipRect && clipPathId) primitives = primitives.concat([new ClipPathPrimitive_1.ClipPathPrimitive(clipPathId, [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(left - style.strokeWidth, top - style.strokeWidth), new PathPrimitive_1.PathPrimitiveLineToCommand(right + style.strokeWidth, top - style.strokeWidth), new PathPrimitive_1.PathPrimitiveLineToCommand(right + style.strokeWidth, clipRect.y), new PathPrimitive_1.PathPrimitiveLineToCommand(clipRect.x, clipRect.y), new PathPrimitive_1.PathPrimitiveLineToCommand(clipRect.x, bottom + style.strokeWidth), new PathPrimitive_1.PathPrimitiveLineToCommand(left - style.strokeWidth, bottom + style.strokeWidth), new PathPrimitive_1.PathPrimitiveClosePathCommand()])])]);\n          return primitives;\n        };\n\n        MultipleDocumentsShapeDescription.prototype.getTextRectangle = function (shape) {\n          var rect = shape.rectangle;\n          var documentOffsetX = rect.width * MultipleDocumentsShapeDescription.documentsOffsetRatio;\n          var documentOffsetY = rect.height * MultipleDocumentsShapeDescription.documentsOffsetRatio;\n          rect = rect.clone().inflate(-documentOffsetX, -documentOffsetY).clone().moveRectangle(-documentOffsetX, -documentOffsetY);\n          var innerRect = rect.clone().moveRectangle(2 * documentOffsetX + ShapeDescription_1.ShapeTextPadding, 2 * documentOffsetY + ShapeDescription_1.ShapeTextPadding);\n          return innerRect.clone().resize(-2 * ShapeDescription_1.ShapeTextPadding, -rect.height * DocumentShapeDescription_1.DocumentShapeDescription.curveOffsetRatio - 2 * ShapeDescription_1.ShapeTextPadding);\n        };\n\n        MultipleDocumentsShapeDescription.prototype.getSizeByText = function (textSize, _shape) {\n          return new size_1.Size((textSize.width + 2 * ShapeDescription_1.ShapeTextPadding) / (1 - 2 * MultipleDocumentsShapeDescription.documentsOffsetRatio), (textSize.height + 2 * ShapeDescription_1.ShapeTextPadding) / ((1 - DocumentShapeDescription_1.DocumentShapeDescription.curveOffsetRatio) * (1 - MultipleDocumentsShapeDescription.documentsOffsetRatio))).nonNegativeSize();\n        };\n\n        MultipleDocumentsShapeDescription.documentsOffsetRatio = 0.1;\n        MultipleDocumentsShapeDescription.documentsOffsetRatioForToolbox = 0.16;\n        return MultipleDocumentsShapeDescription;\n      }(DocumentShapeDescription_1.DocumentShapeDescription);\n\n      exports.MultipleDocumentsShapeDescription = MultipleDocumentsShapeDescription;\n      /***/\n    },\n    /* 220 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics129 = function extendStatics(d, b) {\n          _extendStatics129 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics129(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics129(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.PreparationShapeDescription = void 0;\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var size_1 = __webpack_require__(2);\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var HexagonShapeDescription_1 = __webpack_require__(124);\n\n      var PreparationShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(PreparationShapeDescription, _super);\n\n        function PreparationShapeDescription() {\n          var _this = _super.call(this, true) || this;\n\n          _this.defaultSize = new size_1.Size(ShapeDescription_1.ShapeDefaultDimension, ShapeDescription_1.ShapeDefaultDimension * 0.75);\n          return _this;\n        }\n\n        Object.defineProperty(PreparationShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Preparation;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        return PreparationShapeDescription;\n      }(HexagonShapeDescription_1.HexagonShapeDescription);\n\n      exports.PreparationShapeDescription = PreparationShapeDescription;\n      /***/\n    },\n    /* 221 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics130 = function extendStatics(d, b) {\n          _extendStatics130 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics130(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics130(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.HardDiskShapeDescription = void 0;\n\n      var RectangleShapeDescription_1 = __webpack_require__(19);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var EllipsePrimitive_1 = __webpack_require__(52);\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var size_1 = __webpack_require__(2);\n\n      var HardDiskShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(HardDiskShapeDescription, _super);\n\n        function HardDiskShapeDescription() {\n          return _super.call(this, undefined, true) || this;\n        }\n\n        Object.defineProperty(HardDiskShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.HardDisk;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(HardDiskShapeDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        HardDiskShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.x,\n              top = rect.y,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width;\n          var cy = rect.center.y;\n          var dx = width * HardDiskShapeDescription.arcWidthRatio;\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(right - dx / 2, top), new PathPrimitive_1.PathPrimitiveLineToCommand(left + dx / 2, top), new PathPrimitive_1.PathPrimitiveArcToCommand(dx / 2, (bottom - top) / 2, 0, false, false, left + dx / 2, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(right - dx / 2, bottom)], shape.style), new EllipsePrimitive_1.EllipsePrimitive(right - dx / 2, cy, dx / 2, (bottom - top) / 2, shape.style)];\n        };\n\n        HardDiskShapeDescription.prototype.getTextRectangle = function (shape) {\n          var rect = shape.rectangle;\n          var dx = rect.width * HardDiskShapeDescription.arcWidthRatio * 1.5;\n          return rect.clone().resize(-dx - 2 * ShapeDescription_1.ShapeTextPadding, -2 * ShapeDescription_1.ShapeTextPadding).moveRectangle(ShapeDescription_1.ShapeTextPadding, ShapeDescription_1.ShapeTextPadding).nonNegativeSize();\n        };\n\n        HardDiskShapeDescription.prototype.getSizeByText = function (textSize, shape) {\n          return new size_1.Size((textSize.width + ShapeDescription_1.ShapeTextPadding * 2) / (1 - 1.5 * HardDiskShapeDescription.arcWidthRatio), shape.size.height + ShapeDescription_1.ShapeTextPadding);\n        };\n\n        HardDiskShapeDescription.arcWidthRatio = 0.2;\n        return HardDiskShapeDescription;\n      }(RectangleShapeDescription_1.RectangleShapeDescription);\n\n      exports.HardDiskShapeDescription = HardDiskShapeDescription;\n      /***/\n    },\n    /* 222 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics131 = function extendStatics(d, b) {\n          _extendStatics131 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics131(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics131(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.DatabaseShapeDescription = void 0;\n\n      var RectangleShapeDescription_1 = __webpack_require__(19);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var EllipsePrimitive_1 = __webpack_require__(52);\n\n      var DatabaseShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(DatabaseShapeDescription, _super);\n\n        function DatabaseShapeDescription() {\n          var _this = _super.call(this, undefined, true) || this;\n\n          _this.defaultSize.width = _this.defaultSize.height;\n          return _this;\n        }\n\n        Object.defineProperty(DatabaseShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Database;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DatabaseShapeDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        DatabaseShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.x,\n              top = rect.y,\n              right = rect.right,\n              bottom = rect.bottom,\n              height = rect.height;\n          var cx = rect.center.x;\n          var dy = height * DatabaseShapeDescription.arcWidthRatio;\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(right, top + dy / 2), new PathPrimitive_1.PathPrimitiveLineToCommand(right, bottom - dy / 2), new PathPrimitive_1.PathPrimitiveArcToCommand((right - left) / 2, dy / 2, 0, false, true, left, bottom - dy / 2), new PathPrimitive_1.PathPrimitiveLineToCommand(left, top + dy / 2)], shape.style), new EllipsePrimitive_1.EllipsePrimitive(cx, top + dy / 2, (right - left) / 2, dy / 2, shape.style)];\n        };\n\n        DatabaseShapeDescription.prototype.getTextRectangle = function (shape) {\n          var rect = shape.rectangle;\n          var dy = rect.height * DatabaseShapeDescription.arcWidthRatio;\n          return rect.clone().resize(0, -dy).clone().moveRectangle(0, dy);\n        };\n\n        DatabaseShapeDescription.arcWidthRatio = 0.2;\n        return DatabaseShapeDescription;\n      }(RectangleShapeDescription_1.RectangleShapeDescription);\n\n      exports.DatabaseShapeDescription = DatabaseShapeDescription;\n      /***/\n    },\n    /* 223 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics132 = function extendStatics(d, b) {\n          _extendStatics132 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics132(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics132(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.InternalStorageShapeDescription = exports.InternalStorageVerticalEdgeParameterName = exports.InternalStorageHorizontalEdgeParameterName = void 0;\n\n      var RectangleShapeDescription_1 = __webpack_require__(19);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var ShapeParameters_1 = __webpack_require__(36);\n\n      var ShapeParameterPoint_1 = __webpack_require__(29);\n\n      var point_1 = __webpack_require__(1);\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      exports.InternalStorageHorizontalEdgeParameterName = \"he\";\n      exports.InternalStorageVerticalEdgeParameterName = \"ve\";\n\n      var InternalStorageShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(InternalStorageShapeDescription, _super);\n\n        function InternalStorageShapeDescription() {\n          return _super.call(this, undefined, true) || this;\n        }\n\n        Object.defineProperty(InternalStorageShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.InternalStorage;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(InternalStorageShapeDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        InternalStorageShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.x,\n              top = rect.y,\n              right = rect.right,\n              bottom = rect.bottom;\n          var x = left + shape.parameters.get(exports.InternalStorageHorizontalEdgeParameterName).value;\n          var y = top + shape.parameters.get(exports.InternalStorageVerticalEdgeParameterName).value;\n\n          var primitives = _super.prototype.createShapePrimitives.call(this, shape);\n\n          return primitives.concat([new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(x, top), new PathPrimitive_1.PathPrimitiveLineToCommand(x, bottom), new PathPrimitive_1.PathPrimitiveMoveToCommand(left, y), new PathPrimitive_1.PathPrimitiveLineToCommand(right, y)], shape.style)]);\n        };\n\n        InternalStorageShapeDescription.prototype.createParameters = function (parameters) {\n          parameters.addRange([new ShapeParameters_1.ShapeParameter(exports.InternalStorageHorizontalEdgeParameterName, this.defaultSize.width * 0.1), new ShapeParameters_1.ShapeParameter(exports.InternalStorageVerticalEdgeParameterName, this.defaultSize.width * 0.1)]);\n        };\n\n        InternalStorageShapeDescription.prototype.normalizeParameters = function (shape, parameters) {\n          this.changeParameterValue(parameters, exports.InternalStorageHorizontalEdgeParameterName, function (p) {\n            return Math.max(InternalStorageShapeDescription.minEdge, Math.min(shape.size.width * 0.3, p.value));\n          });\n          this.changeParameterValue(parameters, exports.InternalStorageVerticalEdgeParameterName, function (p) {\n            return Math.max(InternalStorageShapeDescription.minEdge, Math.min(shape.size.height * 0.3, p.value));\n          });\n        };\n\n        InternalStorageShapeDescription.prototype.modifyParameters = function (shape, parameters, deltaX, deltaY) {\n          this.changeParameterValue(parameters, exports.InternalStorageHorizontalEdgeParameterName, function (p) {\n            return p.value + deltaX;\n          });\n          this.changeParameterValue(parameters, exports.InternalStorageVerticalEdgeParameterName, function (p) {\n            return p.value + deltaY;\n          });\n          this.normalizeParameters(shape, parameters);\n        };\n\n        InternalStorageShapeDescription.prototype.getParameterPoints = function (shape) {\n          return [new ShapeParameterPoint_1.ShapeParameterPoint(\"c\", new point_1.Point(shape.normalizeX(shape.position.x + shape.parameters.get(exports.InternalStorageHorizontalEdgeParameterName).value), shape.normalizeY(shape.position.y + shape.parameters.get(exports.InternalStorageVerticalEdgeParameterName).value)))];\n        };\n\n        InternalStorageShapeDescription.prototype.getTextRectangle = function (shape) {\n          var rect = shape.rectangle;\n          var dx = shape.parameters.get(exports.InternalStorageHorizontalEdgeParameterName).value;\n          return rect.clone().resize(-dx, 0).clone().moveRectangle(dx, 0);\n        };\n\n        InternalStorageShapeDescription.minEdge = 72;\n        return InternalStorageShapeDescription;\n      }(RectangleShapeDescription_1.RectangleShapeDescription);\n\n      exports.InternalStorageShapeDescription = InternalStorageShapeDescription;\n      /***/\n    },\n    /* 224 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics133 = function extendStatics(d, b) {\n          _extendStatics133 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics133(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics133(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.PaperTapeShapeDescription = void 0;\n\n      var RectangleShapeDescription_1 = __webpack_require__(19);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var size_1 = __webpack_require__(2);\n\n      var PaperTapeShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(PaperTapeShapeDescription, _super);\n\n        function PaperTapeShapeDescription() {\n          return _super.call(this, undefined, true) || this;\n        }\n\n        Object.defineProperty(PaperTapeShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.PaperTape;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(PaperTapeShapeDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        PaperTapeShapeDescription.prototype.createShapePrimitives = function (shape) {\n          return this.createDocumentPrimitives(shape.rectangle, shape.style);\n        };\n\n        PaperTapeShapeDescription.prototype.createDocumentPrimitives = function (rect, style) {\n          var left = rect.x,\n              top = rect.y,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width,\n              height = rect.height;\n          var cx = rect.center.x;\n          var dy = height * PaperTapeShapeDescription.curveOffsetRatio;\n          var primitives = [];\n          return primitives.concat([new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(left, top), new PathPrimitive_1.PathPrimitiveQuadraticCurveToCommand(left + width * 0.25, top + 2 * dy, cx, top + dy), new PathPrimitive_1.PathPrimitiveQuadraticCurveToCommand(right - width * 0.25, top - dy, right, top + dy), new PathPrimitive_1.PathPrimitiveLineToCommand(right, bottom), new PathPrimitive_1.PathPrimitiveQuadraticCurveToCommand(right - width * 0.25, bottom - 2 * dy, cx, bottom - dy), new PathPrimitive_1.PathPrimitiveQuadraticCurveToCommand(left + width * 0.25, bottom + dy, left, bottom - dy), new PathPrimitive_1.PathPrimitiveClosePathCommand()], style)]);\n        };\n\n        PaperTapeShapeDescription.prototype.processConnectionPoint = function (shape, point) {\n          var side = shape.getConnectionPointSide(point);\n          if (side === DiagramItem_1.ConnectionPointSide.North) point.y += shape.size.height * PaperTapeShapeDescription.curveOffsetRatio;\n          if (side === DiagramItem_1.ConnectionPointSide.South) point.y -= shape.size.height * PaperTapeShapeDescription.curveOffsetRatio;\n        };\n\n        PaperTapeShapeDescription.prototype.getTextRectangle = function (shape) {\n          var rect = shape.rectangle;\n          return rect.clone().inflate(ShapeDescription_1.ShapeTextPadding, -rect.height * PaperTapeShapeDescription.curveOffsetRatio);\n        };\n\n        PaperTapeShapeDescription.prototype.getSizeByText = function (textSize, _shape) {\n          return new size_1.Size(textSize.width + ShapeDescription_1.ShapeTextPadding * 2, textSize.height / (1 - 2 * PaperTapeShapeDescription.curveOffsetRatio));\n        };\n\n        PaperTapeShapeDescription.curveOffsetRatio = 0.1;\n        return PaperTapeShapeDescription;\n      }(RectangleShapeDescription_1.RectangleShapeDescription);\n\n      exports.PaperTapeShapeDescription = PaperTapeShapeDescription;\n      /***/\n    },\n    /* 225 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics134 = function extendStatics(d, b) {\n          _extendStatics134 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics134(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics134(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ManualOperationShapeDescription = void 0;\n\n      var RectangleShapeDescription_1 = __webpack_require__(19);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var ManualOperationShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(ManualOperationShapeDescription, _super);\n\n        function ManualOperationShapeDescription() {\n          return _super.call(this, undefined, true) || this;\n        }\n\n        Object.defineProperty(ManualOperationShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.ManualOperation;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ManualOperationShapeDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ManualOperationShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var _a = shape.rectangle,\n              left = _a.x,\n              top = _a.y,\n              right = _a.right,\n              bottom = _a.bottom,\n              width = _a.width,\n              height = _a.height;\n          var px = Math.min(Math.max(0, height / Math.tan(ManualOperationShapeDescription.slopeAngle)), width);\n          var cx = rect.center.x;\n          var x1 = Math.min(left + px, cx);\n          var x2 = Math.max(right - px, cx);\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(left, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, top), new PathPrimitive_1.PathPrimitiveLineToCommand(x2, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(x1, bottom), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        ManualOperationShapeDescription.prototype.processConnectionPoint = function (shape, point) {\n          var offset = shape.size.height / Math.tan(ManualOperationShapeDescription.slopeAngle);\n          var side = shape.getConnectionPointSide(point);\n          if (side === DiagramItem_1.ConnectionPointSide.East) point.x -= offset / 2;else if (side === DiagramItem_1.ConnectionPointSide.West) point.x += offset / 2;\n        };\n\n        ManualOperationShapeDescription.prototype.getTextRectangle = function (shape) {\n          var px = Math.min(Math.max(0, shape.size.height / Math.tan(ManualOperationShapeDescription.slopeAngle)), shape.size.width);\n          return shape.rectangle.clone().moveRectangle(px, ShapeDescription_1.ShapeTextPadding).resize(-px * 2, -ShapeDescription_1.ShapeTextPadding * 2).nonNegativeSize();\n        };\n\n        ManualOperationShapeDescription.slopeAngle = 81 * Math.PI / 180;\n        return ManualOperationShapeDescription;\n      }(RectangleShapeDescription_1.RectangleShapeDescription);\n\n      exports.ManualOperationShapeDescription = ManualOperationShapeDescription;\n      /***/\n    },\n    /* 226 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics135 = function extendStatics(d, b) {\n          _extendStatics135 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics135(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics135(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.DelayShapeDescription = void 0;\n\n      var RectangleShapeDescription_1 = __webpack_require__(19);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var Utils_1 = __webpack_require__(3);\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var size_1 = __webpack_require__(2);\n\n      var DelayShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(DelayShapeDescription, _super);\n\n        function DelayShapeDescription() {\n          var _this = _super.call(this, undefined, true) || this;\n\n          _this.defaultSize.width = _this.defaultSize.height;\n          return _this;\n        }\n\n        Object.defineProperty(DelayShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Delay;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DelayShapeDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        DelayShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.x,\n              top = rect.y,\n              right = rect.right,\n              bottom = rect.bottom;\n          var cx = rect.center.x;\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(left, top), new PathPrimitive_1.PathPrimitiveLineToCommand(cx, top), new PathPrimitive_1.PathPrimitiveArcToCommand((right - left) / 2, (bottom - top) / 2, 0, false, true, cx, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(left, bottom), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        DelayShapeDescription.prototype.getTextRectangle = function (shape) {\n          var maxRectInEllipse = Utils_1.GeometryUtils.getMaxRectangleEnscribedInEllipse(shape.size);\n          return shape.rectangle.clone().moveRectangle(ShapeDescription_1.ShapeTextPadding, ShapeDescription_1.ShapeTextPadding).setSize({\n            width: maxRectInEllipse.width / 2 + shape.size.width / 2 - ShapeDescription_1.ShapeTextPadding,\n            height: maxRectInEllipse.height / 2 + shape.size.height / 2 - ShapeDescription_1.ShapeTextPadding\n          }).nonNegativeSize();\n        };\n\n        DelayShapeDescription.prototype.getSizeByText = function (textSize, _shape) {\n          var rectByEllipse = Utils_1.GeometryUtils.getEllipseByEnscribedRectangle(textSize);\n          return new size_1.Size(rectByEllipse.width / 2 + textSize.width / 2 + ShapeDescription_1.ShapeTextPadding, rectByEllipse.height / 2 + textSize.height / 2 + ShapeDescription_1.ShapeTextPadding);\n        };\n\n        DelayShapeDescription.arcWidthRatio = 0.2;\n        return DelayShapeDescription;\n      }(RectangleShapeDescription_1.RectangleShapeDescription);\n\n      exports.DelayShapeDescription = DelayShapeDescription;\n      /***/\n    },\n    /* 227 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics136 = function extendStatics(d, b) {\n          _extendStatics136 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics136(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics136(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.StoredDataShapeDescription = void 0;\n\n      var RectangleShapeDescription_1 = __webpack_require__(19);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var size_1 = __webpack_require__(2);\n\n      var StoredDataShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(StoredDataShapeDescription, _super);\n\n        function StoredDataShapeDescription() {\n          return _super.call(this, undefined, true) || this;\n        }\n\n        Object.defineProperty(StoredDataShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.StoredData;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(StoredDataShapeDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        StoredDataShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.x,\n              top = rect.y,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width;\n          var dx = width * StoredDataShapeDescription.arcWidthRatio;\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(right, top), new PathPrimitive_1.PathPrimitiveLineToCommand(left + dx / 2, top), new PathPrimitive_1.PathPrimitiveArcToCommand(dx / 2, (bottom - top) / 2, 0, false, false, left + dx / 2, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(right, bottom), new PathPrimitive_1.PathPrimitiveArcToCommand(dx / 2, (bottom - top) / 2, 0, false, true, right, top)], shape.style)];\n        };\n\n        StoredDataShapeDescription.prototype.getTextRectangle = function (shape) {\n          var rect = shape.rectangle;\n          var dx = rect.width * StoredDataShapeDescription.arcWidthRatio / 2;\n          return rect.clone().resize(-dx - 2 * ShapeDescription_1.ShapeTextPadding, -2 * ShapeDescription_1.ShapeTextPadding).moveRectangle(ShapeDescription_1.ShapeTextPadding, ShapeDescription_1.ShapeTextPadding).nonNegativeSize();\n        };\n\n        StoredDataShapeDescription.prototype.getSizeByText = function (textSize, _shape) {\n          return new size_1.Size((textSize.width + 2 * ShapeDescription_1.ShapeTextPadding) / (1 - StoredDataShapeDescription.arcWidthRatio / 2), textSize.height + 2 * ShapeDescription_1.ShapeTextPadding);\n        };\n\n        StoredDataShapeDescription.arcWidthRatio = 0.2;\n        return StoredDataShapeDescription;\n      }(RectangleShapeDescription_1.RectangleShapeDescription);\n\n      exports.StoredDataShapeDescription = StoredDataShapeDescription;\n      /***/\n    },\n    /* 228 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics137 = function extendStatics(d, b) {\n          _extendStatics137 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics137(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics137(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MergeShapeDescription = void 0;\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var rectangle_1 = __webpack_require__(13);\n\n      var TriangleShapeDescription_1 = __webpack_require__(125);\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var size_1 = __webpack_require__(2);\n\n      var MergeShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(MergeShapeDescription, _super);\n\n        function MergeShapeDescription() {\n          return _super.call(this, true) || this;\n        }\n\n        Object.defineProperty(MergeShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Merge;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        MergeShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.x,\n              top = rect.y,\n              right = rect.right,\n              bottom = rect.bottom;\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(left, top), new PathPrimitive_1.PathPrimitiveLineToCommand(right, top), new PathPrimitive_1.PathPrimitiveLineToCommand(rect.center.x, bottom), new PathPrimitive_1.PathPrimitiveClosePathCommand()], shape.style)];\n        };\n\n        MergeShapeDescription.prototype.calculateHeight = function (width) {\n          return width * 0.75;\n        };\n\n        MergeShapeDescription.prototype.getTextRectangle = function (shape) {\n          return rectangle_1.Rectangle.fromGeometry(shape.position.clone().offset(shape.size.width / 4, ShapeDescription_1.ShapeTextPadding), new size_1.Size(shape.size.width / 2, shape.size.height / 2 - ShapeDescription_1.ShapeTextPadding));\n        };\n\n        MergeShapeDescription.prototype.getSizeByText = function (textSize, _shape) {\n          return new size_1.Size(textSize.width * 2, (textSize.height + ShapeDescription_1.ShapeTextPadding) * 2);\n        };\n\n        return MergeShapeDescription;\n      }(TriangleShapeDescription_1.TriangleShapeDescription);\n\n      exports.MergeShapeDescription = MergeShapeDescription;\n      /***/\n    },\n    /* 229 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics138 = function extendStatics(d, b) {\n          _extendStatics138 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics138(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics138(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.DisplayShapeDescription = void 0;\n\n      var RectangleShapeDescription_1 = __webpack_require__(19);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var DisplayShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(DisplayShapeDescription, _super);\n\n        function DisplayShapeDescription() {\n          return _super.call(this, undefined, true) || this;\n        }\n\n        Object.defineProperty(DisplayShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Display;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DisplayShapeDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        DisplayShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.x,\n              top = rect.y,\n              right = rect.right,\n              bottom = rect.bottom,\n              width = rect.width;\n          var cy = rect.center.y;\n          var dx = width * DisplayShapeDescription.arcWidthRatio;\n          return [new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(right - dx / 2, top), new PathPrimitive_1.PathPrimitiveLineToCommand(left + dx / 2, top), new PathPrimitive_1.PathPrimitiveLineToCommand(left, cy), new PathPrimitive_1.PathPrimitiveLineToCommand(left + dx / 2, bottom), new PathPrimitive_1.PathPrimitiveLineToCommand(right - dx / 2, bottom), new PathPrimitive_1.PathPrimitiveArcToCommand(dx / 2, (bottom - top) / 2, 0, false, false, right - dx / 2, top)], shape.style)];\n        };\n\n        DisplayShapeDescription.prototype.getTextRectangle = function (shape) {\n          var dx = shape.size.width * DisplayShapeDescription.arcWidthRatio;\n          return shape.rectangle.clone().moveRectangle(dx / 2, ShapeDescription_1.ShapeTextPadding).resize(-dx, -ShapeDescription_1.ShapeTextPadding * 2).nonNegativeSize();\n        };\n\n        DisplayShapeDescription.arcWidthRatio = 0.2;\n        return DisplayShapeDescription;\n      }(RectangleShapeDescription_1.RectangleShapeDescription);\n\n      exports.DisplayShapeDescription = DisplayShapeDescription;\n      /***/\n    },\n    /* 230 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics139 = function extendStatics(d, b) {\n          _extendStatics139 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics139(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics139(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.OrShapeDescription = void 0;\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var size_1 = __webpack_require__(2);\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var EllipseShapeDescription_1 = __webpack_require__(70);\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var OrShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(OrShapeDescription, _super);\n\n        function OrShapeDescription() {\n          var _this = _super.call(this, true) || this;\n\n          _this.defaultSize = new size_1.Size(ShapeDescription_1.ShapeDefaultDimension * 0.5, ShapeDescription_1.ShapeDefaultDimension * 0.5);\n          return _this;\n        }\n\n        Object.defineProperty(OrShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Or;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(OrShapeDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return true;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(OrShapeDescription.prototype, \"enableText\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        OrShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var left = rect.x,\n              top = rect.y,\n              right = rect.right,\n              bottom = rect.bottom;\n          var _a = rect.center,\n              cx = _a.x,\n              cy = _a.y;\n          var primitives = [];\n          return primitives.concat(_super.prototype.createShapePrimitives.call(this, shape)).concat([new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(cx, top), new PathPrimitive_1.PathPrimitiveLineToCommand(cx, bottom), new PathPrimitive_1.PathPrimitiveMoveToCommand(left, cy), new PathPrimitive_1.PathPrimitiveLineToCommand(right, cy)], shape.style)]);\n        };\n\n        return OrShapeDescription;\n      }(EllipseShapeDescription_1.EllipseShapeDescription);\n\n      exports.OrShapeDescription = OrShapeDescription;\n      /***/\n    },\n    /* 231 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics140 = function extendStatics(d, b) {\n          _extendStatics140 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics140(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics140(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.SummingJunctionShapeDescription = void 0;\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var size_1 = __webpack_require__(2);\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var EllipseShapeDescription_1 = __webpack_require__(70);\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var SummingJunctionShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(SummingJunctionShapeDescription, _super);\n\n        function SummingJunctionShapeDescription() {\n          var _this = _super.call(this, true) || this;\n\n          _this.defaultSize = new size_1.Size(ShapeDescription_1.ShapeDefaultDimension * 0.5, ShapeDescription_1.ShapeDefaultDimension * 0.5);\n          return _this;\n        }\n\n        Object.defineProperty(SummingJunctionShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.SummingJunction;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(SummingJunctionShapeDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return true;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(SummingJunctionShapeDescription.prototype, \"enableText\", {\n          get: function get() {\n            return false;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        SummingJunctionShapeDescription.prototype.createShapePrimitives = function (shape) {\n          var rect = shape.rectangle;\n          var width = rect.width,\n              height = rect.height;\n          var _a = rect.center,\n              cx = _a.x,\n              cy = _a.y;\n          var rx = width / 2;\n          var ry = height / 2;\n          var angle = Math.atan(ry / rx);\n          var ex = 1 / Math.sqrt(1 / Math.pow(rx, 2) + Math.pow(Math.tan(angle), 2) / Math.pow(ry, 2));\n          var ey = ex * Math.tan(angle);\n          var primitives = [];\n          return primitives.concat(_super.prototype.createShapePrimitives.call(this, shape)).concat([new PathPrimitive_1.PathPrimitive([new PathPrimitive_1.PathPrimitiveMoveToCommand(cx - ex, cy - ey), new PathPrimitive_1.PathPrimitiveLineToCommand(cx + ex, cy + ey), new PathPrimitive_1.PathPrimitiveMoveToCommand(cx - ex, cy + ey), new PathPrimitive_1.PathPrimitiveLineToCommand(cx + ex, cy - ey)], shape.style)]);\n        };\n\n        return SummingJunctionShapeDescription;\n      }(EllipseShapeDescription_1.EllipseShapeDescription);\n\n      exports.SummingJunctionShapeDescription = SummingJunctionShapeDescription;\n      /***/\n    },\n    /* 232 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics141 = function extendStatics(d, b) {\n          _extendStatics141 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics141(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics141(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.SvgElementPrimitive = void 0;\n\n      var RenderHelper_1 = __webpack_require__(15);\n\n      var Primitive_1 = __webpack_require__(24);\n\n      var SvgElementPrimitive =\n      /** @class */\n      function (_super) {\n        __extends(SvgElementPrimitive, _super);\n\n        function SvgElementPrimitive(x, y, width, height, createContent, destroyContent, data, className, onApplyProperties) {\n          var _this = _super.call(this, null, className, undefined, onApplyProperties) || this;\n\n          _this.x = x;\n          _this.y = y;\n          _this.width = width;\n          _this.height = height;\n          _this.createContent = createContent;\n          _this.destroyContent = destroyContent;\n          _this.data = data;\n          return _this;\n        }\n\n        SvgElementPrimitive.prototype.createMainElement = function () {\n          return document.createElementNS(RenderHelper_1.svgNS, \"svg\");\n        };\n\n        SvgElementPrimitive.prototype.applyElementProperties = function (element, measurer) {\n          this.setUnitAttribute(element, \"x\", this.x);\n          this.setUnitAttribute(element, \"y\", this.y);\n          this.setUnitAttribute(element, \"width\", this.width);\n          this.setUnitAttribute(element, \"height\", this.height);\n          this.setPositionCorrectionAttribute(element);\n\n          _super.prototype.applyElementProperties.call(this, element, measurer);\n        };\n\n        SvgElementPrimitive.prototype.createCustomContent = function (parent) {\n          if (this.createContent) this.createContent(parent, this.data);\n        };\n\n        SvgElementPrimitive.prototype.destroyCustomContent = function (parent) {\n          if (this.destroyContent) this.destroyContent(parent);\n        };\n\n        return SvgElementPrimitive;\n      }(Primitive_1.SvgPrimitive);\n\n      exports.SvgElementPrimitive = SvgElementPrimitive;\n      /***/\n    },\n    /* 233 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics142 = function extendStatics(d, b) {\n          _extendStatics142 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics142(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics142(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.VerticalContainerDescription = void 0;\n\n      var point_1 = __webpack_require__(1);\n\n      var size_1 = __webpack_require__(2);\n\n      var RectaglePrimitive_1 = __webpack_require__(21);\n\n      var rectangle_1 = __webpack_require__(13);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var ContainerDescription_1 = __webpack_require__(132);\n\n      var VerticalContainerDescription =\n      /** @class */\n      function (_super) {\n        __extends(VerticalContainerDescription, _super);\n\n        function VerticalContainerDescription() {\n          return _super.call(this, new size_1.Size(ShapeDescription_1.ShapeDefaultDimension * 2, ShapeDescription_1.ShapeDefaultDimension * 1.5)) || this;\n        }\n\n        Object.defineProperty(VerticalContainerDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.VerticalContainer;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        VerticalContainerDescription.prototype.getExpandedSize = function (shape) {\n          return new size_1.Size(shape.size.width, shape.expandedSize.height);\n        };\n\n        VerticalContainerDescription.prototype.getCollapsedSize = function (shape) {\n          return new size_1.Size(shape.size.width, ContainerDescription_1.CONTAINER_HEADER_SIZE + 2 * shape.strokeWidth);\n        };\n\n        VerticalContainerDescription.prototype.allowResizeVertically = function (shape) {\n          return shape.expanded;\n        };\n\n        VerticalContainerDescription.prototype.createHeaderPrimitives = function (shape, forToolbox) {\n          var rect = shape.rectangle;\n          var left = rect.x,\n              top = rect.y,\n              width = rect.width;\n          var headerSize = this.getHeaderSize(shape, forToolbox);\n          var primitives = [];\n          primitives = primitives.concat([new RectaglePrimitive_1.RectanglePrimitive(left, top, width, headerSize, shape.style)]);\n          if (!forToolbox) primitives = primitives.concat(this.createExpandButtonPrimitives(shape, new rectangle_1.Rectangle(left, top, headerSize, headerSize)));\n          return primitives;\n        };\n\n        VerticalContainerDescription.prototype.getClientRectangle = function (shape) {\n          var rect = shape.rectangle;\n          var headerSize = this.getHeaderSize(shape);\n          return rectangle_1.Rectangle.fromGeometry(new point_1.Point(rect.x, rect.y + headerSize), new size_1.Size(rect.width, rect.height - headerSize));\n        };\n\n        VerticalContainerDescription.prototype.getTextRectangle = function (shape) {\n          var rect = shape.rectangle;\n          var headerSize = this.getHeaderSize(shape);\n          return rectangle_1.Rectangle.fromGeometry(new point_1.Point(rect.x + headerSize, rect.y), new size_1.Size(rect.width - headerSize, headerSize));\n        };\n\n        VerticalContainerDescription.prototype.getSizeByText = function (textSize, shape) {\n          var headerSize = this.getHeaderSize(shape);\n          return new size_1.Size(Math.max(shape.size.width, textSize.width + headerSize), shape.size.height);\n        };\n\n        VerticalContainerDescription.prototype.getHeaderSize = function (shape, forToolbox) {\n          var rect = shape.rectangle;\n          return forToolbox ? rect.height * ContainerDescription_1.CONTAINER_HEADER_TOOLBOX_SIZE_RATIO : ContainerDescription_1.CONTAINER_HEADER_SIZE + 2 * shape.strokeWidth;\n        };\n\n        return VerticalContainerDescription;\n      }(ContainerDescription_1.ContainerDescription);\n\n      exports.VerticalContainerDescription = VerticalContainerDescription;\n      /***/\n    },\n    /* 234 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics143 = function extendStatics(d, b) {\n          _extendStatics143 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics143(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics143(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.HorizontalContainerDescription = void 0;\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var rectangle_1 = __webpack_require__(13);\n\n      var size_1 = __webpack_require__(2);\n\n      var point_1 = __webpack_require__(1);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var ContainerDescription_1 = __webpack_require__(132);\n\n      var RectaglePrimitive_1 = __webpack_require__(21);\n\n      var TextPrimitive_1 = __webpack_require__(60);\n\n      var HorizontalContainerDescription =\n      /** @class */\n      function (_super) {\n        __extends(HorizontalContainerDescription, _super);\n\n        function HorizontalContainerDescription() {\n          return _super.call(this, new size_1.Size(ShapeDescription_1.ShapeDefaultDimension * 2, ShapeDescription_1.ShapeDefaultDimension * 1.5)) || this;\n        }\n\n        Object.defineProperty(HorizontalContainerDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.HorizontalContainer;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        HorizontalContainerDescription.prototype.getExpandedSize = function (shape) {\n          return new size_1.Size(shape.expandedSize.width, shape.size.height);\n        };\n\n        HorizontalContainerDescription.prototype.getCollapsedSize = function (shape) {\n          return new size_1.Size(ContainerDescription_1.CONTAINER_HEADER_SIZE + 2 * shape.strokeWidth, shape.size.height);\n        };\n\n        HorizontalContainerDescription.prototype.allowResizeHorizontally = function (shape) {\n          return shape.expanded;\n        };\n\n        HorizontalContainerDescription.prototype.createHeaderPrimitives = function (shape, forToolbox) {\n          var rect = shape.rectangle;\n          var left = rect.x,\n              top = rect.y,\n              height = rect.height;\n          var headerSize = this.getHeaderSize(shape, forToolbox);\n          var primitives = [];\n          primitives = primitives.concat([new RectaglePrimitive_1.RectanglePrimitive(left, top, headerSize, height, shape.style)]);\n          if (!forToolbox) primitives = primitives.concat(this.createExpandButtonPrimitives(shape, new rectangle_1.Rectangle(left, top, headerSize, headerSize)));\n          return primitives;\n        };\n\n        HorizontalContainerDescription.prototype.getClientRectangle = function (shape) {\n          var rect = shape.rectangle;\n          var headerSize = this.getHeaderSize(shape);\n          return rectangle_1.Rectangle.fromGeometry(new point_1.Point(rect.x + headerSize, rect.y), new size_1.Size(rect.width - headerSize, rect.height));\n        };\n\n        HorizontalContainerDescription.prototype.getTextRectangle = function (shape) {\n          var rect = shape.rectangle;\n          var headerSize = this.getHeaderSize(shape);\n          return rectangle_1.Rectangle.fromGeometry(new point_1.Point(rect.x, rect.y + headerSize), new size_1.Size(headerSize, rect.height - headerSize)).nonNegativeSize();\n        };\n\n        HorizontalContainerDescription.prototype.getSizeByText = function (textSize, shape) {\n          var headerSize = this.getHeaderSize(shape);\n          return new size_1.Size(shape.size.width, Math.max(shape.size.height, Math.max(textSize.width + headerSize, shape.size.height)));\n        };\n\n        HorizontalContainerDescription.prototype.getTextEditRectangle = function (shape) {\n          var rect = this.getTextRectangle(shape);\n          return rectangle_1.Rectangle.fromGeometry(new point_1.Point(rect.x, rect.y + rect.height), new size_1.Size(rect.height, rect.width));\n        };\n\n        HorizontalContainerDescription.prototype.getTextAngle = function () {\n          return TextPrimitive_1.TextAngle.Angle270deg;\n        };\n\n        HorizontalContainerDescription.prototype.getHeaderSize = function (shape, forToolbox) {\n          var rect = shape.rectangle;\n          return forToolbox ? rect.height * ContainerDescription_1.CONTAINER_HEADER_TOOLBOX_SIZE_RATIO : ContainerDescription_1.CONTAINER_HEADER_SIZE + 2 * shape.strokeWidth;\n        };\n\n        return HorizontalContainerDescription;\n      }(ContainerDescription_1.ContainerDescription);\n\n      exports.HorizontalContainerDescription = HorizontalContainerDescription;\n      /***/\n    },\n    /* 235 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics144 = function extendStatics(d, b) {\n          _extendStatics144 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics144(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics144(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.CardWithImageOnTopDescription = void 0;\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var size_1 = __webpack_require__(2);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var CardBaseDescription_1 = __webpack_require__(133);\n\n      var unit_converter_1 = __webpack_require__(12);\n\n      var CardWithImageOnTopDescription =\n      /** @class */\n      function (_super) {\n        __extends(CardWithImageOnTopDescription, _super);\n\n        function CardWithImageOnTopDescription() {\n          var _this = _super.call(this, new size_1.Size(32 / 40 * ShapeDescription_1.ShapeDefaultDimension, ShapeDescription_1.ShapeDefaultDimension)) || this;\n\n          _this.isTextAfterImage = true;\n          _this.isHorizontal = false;\n          return _this;\n        }\n\n        Object.defineProperty(CardWithImageOnTopDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.CardWithImageOnTop;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        CardWithImageOnTopDescription.prototype.getImageSize = function (shapeSize, includeMargins, forToolbox) {\n          var w = shapeSize.width / 2;\n          if (unit_converter_1.UnitConverter.twipsToPixels(w) % 2 === 1) w -= unit_converter_1.UnitConverter.pixelsToTwips(1);\n          var imageSize = Math.max(0, shapeSize.height - (includeMargins ? 0 : 2 * this.getImageMargin(forToolbox)));\n          imageSize = Math.min(w, imageSize);\n          return new size_1.Size(imageSize, imageSize);\n        };\n\n        CardWithImageOnTopDescription.prototype.getImageSizeByTextBlockSize = function (textBlockSize) {\n          return this.getImageSize(new size_1.Size(textBlockSize.width, Number.MAX_VALUE), true);\n        };\n\n        return CardWithImageOnTopDescription;\n      }(CardBaseDescription_1.CardBaseDescription);\n\n      exports.CardWithImageOnTopDescription = CardWithImageOnTopDescription;\n      /***/\n    },\n    /* 236 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics145 = function extendStatics(d, b) {\n          _extendStatics145 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics145(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics145(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.RoundedRectanglePrimitive = void 0;\n\n      var RenderHelper_1 = __webpack_require__(15);\n\n      var RectaglePrimitive_1 = __webpack_require__(21);\n\n      var RoundedRectanglePrimitive =\n      /** @class */\n      function (_super) {\n        __extends(RoundedRectanglePrimitive, _super);\n\n        function RoundedRectanglePrimitive(x, y, width, height, rx, ry, style, className, clipPathId, onApplyProperties) {\n          if (rx === void 0) {\n            rx = 0;\n          }\n\n          if (ry === void 0) {\n            ry = 0;\n          }\n\n          var _this = _super.call(this, x, y, width, height, style, className, clipPathId, onApplyProperties) || this;\n\n          _this.x = x;\n          _this.y = y;\n          _this.width = width;\n          _this.height = height;\n          _this.rx = rx;\n          _this.ry = ry;\n          return _this;\n        }\n\n        RoundedRectanglePrimitive.prototype.createMainElement = function () {\n          return document.createElementNS(RenderHelper_1.svgNS, \"rect\");\n        };\n\n        RoundedRectanglePrimitive.prototype.applyElementProperties = function (element, measurer) {\n          this.setUnitAttribute(element, \"rx\", this.rx);\n          this.setUnitAttribute(element, \"ry\", this.ry);\n\n          _super.prototype.applyElementProperties.call(this, element, measurer);\n        };\n\n        return RoundedRectanglePrimitive;\n      }(RectaglePrimitive_1.RectanglePrimitive);\n\n      exports.RoundedRectanglePrimitive = RoundedRectanglePrimitive;\n      /***/\n    },\n    /* 237 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics146 = function extendStatics(d, b) {\n          _extendStatics146 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics146(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics146(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ConnectorShapeDescription = void 0;\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var size_1 = __webpack_require__(2);\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var EllipseShapeDescription_1 = __webpack_require__(70);\n\n      var ConnectorShapeDescription =\n      /** @class */\n      function (_super) {\n        __extends(ConnectorShapeDescription, _super);\n\n        function ConnectorShapeDescription() {\n          var _this = _super.call(this, false) || this;\n\n          _this.defaultSize = new size_1.Size(ShapeDescription_1.ShapeDefaultDimension * 0.5, ShapeDescription_1.ShapeDefaultDimension * 0.5);\n          return _this;\n        }\n\n        Object.defineProperty(ConnectorShapeDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.Connector;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ConnectorShapeDescription.prototype, \"keepRatioOnAutoSize\", {\n          get: function get() {\n            return true;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        return ConnectorShapeDescription;\n      }(EllipseShapeDescription_1.EllipseShapeDescription);\n\n      exports.ConnectorShapeDescription = ConnectorShapeDescription;\n      /***/\n    },\n    /* 238 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics147 = function extendStatics(d, b) {\n          _extendStatics147 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics147(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics147(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.CardWithImageOnRightDescription = exports.CardWithImageOnLeftDescription = void 0;\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var CardBaseDescription_1 = __webpack_require__(133);\n\n      var size_1 = __webpack_require__(2);\n\n      var CardWithHorizontalImageDescription =\n      /** @class */\n      function (_super) {\n        __extends(CardWithHorizontalImageDescription, _super);\n\n        function CardWithHorizontalImageDescription() {\n          var _this = _super.call(this, new size_1.Size(1.5 * ShapeDescription_1.ShapeDefaultDimension, 0.5 * ShapeDescription_1.ShapeDefaultDimension)) || this;\n\n          _this.isHorizontal = true;\n          return _this;\n        }\n\n        CardWithHorizontalImageDescription.prototype.getToolboxHeightToWidthRatio = function (_width, _height) {\n          return 26 / 46;\n        };\n\n        CardWithHorizontalImageDescription.prototype.getImageSize = function (shapeSize, includeMargins, forToolbox) {\n          var imageSize = Math.min(shapeSize.height, shapeSize.width);\n          if (!includeMargins) imageSize = Math.max(0, imageSize - 2 * this.getImageMargin(forToolbox));\n          return new size_1.Size(imageSize, imageSize);\n        };\n\n        CardWithHorizontalImageDescription.prototype.getImageSizeByTextBlockSize = function (textBlockSize) {\n          return this.getImageSize(new size_1.Size(Number.MAX_VALUE, textBlockSize.height), true);\n        };\n\n        return CardWithHorizontalImageDescription;\n      }(CardBaseDescription_1.CardBaseDescription);\n\n      var CardWithImageOnLeftDescription =\n      /** @class */\n      function (_super) {\n        __extends(CardWithImageOnLeftDescription, _super);\n\n        function CardWithImageOnLeftDescription() {\n          var _this = _super !== null && _super.apply(this, arguments) || this;\n\n          _this.isTextAfterImage = true;\n          return _this;\n        }\n\n        Object.defineProperty(CardWithImageOnLeftDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.CardWithImageOnLeft;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        return CardWithImageOnLeftDescription;\n      }(CardWithHorizontalImageDescription);\n\n      exports.CardWithImageOnLeftDescription = CardWithImageOnLeftDescription;\n\n      var CardWithImageOnRightDescription =\n      /** @class */\n      function (_super) {\n        __extends(CardWithImageOnRightDescription, _super);\n\n        function CardWithImageOnRightDescription() {\n          var _this = _super !== null && _super.apply(this, arguments) || this;\n\n          _this.isTextAfterImage = false;\n          return _this;\n        }\n\n        Object.defineProperty(CardWithImageOnRightDescription.prototype, \"key\", {\n          get: function get() {\n            return ShapeTypes_1.ShapeTypes.CardWithImageOnRight;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        return CardWithImageOnRightDescription;\n      }(CardWithHorizontalImageDescription);\n\n      exports.CardWithImageOnRightDescription = CardWithImageOnRightDescription;\n      /***/\n    },\n    /* 239 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics148 = function extendStatics(d, b) {\n          _extendStatics148 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics148(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics148(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ExportCommand = void 0;\n\n      var Exporter_1 = __webpack_require__(71);\n\n      var ExportImportCommandBase_1 = __webpack_require__(54);\n\n      var ExportCommand =\n      /** @class */\n      function (_super) {\n        __extends(ExportCommand, _super);\n\n        function ExportCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ExportCommand.prototype.executeCore = function (state, parameter) {\n          var exporter = new Exporter_1.Exporter();\n          var data = exporter.export(this.control.model);\n          parameter(data);\n          return true;\n        };\n\n        return ExportCommand;\n      }(ExportImportCommandBase_1.ExportImportCommandBase);\n\n      exports.ExportCommand = ExportCommand;\n      /***/\n    },\n    /* 240 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics149 = function extendStatics(d, b) {\n          _extendStatics149 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics149(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics149(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ToggleFontBoldCommand = void 0;\n\n      var ToggleStyleTextPropertyCommand_1 = __webpack_require__(72);\n\n      var ToggleFontBoldCommand =\n      /** @class */\n      function (_super) {\n        __extends(ToggleFontBoldCommand, _super);\n\n        function ToggleFontBoldCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ToggleFontBoldCommand.prototype.getStyleProperty = function () {\n          return \"font-weight\";\n        };\n\n        ToggleFontBoldCommand.prototype.getStylePropertyValue = function () {\n          return \"bold\";\n        };\n\n        return ToggleFontBoldCommand;\n      }(ToggleStyleTextPropertyCommand_1.ToggleStyleTextPropertyCommand);\n\n      exports.ToggleFontBoldCommand = ToggleFontBoldCommand;\n      /***/\n    },\n    /* 241 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics150 = function extendStatics(d, b) {\n          _extendStatics150 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics150(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics150(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ToggleFontItalicCommand = void 0;\n\n      var ToggleStyleTextPropertyCommand_1 = __webpack_require__(72);\n\n      var ToggleFontItalicCommand =\n      /** @class */\n      function (_super) {\n        __extends(ToggleFontItalicCommand, _super);\n\n        function ToggleFontItalicCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ToggleFontItalicCommand.prototype.getStyleProperty = function () {\n          return \"font-style\";\n        };\n\n        ToggleFontItalicCommand.prototype.getStylePropertyValue = function () {\n          return \"italic\";\n        };\n\n        return ToggleFontItalicCommand;\n      }(ToggleStyleTextPropertyCommand_1.ToggleStyleTextPropertyCommand);\n\n      exports.ToggleFontItalicCommand = ToggleFontItalicCommand;\n      /***/\n    },\n    /* 242 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics151 = function extendStatics(d, b) {\n          _extendStatics151 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics151(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics151(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ToggleFontUnderlineCommand = void 0;\n\n      var ToggleStyleTextPropertyCommand_1 = __webpack_require__(72);\n\n      var ToggleFontUnderlineCommand =\n      /** @class */\n      function (_super) {\n        __extends(ToggleFontUnderlineCommand, _super);\n\n        function ToggleFontUnderlineCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ToggleFontUnderlineCommand.prototype.getStyleProperty = function () {\n          return \"text-decoration\";\n        };\n\n        ToggleFontUnderlineCommand.prototype.getStylePropertyValue = function () {\n          return \"underline\";\n        };\n\n        return ToggleFontUnderlineCommand;\n      }(ToggleStyleTextPropertyCommand_1.ToggleStyleTextPropertyCommand);\n\n      exports.ToggleFontUnderlineCommand = ToggleFontUnderlineCommand;\n      /***/\n    },\n    /* 243 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics152 = function extendStatics(d, b) {\n          _extendStatics152 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics152(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics152(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeFontNameCommand = void 0;\n\n      var ChangeStyleTextPropertyCommand_1 = __webpack_require__(96);\n\n      var ChangeFontNameCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeFontNameCommand, _super);\n\n        function ChangeFontNameCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeFontNameCommand.prototype.getStyleProperty = function () {\n          return \"font-family\";\n        };\n\n        return ChangeFontNameCommand;\n      }(ChangeStyleTextPropertyCommand_1.ChangeStyleTextPropertyCommand);\n\n      exports.ChangeFontNameCommand = ChangeFontNameCommand;\n      /***/\n    },\n    /* 244 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics153 = function extendStatics(d, b) {\n          _extendStatics153 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics153(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics153(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeFontSizeCommand = void 0;\n\n      var ChangeStyleTextPropertyCommand_1 = __webpack_require__(96);\n\n      var ChangeFontSizeCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeFontSizeCommand, _super);\n\n        function ChangeFontSizeCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeFontSizeCommand.prototype.getStyleProperty = function () {\n          return \"font-size\";\n        };\n\n        return ChangeFontSizeCommand;\n      }(ChangeStyleTextPropertyCommand_1.ChangeStyleTextPropertyCommand);\n\n      exports.ChangeFontSizeCommand = ChangeFontSizeCommand;\n      /***/\n    },\n    /* 245 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics154 = function extendStatics(d, b) {\n          _extendStatics154 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics154(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics154(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeFontColorCommand = void 0;\n\n      var ChangeStyleTextPropertyCommand_1 = __webpack_require__(96);\n\n      var color_1 = __webpack_require__(22);\n\n      var ChangeFontColorCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeFontColorCommand, _super);\n\n        function ChangeFontColorCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeFontColorCommand.prototype.processParameter = function (parameter) {\n          return color_1.ColorUtils.stringToHash(parameter);\n        };\n\n        ChangeFontColorCommand.prototype.getStyleProperty = function () {\n          return \"fill\";\n        };\n\n        return ChangeFontColorCommand;\n      }(ChangeStyleTextPropertyCommand_1.ChangeStyleTextPropertyCommand);\n\n      exports.ChangeFontColorCommand = ChangeFontColorCommand;\n      /***/\n    },\n    /* 246 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics155 = function extendStatics(d, b) {\n          _extendStatics155 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics155(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics155(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeFillColorCommand = void 0;\n\n      var ChangeStylePropertyCommand_1 = __webpack_require__(73);\n\n      var color_1 = __webpack_require__(22);\n\n      var ChangeFillColorCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeFillColorCommand, _super);\n\n        function ChangeFillColorCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeFillColorCommand.prototype.processParameter = function (parameter) {\n          return color_1.ColorUtils.stringToHash(parameter);\n        };\n\n        ChangeFillColorCommand.prototype.getStyleProperty = function () {\n          return \"fill\";\n        };\n\n        return ChangeFillColorCommand;\n      }(ChangeStylePropertyCommand_1.ChangeStylePropertyCommand);\n\n      exports.ChangeFillColorCommand = ChangeFillColorCommand;\n      /***/\n    },\n    /* 247 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics156 = function extendStatics(d, b) {\n          _extendStatics156 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics156(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics156(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeStrokeColorCommand = void 0;\n\n      var ChangeStylePropertyCommand_1 = __webpack_require__(73);\n\n      var color_1 = __webpack_require__(22);\n\n      var ChangeStrokeColorCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeStrokeColorCommand, _super);\n\n        function ChangeStrokeColorCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeStrokeColorCommand.prototype.processParameter = function (parameter) {\n          return color_1.ColorUtils.stringToHash(parameter);\n        };\n\n        ChangeStrokeColorCommand.prototype.getStyleProperty = function () {\n          return \"stroke\";\n        };\n\n        return ChangeStrokeColorCommand;\n      }(ChangeStylePropertyCommand_1.ChangeStylePropertyCommand);\n\n      exports.ChangeStrokeColorCommand = ChangeStrokeColorCommand;\n      /***/\n    },\n    /* 248 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics157 = function extendStatics(d, b) {\n          _extendStatics157 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics157(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics157(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.TextRightAlignCommand = exports.TextCenterAlignCommand = exports.TextLeftAlignCommand = exports.ChangeTextAlignCommand = void 0;\n\n      var ToggleStyleTextPropertyCommand_1 = __webpack_require__(72);\n\n      var ChangeTextAlignCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeTextAlignCommand, _super);\n\n        function ChangeTextAlignCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeTextAlignCommand.prototype.getStyleProperty = function () {\n          return \"text-anchor\";\n        };\n\n        return ChangeTextAlignCommand;\n      }(ToggleStyleTextPropertyCommand_1.ToggleStyleTextPropertyCommand);\n\n      exports.ChangeTextAlignCommand = ChangeTextAlignCommand;\n\n      var TextLeftAlignCommand =\n      /** @class */\n      function (_super) {\n        __extends(TextLeftAlignCommand, _super);\n\n        function TextLeftAlignCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        TextLeftAlignCommand.prototype.getStylePropertyValue = function () {\n          return \"start\";\n        };\n\n        return TextLeftAlignCommand;\n      }(ChangeTextAlignCommand);\n\n      exports.TextLeftAlignCommand = TextLeftAlignCommand;\n\n      var TextCenterAlignCommand =\n      /** @class */\n      function (_super) {\n        __extends(TextCenterAlignCommand, _super);\n\n        function TextCenterAlignCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        TextCenterAlignCommand.prototype.getStylePropertyValue = function () {\n          return \"middle\";\n        };\n\n        return TextCenterAlignCommand;\n      }(ChangeTextAlignCommand);\n\n      exports.TextCenterAlignCommand = TextCenterAlignCommand;\n\n      var TextRightAlignCommand =\n      /** @class */\n      function (_super) {\n        __extends(TextRightAlignCommand, _super);\n\n        function TextRightAlignCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        TextRightAlignCommand.prototype.getStylePropertyValue = function () {\n          return \"end\";\n        };\n\n        return TextRightAlignCommand;\n      }(ChangeTextAlignCommand);\n\n      exports.TextRightAlignCommand = TextRightAlignCommand;\n      /***/\n    },\n    /* 249 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics158 = function extendStatics(d, b) {\n          _extendStatics158 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics158(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics158(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeConnectorEndLineEndingCommand = exports.ChangeConnectorStartLineEndingCommand = void 0;\n\n      var ChangeConnectorPropertyCommand_1 = __webpack_require__(137);\n\n      var ConnectorProperties_1 = __webpack_require__(31);\n\n      var ChangeConnectorStartLineEndingCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeConnectorStartLineEndingCommand, _super);\n\n        function ChangeConnectorStartLineEndingCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeConnectorStartLineEndingCommand.prototype.getPropertyName = function () {\n          return \"startLineEnding\";\n        };\n\n        ChangeConnectorStartLineEndingCommand.prototype.getPropertyDefaultValue = function () {\n          return ConnectorProperties_1.ConnectorLineEnding.None;\n        };\n\n        return ChangeConnectorStartLineEndingCommand;\n      }(ChangeConnectorPropertyCommand_1.ChangeConnectorPropertyCommand);\n\n      exports.ChangeConnectorStartLineEndingCommand = ChangeConnectorStartLineEndingCommand;\n\n      var ChangeConnectorEndLineEndingCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeConnectorEndLineEndingCommand, _super);\n\n        function ChangeConnectorEndLineEndingCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeConnectorEndLineEndingCommand.prototype.getPropertyName = function () {\n          return \"endLineEnding\";\n        };\n\n        ChangeConnectorEndLineEndingCommand.prototype.getPropertyDefaultValue = function () {\n          return ConnectorProperties_1.ConnectorLineEnding.Arrow;\n        };\n\n        return ChangeConnectorEndLineEndingCommand;\n      }(ChangeConnectorPropertyCommand_1.ChangeConnectorPropertyCommand);\n\n      exports.ChangeConnectorEndLineEndingCommand = ChangeConnectorEndLineEndingCommand;\n      /***/\n    },\n    /* 250 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics159 = function extendStatics(d, b) {\n          _extendStatics159 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics159(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics159(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeConnectorLineOptionCommand = void 0;\n\n      var ChangeConnectorPropertyCommand_1 = __webpack_require__(137);\n\n      var ConnectorProperties_1 = __webpack_require__(31);\n\n      var ChangeConnectorLineOptionCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeConnectorLineOptionCommand, _super);\n\n        function ChangeConnectorLineOptionCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeConnectorLineOptionCommand.prototype.getPropertyName = function () {\n          return \"lineOption\";\n        };\n\n        ChangeConnectorLineOptionCommand.prototype.getPropertyDefaultValue = function () {\n          return ConnectorProperties_1.ConnectorLineOption.Straight;\n        };\n\n        return ChangeConnectorLineOptionCommand;\n      }(ChangeConnectorPropertyCommand_1.ChangeConnectorPropertyCommand);\n\n      exports.ChangeConnectorLineOptionCommand = ChangeConnectorLineOptionCommand;\n      /***/\n    },\n    /* 251 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics160 = function extendStatics(d, b) {\n          _extendStatics160 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics160(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics160(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.SelectAllCommand = void 0;\n\n      var SimpleCommandBase_1 = __webpack_require__(10);\n\n      var SelectAllCommand =\n      /** @class */\n      function (_super) {\n        __extends(SelectAllCommand, _super);\n\n        function SelectAllCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        SelectAllCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        SelectAllCommand.prototype.executeCore = function (state, parameter) {\n          var itemKeys = [];\n          this.control.model.iterateItems(function (i) {\n            return itemKeys.push(i.key);\n          });\n          this.control.selection.set(itemKeys);\n          return true;\n        };\n\n        return SelectAllCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.SelectAllCommand = SelectAllCommand;\n      /***/\n    },\n    /* 252 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics161 = function extendStatics(d, b) {\n          _extendStatics161 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics161(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics161(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ScrollIntoViewOnUndoHistoryItem = exports.ScrollIntoViewOnRedoHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var ScrollIntoViewOnRedoHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ScrollIntoViewOnRedoHistoryItem, _super);\n\n        function ScrollIntoViewOnRedoHistoryItem(view, rectangle) {\n          var _this = _super.call(this) || this;\n\n          _this.view = view;\n          _this.rectangle = rectangle;\n          _this.view = view;\n          _this.rectangle = rectangle.clone();\n          return _this;\n        }\n\n        ScrollIntoViewOnRedoHistoryItem.prototype.redo = function (manipulator) {\n          this.view.scrollIntoView(this.rectangle);\n        };\n\n        ScrollIntoViewOnRedoHistoryItem.prototype.undo = function (manipulator) {};\n\n        return ScrollIntoViewOnRedoHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ScrollIntoViewOnRedoHistoryItem = ScrollIntoViewOnRedoHistoryItem;\n\n      var ScrollIntoViewOnUndoHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ScrollIntoViewOnUndoHistoryItem, _super);\n\n        function ScrollIntoViewOnUndoHistoryItem(view, rectangle) {\n          var _this = _super.call(this) || this;\n\n          _this.view = view;\n          _this.rectangle = rectangle;\n          _this.view = view;\n          _this.rectangle = rectangle.clone();\n          return _this;\n        }\n\n        ScrollIntoViewOnUndoHistoryItem.prototype.redo = function (manipulator) {};\n\n        ScrollIntoViewOnUndoHistoryItem.prototype.undo = function (manipulator) {\n          this.view.scrollIntoView(this.rectangle);\n        };\n\n        return ScrollIntoViewOnUndoHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ScrollIntoViewOnUndoHistoryItem = ScrollIntoViewOnUndoHistoryItem;\n      /***/\n    },\n    /* 253 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Tree = void 0;\n\n      var Structures_1 = __webpack_require__(37);\n\n      var Tree =\n      /** @class */\n      function () {\n        function Tree(root, parentToChildren) {\n          var _this = this;\n\n          this.childToParent = {};\n          this.root = root;\n          this.parentToChildren = parentToChildren;\n\n          var _loop_1 = function _loop_1(key) {\n            if (!Object.prototype.hasOwnProperty.call(parentToChildren, key)) return \"continue\";\n            parentToChildren[key].forEach(function (c) {\n              return _this.childToParent[c.key] = key;\n            });\n          };\n\n          for (var key in parentToChildren) {\n            _loop_1(key);\n          }\n        }\n\n        Tree.prototype.getChildren = function (node) {\n          return node && this.parentToChildren[node.key] ? this.parentToChildren[node.key] : [];\n        };\n\n        Tree.prototype.hasChildren = function (node) {\n          return this.parentToChildren[node.key] && this.parentToChildren[node.key].length > 0;\n        };\n\n        Tree.prototype.iterate = function (callback) {\n          this.iterateCore(this.root, 0, callback);\n        };\n\n        Tree.createSpanningTree = function (component) {\n          var rootKey = Tree.findRoot(component);\n          var iterator = component.createIterator(Structures_1.ConnectionMode.Outgoing);\n          var parentToChildren = {};\n\n          iterator.skipEdge = function (e) {\n            return e.to === undefined || iterator.isNodeVisited(e.to);\n          };\n\n          iterator.onNode = function (n) {\n            return parentToChildren[n.key] = [];\n          };\n\n          iterator.onEdge = function (e) {\n            var node = component.getNode(e.to);\n            node && parentToChildren[e.from].push(node);\n          };\n\n          iterator.iterate(rootKey);\n          return new Tree(component.getNode(rootKey), parentToChildren);\n        };\n\n        Tree.prototype.iterateCore = function (node, level, callback) {\n          var _this = this;\n\n          callback(node, level);\n          this.getChildren(node).forEach(function (n) {\n            return _this.iterateCore(n, level + 1, callback);\n          });\n        };\n\n        Tree.findRoot = function (component) {\n          return component.nodes.reduce(function (aggregator, cur) {\n            var edges = component.getAdjacentEdges(cur);\n            var inc = edges.filter(function (l) {\n              return l.to === cur;\n            }).length;\n            var out = edges.filter(function (l) {\n              return l.from === cur;\n            }).length;\n\n            if (aggregator.candidate === undefined || inc === 0 && aggregator.inc > 0 || aggregator.inc !== 0 && aggregator.out - aggregator.inc < out - inc) {\n              aggregator.candidate = cur;\n              aggregator.inc = inc;\n              aggregator.out = out;\n            }\n\n            return aggregator;\n          }, {\n            inc: -1,\n            out: -1,\n            candidate: undefined\n          }).candidate;\n        };\n\n        return Tree;\n      }();\n\n      exports.Tree = Tree;\n      /***/\n    },\n    /* 254 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics162 = function extendStatics(d, b) {\n          _extendStatics162 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics162(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics162(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeSnapToGridCommand = void 0;\n\n      var SimpleCommandBase_1 = __webpack_require__(10);\n\n      var ChangeSnapToGridCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeSnapToGridCommand, _super);\n\n        function ChangeSnapToGridCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeSnapToGridCommand.prototype.executeCore = function (state, parameter) {\n          var newValue = parameter === undefined ? !this.control.settings.snapToGrid : !!parameter;\n\n          if (this.control.settings.snapToGrid !== newValue) {\n            this.control.settings.snapToGrid = newValue;\n            return true;\n          }\n\n          return false;\n        };\n\n        ChangeSnapToGridCommand.prototype.getValue = function () {\n          return this.control.settings.snapToGrid;\n        };\n\n        return ChangeSnapToGridCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ChangeSnapToGridCommand = ChangeSnapToGridCommand;\n      /***/\n    },\n    /* 255 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics163 = function extendStatics(d, b) {\n          _extendStatics163 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics163(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics163(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeGridSizeItemsCommand = exports.ChangeGridSizeCommand = void 0;\n\n      var SimpleCommandBase_1 = __webpack_require__(10);\n\n      var ChangeGridSizeCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeGridSizeCommand, _super);\n\n        function ChangeGridSizeCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeGridSizeCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        ChangeGridSizeCommand.prototype.getValue = function () {\n          return this.getModelUnit(this.control.settings.gridSize);\n        };\n\n        ChangeGridSizeCommand.prototype.executeCore = function (state, parameter) {\n          this.control.settings.gridSize = this.getModelUnitTwipsValue(parameter);\n          return true;\n        };\n\n        ChangeGridSizeCommand.prototype.getItems = function () {\n          var _this = this;\n\n          return this.control.settings.gridSizeItems.map(function (s) {\n            return {\n              value: _this.getModelUnit(s),\n              text: _this.getViewUnitText(s)\n            };\n          });\n        };\n\n        return ChangeGridSizeCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ChangeGridSizeCommand = ChangeGridSizeCommand;\n\n      var ChangeGridSizeItemsCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeGridSizeItemsCommand, _super);\n\n        function ChangeGridSizeItemsCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeGridSizeItemsCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        ChangeGridSizeItemsCommand.prototype.getValue = function () {\n          var _this = this;\n\n          return this.control.settings.gridSizeItems.map(function (s) {\n            return _this.getModelUnit(s);\n          });\n        };\n\n        ChangeGridSizeItemsCommand.prototype.executeCore = function (state, parameter) {\n          var _this = this;\n\n          this.control.settings.gridSizeItems = parameter.map(function (s) {\n            return _this.getModelUnitTwipsValue(s);\n          });\n          return true;\n        };\n\n        return ChangeGridSizeItemsCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ChangeGridSizeItemsCommand = ChangeGridSizeItemsCommand;\n      /***/\n    },\n    /* 256 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics164 = function extendStatics(d, b) {\n          _extendStatics164 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics164(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics164(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangePageLandscapeCommand = void 0;\n\n      var ChangePagePropertyCommand_1 = __webpack_require__(75);\n\n      var ChangePageLandscapeHistoryItem_1 = __webpack_require__(257);\n\n      var ChangePageLandscapeCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangePageLandscapeCommand, _super);\n\n        function ChangePageLandscapeCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangePageLandscapeCommand.prototype.getValue = function () {\n          return this.control.model.pageLandscape;\n        };\n\n        ChangePageLandscapeCommand.prototype.createHistoryItems = function (parameter) {\n          return [new ChangePageLandscapeHistoryItem_1.ChangePageLandscapeHistoryItem(parameter)];\n        };\n\n        return ChangePageLandscapeCommand;\n      }(ChangePagePropertyCommand_1.ChangePagePropertyCommand);\n\n      exports.ChangePageLandscapeCommand = ChangePageLandscapeCommand;\n      /***/\n    },\n    /* 257 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics165 = function extendStatics(d, b) {\n          _extendStatics165 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics165(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics165(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangePageLandscapeHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var ChangePageLandscapeHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangePageLandscapeHistoryItem, _super);\n\n        function ChangePageLandscapeHistoryItem(value) {\n          var _this = _super.call(this) || this;\n\n          _this.value = value;\n          return _this;\n        }\n\n        ChangePageLandscapeHistoryItem.prototype.redo = function (manipulator) {\n          this.oldValue = manipulator.model.pageLandscape;\n          manipulator.changePageLandscape(this.value);\n        };\n\n        ChangePageLandscapeHistoryItem.prototype.undo = function (manipulator) {\n          manipulator.changePageLandscape(this.oldValue);\n        };\n\n        return ChangePageLandscapeHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ChangePageLandscapeHistoryItem = ChangePageLandscapeHistoryItem;\n      /***/\n    },\n    /* 258 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics166 = function extendStatics(d, b) {\n          _extendStatics166 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics166(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics166(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangePageSizeItemsCommand = exports.ChangePageSizeCommand = void 0;\n\n      var ChangePagePropertyCommand_1 = __webpack_require__(75);\n\n      var size_1 = __webpack_require__(2);\n\n      var ChangePageSizeHistoryItem_1 = __webpack_require__(259);\n\n      var SimpleCommandBase_1 = __webpack_require__(10);\n\n      var ChangePageSizeCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangePageSizeCommand, _super);\n\n        function ChangePageSizeCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangePageSizeCommand.prototype.getValue = function () {\n          return this.getModelUnitSize(this.control.model.pageSize);\n        };\n\n        ChangePageSizeCommand.prototype.createHistoryItems = function (parameter) {\n          return [new ChangePageSizeHistoryItem_1.ChangePageSizeHistoryItem(new size_1.Size(this.getModelUnitTwipsValue(parameter.width), this.getModelUnitTwipsValue(parameter.height)))];\n        };\n\n        ChangePageSizeCommand.prototype.getItems = function () {\n          var _this = this;\n\n          return this.control.settings.pageSizeItems.map(function (i) {\n            return {\n              value: _this.getModelUnitSize(i.size),\n              text: i.text.replace(\"{width}\", _this.getViewUnitText(i.size.width)).replace(\"{height}\", _this.getViewUnitText(i.size.height))\n            };\n          });\n        };\n\n        ChangePageSizeCommand.prototype.getModelUnitSize = function (size) {\n          return new size_1.Size(this.getModelUnit(size.width), this.getModelUnit(size.height));\n        };\n\n        return ChangePageSizeCommand;\n      }(ChangePagePropertyCommand_1.ChangePagePropertyCommand);\n\n      exports.ChangePageSizeCommand = ChangePageSizeCommand;\n\n      var ChangePageSizeItemsCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangePageSizeItemsCommand, _super);\n\n        function ChangePageSizeItemsCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangePageSizeItemsCommand.prototype.isEnabled = function () {\n          return true;\n        };\n\n        ChangePageSizeItemsCommand.prototype.getValue = function () {\n          var _this = this;\n\n          return this.control.settings.pageSizeItems.map(function (i) {\n            return {\n              size: new size_1.Size(_this.getModelUnit(i.width), _this.getModelUnit(i.height)),\n              text: i.text\n            };\n          });\n        };\n\n        ChangePageSizeItemsCommand.prototype.executeCore = function (state, parameter) {\n          var _this = this;\n\n          this.control.settings.pageSizeItems = parameter.map(function (i) {\n            return {\n              size: new size_1.Size(_this.getModelUnitTwipsValue(i.width), _this.getModelUnitTwipsValue(i.height)),\n              text: i.text\n            };\n          });\n          return true;\n        };\n\n        return ChangePageSizeItemsCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ChangePageSizeItemsCommand = ChangePageSizeItemsCommand;\n      /***/\n    },\n    /* 259 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics167 = function extendStatics(d, b) {\n          _extendStatics167 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics167(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics167(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangePageSizeHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var ChangePageSizeHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangePageSizeHistoryItem, _super);\n\n        function ChangePageSizeHistoryItem(size) {\n          var _this = _super.call(this) || this;\n\n          _this.size = size;\n          return _this;\n        }\n\n        ChangePageSizeHistoryItem.prototype.redo = function (manipulator) {\n          this.oldSize = manipulator.model.pageSize;\n          manipulator.changePageSize(this.size);\n        };\n\n        ChangePageSizeHistoryItem.prototype.undo = function (manipulator) {\n          manipulator.changePageSize(this.oldSize);\n        };\n\n        return ChangePageSizeHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ChangePageSizeHistoryItem = ChangePageSizeHistoryItem;\n      /***/\n    },\n    /* 260 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics168 = function extendStatics(d, b) {\n          _extendStatics168 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics168(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics168(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ExportPngCommand = void 0;\n\n      var ExportImageCommand_1 = __webpack_require__(98);\n\n      var ExportPngCommand =\n      /** @class */\n      function (_super) {\n        __extends(ExportPngCommand, _super);\n\n        function ExportPngCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ExportPngCommand.prototype.getExtension = function () {\n          return \"png\";\n        };\n\n        ExportPngCommand.prototype.getExportFunc = function () {\n          return this.exporter.exportPng;\n        };\n\n        return ExportPngCommand;\n      }(ExportImageCommand_1.ExportImageCommand);\n\n      exports.ExportPngCommand = ExportPngCommand;\n      /***/\n    },\n    /* 261 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics169 = function extendStatics(d, b) {\n          _extendStatics169 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics169(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics169(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n        function adopt(value) {\n          return value instanceof P ? value : new P(function (resolve) {\n            resolve(value);\n          });\n        }\n\n        return new (P || (P = Promise))(function (resolve, reject) {\n          function fulfilled(value) {\n            try {\n              step(generator.next(value));\n            } catch (e) {\n              reject(e);\n            }\n          }\n\n          function rejected(value) {\n            try {\n              step(generator[\"throw\"](value));\n            } catch (e) {\n              reject(e);\n            }\n          }\n\n          function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n          }\n\n          step((generator = generator.apply(thisArg, _arguments || [])).next());\n        });\n      };\n\n      var __generator = this && this.__generator || function (thisArg, body) {\n        var _ = {\n          label: 0,\n          sent: function sent() {\n            if (t[0] & 1) throw t[1];\n            return t[1];\n          },\n          trys: [],\n          ops: []\n        },\n            f,\n            y,\n            t,\n            g;\n        return g = {\n          next: verb(0),\n          \"throw\": verb(1),\n          \"return\": verb(2)\n        }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n          return this;\n        }), g;\n\n        function verb(n) {\n          return function (v) {\n            return step([n, v]);\n          };\n        }\n\n        function step(op) {\n          if (f) throw new TypeError(\"Generator is already executing.\");\n\n          while (_) {\n            try {\n              if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n              if (y = 0, t) op = [op[0] & 2, t.value];\n\n              switch (op[0]) {\n                case 0:\n                case 1:\n                  t = op;\n                  break;\n\n                case 4:\n                  _.label++;\n                  return {\n                    value: op[1],\n                    done: false\n                  };\n\n                case 5:\n                  _.label++;\n                  y = op[1];\n                  op = [0];\n                  continue;\n\n                case 7:\n                  op = _.ops.pop();\n\n                  _.trys.pop();\n\n                  continue;\n\n                default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n                    _ = 0;\n                    continue;\n                  }\n\n                  if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n                    _.label = op[1];\n                    break;\n                  }\n\n                  if (op[0] === 6 && _.label < t[1]) {\n                    _.label = t[1];\n                    t = op;\n                    break;\n                  }\n\n                  if (t && _.label < t[2]) {\n                    _.label = t[2];\n\n                    _.ops.push(op);\n\n                    break;\n                  }\n\n                  if (t[2]) _.ops.pop();\n\n                  _.trys.pop();\n\n                  continue;\n              }\n\n              op = body.call(thisArg, _);\n            } catch (e) {\n              op = [6, e];\n              y = 0;\n            } finally {\n              f = t = 0;\n            }\n          }\n\n          if (op[0] & 5) throw op[1];\n          return {\n            value: op[0] ? op[1] : void 0,\n            done: true\n          };\n        }\n      };\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.CanvasExportManager = void 0;\n\n      var unit_converter_1 = __webpack_require__(12);\n\n      var browser_1 = __webpack_require__(17);\n\n      var Utils_1 = __webpack_require__(18);\n\n      var CanvasManagerBase_1 = __webpack_require__(41);\n\n      var RenderHelper_1 = __webpack_require__(15);\n\n      var DOMManipulator_1 = __webpack_require__(100);\n\n      var color_1 = __webpack_require__(22);\n\n      var EXPORT_IMAGE_QUALITY = 1;\n\n      var CanvasExportManager =\n      /** @class */\n      function (_super) {\n        __extends(CanvasExportManager, _super);\n\n        function CanvasExportManager(itemsContainer, measurer) {\n          var _this = _super.call(this, 1, new DOMManipulator_1.ExportDOMManipulator(measurer)) || this;\n\n          _this.itemsContainer = itemsContainer;\n          return _this;\n        }\n\n        CanvasExportManager.prototype.getSvgImage = function (modelSize, pageColor, exportAsInline, exportForBinaryImage) {\n          var svgEl = RenderHelper_1.RenderHelper.createSvgElement(undefined, true);\n          var modelAbsSize = modelSize.clone().applyConverter(unit_converter_1.UnitConverter.twipsToPixelsF).clone().applyConverter(Math.ceil);\n          Utils_1.RenderUtils.updateSvgElementSize(svgEl, modelAbsSize.width, modelAbsSize.height, true);\n          svgEl.style.backgroundColor = color_1.ColorUtils.colorToHash(pageColor);\n          this.createTextFloodFilter(undefined, svgEl, pageColor);\n          var exportCssRules = !exportAsInline && !browser_1.Browser.IE && this.getExportCssRules();\n\n          if (exportCssRules) {\n            var style = document.createElementNS(RenderHelper_1.svgNS, \"style\");\n            style.innerHTML = exportCssRules;\n            svgEl.appendChild(style);\n          }\n\n          if (exportForBinaryImage) {\n            // Only for IE11, fix for canvg.Canvg\n            var bk = document.createElementNS(RenderHelper_1.svgNS, \"rect\");\n            bk.setAttributeNS(null, \"x\", \"0\");\n            bk.setAttributeNS(null, \"y\", \"0\");\n            bk.setAttributeNS(null, \"height\", modelAbsSize.height.toString());\n            bk.setAttributeNS(null, \"width\", modelAbsSize.width.toString());\n            bk.setAttributeNS(null, \"fill\", svgEl.style.backgroundColor);\n            svgEl.appendChild(bk);\n          }\n\n          for (var i = 0; i < this.itemsContainer.childNodes.length; i++) {\n            var node = this.itemsContainer.childNodes[i].cloneNode(true);\n            if (!exportCssRules) this.inlineStyle(node, this.itemsContainer.childNodes[i]);\n            svgEl.appendChild(node);\n          }\n\n          return svgEl;\n        };\n\n        CanvasExportManager.prototype.getSvgImageUrl = function (modelSize, pageColor, exportAsInline) {\n          var svgEl = this.getSvgImage(modelSize, pageColor, exportAsInline, false);\n          return this.getSvgBase64String(svgEl);\n        };\n\n        CanvasExportManager.prototype.getSvgString = function (svgElement) {\n          return new XMLSerializer().serializeToString(svgElement);\n        };\n\n        CanvasExportManager.prototype.getSvgBase64String = function (svgElement) {\n          var xml = this.getSvgString(svgElement);\n          return CanvasExportManager.base64Start + this.getBase64EncodeUnicode(xml);\n        };\n\n        CanvasExportManager.prototype.getBase64EncodeUnicode = function (s) {\n          return btoa(encodeURIComponent(s).replace(/%([0-9A-F]{2})/g, function (match, p1) {\n            return String.fromCharCode(parseInt(\"0x\" + p1, 16));\n          }));\n        };\n\n        CanvasExportManager.prototype.getExportCssRules = function () {\n          for (var i = 0; i < document.styleSheets.length; i++) {\n            var rules = this.getRules(document.styleSheets[i]);\n\n            if (rules) {\n              var cssText = \"\";\n\n              for (var j = 0; j < rules.length; j++) {\n                var rule = rules[j];\n                var selectorText = this.isCSSStyleRule(rule) ? rule.selectorText : null;\n                if (selectorText && this.checkSelector(selectorText)) cssText += rule.cssText + \"\\n\";\n              }\n\n              if (cssText.length > 0) return \"\\n\" + cssText;\n            }\n          }\n        };\n\n        CanvasExportManager.prototype.checkSelector = function (selectorText) {\n          for (var i = 0; i < CanvasExportManager.exportStyleRules.length; i++) {\n            if (selectorText.indexOf(CanvasExportManager.exportStyleRules[i]) === 0) return true;\n          }\n\n          return false;\n        };\n\n        CanvasExportManager.prototype.getRules = function (styleSheet) {\n          try {\n            return this.isCSSStyleSheet(styleSheet) ? styleSheet.rules || styleSheet.cssRules : null;\n          } catch (_a) {} // Catch access dinied exception\n\n        };\n\n        CanvasExportManager.prototype.isCSSStyleSheet = function (stylesheet) {\n          return stylesheet.rules !== undefined;\n        };\n\n        CanvasExportManager.prototype.isCSSStyleRule = function (rule) {\n          return rule.selectorText !== undefined;\n        };\n\n        CanvasExportManager.prototype.inlineStyle = function (destNode, srcNode) {\n          for (var i = 0; i < destNode.childNodes.length; i++) {\n            var child = destNode.childNodes[i];\n            if (!child.tagName) continue;\n            if (child.tagName === \"g\") this.inlineStyle(child, srcNode.childNodes[i]);else if (child.style) {\n              var style = window.getComputedStyle(srcNode.childNodes[i]);\n              if (style !== undefined) for (var index = 0; index < CanvasExportManager.exportStyleAttributes.length; index++) {\n                var styleProperty = CanvasExportManager.exportStyleAttributes[index];\n                child.style.setProperty(styleProperty, style.getPropertyValue(styleProperty));\n              }\n              this.inlineStyle(child, srcNode.childNodes[i]);\n            }\n          }\n        };\n\n        CanvasExportManager.prototype.exportSvgImage = function (modelSize, pageColor, callback) {\n          callback(this.getSvgImageUrl(modelSize, pageColor, true));\n        };\n\n        CanvasExportManager.prototype.exportBinaryImage = function (modelSize, pageColor, mimeType, callback) {\n          var modelAbsSize = this.getAbsoluteSize(modelSize).clone().applyConverter(Math.ceil);\n          var canvasEl = document.createElement(\"canvas\");\n          canvasEl.width = modelAbsSize.width;\n          canvasEl.height = modelAbsSize.height;\n          var ctx = canvasEl.getContext(\"2d\");\n          ctx.fillStyle = color_1.ColorUtils.colorToHash(pageColor);\n          ctx.fillRect(0, 0, modelAbsSize.width, modelAbsSize.height);\n          if (browser_1.Browser.IE && typeof canvg === \"object\") this.exportBinaryImageCanvgAsync(modelSize, pageColor, canvasEl, ctx, mimeType).then(function (dataUrl) {\n            return callback(dataUrl);\n          });else if (browser_1.Browser.IE && typeof canvg === \"function\") this.exportBinaryImageCanvgOld(modelSize, pageColor, canvasEl, ctx, mimeType, callback);else {\n            var imgEl_1 = new Image();\n            imgEl_1.width = modelAbsSize.width;\n            imgEl_1.height = modelAbsSize.height;\n            imgEl_1.setAttribute(\"crossOrigin\", \"anonymous\");\n\n            imgEl_1.onload = function () {\n              ctx.drawImage(imgEl_1, 0, 0);\n              callback(canvasEl.toDataURL(mimeType, EXPORT_IMAGE_QUALITY));\n            };\n\n            imgEl_1.src = this.getSvgImageUrl(modelSize, pageColor, true);\n          }\n        };\n\n        CanvasExportManager.prototype.exportBinaryImageCanvgOld = function (modelSize, pageColor, canvasEl, ctx, mimeType, callback) {\n          var svgEl = this.getSvgImage(modelSize, pageColor, true, false);\n          var svgStr = this.getSvgString(svgEl);\n          ctx[\"drawSvg\"](svgStr, 0, 0, null, null, {\n            renderCallback: function renderCallback() {\n              callback(canvasEl.toDataURL(mimeType, EXPORT_IMAGE_QUALITY));\n            }\n          });\n        };\n\n        CanvasExportManager.prototype.exportBinaryImageCanvgAsync = function (modelSize, pageColor, canvas, ctx, mimeType) {\n          return __awaiter(this, void 0, void 0, function () {\n            var svgEl, svgStr, v;\n            return __generator(this, function (_a) {\n              switch (_a.label) {\n                case 0:\n                  svgEl = this.getSvgImage(modelSize, pageColor, true, true);\n                  svgStr = this.getSvgString(svgEl);\n                  v = canvg.Canvg.fromString(ctx, svgStr);\n                  return [4\n                  /*yield*/\n                  , v.render()];\n\n                case 1:\n                  _a.sent();\n\n                  return [2\n                  /*return*/\n                  , canvas.toDataURL(mimeType, EXPORT_IMAGE_QUALITY)];\n              }\n            });\n          });\n        };\n\n        CanvasExportManager.prototype.exportPngImage = function (modelSize, pageColor, callback) {\n          this.exportBinaryImage(modelSize, pageColor, \"image/png\", callback);\n        };\n\n        CanvasExportManager.prototype.exportJpgImage = function (modelSize, pageColor, callback) {\n          this.exportBinaryImage(modelSize, pageColor, \"image/jpeg\", callback);\n        };\n\n        CanvasExportManager.prototype.notifyModelChanged = function (changes) {};\n\n        CanvasExportManager.prototype.notifyPageColorChanged = function (color) {};\n\n        CanvasExportManager.prototype.notifyPageSizeChanged = function (pageSize, pageLandscape) {};\n\n        CanvasExportManager.base64Start = \"data:image/svg+xml;base64,\";\n        CanvasExportManager.exportStyleRules = [\".dxdi-canvas .shape \", \".dxdi-canvas .connector \", \".dxdi-canvas text\", \".dxdi-canvas.export\"];\n        CanvasExportManager.exportStyleAttributes = [\"fill\", \"stroke\", \"stroke-width\", \"stroke-linejoin\", \"font-family\", \"font-size\", \"font-weight\", \"font-style\", \"text-decoration\", \"text-anchor\"];\n        return CanvasExportManager;\n      }(CanvasManagerBase_1.CanvasManagerBase);\n\n      exports.CanvasExportManager = CanvasExportManager;\n      /***/\n    },\n    /* 262 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics170 = function extendStatics(d, b) {\n          _extendStatics170 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics170(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics170(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ExportSvgCommand = void 0;\n\n      var ExportImageCommand_1 = __webpack_require__(98);\n\n      var ExportSvgCommand =\n      /** @class */\n      function (_super) {\n        __extends(ExportSvgCommand, _super);\n\n        function ExportSvgCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ExportSvgCommand.prototype.getExtension = function () {\n          return \"svg\";\n        };\n\n        ExportSvgCommand.prototype.getExportFunc = function () {\n          return this.exporter.exportSvg;\n        };\n\n        return ExportSvgCommand;\n      }(ExportImageCommand_1.ExportImageCommand);\n\n      exports.ExportSvgCommand = ExportSvgCommand;\n      /***/\n    },\n    /* 263 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics171 = function extendStatics(d, b) {\n          _extendStatics171 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics171(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics171(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ExportJpgCommand = void 0;\n\n      var ExportImageCommand_1 = __webpack_require__(98);\n\n      var ExportJpgCommand =\n      /** @class */\n      function (_super) {\n        __extends(ExportJpgCommand, _super);\n\n        function ExportJpgCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ExportJpgCommand.prototype.getExtension = function () {\n          return \"jpg\";\n        };\n\n        ExportJpgCommand.prototype.getExportFunc = function () {\n          return this.exporter.exportJpg;\n        };\n\n        return ExportJpgCommand;\n      }(ExportImageCommand_1.ExportImageCommand);\n\n      exports.ExportJpgCommand = ExportJpgCommand;\n      /***/\n    },\n    /* 264 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics172 = function extendStatics(d, b) {\n          _extendStatics172 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics172(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics172(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.CopySelectionCommand = void 0;\n\n      var Exporter_1 = __webpack_require__(71);\n\n      var ClipboardCommand_1 = __webpack_require__(101);\n\n      var CopySelectionCommand =\n      /** @class */\n      function (_super) {\n        __extends(CopySelectionCommand, _super);\n\n        function CopySelectionCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        CopySelectionCommand.prototype.isEnabled = function () {\n          return _super.prototype.isEnabled.call(this) && !this.control.selection.isEmpty(true);\n        };\n\n        CopySelectionCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        CopySelectionCommand.prototype.executeCore = function (state) {\n          var exporter = new Exporter_1.Exporter();\n          var data = exporter.exportItems(this.control.selection.getSelectedItems(true, true));\n          this.setClipboardData(data);\n          return true;\n        };\n\n        return CopySelectionCommand;\n      }(ClipboardCommand_1.ClipboardCommand);\n\n      exports.CopySelectionCommand = CopySelectionCommand;\n      /***/\n    },\n    /* 265 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics173 = function extendStatics(d, b) {\n          _extendStatics173 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics173(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics173(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.CutSelectionCommand = void 0;\n\n      var Exporter_1 = __webpack_require__(71);\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var ClipboardCommand_1 = __webpack_require__(101);\n\n      var CutSelectionCommand =\n      /** @class */\n      function (_super) {\n        __extends(CutSelectionCommand, _super);\n\n        function CutSelectionCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        CutSelectionCommand.prototype.isEnabled = function () {\n          var items = this.control.selection.getSelectedItems();\n          return _super.prototype.isEnabled.call(this) && items.length && (items.length > 1 || this.permissionsProvider.canDeleteItems(items));\n        };\n\n        CutSelectionCommand.prototype.executeCore = function (state) {\n          var exporter = new Exporter_1.Exporter();\n          var items = this.control.selection.getSelectedItems(true, true);\n          var data = exporter.exportItems(items);\n          this.permissionsProvider.beginDeleteItems(items);\n          this.setClipboardData(data);\n          ModelUtils_1.ModelUtils.deleteSelection(this.control.history, this.control.model, this.control.selection);\n          this.permissionsProvider.endDeleteItems();\n          return true;\n        };\n\n        Object.defineProperty(CutSelectionCommand.prototype, \"isPermissionsRequired\", {\n          get: function get() {\n            return true;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        return CutSelectionCommand;\n      }(ClipboardCommand_1.ClipboardCommand);\n\n      exports.CutSelectionCommand = CutSelectionCommand;\n      /***/\n    },\n    /* 266 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics174 = function extendStatics(d, b) {\n          _extendStatics174 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics174(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics174(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.PasteSelectionCommand = void 0;\n\n      var PasteSelectoinCommandBase_1 = __webpack_require__(142);\n\n      var PasteSelectionCommand =\n      /** @class */\n      function (_super) {\n        __extends(PasteSelectionCommand, _super);\n\n        function PasteSelectionCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        PasteSelectionCommand.prototype.getShapeNewPosition = function (position) {\n          return PasteSelectoinCommandBase_1.PasteSelectionCommandBase.getShapeNewPosition(this.control.model, position);\n        };\n\n        PasteSelectionCommand.prototype.changeConnectorPoints = function (connector) {\n          PasteSelectoinCommandBase_1.PasteSelectionCommandBase.changeConnectorPoints(this.control.model, connector);\n        };\n\n        return PasteSelectionCommand;\n      }(PasteSelectoinCommandBase_1.PasteSelectionCommandBase);\n\n      exports.PasteSelectionCommand = PasteSelectionCommand;\n      /***/\n    },\n    /* 267 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics175 = function extendStatics(d, b) {\n          _extendStatics175 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics175(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics175(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ImportShapeHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var ImportShapeHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ImportShapeHistoryItem, _super);\n\n        function ImportShapeHistoryItem(shape) {\n          var _this = _super.call(this) || this;\n\n          _this.shape = shape;\n          return _this;\n        }\n\n        ImportShapeHistoryItem.prototype.redo = function (manipulator) {\n          this.shapeKey = this.shape.key;\n          manipulator.insertShape(this.shape);\n        };\n\n        ImportShapeHistoryItem.prototype.undo = function (manipulator) {\n          manipulator.removeShape(manipulator.model.findShape(this.shapeKey), true);\n        };\n\n        return ImportShapeHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ImportShapeHistoryItem = ImportShapeHistoryItem;\n      /***/\n    },\n    /* 268 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics176 = function extendStatics(d, b) {\n          _extendStatics176 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics176(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics176(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ImportConnectorHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var ImportConnectorHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ImportConnectorHistoryItem, _super);\n\n        function ImportConnectorHistoryItem(connector) {\n          var _this = _super.call(this) || this;\n\n          _this.connector = connector;\n          return _this;\n        }\n\n        ImportConnectorHistoryItem.prototype.redo = function (manipulator) {\n          this.connectorKey = this.connector.key;\n          manipulator.insertConnector(this.connector);\n        };\n\n        ImportConnectorHistoryItem.prototype.undo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          manipulator.removeConnector(connector);\n        };\n\n        return ImportConnectorHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ImportConnectorHistoryItem = ImportConnectorHistoryItem;\n      /***/\n    },\n    /* 269 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics177 = function extendStatics(d, b) {\n          _extendStatics177 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics177(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics177(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ImportBPMNCommand = void 0;\n\n      var BPMNImporter_1 = __webpack_require__(270);\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var AddShapeHistoryItem_1 = __webpack_require__(51);\n\n      var point_1 = __webpack_require__(1);\n\n      var Connector_1 = __webpack_require__(7);\n\n      var AddConnectorHistoryItem_1 = __webpack_require__(63);\n\n      var AddConnectionHistoryItem_1 = __webpack_require__(47);\n\n      var Sugiyama_1 = __webpack_require__(78);\n\n      var LayoutSettings_1 = __webpack_require__(20);\n\n      var ExportImportCommandBase_1 = __webpack_require__(54);\n\n      var ImportBPMNCommand =\n      /** @class */\n      function (_super) {\n        __extends(ImportBPMNCommand, _super);\n\n        function ImportBPMNCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ImportBPMNCommand.prototype.executeCore = function (state, parameter) {\n          var importer = new BPMNImporter_1.BPMNImporter(parameter);\n          var graph = importer.import();\n          this.updateModel(graph);\n          return true;\n        };\n\n        ImportBPMNCommand.prototype.updateModel = function (graph) {\n          var _this = this;\n\n          var externalKeyToModelKey = {};\n          var shapes = [];\n          var connectors = [];\n          this.control.history.beginTransaction();\n          graph.items.forEach(function (node) {\n            var insert = new AddShapeHistoryItem_1.AddShapeHistoryItem(_this.getShapeDescription(node.type), new point_1.Point(0, 0), node.text, node.key);\n\n            _this.control.history.addAndRedo(insert);\n\n            externalKeyToModelKey[node.key] = insert.shapeKey;\n\n            var shape = _this.control.model.findShape(insert.shapeKey);\n\n            shapes.push(shape);\n          });\n          graph.edges.forEach(function (edge) {\n            var from = _this.control.model.findShape(externalKeyToModelKey[edge.from]);\n\n            var to = _this.control.model.findShape(externalKeyToModelKey[edge.to]);\n\n            var insert = new AddConnectorHistoryItem_1.AddConnectorHistoryItem([from.getConnectionPointPosition(0), to.getConnectionPointPosition(0)]);\n\n            _this.control.history.addAndRedo(insert);\n\n            var connector = _this.control.model.findConnector(insert.connectorKey);\n\n            _this.control.history.addAndRedo(new AddConnectionHistoryItem_1.AddConnectionHistoryItem(connector, from, 0, Connector_1.ConnectorPosition.Begin));\n\n            _this.control.history.addAndRedo(new AddConnectionHistoryItem_1.AddConnectionHistoryItem(connector, to, 0, Connector_1.ConnectorPosition.End));\n\n            connectors.push(connector);\n          });\n          var settings = new LayoutSettings_1.LayoutSettings();\n          var graphInfo = ModelUtils_1.ModelUtils.getGraphInfoByItems(this.control.model, shapes, connectors);\n          graphInfo.forEach(function (info) {\n            var layout = new Sugiyama_1.SugiyamaLayoutBuilder(settings, info.graph).build();\n            var nonGraphItems = ModelUtils_1.ModelUtils.getNonGraphItems(_this.control.model, info.container, layout.nodeToLayout, shapes, connectors);\n            ModelUtils_1.ModelUtils.applyLayout(_this.control.history, _this.control.model, undefined, info.graph, layout, nonGraphItems, settings, _this.control.settings.snapToGrid, _this.control.settings.gridSize, false);\n          });\n          ModelUtils_1.ModelUtils.tryUpdateModelRectangle(this.control.history);\n          this.control.history.endTransaction();\n        };\n\n        ImportBPMNCommand.prototype.getShapeDescription = function (shapeType) {\n          return this.control.shapeDescriptionManager.get(shapeType);\n        };\n\n        return ImportBPMNCommand;\n      }(ExportImportCommandBase_1.ExportImportCommandBase);\n\n      exports.ImportBPMNCommand = ImportBPMNCommand;\n      /***/\n    },\n    /* 270 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics178 = function extendStatics(d, b) {\n          _extendStatics178 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics178(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics178(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.BPMNNode = exports.BPMNImporter = void 0;\n\n      var Graph_1 = __webpack_require__(68);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var Structures_1 = __webpack_require__(37);\n\n      var ImportUtils_1 = __webpack_require__(95);\n\n      var BPMNImporter =\n      /** @class */\n      function () {\n        function BPMNImporter(xml) {\n          this.doc = ImportUtils_1.ImportUtils.createDocument(xml);\n          this.graph = new Graph_1.Graph([], []);\n        }\n\n        BPMNImporter.prototype.import = function () {\n          for (var child = void 0, i = 0; child = this.doc.children[i]; i++) {\n            if (child.nodeName.toUpperCase() === \"DEFINITIONS\") this.onDefinitionsElement(child);\n          }\n\n          this.validate();\n          return this.graph;\n        };\n\n        BPMNImporter.prototype.validate = function () {\n          var nodesMap = {};\n          this.graph.nodes.forEach(function (n) {\n            return nodesMap[n] = true;\n          });\n\n          for (var i = 0, edge = void 0; edge = this.graph.edges[i]; i++) {\n            if (!nodesMap[edge.from] || !nodesMap[edge.to]) {\n              this.graph.edges.splice(i, 1);\n              i--;\n            }\n          }\n        };\n\n        BPMNImporter.prototype.onDefinitionsElement = function (element) {\n          this.dataSourceKey = element.getAttribute(\"id\");\n\n          for (var child = void 0, i = 0; child = element.children[i]; i++) {\n            if (child.nodeName.toUpperCase() === \"PROCESS\") this.onProcessElement(child);\n          }\n        };\n\n        BPMNImporter.prototype.onProcessElement = function (element) {\n          for (var child = void 0, i = 0; child = element.children[i]; i++) {\n            switch (child.nodeName.toUpperCase()) {\n              case \"STARTEVENT\":\n                this.onStartEventElement(child);\n                break;\n\n              case \"SEQUENCEFLOW\":\n                this.onSequenceFlowElement(child);\n                break;\n\n              case \"SCRIPTTASK\":\n                this.onScriptTaskElement(child);\n                break;\n\n              case \"USERTASK\":\n                this.onUserTaskElement(child);\n                break;\n\n              case \"SERVICETASK\":\n                this.onServiceTaskElement(child);\n                break;\n\n              case \"SENDTASK\":\n                this.onSendTaskElement(child);\n                break;\n\n              case \"EXCLUSIVEGATEWAY\":\n                this.onExclusiveGateway(child);\n                break;\n\n              case \"ENDEVENT\":\n                this.onEndEventGateway(child);\n                break;\n            }\n          }\n        };\n\n        BPMNImporter.prototype.onStartEventElement = function (element) {\n          var node = this.createNode(element);\n          node.type = ShapeTypes_1.ShapeTypes.Ellipse;\n          node.text = element.getAttribute(\"name\");\n          this.graph.addNode(node);\n        };\n\n        BPMNImporter.prototype.onSequenceFlowElement = function (element) {\n          var fromKey = element.getAttribute(\"sourceRef\");\n          var toKey = element.getAttribute(\"targetRef\");\n          var edge = this.createEdge(element, fromKey, toKey);\n          if (element.hasAttribute(\"name\")) edge.text = element.getAttribute(\"name\");\n          this.graph.addEdge(edge);\n        };\n\n        BPMNImporter.prototype.onScriptTaskElement = function (element) {\n          var node = this.createNode(element);\n          node.text = element.getAttribute(\"name\");\n          this.graph.addNode(node);\n        };\n\n        BPMNImporter.prototype.onUserTaskElement = function (element) {\n          var node = this.createNode(element);\n          node.text = element.getAttribute(\"name\");\n          this.graph.addNode(node);\n        };\n\n        BPMNImporter.prototype.onServiceTaskElement = function (element) {\n          var node = this.createNode(element);\n          node.text = element.getAttribute(\"name\");\n          this.graph.addNode(node);\n        };\n\n        BPMNImporter.prototype.onSendTaskElement = function (element) {\n          var node = this.createNode(element);\n          node.text = element.getAttribute(\"name\");\n          this.graph.addNode(node);\n        };\n\n        BPMNImporter.prototype.onExclusiveGateway = function (element) {\n          var node = this.createNode(element);\n          node.text = element.getAttribute(\"name\");\n          node.type = ShapeTypes_1.ShapeTypes.Decision;\n          this.graph.addNode(node);\n        };\n\n        BPMNImporter.prototype.onEndEventGateway = function (element) {\n          var node = this.createNode(element);\n          node.text = element.getAttribute(\"name\");\n          node.type = ShapeTypes_1.ShapeTypes.Ellipse;\n          this.graph.addNode(node);\n        };\n\n        BPMNImporter.prototype.createNode = function (element) {\n          return new BPMNNode(this.dataSourceKey, element.getAttribute(\"id\"));\n        };\n\n        BPMNImporter.prototype.createEdge = function (element, fromKey, toKey) {\n          return new BPMNEdge(this.dataSourceKey, element.getAttribute(\"id\"), fromKey, toKey);\n        };\n\n        return BPMNImporter;\n      }();\n\n      exports.BPMNImporter = BPMNImporter;\n\n      var BPMNNode =\n      /** @class */\n      function () {\n        function BPMNNode(sourceKey, key) {\n          this.sourceKey = sourceKey;\n          this.key = key;\n          this.type = ShapeTypes_1.ShapeTypes.Rectangle;\n        }\n\n        return BPMNNode;\n      }();\n\n      exports.BPMNNode = BPMNNode;\n\n      var BPMNEdge =\n      /** @class */\n      function (_super) {\n        __extends(BPMNEdge, _super);\n\n        function BPMNEdge(sourceKey, key, fromKey, toKey) {\n          var _this = _super.call(this, key, fromKey, toKey) || this;\n\n          _this.sourceKey = sourceKey;\n          return _this;\n        }\n\n        return BPMNEdge;\n      }(Structures_1.Edge);\n      /***/\n\n    },\n    /* 271 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.CycleRemover = void 0;\n\n      var Graph_1 = __webpack_require__(68);\n\n      var Structures_1 = __webpack_require__(37);\n\n      var ListUtils_1 = __webpack_require__(90);\n\n      var CycleRemover =\n      /** @class */\n      function () {\n        function CycleRemover() {}\n\n        CycleRemover.removeCycles = function (graph) {\n          var feedbackSet = this.getFeedbackSet(graph);\n          return this.reverseEdges(graph, feedbackSet);\n        };\n\n        CycleRemover.getFeedbackSet = function (graph) {\n          var _this = this;\n\n          var feedbackSet = {};\n          var nonTrivialStronglyConnectedComponents = this.getNonTrivialStronglyConnectedComponents(graph);\n\n          while (nonTrivialStronglyConnectedComponents.length) {\n            nonTrivialStronglyConnectedComponents.forEach(function (g) {\n              var maxCyclicEdges = _this.getMaxCyclicEdges(g);\n\n              maxCyclicEdges.forEach(function (e) {\n                return delete feedbackSet[e.reverse().getHashKey()];\n              });\n              maxCyclicEdges.forEach(function (e) {\n                return feedbackSet[e.getHashKey()] = true;\n              });\n            });\n            nonTrivialStronglyConnectedComponents = this.getNonTrivialStronglyConnectedComponents(this.reverseEdges(graph, feedbackSet).graph);\n          }\n\n          return feedbackSet;\n        };\n\n        CycleRemover.getMaxCyclicEdges = function (graph) {\n          var black = {};\n          var gray = {};\n          var edgeCycleCount = {};\n          var visitedEdges = [];\n          var cycles = [];\n          var iterator = graph.createIterator(Structures_1.ConnectionMode.Outgoing);\n          iterator.visitEachEdgeOnce = false;\n\n          iterator.onNode = function (n) {\n            gray[n.key] = true;\n          };\n\n          iterator.skipNode = function (n) {\n            if (gray[n.key]) {\n              var cycle = [];\n\n              for (var i = 0; i < visitedEdges.length; i++) {\n                var e = visitedEdges[i];\n                if (edgeCycleCount[e.key] === undefined) edgeCycleCount[e.key] = 0;\n                edgeCycleCount[e.key]++;\n                cycle.push(e);\n                if (e.from === n.key) break;\n              }\n\n              cycles.push(cycle);\n            }\n\n            return gray[n.key] || black[n.key];\n          };\n\n          iterator.skipEdge = function (e) {\n            return false;\n          };\n\n          iterator.onEdge = function (e) {\n            visitedEdges.splice(0, 0, e);\n          };\n\n          iterator.onAfterEdge = function (e) {\n            visitedEdges.splice(0, 1);\n          };\n\n          iterator.onAllEdges = function (e) {\n            black[e.key] = true;\n            gray[e.key] = false;\n          };\n\n          iterator.iterate(graph.nodes[0]);\n          var edgeSet = new ListUtils_1.HashSet([], function (e) {\n            return e.key;\n          });\n          cycles.forEach(function (c) {\n            edgeSet.tryPush(c.reduce(function (max, curr) {\n              return edgeCycleCount[curr.key] > edgeCycleCount[max.key] ? curr : max;\n            }, c[0]));\n          });\n          return edgeSet.list();\n        };\n\n        CycleRemover.reverseEdges = function (graph, feedbackSet) {\n          var edges = new ListUtils_1.HashSet([], function (e) {\n            return e.getHashKey();\n          });\n          var reversedEdges = {};\n          var removedEdges = {};\n          graph.edges.forEach(function (e) {\n            if (feedbackSet[e.getHashKey()]) {\n              e = e.reverse();\n              reversedEdges[e.key] = true;\n            }\n\n            if (!edges.tryPush(e)) {\n              removedEdges[e.key] = true;\n              delete reversedEdges[e.key];\n            }\n          });\n          return {\n            graph: new Graph_1.Graph(graph.nodes.map(function (n) {\n              return graph.getNode(n);\n            }), edges.list()),\n            reversedEdges: reversedEdges,\n            removedEdges: removedEdges\n          };\n        };\n\n        CycleRemover.getNonTrivialStronglyConnectedComponents = function (graph) {\n          return this.getStronglyConnectedComponents(graph).filter(function (g) {\n            return g.edges.length;\n          });\n        };\n\n        CycleRemover.getStronglyConnectedComponents = function (graph) {\n          var _this = this; // Tarjan algorithm\n          // https://en.wikipedia.org/wiki/Tarjan%27s_strongly_connected_components_algorithm\n\n\n          var nodesStack = [];\n          var index = 0;\n          var lowIndex = {};\n          var lowLink = {};\n          var onStack = {};\n          var components = [];\n          var visitedNodes = {};\n\n          for (var i = 0; i < graph.nodes.length; i++) {\n            var nodeKey = graph.nodes[i];\n            var iterator = graph.createIterator(Structures_1.ConnectionMode.Outgoing);\n            iterator.visitEachEdgeOnce = false;\n            iterator.visitEachNodeOnce = false;\n\n            iterator.onNode = function (n) {\n              visitedNodes[n.key] = true;\n              nodesStack.push(n);\n              onStack[n.key] = true;\n              lowLink[n.key] = index;\n              lowIndex[n.key] = index;\n              index++;\n            };\n\n            iterator.skipNode = function (n) {\n              return visitedNodes[n.key];\n            };\n\n            iterator.skipEdge = function (e) {\n              var isVisited = visitedNodes[e.to];\n              if (isVisited && onStack[e.to]) lowLink[e.from] = Math.min(lowLink[e.from], lowIndex[e.to]);\n              return isVisited;\n            };\n\n            iterator.onAfterEdge = function (e) {\n              lowLink[e.from] = Math.min(lowLink[e.from], lowLink[e.to]);\n            };\n\n            iterator.onAllEdges = function (n, outgoing) {\n              if (outgoing && lowLink[n.key] === lowIndex[n.key]) components.push(_this.getStronglyConnectedComponent(graph, n, nodesStack, onStack));\n            };\n\n            iterator.iterate(nodeKey);\n          }\n\n          return components;\n        };\n\n        CycleRemover.getStronglyConnectedComponent = function (graph, root, nodesStack, onStack) {\n          var itemsMap = {};\n          var nodes = [];\n          var edges = [];\n          var topStackNode;\n\n          do {\n            topStackNode = nodesStack.pop();\n            if (!itemsMap[topStackNode.key]) nodes.push(topStackNode);\n            itemsMap[topStackNode.key] = true;\n            onStack[topStackNode.key] = false;\n          } while (topStackNode !== root);\n\n          nodes.forEach(function (n) {\n            var aEdges = graph.getAdjacentEdges(n.key, Structures_1.ConnectionMode.Outgoing);\n            edges = edges.concat(aEdges.filter(function (e) {\n              return !itemsMap[e.key] && itemsMap[e.to];\n            }));\n            aEdges.forEach(function (e) {\n              return itemsMap[e.key] = true;\n            });\n          });\n          return new Graph_1.Graph(nodes, edges);\n        };\n\n        return CycleRemover;\n      }();\n\n      exports.CycleRemover = CycleRemover;\n      /***/\n    },\n    /* 272 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics179 = function extendStatics(d, b) {\n          _extendStatics179 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics179(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics179(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.SendToBackCommand = void 0;\n\n      var ChangeZindexHistoryItem_1 = __webpack_require__(102);\n\n      var SimpleCommandBase_1 = __webpack_require__(10);\n\n      var SendToBackCommand =\n      /** @class */\n      function (_super) {\n        __extends(SendToBackCommand, _super);\n\n        function SendToBackCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        SendToBackCommand.prototype.isEnabled = function () {\n          var items = this.control.selection.getSelectedItems();\n          return _super.prototype.isEnabled.call(this) && items.length > 0 && this.needSendToBack(items);\n        };\n\n        SendToBackCommand.prototype.executeCore = function (state, parameter) {\n          var _this = this;\n\n          this.control.history.beginTransaction();\n          var items = this.control.selection.getSelectedItems();\n          items.forEach(function (item) {\n            var newZIndex = _this.control.model.getIntersectItemsMinZIndex(item) - 1;\n\n            _this.control.history.addAndRedo(new ChangeZindexHistoryItem_1.ChangeZindexHistoryItem(item, newZIndex));\n          });\n          this.control.history.endTransaction();\n          return true;\n        };\n\n        SendToBackCommand.prototype.needSendToBack = function (items) {\n          var _this = this;\n\n          var _loop_1 = function _loop_1(i) {\n            var zIndex = this_1.control.model.getIntersectItemsMinZIndex(items[i]);\n            if (zIndex < items[i].zIndex) return {\n              value: true\n            };\n\n            if (zIndex === items[i].zIndex) {\n              var result_1 = false;\n              var sameZIndexItems = this_1.control.model.getIntersectItems(items[i]).filter(function (item) {\n                return item.zIndex === items[i].zIndex;\n              });\n              sameZIndexItems.forEach(function (item) {\n                if (_this.control.model.getItemIndex(item) < _this.control.model.getItemIndex(items[i])) {\n                  result_1 = true;\n                  return;\n                }\n              });\n              return {\n                value: result_1\n              };\n            }\n          };\n\n          var this_1 = this;\n\n          for (var i = 0; i < items.length; i++) {\n            var state_1 = _loop_1(i);\n\n            if (typeof state_1 === \"object\") return state_1.value;\n          }\n\n          return false;\n        };\n\n        return SendToBackCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.SendToBackCommand = SendToBackCommand;\n      /***/\n    },\n    /* 273 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics180 = function extendStatics(d, b) {\n          _extendStatics180 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics180(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics180(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.BringToFrontCommand = void 0;\n\n      var ChangeZindexHistoryItem_1 = __webpack_require__(102);\n\n      var SimpleCommandBase_1 = __webpack_require__(10);\n\n      var BringToFrontCommand =\n      /** @class */\n      function (_super) {\n        __extends(BringToFrontCommand, _super);\n\n        function BringToFrontCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        BringToFrontCommand.prototype.isEnabled = function () {\n          var items = this.control.selection.getSelectedItems();\n          return _super.prototype.isEnabled.call(this) && items.length > 0 && this.needBringToFront(items);\n        };\n\n        BringToFrontCommand.prototype.executeCore = function (state, parameter) {\n          var _this = this;\n\n          this.control.history.beginTransaction();\n          var items = this.control.selection.getSelectedItems();\n          items.forEach(function (item) {\n            var newZIndex = _this.control.model.getIntersectItemsMaxZIndex(item) + 1;\n\n            _this.control.history.addAndRedo(new ChangeZindexHistoryItem_1.ChangeZindexHistoryItem(item, newZIndex));\n          });\n          this.control.history.endTransaction();\n          return true;\n        };\n\n        BringToFrontCommand.prototype.needBringToFront = function (items) {\n          var _this = this;\n\n          var _loop_1 = function _loop_1(i) {\n            var zIndex = this_1.control.model.getIntersectItemsMaxZIndex(items[i]);\n            if (zIndex > items[i].zIndex) return {\n              value: true\n            };\n\n            if (zIndex === items[i].zIndex) {\n              var result_1 = false;\n              var sameZIndexItems = this_1.control.model.getIntersectItems(items[i]).filter(function (item) {\n                return item.zIndex === items[i].zIndex;\n              });\n              sameZIndexItems.forEach(function (item) {\n                if (_this.control.model.getItemIndex(item) > _this.control.model.getItemIndex(items[i])) {\n                  result_1 = true;\n                  return;\n                }\n              });\n              return {\n                value: result_1\n              };\n            }\n          };\n\n          var this_1 = this;\n\n          for (var i = 0; i < items.length; i++) {\n            var state_1 = _loop_1(i);\n\n            if (typeof state_1 === \"object\") return state_1.value;\n          }\n\n          return false;\n        };\n\n        return BringToFrontCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.BringToFrontCommand = BringToFrontCommand;\n      /***/\n    },\n    /* 274 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics181 = function extendStatics(d, b) {\n          _extendStatics181 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics181(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics181(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MoveStepDownCommand = exports.MoveDownCommand = exports.MoveStepUpCommand = exports.MoveUpCommand = exports.MoveStepRightCommand = exports.MoveRightCommand = exports.MoveStepLeftCommand = exports.MoveLeftCommand = exports.MoveCommand = void 0;\n\n      var point_1 = __webpack_require__(1);\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var unit_converter_1 = __webpack_require__(12);\n\n      var SimpleCommandBase_1 = __webpack_require__(10);\n\n      var MoveCommand =\n      /** @class */\n      function (_super) {\n        __extends(MoveCommand, _super);\n\n        function MoveCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MoveCommand.prototype.isEnabled = function () {\n          return _super.prototype.isEnabled.call(this) && !this.control.selection.isEmpty();\n        };\n\n        MoveCommand.prototype.executeCore = function (state, parameter) {\n          var _this = this;\n\n          this.control.history.beginTransaction();\n          var selection = this.control.selection;\n          selection.getSelectedShapes().forEach(function (shape) {\n            var pos = _this.getPosition(shape.position);\n\n            ModelUtils_1.ModelUtils.setShapePosition(_this.control.history, _this.control.model, shape, pos);\n            ModelUtils_1.ModelUtils.updateShapeAttachedConnectors(_this.control.history, _this.control.model, shape);\n          });\n          var selectedItems = ModelUtils_1.ModelUtils.createSelectedItems(selection);\n          selection.getSelectedConnectors().forEach(function (connector) {\n            if (ModelUtils_1.ModelUtils.canMoveConnector(selectedItems, connector)) {\n              var startPtIndex = connector.beginItem ? 1 : 0;\n              var endPtIndex = connector.endItem ? connector.points.length - 2 : connector.points.length - 1;\n\n              for (var i = startPtIndex; i <= endPtIndex; i++) {\n                var pos = _this.getPosition(connector.points[i]);\n\n                ModelUtils_1.ModelUtils.moveConnectorPoint(_this.control.history, connector, i, pos);\n              }\n            }\n          });\n          ModelUtils_1.ModelUtils.tryUpdateModelRectangle(this.control.history);\n          this.control.history.endTransaction();\n          return true;\n        };\n\n        return MoveCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.MoveCommand = MoveCommand;\n\n      var MoveLeftCommand =\n      /** @class */\n      function (_super) {\n        __extends(MoveLeftCommand, _super);\n\n        function MoveLeftCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MoveLeftCommand.prototype.getPosition = function (position) {\n          return position.clone().offset(-unit_converter_1.UnitConverter.pixelsToTwips(1), 0);\n        };\n\n        return MoveLeftCommand;\n      }(MoveCommand);\n\n      exports.MoveLeftCommand = MoveLeftCommand;\n\n      var MoveStepLeftCommand =\n      /** @class */\n      function (_super) {\n        __extends(MoveStepLeftCommand, _super);\n\n        function MoveStepLeftCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MoveStepLeftCommand.prototype.getPosition = function (position) {\n          if (this.control.settings.snapToGrid) return new point_1.Point(ModelUtils_1.ModelUtils.getSnappedPos(this.control.model, this.control.settings.gridSize, position.x - (this.control.settings.gridSize / 2 + 2), true), position.y);else return position.clone().offset(-this.control.settings.gridSize, 0);\n        };\n\n        return MoveStepLeftCommand;\n      }(MoveCommand);\n\n      exports.MoveStepLeftCommand = MoveStepLeftCommand;\n\n      var MoveRightCommand =\n      /** @class */\n      function (_super) {\n        __extends(MoveRightCommand, _super);\n\n        function MoveRightCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MoveRightCommand.prototype.getPosition = function (position) {\n          return position.clone().offset(unit_converter_1.UnitConverter.pixelsToTwips(1), 0);\n        };\n\n        return MoveRightCommand;\n      }(MoveCommand);\n\n      exports.MoveRightCommand = MoveRightCommand;\n\n      var MoveStepRightCommand =\n      /** @class */\n      function (_super) {\n        __extends(MoveStepRightCommand, _super);\n\n        function MoveStepRightCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MoveStepRightCommand.prototype.getPosition = function (position) {\n          if (this.control.settings.snapToGrid) return new point_1.Point(ModelUtils_1.ModelUtils.getSnappedPos(this.control.model, this.control.settings.gridSize, position.x + (this.control.settings.gridSize / 2 + 2), true), position.y);else return position.clone().offset(this.control.settings.gridSize, 0);\n        };\n\n        return MoveStepRightCommand;\n      }(MoveCommand);\n\n      exports.MoveStepRightCommand = MoveStepRightCommand;\n\n      var MoveUpCommand =\n      /** @class */\n      function (_super) {\n        __extends(MoveUpCommand, _super);\n\n        function MoveUpCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MoveUpCommand.prototype.getPosition = function (position) {\n          return position.clone().offset(0, -unit_converter_1.UnitConverter.pixelsToTwips(1));\n        };\n\n        return MoveUpCommand;\n      }(MoveCommand);\n\n      exports.MoveUpCommand = MoveUpCommand;\n\n      var MoveStepUpCommand =\n      /** @class */\n      function (_super) {\n        __extends(MoveStepUpCommand, _super);\n\n        function MoveStepUpCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MoveStepUpCommand.prototype.getPosition = function (position) {\n          if (this.control.settings.snapToGrid) return new point_1.Point(position.x, ModelUtils_1.ModelUtils.getSnappedPos(this.control.model, this.control.settings.gridSize, position.y - (this.control.settings.gridSize / 2 + 2), false));else return position.clone().offset(0, -this.control.settings.gridSize);\n        };\n\n        return MoveStepUpCommand;\n      }(MoveCommand);\n\n      exports.MoveStepUpCommand = MoveStepUpCommand;\n\n      var MoveDownCommand =\n      /** @class */\n      function (_super) {\n        __extends(MoveDownCommand, _super);\n\n        function MoveDownCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MoveDownCommand.prototype.getPosition = function (position) {\n          return position.clone().offset(0, unit_converter_1.UnitConverter.pixelsToTwips(1));\n        };\n\n        return MoveDownCommand;\n      }(MoveCommand);\n\n      exports.MoveDownCommand = MoveDownCommand;\n\n      var MoveStepDownCommand =\n      /** @class */\n      function (_super) {\n        __extends(MoveStepDownCommand, _super);\n\n        function MoveStepDownCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MoveStepDownCommand.prototype.getPosition = function (position) {\n          if (this.control.settings.snapToGrid) return new point_1.Point(position.x, ModelUtils_1.ModelUtils.getSnappedPos(this.control.model, this.control.settings.gridSize, position.y + (this.control.settings.gridSize / 2 + 2), false));else return position.clone().offset(0, this.control.settings.gridSize);\n        };\n\n        return MoveStepDownCommand;\n      }(MoveCommand);\n\n      exports.MoveStepDownCommand = MoveStepDownCommand;\n      /***/\n    },\n    /* 275 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics182 = function extendStatics(d, b) {\n          _extendStatics182 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics182(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics182(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ToggleAutoZoomCommand = exports.ToggleAutoZoomToWidthCommand = exports.ToggleAutoZoomToContentCommand = exports.SwitchAutoZoomCommand = exports.FitToWidthCommand = exports.FitToScreenCommand = exports.ChangeZoomLevelItemsCommand = exports.ChangeZoomLevelTo200Command = exports.ChangeZoomLevelTo150Command = exports.ChangeZoomLevelTo125Command = exports.ChangeZoomLevelTo100Command = exports.ChangeZoomLevelTo75Command = exports.ChangeZoomLevelTo50Command = exports.ChangeZoomLevelTo25Command = exports.ChangeZoomLevelInPercentageCommand = exports.ChangeZoomLevelCommand = void 0;\n\n      var SimpleCommandBase_1 = __webpack_require__(10);\n\n      var Settings_1 = __webpack_require__(27);\n\n      var ChangeZoomLevelCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeZoomLevelCommand, _super);\n\n        function ChangeZoomLevelCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeZoomLevelCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        ChangeZoomLevelCommand.prototype.getValue = function () {\n          return this.control.view.getZoom();\n        };\n\n        ChangeZoomLevelCommand.prototype.executeCore = function (state, parameter) {\n          this.control.settings.zoomLevel = parameter;\n          this.control.settings.autoZoom = Settings_1.AutoZoomMode.Disabled;\n          this.control.updateLayout(true);\n          return true;\n        };\n\n        ChangeZoomLevelCommand.prototype.getItems = function () {\n          return this.control.settings.zoomLevelItems.map(function (l) {\n            return {\n              value: l,\n              text: l * 100 + \"%\"\n            };\n          });\n        };\n\n        return ChangeZoomLevelCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ChangeZoomLevelCommand = ChangeZoomLevelCommand;\n\n      var ChangeZoomLevelInPercentageCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeZoomLevelInPercentageCommand, _super);\n\n        function ChangeZoomLevelInPercentageCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeZoomLevelInPercentageCommand.prototype.executeCore = function (state, parameter) {\n          return _super.prototype.executeCore.call(this, state, parameter / 100);\n        };\n\n        ChangeZoomLevelInPercentageCommand.prototype.getValue = function () {\n          return this.control.view.getZoom() * 100;\n        };\n\n        return ChangeZoomLevelInPercentageCommand;\n      }(ChangeZoomLevelCommand);\n\n      exports.ChangeZoomLevelInPercentageCommand = ChangeZoomLevelInPercentageCommand;\n\n      var ChangeZoomLevelExactlyCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeZoomLevelExactlyCommand, _super);\n\n        function ChangeZoomLevelExactlyCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeZoomLevelExactlyCommand.prototype.getValue = function () {\n          return this.control.view.getZoom() === this.exactValue;\n        };\n\n        ChangeZoomLevelExactlyCommand.prototype.executeCore = function (state, parameter) {\n          _super.prototype.executeCore.call(this, state, this.exactValue);\n\n          return true;\n        };\n\n        ChangeZoomLevelExactlyCommand.prototype.getItems = function () {\n          return undefined;\n        };\n\n        return ChangeZoomLevelExactlyCommand;\n      }(ChangeZoomLevelCommand);\n\n      var ChangeZoomLevelTo25Command =\n      /** @class */\n      function (_super) {\n        __extends(ChangeZoomLevelTo25Command, _super);\n\n        function ChangeZoomLevelTo25Command() {\n          var _this = _super !== null && _super.apply(this, arguments) || this;\n\n          _this.exactValue = 0.25;\n          return _this;\n        }\n\n        return ChangeZoomLevelTo25Command;\n      }(ChangeZoomLevelExactlyCommand);\n\n      exports.ChangeZoomLevelTo25Command = ChangeZoomLevelTo25Command;\n\n      var ChangeZoomLevelTo50Command =\n      /** @class */\n      function (_super) {\n        __extends(ChangeZoomLevelTo50Command, _super);\n\n        function ChangeZoomLevelTo50Command() {\n          var _this = _super !== null && _super.apply(this, arguments) || this;\n\n          _this.exactValue = 0.5;\n          return _this;\n        }\n\n        return ChangeZoomLevelTo50Command;\n      }(ChangeZoomLevelExactlyCommand);\n\n      exports.ChangeZoomLevelTo50Command = ChangeZoomLevelTo50Command;\n\n      var ChangeZoomLevelTo75Command =\n      /** @class */\n      function (_super) {\n        __extends(ChangeZoomLevelTo75Command, _super);\n\n        function ChangeZoomLevelTo75Command() {\n          var _this = _super !== null && _super.apply(this, arguments) || this;\n\n          _this.exactValue = 0.75;\n          return _this;\n        }\n\n        return ChangeZoomLevelTo75Command;\n      }(ChangeZoomLevelExactlyCommand);\n\n      exports.ChangeZoomLevelTo75Command = ChangeZoomLevelTo75Command;\n\n      var ChangeZoomLevelTo100Command =\n      /** @class */\n      function (_super) {\n        __extends(ChangeZoomLevelTo100Command, _super);\n\n        function ChangeZoomLevelTo100Command() {\n          var _this = _super !== null && _super.apply(this, arguments) || this;\n\n          _this.exactValue = 1;\n          return _this;\n        }\n\n        return ChangeZoomLevelTo100Command;\n      }(ChangeZoomLevelExactlyCommand);\n\n      exports.ChangeZoomLevelTo100Command = ChangeZoomLevelTo100Command;\n\n      var ChangeZoomLevelTo125Command =\n      /** @class */\n      function (_super) {\n        __extends(ChangeZoomLevelTo125Command, _super);\n\n        function ChangeZoomLevelTo125Command() {\n          var _this = _super !== null && _super.apply(this, arguments) || this;\n\n          _this.exactValue = 1.25;\n          return _this;\n        }\n\n        return ChangeZoomLevelTo125Command;\n      }(ChangeZoomLevelExactlyCommand);\n\n      exports.ChangeZoomLevelTo125Command = ChangeZoomLevelTo125Command;\n\n      var ChangeZoomLevelTo150Command =\n      /** @class */\n      function (_super) {\n        __extends(ChangeZoomLevelTo150Command, _super);\n\n        function ChangeZoomLevelTo150Command() {\n          var _this = _super !== null && _super.apply(this, arguments) || this;\n\n          _this.exactValue = 1.5;\n          return _this;\n        }\n\n        return ChangeZoomLevelTo150Command;\n      }(ChangeZoomLevelExactlyCommand);\n\n      exports.ChangeZoomLevelTo150Command = ChangeZoomLevelTo150Command;\n\n      var ChangeZoomLevelTo200Command =\n      /** @class */\n      function (_super) {\n        __extends(ChangeZoomLevelTo200Command, _super);\n\n        function ChangeZoomLevelTo200Command() {\n          var _this = _super !== null && _super.apply(this, arguments) || this;\n\n          _this.exactValue = 2;\n          return _this;\n        }\n\n        return ChangeZoomLevelTo200Command;\n      }(ChangeZoomLevelExactlyCommand);\n\n      exports.ChangeZoomLevelTo200Command = ChangeZoomLevelTo200Command;\n\n      var ChangeZoomLevelItemsCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeZoomLevelItemsCommand, _super);\n\n        function ChangeZoomLevelItemsCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeZoomLevelItemsCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        ChangeZoomLevelItemsCommand.prototype.getValue = function () {\n          return this.control.settings.zoomLevelItems;\n        };\n\n        ChangeZoomLevelItemsCommand.prototype.executeCore = function (state, parameter) {\n          this.control.settings.zoomLevelItems = parameter;\n          return true;\n        };\n\n        return ChangeZoomLevelItemsCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ChangeZoomLevelItemsCommand = ChangeZoomLevelItemsCommand;\n\n      var FitZoomCommandBase =\n      /** @class */\n      function (_super) {\n        __extends(FitZoomCommandBase, _super);\n\n        function FitZoomCommandBase() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        FitZoomCommandBase.prototype.isEnabled = function () {\n          return _super.prototype.isEnabled.call(this) && !!this.control.render;\n        };\n\n        FitZoomCommandBase.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        FitZoomCommandBase.prototype.executeCore = function (state) {\n          var zoomLevel = this.getZoomLevel();\n          this.control.settings.zoomLevel = zoomLevel;\n          this.control.settings.autoZoom = Settings_1.AutoZoomMode.Disabled;\n          this.control.updateLayout(true);\n          return true;\n        };\n\n        return FitZoomCommandBase;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      var FitToScreenCommand =\n      /** @class */\n      function (_super) {\n        __extends(FitToScreenCommand, _super);\n\n        function FitToScreenCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        FitToScreenCommand.prototype.getZoomLevel = function () {\n          return this.control.render.view.getActualAutoZoomLevel(Settings_1.AutoZoomMode.FitContent);\n        };\n\n        return FitToScreenCommand;\n      }(FitZoomCommandBase);\n\n      exports.FitToScreenCommand = FitToScreenCommand;\n\n      var FitToWidthCommand =\n      /** @class */\n      function (_super) {\n        __extends(FitToWidthCommand, _super);\n\n        function FitToWidthCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        FitToWidthCommand.prototype.getZoomLevel = function () {\n          return this.control.render.view.getActualAutoZoomLevel(Settings_1.AutoZoomMode.FitToWidth);\n        };\n\n        return FitToWidthCommand;\n      }(FitZoomCommandBase);\n\n      exports.FitToWidthCommand = FitToWidthCommand;\n\n      var SwitchAutoZoomCommand =\n      /** @class */\n      function (_super) {\n        __extends(SwitchAutoZoomCommand, _super);\n\n        function SwitchAutoZoomCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        SwitchAutoZoomCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        SwitchAutoZoomCommand.prototype.getValue = function () {\n          return this.control.settings.autoZoom;\n        };\n\n        SwitchAutoZoomCommand.prototype.executeCore = function (state, value) {\n          value = parseInt(value);\n          if (this.control.settings.autoZoom === value) return false;\n          if (value === Settings_1.AutoZoomMode.Disabled) this.control.settings.zoomLevel = this.control.view.getZoom();\n          this.control.settings.autoZoom = value;\n          this.control.updateLayout(true);\n          return true;\n        };\n\n        return SwitchAutoZoomCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.SwitchAutoZoomCommand = SwitchAutoZoomCommand;\n\n      var ToggleAutoZoomToContentCommand =\n      /** @class */\n      function (_super) {\n        __extends(ToggleAutoZoomToContentCommand, _super);\n\n        function ToggleAutoZoomToContentCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ToggleAutoZoomToContentCommand.prototype.getValue = function () {\n          return this.control.settings.autoZoom === Settings_1.AutoZoomMode.FitContent;\n        };\n\n        ToggleAutoZoomToContentCommand.prototype.executeCore = function (state, value) {\n          return _super.prototype.executeCore.call(this, state, Settings_1.AutoZoomMode.FitContent);\n        };\n\n        return ToggleAutoZoomToContentCommand;\n      }(SwitchAutoZoomCommand);\n\n      exports.ToggleAutoZoomToContentCommand = ToggleAutoZoomToContentCommand;\n\n      var ToggleAutoZoomToWidthCommand =\n      /** @class */\n      function (_super) {\n        __extends(ToggleAutoZoomToWidthCommand, _super);\n\n        function ToggleAutoZoomToWidthCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ToggleAutoZoomToWidthCommand.prototype.getValue = function () {\n          return this.control.settings.autoZoom === Settings_1.AutoZoomMode.FitToWidth;\n        };\n\n        ToggleAutoZoomToWidthCommand.prototype.executeCore = function (state, value) {\n          return _super.prototype.executeCore.call(this, state, Settings_1.AutoZoomMode.FitToWidth);\n        };\n\n        return ToggleAutoZoomToWidthCommand;\n      }(SwitchAutoZoomCommand);\n\n      exports.ToggleAutoZoomToWidthCommand = ToggleAutoZoomToWidthCommand;\n\n      var ToggleAutoZoomCommand =\n      /** @class */\n      function (_super) {\n        __extends(ToggleAutoZoomCommand, _super);\n\n        function ToggleAutoZoomCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ToggleAutoZoomCommand.prototype.isEnabled = function () {\n          return _super.prototype.isEnabled.call(this) && !!this.control.render;\n        };\n\n        ToggleAutoZoomCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        ToggleAutoZoomCommand.prototype.getValue = function () {\n          return this.control.settings.autoZoom;\n        };\n\n        ToggleAutoZoomCommand.prototype.executeCore = function (state, value) {\n          var newValue;\n          if (value === undefined) newValue = this.control.settings.autoZoom === Settings_1.AutoZoomMode.Disabled ? Settings_1.AutoZoomMode.FitContent : Settings_1.AutoZoomMode.Disabled;else newValue = value ? Settings_1.AutoZoomMode.FitContent : Settings_1.AutoZoomMode.Disabled;\n          if (this.control.settings.autoZoom === newValue) return false;\n          if (!newValue) this.control.settings.zoomLevel = this.control.view.getZoom();\n          this.control.settings.autoZoom = newValue;\n          this.control.updateLayout(true);\n          return true;\n        };\n\n        return ToggleAutoZoomCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ToggleAutoZoomCommand = ToggleAutoZoomCommand;\n      /***/\n    },\n    /* 276 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics183 = function extendStatics(d, b) {\n          _extendStatics183 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics183(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics183(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.BindDocumentCommand = void 0;\n\n      var DataLayoutParameters_1 = __webpack_require__(103);\n\n      var SimpleCommandBase_1 = __webpack_require__(10);\n\n      var BindDocumentCommand =\n      /** @class */\n      function (_super) {\n        __extends(BindDocumentCommand, _super);\n\n        function BindDocumentCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        BindDocumentCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        BindDocumentCommand.prototype.executeCore = function (state, parameter) {\n          if (!parameter || !Array.isArray(parameter.nodeDataSource)) throw Error(\"Format exception\");\n          this.performImportData(parameter);\n          this.control.updateLayout(true);\n          return true;\n        };\n\n        BindDocumentCommand.prototype.performImportData = function (parameter) {\n          var dataSource = this.control.createDocumentDataSource(parameter.nodeDataSource, parameter.edgeDataSource, parameter.dataParameters, parameter.nodeDataImporter, parameter.edgeDataImporter);\n          this.control.beginUpdateCanvas();\n          this.permissionsProvider.lockPermissions();\n          var layoutParameters = new DataLayoutParameters_1.DataLayoutParameters(this.control.settings, parameter.layoutParameters);\n          dataSource.createModelItems(this.control.history, this.control.model, this.control.shapeDescriptionManager, this.control.selection, layoutParameters, this.control.settings.snapToGrid, this.control.settings.gridSize, this.control.measurer);\n          this.permissionsProvider.unlockPermissions();\n          this.control.endUpdateCanvas();\n        };\n\n        return BindDocumentCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.BindDocumentCommand = BindDocumentCommand;\n      /***/\n    },\n    /* 277 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics184 = function extendStatics(d, b) {\n          _extendStatics184 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics184(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics184(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.UnbindDocumentCommand = void 0;\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var SimpleCommandBase_1 = __webpack_require__(10);\n\n      var UnbindDocumentCommand =\n      /** @class */\n      function (_super) {\n        __extends(UnbindDocumentCommand, _super);\n\n        function UnbindDocumentCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        UnbindDocumentCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        UnbindDocumentCommand.prototype.executeCore = function (state) {\n          this.permissionsProvider.lockPermissions();\n          this.control.deleteDocumentDataSource();\n          ModelUtils_1.ModelUtils.deleteAllItems(this.control.history, this.control.model, this.control.selection);\n          this.control.history.clear();\n          this.permissionsProvider.unlockPermissions();\n          return true;\n        };\n\n        return UnbindDocumentCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.UnbindDocumentCommand = UnbindDocumentCommand;\n      /***/\n    },\n    /* 278 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics185 = function extendStatics(d, b) {\n          _extendStatics185 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics185(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics185(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.LockCommand = void 0;\n\n      var ChangeLockedCommand_1 = __webpack_require__(146);\n\n      var LockCommand =\n      /** @class */\n      function (_super) {\n        __extends(LockCommand, _super);\n\n        function LockCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        LockCommand.prototype.getLockState = function () {\n          return true;\n        };\n\n        return LockCommand;\n      }(ChangeLockedCommand_1.ChangeLockedCommand);\n\n      exports.LockCommand = LockCommand;\n      /***/\n    },\n    /* 279 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics186 = function extendStatics(d, b) {\n          _extendStatics186 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics186(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics186(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.UnLockCommand = void 0;\n\n      var ChangeLockedCommand_1 = __webpack_require__(146);\n\n      var UnLockCommand =\n      /** @class */\n      function (_super) {\n        __extends(UnLockCommand, _super);\n\n        function UnLockCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        UnLockCommand.prototype.getLockState = function () {\n          return false;\n        };\n\n        return UnLockCommand;\n      }(ChangeLockedCommand_1.ChangeLockedCommand);\n\n      exports.UnLockCommand = UnLockCommand;\n      /***/\n    },\n    /* 280 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics187 = function extendStatics(d, b) {\n          _extendStatics187 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics187(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics187(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.CloneDownCommand = exports.CloneUpCommand = exports.CloneRightCommand = exports.CloneLeftCommand = exports.CloneCommand = void 0;\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var SimpleCommandBase_1 = __webpack_require__(10);\n\n      var CloneCommand =\n      /** @class */\n      function (_super) {\n        __extends(CloneCommand, _super);\n\n        function CloneCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        CloneCommand.prototype.isEnabled = function () {\n          var items = this.control.selection.getSelectedItems();\n          return _super.prototype.isEnabled.call(this) && items.length && items.length > 0 && this.permissionsProvider.canAddItems(items);\n        };\n\n        CloneCommand.prototype.executeCore = function (state, parameter) {\n          var selectionRect = ModelUtils_1.ModelUtils.createRectangle(this.control.selection.getSelectedItems());\n          ModelUtils_1.ModelUtils.cloneSelectionToOffset(this.control.history, this.control.model, undefined, this.control.selection, this.getOffsetX(selectionRect), this.getOffsetY(selectionRect));\n          return true;\n        };\n\n        Object.defineProperty(CloneCommand.prototype, \"isPermissionsRequired\", {\n          get: function get() {\n            return true;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        CloneCommand.prototype.getOffsetX = function (selectionRect) {\n          return 0;\n        };\n\n        CloneCommand.prototype.getOffsetY = function (selectionRect) {\n          return 0;\n        };\n\n        return CloneCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.CloneCommand = CloneCommand;\n\n      var CloneLeftCommand =\n      /** @class */\n      function (_super) {\n        __extends(CloneLeftCommand, _super);\n\n        function CloneLeftCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        CloneLeftCommand.prototype.getOffsetX = function (selectionRect) {\n          return -selectionRect.width;\n        };\n\n        return CloneLeftCommand;\n      }(CloneCommand);\n\n      exports.CloneLeftCommand = CloneLeftCommand;\n\n      var CloneRightCommand =\n      /** @class */\n      function (_super) {\n        __extends(CloneRightCommand, _super);\n\n        function CloneRightCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        CloneRightCommand.prototype.getOffsetX = function (selectionRect) {\n          return selectionRect.width;\n        };\n\n        return CloneRightCommand;\n      }(CloneCommand);\n\n      exports.CloneRightCommand = CloneRightCommand;\n\n      var CloneUpCommand =\n      /** @class */\n      function (_super) {\n        __extends(CloneUpCommand, _super);\n\n        function CloneUpCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        CloneUpCommand.prototype.getOffsetY = function (selectionRect) {\n          return -selectionRect.height;\n        };\n\n        return CloneUpCommand;\n      }(CloneCommand);\n\n      exports.CloneUpCommand = CloneUpCommand;\n\n      var CloneDownCommand =\n      /** @class */\n      function (_super) {\n        __extends(CloneDownCommand, _super);\n\n        function CloneDownCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        CloneDownCommand.prototype.getOffsetY = function (selectionRect) {\n          return selectionRect.height;\n        };\n\n        return CloneDownCommand;\n      }(CloneCommand);\n\n      exports.CloneDownCommand = CloneDownCommand;\n      /***/\n    },\n    /* 281 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics188 = function extendStatics(d, b) {\n          _extendStatics188 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics188(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics188(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeViewUnitsCommand = exports.ChangeUnitsCommand = void 0;\n\n      var ChangePagePropertyCommand_1 = __webpack_require__(75);\n\n      var ChangeUnitsHistoryItem_1 = __webpack_require__(282);\n\n      var SimpleCommandBase_1 = __webpack_require__(10);\n\n      var LocalizationService_1 = __webpack_require__(35);\n\n      var ChangeUnitsCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeUnitsCommand, _super);\n\n        function ChangeUnitsCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeUnitsCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        ChangeUnitsCommand.prototype.getValue = function () {\n          return this.control.model.units;\n        };\n\n        ChangeUnitsCommand.prototype.createHistoryItems = function (parameter) {\n          return [new ChangeUnitsHistoryItem_1.ChangeUnitsHistoryItem(parameter)];\n        };\n\n        ChangeUnitsCommand.prototype.getItems = function () {\n          return Object.keys(LocalizationService_1.DiagramLocalizationService.unitItems).map(function (key) {\n            return {\n              value: parseInt(key),\n              text: LocalizationService_1.DiagramLocalizationService.unitItems[key]\n            };\n          });\n        };\n\n        return ChangeUnitsCommand;\n      }(ChangePagePropertyCommand_1.ChangePagePropertyCommand);\n\n      exports.ChangeUnitsCommand = ChangeUnitsCommand;\n\n      var ChangeViewUnitsCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeViewUnitsCommand, _super);\n\n        function ChangeViewUnitsCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeViewUnitsCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        ChangeViewUnitsCommand.prototype.getValue = function () {\n          return this.control.settings.viewUnits;\n        };\n\n        ChangeViewUnitsCommand.prototype.executeCore = function (state, parameter) {\n          this.control.settings.viewUnits = parameter;\n          return true;\n        };\n\n        ChangeViewUnitsCommand.prototype.getItems = function () {\n          return Object.keys(LocalizationService_1.DiagramLocalizationService.unitItems).map(function (key) {\n            return {\n              value: parseInt(key),\n              text: LocalizationService_1.DiagramLocalizationService.unitItems[key]\n            };\n          });\n        };\n\n        return ChangeViewUnitsCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ChangeViewUnitsCommand = ChangeViewUnitsCommand;\n      /***/\n    },\n    /* 282 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics189 = function extendStatics(d, b) {\n          _extendStatics189 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics189(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics189(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeUnitsHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var ChangeUnitsHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangeUnitsHistoryItem, _super);\n\n        function ChangeUnitsHistoryItem(units) {\n          var _this = _super.call(this) || this;\n\n          _this.units = units;\n          return _this;\n        }\n\n        ChangeUnitsHistoryItem.prototype.redo = function (manipulator) {\n          this.oldUnits = manipulator.model.units;\n          manipulator.model.units = this.units;\n        };\n\n        ChangeUnitsHistoryItem.prototype.undo = function (manipulator) {\n          manipulator.model.units = this.oldUnits;\n        };\n\n        return ChangeUnitsHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ChangeUnitsHistoryItem = ChangeUnitsHistoryItem;\n      /***/\n    },\n    /* 283 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics190 = function extendStatics(d, b) {\n          _extendStatics190 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics190(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics190(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangePageColorCommand = void 0;\n\n      var ChangePagePropertyCommand_1 = __webpack_require__(75);\n\n      var ChangePageColorHistoryItem_1 = __webpack_require__(284);\n\n      var Model_1 = __webpack_require__(59);\n\n      var color_1 = __webpack_require__(22);\n\n      var ChangePageColorCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangePageColorCommand, _super);\n\n        function ChangePageColorCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangePageColorCommand.prototype.getValue = function () {\n          return color_1.ColorUtils.colorToHash(this.control.model.pageColor);\n        };\n\n        ChangePageColorCommand.prototype.getDefaultValue = function () {\n          return color_1.ColorUtils.colorToHash(Model_1.DiagramModel.defaultPageColor);\n        };\n\n        ChangePageColorCommand.prototype.createHistoryItems = function (parameter) {\n          return [new ChangePageColorHistoryItem_1.ChangePageColorHistoryItem(color_1.ColorUtils.fromString(parameter))];\n        };\n\n        return ChangePageColorCommand;\n      }(ChangePagePropertyCommand_1.ChangePagePropertyCommand);\n\n      exports.ChangePageColorCommand = ChangePageColorCommand;\n      /***/\n    },\n    /* 284 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics191 = function extendStatics(d, b) {\n          _extendStatics191 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics191(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics191(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangePageColorHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var ChangePageColorHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangePageColorHistoryItem, _super);\n\n        function ChangePageColorHistoryItem(value) {\n          var _this = _super.call(this) || this;\n\n          _this.value = value;\n          return _this;\n        }\n\n        ChangePageColorHistoryItem.prototype.redo = function (manipulator) {\n          this.oldValue = manipulator.model.pageColor;\n          manipulator.changePageColor(this.value);\n        };\n\n        ChangePageColorHistoryItem.prototype.undo = function (manipulator) {\n          manipulator.changePageColor(this.oldValue);\n        };\n\n        return ChangePageColorHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ChangePageColorHistoryItem = ChangePageColorHistoryItem;\n      /***/\n    },\n    /* 285 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics192 = function extendStatics(d, b) {\n          _extendStatics192 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics192(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics192(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeShowGridCommand = void 0;\n\n      var SimpleCommandBase_1 = __webpack_require__(10);\n\n      var ChangeShowGridCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeShowGridCommand, _super);\n\n        function ChangeShowGridCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeShowGridCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        ChangeShowGridCommand.prototype.executeCore = function (state, parameter) {\n          var newValue = parameter === undefined ? !this.control.settings.showGrid : !!parameter;\n\n          if (this.control.settings.showGrid !== newValue) {\n            this.control.settings.showGrid = newValue;\n            return true;\n          }\n\n          return false;\n        };\n\n        ChangeShowGridCommand.prototype.getValue = function () {\n          return this.control.settings.showGrid;\n        };\n\n        return ChangeShowGridCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ChangeShowGridCommand = ChangeShowGridCommand;\n      /***/\n    },\n    /* 286 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics193 = function extendStatics(d, b) {\n          _extendStatics193 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics193(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics193(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ToggleFullscreenCommand = void 0;\n\n      var SimpleCommandBase_1 = __webpack_require__(10);\n\n      var ToggleFullscreenCommand =\n      /** @class */\n      function (_super) {\n        __extends(ToggleFullscreenCommand, _super);\n\n        function ToggleFullscreenCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ToggleFullscreenCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        ToggleFullscreenCommand.prototype.getValue = function () {\n          return this.control.settings.fullscreen;\n        };\n\n        ToggleFullscreenCommand.prototype.executeCore = function (state, parameter) {\n          var newValue = typeof parameter === \"boolean\" ? parameter : !state.value;\n\n          if (this.control.settings.fullscreen !== newValue) {\n            this.control.settings.fullscreen = !state.value;\n            this.control.notifyToggleFullscreen(this.control.settings.fullscreen);\n          }\n\n          return true;\n        };\n\n        return ToggleFullscreenCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ToggleFullscreenCommand = ToggleFullscreenCommand;\n      /***/\n    },\n    /* 287 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics194 = function extendStatics(d, b) {\n          _extendStatics194 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics194(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics194(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ToggleSimpleViewCommand = void 0;\n\n      var SimpleCommandBase_1 = __webpack_require__(10);\n\n      var ToggleSimpleViewCommand =\n      /** @class */\n      function (_super) {\n        __extends(ToggleSimpleViewCommand, _super);\n\n        function ToggleSimpleViewCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ToggleSimpleViewCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        ToggleSimpleViewCommand.prototype.getValue = function () {\n          return this.control.settings.simpleView;\n        };\n\n        ToggleSimpleViewCommand.prototype.executeCore = function (state, parameter) {\n          if (typeof parameter === \"boolean\") this.control.settings.simpleView = parameter;else if (parameter === undefined) this.control.settings.simpleView = !state.value;\n          this.control.updateLayout(true);\n          return true;\n        };\n\n        return ToggleSimpleViewCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ToggleSimpleViewCommand = ToggleSimpleViewCommand;\n      /***/\n    },\n    /* 288 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics195 = function extendStatics(d, b) {\n          _extendStatics195 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics195(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics195(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ToggleReadOnlyCommand = void 0;\n\n      var SimpleCommandBase_1 = __webpack_require__(10);\n\n      var ToggleReadOnlyCommand =\n      /** @class */\n      function (_super) {\n        __extends(ToggleReadOnlyCommand, _super);\n\n        function ToggleReadOnlyCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ToggleReadOnlyCommand.prototype.isEnabledInReadOnlyMode = function () {\n          return true;\n        };\n\n        ToggleReadOnlyCommand.prototype.getValue = function () {\n          return this.control.settings.readOnly;\n        };\n\n        ToggleReadOnlyCommand.prototype.executeCore = function (state, parameter) {\n          if (typeof parameter === \"boolean\") this.control.settings.readOnly = parameter;else if (parameter === undefined) this.control.settings.readOnly = !state.value;\n          return true;\n        };\n\n        return ToggleReadOnlyCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ToggleReadOnlyCommand = ToggleReadOnlyCommand;\n      /***/\n    },\n    /* 289 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics196 = function extendStatics(d, b) {\n          _extendStatics196 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics196(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics196(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.EditShapeImageCommand = void 0;\n\n      var EditShapeImageCommandBase_1 = __webpack_require__(104);\n\n      var EditShapeImageCommand =\n      /** @class */\n      function (_super) {\n        __extends(EditShapeImageCommand, _super);\n\n        function EditShapeImageCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        EditShapeImageCommand.prototype.isEnabled = function () {\n          var selectedShape = this.getSelectedShape();\n          return _super.prototype.isEnabled.call(this) && !selectedShape.image.isEmpty;\n        };\n\n        return EditShapeImageCommand;\n      }(EditShapeImageCommandBase_1.EditShapeImageCommandBase);\n\n      exports.EditShapeImageCommand = EditShapeImageCommand;\n      /***/\n    },\n    /* 290 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics197 = function extendStatics(d, b) {\n          _extendStatics197 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics197(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics197(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.PasteSelectionInPositionCommand = void 0;\n\n      var PasteSelectoinCommandBase_1 = __webpack_require__(142);\n\n      var Shape_1 = __webpack_require__(14);\n\n      var Connector_1 = __webpack_require__(7);\n\n      var PasteSelectionInPositionCommand =\n      /** @class */\n      function (_super) {\n        __extends(PasteSelectionInPositionCommand, _super);\n\n        function PasteSelectionInPositionCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        PasteSelectionInPositionCommand.prototype.calculateSelectionOffset = function (items, position) {\n          var selectionPos = items.reduce(function (min, i) {\n            return {\n              x: Math.min(min.x, i instanceof Shape_1.Shape ? i.position.x : i instanceof Connector_1.Connector ? i.getMinX() : Number.MAX_VALUE),\n              y: Math.min(min.y, i instanceof Shape_1.Shape ? i.position.y : i instanceof Connector_1.Connector ? i.getMinY() : Number.MAX_VALUE)\n            };\n          }, {\n            x: Number.MAX_VALUE,\n            y: Number.MAX_VALUE\n          });\n          var newSelectionPos = this.control.render.getModelPointByEventPoint(position.x, position.y);\n          this.offsetX = newSelectionPos.x - selectionPos.x;\n          this.offsetY = newSelectionPos.y - selectionPos.y;\n        };\n\n        PasteSelectionInPositionCommand.prototype.getShapeNewPosition = function (position) {\n          var newPosition = position.clone().offset(this.offsetX, this.offsetY);\n          return PasteSelectoinCommandBase_1.PasteSelectionCommandBase.getShapeNewPosition(this.control.model, newPosition);\n        };\n\n        PasteSelectionInPositionCommand.prototype.changeConnectorPoints = function (connector) {\n          var _this = this;\n\n          connector.points.forEach(function (pt) {\n            pt.x += _this.offsetX;\n            pt.y += _this.offsetY;\n          });\n          PasteSelectoinCommandBase_1.PasteSelectionCommandBase.changeConnectorPoints(this.control.model, connector);\n        };\n\n        return PasteSelectionInPositionCommand;\n      }(PasteSelectoinCommandBase_1.PasteSelectionCommandBase);\n\n      exports.PasteSelectionInPositionCommand = PasteSelectionInPositionCommand;\n      /***/\n    },\n    /* 291 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics198 = function extendStatics(d, b) {\n          _extendStatics198 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics198(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics198(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ImportXMLCommand = void 0;\n\n      var XMLImporter_1 = __webpack_require__(292);\n\n      var ExportImportCommandBase_1 = __webpack_require__(54);\n\n      var ImportXMLCommand =\n      /** @class */\n      function (_super) {\n        __extends(ImportXMLCommand, _super);\n\n        function ImportXMLCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ImportXMLCommand.prototype.executeCore = function (state, parameter) {\n          var importer = new XMLImporter_1.XmlImporter(this.control.shapeDescriptionManager, parameter);\n          var model = importer.import();\n          this.control.importModel(model);\n          return true;\n        };\n\n        return ImportXMLCommand;\n      }(ExportImportCommandBase_1.ExportImportCommandBase);\n\n      exports.ImportXMLCommand = ImportXMLCommand;\n      /***/\n    },\n    /* 292 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics199 = function extendStatics(d, b) {\n          _extendStatics199 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics199(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics199(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.XmlImporter = void 0;\n\n      var Connector_1 = __webpack_require__(7);\n\n      var Shape_1 = __webpack_require__(14);\n\n      var ImporterBase_1 = __webpack_require__(134);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var ShapeDescriptionManager_1 = __webpack_require__(91);\n\n      var size_1 = __webpack_require__(2);\n\n      var point_1 = __webpack_require__(1);\n\n      var ImportUtils_1 = __webpack_require__(95);\n\n      var color_1 = __webpack_require__(22);\n\n      var unit_converter_1 = __webpack_require__(12);\n\n      var XmlImporter =\n      /** @class */\n      function (_super) {\n        __extends(XmlImporter, _super);\n\n        function XmlImporter(shapeDescriptionManager, xml) {\n          var _this = _super.call(this, shapeDescriptionManager) || this;\n\n          _this.doc = ImportUtils_1.ImportUtils.createDocument(xml);\n          return _this;\n        }\n\n        XmlImporter.prototype.getObject = function () {\n          return this.doc;\n        };\n\n        XmlImporter.prototype.getPageObject = function (obj) {\n          var pageElements = this.doc.querySelectorAll(\"[ItemKind='DiagramRoot']\");\n          return pageElements && pageElements[0];\n        };\n\n        XmlImporter.prototype.getShapeObjects = function (obj) {\n          var shapeObjs = [];\n          this.doc.querySelectorAll(\"[ItemKind='DiagramRoot'] > Children > [ItemKind='DiagramShape']\").forEach(function (obj) {\n            shapeObjs.push(obj);\n          });\n          this.doc.querySelectorAll(\"[ItemKind='DiagramRoot'] > Children > [ItemKind='DiagramContainer']\").forEach(function (obj) {\n            shapeObjs.push(obj);\n          });\n          return shapeObjs;\n        };\n\n        XmlImporter.prototype.getConnectorObjects = function (obj) {\n          var connectorObjs = [];\n          this.doc.querySelectorAll(\"[ItemKind='DiagramRoot'] > Children > [ItemKind='DiagramConnector']\").forEach(function (obj) {\n            connectorObjs.push(obj);\n          });\n          return connectorObjs;\n        };\n\n        XmlImporter.prototype.importPageSettings = function (model, pageObj) {\n          if (!pageObj) return;\n          var pageSizeAttr = pageObj.getAttribute(\"PageSize\");\n          var pageSize = this.getSize(pageSizeAttr);\n\n          if (pageSize) {\n            model.size = pageSize.clone();\n            model.pageSize = pageSize.clone();\n          }\n        };\n\n        XmlImporter.prototype.importShape = function (shapeObj) {\n          var positionAttr = shapeObj.getAttribute(\"Position\");\n          var position = this.getPoint(positionAttr);\n          var shapeAttr = shapeObj.getAttribute(\"Shape\");\n          var shapeType = this.getShapeType(shapeAttr);\n          var description = this.shapeDescriptionManager.get(shapeType);\n          var shape = new Shape_1.Shape(description || ShapeDescriptionManager_1.ShapeDescriptionManager.default, position);\n          shape.key = this.getItemKey(shapeObj);\n          var sizeAttr = shapeObj.getAttribute(\"Size\");\n          var size = this.getSize(sizeAttr);\n          if (size) shape.size = size;\n          var contentAttr = shapeObj.getAttribute(\"Content\");\n          if (typeof contentAttr === \"string\") shape.text = contentAttr;else {\n            var headerAttr = shapeObj.getAttribute(\"Header\");\n            if (typeof headerAttr === \"string\") shape.text = headerAttr;\n          }\n          this.importStyle(shapeObj, shape);\n          return shape;\n        };\n\n        XmlImporter.prototype.importShapeChildren = function (shapeObj, shape) {\n          var childShapeObjs = [];\n          shapeObj.setAttribute(\"dxDiagram\", \"\");\n          this.doc.querySelectorAll(\"[dxDiagram] > Children > [ItemKind='DiagramShape']\").forEach(function (obj) {\n            childShapeObjs.push(obj);\n          });\n          this.doc.querySelectorAll(\"[dxDiagram] > Children > [ItemKind='DiagramContainer']\").forEach(function (obj) {\n            childShapeObjs.push(obj);\n          });\n          shapeObj.removeAttribute(\"dxDiagram\");\n          var result = [];\n          if (!childShapeObjs) return result;\n\n          for (var i = 0; i < childShapeObjs.length; i++) {\n            var childShapeObj = childShapeObjs[i];\n            var childShape = this.importShape(childShapeObj);\n            childShape.key = shape.key + \",\" + childShape.key;\n            var rect = shape.clientRectangle;\n            childShape.position = childShape.position.clone().offset(rect.x, rect.y);\n            if (!shape[\"childKeys\"]) shape[\"childKeys\"] = [];\n            shape[\"childKeys\"].push(childShape.key);\n            result.push(childShape);\n            result = result.concat(this.importShapeChildren(childShapeObj, childShape));\n          }\n\n          return result;\n        };\n\n        XmlImporter.prototype.importConnector = function (connectorObj) {\n          var _this = this;\n\n          var points = [];\n          var beginPointAttr = connectorObj.getAttribute(\"BeginPoint\");\n          var beginPoint = this.getPoint(beginPointAttr);\n          if (beginPoint) points.push(beginPoint);\n          var pointsAttr = connectorObj.getAttribute(\"Points\");\n          pointsAttr.split(\" \").forEach(function (pointAttr) {\n            var point = _this.getPoint(pointAttr);\n\n            if (point) points.push(point);\n          });\n          var endPointAttr = connectorObj.getAttribute(\"EndPoint\");\n          var endPoint = this.getPoint(endPointAttr);\n          if (endPoint) points.push(endPoint);\n          var connector = new Connector_1.Connector(points);\n          connector.key = this.getItemKey(connectorObj);\n          var endItemPointIndexAttr = connectorObj.getAttribute(\"EndItemPointIndex\");\n          var endItemPointIndex = parseInt(endItemPointIndexAttr);\n          connector.endConnectionPointIndex = !isNaN(endItemPointIndex) ? endItemPointIndex : -1;\n          var beginItemPointIndexAttr = connectorObj.getAttribute(\"BeginItemPointIndex\");\n          var beginItemPointIndex = parseInt(beginItemPointIndexAttr);\n          connector.beginConnectionPointIndex = !isNaN(beginItemPointIndex) ? beginItemPointIndex : -1;\n          var endItemAttr = connectorObj.getAttribute(\"EndItem\");\n          if (endItemAttr !== undefined) this.assert(endItemAttr, \"string\");\n          var beginItemAttr = connectorObj.getAttribute(\"BeginItem\");\n          if (beginItemAttr !== undefined) this.assert(beginItemAttr, \"string\");\n          connector[\"endItemKey\"] = endItemAttr;\n          connector[\"beginItemKey\"] = beginItemAttr;\n          var contentAttr = connectorObj.getAttribute(\"Content\");\n          if (typeof contentAttr === \"string\") connector.setText(contentAttr);\n          this.importStyle(connectorObj, connector);\n          return connector;\n        };\n\n        XmlImporter.prototype.importStyle = function (obj, item) {\n          var backgroundAttr = obj.getAttribute(\"Background\");\n          if (typeof backgroundAttr === \"string\") item.style[\"fill\"] = this.getColor(backgroundAttr);\n          var strokeAttr = obj.getAttribute(\"Stroke\");\n          if (typeof strokeAttr === \"string\") item.style[\"stroke\"] = this.getColor(strokeAttr);\n          var foregroundAttr = obj.getAttribute(\"Foreground\");\n          if (typeof foregroundAttr === \"string\") item.styleText[\"fill\"] = this.getColor(foregroundAttr);\n          var fontFamilyAttr = obj.getAttribute(\"FontFamily\");\n          if (typeof fontFamilyAttr === \"string\") item.styleText[\"font-family\"] = fontFamilyAttr;\n          var fontSizeAttr = obj.getAttribute(\"FontSize\");\n          if (typeof fontSizeAttr === \"string\") item.styleText[\"font-size\"] = fontSizeAttr;\n          var fontWeightAttr = obj.getAttribute(\"FontWeight\");\n          if (fontWeightAttr === \"Bold\") item.styleText[\"font-weight\"] = \"bold\";\n          var fontStyleAttr = obj.getAttribute(\"FontStyle\");\n          if (fontStyleAttr === \"Italic\") item.styleText[\"font-style\"] = \"italic\";\n          var textDecorationsAttr = obj.getAttribute(\"TextDecorations\");\n          if (textDecorationsAttr === \"Underline\") item.styleText[\"text-decoration\"] = \"underline\";\n          var textAlignmentAttr = obj.getAttribute(\"TextAlignment\");\n          if (textAlignmentAttr === \"Left\") item.styleText[\"text-anchor\"] = \"start\";else if (textAlignmentAttr === \"Right\") item.styleText[\"text-anchor\"] = \"end\";else if (textAlignmentAttr === \"Center\") item.styleText[\"text-anchor\"] = \"middle\";\n        };\n\n        XmlImporter.prototype.getShapeType = function (shapeAttr) {\n          if (XmlImporter.shapeTypes[shapeAttr]) return XmlImporter.shapeTypes[shapeAttr];\n          if (shapeAttr && shapeAttr.toLowerCase().indexOf(\"container\") > -1) return ShapeTypes_1.ShapeTypes.VerticalContainer;\n          return ShapeTypes_1.ShapeTypes.Rectangle;\n        };\n\n        XmlImporter.prototype.getItemKey = function (obj) {\n          return (parseInt(obj.tagName.replace(\"Item\", \"\")) - 1).toString();\n        };\n\n        XmlImporter.prototype.getNumbers = function (s) {\n          var parts = s.split(\",\");\n          return parts && parts.length ? parts.map(function (part) {\n            return +part;\n          }) : [];\n        };\n\n        XmlImporter.prototype.getSize = function (attrValue) {\n          if (attrValue) {\n            var numbers = this.getNumbers(attrValue);\n\n            if (numbers.length >= 2) {\n              this.assert(numbers[0], \"number\");\n              this.assert(numbers[1], \"number\");\n              return new size_1.Size(unit_converter_1.UnitConverter.pixelsToTwips(numbers[0]), unit_converter_1.UnitConverter.pixelsToTwips(numbers[1]));\n            }\n          }\n        };\n\n        XmlImporter.prototype.getPoint = function (attrValue) {\n          if (attrValue) {\n            var numbers = this.getNumbers(attrValue);\n\n            if (numbers.length >= 2) {\n              this.assert(numbers[0], \"number\");\n              this.assert(numbers[1], \"number\");\n              return new point_1.Point(unit_converter_1.UnitConverter.pixelsToTwips(numbers[0]), unit_converter_1.UnitConverter.pixelsToTwips(numbers[1]));\n            }\n          }\n        };\n\n        XmlImporter.prototype.getColor = function (attrValue) {\n          attrValue = attrValue.charAt(0) === \"#\" ? attrValue.substr(1) : attrValue;\n          var color = parseInt(attrValue, 16);\n          return !isNaN(color) ? color_1.ColorUtils.colorToHash(color) : undefined;\n        };\n\n        XmlImporter.shapeTypes = {\n          \"BasicShapes.Rectangle\": ShapeTypes_1.ShapeTypes.Rectangle,\n          \"BasicShapes.Ellipse\": ShapeTypes_1.ShapeTypes.Ellipse,\n          \"BasicShapes.Triangle\": ShapeTypes_1.ShapeTypes.Triangle,\n          \"BasicShapes.Pentagon\": ShapeTypes_1.ShapeTypes.Pentagon,\n          \"BasicShapes.Hexagon\": ShapeTypes_1.ShapeTypes.Hexagon,\n          \"BasicShapes.Octagon\": ShapeTypes_1.ShapeTypes.Octagon,\n          \"BasicShapes.Diamond\": ShapeTypes_1.ShapeTypes.Diamond,\n          \"BasicShapes.Cross\": ShapeTypes_1.ShapeTypes.Cross,\n          \"BasicShapes.Star5\": ShapeTypes_1.ShapeTypes.Star,\n          \"BasicFlowchartShapes.StartEnd\": ShapeTypes_1.ShapeTypes.Terminator,\n          \"BasicFlowchartShapes.Data\": ShapeTypes_1.ShapeTypes.Data,\n          \"BasicFlowchartShapes.Database\": ShapeTypes_1.ShapeTypes.Database,\n          \"BasicFlowchartShapes.ExternalData\": ShapeTypes_1.ShapeTypes.StoredData,\n          \"BasicFlowchartShapes.Process\": ShapeTypes_1.ShapeTypes.Process,\n          \"BasicFlowchartShapes.Decision\": ShapeTypes_1.ShapeTypes.Decision,\n          \"BasicFlowchartShapes.Subprocess\": ShapeTypes_1.ShapeTypes.PredefinedProcess,\n          \"BasicFlowchartShapes.Document\": ShapeTypes_1.ShapeTypes.Document,\n          \"BasicFlowchartShapes.Custom1\": ShapeTypes_1.ShapeTypes.ManualInput,\n          \"BasicFlowchartShapes.Custom2\": ShapeTypes_1.ShapeTypes.ManualOperation,\n          \"ArrowShapes.SimpleArrow\": ShapeTypes_1.ShapeTypes.ArrowLeft,\n          \"ArrowShapes.SimpleDoubleArrow\": ShapeTypes_1.ShapeTypes.ArrowLeftRight\n        };\n        return XmlImporter;\n      }(ImporterBase_1.ImporterBase);\n\n      exports.XmlImporter = XmlImporter;\n      /***/\n    },\n    /* 293 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics200 = function extendStatics(d, b) {\n          _extendStatics200 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics200(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics200(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.InsertShapeImageCommand = void 0;\n\n      var EditShapeImageCommandBase_1 = __webpack_require__(104);\n\n      var InsertShapeImageCommand =\n      /** @class */\n      function (_super) {\n        __extends(InsertShapeImageCommand, _super);\n\n        function InsertShapeImageCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        InsertShapeImageCommand.prototype.isEnabled = function () {\n          var selectedShape = this.getSelectedShape();\n          return _super.prototype.isEnabled.call(this) && selectedShape.image.isEmpty;\n        };\n\n        return InsertShapeImageCommand;\n      }(EditShapeImageCommandBase_1.EditShapeImageCommandBase);\n\n      exports.InsertShapeImageCommand = InsertShapeImageCommand;\n      /***/\n    },\n    /* 294 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics201 = function extendStatics(d, b) {\n          _extendStatics201 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics201(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics201(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.DeleteShapeImageCommand = void 0;\n\n      var EditShapeImageCommandBase_1 = __webpack_require__(104);\n\n      var DeleteShapeImageCommand =\n      /** @class */\n      function (_super) {\n        __extends(DeleteShapeImageCommand, _super);\n\n        function DeleteShapeImageCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        DeleteShapeImageCommand.prototype.isEnabled = function () {\n          var selectedShape = this.getSelectedShape();\n          return _super.prototype.isEnabled.call(this) && !selectedShape.image.isEmpty;\n        };\n\n        DeleteShapeImageCommand.prototype.executeCore = function (state, parameter) {\n          return _super.prototype.executeCore.call(this, state, undefined);\n        };\n\n        return DeleteShapeImageCommand;\n      }(EditShapeImageCommandBase_1.EditShapeImageCommandBase);\n\n      exports.DeleteShapeImageCommand = DeleteShapeImageCommand;\n      /***/\n    },\n    /* 295 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics202 = function extendStatics(d, b) {\n          _extendStatics202 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics202(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics202(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeStrokeStyleCommand = void 0;\n\n      var ChangeStylePropertyCommand_1 = __webpack_require__(73);\n\n      var ChangeStrokeStyleCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeStrokeStyleCommand, _super);\n\n        function ChangeStrokeStyleCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeStrokeStyleCommand.prototype.getStyleProperty = function () {\n          return \"stroke-dasharray\";\n        };\n\n        return ChangeStrokeStyleCommand;\n      }(ChangeStylePropertyCommand_1.ChangeStylePropertyCommand);\n\n      exports.ChangeStrokeStyleCommand = ChangeStrokeStyleCommand;\n      /***/\n    },\n    /* 296 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics203 = function extendStatics(d, b) {\n          _extendStatics203 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics203(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics203(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeStrokeWidthCommand = void 0;\n\n      var ChangeStylePropertyCommand_1 = __webpack_require__(73);\n\n      var ChangeStrokeWidthCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeStrokeWidthCommand, _super);\n\n        function ChangeStrokeWidthCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeStrokeWidthCommand.prototype.getStyleProperty = function () {\n          return \"stroke-width\";\n        };\n\n        return ChangeStrokeWidthCommand;\n      }(ChangeStylePropertyCommand_1.ChangeStylePropertyCommand);\n\n      exports.ChangeStrokeWidthCommand = ChangeStrokeWidthCommand;\n      /***/\n    },\n    /* 297 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics204 = function extendStatics(d, b) {\n          _extendStatics204 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics204(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics204(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.AutoLayoutTreeVerticalBottomToTopCommand = void 0;\n\n      var LayoutSettings_1 = __webpack_require__(20);\n\n      var AutoLayoutTreeVerticalCommand_1 = __webpack_require__(138);\n\n      var AutoLayoutTreeVerticalBottomToTopCommand =\n      /** @class */\n      function (_super) {\n        __extends(AutoLayoutTreeVerticalBottomToTopCommand, _super);\n\n        function AutoLayoutTreeVerticalBottomToTopCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        AutoLayoutTreeVerticalBottomToTopCommand.prototype.createLayoutSettings = function () {\n          var settings = _super.prototype.createLayoutSettings.call(this);\n\n          settings.direction = LayoutSettings_1.LogicalDirectionKind.Backward;\n          return settings;\n        };\n\n        return AutoLayoutTreeVerticalBottomToTopCommand;\n      }(AutoLayoutTreeVerticalCommand_1.AutoLayoutTreeVerticalCommand);\n\n      exports.AutoLayoutTreeVerticalBottomToTopCommand = AutoLayoutTreeVerticalBottomToTopCommand;\n      /***/\n    },\n    /* 298 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics205 = function extendStatics(d, b) {\n          _extendStatics205 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics205(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics205(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.AutoLayoutTreeHorizontalRightToLeftCommand = void 0;\n\n      var LayoutSettings_1 = __webpack_require__(20);\n\n      var AutoLayoutTreeHorizontalCommand_1 = __webpack_require__(144);\n\n      var AutoLayoutTreeHorizontalRightToLeftCommand =\n      /** @class */\n      function (_super) {\n        __extends(AutoLayoutTreeHorizontalRightToLeftCommand, _super);\n\n        function AutoLayoutTreeHorizontalRightToLeftCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        AutoLayoutTreeHorizontalRightToLeftCommand.prototype.createLayoutSettings = function () {\n          var settings = _super.prototype.createLayoutSettings.call(this);\n\n          settings.direction = LayoutSettings_1.LogicalDirectionKind.Backward;\n          return settings;\n        };\n\n        return AutoLayoutTreeHorizontalRightToLeftCommand;\n      }(AutoLayoutTreeHorizontalCommand_1.AutoLayoutTreeHorizontalCommand);\n\n      exports.AutoLayoutTreeHorizontalRightToLeftCommand = AutoLayoutTreeHorizontalRightToLeftCommand;\n      /***/\n    },\n    /* 299 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics206 = function extendStatics(d, b) {\n          _extendStatics206 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics206(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics206(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.AutoLayoutLayeredVerticalBottomToTopCommand = void 0;\n\n      var LayoutSettings_1 = __webpack_require__(20);\n\n      var AutoLayoutLayeredVerticalCommand_1 = __webpack_require__(145);\n\n      var AutoLayoutLayeredVerticalBottomToTopCommand =\n      /** @class */\n      function (_super) {\n        __extends(AutoLayoutLayeredVerticalBottomToTopCommand, _super);\n\n        function AutoLayoutLayeredVerticalBottomToTopCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        AutoLayoutLayeredVerticalBottomToTopCommand.prototype.createLayoutSettings = function () {\n          var settings = _super.prototype.createLayoutSettings.call(this);\n\n          settings.direction = LayoutSettings_1.LogicalDirectionKind.Backward;\n          return settings;\n        };\n\n        return AutoLayoutLayeredVerticalBottomToTopCommand;\n      }(AutoLayoutLayeredVerticalCommand_1.AutoLayoutLayeredVerticalCommand);\n\n      exports.AutoLayoutLayeredVerticalBottomToTopCommand = AutoLayoutLayeredVerticalBottomToTopCommand;\n      /***/\n    },\n    /* 300 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics207 = function extendStatics(d, b) {\n          _extendStatics207 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics207(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics207(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.AutoLayoutLayeredHorizontalRightToLeftCommand = void 0;\n\n      var LayoutSettings_1 = __webpack_require__(20);\n\n      var AutoLayoutLayeredHorizontalCommand_1 = __webpack_require__(143);\n\n      var AutoLayoutLayeredHorizontalRightToLeftCommand =\n      /** @class */\n      function (_super) {\n        __extends(AutoLayoutLayeredHorizontalRightToLeftCommand, _super);\n\n        function AutoLayoutLayeredHorizontalRightToLeftCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        AutoLayoutLayeredHorizontalRightToLeftCommand.prototype.createLayoutSettings = function () {\n          var settings = _super.prototype.createLayoutSettings.call(this);\n\n          settings.direction = LayoutSettings_1.LogicalDirectionKind.Backward;\n          return settings;\n        };\n\n        return AutoLayoutLayeredHorizontalRightToLeftCommand;\n      }(AutoLayoutLayeredHorizontalCommand_1.AutoLayoutLayeredHorizontalCommand);\n\n      exports.AutoLayoutLayeredHorizontalRightToLeftCommand = AutoLayoutLayeredHorizontalRightToLeftCommand;\n      /***/\n    },\n    /* 301 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics208 = function extendStatics(d, b) {\n          _extendStatics208 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics208(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics208(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeConnectorRoutingModeCommand = void 0;\n\n      var SimpleCommandBase_1 = __webpack_require__(10);\n\n      var Settings_1 = __webpack_require__(27);\n\n      var ChangeConnectorRoutingModeCommand =\n      /** @class */\n      function (_super) {\n        __extends(ChangeConnectorRoutingModeCommand, _super);\n\n        function ChangeConnectorRoutingModeCommand() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ChangeConnectorRoutingModeCommand.prototype.getValue = function () {\n          return this.control.settings.connectorRoutingMode;\n        };\n\n        ChangeConnectorRoutingModeCommand.prototype.executeCore = function (state, parameter) {\n          var mode = parameter !== undefined ? parameter : Settings_1.ConnectorRoutingMode.None;\n          this.control.settings.connectorRoutingMode = mode;\n          return true;\n        };\n\n        return ChangeConnectorRoutingModeCommand;\n      }(SimpleCommandBase_1.SimpleCommandBase);\n\n      exports.ChangeConnectorRoutingModeCommand = ChangeConnectorRoutingModeCommand;\n      /***/\n    },\n    /* 302 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.DiagramControl = void 0;\n\n      var point_1 = __webpack_require__(1);\n\n      var ModelManipulator_1 = __webpack_require__(303);\n\n      var CommandManager_1 = __webpack_require__(81);\n\n      var EventManager_1 = __webpack_require__(304);\n\n      var Model_1 = __webpack_require__(59);\n\n      var Selection_1 = __webpack_require__(333);\n\n      var History_1 = __webpack_require__(336);\n\n      var BarManager_1 = __webpack_require__(337);\n\n      var RenderManager_1 = __webpack_require__(338);\n\n      var ShapeDescriptionManager_1 = __webpack_require__(91);\n\n      var DocumentDataSource_1 = __webpack_require__(346);\n\n      var Settings_1 = __webpack_require__(27);\n\n      var ModelOperationSettings_1 = __webpack_require__(16);\n\n      var ViewController_1 = __webpack_require__(351);\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var ToolboxManager_1 = __webpack_require__(352);\n\n      var Utils_1 = __webpack_require__(3);\n\n      var ApiController_1 = __webpack_require__(355);\n\n      var ImageCache_1 = __webpack_require__(45);\n\n      var PermissionsProvider_1 = __webpack_require__(356);\n\n      var ConnectorRoutingModel_1 = __webpack_require__(370);\n\n      var TextMeasurer_1 = __webpack_require__(77);\n\n      var Connector_1 = __webpack_require__(7);\n\n      var DataLayoutParameters_1 = __webpack_require__(103);\n\n      var ReloadContentParameters_1 = __webpack_require__(381);\n\n      var Utils_2 = __webpack_require__(18);\n\n      var DiagramControl =\n      /** @class */\n      function () {\n        function DiagramControl() {\n          this.updateLockCount = 0;\n          this.shouldUpdateItemsByModel = false;\n          this.reloadContentNeeded = false;\n          this.reloadContentParameters = new ReloadContentParameters_1.ReloadContentParameters();\n          this.reloadContentByExternalChangesParameters = new ReloadContentParameters_1.ReloadContentParameters();\n          this.settings = new Settings_1.DiagramSettings();\n          this.shapeDescriptionManager = new ShapeDescriptionManager_1.ShapeDescriptionManager();\n          this.shapeDescriptionManager.onShapeDecriptionChanged.add(this);\n          this.model = new Model_1.DiagramModel();\n          this.selection = new Selection_1.Selection(this.model);\n          this.onNativeAction = new Utils_1.EventDispatcher();\n          this.apiController = new ApiController_1.ApiController(this.onNativeAction, this.selection, this.model);\n          this.permissionsProvider = new PermissionsProvider_1.PermissionsProvider(this.apiController);\n          this.permissionsProvider.onRequestOperation.add(this);\n          this.routingModel = new ConnectorRoutingModel_1.ConnectorRoutingModel();\n          this.modelManipulator = new ModelManipulator_1.ModelManipulator(this.model, this.routingModel, this.permissionsProvider);\n          this.modelManipulator.onModelChanged.add(this.permissionsProvider);\n          this.history = new History_1.History(this.modelManipulator);\n          this.barManager = new BarManager_1.BarManager(this);\n          this.view = new ViewController_1.ViewController(this.settings, this.barManager);\n          this.commandManager = new CommandManager_1.CommandManager(this);\n          this.eventManager = new EventManager_1.EventManager(this);\n          this.settings.onReadOnlyChanged.add(this.eventManager.mouseHandler);\n          this.settings.onReadOnlyChanged.add(this.eventManager.visualizersManager);\n          this.selection.onChanged.add(this.barManager);\n          this.selection.onChanged.add(this.apiController);\n          this.selection.onChanged.add(this.permissionsProvider);\n          this.modelManipulator.commitItemsCreateChanges();\n          this.history.onChanged.add(this);\n          this.toolboxManager = new ToolboxManager_1.ToolboxManager(this.shapeDescriptionManager);\n          this.settings.onConnectorRoutingModeChanged.add(this.routingModel);\n          ImageCache_1.ImageCache.instance.onReadyStateChanged.add(this);\n        }\n\n        Object.defineProperty(DiagramControl.prototype, \"operationSettings\", {\n          get: function get() {\n            return this.permissionsProvider.operationSettings;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        DiagramControl.prototype.cleanMarkup = function (removeElement) {\n          removeElement = removeElement || function (element) {\n            Utils_2.RenderUtils.removeElement(element);\n          };\n\n          this.toolboxManager.clean(removeElement);\n          this.barManager.clean();\n\n          if (this.render) {\n            this.settings.onZoomChanged.remove(this.render.view);\n            this.settings.onViewChanged.remove(this.render.page);\n            this.settings.onViewChanged.remove(this.render.view);\n            this.settings.onReadOnlyChanged.remove(this.render);\n            this.settings.onReadOnlyChanged.remove(this.render.selection);\n            this.eventManager.onTextInputOperation.remove(this.render.input);\n            this.eventManager.onTextInputOperation.remove(this.render.items);\n            this.eventManager.onTextInputOperation.remove(this.render.selection);\n            this.eventManager.onMouseOperation.remove(this.render.items);\n            this.eventManager.onMouseOperation.remove(this.render.selection);\n            this.eventManager.onMouseOperation.remove(this.render.view);\n            this.eventManager.onMouseOperation.remove(this.render);\n            this.eventManager.onVisualizersUpdate.remove(this.render.selection);\n            this.modelManipulator.onModelSizeChanged.remove(this.render.view);\n            this.modelManipulator.onModelSizeChanged.remove(this.render.page);\n            this.modelManipulator.onModelChanged.remove(this.render.items);\n            this.modelManipulator.onModelChanged.remove(this.render.page);\n            this.modelManipulator.onModelChanged.remove(this.render.selection);\n            this.selection.onChanged.remove(this.render.selection);\n            this.selection.onChanged.remove(this.render.items);\n            this.render.clean(removeElement);\n            this.render = undefined;\n          }\n        };\n\n        DiagramControl.prototype.createDocument = function (parent, scrollView) {\n          if (!this.measurer) this.initMeasurer(parent);\n          if (this.render) this.render.replaceParent(parent, scrollView);else {\n            this.render = new RenderManager_1.RenderManager(parent, this.eventManager, this.measurer, {\n              pageColor: this.model.pageColor,\n              modelSize: this.model.size,\n              pageLandscape: this.model.pageLandscape,\n              pageSize: this.model.pageSize,\n              simpleView: this.settings.simpleView,\n              readOnly: this.settings.readOnly,\n              contextMenuEnabled: this.settings.contextMenuEnabled,\n              gridSize: this.settings.gridSize,\n              gridVisible: this.settings.showGrid,\n              zoomLevel: this.settings.zoomLevel,\n              autoZoom: this.settings.autoZoom,\n              rectangle: this.model.getRectangle(true)\n            }, scrollView);\n            this.settings.onZoomChanged.add(this.render.view);\n            this.settings.onViewChanged.add(this.render.page);\n            this.settings.onViewChanged.add(this.render.view);\n            this.settings.onReadOnlyChanged.add(this.render);\n            this.settings.onReadOnlyChanged.add(this.render.selection);\n            this.eventManager.onTextInputOperation.add(this.render.input);\n            this.eventManager.onTextInputOperation.add(this.render.items);\n            this.eventManager.onTextInputOperation.add(this.render.selection);\n            this.eventManager.onTextInputOperation.add(this);\n            this.eventManager.onMouseOperation.add(this.render.items);\n            this.eventManager.onMouseOperation.add(this.render.selection);\n            this.eventManager.onMouseOperation.add(this.render.view);\n            this.eventManager.onMouseOperation.add(this.render);\n            this.eventManager.onVisualizersUpdate.add(this.render.selection);\n            this.modelManipulator.onModelSizeChanged.add(this.render.view);\n            this.modelManipulator.onModelSizeChanged.add(this.render.page);\n            this.modelManipulator.onModelChanged.add(this.render.items);\n            this.modelManipulator.onModelChanged.add(this.render.page);\n            this.modelManipulator.onModelChanged.add(this.render.selection);\n            this.selection.onChanged.add(this.render.selection);\n            this.selection.onChanged.add(this.render.items);\n            this.render.update(false);\n            this.render.onNewModel(this.model.items);\n            this.modelManipulator.commitItemsCreateChanges();\n            this.view.initialize(this.render.view);\n            this.selection.raiseSelectionChanged();\n          }\n        };\n\n        DiagramControl.prototype.createToolbox = function (parent, renderAsText, shapes, options) {\n          var toolbox = this.toolboxManager.create(parent, this.settings.readOnly, true, renderAsText, shapes, this.getToolboxAllowedShapeTypes.bind(this), options);\n          this.settings.onReadOnlyChanged.add(toolbox);\n          toolbox.onDragOperation.add(this);\n          toolbox.onDragOperation.add(this.apiController);\n          this.eventManager.registerToolbox(toolbox);\n        };\n\n        DiagramControl.prototype.createContextToolbox = function (parent, renderAsText, shapes, options, onClick) {\n          if (this.contextToolbox) this.cleanContextToolbox(parent);\n          this.contextToolbox = this.toolboxManager.create(parent, this.settings.readOnly, false, renderAsText, shapes, this.getToolboxAllowedShapeTypes.bind(this), options);\n          this.contextToolbox.onClickOperation.add(this);\n          this.contextToolboxOnClick = onClick;\n        };\n\n        DiagramControl.prototype.getToolboxAllowedShapeTypes = function (shapeTypes) {\n          var _this = this;\n\n          var allowedShapeTypes = [];\n          this.permissionsProvider.beginUpdateUI();\n          shapeTypes.forEach(function (shapeType) {\n            if (_this.permissionsProvider.canAddShapeFromToolbox(shapeType)) allowedShapeTypes.push(shapeType);\n          });\n          this.permissionsProvider.endUpdateUI();\n          return allowedShapeTypes;\n        };\n\n        DiagramControl.prototype.cleanContextToolbox = function (parent) {\n          if (this.contextToolbox) {\n            this.toolboxManager.clean(undefined, this.contextToolbox);\n            this.contextToolbox = undefined;\n          }\n        };\n\n        DiagramControl.prototype.refreshToolbox = function (toolboxes) {\n          this.permissionsProvider.clearCache(ModelOperationSettings_1.DiagramModelOperation.AddShapeFromToolbox);\n          this.toolboxManager.refresh(toolboxes);\n        };\n\n        DiagramControl.prototype.applyToolboxFilter = function (shapeSubstring, toolboxes) {\n          return this.toolboxManager.applyFilter(shapeSubstring, toolboxes);\n        };\n\n        DiagramControl.prototype.notifyToolboxClick = function (shapeType) {\n          if (this.contextToolboxOnClick) this.contextToolboxOnClick(shapeType);\n        };\n\n        DiagramControl.prototype.initMeasurer = function (parent) {\n          this.measurer = new TextMeasurer_1.TextMeasurer(parent);\n        };\n\n        DiagramControl.prototype.updateLayout = function (resetScroll) {\n          if (resetScroll === void 0) {\n            resetScroll = false;\n          }\n\n          this.render && this.render.update(!resetScroll);\n        };\n\n        DiagramControl.prototype.captureFocus = function () {\n          this.render && this.render.input.captureFocus();\n        };\n\n        DiagramControl.prototype.isFocused = function () {\n          return !this.render || this.render.input.isFocused();\n        };\n\n        DiagramControl.prototype.registerBar = function (bar) {\n          this.barManager.registerBar(bar);\n        };\n\n        DiagramControl.prototype.updateBarItemsState = function (bar, queryCommands) {\n          this.barManager.updateBarItemsState(bar, queryCommands);\n        };\n\n        DiagramControl.prototype.getCommand = function (key) {\n          return this.commandManager.getCommand(key);\n        };\n\n        DiagramControl.prototype.getNativeItemByKey = function (key) {\n          var item = this.model.findItem(key);\n          return item && this.apiController.createNativeItem(item);\n        };\n\n        DiagramControl.prototype.getNativeItemByDataKey = function (dataKey) {\n          var item = this.model.findItemByDataKey(dataKey);\n          return item && this.apiController.createNativeItem(item);\n        };\n\n        DiagramControl.prototype.getNativeItems = function () {\n          var _this = this;\n\n          return this.model.items.map(function (item) {\n            return _this.apiController.createNativeItem(item);\n          });\n        };\n\n        DiagramControl.prototype.getNativeSelectedItems = function () {\n          var _this = this;\n\n          return this.selection.getKeys().map(function (key) {\n            return _this.apiController.createNativeItem(_this.model.findItem(key));\n          });\n        };\n\n        DiagramControl.prototype.setSelectedItems = function (keys) {\n          this.selection.set(keys);\n        };\n\n        DiagramControl.prototype.scrollToItems = function (keys) {\n          var _this = this;\n\n          var rectangle = Utils_1.GeometryUtils.getCommonRectangle(keys.map(function (key) {\n            return _this.model.findItem(key).rectangle;\n          }));\n          this.view.scrollIntoView(rectangle);\n        };\n\n        DiagramControl.prototype.setInitialStyleProperties = function (style) {\n          this.selection.inputPosition.setInitialStyleProperties(style);\n        };\n\n        DiagramControl.prototype.setInitialTextStyleProperties = function (style) {\n          this.selection.inputPosition.setInitialTextStyleProperties(style);\n        };\n\n        DiagramControl.prototype.setInitialConnectorProperties = function (properties) {\n          this.selection.inputPosition.setInitialConnectorProperties(properties);\n        };\n\n        DiagramControl.prototype.addCustomShapes = function (shapes) {\n          var _this = this;\n\n          shapes.forEach(function (shape) {\n            shape.apiController = _this.apiController;\n            if (shape.defaultWidth) shape.defaultWidth = ModelUtils_1.ModelUtils.getTwipsValue(_this.model.units, shape.defaultWidth);\n            if (shape.defaultHeight) shape.defaultHeight = ModelUtils_1.ModelUtils.getTwipsValue(_this.model.units, shape.defaultHeight);\n            if (shape.minWidth) shape.minWidth = ModelUtils_1.ModelUtils.getTwipsValue(_this.model.units, shape.minWidth);\n            if (shape.minHeight) shape.minHeight = ModelUtils_1.ModelUtils.getTwipsValue(_this.model.units, shape.minHeight);\n            if (shape.maxWidth) shape.maxWidth = ModelUtils_1.ModelUtils.getTwipsValue(_this.model.units, shape.maxWidth);\n            if (shape.maxHeight) shape.maxHeight = ModelUtils_1.ModelUtils.getTwipsValue(_this.model.units, shape.maxHeight);\n\n            _this.shapeDescriptionManager.registerCustomShape(shape);\n          });\n        };\n\n        DiagramControl.prototype.removeCustomShapes = function (shapeTypes) {\n          var _this = this;\n\n          shapeTypes.forEach(function (shapeType) {\n            _this.shapeDescriptionManager.unregisterCustomShape(shapeType);\n          });\n        };\n\n        DiagramControl.prototype.importModel = function (model) {\n          this.model = model;\n          this.model.initializeKeyCounter();\n          this.apiController.model = model;\n          this.onImportData();\n        };\n\n        DiagramControl.prototype.importItemsData = function () {\n          this.model.iterateItems(function (item) {\n            if (item instanceof Connector_1.Connector) item.invalidateRenderPoints();\n          });\n          this.onImportData();\n        };\n\n        DiagramControl.prototype.onImportData = function () {\n          if (this.render) {\n            this.render.clear();\n            this.render.onNewModel(this.model.items);\n          }\n\n          this.permissionsProvider.clearCache();\n          this.selection.initialize(this.model);\n          this.modelManipulator.initialize(this.model, this.routingModel);\n          this.history.clear();\n          this.eventManager.initialize();\n          this.modelManipulator.commitPageChanges();\n          this.modelManipulator.commitItemsCreateChanges();\n          this.notifyHistoryChanged();\n        };\n\n        DiagramControl.prototype.createDocumentDataSource = function (nodeDataSource, edgeDataSource, parameters, nodeDataImporter, edgeDataImporter) {\n          this.documentDataSource = new DocumentDataSource_1.DocumentDataSource(this, nodeDataSource, edgeDataSource, parameters, nodeDataImporter, edgeDataImporter);\n          this.apiController.setDataSource(this.documentDataSource);\n          return this.documentDataSource;\n        };\n\n        DiagramControl.prototype.deleteDocumentDataSource = function () {\n          this.apiController.setDataSource(null);\n          delete this.documentDataSource;\n        };\n\n        DiagramControl.prototype.applyShapeSizeSettings = function (settings) {\n          this.settings.applyShapeSizeSettings(settings, this.model.units);\n        };\n\n        DiagramControl.prototype.applyOperationSettings = function (settings) {\n          this.permissionsProvider.operationSettings.applySettings(settings);\n        };\n\n        DiagramControl.prototype.beginUpdateCanvas = function () {\n          if (this.render) {\n            this.render.items.beginUpdate();\n            this.render.selection.beginUpdate();\n          }\n        };\n\n        DiagramControl.prototype.endUpdateCanvas = function () {\n          if (this.render) {\n            this.render.items.endUpdate();\n            this.render.selection.endUpdate();\n          }\n        };\n\n        DiagramControl.prototype.beginUpdate = function () {\n          this.barManager.beginUpdate();\n          this.apiController.beginUpdate();\n          this.eventManager.beginUpdate();\n        };\n\n        DiagramControl.prototype.endUpdate = function () {\n          this.barManager.endUpdate();\n          this.apiController.endUpdate();\n          this.eventManager.endUpdate();\n        }; // IDataChangesListener\n\n\n        DiagramControl.prototype.notifyEdgeInserted = function (data, callback, errorCallback) {\n          if (this.onEdgeInserted) this.onEdgeInserted(data, callback, errorCallback);else callback(data);\n        };\n\n        DiagramControl.prototype.notifyEdgeUpdated = function (key, data, callback, errorCallback) {\n          if (this.onEdgeUpdated) this.onEdgeUpdated(key, data, callback, errorCallback);else callback(key, data);\n        };\n\n        DiagramControl.prototype.notifyEdgeRemoved = function (key, data, callback, errorCallback) {\n          if (this.onEdgeUpdated) this.onEdgeRemoved(key, data, callback, errorCallback);else callback(key, data);\n        };\n\n        DiagramControl.prototype.notifyNodeInserted = function (data, callback, errorCallback) {\n          if (this.onNodeInserted) this.onNodeInserted(data, callback, errorCallback);else callback(data);\n        };\n\n        DiagramControl.prototype.notifyNodeUpdated = function (key, data, callback, errorCallback) {\n          if (this.onNodeUpdated) this.onNodeUpdated(key, data, callback, errorCallback);else callback(key, data);\n        };\n\n        DiagramControl.prototype.notifyNodeRemoved = function (key, data, callback, errorCallback) {\n          if (this.onNodeRemoved) this.onNodeRemoved(key, data, callback, errorCallback);else callback(key, data);\n        };\n\n        DiagramControl.prototype.reloadContent = function (dataKey, getData, layoutParameters, isExternalChanges) {\n          if (!this.documentDataSource) return;\n          if (this.isChangesLocked()) this.reloadContentNeeded = true;\n          var addNewHistoryItem = isExternalChanges === true || isExternalChanges === undefined && !this.reloadContentNeeded;\n          var reloadContentParameters = addNewHistoryItem ? this.reloadContentByExternalChangesParameters : this.reloadContentParameters;\n          reloadContentParameters.add(dataKey, getData, layoutParameters);\n\n          if (!this.isChangesLocked()) {\n            this.reloadContentCore(reloadContentParameters, addNewHistoryItem);\n            this.barManager.updateItemsState();\n          }\n        };\n\n        DiagramControl.prototype.reloadContentCore = function (parameters, addNewHistoryItem) {\n          var _this = this;\n\n          var data = parameters.getData && parameters.getData();\n          var changes = this.documentDataSource.refetchData(data && data.nodeDataSource, data && data.edgeDataSource);\n          this.beginUpdateCanvas();\n          this.permissionsProvider.lockPermissions();\n          this.documentDataSource.updateModelItems(this.history, this.model, this.shapeDescriptionManager, this.selection, new DataLayoutParameters_1.DataLayoutParameters(this.settings, parameters.layoutParameters), addNewHistoryItem, parameters.dataKeys, function (item) {\n            _this.modelManipulator.commitItemUpdateChanges(item);\n          }, changes, this.settings.snapToGrid, this.settings.gridSize, this.measurer);\n          this.permissionsProvider.unlockPermissions();\n          this.endUpdateCanvas();\n          parameters.clear();\n        };\n\n        DiagramControl.prototype.notifyHistoryChanged = function () {\n          if (this.documentDataSource) {\n            this.shouldUpdateItemsByModel = true;\n            if (!this.settings.readOnly) this.notifyDataChanges();\n          } else this.raiseOnChanged();\n        };\n\n        DiagramControl.prototype.notifyToolboxDragStart = function () {\n          if (this.onToolboxDragStart) this.onToolboxDragStart();\n        };\n\n        DiagramControl.prototype.notifyToolboxDragEnd = function () {\n          if (this.onToolboxDragEnd) this.onToolboxDragEnd();\n        };\n\n        DiagramControl.prototype.notifyTextInputStart = function (item, text, position, size) {\n          if (this.onTextInputStart) this.onTextInputStart();\n        };\n\n        DiagramControl.prototype.notifyTextInputEnd = function (item) {\n          if (this.onTextInputEnd) this.onTextInputEnd();\n        };\n\n        DiagramControl.prototype.notifyTextInputPermissionsCheck = function (item, allowed) {};\n\n        DiagramControl.prototype.notifyToggleFullscreen = function (value) {\n          if (this.onToggleFullscreen) this.onToggleFullscreen(value);\n        };\n\n        DiagramControl.prototype.notifyShowContextMenu = function (eventPoint, modelPoint) {\n          if (this.onShowContextMenu && this.render) {\n            var selection = void 0;\n            var selectedItems = this.selection.getSelectedItems(true);\n\n            if (selectedItems.length > 0) {\n              var rect = ModelUtils_1.ModelUtils.createRectangle(this.selection.getSelectedItems(true));\n              var pos = this.render.getEventPointByModelPoint(rect.createPosition());\n              var size = this.render.view.getAbsoluteSize(rect.createSize());\n              selection = {\n                x: pos.x,\n                y: pos.y,\n                width: size.width,\n                height: size.height\n              };\n            }\n\n            if (eventPoint) {\n              this.contextMenuPosition = new point_1.Point(eventPoint.x, eventPoint.y);\n              this.onShowContextMenu(eventPoint.x, eventPoint.y, selection);\n            } else if (modelPoint) {\n              var point = this.render.getEventPointByModelPoint(modelPoint);\n              this.contextMenuPosition = point.clone();\n              this.onShowContextMenu(point.x, point.y, selection);\n            }\n          }\n        };\n\n        DiagramControl.prototype.notifyHideContextMenu = function () {\n          if (this.onHideContextMenu && this.render) this.onHideContextMenu();\n        };\n\n        DiagramControl.prototype.notifyShowContextToolbox = function (modelPoint, getPositionToInsertShapeTo, side, category, callback) {\n          if (this.onShowContextToolbox && this.render) {\n            var point = this.render.getEventPointByModelPoint(modelPoint);\n            this.onShowContextToolbox(point.x, point.y, side, category, callback);\n          }\n        };\n\n        DiagramControl.prototype.notifyHideContextToolbox = function () {\n          if (this.onHideContextToolbox && this.render) this.onHideContextToolbox();\n        };\n\n        DiagramControl.prototype.notifyShapeDescriptionChanged = function (description) {\n          this.modelManipulator.updateShapeDescription(description);\n        };\n\n        DiagramControl.prototype.notifyImageCacheReadyStateChanged = function (ready) {\n          this.barManager.updateItemsState();\n        };\n\n        DiagramControl.prototype.notifyRequestOperation = function (operation, args) {\n          if (this.requestOperationByDataSource(operation, args)) return;\n          if (this.onRequestOperation) this.onRequestOperation(operation, args);\n        };\n\n        DiagramControl.prototype.requestOperationByDataSource = function (operation, args) {\n          if (!(this.documentDataSource && (this.documentDataSource.IsNodeParentIdMode() || this.documentDataSource.IsNodeItemsMode()))) return false;\n\n          if (operation === ModelOperationSettings_1.DiagramModelOperation.ChangeConnection) {\n            var e = args;\n            var shape = e.shape && this.model.findItem(e.shape.id);\n            var connector = e.connector && this.model.findItem(e.connector.id);\n            if (!(shape && connector)) return; // shape can have only one incoming connection\n\n            if (e.position === Connector_1.ConnectorPosition.End) for (var i = 0; i < shape.attachedConnectors.length; i++) {\n              var attachedConnector = shape.attachedConnectors[i];\n\n              if (attachedConnector !== connector && attachedConnector.endItem && attachedConnector.endItem === shape) {\n                e.allowed = false;\n                break;\n              }\n            } // circular reference is not allowed\n\n            if (e.allowed && connector.beginItem && connector.endItem && this.isShapeParent(connector.endItem, connector.beginItem)) e.allowed = false;\n          }\n\n          return !args.allowed;\n        };\n\n        DiagramControl.prototype.isShapeParent = function (parentShape, shape) {\n          if (parentShape === shape) return true;\n\n          for (var i = 0; i < parentShape.attachedConnectors.length; i++) {\n            var attachedConnector = parentShape.attachedConnectors[i];\n\n            if (attachedConnector.beginItem === parentShape && attachedConnector.endItem) {\n              var childShape = attachedConnector.endItem;\n              if (childShape === shape || this.isShapeParent(childShape, shape)) return true;\n            }\n          }\n\n          return false;\n        };\n\n        DiagramControl.prototype.isChangesLocked = function () {\n          return this.updateLockCount > 0;\n        };\n\n        DiagramControl.prototype.beginChangesNotification = function () {\n          if (!this.isChangesLocked()) if (this.changesLockChanged) this.changesLockChanged(true);\n          this.updateLockCount++;\n        };\n\n        DiagramControl.prototype.endChangesNotification = function (preventNotifyReloadContent) {\n          var _this = this;\n\n          this.updateLockCount--;\n\n          if (!this.isChangesLocked()) {\n            this.changesLockChanged(false);\n            if (!preventNotifyReloadContent) setTimeout(function () {\n              _this.notifyReloadContent();\n\n              _this.notifyDataChanges();\n            }, 0);\n          }\n        };\n\n        DiagramControl.prototype.changesLockChanged = function (locked) {\n          if (locked) this.lockedReadOnly = this.settings.readOnly;else locked = this.lockedReadOnly;\n          this.commandManager.getCommand(CommandManager_1.DiagramCommand.ToggleReadOnly).execute(locked);\n        };\n\n        DiagramControl.prototype.notifyDataChanges = function () {\n          if (this.isChangesLocked()) return;\n\n          if (this.shouldUpdateItemsByModel) {\n            this.documentDataSource.updateItemsByModel(this.model);\n            this.shouldUpdateItemsByModel = false;\n          }\n\n          this.raiseOnChanged();\n        };\n\n        DiagramControl.prototype.notifyReloadContent = function () {\n          if (this.reloadContentNeeded) {\n            if (!this.reloadContentParameters.empty) this.reloadContentCore(this.reloadContentParameters, false);\n            if (!this.reloadContentByExternalChangesParameters.empty) this.reloadContentCore(this.reloadContentByExternalChangesParameters, true);\n            this.reloadContentNeeded = false;\n          }\n        };\n\n        DiagramControl.prototype.raiseOnChanged = function () {\n          if (this.onChanged) this.onChanged();\n        };\n\n        return DiagramControl;\n      }();\n\n      exports.DiagramControl = DiagramControl;\n      /***/\n    },\n    /* 303 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ModelManipulator = void 0;\n\n      var offsets_1 = __webpack_require__(87);\n\n      var size_1 = __webpack_require__(2);\n\n      var Diagnostics_1 = __webpack_require__(57);\n\n      var ImageCache_1 = __webpack_require__(45);\n\n      var ImageLoader_1 = __webpack_require__(131);\n\n      var ModelOperationSettings_1 = __webpack_require__(16);\n\n      var Utils_1 = __webpack_require__(3);\n\n      var Connector_1 = __webpack_require__(7);\n\n      var ModelChange_1 = __webpack_require__(99);\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var ModelManipulator =\n      /** @class */\n      function () {\n        function ModelManipulator(model, routingModel, permissionsProvider) {\n          this.onModelChanged = new Utils_1.EventDispatcher();\n          this.onModelSizeChanged = new Utils_1.EventDispatcher();\n          this.initializeCore(model, routingModel);\n          this.permissionsProvider = permissionsProvider;\n          this.imageLoader = new ImageLoader_1.ImageLoader(this.updateShapeImage.bind(this));\n        }\n\n        ModelManipulator.prototype.initialize = function (model, routingModel) {\n          this.initializeCore(model, routingModel);\n          this.model.loadAllImages(this.imageLoader);\n          this.updateModelSize();\n        };\n\n        ModelManipulator.prototype.initializeCore = function (model, routingModel) {\n          this.model = model;\n          this.routingModel = routingModel;\n          if (this.routingModel) this.routingModel.initialize(model);\n        };\n\n        ModelManipulator.prototype.commitPageChanges = function () {\n          this.raisePageSizeChanged(this.model.pageSize.clone(), this.model.pageLandscape);\n          this.raiseModelSizeChanged(this.model.size.clone());\n          this.raisePageColorChanged(this.model.pageColor);\n          this.raiseModelRectangleChanged(ModelUtils_1.ModelUtils.createRectangle(this.model.items));\n        };\n\n        ModelManipulator.prototype.commitItemsCreateChanges = function () {\n          Diagnostics_1.Diagnostics.timer(\"new model: model changes\");\n          this.commitItemsChangesCore(ModelChange_1.ItemChangeType.Create, this.model.items);\n          Diagnostics_1.Diagnostics.endTimer();\n        };\n\n        ModelManipulator.prototype.commitItemUpdateChanges = function (item) {\n          this.commitItemsChangesCore(ModelChange_1.ItemChangeType.UpdateStructure, [item]);\n        };\n\n        ModelManipulator.prototype.commitItemsChangesCore = function (changeType, items) {\n          var changes = [];\n          items.forEach(function (item) {\n            changes.push(new ModelChange_1.ItemChange(item, changeType));\n          });\n          if (changes.length) this.raiseModelChanged(changes);\n        }; // Items\n\n\n        ModelManipulator.prototype.insertToContainer = function (item, container) {\n          if (item.container && container && item.container.key !== container.key) throw Error(\"To insert an item to a container it's necessary to remove it from the current container.\");\n\n          if (container) {\n            container.children.push(item);\n            item.container = container;\n            this.raiseModelChanged([new ModelChange_1.ItemChange(item, ModelChange_1.ItemChangeType.Update)]);\n          }\n        };\n\n        ModelManipulator.prototype.removeFromContainer = function (item) {\n          if (item.container) {\n            var index = item.container.children.indexOf(item);\n            item.container.children.splice(index, 1);\n            item.container = undefined;\n            this.raiseModelChanged([new ModelChange_1.ItemChange(item, ModelChange_1.ItemChangeType.Update)]);\n          }\n        };\n\n        ModelManipulator.prototype.changeStyle = function (item, styleProperty, styleValue) {\n          this.changeStyleCore(item, item.style, styleProperty, styleValue);\n        };\n\n        ModelManipulator.prototype.changeStyleText = function (item, styleProperty, styleValue) {\n          this.changeStyleCore(item, item.styleText, styleProperty, styleValue);\n        }; // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\n\n        ModelManipulator.prototype.changeStyleCore = function (item, styleObj, styleProperty, styleValue) {\n          if (styleValue !== undefined) styleObj[styleProperty] = styleValue;else delete styleObj[styleProperty];\n          this.raiseModelChanged([new ModelChange_1.ItemChange(item, ModelChange_1.ItemChangeType.UpdateProperties)]);\n        };\n\n        ModelManipulator.prototype.changeZIndex = function (item, zIndex) {\n          item.zIndex = zIndex;\n          this.raiseModelChanged([new ModelChange_1.ItemChange(item, ModelChange_1.ItemChangeType.Update)]);\n        };\n\n        ModelManipulator.prototype.changeLocked = function (item, locked) {\n          item.locked = locked;\n          this.raiseModelChanged([new ModelChange_1.ItemChange(item, ModelChange_1.ItemChangeType.UpdateClassName)]);\n        }; // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\n\n        ModelManipulator.prototype.changeCustomData = function (item, data) {\n          item.customData = Utils_1.ObjectUtils.cloneObject(data);\n          this.raiseModelChanged([new ModelChange_1.ItemChange(item, ModelChange_1.ItemChangeType.UpdateStructure)]);\n        };\n\n        ModelManipulator.prototype.addShape = function (shape, key) {\n          if (shape.attachedConnectors.length) throw Error(\"A creating shape should not contain existing connectors.\");\n          shape.key = key !== undefined ? key : this.model.getNextKey();\n          return this.insertShape(shape);\n        };\n\n        ModelManipulator.prototype.insertShape = function (shape) {\n          this.model.pushItem(shape);\n          var allowed = this.permissionsProvider.canAddItems([shape]);\n          this.raiseModelChanged([new ModelChange_1.ItemChange(shape, ModelChange_1.ItemChangeType.Create, allowed)]);\n          this.model.loadAllImages(this.imageLoader);\n          return shape;\n        };\n\n        ModelManipulator.prototype.resizeShape = function (shape, position, size) {\n          shape.position = position;\n          shape.size = size;\n          var allowed = this.permissionsProvider.isStoredPermissionsGranted();\n          var resizeInteractingItem = this.getInteractingItem(shape, ModelOperationSettings_1.DiagramModelOperation.ResizeShape);\n\n          if (resizeInteractingItem) {\n            var oldSize = resizeInteractingItem.size.clone();\n            var size_2 = shape.size.clone();\n            if (!size_2.equals(oldSize)) allowed = this.permissionsProvider.canResizeShapes([{\n              shape: shape,\n              size: size_2,\n              oldSize: oldSize\n            }]);\n          }\n\n          var moveInteractingItem = this.getInteractingItem(shape, ModelOperationSettings_1.DiagramModelOperation.MoveShape);\n\n          if (moveInteractingItem) {\n            var oldPosition = moveInteractingItem.position.clone();\n            var position_1 = shape.position.clone();\n            if (!position_1.equals(oldPosition)) allowed = this.permissionsProvider.canMoveShapes([{\n              shape: shape,\n              position: position_1,\n              oldPosition: oldPosition\n            }]);\n          }\n\n          this.raiseModelChanged([new ModelChange_1.ItemChange(shape, ModelChange_1.ItemChangeType.UpdateProperties, allowed)]);\n        };\n\n        ModelManipulator.prototype.moveShape = function (shape, position) {\n          shape.position = position;\n          var allowed = this.permissionsProvider.isStoredPermissionsGranted();\n          var addInteractingItem = this.getInteractingItem(shape, ModelOperationSettings_1.DiagramModelOperation.AddShape);\n          if (addInteractingItem) allowed = this.permissionsProvider.canAddItems([shape]);\n          var moveInteractingItem = this.getInteractingItem(shape, ModelOperationSettings_1.DiagramModelOperation.MoveShape);\n\n          if (moveInteractingItem) {\n            var oldPosition = moveInteractingItem.position.clone();\n            var position_2 = shape.position.clone();\n            if (!position_2.equals(oldPosition)) allowed = this.permissionsProvider.canMoveShapes([{\n              shape: shape,\n              position: position_2,\n              oldPosition: oldPosition\n            }]);\n          }\n\n          this.raiseModelChanged([new ModelChange_1.ItemChange(shape, ModelChange_1.ItemChangeType.UpdateProperties, allowed)]);\n        };\n\n        ModelManipulator.prototype.changeShapeParameters = function (shape, parameters) {\n          shape.parameters.forEach(function (p) {\n            var parameter = parameters.get(p.key);\n            if (parameter) p.value = parameter.value;\n          });\n          this.raiseModelChanged([new ModelChange_1.ItemChange(shape, ModelChange_1.ItemChangeType.UpdateProperties)]);\n        };\n\n        ModelManipulator.prototype.changeShapeText = function (shape, text) {\n          shape.text = text;\n          this.raiseModelChanged([new ModelChange_1.ItemChange(shape, ModelChange_1.ItemChangeType.UpdateStructure)]);\n        };\n\n        ModelManipulator.prototype.changeShapeImage = function (shape, image) {\n          shape.image = image;\n          var cachedImage = ImageCache_1.ImageCache.instance.createUnloadedInfoByShapeImageInfo(image);\n          this.imageLoader.load(cachedImage);\n          this.raiseModelChanged([new ModelChange_1.ItemChange(shape, ModelChange_1.ItemChangeType.UpdateStructure)]);\n        };\n\n        ModelManipulator.prototype.changeShapeExpanded = function (shape, expanded) {\n          shape.expanded = expanded;\n          shape.toggleExpandedSize();\n          this.raiseModelChanged([new ModelChange_1.ItemChange(shape, ModelChange_1.ItemChangeType.UpdateStructure)]);\n        };\n\n        ModelManipulator.prototype.deleteShape = function (shape, allowed) {\n          if (shape.attachedConnectors.length) throw Error(\"A removing shape should not contain existing connectors.\");\n          this.removeShape(shape, allowed);\n        };\n\n        ModelManipulator.prototype.removeShape = function (shape, allowed) {\n          this.model.removeItem(shape);\n          this.raiseModelChanged([new ModelChange_1.ItemChange(shape, ModelChange_1.ItemChangeType.Remove, allowed)]);\n        };\n\n        ModelManipulator.prototype.updateShapeImage = function (cacheImageInfo) {\n          if (!cacheImageInfo.imageUrl) return;\n          var shapes = this.model.findShapesByImageUrl(cacheImageInfo.imageUrl);\n          shapes.forEach(function (shape) {\n            if (cacheImageInfo.base64) shape.image.loadBase64Content(cacheImageInfo.base64);else shape.image.setUnableToLoadFlag();\n          });\n          this.commitItemsChangesCore(ModelChange_1.ItemChangeType.UpdateStructure, shapes);\n        };\n\n        ModelManipulator.prototype.updateShapeDescription = function (description) {\n          var shapes = this.model.findShapesByDescription(description);\n          this.commitItemsChangesCore(ModelChange_1.ItemChangeType.UpdateProperties, shapes);\n        }; // Connectors\n\n\n        ModelManipulator.prototype.addConnector = function (connector, key) {\n          if (connector.beginItem || connector.endItem) throw Error(\"Creating connector should not contain begin/end items\");\n          connector.key = key !== undefined ? key : this.model.getNextKey();\n          return this.insertConnector(connector);\n        };\n\n        ModelManipulator.prototype.insertConnector = function (connector) {\n          this.model.pushItem(connector);\n          connector.routingStrategy = this.routingModel.createStrategy(connector.properties.lineOption);\n          connector.invalidateRenderPoints();\n          var allowed = this.permissionsProvider.canAddItems([connector]);\n          this.raiseModelChanged([new ModelChange_1.ItemChange(connector, ModelChange_1.ItemChangeType.Create, allowed)]);\n          return connector;\n        };\n\n        ModelManipulator.prototype.deleteConnector = function (connector) {\n          if (connector.beginItem || connector.endItem) throw Error(\"Creating connector should not contain begin/end items\");\n          this.removeConnector(connector);\n        };\n\n        ModelManipulator.prototype.removeConnector = function (connector) {\n          this.model.removeItem(connector);\n          var allowed = this.permissionsProvider.canDeleteItems([connector]);\n          this.raiseModelChanged([new ModelChange_1.ItemChange(connector, ModelChange_1.ItemChangeType.Remove, allowed)]);\n        };\n\n        ModelManipulator.prototype.addDeleteConnectorPoint = function (connector, callBack) {\n          var oldConnectorPoints = this.getConnectorInteractingPoints(connector);\n          callBack(connector);\n          this.addDeleteConnectorPointCore(connector, oldConnectorPoints);\n        };\n\n        ModelManipulator.prototype.moveConnectorPoint = function (connector, pointIndex, callBack) {\n          callBack(connector);\n          this.moveConnectorPointCore(connector, pointIndex);\n        };\n\n        ModelManipulator.prototype.changeConnectorPoints = function (connector, callBack) {\n          var _this = this;\n\n          callBack(connector);\n          connector.points.forEach(function (_, i) {\n            return _this.moveConnectorPointCore(connector, i);\n          });\n        };\n\n        ModelManipulator.prototype.moveConnectorPointCore = function (connector, pointIndex) {\n          var interactingItem = this.getInteractingItem(connector);\n          var allowed = this.permissionsProvider.isStoredPermissionsGranted();\n\n          if (interactingItem) {\n            var changeConnectionPoints = 0 < pointIndex && pointIndex < connector.points.length - 1;\n            changeConnectionPoints = changeConnectionPoints || pointIndex === 0 && !connector.beginItem;\n            changeConnectionPoints = changeConnectionPoints || pointIndex === connector.points.length - 1 && !connector.endItem;\n\n            if (changeConnectionPoints) {\n              var oldConnectorPoints = interactingItem.points.map(function (p) {\n                return p.clone();\n              });\n              var newConnectorPoints = connector.points.map(function (p) {\n                return p.clone();\n              });\n              if (!Utils_1.GeometryUtils.arePointsEqual(oldConnectorPoints, newConnectorPoints)) allowed = this.permissionsProvider.canChangeConnectorPoints(connector, oldConnectorPoints, newConnectorPoints);\n            }\n          }\n\n          this.raiseModelChanged([new ModelChange_1.ItemChange(connector, ModelChange_1.ItemChangeType.UpdateProperties, allowed)]);\n        };\n\n        ModelManipulator.prototype.getConnectorInteractingPoints = function (connector) {\n          var interactingItem = this.getInteractingItem(connector);\n          return interactingItem ? interactingItem.points.map(function (p) {\n            return p.clone();\n          }) : connector.points.map(function (p) {\n            return p.clone();\n          });\n        };\n\n        ModelManipulator.prototype.addDeleteConnectorPointCore = function (connector, oldConnectorPoints) {\n          var allowed = this.permissionsProvider.isStoredPermissionsGranted();\n          var newConnectorPoints = connector.points.map(function (p) {\n            return p.clone();\n          });\n          if (!Utils_1.GeometryUtils.arePointsEqual(oldConnectorPoints, newConnectorPoints)) allowed = this.permissionsProvider.canChangeConnectorPoints(connector, oldConnectorPoints, newConnectorPoints);\n          this.raiseModelChanged([new ModelChange_1.ItemChange(connector, ModelChange_1.ItemChangeType.UpdateProperties, allowed)]);\n        };\n\n        ModelManipulator.prototype.addConnection = function (connector, item, connectionPointIndex, position) {\n          var existingItem = connector.getExtremeItem(position);\n          var existingConnectionPointIndex = connector.getExtremeConnectionPointIndex(position);\n          if (existingItem === item && existingConnectionPointIndex === connectionPointIndex) return;else if (existingItem) throw Error(\"Connector is already connected\");\n          item.attachedConnectors.push(connector);\n\n          if (position === Connector_1.ConnectorPosition.Begin) {\n            connector.beginItem = item;\n            connector.beginConnectionPointIndex = connectionPointIndex;\n          } else {\n            connector.endItem = item;\n            connector.endConnectionPointIndex = connectionPointIndex;\n          }\n\n          connector.invalidateRenderPoints();\n          var allowed = this.permissionsProvider.canChangeConnection(connector, item, undefined, position, connectionPointIndex);\n          this.raiseModelChanged([new ModelChange_1.ItemChange(connector, ModelChange_1.ItemChangeType.UpdateProperties, allowed)]);\n        };\n\n        ModelManipulator.prototype.setConnectionPointIndex = function (connector, connectionPointIndex, position) {\n          if (!connector.getExtremeItem(position)) throw Error(\"Connection should be connected\");\n          if (position === Connector_1.ConnectorPosition.Begin) connector.beginConnectionPointIndex = connectionPointIndex;else connector.endConnectionPointIndex = connectionPointIndex;\n          connector.invalidateRenderPoints();\n          var item = connector.getExtremeItem(position);\n          var allowed = this.permissionsProvider.canChangeConnection(connector, item, item, position, connectionPointIndex);\n          this.raiseModelChanged([new ModelChange_1.ItemChange(connector, ModelChange_1.ItemChangeType.UpdateProperties, allowed)]);\n        };\n\n        ModelManipulator.prototype.deleteConnection = function (connector, position) {\n          var item = connector.getExtremeItem(position);\n          if (!item) return;\n          item.attachedConnectors.splice(item.attachedConnectors.indexOf(connector), 1);\n\n          if (position === Connector_1.ConnectorPosition.Begin) {\n            connector.beginItem = null;\n            connector.beginConnectionPointIndex = -1;\n          } else {\n            connector.endItem = null;\n            connector.endConnectionPointIndex = -1;\n          }\n\n          connector.invalidateRenderPoints();\n          var allowed = this.permissionsProvider.canChangeConnection(connector, undefined, item, position, -1);\n          this.raiseModelChanged([new ModelChange_1.ItemChange(connector, ModelChange_1.ItemChangeType.UpdateProperties, allowed)]);\n        }; // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\n\n        ModelManipulator.prototype.changeConnectorProperty = function (connector, propertyName, value) {\n          connector.properties[propertyName] = value;\n          if (this.routingModel && propertyName === \"lineOption\") connector.routingStrategy = this.routingModel.createStrategy(connector.properties.lineOption);\n          connector.invalidateRenderPoints();\n          this.raiseModelChanged([new ModelChange_1.ItemChange(connector, ModelChange_1.ItemChangeType.UpdateProperties)]);\n        };\n\n        ModelManipulator.prototype.changeConnectorText = function (connector, text, position) {\n          connector.setText(text, position);\n          this.raiseModelChanged([new ModelChange_1.ItemChange(connector, ModelChange_1.ItemChangeType.UpdateStructure)]);\n        };\n\n        ModelManipulator.prototype.changeConnectorTextPosition = function (connector, position, newPosition) {\n          var text = connector.getText(position);\n          connector.setText(null, position);\n          connector.setText(text, newPosition);\n          this.raiseModelChanged([new ModelChange_1.ItemChange(connector, ModelChange_1.ItemChangeType.UpdateProperties)]);\n        }; // Model\n\n\n        ModelManipulator.prototype.changeModelSize = function (size, offset) {\n          this.model.size.width = size.width;\n          this.model.size.height = size.height;\n          this.raiseModelSizeChanged(this.model.size.clone(), offset);\n\n          if (offset.left || offset.top) {\n            this.model.snapStartPoint = this.model.snapStartPoint.clone().offset(offset.left, offset.top);\n            this.raiseSnapPointChange(this.model.snapStartPoint);\n          }\n        };\n\n        ModelManipulator.prototype.changePageSize = function (value) {\n          if (!this.model.pageSize.equals(value)) {\n            this.model.pageSize = value;\n            this.model.size = new size_1.Size(this.model.pageWidth, this.model.pageHeight);\n            this.raiseModelSizeChanged(this.model.size.clone());\n            this.raisePageSizeChanged(this.model.pageSize, this.model.pageLandscape);\n          }\n        };\n\n        ModelManipulator.prototype.changePageLandscape = function (value) {\n          if (this.model.pageLandscape !== value) {\n            this.model.pageLandscape = value;\n\n            if (this.model.pageSize.width !== this.model.pageSize.height) {\n              this.model.size = new size_1.Size(this.model.pageWidth, this.model.pageHeight);\n              this.raiseModelSizeChanged(this.model.size.clone());\n              this.raisePageSizeChanged(this.model.pageSize, this.model.pageLandscape);\n            }\n          }\n        };\n\n        ModelManipulator.prototype.changePageColor = function (value) {\n          if (this.model.pageColor !== value) {\n            this.model.pageColor = value;\n            this.raisePageColorChanged(value);\n          }\n        };\n\n        ModelManipulator.prototype.updateModelSize = function () {\n          var offset = this.getModelSizeUpdateOffset();\n\n          if (!offset.isEmpty()) {\n            var newWidth = Math.max(this.model.size.width + offset.left + offset.right, this.model.pageWidth);\n            var newHeight = Math.max(this.model.size.height + offset.top + offset.bottom, this.model.pageHeight);\n            this.model.size = new size_1.Size(newWidth, newHeight);\n          }\n        };\n\n        ModelManipulator.prototype.getModelSizeUpdateOffset = function () {\n          var oldRectangle = this.model.getRectangle(false);\n          var newRectangle = this.model.getRectangle(true);\n          if (!newRectangle.equals(oldRectangle)) this.raiseModelRectangleChanged(newRectangle);\n          return this.createModelRectangleOffset(newRectangle);\n        };\n\n        ModelManipulator.prototype.createModelRectangleOffset = function (rectangle) {\n          var pageWidth = this.model.pageWidth;\n          var pageHeight = this.model.pageHeight;\n          var size = this.model.size;\n          return new offsets_1.Offsets(-Math.floor(rectangle.x / pageWidth) * pageWidth, -Math.floor((size.width - rectangle.right) / pageWidth) * pageWidth, -Math.floor(rectangle.y / pageHeight) * this.model.pageHeight, -Math.floor((size.height - rectangle.bottom) / pageHeight) * pageHeight);\n        };\n\n        ModelManipulator.prototype.raiseModelChanged = function (changes) {\n          this.onModelChanged.raise1(function (l) {\n            return l.notifyModelChanged(changes);\n          });\n        };\n\n        ModelManipulator.prototype.raisePageColorChanged = function (color) {\n          this.onModelChanged.raise1(function (l) {\n            return l.notifyPageColorChanged(color);\n          });\n        };\n\n        ModelManipulator.prototype.raisePageSizeChanged = function (pageSize, pageLandscape) {\n          this.onModelChanged.raise1(function (l) {\n            return l.notifyPageSizeChanged(pageSize, pageLandscape);\n          });\n        };\n\n        ModelManipulator.prototype.raiseModelSizeChanged = function (size, offset) {\n          this.onModelSizeChanged.raise1(function (l) {\n            return l.notifyModelSizeChanged(size, offset);\n          });\n        };\n\n        ModelManipulator.prototype.raiseModelRectangleChanged = function (rectangle) {\n          this.onModelSizeChanged.raise1(function (l) {\n            return l.notifyModelRectangleChanged(rectangle);\n          });\n        };\n\n        ModelManipulator.prototype.raiseSnapPointChange = function (point) {\n          this.onModelSizeChanged.raise1(function (l) {\n            return l.notifySnapPointPositionChanged(point);\n          });\n        };\n\n        ModelManipulator.prototype.getInteractingItem = function (item, operation) {\n          return this.permissionsProvider.getInteractingItem(item, operation);\n        };\n\n        return ModelManipulator;\n      }();\n\n      exports.ModelManipulator = ModelManipulator;\n      /***/\n    },\n    /* 304 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.EventManager = void 0;\n\n      var MouseHandler_1 = __webpack_require__(305);\n\n      var Utils_1 = __webpack_require__(3);\n\n      var TextInputHandler_1 = __webpack_require__(324);\n\n      var ContextMenuHandler_1 = __webpack_require__(156);\n\n      var ContextMenuTouchHandler_1 = __webpack_require__(325);\n\n      var VisualizersManager_1 = __webpack_require__(157);\n\n      var VisualizersTouchManager_1 = __webpack_require__(331);\n\n      var ContextToolboxHandler_1 = __webpack_require__(332);\n\n      var browser_1 = __webpack_require__(17);\n\n      var key_1 = __webpack_require__(25);\n\n      var EventManager =\n      /** @class */\n      function () {\n        function EventManager(control) {\n          this.onMouseOperation = new Utils_1.EventDispatcher();\n          this.onTextInputOperation = new Utils_1.EventDispatcher();\n          this.toolboxes = [];\n          this.control = control;\n          this.visualizersManager = browser_1.Browser.TouchUI ? new VisualizersTouchManager_1.VisualizerTouchManager(control.selection, control.model, this, control.settings) : new VisualizersManager_1.VisualizerManager(control.selection, control.model, this, control.settings);\n          this.onMouseOperation.add(this.visualizersManager);\n          this.contextMenuHandler = browser_1.Browser.TouchUI ? new ContextMenuTouchHandler_1.ContextMenuTouchHandler(control.selection) : new ContextMenuHandler_1.ContextMenuHandler();\n          this.contextMenuHandler.onVisibilityChanged.add(control);\n          this.onMouseOperation.add(this.contextMenuHandler);\n          this.onTextInputOperation.add(this.contextMenuHandler);\n          this.contextToolboxHandler = new ContextToolboxHandler_1.ContextToolboxHandler();\n          this.contextToolboxHandler.onVisibilityChanged.add(control);\n          this.contextToolboxHandler.onVisibilityChanged.add(this.contextMenuHandler);\n          this.mouseHandler = new MouseHandler_1.MouseHandler(control.history, control.selection, control.model, this, control.settings.readOnly, control.view, this.visualizersManager, this.contextToolboxHandler, control.shapeDescriptionManager, control.settings, control.permissionsProvider);\n          this.textInputHandler = new TextInputHandler_1.TextInputHandler(control);\n          this.visualizersManager.onVisualizersUpdate.add(this.mouseHandler);\n        }\n\n        Object.defineProperty(EventManager.prototype, \"onVisualizersUpdate\", {\n          get: function get() {\n            return this.visualizersManager.onVisualizersUpdate;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        EventManager.prototype.registerToolbox = function (toolbox) {\n          this.toolboxes.push(toolbox);\n        };\n\n        EventManager.prototype.initialize = function () {\n          this.visualizersManager.initialize(this.control.model);\n          this.mouseHandler.initialize(this.control.model);\n        };\n\n        EventManager.prototype.beginUpdate = function (lockUpdateCanvas) {\n          this.contextMenuHandler.beginUpdate();\n          this.visualizersManager.beginUpdate();\n        };\n\n        EventManager.prototype.endUpdate = function () {\n          this.contextMenuHandler.endUpdate();\n          this.visualizersManager.endUpdate();\n        };\n\n        EventManager.prototype.onMouseDown = function (evt) {\n          this.mouseHandler.onMouseDown(evt);\n          this.contextMenuHandler.onMouseDown(evt);\n          this.visualizersManager.onMouseDown(evt);\n          this.contextToolboxHandler.onMouseDown(evt);\n        };\n\n        EventManager.prototype.onMouseMove = function (evt) {\n          this.processDragging(evt);\n          this.mouseHandler.onMouseMove(evt);\n        };\n\n        EventManager.prototype.onMouseUp = function (evt) {\n          this.contextToolboxHandler.onMouseUp(evt);\n          this.mouseHandler.onMouseUp(evt);\n          this.contextMenuHandler.onMouseUp(evt);\n          this.visualizersManager.onMouseUp(evt);\n          this.processDragging(evt);\n        };\n\n        EventManager.prototype.onMouseEnter = function (evt) {\n          this.visualizersManager.onMouseEnter(evt);\n        };\n\n        EventManager.prototype.onMouseLeave = function (evt) {\n          this.visualizersManager.onMouseLeave(evt);\n        };\n\n        EventManager.prototype.onDblClick = function (evt) {\n          this.mouseHandler.onMouseDblClick(evt);\n          this.textInputHandler.onDblClick(evt);\n          this.control.apiController.notifyDblClick(evt);\n        };\n\n        EventManager.prototype.onClick = function (evt) {\n          this.mouseHandler.onMouseClick(evt);\n          this.control.apiController.notifyClick(evt);\n        };\n\n        EventManager.prototype.onContextMenu = function (evt) {\n          this.contextMenuHandler.onContextMenu(evt);\n        };\n\n        EventManager.prototype.onLongTouch = function (evt) {\n          this.mouseHandler.onLongTouch(evt);\n          this.contextMenuHandler.onLongTouch(evt);\n        };\n\n        EventManager.prototype.onBlur = function (evt) {\n          this.contextMenuHandler.onBlur(evt);\n          this.contextToolboxHandler.onBlur(evt);\n          this.visualizersManager.onBlur(evt);\n        };\n\n        EventManager.prototype.onFocus = function (evt) {\n          this.contextMenuHandler.onFocus(evt);\n          this.contextToolboxHandler.onFocus(evt);\n          this.visualizersManager.onFocus(evt);\n        };\n\n        EventManager.prototype.onKeyDown = function (evt) {\n          var scCode = evt.getShortcutCode();\n\n          if (this.onShortcut(scCode)) {\n            this.visualizersManager.updateConnectionPoints();\n            this.contextMenuHandler.onShortcut(evt);\n            this.contextToolboxHandler.onShortcut(evt);\n            evt.preventDefault = true;\n          } else if (this.isShortcutForFocusInput(scCode)) evt.preventDefault = true;\n\n          this.contextMenuHandler.onKeyDown(evt);\n          this.contextToolboxHandler.onKeyDown(evt);\n          this.mouseHandler.onKeyDown(evt);\n        };\n\n        EventManager.prototype.onKeyUp = function (evt) {\n          this.mouseHandler.onKeyUp(evt);\n        };\n\n        EventManager.prototype.onTextInputBlur = function (evt) {\n          this.textInputHandler.onBlur(evt);\n          this.contextMenuHandler.onTextInputBlur(evt);\n        };\n\n        EventManager.prototype.onTextInputFocus = function (evt) {\n          this.textInputHandler.onFocus(evt);\n          this.contextMenuHandler.onTextInputFocus(evt);\n        };\n\n        EventManager.prototype.onTextInputKeyDown = function (evt) {\n          this.textInputHandler.onKeyDown(evt);\n        };\n\n        EventManager.prototype.onShortcut = function (code) {\n          if (this.control.commandManager.processShortcut(code)) return true;\n          if (this.mouseHandler.onShortcut(code)) return true;\n        };\n\n        EventManager.prototype.isShortcutForFocusInput = function (code) {\n          return code === key_1.KeyCode.Delete || code === (key_1.KeyCode.Delete | key_1.ModifierKey.Ctrl) || code === (key_1.KeyCode.Delete | key_1.ModifierKey.Meta) || code === key_1.KeyCode.Backspace || code === (key_1.KeyCode.Backspace | key_1.ModifierKey.Ctrl) || code === (key_1.KeyCode.Backspace | key_1.ModifierKey.Shift) || code === (key_1.KeyCode.Backspace | key_1.ModifierKey.Meta) || code === key_1.KeyCode.Home || code === key_1.KeyCode.End || code === key_1.KeyCode.Up || code === (key_1.KeyCode.Up | key_1.ModifierKey.Ctrl) || code === (key_1.KeyCode.Up | key_1.ModifierKey.Meta) || code === key_1.KeyCode.Down || code === (key_1.KeyCode.Down | key_1.ModifierKey.Ctrl) || code === (key_1.KeyCode.Down | key_1.ModifierKey.Meta) || code === key_1.KeyCode.Left || code === (key_1.KeyCode.Left | key_1.ModifierKey.Ctrl) || code === (key_1.KeyCode.Left | key_1.ModifierKey.Meta) || code === key_1.KeyCode.Right || code === (key_1.KeyCode.Right | key_1.ModifierKey.Ctrl) || code === (key_1.KeyCode.Right | key_1.ModifierKey.Meta);\n        };\n\n        EventManager.prototype.onPaste = function (evt) {\n          if (!this.textInputHandler.isTextInputActive() && this.control.commandManager.processPaste(evt.clipboardData)) {\n            this.visualizersManager.updateConnectionPoints();\n            evt.preventDefault = true;\n          }\n        };\n\n        EventManager.prototype.onMouseWheel = function (evt) {\n          if (this.mouseHandler.onWheel(evt)) evt.preventDefault = true;\n        };\n\n        EventManager.prototype.isFocused = function () {\n          return this.control.isFocused();\n        };\n\n        EventManager.prototype.processDragging = function (evt) {\n          var draggingEvt = this.getDraggingEvent();\n\n          if (draggingEvt && !this.draggingEvent) {\n            this.draggingEvent = draggingEvt;\n            this.mouseHandler.onDragStart(this.draggingEvent);\n            this.control.captureFocus();\n          } else if (!draggingEvt && this.draggingEvent) {\n            delete this.draggingEvent;\n            this.mouseHandler.onDragEnd(evt);\n          }\n        };\n\n        EventManager.prototype.getDraggingEvent = function () {\n          return this.toolboxes.filter(function (t) {\n            return t.draggingObject;\n          }).map(function (t) {\n            return t.draggingObject.evt;\n          })[0];\n        };\n\n        EventManager.prototype.onDocumentDragStart = function (itemKeys) {\n          this.control.beginUpdate();\n          this.control.captureFocus();\n          this.onMouseOperation.raise(\"notifyDragStart\", itemKeys);\n        };\n\n        EventManager.prototype.onDocumentDragEnd = function (itemKeys) {\n          this.onMouseOperation.raise(\"notifyDragEnd\", itemKeys);\n          this.control.endUpdate();\n          this.control.barManager.updateItemsState();\n        };\n\n        EventManager.prototype.onDocumentDragScrollStart = function () {\n          this.onMouseOperation.raise1(function (l) {\n            return l.notifyDragScrollStart();\n          });\n        };\n\n        EventManager.prototype.onDocumentDragScrollEnd = function () {\n          this.onMouseOperation.raise1(function (l) {\n            return l.notifyDragScrollEnd();\n          });\n        };\n\n        EventManager.prototype.onDocumentClick = function (itemKeys) {\n          this.control.beginUpdate();\n          this.control.endUpdate();\n          this.control.barManager.updateItemsState();\n        };\n\n        EventManager.prototype.raiseTextInputStart = function (item, text, position, size) {\n          this.onTextInputOperation.raise(\"notifyTextInputStart\", item, text, position, size);\n        };\n\n        EventManager.prototype.raiseTextInputEnd = function (item) {\n          this.onTextInputOperation.raise(\"notifyTextInputEnd\", item);\n        };\n\n        EventManager.prototype.raiseTextInputPermissionsCheck = function (item, allowed) {\n          this.onTextInputOperation.raise(\"notifyTextInputPermissionsCheck\", item, allowed);\n        };\n\n        EventManager.prototype.canFinishTextEditing = function () {\n          return this.textInputHandler.canFinishTextEditing();\n        };\n\n        return EventManager;\n      }();\n\n      exports.EventManager = EventManager;\n      /***/\n    },\n    /* 305 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MouseHandler = void 0;\n\n      var MouseHandlerDefaultState_1 = __webpack_require__(148);\n\n      var Event_1 = __webpack_require__(11);\n\n      var point_1 = __webpack_require__(1);\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var MouseHandlerDefaultReadOnlyTouchState_1 = __webpack_require__(321);\n\n      var MouseHandlerDefaultReadOnlyState_1 = __webpack_require__(154);\n\n      var MouseHandlerDefaultTouchState_1 = __webpack_require__(322);\n\n      var browser_1 = __webpack_require__(17);\n\n      var key_1 = __webpack_require__(25);\n\n      var MouseHandler =\n      /** @class */\n      function () {\n        function MouseHandler(history, selection, model, eventManager, readOnly, view, visualizerManager, contextToolboxHandler, shapeDescriptionManager, settings, permissionsProvider) {\n          this.history = history;\n          this.selection = selection;\n          this.model = model;\n          this.eventManager = eventManager;\n          this.readOnly = readOnly;\n          this.view = view;\n          this.visualizerManager = visualizerManager;\n          this.contextToolboxHandler = contextToolboxHandler;\n          this.shapeDescriptionManager = shapeDescriptionManager;\n          this.settings = settings;\n          this.permissionsProvider = permissionsProvider;\n          this.finishStateLock = 0;\n          this.initialize(model);\n        }\n\n        MouseHandler.prototype.initialize = function (model) {\n          this.model = model;\n          this.allowMultipleSelection = true;\n          this.allowCopyDiagramItems = true;\n          this.allowSnapToCellOnDragDiagramItem = true;\n          this.allowSnapToCellOnDragPoint = true;\n          this.allowSnapToCellOnResizeShape = true;\n          this.allowFixedDrag = true;\n          this.allowZoomOnWheel = true;\n          this.allowScrollPage = true;\n          this.shouldScrollPage = false;\n          this.copyDiagramItemsByCtrlAndShift = false;\n          this.startScrollingPageByCtrl = false;\n          this.initializeDefaultState();\n        };\n\n        MouseHandler.prototype.initializeDefaultState = function () {\n          this.defaultState = this.readOnly ? browser_1.Browser.TouchUI ? new MouseHandlerDefaultReadOnlyTouchState_1.MouseHandlerDefaultReadOnlyTouchState(this, this.history, this.selection, this.model, this.view, this.visualizerManager, this.shapeDescriptionManager, this.settings) : new MouseHandlerDefaultReadOnlyState_1.MouseHandlerDefaultReadOnlyState(this, this.history, this.selection, this.model, this.view, this.visualizerManager, this.shapeDescriptionManager, this.settings) : browser_1.Browser.TouchUI ? new MouseHandlerDefaultTouchState_1.MouseHandlerDefaultTouchState(this, this.history, this.selection, this.model, this.view, this.visualizerManager, this.shapeDescriptionManager, this.settings) : new MouseHandlerDefaultState_1.MouseHandlerDefaultState(this, this.history, this.selection, this.model, this.view, this.visualizerManager, this.shapeDescriptionManager, this.settings);\n          this.switchToDefaultState();\n        };\n\n        MouseHandler.prototype.onMouseDown = function (evt) {\n          this.mouseDownEvent = evt;\n          this.state.onMouseDown(evt);\n        };\n\n        MouseHandler.prototype.onMouseMove = function (evt) {\n          this.state.onMouseMove(evt);\n        };\n\n        MouseHandler.prototype.onMouseUp = function (evt) {\n          this.state.onMouseUp(evt);\n        };\n\n        MouseHandler.prototype.onMouseDblClick = function (evt) {\n          this.state.onMouseDblClick(evt);\n        };\n\n        MouseHandler.prototype.onMouseClick = function (evt) {\n          this.state.onMouseClick(evt);\n        };\n\n        MouseHandler.prototype.onLongTouch = function (evt) {\n          if (!evt.touches || evt.touches.length > 1) return;\n          var key = evt.source.key;\n          if (key === undefined) this.selection.clear();else if (this.selection.hasKey(key)) this.selection.remove(key);else this.selection.add(key);\n        };\n\n        MouseHandler.prototype.onShortcut = function (code) {\n          return this.state.onShortcut(code);\n        };\n\n        MouseHandler.prototype.onWheel = function (evt) {\n          return this.state.onMouseWheel(evt);\n        };\n\n        MouseHandler.prototype.onDragStart = function (evt) {\n          this.state.onDragStart(evt);\n        };\n\n        MouseHandler.prototype.onDragEnd = function (evt) {\n          this.state.onDragEnd(evt);\n        };\n\n        MouseHandler.prototype.onKeyDown = function (evt) {\n          this.state.onKeyDown(evt);\n        };\n\n        MouseHandler.prototype.onKeyUp = function (evt) {\n          this.state.onKeyUp(evt);\n        };\n\n        MouseHandler.prototype.showContextToolbox = function (modelPoint, getPositionToInsertShapeTo, side, category, applyCallback, cancelCallback) {\n          this.contextToolboxHandler.showContextToolbox(modelPoint, getPositionToInsertShapeTo, side, category, applyCallback, cancelCallback);\n        };\n\n        MouseHandler.prototype.hideContextToolbox = function (applyed) {\n          this.contextToolboxHandler.hideContextToolbox(applyed);\n        };\n\n        MouseHandler.prototype.canScrollPage = function (evt) {\n          if (this.startScrollingPageByCtrl) {\n            if (!this.hasCtrlModifier(evt.modifiers)) return false;\n            if (!this.copyDiagramItemsByCtrlAndShift) return true;\n            return evt.source.type !== Event_1.MouseEventElementType.Shape && evt.source.type !== Event_1.MouseEventElementType.Connector;\n          }\n\n          return this.allowScrollPage && this.shouldScrollPage;\n        };\n\n        MouseHandler.prototype.canMultipleSelection = function (evt) {\n          return this.allowMultipleSelection && this.hasCtrlOrShiftModifier(evt.modifiers);\n        };\n\n        MouseHandler.prototype.canCopySelectedItems = function (evt) {\n          if (!this.allowCopyDiagramItems) return false;\n          return this.copyDiagramItemsByCtrlAndShift ? this.hasCtrlAndShiftModifier(evt.modifiers) : this.hasAltModifier(evt.modifiers);\n        };\n\n        MouseHandler.prototype.canCalculateFixedPosition = function (evt) {\n          if (!this.allowFixedDrag || !this.hasShiftModifier(evt.modifiers)) return false;\n          if (this.copyDiagramItemsByCtrlAndShift && this.hasCtrlModifier(evt.modifiers)) return false;\n          return true;\n        };\n\n        MouseHandler.prototype.canStartZoomOnWheel = function (evt) {\n          return this.allowZoomOnWheel && this.hasCtrlModifier(evt.modifiers);\n        };\n\n        MouseHandler.prototype.canFinishZoomOnWheel = function (evt) {\n          return this.allowZoomOnWheel && !this.hasCtrlModifier(evt.modifiers);\n        };\n\n        MouseHandler.prototype.onStartScrollPageByKeyboard = function (evt) {\n          if (this.canStartScrollingPageByKeyboard(evt)) {\n            this.raiseDragScrollStart();\n            this.shouldScrollPage = true;\n          }\n        };\n\n        MouseHandler.prototype.onFinishScrollPageByKeyboard = function (evt) {\n          if (this.canEndScrollingPageByKeyboard(evt)) this.finishScrollingPage();\n        };\n\n        MouseHandler.prototype.onFinishScrollPageByMouse = function (evt) {\n          if (this.canEndScrollingPage(evt)) this.finishScrollingPage();\n        };\n\n        MouseHandler.prototype.finishScrollingPage = function () {\n          this.shouldScrollPage = false;\n          this.raiseDragScrollEnd();\n          this.switchToDefaultState();\n        }; // utils\n\n\n        MouseHandler.prototype.hasCtrlOrShiftModifier = function (key) {\n          return this.hasCtrlModifier(key) || this.hasShiftModifier(key);\n        };\n\n        MouseHandler.prototype.hasCtrlAndShiftModifier = function (key) {\n          return this.hasCtrlModifier(key) && this.hasShiftModifier(key);\n        };\n\n        MouseHandler.prototype.hasCtrlModifier = function (key) {\n          return (key & key_1.ModifierKey.Ctrl) > 0;\n        };\n\n        MouseHandler.prototype.hasAltModifier = function (key) {\n          return (key & key_1.ModifierKey.Alt) > 0;\n        };\n\n        MouseHandler.prototype.hasShiftModifier = function (key) {\n          return (key & key_1.ModifierKey.Shift) > 0;\n        };\n\n        MouseHandler.prototype.canStartScrollingPageByKeyboard = function (evt) {\n          return !this.startScrollingPageByCtrl && !this.shouldScrollPage && evt.keyCode === key_1.KeyCode.Space;\n        };\n\n        MouseHandler.prototype.canEndScrollingPageByKeyboard = function (evt) {\n          return !this.startScrollingPageByCtrl && evt.keyCode === key_1.KeyCode.Space;\n        };\n\n        MouseHandler.prototype.canEndScrollingPage = function (evt) {\n          return this.startScrollingPageByCtrl ? this.hasCtrlModifier(evt.modifiers) : true;\n        };\n\n        MouseHandler.prototype.getSnappedPointOnDragDiagramItem = function (evt, basePoint, fixedX, fixedY, startPoint) {\n          var snapToCell = this.getSnapToCellOnDragDiagramItem(evt);\n          return new point_1.Point(this.getSnappedPos(this.getFixedXPosition(evt, basePoint, fixedX, startPoint), true, snapToCell), this.getSnappedPos(this.getFixedYPosition(evt, basePoint, fixedY, startPoint), false, snapToCell));\n        };\n\n        MouseHandler.prototype.getSnappedPointOnDragPoint = function (evt, point, additionalSnappedPoint) {\n          var snapToCell = this.getSnapToCellOnDragPoint(evt);\n          var x = this.getSnappedPos(point.x, true, snapToCell);\n          var y = this.getSnappedPos(point.y, false, snapToCell);\n          if (additionalSnappedPoint === undefined) return new point_1.Point(x, y);else if (Math.pow(point.x - x, 2) + Math.pow(point.y - y, 2) < Math.pow(point.x - additionalSnappedPoint.x, 2) + Math.pow(point.y - additionalSnappedPoint.y, 2)) return new point_1.Point(x, y);else return additionalSnappedPoint;\n        };\n\n        MouseHandler.prototype.getSnappedOffsetOnDragPoint = function (evt, startPoint) {\n          var snapToCell = this.getSnapToCellOnDragPoint(evt);\n          return new point_1.Point(this.getSnappedPos(evt.modelPoint.x - startPoint.x, true, snapToCell), this.getSnappedPos(evt.modelPoint.y - startPoint.y, false, snapToCell));\n        };\n\n        MouseHandler.prototype.lockAspectRatioOnShapeResize = function (evt) {\n          return this.hasShiftModifier(evt.modifiers);\n        };\n\n        MouseHandler.prototype.getSnappedPositionOnResizeShape = function (evt, pos, isHorizontal) {\n          if (!this.getSnapToCellOnResizeShape(evt)) return pos;\n          return ModelUtils_1.ModelUtils.getSnappedPos(this.model, this.settings.gridSize, pos, isHorizontal);\n        };\n\n        MouseHandler.prototype.getSnappedPos = function (pos, isHorizontal, snapToCell) {\n          return snapToCell ? ModelUtils_1.ModelUtils.getSnappedPos(this.model, this.settings.gridSize, pos, isHorizontal) : pos;\n        };\n\n        MouseHandler.prototype.getFixedXPosition = function (evt, basePoint, fixedX, startPoint) {\n          return fixedX ? basePoint.x : basePoint.x + evt.modelPoint.x - startPoint.x;\n        };\n\n        MouseHandler.prototype.getFixedYPosition = function (evt, basePoint, fixedY, startPoint) {\n          return fixedY ? basePoint.y : basePoint.y + evt.modelPoint.y - startPoint.y;\n        };\n\n        MouseHandler.prototype.getSnapToCellOnDragDiagramItem = function (evt) {\n          return this.allowSnapToCellOnDragDiagramItem && this.settings.snapToGrid && !this.hasCtrlModifier(evt.modifiers);\n        };\n\n        MouseHandler.prototype.getSnapToCellOnDragPoint = function (evt) {\n          return this.allowSnapToCellOnDragPoint && this.settings.snapToGrid && !this.hasCtrlModifier(evt.modifiers);\n        };\n\n        MouseHandler.prototype.getSnapToCellOnResizeShape = function (evt) {\n          return this.allowSnapToCellOnResizeShape && this.settings.snapToGrid && !this.hasCtrlModifier(evt.modifiers);\n        };\n\n        MouseHandler.prototype.tryUpdateModelSize = function (processPoints) {\n          this.lockPermissions();\n          ModelUtils_1.ModelUtils.tryUpdateModelRectangle(this.history, processPoints);\n          this.unlockPermissions();\n        };\n\n        MouseHandler.prototype.canAddDiagramItemToSelection = function (evt) {\n          return evt.source.key && (evt.button === Event_1.MouseButton.Left || evt.button === Event_1.MouseButton.Right);\n        };\n\n        MouseHandler.prototype.addDiagramItemToSelection = function (evt) {\n          this.pressedDiagramItemKey = evt.source.key;\n          this.pressedDiagramItemInSelection = this.selection.hasKey(this.pressedDiagramItemKey);\n          if (this.canMultipleSelection(evt)) this.selection.add(evt.source.key);else this.changeSingleSelection(evt.source.key);\n        };\n\n        MouseHandler.prototype.canRemoveDiagramItemToSelection = function (evt) {\n          return this.pressedDiagramItemKey && evt.source.key && this.pressedDiagramItemKey === evt.source.key && (evt.button === Event_1.MouseButton.Left || evt.button === Event_1.MouseButton.Right);\n        };\n\n        MouseHandler.prototype.removeDiagramItemFromSelection = function (button, sourceKey) {\n          if (this.pressedDiagramItemInSelection && this.selection.getKeys().length > 1 && button === Event_1.MouseButton.Left) this.selection.remove(sourceKey);\n        };\n\n        MouseHandler.prototype.changeSingleSelection = function (key) {\n          if (!this.selection.hasKey(key)) this.selection.set([key]);\n        };\n\n        MouseHandler.prototype.raiseDragStart = function (keys) {\n          this.eventManager.onDocumentDragStart(keys);\n        };\n\n        MouseHandler.prototype.raiseDragEnd = function (keys) {\n          this.eventManager.onDocumentDragEnd(keys);\n        };\n\n        MouseHandler.prototype.raiseDragScrollStart = function () {\n          this.eventManager.onDocumentDragScrollStart();\n        };\n\n        MouseHandler.prototype.raiseDragScrollEnd = function () {\n          this.eventManager.onDocumentDragScrollEnd();\n        };\n\n        MouseHandler.prototype.raiseClick = function (keys) {\n          this.eventManager.onDocumentClick(keys);\n        };\n\n        MouseHandler.prototype.beginStorePermissions = function () {\n          this.permissionsProvider.beginStorePermissions();\n        };\n\n        MouseHandler.prototype.endStorePermissions = function () {\n          this.permissionsProvider.endStorePermissions();\n        };\n\n        MouseHandler.prototype.isStoredPermissionsGranted = function () {\n          return this.permissionsProvider.isStoredPermissionsGranted();\n        };\n\n        MouseHandler.prototype.lockPermissions = function () {\n          this.permissionsProvider.lockPermissions();\n        };\n\n        MouseHandler.prototype.unlockPermissions = function () {\n          this.permissionsProvider.unlockPermissions();\n        };\n\n        MouseHandler.prototype.canPerformChangeConnection = function (connector, operationParams) {\n          var allowed = true;\n          if (connector) allowed = this.permissionsProvider.canChangeConnection(connector, operationParams.item, operationParams.oldItem, operationParams.position, operationParams.connectionPointIndex);else if (operationParams.item) allowed = this.permissionsProvider.canChangeConnection(undefined, operationParams.item, operationParams.oldItem, operationParams.position, operationParams.connectionPointIndex);\n          return allowed;\n        };\n\n        MouseHandler.prototype.canPerformChangeConnectionOnUpdateUI = function (connector, operationParams) {\n          this.permissionsProvider.beginUpdateUI();\n          var allowed = this.canPerformChangeConnection(connector, operationParams);\n          this.permissionsProvider.endUpdateUI();\n          return allowed;\n        };\n\n        MouseHandler.prototype.canFinishTextEditing = function () {\n          return this.eventManager.canFinishTextEditing();\n        };\n\n        MouseHandler.prototype.restartState = function () {\n          if (this.state && !this.finishStateLock) {\n            this.finishStateLock++;\n            this.state.finish();\n            this.finishStateLock--;\n          }\n\n          this.state.start();\n        }; // switch state\n\n\n        MouseHandler.prototype.switchToDefaultState = function () {\n          this.switchState(this.defaultState);\n        };\n\n        MouseHandler.prototype.switchState = function (state) {\n          this.newState = state;\n\n          if (this.state && !this.finishStateLock) {\n            this.finishStateLock++;\n            this.state.finish();\n            this.finishStateLock--;\n          }\n\n          if (this.newState) {\n            this.state = this.newState;\n            this.state.start();\n            this.newState = undefined;\n          }\n        };\n\n        MouseHandler.prototype.addInteractingItem = function (item, operation) {\n          this.permissionsProvider.addInteractingItem(item, operation);\n        };\n\n        MouseHandler.prototype.clearInteractingItems = function () {\n          this.permissionsProvider.clearInteractingItems();\n        };\n\n        MouseHandler.prototype.notifyReadOnlyChanged = function (readOnly) {\n          this.readOnly = readOnly;\n          this.initializeDefaultState();\n        };\n\n        MouseHandler.prototype.notifySelectionRectShow = function (rect) {};\n\n        MouseHandler.prototype.notifySelectionRectHide = function () {};\n\n        MouseHandler.prototype.notifyResizeInfoShow = function (point, text) {};\n\n        MouseHandler.prototype.notifyResizeInfoHide = function () {};\n\n        MouseHandler.prototype.notifyConnectionPointsShow = function (key, points, activePointIndex, outsideRectangle) {\n          this.state.onConnectionPointsShow(key, points);\n        };\n\n        MouseHandler.prototype.notifyConnectionPointsHide = function () {};\n\n        MouseHandler.prototype.notifyConnectionTargetShow = function (key, info) {\n          this.state.onConnectionTargetShow(key, info);\n        };\n\n        MouseHandler.prototype.notifyConnectionTargetHide = function () {};\n\n        MouseHandler.prototype.notifyContainerTargetShow = function (key, info) {};\n\n        MouseHandler.prototype.notifyContainerTargetHide = function () {};\n\n        MouseHandler.prototype.notifyExtensionLinesShow = function (lines) {};\n\n        MouseHandler.prototype.notifyExtensionLinesHide = function () {};\n\n        return MouseHandler;\n      }();\n\n      exports.MouseHandler = MouseHandler;\n      /***/\n    },\n    /* 306 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics209 = function extendStatics(d, b) {\n          _extendStatics209 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics209(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics209(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MouseHandlerMoveConnectorPointState = void 0;\n\n      var MouseHandlerMoveConnectorPointStateBase_1 = __webpack_require__(149);\n\n      var Connector_1 = __webpack_require__(7);\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var point_1 = __webpack_require__(1);\n\n      var ConnectorProperties_1 = __webpack_require__(31);\n\n      var MouseHandlerMoveConnectorPointState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerMoveConnectorPointState, _super);\n\n        function MouseHandlerMoveConnectorPointState() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MouseHandlerMoveConnectorPointState.prototype.onMouseDown = function (evt) {\n          this.connector = this.model.findConnector(evt.source.key);\n          this.pointIndex = parseInt(evt.source.value);\n          if (this.pointIndex === 0) this.pointPosition = Connector_1.ConnectorPosition.Begin;else if (this.pointIndex === this.connector.points.length - 1) this.pointPosition = Connector_1.ConnectorPosition.End;\n          this.handler.addInteractingItem(this.connector);\n\n          _super.prototype.onMouseDown.call(this, evt);\n        };\n\n        MouseHandlerMoveConnectorPointState.prototype.onApplyChanges = function (evt) {\n          if (this.connector.properties.lineOption !== ConnectorProperties_1.ConnectorLineOption.Orthogonal || this.pointIndex === 0 || this.pointIndex === this.connector.points.length - 1) _super.prototype.onApplyChanges.call(this, evt);\n        };\n\n        MouseHandlerMoveConnectorPointState.prototype.onFinishWithChanges = function () {\n          _super.prototype.onFinishWithChanges.call(this);\n\n          ModelUtils_1.ModelUtils.deleteConnectorUnnecessaryPoints(this.history, this.connector);\n        };\n\n        MouseHandlerMoveConnectorPointState.prototype.getSnappedPoint = function (evt, point) {\n          var points = this.connector.points;\n          var index = this.pointIndex;\n\n          if (0 < index && index < points.length - 1) {\n            var tg = (points[index + 1].y - points[index - 1].y) / (points[index + 1].x - points[index - 1].x);\n            var x = point.x;\n            var y = points[index + 1].y - (points[index + 1].x - x) * tg;\n            return this.handler.getSnappedPointOnDragPoint(evt, point, new point_1.Point(x, y));\n          }\n\n          return this.handler.getSnappedPointOnDragPoint(evt, point);\n        };\n\n        return MouseHandlerMoveConnectorPointState;\n      }(MouseHandlerMoveConnectorPointStateBase_1.MouseHandlerMoveConnectorPointStateBase);\n\n      exports.MouseHandlerMoveConnectorPointState = MouseHandlerMoveConnectorPointState;\n      /***/\n    },\n    /* 307 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics210 = function extendStatics(d, b) {\n          _extendStatics210 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics210(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics210(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MouseHandlerResizeShapeState = void 0;\n\n      var size_1 = __webpack_require__(2);\n\n      var point_1 = __webpack_require__(1);\n\n      var Event_1 = __webpack_require__(11);\n\n      var MouseHandlerDraggingState_1 = __webpack_require__(32);\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var ShapeDescription_1 = __webpack_require__(8);\n\n      var ModelOperationSettings_1 = __webpack_require__(16);\n\n      var MouseHandlerResizeShapeState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerResizeShapeState, _super);\n\n        function MouseHandlerResizeShapeState(handler, history, model, selection, visualizerManager, settings) {\n          var _this = _super.call(this, handler, history) || this;\n\n          _this.model = model;\n          _this.selection = selection;\n          _this.visualizerManager = visualizerManager;\n          _this.settings = settings;\n          _this.startScrollLeft = 0;\n          _this.startScrollTop = 0;\n          _this.rotation = 0;\n          return _this;\n        }\n\n        MouseHandlerResizeShapeState.prototype.finish = function () {\n          this.visualizerManager.resetResizeInfo();\n          this.visualizerManager.resetExtensionLines();\n\n          _super.prototype.finish.call(this);\n        };\n\n        MouseHandlerResizeShapeState.prototype.onMouseDown = function (evt) {\n          var _this = this;\n\n          var source = parseInt(evt.source.value);\n          this.resizeEventSource = source;\n          this.startPoint = evt.modelPoint;\n          this.lockH = source === Event_1.ResizeEventSource.ResizeBox_S || source === Event_1.ResizeEventSource.ResizeBox_N;\n          this.lockV = source === Event_1.ResizeEventSource.ResizeBox_E || source === Event_1.ResizeEventSource.ResizeBox_W;\n          this.sideH = source === Event_1.ResizeEventSource.ResizeBox_E || source === Event_1.ResizeEventSource.ResizeBox_NE || source === Event_1.ResizeEventSource.ResizeBox_SE;\n          this.sideV = source === Event_1.ResizeEventSource.ResizeBox_SE || source === Event_1.ResizeEventSource.ResizeBox_S || source === Event_1.ResizeEventSource.ResizeBox_SW;\n          this.shapes = this.selection.getSelectedShapes();\n\n          if (this.shapes.length === 0) {\n            this.handler.switchToDefaultState();\n            return;\n          }\n\n          this.shapes.forEach(function (shape) {\n            _this.handler.addInteractingItem(shape, ModelOperationSettings_1.DiagramModelOperation.ResizeShape);\n\n            _this.handler.addInteractingItem(shape, ModelOperationSettings_1.DiagramModelOperation.MoveShape);\n          });\n          this.connectors = this.selection.getSelectedConnectors();\n          this.startRectangle = ModelUtils_1.ModelUtils.createRectangle(this.shapes);\n          this.startShapeSizes = this.shapes.map(function (shape) {\n            return shape.size.clone();\n          });\n          this.startShapePositions = this.shapes.map(function (shape) {\n            return shape.position.clone();\n          });\n          this.startConnectorPoints = this.connectors.map(function (c) {\n            return c.points.map(function (p) {\n              return p.clone();\n            });\n          });\n\n          _super.prototype.onMouseDown.call(this, evt);\n        };\n\n        MouseHandlerResizeShapeState.prototype.onMouseMove = function (evt) {\n          _super.prototype.onMouseMove.call(this, evt);\n\n          var shapes = this.selection.getSelectedShapes();\n          this.visualizerManager.setExtensionLines(shapes);\n        };\n\n        MouseHandlerResizeShapeState.prototype.onApplyChanges = function (evt) {\n          var _this = this;\n\n          var rectangle = ModelUtils_1.ModelUtils.createRectangle(this.shapes);\n          var minWidth = this.shapes.length === 1 ? this.shapes[0].getMinWidth(this.settings.shapeMinWidth) : ShapeDescription_1.ShapeMinDimension;\n          var minHeight = this.shapes.length === 1 ? this.shapes[0].getMinHeight(this.settings.shapeMinHeight) : ShapeDescription_1.ShapeMinDimension;\n          var maxWidth = this.shapes.length === 1 ? this.shapes[0].getMaxWidth(this.settings.shapeMaxWidth) : undefined;\n          var maxHeight = this.shapes.length === 1 ? this.shapes[0].getMaxHeight(this.settings.shapeMaxHeight) : undefined;\n          var size = this.getSize(evt, rectangle.createPosition(), this.startRectangle.createSize(), minWidth, minHeight, maxWidth, maxHeight, this.handler.lockAspectRatioOnShapeResize(evt));\n          var pos = this.getPosition(evt, size, this.startRectangle.createSize(), this.startRectangle.createPosition());\n          var ratioX = size.width / this.startRectangle.width;\n          var ratioY = size.height / this.startRectangle.height;\n          this.shapes.forEach(function (shape, index) {\n            var shapeWidth = _this.startShapeSizes[index].width * (shape.allowResizeHorizontally ? ratioX : 1);\n            shapeWidth = _this.getNormalizedSize(shapeWidth, shape.getMinWidth(_this.settings.shapeMinWidth), shape.getMaxWidth(_this.settings.shapeMaxWidth));\n            var shapeHeight = _this.startShapeSizes[index].height * (shape.allowResizeVertically ? ratioY : 1);\n            shapeHeight = _this.getNormalizedSize(shapeHeight, shape.getMinHeight(_this.settings.shapeMinHeight), shape.getMaxHeight(_this.settings.shapeMaxHeight));\n            var shapeLeft = shape.allowResizeHorizontally ? pos.x + (_this.startShapePositions[index].x - _this.startRectangle.x) * ratioX : _this.startShapePositions[index].x;\n            var shapeTop = shape.allowResizeVertically ? pos.y + (_this.startShapePositions[index].y - _this.startRectangle.y) * ratioY : _this.startShapePositions[index].y;\n            ModelUtils_1.ModelUtils.setShapeSize(_this.history, _this.model, shape, new point_1.Point(shapeLeft, shapeTop), new size_1.Size(shapeWidth, shapeHeight));\n          });\n          this.connectors.forEach(function (connector, index) {\n            var startPtIndex = connector.beginItem ? 1 : 0;\n            var endPtIndex = connector.endItem ? connector.points.length - 2 : connector.points.length - 1;\n\n            for (var i = startPtIndex; i <= endPtIndex; i++) {\n              var connectorPtPos = new point_1.Point(pos.x + (_this.startConnectorPoints[index][i].x - _this.startRectangle.x) * ratioX, pos.y + (_this.startConnectorPoints[index][i].y - _this.startRectangle.y) * ratioY);\n              ModelUtils_1.ModelUtils.moveConnectorPoint(_this.history, connector, i, connectorPtPos);\n            }\n          });\n          var shapes = this.selection.getSelectedShapes(false, true);\n          shapes.forEach(function (shape) {\n            ModelUtils_1.ModelUtils.updateShapeAttachedConnectors(_this.history, _this.model, shape);\n          });\n          this.tryUpdateModelSize();\n          this.visualizerManager.setResizeInfo(this.shapes);\n        };\n\n        MouseHandlerResizeShapeState.prototype.tryUpdateModelSize = function () {\n          var _this = this;\n\n          this.handler.tryUpdateModelSize(function (offsetLeft, offsetTop) {\n            _this.startShapePositions.forEach(function (pt) {\n              pt.x += offsetLeft;\n              pt.y += offsetTop;\n            });\n\n            _this.startConnectorPoints.forEach(function (connector) {\n              connector.forEach(function (pt) {\n                pt.x += offsetLeft;\n                pt.y += offsetTop;\n              });\n            });\n\n            _this.startRectangle.x += offsetLeft;\n            _this.startRectangle.y += offsetTop;\n            _this.startPoint.x += offsetLeft;\n            _this.startPoint.y += offsetTop;\n          });\n        };\n\n        MouseHandlerResizeShapeState.prototype.getDraggingElementKeys = function () {\n          return this.shapes.map(function (shape) {\n            return shape.key;\n          });\n        };\n\n        MouseHandlerResizeShapeState.prototype.getNormalizedSize = function (value, minValue, maxValue) {\n          if (minValue !== undefined) value = Math.max(value, minValue);\n          if (maxValue !== undefined) value = Math.min(value, maxValue);\n          return value;\n        };\n\n        MouseHandlerResizeShapeState.prototype.getSize = function (evt, position, startSize, minWidth, minHeight, maxWidth, maxHeight, lockAspectRatio) {\n          var absDeltaX = evt.modelPoint.x - (this.startScrollLeft - evt.scrollX) - this.startPoint.x;\n          var absDeltaY = evt.modelPoint.y - (this.startScrollTop - evt.scrollY) - this.startPoint.y;\n          var deltaX = absDeltaX * Math.cos(this.rotation) - -absDeltaY * Math.sin(this.rotation);\n          var deltaY = -(absDeltaX * Math.sin(this.rotation) + -absDeltaY * Math.cos(this.rotation));\n          var newWidth;\n          var newHeight;\n          deltaY = !this.sideV && deltaY > 0 ? Math.min(startSize.height + 1, deltaY) : deltaY;\n          deltaX = !this.sideH && deltaX > 0 ? Math.min(startSize.width + 1, deltaX) : deltaX;\n          if (!this.lockH && !this.lockV && lockAspectRatio) {\n            if (Math.abs(deltaX) > Math.abs(deltaY)) {\n              newWidth = this.getNormalizedSize(this.sideH ? startSize.width + deltaX : startSize.width - deltaX, minWidth, maxWidth);\n              newHeight = startSize.height * (newWidth / startSize.width);\n            } else {\n              newHeight = this.getNormalizedSize(this.sideV ? startSize.height + deltaY : startSize.height - deltaY, minHeight, maxHeight);\n              newWidth = startSize.width * (newHeight / startSize.height);\n            }\n          } else {\n            deltaX = this.lockH ? 0 : deltaX;\n            deltaY = this.lockV ? 0 : deltaY;\n            newWidth = this.getNormalizedSize(this.sideH ? startSize.width + deltaX : startSize.width - deltaX, minWidth, maxWidth);\n            newHeight = this.getNormalizedSize(this.sideV ? startSize.height + deltaY : startSize.height - deltaY, minHeight, maxHeight);\n          }\n          if (!this.lockH) newWidth = this.getSnappedPosition(evt, position.x + newWidth, true) - position.x;\n          if (!this.lockV) newHeight = this.getSnappedPosition(evt, position.y + newHeight, false) - position.y;\n          return new size_1.Size(newWidth, newHeight);\n        };\n\n        MouseHandlerResizeShapeState.prototype.getPosition = function (evt, size, startSize, startPosition) {\n          var x = startPosition.x;\n          var y = startPosition.y;\n\n          if (this.resizeEventSource === Event_1.ResizeEventSource.ResizeBox_N || this.resizeEventSource === Event_1.ResizeEventSource.ResizeBox_NE || this.resizeEventSource === Event_1.ResizeEventSource.ResizeBox_NW) {\n            y += startSize.height - size.height;\n            var snappedY = this.getSnappedPosition(evt, y, false);\n            size.height += y - snappedY;\n            y = snappedY;\n          }\n\n          if (this.resizeEventSource === Event_1.ResizeEventSource.ResizeBox_W || this.resizeEventSource === Event_1.ResizeEventSource.ResizeBox_NW || this.resizeEventSource === Event_1.ResizeEventSource.ResizeBox_SW) {\n            x += startSize.width - size.width;\n            var snappedX = this.getSnappedPosition(evt, x, true);\n            size.width += x - snappedX;\n            x = snappedX;\n          }\n\n          return new point_1.Point(x, y);\n        };\n\n        MouseHandlerResizeShapeState.prototype.getSnappedPosition = function (evt, pos, isHorizontal) {\n          return this.handler.getSnappedPositionOnResizeShape(evt, pos, isHorizontal);\n        };\n\n        return MouseHandlerResizeShapeState;\n      }(MouseHandlerDraggingState_1.MouseHandlerDraggingState);\n\n      exports.MouseHandlerResizeShapeState = MouseHandlerResizeShapeState;\n      /***/\n    },\n    /* 308 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics211 = function extendStatics(d, b) {\n          _extendStatics211 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics211(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics211(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MouseHandlerMoveConnectorSideState = void 0;\n\n      var MouseHandlerDraggingState_1 = __webpack_require__(32);\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var MouseHandlerMoveConnectorSideState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerMoveConnectorSideState, _super);\n\n        function MouseHandlerMoveConnectorSideState(handler, history, model) {\n          var _this = _super.call(this, handler, history) || this;\n\n          _this.model = model;\n          return _this;\n        }\n\n        MouseHandlerMoveConnectorSideState.prototype.onMouseDown = function (evt) {\n          this.startPoint = evt.modelPoint;\n          this.connectorKey = evt.source.key;\n          this.pointIndex = parseInt(evt.source.value) + 1;\n\n          _super.prototype.onMouseDown.call(this, evt);\n        };\n\n        MouseHandlerMoveConnectorSideState.prototype.onApplyChanges = function (evt) {\n          var point = this.getSnappedPoint(evt, evt.modelPoint);\n          var connector = this.model.findConnector(this.connectorKey);\n\n          if (!this.pointCreated) {\n            this.handler.addInteractingItem(connector);\n            ModelUtils_1.ModelUtils.addConnectorPoint(this.history, this.connectorKey, this.pointIndex, point.clone());\n            this.pointCreated = true;\n          } else ModelUtils_1.ModelUtils.moveConnectorPoint(this.history, connector, this.pointIndex, point);\n\n          this.handler.tryUpdateModelSize();\n        };\n\n        MouseHandlerMoveConnectorSideState.prototype.onFinishWithChanges = function () {\n          ModelUtils_1.ModelUtils.deleteConnectorUnnecessaryPoints(this.history, this.model.findConnector(this.connectorKey));\n        };\n\n        MouseHandlerMoveConnectorSideState.prototype.getDraggingElementKeys = function () {\n          return [this.connectorKey];\n        };\n\n        return MouseHandlerMoveConnectorSideState;\n      }(MouseHandlerDraggingState_1.MouseHandlerDraggingState);\n\n      exports.MouseHandlerMoveConnectorSideState = MouseHandlerMoveConnectorSideState;\n      /***/\n    },\n    /* 309 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics212 = function extendStatics(d, b) {\n          _extendStatics212 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics212(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics212(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MouseHandlerDragParameterPointState = void 0;\n\n      var MouseHandlerDraggingState_1 = __webpack_require__(32);\n\n      var ChangeShapeParametersHistoryItem_1 = __webpack_require__(114);\n\n      var MouseHandlerDragParameterPointState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerDragParameterPointState, _super);\n\n        function MouseHandlerDragParameterPointState(handler, history, model) {\n          var _this = _super.call(this, handler, history) || this;\n\n          _this.model = model;\n          _this.startScrollLeft = 0;\n          _this.startScrollTop = 0;\n          return _this;\n        }\n\n        MouseHandlerDragParameterPointState.prototype.onMouseDown = function (evt) {\n          this.startPoint = evt.modelPoint;\n          this.shape = this.model.findShape(evt.source.key);\n          this.parameterPointKey = evt.source.value;\n          this.startParameters = this.shape.parameters.clone();\n\n          _super.prototype.onMouseDown.call(this, evt);\n        };\n\n        MouseHandlerDragParameterPointState.prototype.onApplyChanges = function (evt) {\n          var offset = this.handler.getSnappedOffsetOnDragPoint(evt, this.startPoint);\n          var parameters = this.startParameters.clone();\n          this.shape.description.modifyParameters(this.shape, parameters, offset.x, offset.y);\n          this.history.addAndRedo(new ChangeShapeParametersHistoryItem_1.ChangeShapeParametersHistoryItem(this.shape.key, parameters));\n        };\n\n        MouseHandlerDragParameterPointState.prototype.getDraggingElementKeys = function () {\n          return [this.shape.key];\n        };\n\n        return MouseHandlerDragParameterPointState;\n      }(MouseHandlerDraggingState_1.MouseHandlerDraggingState);\n\n      exports.MouseHandlerDragParameterPointState = MouseHandlerDragParameterPointState;\n      /***/\n    },\n    /* 310 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics213 = function extendStatics(d, b) {\n          _extendStatics213 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics213(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics213(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MouseHandlerCreateConnectorState = void 0;\n\n      var Connector_1 = __webpack_require__(7);\n\n      var AddConnectionHistoryItem_1 = __webpack_require__(47);\n\n      var AddConnectorHistoryItem_1 = __webpack_require__(63);\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      var MouseHandlerMoveConnectorPointStateBase_1 = __webpack_require__(149);\n\n      var SetSelectionHistoryItem_1 = __webpack_require__(65);\n\n      var AddShapeHistoryItem_1 = __webpack_require__(51);\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var DeleteConnectionHistoryItem_1 = __webpack_require__(64);\n\n      var DeleteConnectorHistoryItem_1 = __webpack_require__(115);\n\n      var MouseHandlerCreateConnectorState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerCreateConnectorState, _super);\n\n        function MouseHandlerCreateConnectorState(handler, history, model, visualizerManager, shapeDescriptionManager, selection, connectionPointIndex) {\n          var _this = _super.call(this, handler, history, model, visualizerManager) || this;\n\n          _this.shapeDescriptionManager = shapeDescriptionManager;\n          _this.selection = selection;\n          _this.connectionPointIndex = connectionPointIndex;\n          return _this;\n        }\n\n        MouseHandlerCreateConnectorState.prototype.onMouseDown = function (evt) {\n          if (this.connectionPointIndex === undefined) this.connectionPointIndex = parseInt(evt.source.value);\n          this.connectedItem = this.model.findItem(evt.source.key);\n          this.pointIndex = 1;\n          this.pointPosition = Connector_1.ConnectorPosition.End;\n\n          _super.prototype.onMouseDown.call(this, evt);\n        };\n\n        MouseHandlerCreateConnectorState.prototype.onMouseUp = function (evt) {\n          if (this.connector && !this.connector.endItem) this.createNewShapeAtConnectorEnd(evt);\n\n          _super.prototype.onMouseUp.call(this, evt);\n        };\n\n        MouseHandlerCreateConnectorState.prototype.onApplyChanges = function (evt) {\n          var point = this.getSnappedPoint(evt, evt.modelPoint);\n\n          if (!this.connector) {\n            var historyItem = new AddConnectorHistoryItem_1.AddConnectorHistoryItem([this.connectedItem.getConnectionPointPosition(this.connectionPointIndex, point), point]);\n            this.history.addAndRedo(historyItem);\n            this.connector = this.model.findConnector(historyItem.connectorKey);\n            this.handler.addInteractingItem(this.connector);\n            this.history.addAndRedo(new AddConnectionHistoryItem_1.AddConnectionHistoryItem(this.connector, this.connectedItem, this.connectionPointIndex, Connector_1.ConnectorPosition.Begin));\n            ModelUtils_1.ModelUtils.updateNewConnectorProperties(this.history, this.selection, this.connector.key);\n          } else _super.prototype.onApplyChanges.call(this, evt);\n        };\n\n        MouseHandlerCreateConnectorState.prototype.checkStoredPermissionsOnFinish = function () {\n          if (this.connector && this.connector.endItem) _super.prototype.checkStoredPermissionsOnFinish.call(this);\n        };\n\n        MouseHandlerCreateConnectorState.prototype.onFinishWithChanges = function () {\n          _super.prototype.onFinishWithChanges.call(this);\n\n          this.history.addAndRedo(new SetSelectionHistoryItem_1.SetSelectionHistoryItem(this.selection, [this.connector.key]));\n        };\n\n        MouseHandlerCreateConnectorState.prototype.createNewShapeAtConnectorEnd = function (evt) {\n          var _this = this;\n\n          var beginShape = this.connector && this.connector.beginItem;\n          if (!beginShape) return;\n          var side = this.getNewShapeSide(this.connector);\n          var point = this.getSnappedPoint(evt, evt.modelPoint);\n          var category = this.shapeDescriptionManager.getCategoryByDescription(beginShape.description);\n\n          var getPositionToInsertShapeTo = function getPositionToInsertShapeTo(shape) {\n            var clonedShape = shape.clone();\n            clonedShape.position = point.clone();\n\n            var position = _this.getNewShapePosition(clonedShape, side);\n\n            return _this.handler.getSnappedPointOnDragPoint(evt, position);\n          };\n\n          this.handler.showContextToolbox(point, getPositionToInsertShapeTo, side, category, function (shapeType) {\n            if (!shapeType) return;\n\n            _this.handler.beginStorePermissions();\n\n            _this.history.beginTransaction();\n\n            var historyItem = new AddShapeHistoryItem_1.AddShapeHistoryItem(_this.shapeDescriptionManager.get(shapeType), point);\n\n            _this.history.addAndRedo(historyItem);\n\n            var shape = _this.model.findShape(historyItem.shapeKey);\n\n            var container = _this.targetItem && _this.model.findNearestContainer(_this.targetItem.key);\n\n            if (container) ModelUtils_1.ModelUtils.insertToContainer(_this.history, _this.model, shape, container);\n\n            var newPosition = _this.getNewShapePosition(shape, side);\n\n            ModelUtils_1.ModelUtils.setShapePosition(_this.history, _this.model, shape, _this.getSnappedPoint(evt, newPosition));\n            ModelUtils_1.ModelUtils.updateNewShapeProperties(_this.history, _this.selection, shape.key);\n\n            _this.history.addAndRedo(new AddConnectionHistoryItem_1.AddConnectionHistoryItem(_this.connector, shape, shape.getConnectionPointIndexForSide(side), Connector_1.ConnectorPosition.End));\n\n            if (container) ModelUtils_1.ModelUtils.updateConnectorContainer(_this.history, _this.model, _this.connector);\n            ModelUtils_1.ModelUtils.updateShapeAttachedConnectors(_this.history, _this.model, shape);\n\n            if (!_this.handler.isStoredPermissionsGranted()) {\n              _this.handler.lockPermissions();\n\n              _this.history.undoTransaction();\n\n              _this.handler.unlockPermissions();\n\n              _this.checkNewConnectorPermissions();\n            } else {\n              _this.handler.tryUpdateModelSize();\n\n              _this.history.addAndRedo(new SetSelectionHistoryItem_1.SetSelectionHistoryItem(_this.selection, [shape.key]));\n            }\n\n            _this.history.endTransaction();\n\n            _this.handler.endStorePermissions();\n\n            _this.handler.hideContextToolbox(true);\n          }, function () {\n            _this.checkNewConnectorPermissions();\n          });\n        };\n\n        MouseHandlerCreateConnectorState.prototype.checkNewConnectorPermissions = function () {\n          if (this.connector && !this.handler.canPerformChangeConnection(this.connector, {\n            position: Connector_1.ConnectorPosition.End,\n            connectionPointIndex: -1\n          })) {\n            this.handler.lockPermissions();\n            this.history.beginTransaction();\n            this.history.addAndRedo(new SetSelectionHistoryItem_1.SetSelectionHistoryItem(this.selection, []));\n            if (this.connector.beginItem) this.history.addAndRedo(new DeleteConnectionHistoryItem_1.DeleteConnectionHistoryItem(this.connector, Connector_1.ConnectorPosition.Begin));\n            if (this.connector.endItem) this.history.addAndRedo(new DeleteConnectionHistoryItem_1.DeleteConnectionHistoryItem(this.connector, Connector_1.ConnectorPosition.End));\n            this.history.addAndRedo(new DeleteConnectorHistoryItem_1.DeleteConnectorHistoryItem(this.connector.key));\n            this.history.endTransaction();\n            this.handler.unlockPermissions();\n          }\n        };\n\n        MouseHandlerCreateConnectorState.prototype.getNewShapePosition = function (shape, side) {\n          switch (side) {\n            case DiagramItem_1.ConnectionPointSide.North:\n              return shape.position.clone().offset(-shape.size.width / 2, 0);\n\n            case DiagramItem_1.ConnectionPointSide.South:\n              return shape.position.clone().offset(-shape.size.width / 2, -shape.size.height);\n\n            case DiagramItem_1.ConnectionPointSide.East:\n              return shape.position.clone().offset(-shape.size.width, -shape.size.height / 2);\n\n            case DiagramItem_1.ConnectionPointSide.West:\n              return shape.position.clone().offset(0, -shape.size.height / 2);\n          }\n        };\n\n        MouseHandlerCreateConnectorState.prototype.getNewShapeSide = function (connector) {\n          var renderPoints = connector.getRenderPoints();\n          return MouseHandlerCreateConnectorState.getNewShapeSideByConnectorPoints(renderPoints[renderPoints.length - 1], renderPoints[renderPoints.length - 2]);\n        };\n\n        MouseHandlerCreateConnectorState.prototype.getSourceItem = function () {\n          return this.connectedItem;\n        };\n\n        MouseHandlerCreateConnectorState.getNewShapeSideByConnectorPoints = function (point, directionPoint) {\n          if (point.x === directionPoint.x) {\n            if (point.y > directionPoint.y) return DiagramItem_1.ConnectionPointSide.North;else return DiagramItem_1.ConnectionPointSide.South;\n          } else if (point.x > directionPoint.x) {\n            if (point.y === directionPoint.y) return DiagramItem_1.ConnectionPointSide.West;else if (point.y > directionPoint.y) {\n              if (Math.abs(point.x - directionPoint.x) > Math.abs(point.y - directionPoint.y)) return DiagramItem_1.ConnectionPointSide.West;else return DiagramItem_1.ConnectionPointSide.North;\n            } else if (Math.abs(point.x - directionPoint.x) > Math.abs(point.y - directionPoint.y)) return DiagramItem_1.ConnectionPointSide.West;else return DiagramItem_1.ConnectionPointSide.South;\n          } else if (point.y === directionPoint.y) return DiagramItem_1.ConnectionPointSide.East;else if (point.y > directionPoint.y) {\n            if (Math.abs(point.x - directionPoint.x) > Math.abs(point.y - directionPoint.y)) return DiagramItem_1.ConnectionPointSide.East;else return DiagramItem_1.ConnectionPointSide.North;\n          } else if (Math.abs(point.x - directionPoint.x) > Math.abs(point.y - directionPoint.y)) return DiagramItem_1.ConnectionPointSide.East;else return DiagramItem_1.ConnectionPointSide.South;\n        };\n\n        return MouseHandlerCreateConnectorState;\n      }(MouseHandlerMoveConnectorPointStateBase_1.MouseHandlerMoveConnectorPointStateBase);\n\n      exports.MouseHandlerCreateConnectorState = MouseHandlerCreateConnectorState;\n      /***/\n    },\n    /* 311 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics214 = function extendStatics(d, b) {\n          _extendStatics214 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics214(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics214(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MouseHandlerMoveConnectorOrthogonalSideState = void 0;\n\n      var point_1 = __webpack_require__(1);\n\n      var Connector_1 = __webpack_require__(7);\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var MouseHandlerDraggingState_1 = __webpack_require__(32);\n\n      var MouseHandlerMoveConnectorOrthogonalSideState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerMoveConnectorOrthogonalSideState, _super);\n\n        function MouseHandlerMoveConnectorOrthogonalSideState(handler, history, model) {\n          var _this = _super.call(this, handler, history) || this;\n\n          _this.model = model;\n          return _this;\n        }\n\n        MouseHandlerMoveConnectorOrthogonalSideState.prototype.onMouseDown = function (evt) {\n          this.startPoint = evt.modelPoint;\n          this.connector = this.model.findConnector(evt.source.key);\n          this.handler.addInteractingItem(this.connector);\n          var renderPointIndexes = evt.source.value.split(\"_\");\n          var renderPointIndex1 = parseInt(renderPointIndexes[0]);\n          var renderPointIndex2 = parseInt(renderPointIndexes[1]);\n          var points = this.connector.getRenderPoints(true);\n          this.renderPoint1 = points[renderPointIndex1].clone();\n          this.renderPoint2 = points[renderPointIndex2].clone();\n          this.isVerticalOrientation = this.renderPoint1.x === this.renderPoint2.x;\n\n          if (this.renderPoint1.pointIndex !== -1) {\n            this.pointIndex1 = this.renderPoint1.pointIndex;\n\n            if (this.pointIndex1 === 0) {\n              this.pointIndex1++;\n              this.correctEdgePoint(this.renderPoint1, this.renderPoint2, this.connector.beginItem, this.connector.beginConnectionPointIndex);\n            } else this.point1 = this.connector.points[this.pointIndex1].clone();\n          } else this.pointIndex1 = this.findPointIndex(points, renderPointIndex1, false) + 1;\n\n          if (this.renderPoint2.pointIndex !== -1) {\n            this.pointIndex2 = this.renderPoint2.pointIndex;\n            if (this.pointIndex2 === this.connector.points.length - 1) this.correctEdgePoint(this.renderPoint2, this.renderPoint1, this.connector.endItem, this.connector.endConnectionPointIndex);else this.point2 = this.connector.points[this.pointIndex2].clone();\n          } else this.pointIndex2 = this.findPointIndex(points, renderPointIndex2, true);\n\n          _super.prototype.onMouseDown.call(this, evt);\n        };\n\n        MouseHandlerMoveConnectorOrthogonalSideState.prototype.onApplyChanges = function (evt) {\n          var _this = this;\n\n          if (!this.pointCreated) {\n            var createdPoint1_1;\n            var createdPoint2_1;\n\n            if (this.point1 === undefined) {\n              this.point1 = new point_1.Point(this.renderPoint1.x, this.renderPoint1.y);\n              ModelUtils_1.ModelUtils.addConnectorPoint(this.history, this.connector.key, this.pointIndex1, this.point1.clone());\n              createdPoint1_1 = this.point1.clone();\n              this.pointIndex2++;\n            }\n\n            if (this.point2 === undefined) {\n              this.point2 = new point_1.Point(this.renderPoint2.x, this.renderPoint2.y);\n              ModelUtils_1.ModelUtils.addConnectorPoint(this.history, this.connector.key, this.pointIndex2, this.point2.clone());\n              createdPoint2_1 = this.point2.clone();\n            }\n\n            var unnecessaryPoints = ModelUtils_1.ModelUtils.createUnnecessaryPoints(this.connector.points, this.connector.skippedRenderPoints, function (p) {\n              return (!createdPoint1_1 || !p.equals(createdPoint1_1)) && (!createdPoint2_1 || !p.equals(createdPoint2_1));\n            });\n            Object.keys(unnecessaryPoints).forEach(function (key) {\n              var pointIndex = parseInt(key);\n              if (pointIndex < _this.pointIndex1) _this.pointIndex1--;\n              if (pointIndex < _this.pointIndex2) _this.pointIndex2--;\n            });\n            this.pointCreated = true;\n          }\n\n          var point = this.getSnappedPoint(evt, evt.modelPoint);\n\n          if (this.isVerticalOrientation) {\n            this.point1.x = point.x;\n            this.point2.x = point.x;\n          } else {\n            this.point1.y = point.y;\n            this.point2.y = point.y;\n          }\n\n          ModelUtils_1.ModelUtils.moveConnectorPoint(this.history, this.connector, this.pointIndex1, this.point1.clone());\n          ModelUtils_1.ModelUtils.moveConnectorPoint(this.history, this.connector, this.pointIndex2, this.point2.clone());\n          this.handler.tryUpdateModelSize();\n        };\n\n        MouseHandlerMoveConnectorOrthogonalSideState.prototype.onFinishWithChanges = function () {\n          ModelUtils_1.ModelUtils.deleteConnectorUnnecessaryPoints(this.history, this.connector, true);\n        };\n\n        MouseHandlerMoveConnectorOrthogonalSideState.prototype.findPointIndex = function (points, index, direction) {\n          var point;\n\n          while (point = points[index]) {\n            if (point.pointIndex !== -1) return point.pointIndex;\n            index += direction ? 1 : -1;\n          }\n        };\n\n        MouseHandlerMoveConnectorOrthogonalSideState.prototype.correctEdgePoint = function (point, directionPoint, item, connectionPointIndex) {\n          var offset = 0;\n\n          if (item) {\n            var side = item.getConnectionPointSideByIndex(connectionPointIndex);\n            var rect = item.rectangle;\n            offset = Connector_1.Connector.minOffset;\n\n            switch (side) {\n              case DiagramItem_1.ConnectionPointSide.South:\n                offset += rect.bottom - point.y;\n                break;\n\n              case DiagramItem_1.ConnectionPointSide.North:\n                offset += point.y - rect.y;\n                break;\n\n              case DiagramItem_1.ConnectionPointSide.East:\n                offset += rect.right - point.x;\n                break;\n\n              case DiagramItem_1.ConnectionPointSide.West:\n                offset += point.x - rect.x;\n                break;\n            }\n          }\n\n          if (this.isVerticalOrientation) {\n            if (point.y > directionPoint.y) point.y -= Math.min(offset, point.y - directionPoint.y);else point.y += Math.min(offset, directionPoint.y - point.y);\n          } else if (point.x > directionPoint.x) point.x -= Math.min(offset, point.x - directionPoint.x);else point.x += Math.min(offset, directionPoint.x - point.x);\n        };\n\n        MouseHandlerMoveConnectorOrthogonalSideState.prototype.getDraggingElementKeys = function () {\n          return [this.connector.key];\n        };\n\n        return MouseHandlerMoveConnectorOrthogonalSideState;\n      }(MouseHandlerDraggingState_1.MouseHandlerDraggingState);\n\n      exports.MouseHandlerMoveConnectorOrthogonalSideState = MouseHandlerMoveConnectorOrthogonalSideState;\n      /***/\n    },\n    /* 312 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics215 = function extendStatics(d, b) {\n          _extendStatics215 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics215(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics215(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MouseHandlerToolboxDraggingState = exports.MouseHandlerBeforeToolboxDraggingState = void 0;\n\n      var Event_1 = __webpack_require__(11);\n\n      var point_1 = __webpack_require__(1);\n\n      var AddShapeHistoryItem_1 = __webpack_require__(51);\n\n      var SetSelectionHistoryItem_1 = __webpack_require__(65);\n\n      var MouseHandlerDraggingState_1 = __webpack_require__(32);\n\n      var DeleteShapeHistoryItem_1 = __webpack_require__(116);\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var MouseHandlerStateBase_1 = __webpack_require__(39);\n\n      var ModelOperationSettings_1 = __webpack_require__(16);\n\n      var NON_DOCUMENT_TIMER = 500;\n      var LOCK_UPDATEPAGESIZE_TIMER = 300;\n\n      var MouseHandlerBeforeToolboxDraggingState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerBeforeToolboxDraggingState, _super);\n\n        function MouseHandlerBeforeToolboxDraggingState(handler, history, model, selection, visualizerManager, shapeDescriptionManager) {\n          var _this = _super.call(this, handler) || this;\n\n          _this.history = history;\n          _this.model = model;\n          _this.selection = selection;\n          _this.visualizerManager = visualizerManager;\n          _this.shapeDescriptionManager = shapeDescriptionManager;\n          _this.isModelEmpty = model.items.length === 0;\n          return _this;\n        }\n\n        MouseHandlerBeforeToolboxDraggingState.prototype.cancelChanges = function () {\n          this.tryRemoveTimer();\n        };\n\n        MouseHandlerBeforeToolboxDraggingState.prototype.onDragStart = function (evt) {\n          this.dragging = evt;\n        };\n\n        MouseHandlerBeforeToolboxDraggingState.prototype.onDragEnd = function (evt) {\n          this.cancelChanges();\n          this.handler.switchToDefaultState();\n        };\n\n        MouseHandlerBeforeToolboxDraggingState.prototype.onMouseMove = function (evt) {\n          var _this = this;\n\n          if (evt.source.type > Event_1.MouseEventElementType.Background) {\n            this.tryRemoveTimer();\n            this.switchToDraggingState(evt, false);\n          } else if (evt.source.type === Event_1.MouseEventElementType.Background && !this.isModelEmpty) {\n            this.savedEvt = evt;\n            if (this.nonPageAreaTimer === undefined) this.nonPageAreaTimer = setTimeout(function () {\n              return _this.switchToDraggingState(_this.savedEvt, true);\n            }, NON_DOCUMENT_TIMER);\n          } else if (this.nonPageAreaTimer !== undefined) this.tryRemoveTimer();\n        };\n\n        MouseHandlerBeforeToolboxDraggingState.prototype.switchToDraggingState = function (evt, skipLockUpdatePageSize) {\n          this.handler.switchState(new MouseHandlerToolboxDraggingState(this.handler, this.history, this.model, this.selection, this.visualizerManager, this.shapeDescriptionManager, skipLockUpdatePageSize));\n          this.handler.state.onDragStart(this.dragging);\n          this.handler.state.onMouseMove(evt);\n        };\n\n        MouseHandlerBeforeToolboxDraggingState.prototype.tryRemoveTimer = function () {\n          if (this.nonPageAreaTimer !== undefined) {\n            clearTimeout(this.nonPageAreaTimer);\n            delete this.nonPageAreaTimer;\n          }\n        };\n\n        MouseHandlerBeforeToolboxDraggingState.prototype.finish = function () {\n          this.tryRemoveTimer();\n        };\n\n        return MouseHandlerBeforeToolboxDraggingState;\n      }(MouseHandlerStateBase_1.MouseHandlerCancellableState);\n\n      exports.MouseHandlerBeforeToolboxDraggingState = MouseHandlerBeforeToolboxDraggingState;\n\n      var MouseHandlerToolboxDraggingState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerToolboxDraggingState, _super);\n\n        function MouseHandlerToolboxDraggingState(handler, history, model, selection, visualizerManager, shapeDescriptionManager, skipLockUpdatePageSize) {\n          var _this = _super.call(this, handler, history) || this;\n\n          _this.model = model;\n          _this.selection = selection;\n          _this.visualizerManager = visualizerManager;\n          _this.shapeDescriptionManager = shapeDescriptionManager;\n          if (!skipLockUpdatePageSize) _this.updatePageSizeTimer = setTimeout(function () {\n            _this.processAndRemoveUpdatePageSizeTimer();\n          }, LOCK_UPDATEPAGESIZE_TIMER);\n          return _this;\n        }\n\n        MouseHandlerToolboxDraggingState.prototype.cancelChanges = function () {\n          this.tryRemoveUpdatePageSizeTimer();\n\n          _super.prototype.cancelChanges.call(this);\n        };\n\n        MouseHandlerToolboxDraggingState.prototype.tryRemoveUpdatePageSizeTimer = function () {\n          if (this.updatePageSizeTimer !== undefined) {\n            clearTimeout(this.updatePageSizeTimer);\n            delete this.updatePageSizeTimer;\n          }\n        };\n\n        MouseHandlerToolboxDraggingState.prototype.processAndRemoveUpdatePageSizeTimer = function () {\n          if (this.updatePageSizeTimer !== undefined) {\n            this.handler.tryUpdateModelSize();\n            delete this.updatePageSizeTimer;\n          }\n        };\n\n        MouseHandlerToolboxDraggingState.prototype.onMouseMove = function (evt) {\n          _super.prototype.onMouseMove.call(this, evt);\n\n          var shape = this.model.findShape(this.shapeKey);\n\n          if (shape) {\n            this.visualizerManager.setExtensionLines([shape]);\n            var container = ModelUtils_1.ModelUtils.findContainerByEventKey(this.model, this.selection, evt.source.key);\n            if (container && this.allowInsertToContainer(evt, shape, container)) this.visualizerManager.setContainerTarget(container, evt.source.type);else this.visualizerManager.resetContainerTarget();\n          }\n        };\n\n        MouseHandlerToolboxDraggingState.prototype.getDraggingElementKeys = function () {\n          return this.shapeKey === undefined ? [] : [this.shapeKey];\n        };\n\n        MouseHandlerToolboxDraggingState.prototype.onApplyChanges = function (evt) {\n          var _this = this;\n\n          if (evt.source.type === Event_1.MouseEventElementType.Undefined) {\n            this.dragging.onCaptured(false);\n\n            if (this.shapeKey !== undefined && !this.deleteHistoryItem) {\n              var shape = this.model.findShape(this.shapeKey);\n              ModelUtils_1.ModelUtils.detachConnectors(this.history, shape);\n              ModelUtils_1.ModelUtils.removeFromContainer(this.history, this.model, shape);\n              this.deleteHistoryItem = new DeleteShapeHistoryItem_1.DeleteShapeHistoryItem(this.shapeKey, true);\n              this.history.addAndRedo(this.deleteHistoryItem);\n            }\n          } else {\n            this.dragging.onCaptured(true);\n\n            if (this.shapeKey === undefined) {\n              this.startPoint = evt.modelPoint;\n              this.shapeKey = this.insertToolboxItem(evt);\n              var shape_1 = this.model.findShape(this.shapeKey);\n              if (shape_1) this.handler.addInteractingItem(shape_1, ModelOperationSettings_1.DiagramModelOperation.AddShape);\n            }\n\n            if (this.deleteHistoryItem) {\n              this.history.undoTransactionTo(this.deleteHistoryItem);\n              delete this.deleteHistoryItem;\n            }\n\n            var pos = this.getPosition(evt, this.startShapePosition);\n            var shape = this.model.findShape(this.shapeKey);\n            ModelUtils_1.ModelUtils.setShapePosition(this.history, this.model, shape, pos);\n            ModelUtils_1.ModelUtils.updateMovingShapeConnections(this.history, shape, this.connectorsWithoutBeginItemInfo, this.connectorsWithoutEndItemInfo, function () {\n              _this.visualizerManager.resetConnectionTarget();\n\n              _this.visualizerManager.resetConnectionPoints();\n            }, function (shape, connectionPointIndex) {\n              _this.visualizerManager.setConnectionTarget(shape, Event_1.MouseEventElementType.Shape);\n\n              _this.visualizerManager.setConnectionPoints(shape, Event_1.MouseEventElementType.Shape, connectionPointIndex, true);\n            }, function (connector) {\n              return _this.handler.addInteractingItem(connector);\n            });\n            ModelUtils_1.ModelUtils.updateShapeAttachedConnectors(this.history, this.model, shape);\n            var container = ModelUtils_1.ModelUtils.findContainerByEventKey(this.model, this.selection, evt.source.key);\n            if (shape && container && this.allowInsertToContainer(evt, shape, container)) ModelUtils_1.ModelUtils.insertToContainer(this.history, this.model, shape, container);else ModelUtils_1.ModelUtils.removeFromContainer(this.history, this.model, shape);\n            if (this.updatePageSizeTimer === undefined) this.handler.tryUpdateModelSize(function (offsetLeft, offsetTop) {\n              _this.connectorsWithoutBeginItemInfo.forEach(function (pi) {\n                pi.point.x += offsetLeft;\n                pi.point.y += offsetTop;\n              });\n\n              _this.connectorsWithoutEndItemInfo.forEach(function (pi) {\n                pi.point.x += offsetLeft;\n                pi.point.y += offsetTop;\n              });\n            });\n          }\n        };\n\n        MouseHandlerToolboxDraggingState.prototype.onFinishWithChanges = function () {\n          if (!this.deleteHistoryItem) this.history.addAndRedo(new SetSelectionHistoryItem_1.SetSelectionHistoryItem(this.selection, [this.shapeKey]));\n        };\n\n        MouseHandlerToolboxDraggingState.prototype.onDragStart = function (evt) {\n          this.dragging = evt;\n          this.connectorsWithoutBeginItemInfo = ModelUtils_1.ModelUtils.getConnectorsWithoutBeginItemInfo(this.model);\n          this.connectorsWithoutEndItemInfo = ModelUtils_1.ModelUtils.getConnectorsWithoutEndItemInfo(this.model);\n        };\n\n        MouseHandlerToolboxDraggingState.prototype.onDragEnd = function (evt) {\n          if (this.shapeKey !== undefined && evt.source.type === Event_1.MouseEventElementType.Undefined) this.cancelChanges();\n          this.handler.switchToDefaultState();\n        };\n\n        MouseHandlerToolboxDraggingState.prototype.finish = function () {\n          this.visualizerManager.resetExtensionLines();\n          this.visualizerManager.resetContainerTarget();\n          this.visualizerManager.resetConnectionTarget();\n          this.visualizerManager.resetConnectionPoints();\n          this.processAndRemoveUpdatePageSizeTimer();\n          this.dragging.onFinishDragging();\n\n          _super.prototype.finish.call(this);\n        };\n\n        MouseHandlerToolboxDraggingState.prototype.insertToolboxItem = function (evt) {\n          var description = this.shapeDescriptionManager.get(this.dragging.data);\n          this.startShapePosition = this.getSnappedPoint(evt, new point_1.Point(evt.modelPoint.x - description.defaultSize.width / 2, evt.modelPoint.y - description.defaultSize.height / 2));\n          var historyItem = new AddShapeHistoryItem_1.AddShapeHistoryItem(description, this.startShapePosition);\n          this.history.addAndRedo(historyItem);\n          ModelUtils_1.ModelUtils.updateNewShapeProperties(this.history, this.selection, historyItem.shapeKey);\n          return historyItem.shapeKey;\n        };\n\n        MouseHandlerToolboxDraggingState.prototype.allowInsertToContainer = function (evt, item, container) {\n          if (this.handler.canMultipleSelection(evt)) return false;\n          return container && container.expanded && ModelUtils_1.ModelUtils.canInsertToContainer(this.model, item, container);\n        };\n\n        MouseHandlerToolboxDraggingState.prototype.getPosition = function (evt, basePoint) {\n          return this.getSnappedPoint(evt, new point_1.Point(basePoint.x + evt.modelPoint.x - this.startPoint.x, basePoint.y + evt.modelPoint.y - this.startPoint.y));\n        };\n\n        return MouseHandlerToolboxDraggingState;\n      }(MouseHandlerDraggingState_1.MouseHandlerDraggingState);\n\n      exports.MouseHandlerToolboxDraggingState = MouseHandlerToolboxDraggingState;\n      /***/\n    },\n    /* 313 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics216 = function extendStatics(d, b) {\n          _extendStatics216 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics216(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics216(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MouseHandlerMoveConnectorTextState = void 0;\n\n      var MouseHandlerDraggingState_1 = __webpack_require__(32);\n\n      var ChangeConnectorTextPositionHistoryItem_1 = __webpack_require__(314);\n\n      var ChangeConnectorTextHistoryItem_1 = __webpack_require__(66);\n\n      var MouseHandlerMoveConnectorTextState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerMoveConnectorTextState, _super);\n\n        function MouseHandlerMoveConnectorTextState(handler, history, model) {\n          var _this = _super.call(this, handler, history) || this;\n\n          _this.model = model;\n          return _this;\n        }\n\n        MouseHandlerMoveConnectorTextState.prototype.onMouseDown = function (evt) {\n          this.connector = this.model.findConnector(evt.source.key);\n          this.position = parseFloat(evt.source.value);\n          this.text = this.connector.getText(this.position);\n          this.savedText = \"\";\n\n          _super.prototype.onMouseDown.call(this, evt);\n        };\n\n        MouseHandlerMoveConnectorTextState.prototype.onApplyChanges = function (evt) {\n          var newPosition = this.connector.getTextPositionByPoint(evt.modelPoint);\n\n          if (newPosition !== this.position) {\n            var text = this.connector.getText(newPosition);\n\n            if (text !== \"\" && text !== this.text) {\n              this.history.addAndRedo(new ChangeConnectorTextHistoryItem_1.ChangeConnectorTextHistoryItem(this.connector, newPosition, \"\"));\n              this.savedText = text;\n            }\n\n            this.history.addAndRedo(new ChangeConnectorTextPositionHistoryItem_1.ChangeConnectorTextPositionHistoryItem(this.connector, this.position, newPosition));\n\n            if (this.savedText !== \"\" && this.savedText !== text) {\n              this.history.addAndRedo(new ChangeConnectorTextHistoryItem_1.ChangeConnectorTextHistoryItem(this.connector, this.position, this.savedText));\n              this.savedText = \"\";\n            }\n\n            this.position = newPosition;\n          }\n        };\n\n        MouseHandlerMoveConnectorTextState.prototype.getDraggingElementKeys = function () {\n          return [this.connector.key];\n        };\n\n        return MouseHandlerMoveConnectorTextState;\n      }(MouseHandlerDraggingState_1.MouseHandlerDraggingState);\n\n      exports.MouseHandlerMoveConnectorTextState = MouseHandlerMoveConnectorTextState;\n      /***/\n    },\n    /* 314 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics217 = function extendStatics(d, b) {\n          _extendStatics217 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics217(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics217(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeConnectorTextPositionHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var ChangeConnectorTextPositionHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangeConnectorTextPositionHistoryItem, _super);\n\n        function ChangeConnectorTextPositionHistoryItem(connector, position, newPosition) {\n          var _this = _super.call(this) || this;\n\n          _this.connectorKey = connector.key;\n          _this.position = position;\n          _this.newPosition = newPosition;\n          return _this;\n        }\n\n        ChangeConnectorTextPositionHistoryItem.prototype.redo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          manipulator.changeConnectorTextPosition(connector, this.position, this.newPosition);\n        };\n\n        ChangeConnectorTextPositionHistoryItem.prototype.undo = function (manipulator) {\n          var connector = manipulator.model.findConnector(this.connectorKey);\n          manipulator.changeConnectorTextPosition(connector, this.newPosition, this.position);\n        };\n\n        return ChangeConnectorTextPositionHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ChangeConnectorTextPositionHistoryItem = ChangeConnectorTextPositionHistoryItem;\n      /***/\n    },\n    /* 315 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics218 = function extendStatics(d, b) {\n          _extendStatics218 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics218(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics218(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MouseHandlerToggleShapeExpandedState = void 0;\n\n      var MouseHandlerStateBase_1 = __webpack_require__(39);\n\n      var ToggleShapeExpandedHistoryItem_1 = __webpack_require__(316);\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var MouseHandlerToggleShapeExpandedState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerToggleShapeExpandedState, _super);\n\n        function MouseHandlerToggleShapeExpandedState(handler, history, model, selection) {\n          var _this = _super.call(this, handler) || this;\n\n          _this.history = history;\n          _this.model = model;\n          _this.selection = selection;\n          return _this;\n        }\n\n        MouseHandlerToggleShapeExpandedState.prototype.onMouseUp = function (evt) {\n          var shape = this.model.findShape(evt.source.key);\n\n          if (shape && !shape.isLocked) {\n            this.history.beginTransaction();\n            this.history.addAndRedo(new ToggleShapeExpandedHistoryItem_1.ToggleShapeExpandedHistoryItem(shape));\n            ModelUtils_1.ModelUtils.updateShapeAttachedConnectors(this.history, this.model, shape);\n            ModelUtils_1.ModelUtils.updateContainerConnectorsAttachedPoints(this.history, this.model, shape);\n            ModelUtils_1.ModelUtils.updateSelection(this.history, this.selection);\n            this.handler.tryUpdateModelSize();\n            this.history.endTransaction();\n            this.handler.raiseClick([shape.key]);\n          }\n\n          this.handler.switchToDefaultState();\n        };\n\n        return MouseHandlerToggleShapeExpandedState;\n      }(MouseHandlerStateBase_1.MouseHandlerStateBase);\n\n      exports.MouseHandlerToggleShapeExpandedState = MouseHandlerToggleShapeExpandedState;\n      /***/\n    },\n    /* 316 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics219 = function extendStatics(d, b) {\n          _extendStatics219 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics219(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics219(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ToggleShapeExpandedHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var ToggleShapeExpandedHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ToggleShapeExpandedHistoryItem, _super);\n\n        function ToggleShapeExpandedHistoryItem(shape) {\n          var _this = _super.call(this) || this;\n\n          _this.shapeKey = shape.key;\n          _this.expanded = shape.expanded;\n          return _this;\n        }\n\n        ToggleShapeExpandedHistoryItem.prototype.redo = function (manipulator) {\n          var shape = manipulator.model.findShape(this.shapeKey);\n          manipulator.changeShapeExpanded(shape, !this.expanded);\n        };\n\n        ToggleShapeExpandedHistoryItem.prototype.undo = function (manipulator) {\n          var shape = manipulator.model.findShape(this.shapeKey);\n          manipulator.changeShapeExpanded(shape, this.expanded);\n        };\n\n        return ToggleShapeExpandedHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ToggleShapeExpandedHistoryItem = ToggleShapeExpandedHistoryItem;\n      /***/\n    },\n    /* 317 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics220 = function extendStatics(d, b) {\n          _extendStatics220 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics220(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics220(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MouseHandlerSelectionState = void 0;\n\n      var Event_1 = __webpack_require__(11);\n\n      var rectangle_1 = __webpack_require__(13);\n\n      var MouseHandlerStateBase_1 = __webpack_require__(39);\n\n      var MouseHandlerSelectionState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerSelectionState, _super);\n\n        function MouseHandlerSelectionState(handler, selection, visualizerManager) {\n          var _this = _super.call(this, handler) || this;\n\n          _this.selection = selection;\n          _this.visualizerManager = visualizerManager;\n          return _this;\n        }\n\n        MouseHandlerSelectionState.prototype.finish = function () {\n          this.handler.raiseDragEnd([]);\n          this.visualizerManager.resetSelectionRectangle();\n\n          _super.prototype.finish.call(this);\n        };\n\n        MouseHandlerSelectionState.prototype.cancelChanges = function () {};\n\n        MouseHandlerSelectionState.prototype.onMouseDown = function (evt) {\n          this.startPoint = evt.modelPoint;\n          this.handler.raiseDragStart([]);\n        };\n\n        MouseHandlerSelectionState.prototype.onMouseMove = function (evt) {\n          if (evt.button !== Event_1.MouseButton.Left) this.handler.switchToDefaultState();else {\n            this.rectangle = rectangle_1.Rectangle.fromPoints(this.startPoint, evt.modelPoint);\n            this.visualizerManager.setSelectionRectangle(this.rectangle);\n          }\n        };\n\n        MouseHandlerSelectionState.prototype.onMouseUp = function (evt) {\n          if (this.rectangle !== undefined) this.selection.selectRect(this.rectangle);else this.selection.set([]);\n          this.rectangle = undefined;\n          this.handler.switchToDefaultState();\n        };\n\n        return MouseHandlerSelectionState;\n      }(MouseHandlerStateBase_1.MouseHandlerCancellableState);\n\n      exports.MouseHandlerSelectionState = MouseHandlerSelectionState;\n      /***/\n    },\n    /* 318 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics221 = function extendStatics(d, b) {\n          _extendStatics221 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics221(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics221(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MouseHandlerZoomOnWheelState = void 0;\n\n      var MouseHandlerStateBase_1 = __webpack_require__(39);\n\n      var Event_1 = __webpack_require__(11);\n\n      var Settings_1 = __webpack_require__(27);\n\n      var MouseHandlerZoomOnWheelState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerZoomOnWheelState, _super);\n\n        function MouseHandlerZoomOnWheelState(handler, settings, view) {\n          var _this = _super.call(this, handler) || this;\n\n          _this.settings = settings;\n          _this.view = view;\n          return _this;\n        }\n\n        MouseHandlerZoomOnWheelState.prototype.onMouseWheel = function (evt) {\n          if (!this.trySwitchToDefault(evt)) {\n            this.settings.zoomLevel = this.view.getNextStepZoom(evt.deltaY < 0);\n            if (evt.source.type === Event_1.MouseEventElementType.Background) this.view.resetScroll();else {\n              this.view.scrollTo(evt.modelPoint, evt.offsetPoint);\n              this.view.normalize();\n            }\n            evt.preventDefault = true;\n            return true;\n          } else return this.handler.state.onMouseWheel(evt);\n        };\n\n        MouseHandlerZoomOnWheelState.prototype.onMouseUp = function (evt) {\n          this.handler.switchToDefaultState();\n          this.handler.state.onMouseUp(evt);\n        };\n\n        MouseHandlerZoomOnWheelState.prototype.onMouseDown = function (evt) {\n          this.handler.switchToDefaultState();\n          this.handler.state.onMouseDown(evt);\n        };\n\n        MouseHandlerZoomOnWheelState.prototype.onMouseMove = function (evt) {\n          this.trySwitchToDefault(evt) && this.handler.state.onMouseMove(evt);\n        };\n\n        MouseHandlerZoomOnWheelState.prototype.trySwitchToDefault = function (evt) {\n          if (this.handler.canFinishZoomOnWheel(evt)) {\n            this.handler.switchToDefaultState();\n            return true;\n          }\n\n          return false;\n        };\n\n        MouseHandlerZoomOnWheelState.prototype.start = function () {\n          _super.prototype.start.call(this);\n\n          this.settings.zoomLevel = this.view.getZoom();\n          this.settings.autoZoom = Settings_1.AutoZoomMode.Disabled;\n        };\n\n        return MouseHandlerZoomOnWheelState;\n      }(MouseHandlerStateBase_1.MouseHandlerStateBase);\n\n      exports.MouseHandlerZoomOnWheelState = MouseHandlerZoomOnWheelState;\n      /***/\n    },\n    /* 319 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics222 = function extendStatics(d, b) {\n          _extendStatics222 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics222(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics222(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MouseHandlerMoveShapeState = void 0;\n\n      var MouseHandlerDragDiagramItemStateBase_1 = __webpack_require__(152);\n\n      var MouseHandlerMoveShapeState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerMoveShapeState, _super);\n\n        function MouseHandlerMoveShapeState(handler, history, model, selection, visualizerManager) {\n          var _this = _super.call(this, handler, history, model, selection, visualizerManager) || this;\n\n          _this.model = model;\n          _this.selection = selection;\n          _this.visualizerManager = visualizerManager;\n          return _this;\n        }\n\n        Object.defineProperty(MouseHandlerMoveShapeState.prototype, \"areValidDraggingShapes\", {\n          get: function get() {\n            return this.shouldClone || this.draggingShapes.length > 0;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(MouseHandlerMoveShapeState.prototype, \"areValidDraggingConnectors\", {\n          get: function get() {\n            return true;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        return MouseHandlerMoveShapeState;\n      }(MouseHandlerDragDiagramItemStateBase_1.MouseHandlerDragDiagramItemStateBase);\n\n      exports.MouseHandlerMoveShapeState = MouseHandlerMoveShapeState;\n      /***/\n    },\n    /* 320 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics223 = function extendStatics(d, b) {\n          _extendStatics223 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics223(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics223(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MouseHandlerMoveConnectorState = void 0;\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var MouseHandlerDragDiagramItemStateBase_1 = __webpack_require__(152);\n\n      var MouseHandlerMoveConnectorState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerMoveConnectorState, _super);\n\n        function MouseHandlerMoveConnectorState(handler, history, model, selection, visualizerManager) {\n          var _this = _super.call(this, handler, history, model, selection, visualizerManager) || this;\n\n          _this.model = model;\n          _this.selection = selection;\n          _this.visualizerManager = visualizerManager;\n          return _this;\n        }\n\n        Object.defineProperty(MouseHandlerMoveConnectorState.prototype, \"areValidDraggingShapes\", {\n          get: function get() {\n            return true;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(MouseHandlerMoveConnectorState.prototype, \"areValidDraggingConnectors\", {\n          get: function get() {\n            var _this = this;\n\n            if (this.shouldClone) return this.draggingShapes.length > 0 || this.draggingConnectors.length > 0;\n            if (!this.draggingConnectors.length) return false;\n            if (!this.draggingShapes.length) return !this.draggingConnectors.some(function (x) {\n              return !ModelUtils_1.ModelUtils.canMoveConnector(_this.selectedItems, x.connector);\n            });\n            return ModelUtils_1.ModelUtils.canMoveConnector(this.selectedItems, this.draggingConnectors[this.draggingConnectorsIndexByKey[this.handler.mouseDownEvent.source.key]].connector);\n          },\n          enumerable: false,\n          configurable: true\n        });\n        return MouseHandlerMoveConnectorState;\n      }(MouseHandlerDragDiagramItemStateBase_1.MouseHandlerDragDiagramItemStateBase);\n\n      exports.MouseHandlerMoveConnectorState = MouseHandlerMoveConnectorState;\n      /***/\n    },\n    /* 321 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics224 = function extendStatics(d, b) {\n          _extendStatics224 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics224(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics224(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MouseHandlerDefaultReadOnlyTouchState = void 0;\n\n      var MouseHandlerDefaultReadOnlyState_1 = __webpack_require__(154);\n\n      var MouseHandlerDefaultReadOnlyTouchState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerDefaultReadOnlyTouchState, _super);\n\n        function MouseHandlerDefaultReadOnlyTouchState() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MouseHandlerDefaultReadOnlyTouchState.prototype.canDragObjectOnMouseDown = function (key) {\n          return false;\n        };\n\n        MouseHandlerDefaultReadOnlyTouchState.prototype.canExpandContainerOnMouseDown = function (key) {\n          return false;\n        };\n\n        MouseHandlerDefaultReadOnlyTouchState.prototype.canClearSelectionOnMouseDown = function () {\n          return true;\n        };\n\n        MouseHandlerDefaultReadOnlyTouchState.prototype.processOnMouseMoveAfterLimit = function (evt) {\n          this.startScrolling(evt);\n        };\n\n        MouseHandlerDefaultReadOnlyTouchState.prototype.canSelectOnMouseUp = function (key) {\n          return !this.inSelection(key);\n        };\n\n        MouseHandlerDefaultReadOnlyTouchState.prototype.canClearSelectionOnMouseUp = function () {\n          return false;\n        };\n\n        return MouseHandlerDefaultReadOnlyTouchState;\n      }(MouseHandlerDefaultReadOnlyState_1.MouseHandlerDefaultReadOnlyState);\n\n      exports.MouseHandlerDefaultReadOnlyTouchState = MouseHandlerDefaultReadOnlyTouchState;\n      /***/\n    },\n    /* 322 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics225 = function extendStatics(d, b) {\n          _extendStatics225 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics225(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics225(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MouseHandlerDefaultTouchState = void 0;\n\n      var MouseHandlerDefaultState_1 = __webpack_require__(148);\n\n      var MouseHandlerZoomOnPinchState_1 = __webpack_require__(323);\n\n      var MouseHandlerDefaultTouchState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerDefaultTouchState, _super);\n\n        function MouseHandlerDefaultTouchState() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        MouseHandlerDefaultTouchState.prototype.updateConnectionsOnMouseMove = function (evt) {};\n\n        MouseHandlerDefaultTouchState.prototype.canDragObjectOnMouseDown = function (key) {\n          return this.inSelection(key);\n        };\n\n        MouseHandlerDefaultTouchState.prototype.canExpandContainerOnMouseDown = function (key) {\n          return true;\n        };\n\n        MouseHandlerDefaultTouchState.prototype.canClearSelectionOnMouseDown = function () {\n          return true;\n        };\n\n        MouseHandlerDefaultTouchState.prototype.processOnMouseMoveAfterLimit = function (evt) {\n          if (evt.touches.length > 1) this.startZooming(evt);else this.startScrolling(evt);\n        };\n\n        MouseHandlerDefaultTouchState.prototype.startZooming = function (evt) {\n          this.handler.switchState(new MouseHandlerZoomOnPinchState_1.MouseHandlerZoomOnPinchState(this.handler, this.selection, this.settings, this.view));\n        };\n\n        MouseHandlerDefaultTouchState.prototype.canSelectOnMouseUp = function (key) {\n          return !this.inSelection(key);\n        };\n\n        MouseHandlerDefaultTouchState.prototype.canClearSelectionOnMouseUp = function () {\n          return false;\n        };\n\n        return MouseHandlerDefaultTouchState;\n      }(MouseHandlerDefaultState_1.MouseHandlerDefaultState);\n\n      exports.MouseHandlerDefaultTouchState = MouseHandlerDefaultTouchState;\n      /***/\n    },\n    /* 323 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics226 = function extendStatics(d, b) {\n          _extendStatics226 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics226(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics226(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MouseHandlerZoomOnPinchState = void 0;\n\n      var Settings_1 = __webpack_require__(27);\n\n      var Utils_1 = __webpack_require__(3);\n\n      var point_1 = __webpack_require__(1);\n\n      var MouseHandlerScrollingState_1 = __webpack_require__(151);\n\n      var PINCH_CHANGE_DISTANCE = 1;\n\n      var MouseHandlerZoomOnPinchState =\n      /** @class */\n      function (_super) {\n        __extends(MouseHandlerZoomOnPinchState, _super);\n\n        function MouseHandlerZoomOnPinchState(handler, selection, settings, view) {\n          var _this = _super.call(this, handler, view, selection) || this;\n\n          _this.selection = selection;\n          _this.settings = settings;\n          _this.view = view;\n          return _this;\n        }\n\n        MouseHandlerZoomOnPinchState.prototype.onMouseDown = function (evt) {\n          _super.prototype.onMouseDown.call(this, evt);\n\n          if (evt.touches.length > 1) {\n            this.startDistance = this.getTouchDistance(evt);\n            this.startZoomLevel = this.settings.zoomLevel;\n            this.prevDistance = this.startDistance;\n          }\n        };\n\n        MouseHandlerZoomOnPinchState.prototype.onMouseMove = function (evt) {\n          if (evt.touches.length > 1) {\n            var distance = this.getTouchDistance(evt);\n\n            if (Math.abs(this.prevDistance - distance) > PINCH_CHANGE_DISTANCE) {\n              this.settings.zoomLevel = this.startZoomLevel * (distance / this.startDistance);\n              this.view.scrollTo(this.getMiddleLayoutPoint(evt), this.getMiddleAbsPoint(evt));\n              this.view.normalize();\n              this.prevDistance = distance;\n            }\n          }\n\n          _super.prototype.onMouseMove.call(this, evt);\n        };\n\n        MouseHandlerZoomOnPinchState.prototype.onMouseUp = function (evt) {\n          if (evt.touches.length === 0) setTimeout(function () {\n            this.handler.switchToDefaultState();\n          }.bind(this), 1);\n        };\n\n        MouseHandlerZoomOnPinchState.prototype.start = function () {\n          _super.prototype.start.call(this);\n\n          this.settings.zoomLevel = this.view.getZoom();\n          this.settings.autoZoom = Settings_1.AutoZoomMode.Disabled;\n        };\n\n        MouseHandlerZoomOnPinchState.prototype.getTouchDistance = function (evt) {\n          var pt0 = new point_1.Point(evt.touches[0].offsetPoint.x, evt.touches[0].offsetPoint.y);\n          var pt1 = new point_1.Point(evt.touches[1].offsetPoint.x, evt.touches[1].offsetPoint.y);\n          return Utils_1.GeometryUtils.getDistance(pt0, pt1);\n        };\n\n        MouseHandlerZoomOnPinchState.prototype.getPointByEvent = function (evt) {\n          return this.getMiddleAbsPoint(evt);\n        };\n\n        MouseHandlerZoomOnPinchState.prototype.getMiddleAbsPoint = function (evt) {\n          if (evt.touches.length > 1) return MouseHandlerZoomOnPinchState.getMiddlePointByEvent(evt, function (touch) {\n            return touch.offsetPoint;\n          });\n          return evt.offsetPoint;\n        };\n\n        MouseHandlerZoomOnPinchState.prototype.getMiddleLayoutPoint = function (evt) {\n          if (evt.touches.length > 1) return MouseHandlerZoomOnPinchState.getMiddlePointByEvent(evt, function (touch) {\n            return touch.modelPoint;\n          });\n          return evt.modelPoint;\n        };\n\n        MouseHandlerZoomOnPinchState.getMiddlePointByEvent = function (evt, getPoint) {\n          if (evt.touches.length > 1) return new point_1.Point((getPoint(evt.touches[0]).x + getPoint(evt.touches[1]).x) / 2, (getPoint(evt.touches[0]).y + getPoint(evt.touches[1]).y) / 2);\n        };\n\n        return MouseHandlerZoomOnPinchState;\n      }(MouseHandlerScrollingState_1.MouseHandlerScrollingState);\n\n      exports.MouseHandlerZoomOnPinchState = MouseHandlerZoomOnPinchState;\n      /***/\n    },\n    /* 324 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.TextInputHandler = void 0;\n\n      var ChangeShapeTextHistoryItem_1 = __webpack_require__(155);\n\n      var Event_1 = __webpack_require__(11);\n\n      var key_1 = __webpack_require__(25);\n\n      var Shape_1 = __webpack_require__(14);\n\n      var Connector_1 = __webpack_require__(7);\n\n      var ChangeConnectorTextHistoryItem_1 = __webpack_require__(66);\n\n      var TextInputHandler =\n      /** @class */\n      function () {\n        function TextInputHandler(control) {\n          this.control = control;\n        }\n\n        TextInputHandler.prototype.startTextInput = function (item, position) {\n          if (item.isLocked || !item.enableText || !item.allowEditText || this.control.settings.readOnly || !this.canFinishTextEditing()) return;\n          this.control.beginUpdate();\n          this.textInputItem = item;\n          var allowed = true;\n\n          if (this.textInputItem instanceof Shape_1.Shape) {\n            var textRect = this.textInputItem.textEditRectangle;\n            allowed = this.control.permissionsProvider.canChangeShapeText(this.textInputItem);\n            if (allowed) this.control.eventManager.raiseTextInputStart(this.textInputItem, this.textInputItem.text, textRect.createPosition(), textRect.createSize());\n          } else if (this.textInputItem instanceof Connector_1.Connector) {\n            this.textInputPosition = position;\n            allowed = this.control.permissionsProvider.canChangeConnectorText(this.textInputItem, this.textInputPosition);\n            if (allowed) this.control.eventManager.raiseTextInputStart(this.textInputItem, this.textInputItem.getText(this.textInputPosition), this.textInputItem.getTextPoint(this.textInputPosition));\n          }\n\n          if (!allowed) {\n            delete this.textInputItem;\n            this.control.endUpdate();\n          }\n        };\n\n        TextInputHandler.prototype.endTextInput = function () {\n          var textInputItem = this.textInputItem;\n          delete this.textInputItem;\n          this.control.eventManager.raiseTextInputEnd(textInputItem);\n          this.control.endUpdate();\n          this.control.barManager.updateItemsState();\n        };\n\n        TextInputHandler.prototype.raiseTextInputPermissionsCheck = function (allowed) {\n          this.control.eventManager.raiseTextInputPermissionsCheck(this.textInputItem, allowed);\n        };\n\n        TextInputHandler.prototype.applyTextInput = function (text) {\n          if (!this.canFinishTextEditing(text)) return;\n          var textInputItem = this.textInputItem;\n          var textInputPosition = this.textInputPosition; // call this first to be able measure text on changes\n\n          this.endTextInput();\n\n          if (textInputItem instanceof Shape_1.Shape) {\n            if (textInputItem.text !== text) this.control.history.addAndRedo(new ChangeShapeTextHistoryItem_1.ChangeShapeTextHistoryItem(textInputItem, text));\n          } else if (textInputItem instanceof Connector_1.Connector) if (textInputItem.getText(textInputPosition) !== text) this.control.history.addAndRedo(new ChangeConnectorTextHistoryItem_1.ChangeConnectorTextHistoryItem(textInputItem, textInputPosition, text));\n        };\n\n        TextInputHandler.prototype.canFinishTextEditing = function (text) {\n          var allowed = true;\n\n          if (this.isTextInputActive()) {\n            var newText = text || this.getTextInputElementValue();\n            if (this.textInputItem instanceof Shape_1.Shape) allowed = this.control.permissionsProvider.canApplyShapeTextChange(this.textInputItem, newText);else if (this.textInputItem instanceof Connector_1.Connector) allowed = this.control.permissionsProvider.canApplyConnectorTextChange(this.textInputItem, this.textInputPosition, newText);\n            this.raiseTextInputPermissionsCheck(allowed);\n          }\n\n          return allowed;\n        };\n\n        TextInputHandler.prototype.getTextInputElementValue = function () {\n          if (this.control.render) return this.control.render.input.getTextInputElementValue();\n          return \"\";\n        };\n\n        TextInputHandler.prototype.cancelTextInput = function () {\n          this.raiseTextInputPermissionsCheck(true);\n          this.endTextInput();\n        };\n\n        TextInputHandler.prototype.isTextInputActive = function () {\n          return this.textInputItem !== undefined;\n        };\n\n        TextInputHandler.prototype.processDblClick = function (evt) {\n          if (evt.source.type === Event_1.MouseEventElementType.Shape) {\n            var shape = this.control.model.findShape(evt.source.key);\n            this.startTextInput(shape);\n          } else if (evt.source.type === Event_1.MouseEventElementType.Connector) {\n            var connector = this.control.model.findConnector(evt.source.key);\n            var position = connector.getTextPositionByPoint(evt.modelPoint);\n            this.startTextInput(connector, position);\n          } else if (evt.source.type === Event_1.MouseEventElementType.ConnectorText) {\n            var connector = this.control.model.findConnector(evt.source.key);\n            var position = parseFloat(evt.source.value);\n            this.startTextInput(connector, position);\n          }\n        };\n\n        TextInputHandler.prototype.onDblClick = function (evt) {\n          this.processDblClick(evt);\n        };\n\n        TextInputHandler.prototype.onKeyDown = function (evt) {\n          if (!this.isTextInputActive()) return;\n\n          if (evt.keyCode === 13 && this.hasCtrlModifier(evt.modifiers)) {\n            evt.preventDefault = true;\n            this.applyTextInput(evt.inputText);\n          }\n\n          if (evt.keyCode === 27) this.cancelTextInput();\n        };\n\n        TextInputHandler.prototype.onBlur = function (evt) {\n          if (this.isTextInputActive()) this.applyTextInput(evt.inputText);\n        };\n\n        TextInputHandler.prototype.onFocus = function (evt) {};\n\n        TextInputHandler.prototype.hasCtrlModifier = function (key) {\n          return (key & key_1.ModifierKey.Ctrl) > 0;\n        };\n\n        return TextInputHandler;\n      }();\n\n      exports.TextInputHandler = TextInputHandler;\n      /***/\n    },\n    /* 325 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics227 = function extendStatics(d, b) {\n          _extendStatics227 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics227(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics227(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ContextMenuTouchHandler = void 0;\n\n      var Event_1 = __webpack_require__(11);\n\n      var ContextMenuHandler_1 = __webpack_require__(156);\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var SELECTION_CHANGED_EVENT = 1;\n\n      var ContextMenuTouchHandler =\n      /** @class */\n      function (_super) {\n        __extends(ContextMenuTouchHandler, _super);\n\n        function ContextMenuTouchHandler(selection) {\n          var _this = _super.call(this) || this;\n\n          _this.selection = selection;\n          _this.contextToolboxVisible = false;\n\n          _this.selection.onChanged.add(_this);\n\n          return _this;\n        }\n\n        ContextMenuTouchHandler.prototype.onMouseDown = function (evt) {\n          if (evt.source.key === undefined) this.hideContextMenu();\n        };\n\n        ContextMenuTouchHandler.prototype.onMouseUp = function (evt) {};\n\n        ContextMenuTouchHandler.prototype.onFocus = function (evt) {\n          var _this = this;\n\n          setTimeout(function () {\n            _this.showContextMenuAtSelection();\n          }, 1);\n        };\n\n        ContextMenuTouchHandler.prototype.onBlur = function (evt) {\n          var _this = this;\n\n          setTimeout(function () {\n            _this.hideContextMenu();\n          }, 1);\n        };\n\n        ContextMenuTouchHandler.prototype.onTextInputFocus = function (evt) {\n          var _this = this;\n\n          setTimeout(function () {\n            _this.hideContextMenu();\n          }, 1);\n        };\n\n        ContextMenuTouchHandler.prototype.onTextInputBlur = function (evt) {\n          var _this = this;\n\n          setTimeout(function () {\n            _this.showContextMenuAtSelection();\n          }, 1);\n        };\n\n        ContextMenuTouchHandler.prototype.onLongTouch = function (evt) {\n          if (evt.source.type === Event_1.MouseEventElementType.Document) this.showContextMenuAtEmptySelection(evt.modelPoint);\n        };\n\n        ContextMenuTouchHandler.prototype.onKeyDown = function (evt) {};\n\n        ContextMenuTouchHandler.prototype.onShortcut = function (evt) {};\n\n        ContextMenuTouchHandler.prototype.getSelectedItems = function () {\n          return this.selection.getSelectedItems(true);\n        };\n\n        ContextMenuTouchHandler.prototype.showContextMenuAtSelection = function () {\n          if (this.contextToolboxVisible) return;\n          var items = this.getSelectedItems();\n          if (items.length !== 0) this.showContextMenu(undefined, ModelUtils_1.ModelUtils.createRectangle(items).createPosition());\n        };\n\n        ContextMenuTouchHandler.prototype.showContextMenuAtEmptySelection = function (point) {\n          if (this.contextToolboxVisible) return;\n          var items = this.getSelectedItems();\n          if (items.length === 0) this.showContextMenu(undefined, point);\n        };\n\n        ContextMenuTouchHandler.prototype.notifyDragStart = function (itemKeys) {\n          this.hideContextMenu();\n        };\n\n        ContextMenuTouchHandler.prototype.notifyDragEnd = function (itemKeys) {\n          this.showContextMenuAtSelection();\n        };\n\n        ContextMenuTouchHandler.prototype.notifySelectionChanged = function (selection) {\n          if (this.isUpdateLocked()) this.registerOccurredEvent(SELECTION_CHANGED_EVENT);else this.raiseSelectionChanged();\n        };\n\n        ContextMenuTouchHandler.prototype.raiseSelectionChanged = function () {\n          var items = this.getSelectedItems();\n          if (items.length !== 0) this.showContextMenuAtSelection();else this.hideContextMenu();\n        };\n\n        ContextMenuTouchHandler.prototype.onUpdateUnlocked = function (occurredEvents) {\n          if (occurredEvents & SELECTION_CHANGED_EVENT) this.raiseSelectionChanged();\n        };\n\n        ContextMenuTouchHandler.prototype.notifyShowContextToolbox = function (modelPoint, getPositionToInsertShapeTo, side, category, callback) {\n          this.contextToolboxVisible = true;\n          this.hideContextMenu();\n        };\n\n        ContextMenuTouchHandler.prototype.notifyHideContextToolbox = function () {\n          this.contextToolboxVisible = false;\n          this.showContextMenuAtSelection();\n        };\n\n        return ContextMenuTouchHandler;\n      }(ContextMenuHandler_1.ContextMenuHandler);\n\n      exports.ContextMenuTouchHandler = ContextMenuTouchHandler;\n      /***/\n    },\n    /* 326 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics228 = function extendStatics(d, b) {\n          _extendStatics228 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics228(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics228(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ConnectionTargetVisualizer = exports.ConnectionTargetInfo = void 0;\n\n      var TargetVisualizerBase_1 = __webpack_require__(158);\n\n      var ConnectionTargetInfo =\n      /** @class */\n      function () {\n        function ConnectionTargetInfo(rect, strokeWidth) {\n          this.rect = rect;\n          this.strokeWidth = strokeWidth;\n          this.allowed = true;\n        }\n\n        return ConnectionTargetInfo;\n      }();\n\n      exports.ConnectionTargetInfo = ConnectionTargetInfo;\n\n      var ConnectionTargetVisualizer =\n      /** @class */\n      function (_super) {\n        __extends(ConnectionTargetVisualizer, _super);\n\n        function ConnectionTargetVisualizer(dispatcher) {\n          return _super.call(this, dispatcher) || this;\n        }\n\n        ConnectionTargetVisualizer.prototype.raiseShow = function () {\n          var _this = this;\n\n          var info = new ConnectionTargetInfo(this.targetRect, this.targetStrokeWidth);\n          this.dispatcher.raise1(function (l) {\n            return l.notifyConnectionTargetShow(_this.key, info);\n          });\n        };\n\n        ConnectionTargetVisualizer.prototype.raiseHide = function () {\n          this.dispatcher.raise1(function (l) {\n            return l.notifyConnectionTargetHide();\n          });\n        };\n\n        return ConnectionTargetVisualizer;\n      }(TargetVisualizerBase_1.TargetVisualizerBase);\n\n      exports.ConnectionTargetVisualizer = ConnectionTargetVisualizer;\n      /***/\n    },\n    /* 327 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics229 = function extendStatics(d, b) {\n          _extendStatics229 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics229(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics229(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ContainerTargetVisualizer = exports.ContainerTargetInfo = void 0;\n\n      var TargetVisualizerBase_1 = __webpack_require__(158);\n\n      var ContainerTargetInfo =\n      /** @class */\n      function () {\n        function ContainerTargetInfo(rect, strokeWidth) {\n          this.rect = rect;\n          this.strokeWidth = strokeWidth;\n        }\n\n        return ContainerTargetInfo;\n      }();\n\n      exports.ContainerTargetInfo = ContainerTargetInfo;\n\n      var ContainerTargetVisualizer =\n      /** @class */\n      function (_super) {\n        __extends(ContainerTargetVisualizer, _super);\n\n        function ContainerTargetVisualizer(dispatcher) {\n          return _super.call(this, dispatcher) || this;\n        }\n\n        ContainerTargetVisualizer.prototype.raiseShow = function () {\n          var _this = this;\n\n          var info = new ContainerTargetInfo(this.targetRect, this.targetStrokeWidth);\n          this.dispatcher.raise1(function (l) {\n            return l.notifyContainerTargetShow(_this.key, info);\n          });\n        };\n\n        ContainerTargetVisualizer.prototype.raiseHide = function () {\n          this.dispatcher.raise1(function (l) {\n            return l.notifyContainerTargetHide();\n          });\n        };\n\n        return ContainerTargetVisualizer;\n      }(TargetVisualizerBase_1.TargetVisualizerBase);\n\n      exports.ContainerTargetVisualizer = ContainerTargetVisualizer;\n      /***/\n    },\n    /* 328 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ConnectionPointsVisualizer = exports.ConnectionPointInfo = void 0;\n\n      var ConnectionPointInfo =\n      /** @class */\n      function () {\n        function ConnectionPointInfo(point, side) {\n          this.point = point;\n          this.side = side;\n          this.allowed = true;\n        }\n\n        return ConnectionPointInfo;\n      }();\n\n      exports.ConnectionPointInfo = ConnectionPointInfo;\n\n      var ConnectionPointsVisualizer =\n      /** @class */\n      function () {\n        function ConnectionPointsVisualizer(dispatcher) {\n          this.dispatcher = dispatcher;\n        }\n\n        ConnectionPointsVisualizer.prototype.getKey = function () {\n          return this.key;\n        };\n\n        ConnectionPointsVisualizer.prototype.setPoints = function (key, points, pointIndex, outsideRectangle) {\n          if (this.key !== key || this.pointIndex !== pointIndex) {\n            this.key = key;\n            this.points = points;\n            this.pointIndex = pointIndex;\n            this.outsideRectangle = outsideRectangle;\n            this.raiseShow();\n          }\n        };\n\n        ConnectionPointsVisualizer.prototype.setPointIndex = function (pointIndex) {\n          if (0 <= pointIndex && pointIndex < this.points.length && this.pointIndex !== pointIndex) {\n            this.pointIndex = pointIndex;\n            this.raiseShow();\n          }\n        };\n\n        ConnectionPointsVisualizer.prototype.update = function () {\n          this.raiseShow();\n        };\n\n        ConnectionPointsVisualizer.prototype.reset = function () {\n          if (this.key !== \"-1\") {\n            this.key = \"-1\";\n            this.points = [];\n            this.pointIndex = -1;\n            this.outsideRectangle = undefined;\n            this.raiseHide();\n          }\n        };\n\n        ConnectionPointsVisualizer.prototype.raiseShow = function () {\n          var _this = this;\n\n          this.dispatcher.raise1(function (l) {\n            return l.notifyConnectionPointsShow(_this.key, _this.points, _this.pointIndex, _this.outsideRectangle);\n          });\n        };\n\n        ConnectionPointsVisualizer.prototype.raiseHide = function () {\n          this.dispatcher.raise1(function (l) {\n            return l.notifyConnectionPointsHide();\n          });\n        };\n\n        return ConnectionPointsVisualizer;\n      }();\n\n      exports.ConnectionPointsVisualizer = ConnectionPointsVisualizer;\n      /***/\n    },\n    /* 329 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ResizeInfoVisualizer = void 0;\n\n      var ResizeInfoVisualizer =\n      /** @class */\n      function () {\n        function ResizeInfoVisualizer(dispatcher) {\n          this.dispatcher = dispatcher;\n        }\n\n        ResizeInfoVisualizer.prototype.set = function (point, text) {\n          this.point = point;\n          this.text = text;\n          this.raiseShow();\n        };\n\n        ResizeInfoVisualizer.prototype.reset = function () {\n          if (this.point !== undefined) {\n            this.point = undefined;\n            this.text = undefined;\n            this.raiseHide();\n          }\n        };\n\n        ResizeInfoVisualizer.prototype.raiseShow = function () {\n          var _this = this;\n\n          this.dispatcher.raise1(function (l) {\n            return l.notifyResizeInfoShow(_this.point, _this.text);\n          });\n        };\n\n        ResizeInfoVisualizer.prototype.raiseHide = function () {\n          this.dispatcher.raise1(function (l) {\n            return l.notifyResizeInfoHide();\n          });\n        };\n\n        return ResizeInfoVisualizer;\n      }();\n\n      exports.ResizeInfoVisualizer = ResizeInfoVisualizer;\n      /***/\n    },\n    /* 330 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.SelectionRectVisualizer = void 0;\n\n      var SelectionRectVisualizer =\n      /** @class */\n      function () {\n        function SelectionRectVisualizer(dispatcher) {\n          this.dispatcher = dispatcher;\n        }\n\n        SelectionRectVisualizer.prototype.setRectangle = function (rect) {\n          this.rect = rect;\n          this.raiseShow();\n        };\n\n        SelectionRectVisualizer.prototype.reset = function () {\n          this.rect = undefined;\n          this.raiseHide();\n        };\n\n        SelectionRectVisualizer.prototype.raiseShow = function () {\n          var _this = this;\n\n          this.dispatcher.raise1(function (l) {\n            return l.notifySelectionRectShow(_this.rect);\n          });\n        };\n\n        SelectionRectVisualizer.prototype.raiseHide = function () {\n          this.dispatcher.raise1(function (l) {\n            return l.notifySelectionRectHide();\n          });\n        };\n\n        return SelectionRectVisualizer;\n      }();\n\n      exports.SelectionRectVisualizer = SelectionRectVisualizer;\n      /***/\n    },\n    /* 331 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics230 = function extendStatics(d, b) {\n          _extendStatics230 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics230(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics230(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.VisualizerTouchManager = void 0;\n\n      var VisualizersManager_1 = __webpack_require__(157);\n\n      var Event_1 = __webpack_require__(11);\n\n      var SELECTION_CHANGED_EVENT = 1;\n\n      var VisualizerTouchManager =\n      /** @class */\n      function (_super) {\n        __extends(VisualizerTouchManager, _super);\n\n        function VisualizerTouchManager(selection, model, eventManager, settings, readOnly) {\n          if (readOnly === void 0) {\n            readOnly = settings.readOnly;\n          }\n\n          var _this = _super.call(this, selection, model, eventManager, settings, readOnly) || this;\n\n          selection.onChanged.add(_this);\n          return _this;\n        }\n\n        VisualizerTouchManager.prototype.onBlur = function (evt) {\n          var _this = this;\n\n          setTimeout(function () {\n            _this.hideConnections();\n          }, 1);\n        };\n\n        VisualizerTouchManager.prototype.onFocus = function (evt) {\n          var _this = this;\n\n          setTimeout(function () {\n            _this.showConnections();\n          }, 1);\n        };\n\n        VisualizerTouchManager.prototype.hideConnections = function () {\n          if (this.readOnly) return;\n          this.resetConnectionPoints();\n        };\n\n        VisualizerTouchManager.prototype.showConnections = function () {\n          if (this.readOnly) return;\n\n          if (this.needShowConnections()) {\n            var shapes = this.selection.getSelectedShapes();\n            if (shapes.length === 1) this.setConnectionPoints(shapes[0], Event_1.MouseEventElementType.ShapeConnectionPoint, -1, !shapes[0].allowResizeHorizontally && !shapes[0].allowResizeVertically || shapes[0].isLocked);\n          }\n        };\n\n        VisualizerTouchManager.prototype.needShowConnections = function () {\n          var items = this.selection.getSelectedItems();\n          var shapes = this.selection.getSelectedShapes();\n          return items.length === 1 && shapes.length === 1;\n        };\n\n        VisualizerTouchManager.prototype.notifySelectionChanged = function (selection) {\n          if (this.isUpdateLocked()) this.registerOccurredEvent(SELECTION_CHANGED_EVENT);else this.raiseSelectionChanged();\n        };\n\n        VisualizerTouchManager.prototype.raiseSelectionChanged = function () {\n          if (this.needShowConnections()) this.showConnections();else this.hideConnections();\n        };\n\n        VisualizerTouchManager.prototype.onUpdateUnlocked = function (occurredEvents) {\n          if (occurredEvents & SELECTION_CHANGED_EVENT) this.raiseSelectionChanged();\n        };\n\n        VisualizerTouchManager.prototype.notifyDragStart = function (itemKeys) {\n          this.hideConnections();\n        };\n\n        VisualizerTouchManager.prototype.notifyDragEnd = function (itemKeys) {\n          this.showConnections();\n        };\n\n        return VisualizerTouchManager;\n      }(VisualizersManager_1.VisualizerManager);\n\n      exports.VisualizerTouchManager = VisualizerTouchManager;\n      /***/\n    },\n    /* 332 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ContextToolboxHandler = void 0;\n\n      var Event_1 = __webpack_require__(11);\n\n      var Utils_1 = __webpack_require__(3);\n\n      var key_1 = __webpack_require__(25);\n\n      var browser_1 = __webpack_require__(17);\n\n      var ContextToolboxHandler =\n      /** @class */\n      function () {\n        function ContextToolboxHandler() {\n          this.contextToolboxVisible = false;\n          this.onVisibilityChanged = new Utils_1.EventDispatcher();\n        }\n\n        ContextToolboxHandler.prototype.onMouseDown = function (evt) {\n          if (evt.source.type !== Event_1.MouseEventElementType.Undefined) this.hideContextToolbox();\n        };\n\n        ContextToolboxHandler.prototype.onMouseUp = function (evt) {\n          if (evt.source.type !== Event_1.MouseEventElementType.Undefined || !browser_1.Browser.TouchUI) this.hideContextToolbox();\n        };\n\n        ContextToolboxHandler.prototype.onFocus = function (evt) {};\n\n        ContextToolboxHandler.prototype.onBlur = function (evt) {};\n\n        ContextToolboxHandler.prototype.onKeyDown = function (evt) {\n          if (evt.keyCode === key_1.KeyCode.Esc) this.hideContextToolbox();\n        };\n\n        ContextToolboxHandler.prototype.onShortcut = function (evt) {\n          this.hideContextToolbox();\n        };\n\n        ContextToolboxHandler.prototype.showContextToolbox = function (modelPoint, getPositionToInsertShapeTo, side, category, applyCallback, cancelCallback) {\n          this.onVisibilityChanged.raise1(function (l) {\n            return l.notifyShowContextToolbox(modelPoint, getPositionToInsertShapeTo, side, category, applyCallback);\n          });\n          this.contextToolboxVisible = true;\n          this.contextToolboxCancelCallback = cancelCallback;\n        };\n\n        ContextToolboxHandler.prototype.hideContextToolbox = function (applyed) {\n          if (this.contextToolboxVisible) {\n            this.onVisibilityChanged.raise1(function (l) {\n              return l.notifyHideContextToolbox();\n            });\n\n            if (this.contextToolboxCancelCallback) {\n              if (!applyed) this.contextToolboxCancelCallback();\n              this.contextToolboxCancelCallback = undefined;\n            }\n\n            this.contextToolboxVisible = false;\n          }\n        };\n\n        return ContextToolboxHandler;\n      }();\n\n      exports.ContextToolboxHandler = ContextToolboxHandler;\n      /***/\n    },\n    /* 333 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.Selection = void 0;\n\n      var Utils_1 = __webpack_require__(3);\n\n      var InputPosition_1 = __webpack_require__(334);\n\n      var Shape_1 = __webpack_require__(14);\n\n      var Connector_1 = __webpack_require__(7);\n\n      var Data_1 = __webpack_require__(43);\n\n      var Selection =\n      /** @class */\n      function () {\n        function Selection(model) {\n          this.onChanged = new Utils_1.EventDispatcher();\n          this.inputPosition = new InputPosition_1.InputPosition(this);\n          this.onChanged.add(this.inputPosition);\n          this.initialize(model);\n        }\n\n        Selection.prototype.initialize = function (model) {\n          this.model = model;\n          this.keys = [];\n          this.inputPosition.initialize();\n        };\n\n        Selection.prototype.add = function (key) {\n          if (this.keys.indexOf(key) < 0) {\n            // binarySearch\n            this.keys.push(key);\n            this.raiseSelectionChanged();\n          }\n        };\n\n        Selection.prototype.remove = function (key) {\n          if (this.keys.indexOf(key) >= 0) {\n            // binarySearch\n            this.keys.splice(this.keys.indexOf(key), 1);\n            this.raiseSelectionChanged();\n          }\n        };\n\n        Selection.prototype.clear = function () {\n          if (this.keys.length > 0) {\n            this.keys = [];\n            this.raiseSelectionChanged();\n          }\n        };\n\n        Selection.prototype.set = function (keys, forceChange) {\n          if (forceChange || !Data_1.Data.ArrayEqual(keys, this.keys)) {\n            this.keys = keys;\n            this.raiseSelectionChanged();\n          }\n        };\n\n        Selection.prototype.getKeys = function () {\n          return this.keys;\n        };\n\n        Selection.prototype.getKey = function (index) {\n          return this.keys[index];\n        };\n\n        Selection.prototype.getSelectedItemsInsideContainers = function (items) {\n          var _this = this;\n\n          var result = items.slice();\n          items.forEach(function (item) {\n            if (item instanceof Shape_1.Shape) {\n              var children = _this.getSelectedItemsInsideContainers(_this.model.getChildren(item));\n\n              children.forEach(function (child) {\n                if (result.indexOf(child) === -1 && !_this.hasKey(child.key)) result.push(child);\n              });\n            }\n          });\n          return result;\n        };\n\n        Selection.prototype.getSelectedItemsCore = function (includeLocked) {\n          var _this = this;\n\n          return this.keys.map(function (key) {\n            return _this.model.findItem(key);\n          }).filter(function (conn) {\n            return conn && (includeLocked || !conn.isLocked);\n          });\n        };\n\n        Selection.prototype.getSelectedItems = function (includeLocked, includeInsideContainers) {\n          if (includeInsideContainers) return this.getSelectedItemsInsideContainers(this.getSelectedItemsCore(includeLocked));\n          return this.getSelectedItemsCore(includeLocked);\n        };\n\n        Selection.prototype.getSelectedShapes = function (includeLocked, includeInsideContainers) {\n          var _this = this;\n\n          if (includeInsideContainers) {\n            var items = this.getSelectedItemsCore(includeLocked);\n            return this.getSelectedItemsInsideContainers(items).map(function (item) {\n              return item instanceof Shape_1.Shape ? item : undefined;\n            }).filter(function (shape) {\n              return shape;\n            });\n          } else return this.keys.map(function (key) {\n            return _this.model.findShape(key);\n          }).filter(function (conn) {\n            return conn && (includeLocked || !conn.isLocked);\n          });\n        };\n\n        Selection.prototype.getSelectedConnectors = function (includeLocked, includeInsideContainers) {\n          var _this = this;\n\n          if (includeInsideContainers) {\n            var items = this.keys.map(function (key) {\n              return _this.model.findItem(key);\n            });\n            return this.getSelectedItemsInsideContainers(items).map(function (item) {\n              return item instanceof Connector_1.Connector ? item : undefined;\n            }).filter(function (connector) {\n              return connector;\n            });\n          } else return this.keys.map(function (key) {\n            return _this.model.findConnector(key);\n          }).filter(function (conn) {\n            return conn && (includeLocked || !conn.isLocked);\n          });\n        };\n\n        Selection.prototype.hasKey = function (key) {\n          return this.keys.indexOf(key) >= 0;\n        };\n\n        Selection.prototype.isEmpty = function (includeLocked) {\n          return !this.getSelectedItems(includeLocked).length;\n        };\n\n        Selection.prototype.selectRect = function (rect) {\n          var keys = [];\n          this.model.iterateItems(function (item) {\n            if (item.intersectedByRect(rect)) keys.push(item.key);\n          });\n          this.set(keys);\n        };\n\n        Selection.prototype.raiseSelectionChanged = function () {\n          this.onChanged.raise(\"notifySelectionChanged\", this);\n        };\n\n        return Selection;\n      }();\n\n      exports.Selection = Selection;\n      /***/\n    },\n    /* 334 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.InputPosition = void 0;\n\n      var InputPositionProperties_1 = __webpack_require__(335);\n\n      var Data_1 = __webpack_require__(43);\n\n      var InputPosition =\n      /** @class */\n      function () {\n        function InputPosition(selection) {\n          this.selection = selection;\n          this.initialProperties = new InputPositionProperties_1.InputPositionProperties(this.selection);\n          this.defaultProperties = new InputPositionProperties_1.InputPositionProperties(this.selection, this.initialProperties);\n          this.currentProperties = new InputPositionProperties_1.InputPositionProperties(this.selection, this.defaultProperties);\n        }\n\n        InputPosition.prototype.initialize = function () {\n          this.reset();\n          this.defaultProperties.reset();\n        };\n\n        InputPosition.prototype.reset = function () {\n          this.currentProperties.reset();\n        }; // Connectors\n\n\n        InputPosition.prototype.getDefaultConnectorProperties = function () {\n          return this.defaultProperties.getConnectorProperties();\n        };\n\n        InputPosition.prototype.getDefaultConnectorPropertyValue = function (propertyName) {\n          return this.defaultProperties.getConnectorPropertyValue(propertyName);\n        };\n\n        InputPosition.prototype.getCurrentConnectorPropertyValue = function (propertyName) {\n          return this.currentProperties.getConnectorPropertyValue(propertyName);\n        };\n\n        InputPosition.prototype.setConnectorPropertyValue = function (propertyName, value) {\n          this.currentProperties.setConnectorPropertyValue(propertyName, value);\n          if (this.selection.isEmpty(true)) this.defaultProperties.setConnectorPropertyValue(propertyName, value);\n        };\n\n        InputPosition.prototype.setInitialConnectorProperties = function (properties) {\n          this.defaultProperties.reset();\n          this.currentProperties.reset();\n\n          for (var propertyName in properties) {\n            if (Object.prototype.hasOwnProperty.call(properties, propertyName)) this.initialProperties.setConnectorPropertyValue(propertyName, properties[propertyName]);\n          }\n        }; // Style\n\n\n        InputPosition.prototype.getDefaultStyle = function () {\n          return this.defaultProperties.getStyle();\n        };\n\n        InputPosition.prototype.getDefaultStylePropertyValue = function (propertyName) {\n          return this.defaultProperties.getStylePropertyValue(propertyName);\n        };\n\n        InputPosition.prototype.getDefaultTextStyle = function () {\n          return this.defaultProperties.getTextStyle();\n        };\n\n        InputPosition.prototype.getDefaultTextStylePropertyValue = function (propertyName) {\n          return this.defaultProperties.getTextStylePropertyValue(propertyName);\n        };\n\n        InputPosition.prototype.getCurrentStylePropertyValue = function (propertyName) {\n          return this.currentProperties.getStylePropertyValue(propertyName);\n        };\n\n        InputPosition.prototype.getCurrentTextStylePropertyValue = function (propertyName) {\n          return this.currentProperties.getTextStylePropertyValue(propertyName);\n        };\n\n        InputPosition.prototype.setStylePropertyValue = function (propertyName, value) {\n          this.currentProperties.setStylePropertyValue(propertyName, value);\n          if (this.selection.isEmpty(true)) this.defaultProperties.setStylePropertyValue(propertyName, value);\n        };\n\n        InputPosition.prototype.setTextStylePropertyValue = function (propertyName, value) {\n          this.currentProperties.setTextStylePropertyValue(propertyName, value);\n          if (this.selection.isEmpty(true)) this.defaultProperties.setTextStylePropertyValue(propertyName, value);\n        };\n\n        InputPosition.prototype.setInitialStyleProperties = function (style) {\n          this.defaultProperties.reset();\n          this.currentProperties.reset();\n          var styleObj = typeof style === \"string\" ? Data_1.Data.cssTextToObject(style) : style;\n\n          for (var propertyName in styleObj) {\n            if (Object.prototype.hasOwnProperty.call(styleObj, propertyName)) this.initialProperties.setStylePropertyValue(propertyName, styleObj[propertyName]);\n          }\n        };\n\n        InputPosition.prototype.setInitialTextStyleProperties = function (style) {\n          this.defaultProperties.reset();\n          this.currentProperties.reset();\n          var styleObj = typeof style === \"string\" ? Data_1.Data.cssTextToObject(style) : style;\n\n          for (var propertyName in styleObj) {\n            if (Object.prototype.hasOwnProperty.call(styleObj, propertyName)) this.initialProperties.setTextStylePropertyValue(propertyName, styleObj[propertyName]);\n          }\n        };\n\n        InputPosition.prototype.notifySelectionChanged = function (selection) {\n          this.reset();\n        };\n\n        return InputPosition;\n      }();\n\n      exports.InputPosition = InputPosition;\n      /***/\n    },\n    /* 335 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.InputPositionProperties = void 0;\n\n      var ConnectorProperties_1 = __webpack_require__(31);\n\n      var Style_1 = __webpack_require__(30);\n\n      var InputPositionProperties =\n      /** @class */\n      function () {\n        function InputPositionProperties(selection, baseProperties) {\n          this.selection = selection;\n          this.baseProperties = baseProperties;\n          this.selection = selection;\n        }\n\n        InputPositionProperties.prototype.reset = function () {\n          this.connectorProperties = null;\n          this.style = null;\n          this.textStyle = null;\n        };\n\n        InputPositionProperties.prototype.getConnectorProperties = function () {\n          if (!this.connectorProperties) {\n            this.connectorProperties = this.baseProperties ? this.baseProperties.getConnectorProperties().clone() : new ConnectorProperties_1.ConnectorProperties();\n            this.updateConnectorProperties(this.connectorProperties);\n          }\n\n          return this.connectorProperties;\n        };\n\n        InputPositionProperties.prototype.getConnectorPropertyValue = function (propertyName) {\n          return this.getConnectorProperties()[propertyName];\n        };\n\n        InputPositionProperties.prototype.setConnectorPropertyValue = function (propertyName, value) {\n          this.getConnectorProperties()[propertyName] = value;\n        };\n\n        InputPositionProperties.prototype.getStyle = function () {\n          if (!this.style) {\n            this.style = this.baseProperties ? this.baseProperties.getStyle().clone() : new Style_1.Style();\n            this.updateStyle(this.style, \"style\");\n          }\n\n          return this.style;\n        };\n\n        InputPositionProperties.prototype.getStylePropertyValue = function (propertyName) {\n          return this.getStyle()[propertyName];\n        };\n\n        InputPositionProperties.prototype.setStylePropertyValue = function (propertyName, value) {\n          this.getStyle()[propertyName] = value;\n        };\n\n        InputPositionProperties.prototype.getTextStyle = function () {\n          if (!this.textStyle) {\n            this.textStyle = this.baseProperties ? this.baseProperties.getTextStyle().clone() : new Style_1.TextStyle();\n            this.updateStyle(this.textStyle, \"styleText\");\n          }\n\n          return this.textStyle;\n        };\n\n        InputPositionProperties.prototype.getTextStylePropertyValue = function (propertyName) {\n          return this.getTextStyle()[propertyName];\n        };\n\n        InputPositionProperties.prototype.setTextStylePropertyValue = function (propertyName, value) {\n          this.getTextStyle()[propertyName] = value;\n        };\n\n        InputPositionProperties.prototype.updateConnectorProperties = function (properties) {\n          var _this = this;\n\n          var connectors = this.selection.getSelectedConnectors(true);\n          properties.forEach(function (propertyName) {\n            _this.updatePropertyValue(properties, connectors, function (item) {\n              return item[\"properties\"];\n            }, propertyName);\n          });\n        };\n\n        InputPositionProperties.prototype.updateStyle = function (style, stylePropertyName) {\n          var _this = this;\n\n          var items = this.selection.getSelectedItems(true);\n          style.forEach(function (propertyName) {\n            _this.updatePropertyValue(style, items, function (item) {\n              return item[stylePropertyName];\n            }, propertyName);\n          });\n        };\n\n        InputPositionProperties.prototype.updatePropertyValue = function (destObj, items, getSrcObj, propertyName) {\n          var value;\n          var valueAssigned = false;\n          items.forEach(function (item) {\n            var obj = getSrcObj(item);\n            var propertyValue = obj[propertyName];\n\n            if (value === undefined && propertyValue !== undefined) {\n              value = propertyValue;\n              valueAssigned = true;\n            } else if (valueAssigned && value !== propertyValue) {\n              value = undefined;\n              return;\n            }\n          });\n          if (valueAssigned) destObj[propertyName] = value;\n        };\n\n        return InputPositionProperties;\n      }();\n\n      exports.InputPositionProperties = InputPositionProperties;\n      /***/\n    },\n    /* 336 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.History = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var Utils_1 = __webpack_require__(3);\n\n      var History =\n      /** @class */\n      function () {\n        function History(modelManipulator) {\n          this.historyItems = [];\n          this.currentIndex = -1;\n          this.incrementalId = -1;\n          this.transactionLevel = -1;\n          this.unmodifiedIndex = -1; // need for async actions\n\n          this.currTransactionId = 0;\n          this.onChanged = new Utils_1.EventDispatcher();\n          this.modelManipulator = modelManipulator;\n        }\n\n        History.prototype.isModified = function () {\n          if (this.unmodifiedIndex === this.currentIndex) return false;\n          var startIndex = Math.min(this.unmodifiedIndex, this.currentIndex);\n          var endIndex = Math.max(this.unmodifiedIndex, this.currentIndex);\n\n          for (var i = startIndex + 1; i <= endIndex; i++) {\n            if (this.historyItems[i].changeModified()) return true;\n          }\n\n          return false;\n        };\n\n        History.prototype.undo = function () {\n          if (!this.canUndo()) return;\n          this.historyItems[this.currentIndex].undo(this.modelManipulator);\n          this.currentIndex--;\n          this.raiseChanged();\n        };\n\n        History.prototype.redo = function () {\n          if (!this.canRedo()) return;\n\n          if (this.startDataSyncItem) {\n            this.startDataSyncItem.undo(this.modelManipulator);\n            this.startDataSyncItem = undefined;\n          }\n\n          this.currentIndex++;\n          this.historyItems[this.currentIndex].redo(this.modelManipulator);\n          this.raiseChanged();\n        };\n\n        History.prototype.canUndo = function () {\n          return this.currentIndex >= 0;\n        };\n\n        History.prototype.canRedo = function () {\n          return this.currentIndex < this.historyItems.length - 1;\n        };\n\n        History.prototype.beginTransaction = function () {\n          this.transactionLevel++;\n          if (this.transactionLevel === 0) this.transaction = new HistoryItem_1.CompositionHistoryItem();\n          var id = this.currTransactionId++;\n          return id;\n        };\n\n        History.prototype.endTransaction = function (isDataSyncTransaction) {\n          if (--this.transactionLevel >= 0) return;\n          var transactionLength = this.transaction.historyItems.length;\n\n          if (transactionLength > 0) {\n            var historyItem = transactionLength > 1 ? this.transaction : this.transaction.historyItems.pop();\n            if (isDataSyncTransaction) this.addDataSyncItem(historyItem);else this.addInternal(historyItem);\n          }\n\n          if (transactionLength > 0 && !isDataSyncTransaction) this.raiseChanged();\n          delete this.transaction;\n        };\n\n        History.prototype.addAndRedo = function (historyItem) {\n          this.add(historyItem);\n          historyItem.redo(this.modelManipulator);\n          this.raiseChanged();\n        };\n\n        History.prototype.add = function (historyItem) {\n          if (this.transactionLevel >= 0) this.transaction.add(historyItem);else this.addInternal(historyItem);\n        };\n\n        History.prototype.addInternal = function (historyItem) {\n          if (this.currentIndex < this.historyItems.length - 1) {\n            this.historyItems.splice(this.currentIndex + 1);\n            this.unmodifiedIndex = Math.min(this.unmodifiedIndex, this.currentIndex);\n          }\n\n          this.historyItems.push(historyItem);\n          this.currentIndex++;\n          this.deleteOldItems();\n        };\n\n        History.prototype.addDataSyncItem = function (historyItem) {\n          var toHistoryItem = this.historyItems[this.currentIndex];\n\n          if (toHistoryItem) {\n            var compositionHistoryItem = void 0;\n            if (toHistoryItem instanceof HistoryItem_1.CompositionHistoryItem) compositionHistoryItem = toHistoryItem;else {\n              this.historyItems.splice(this.currentIndex, 1);\n              compositionHistoryItem = new HistoryItem_1.CompositionHistoryItem();\n              this.historyItems.push(compositionHistoryItem);\n              compositionHistoryItem.historyItems.push(toHistoryItem);\n            }\n            compositionHistoryItem.dataSyncItems.push(historyItem);\n          } else if (this.historyItems.length) this.startDataSyncItem = historyItem;\n        };\n\n        History.prototype.deleteOldItems = function () {\n          var exceedItemsCount = this.historyItems.length - History.MAX_HISTORY_ITEM_COUNT;\n\n          if (exceedItemsCount > 0 && this.currentIndex > exceedItemsCount) {\n            this.historyItems.splice(0, exceedItemsCount);\n            this.currentIndex -= exceedItemsCount;\n          }\n        };\n\n        History.prototype.getNextId = function () {\n          this.incrementalId++;\n          return this.incrementalId;\n        };\n\n        History.prototype.clear = function () {\n          this.currentIndex = -1;\n          this.unmodifiedIndex = -1;\n          this.incrementalId = -1;\n          this.historyItems = [];\n          delete this.transaction;\n          this.transactionLevel = -1;\n        };\n\n        History.prototype.resetModified = function () {\n          this.unmodifiedIndex = this.currentIndex;\n        };\n\n        History.prototype.getCurrentItemId = function () {\n          if (this.currentIndex === -1) return -1;\n          var currentItem = this.historyItems[this.currentIndex];\n          if (currentItem.uniqueId === -1) currentItem.uniqueId = this.getNextId();\n          return currentItem.uniqueId;\n        };\n\n        History.prototype.undoTransaction = function () {\n          var items = this.transaction.historyItems;\n\n          while (items.length) {\n            items.pop().undo(this.modelManipulator);\n          }\n        };\n\n        History.prototype.undoTransactionTo = function (item) {\n          var items = this.transaction.historyItems;\n\n          while (items.length) {\n            var ti = items.pop();\n            ti.undo(this.modelManipulator);\n            if (ti === item) return;\n          }\n        };\n\n        History.prototype.raiseChanged = function () {\n          if (this.transactionLevel === -1) this.onChanged.raise(\"notifyHistoryChanged\");\n        };\n\n        History.MAX_HISTORY_ITEM_COUNT = 100;\n        return History;\n      }();\n\n      exports.History = History;\n      /***/\n    },\n    /* 337 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics231 = function extendStatics(d, b) {\n          _extendStatics231 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics231(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics231(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.BarManager = void 0;\n\n      var batch_updatable_1 = __webpack_require__(79);\n\n      var BarManager =\n      /** @class */\n      function (_super) {\n        __extends(BarManager, _super);\n\n        function BarManager(control) {\n          var _this = _super.call(this) || this;\n\n          _this.bars = [];\n          _this.control = control;\n          return _this;\n        }\n\n        BarManager.prototype.clean = function () {\n          var _this = this;\n\n          this.bars.forEach(function (bar) {\n            return bar.onChanged.remove(_this);\n          });\n          this.bars = [];\n        };\n\n        BarManager.prototype.registerBar = function (bar) {\n          this.bars.push(bar);\n          bar.onChanged.add(this);\n          this.updateBarItemsState(bar);\n        };\n\n        BarManager.prototype.updateItemsState = function (queryCommands) {\n          if (this.isUpdateLocked()) return;\n\n          for (var i = 0, bar = void 0; bar = this.bars[i]; i++) {\n            this.updateBarItemsState(bar, queryCommands);\n          }\n        };\n\n        BarManager.prototype.updateBarItemsState = function (bar, queryCommands) {\n          if (this.isUpdateLocked()) return;\n          this.control.permissionsProvider.beginUpdateUI();\n\n          if (bar.isVisible()) {\n            var commandKeys = void 0;\n\n            if (queryCommands) {\n              var knownCommandKeys_1 = bar.getCommandKeys().reduce(function (hash, cmd) {\n                hash[cmd] = true;\n                return hash;\n              }, {});\n              commandKeys = queryCommands.filter(function (cmd) {\n                return knownCommandKeys_1[cmd];\n              });\n            } else commandKeys = bar.getCommandKeys();\n\n            var length_1 = commandKeys.length;\n\n            for (var j = 0; j < length_1; j++) {\n              this.updateBarItem(bar, commandKeys[j]);\n            }\n          }\n\n          this.control.permissionsProvider.endUpdateUI();\n        };\n\n        BarManager.prototype.updateBarItem = function (bar, commandKey) {\n          var command = this.control.commandManager.getCommand(commandKey);\n\n          if (command) {\n            var commandState = command.getState();\n            bar.setItemVisible(commandKey, commandState.visible);\n\n            if (commandState.visible) {\n              bar.setItemEnabled(commandKey, commandState.enabled);\n\n              if (!commandState.denyUpdateValue) {\n                var itemValue = this.getItemValue(commandState.value);\n                if (commandState.items) bar.setItemSubItems(commandKey, commandState.items);\n                bar.setItemValue(commandKey, itemValue, this.getDefaultItemValue(commandState.defaultValue));\n              }\n            }\n          }\n        };\n\n        BarManager.prototype.setEnabled = function (enabled) {\n          for (var i = 0, bar = void 0; bar = this.bars[i]; i++) {\n            bar.setEnabled(enabled);\n          }\n        };\n\n        BarManager.prototype.notifyBarCommandExecuted = function (commandID, parameter) {\n          var executeResult = this.control.commandManager.getCommand(commandID).execute(parameter);\n          if (!executeResult) this.updateItemsState([commandID]);\n        };\n\n        BarManager.prototype.notifyBarUpdateRequested = function () {\n          this.updateItemsState();\n        }; // ISelectionChangesListener\n\n\n        BarManager.prototype.notifySelectionChanged = function (_selection) {\n          this.updateItemsState();\n        };\n\n        BarManager.prototype.onUpdateUnlocked = function (occurredEvents) {};\n\n        BarManager.prototype.getItemValue = function (value) {\n          return value;\n        };\n\n        BarManager.prototype.getDefaultItemValue = function (value) {\n          return value;\n        };\n\n        return BarManager;\n      }(batch_updatable_1.BatchUpdatableObject);\n\n      exports.BarManager = BarManager;\n      /***/\n    },\n    /* 338 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.RenderManager = exports.DBL_CLICK_TIMEOUT = exports.LONG_TOUCH_TIMEOUT = void 0;\n\n      var Event_1 = __webpack_require__(11);\n\n      var evt_1 = __webpack_require__(80);\n\n      var dom_1 = __webpack_require__(26);\n\n      var point_1 = __webpack_require__(1);\n\n      var key_1 = __webpack_require__(25);\n\n      var browser_1 = __webpack_require__(17);\n\n      var Utils_1 = __webpack_require__(18);\n\n      var touch_1 = __webpack_require__(105);\n\n      var CanvasItemsManager_1 = __webpack_require__(76);\n\n      var ScrollView_1 = __webpack_require__(339);\n\n      var Settings_1 = __webpack_require__(27);\n\n      var InputManager_1 = __webpack_require__(340);\n\n      var CanvasPageManager_1 = __webpack_require__(341);\n\n      var CanvasViewManager_1 = __webpack_require__(343);\n\n      var CanvasSelectionManager_1 = __webpack_require__(160);\n\n      var AutoScrollController_1 = __webpack_require__(345);\n\n      var TextMeasurer_1 = __webpack_require__(77);\n\n      var RenderHelper_1 = __webpack_require__(15);\n\n      var DOMManipulator_1 = __webpack_require__(100);\n\n      var READONLY_CSSCLASS = \"dxdi-read-only\";\n      exports.LONG_TOUCH_TIMEOUT = 500;\n      exports.DBL_CLICK_TIMEOUT = 500;\n\n      var RenderManager =\n      /** @class */\n      function () {\n        function RenderManager(parent, events, measurer, settings, scrollView) {\n          this.moveLocked = false;\n          this.lockMouseMoveTimer = -1;\n          this.lastClickElement = undefined;\n          this.longTouchTimer = undefined;\n          this.dblTouchTimer = undefined;\n          var mainElement = RenderHelper_1.RenderHelper.createMainElement(parent);\n          var svgElement = RenderHelper_1.RenderHelper.createSvgElement(mainElement);\n          this.scroll = scrollView || new ScrollView_1.NativeScrollView(parent);\n          this.measurer = measurer;\n          this.dom = new DOMManipulator_1.DOMManipulator(this.measurer);\n          this.view = new CanvasViewManager_1.CanvasViewManager(this.scroll, svgElement, settings.modelSize, settings.zoomLevel, settings.autoZoom, settings.simpleView, settings.rectangle, this.dom);\n          this.input = new InputManager_1.InputManager(mainElement, this.view, events, this.measurer, settings.zoomLevel);\n          this.items = new CanvasItemsManager_1.CanvasItemsManager(this.view.canvasElement, settings.zoomLevel, this.dom);\n          this.page = new CanvasPageManager_1.CanvasPageManager(this.view.pageElement, settings, this.dom);\n          this.selection = new CanvasSelectionManager_1.CanvasSelectionManager(this.view.canvasElement, settings.zoomLevel, settings.readOnly, this.dom);\n          this.contextMenuEnabled = settings.contextMenuEnabled;\n          this.view.onViewChanged.add(this.page);\n          this.view.onViewChanged.add(this.items);\n          this.view.onViewChanged.add(this.selection);\n          this.view.onViewChanged.add(this.input);\n          this.autoScroll = new AutoScrollController_1.AutoScrollController(this.scroll, svgElement, this.view, this.dom);\n          this.attachEvents(svgElement);\n          this.mainElement = mainElement;\n          this.svgElement = svgElement;\n          this.events = events;\n          this.notifyReadOnlyChanged(settings.readOnly);\n        }\n\n        RenderManager.prototype.clean = function (removeElement) {\n          this.killLockMouseMoveTimer();\n          this.clearLastMouseDownEvent();\n          this.detachEvents(this.svgElement);\n          this.scroll.detachEvents();\n          this.input.detachEvents();\n          this.dom.cancelAnimation();\n          if (removeElement) removeElement(this.mainElement);\n        };\n\n        RenderManager.prototype.replaceParent = function (parent, scroll) {\n          if (this.mainElement && this.mainElement.parentNode !== parent) parent.appendChild(this.mainElement);\n\n          if (scroll && scroll !== this.scroll) {\n            this.scroll && this.scroll.detachEvents();\n            this.scroll = scroll;\n          }\n\n          if (this.measurer instanceof TextMeasurer_1.TextMeasurer) this.measurer.replaceParent(parent);\n        };\n\n        RenderManager.prototype.update = function (saveScrollPosition) {\n          this.view.adjust({\n            horizontal: !saveScrollPosition,\n            vertical: !saveScrollPosition\n          });\n          this.page.redraw();\n        };\n\n        RenderManager.prototype.onNewModel = function (items) {\n          this.measurer.onNewModel(items, this.dom);\n        };\n\n        RenderManager.prototype.clear = function () {\n          this.items.clear();\n          this.selection.clear();\n        };\n\n        RenderManager.prototype.attachEvents = function (svgElement) {\n          this.onMouseDownHandler = this.onMouseDown.bind(this);\n          this.onMouseEnterHandler = this.onMouseEnter.bind(this);\n          this.onMouseLeaveHandler = this.onMouseLeave.bind(this);\n          this.onMouseWheelHandler = this.onMouseWheel.bind(this);\n          this.onMouseDblClickHandler = this.onMouseDblClick.bind(this);\n          this.onContextMenuHandler = this.onContextMenu.bind(this);\n          this.onMouseMoveHandler = this.onMouseMove.bind(this);\n          this.onMouseUpHandler = this.onMouseUp.bind(this);\n          this.onWindowResizelHandler = this.onWindowResize.bind(this);\n          this.onOrientationChangeHandler = this.onOrientationChange.bind(this);\n          this.onMouseClickHandler = this.onMouseClick.bind(this);\n          RenderHelper_1.RenderHelper.addEventListener(svgElement, touch_1.TouchUtils.touchMouseDownEventName, this.onMouseDownHandler);\n          RenderHelper_1.RenderHelper.addEventListener(svgElement, \"mouseenter\", this.onMouseEnterHandler);\n          RenderHelper_1.RenderHelper.addEventListener(svgElement, \"mouseleave\", this.onMouseLeaveHandler);\n          RenderHelper_1.RenderHelper.addEventListener(svgElement, \"wheel\", this.onMouseWheelHandler);\n          RenderHelper_1.RenderHelper.addEventListener(svgElement, \"dblclick\", this.onMouseDblClickHandler);\n          RenderHelper_1.RenderHelper.addEventListener(svgElement, \"click\", this.onMouseClickHandler);\n          RenderHelper_1.RenderHelper.addEventListener(svgElement, \"contextmenu\", this.onContextMenuHandler);\n          RenderHelper_1.RenderHelper.addEventListener(document, touch_1.TouchUtils.touchMouseMoveEventName, this.onMouseMoveHandler);\n          RenderHelper_1.RenderHelper.addEventListener(document, touch_1.TouchUtils.touchMouseUpEventName, this.onMouseUpHandler);\n          RenderHelper_1.RenderHelper.addEventListener(window, \"resize\", this.onWindowResizelHandler);\n          RenderHelper_1.RenderHelper.addEventListener(window, \"orientationchange\", this.onOrientationChangeHandler);\n          this.input.mouseWheelHandler = this.onMouseWheelHandler;\n        };\n\n        RenderManager.prototype.detachEvents = function (svgElement) {\n          RenderHelper_1.RenderHelper.removeEventListener(svgElement, touch_1.TouchUtils.touchMouseDownEventName, this.onMouseDownHandler);\n          RenderHelper_1.RenderHelper.removeEventListener(svgElement, \"mouseenter\", this.onMouseEnterHandler);\n          RenderHelper_1.RenderHelper.removeEventListener(svgElement, \"mouseleave\", this.onMouseLeaveHandler);\n          RenderHelper_1.RenderHelper.removeEventListener(svgElement, \"wheel\", this.onMouseWheelHandler);\n          RenderHelper_1.RenderHelper.removeEventListener(svgElement, \"dblclick\", this.onMouseDblClickHandler);\n          RenderHelper_1.RenderHelper.removeEventListener(svgElement, \"contextmenu\", this.onContextMenuHandler);\n          RenderHelper_1.RenderHelper.removeEventListener(svgElement, \"click\", this.onMouseClickHandler);\n          RenderHelper_1.RenderHelper.removeEventListener(document, touch_1.TouchUtils.touchMouseMoveEventName, this.onMouseMoveHandler);\n          RenderHelper_1.RenderHelper.removeEventListener(document, touch_1.TouchUtils.touchMouseUpEventName, this.onMouseUpHandler);\n          RenderHelper_1.RenderHelper.removeEventListener(window, \"resize\", this.onWindowResizelHandler);\n          RenderHelper_1.RenderHelper.removeEventListener(window, \"orientationchange\", this.onOrientationChangeHandler);\n        };\n\n        RenderManager.prototype.onMouseDown = function (evt) {\n          var _this = this;\n\n          this.lockMouseMove();\n          this.input.lockFocus();\n          this.autoScroll.onMouseDown(evt);\n          this.lastDownMouseEvent = this.createDiagramMouseEvent(evt);\n          Utils_1.raiseEvent(evt, this.lastDownMouseEvent, function (e) {\n            return _this.events.onMouseDown(e);\n          });\n          if (this.events.canFinishTextEditing()) this.input.captureFocus();\n          if (browser_1.Browser.TouchUI) this.processTouchDown(evt);\n          var srcElement = evt_1.EvtUtils.getEventSource(evt);\n          var tagName = srcElement && srcElement.tagName;\n\n          if (browser_1.Browser.TouchUI || tagName.toLowerCase() === \"img\" || tagName.toLowerCase() === \"image\") {\n            // prevent dragging\n            evt_1.EvtUtils.preventEventAndBubble(evt);\n            return false;\n          }\n        };\n\n        RenderManager.prototype.onMouseMove = function (evt) {\n          var _this = this;\n\n          if (this.moveLocked) return;\n          this.autoScroll.onMouseMove(evt, function () {\n            return _this.onMouseMoveCore(evt);\n          });\n          this.onMouseMoveCore(evt);\n          browser_1.Browser.IE && this.lockMouseMove();\n          if (browser_1.Browser.TouchUI) this.processTouchMove(evt);\n        };\n\n        RenderManager.prototype.onMouseMoveCore = function (evt) {\n          var _this = this;\n\n          Utils_1.raiseEvent(evt, this.createDiagramMouseEvent(evt, browser_1.Browser.TouchUI), function (e) {\n            return _this.events.onMouseMove(e);\n          });\n        };\n\n        RenderManager.prototype.onMouseUp = function (evt) {\n          var _this = this;\n\n          this.lockMouseMove();\n          var mouseEvent = this.createDiagramMouseEvent(evt);\n          Utils_1.raiseEvent(evt, mouseEvent, function (e) {\n            return _this.events.onMouseUp(e);\n          });\n          this.autoScroll.onMouseUp(evt);\n          if (mouseEvent.source.type !== Event_1.MouseEventElementType.Undefined) this.input.captureFocus();\n          if (browser_1.Browser.TouchUI) this.processTouchUp(evt);\n        };\n\n        RenderManager.prototype.onMouseEnter = function (evt) {\n          var _this = this;\n\n          this.autoScroll.onMouseEnter(evt);\n          Utils_1.raiseEvent(evt, this.createDiagramMouseEvent(evt), function (e) {\n            return _this.events.onMouseEnter(e);\n          });\n        };\n\n        RenderManager.prototype.onMouseLeave = function (evt) {\n          var _this = this;\n\n          Utils_1.raiseEvent(evt, this.createDiagramMouseEvent(evt), function (e) {\n            return _this.events.onMouseLeave(e);\n          });\n        };\n\n        RenderManager.prototype.onMouseDblClick = function (evt) {\n          var _this = this;\n\n          Utils_1.raiseEvent(evt, this.createDiagramMouseEvent(evt), function (e) {\n            return _this.events.onDblClick(e);\n          });\n        };\n\n        RenderManager.prototype.onMouseClick = function (evt) {\n          var _this = this;\n\n          Utils_1.raiseEvent(evt, this.createActualMouseClickEvent(evt), function (e) {\n            return _this.events.onClick(e);\n          });\n        };\n\n        RenderManager.prototype.createActualMouseClickEvent = function (evt) {\n          if (!this.lastDownMouseEvent) return this.createDiagramMouseEvent(evt);\n          return new Event_1.DiagramMouseEvent(this.lastDownMouseEvent.modifiers, this.lastDownMouseEvent.button, this.lastDownMouseEvent.offsetPoint.clone(), this.lastDownMouseEvent.modelPoint.clone(), this.lastDownMouseEvent.source, this.createDiagramMouseEventTouches(evt));\n        };\n\n        RenderManager.prototype.onContextMenu = function (evt) {\n          var _this = this;\n\n          if (!this.contextMenuEnabled) return;\n          Utils_1.raiseEvent(evt, this.createDiagramContextMenuEvent(evt), function (e) {\n            return _this.events.onContextMenu(e);\n          });\n          this.input.captureFocus();\n          return evt_1.EvtUtils.preventEventAndBubble(evt);\n        };\n\n        RenderManager.prototype.processTouchDown = function (evt) {\n          var _this = this;\n\n          this.touchDownPoint = this.getTouchPointFromEvent(evt);\n          this.resetLongTouch();\n          this.longTouchTimer = setTimeout(function () {\n            Utils_1.raiseEvent(evt, _this.createDiagramMouseEvent(evt), function (e) {\n              return _this.events.onLongTouch(e);\n            });\n\n            _this.resetLongTouch();\n\n            _this.resetDblClick();\n          }, exports.LONG_TOUCH_TIMEOUT);\n        };\n\n        RenderManager.prototype.processTouchMove = function (evt) {\n          var currentTouchPoint = this.getTouchPointFromEvent(evt);\n\n          if (this.touchDownPoint && currentTouchPoint && (Math.abs(this.touchDownPoint.x - currentTouchPoint.x) > RenderManager.touchPositionLimit || Math.abs(this.touchDownPoint.y - currentTouchPoint.y) > RenderManager.touchPositionLimit)) {\n            this.resetLongTouch();\n            this.resetDblClick();\n          }\n        };\n\n        RenderManager.prototype.getTouchPointFromEvent = function (evt) {\n          var touchPosition;\n          var touches = evt[\"touches\"];\n          if (touches && touches.length > 0) touchPosition = new point_1.Point(touches[0].clientX, touches[0].clientY);\n          return touchPosition;\n        };\n\n        RenderManager.prototype.processTouchUp = function (evt) {\n          var _this = this;\n\n          if (this.longTouchTimer !== undefined) {\n            Utils_1.raiseEvent(evt, this.createDiagramMouseEvent(evt), function (e) {\n              return _this.events.onClick(e);\n            });\n            var element = evt_1.EvtUtils.getEventSource(evt);\n\n            if (this.dblTouchTimer !== undefined && this.lastClickElement === element) {\n              Utils_1.raiseEvent(evt, this.createDiagramMouseEvent(evt), function (e) {\n                return _this.events.onDblClick(e);\n              });\n              this.resetDblClick();\n            } else {\n              this.resetDblClick();\n              this.dblTouchTimer = setTimeout(function () {\n                return _this.dblTouchTimer = undefined;\n              }, exports.DBL_CLICK_TIMEOUT);\n            }\n\n            this.lastClickElement = element;\n          }\n\n          this.resetLongTouch();\n          this.touchDownPoint = undefined;\n        };\n\n        RenderManager.prototype.resetLongTouch = function () {\n          if (this.longTouchTimer !== undefined) clearTimeout(this.longTouchTimer);\n          this.longTouchTimer = undefined;\n        };\n\n        RenderManager.prototype.resetDblClick = function () {\n          if (this.dblTouchTimer !== undefined) clearTimeout(this.dblTouchTimer);\n          this.dblTouchTimer = undefined;\n        };\n\n        RenderManager.prototype.onOrientationChange = function () {\n          var _this = this;\n\n          setTimeout(function () {\n            return _this.onWindowResize();\n          }, 100);\n        };\n\n        RenderManager.prototype.onWindowResize = function () {\n          var resetTo = {\n            horizontal: false,\n            vertical: false\n          };\n\n          if (this.view.autoZoom !== Settings_1.AutoZoomMode.Disabled) {\n            resetTo.horizontal = true;\n            resetTo.vertical = true;\n          } else {\n            var oldFitInfo = this.view.checkFitToCanvas();\n            var newFitInfo = this.view.checkFitToCanvas(this.scroll.getSize());\n            resetTo = {\n              horizontal: oldFitInfo.horizontal !== newFitInfo.horizontal || newFitInfo.horizontal,\n              vertical: oldFitInfo.vertical !== newFitInfo.vertical || newFitInfo.vertical\n            };\n          }\n\n          this.view.adjust(resetTo);\n        };\n\n        RenderManager.prototype.onMouseWheel = function (evt) {\n          var _this = this;\n\n          Utils_1.raiseEvent(evt, this.createDiagramWheelEvent(evt), function (e) {\n            return _this.events.onMouseWheel(e);\n          });\n        };\n\n        RenderManager.prototype.notifyModelSizeChanged = function (size, offset) {\n          this.view.notifyModelSizeChanged(size, offset);\n        };\n\n        RenderManager.prototype.notifyModelRectangleChanged = function (rectangle) {\n          this.view.notifyModelRectangleChanged(rectangle);\n        };\n\n        RenderManager.prototype.notifyReadOnlyChanged = function (readOnly) {\n          dom_1.DomUtils.toggleClassName(this.mainElement, READONLY_CSSCLASS, readOnly);\n        };\n\n        RenderManager.prototype.notifyDragStart = function (itemKeys) {};\n\n        RenderManager.prototype.notifyDragEnd = function (itemKeys) {};\n\n        RenderManager.prototype.notifyDragScrollStart = function () {\n          this.autoScroll.onDragScrollStart();\n        };\n\n        RenderManager.prototype.notifyDragScrollEnd = function () {\n          this.autoScroll.onDragScrollEnd();\n        };\n\n        RenderManager.prototype.createDiagramMouseEvent = function (evt, findEventSourceByPosition) {\n          var modifiers = key_1.KeyUtils.getKeyModifiers(evt);\n          var button = isLeftButtonPressed(evt) ? Event_1.MouseButton.Left : Event_1.MouseButton.Right;\n          var offsetPoint = this.getOffsetPointByEvent(evt);\n          var modelPoint = this.getModelPoint(offsetPoint);\n          var eventSource = this.getEventSource(evt, findEventSourceByPosition);\n          var touches = this.createDiagramMouseEventTouches(evt);\n          return new Event_1.DiagramMouseEvent(modifiers, button, offsetPoint, modelPoint, eventSource, touches);\n        };\n\n        RenderManager.prototype.createDiagramMouseEventTouches = function (evt) {\n          var touches = [];\n          if (evt[\"touches\"]) for (var i = 0; i < evt[\"touches\"].length; i++) {\n            var x = evt[\"touches\"][i].clientX;\n            var y = evt[\"touches\"][i].clientY;\n            var offsetPoint = this.getOffsetPointByEventPoint(x, y);\n            var modelPoint = this.getModelPoint(offsetPoint);\n            touches.push(new Event_1.DiagramMouseEventTouch(offsetPoint, modelPoint));\n          }\n          return touches;\n        };\n\n        RenderManager.prototype.createDiagramContextMenuEvent = function (evt) {\n          var modifiers = key_1.KeyUtils.getKeyModifiers(evt);\n          var eventPoint = new point_1.Point(evt.pageX, evt.pageY);\n          var offsetPoint = this.getOffsetPointByEvent(evt);\n          var modelPoint = this.getModelPoint(offsetPoint);\n          return new Event_1.DiagramContextMenuEvent(modifiers, eventPoint, modelPoint);\n        };\n\n        RenderManager.prototype.createDiagramWheelEvent = function (evt) {\n          var modifiers = key_1.KeyUtils.getKeyModifiers(evt);\n          var offsetPoint = this.getOffsetPointByEvent(evt);\n          var modelPoint = this.view.getModelPoint(offsetPoint);\n          var eventSource = this.getEventSource(evt);\n          var deltaX = evt.deltaX || evt[\"originalEvent\"] && evt[\"originalEvent\"].deltaX;\n          var deltaY = evt.deltaY || evt[\"originalEvent\"] && evt[\"originalEvent\"].deltaY;\n          return new Event_1.DiagramWheelEvent(modifiers, deltaX, deltaY, offsetPoint, modelPoint, eventSource);\n        };\n\n        RenderManager.prototype.getEventSource = function (evt, findByPosition) {\n          var element = findByPosition ? evt_1.EvtUtils.getEventSourceByPosition(evt) : evt_1.EvtUtils.getEventSource(evt);\n          if (this.isDiagramControl(element)) while (element && !this.isDocumentContainer(element)) {\n            var src_1 = Utils_1.RenderUtils.getElementEventData(element);\n            if (src_1 !== undefined) return src_1;\n            if (this.input.isTextInputElement(element)) return new Event_1.MouseEventSource(Event_1.MouseEventElementType.Document);\n            element = element.parentNode;\n          }\n          var src = new Event_1.MouseEventSource(Event_1.MouseEventElementType.Undefined);\n          if (element && this.isDocumentContainer(element)) src.type = Event_1.MouseEventElementType.Background;\n          return src;\n        };\n\n        RenderManager.prototype.isDiagramControl = function (element) {\n          while (element) {\n            if (this.isDocumentContainer(element)) return true;\n            element = element.parentNode;\n          }\n\n          return false;\n        };\n\n        RenderManager.prototype.isDocumentContainer = function (element) {\n          return element === this.mainElement;\n        };\n\n        RenderManager.prototype.lockMouseMove = function () {\n          var _this = this;\n\n          this.moveLocked = true;\n          this.lockMouseMoveTimer = setTimeout(function () {\n            _this.moveLocked = false;\n            _this.lockMouseMoveTimer = -1;\n          }, 10); // because chrome raises 2 events on click: buttonDown and move.\n        };\n\n        RenderManager.prototype.killLockMouseMoveTimer = function () {\n          if (this.lockMouseMoveTimer !== -1) {\n            clearTimeout(this.lockMouseMoveTimer);\n            this.lockMouseMoveTimer = -1;\n          }\n        };\n\n        RenderManager.prototype.clearLastMouseDownEvent = function () {\n          this.lastDownMouseEvent = undefined;\n        };\n\n        RenderManager.prototype.getModelPoint = function (offsetPoint) {\n          return this.view.getModelPoint(offsetPoint);\n        };\n\n        RenderManager.prototype.getOffsetPointByEvent = function (evt) {\n          var clientX = evt_1.EvtUtils.getEventX(evt);\n          var clientY = evt_1.EvtUtils.getEventY(evt);\n          return this.getOffsetPointByEventPoint(clientX, clientY);\n        };\n\n        RenderManager.prototype.getOffsetPointByEventPoint = function (clientX, clientY) {\n          var scrollContainer = this.scroll.getScrollContainer();\n          var containerX = dom_1.DomUtils.getAbsolutePositionX(scrollContainer);\n          var containerY = dom_1.DomUtils.getAbsolutePositionY(scrollContainer);\n          return new point_1.Point(clientX - containerX, clientY - containerY);\n        };\n\n        RenderManager.prototype.getModelPointByEventPoint = function (clientX, clientY) {\n          var offsetPoint = this.getOffsetPointByEventPoint(clientX, clientY);\n          return this.view.getModelPoint(offsetPoint);\n        };\n\n        RenderManager.prototype.getEventPointByModelPoint = function (point) {\n          var pos = this.view.getAbsolutePoint(point);\n          var scrollContainer = this.scroll.getScrollContainer();\n          return new point_1.Point(dom_1.DomUtils.getAbsolutePositionX(scrollContainer) + pos.x, dom_1.DomUtils.getAbsolutePositionY(scrollContainer) + pos.y);\n        };\n\n        RenderManager.touchPositionLimit = 4;\n        return RenderManager;\n      }();\n\n      exports.RenderManager = RenderManager;\n\n      function isLeftButtonPressed(evt) {\n        return !browser_1.Browser.MSTouchUI ? evt_1.EvtUtils.isLeftButtonPressed(evt) : evt.button !== 2;\n      }\n      /***/\n\n    },\n    /* 339 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.NativeScrollView = void 0;\n\n      var Utils_1 = __webpack_require__(3);\n\n      var size_1 = __webpack_require__(2);\n\n      var point_1 = __webpack_require__(1);\n\n      var dom_1 = __webpack_require__(26);\n\n      var RenderHelper_1 = __webpack_require__(15);\n\n      var NativeScrollView =\n      /** @class */\n      function () {\n        function NativeScrollView(mainElement) {\n          this.onScroll = new Utils_1.EventDispatcher();\n          this.scrollBarWidth = dom_1.DomUtils.getVerticalScrollBarWidth();\n          this.mainElement = mainElement;\n          this.attachEvents();\n        }\n\n        NativeScrollView.prototype.attachEvents = function () {\n          var _this = this;\n\n          this.onScrollHandler = function () {\n            return _this.onScroll.raise1(function (l) {\n              return l.notifyScrollChanged(function () {\n                return _this.getScroll();\n              });\n            });\n          };\n\n          RenderHelper_1.RenderHelper.addEventListener(this.mainElement, \"scroll\", this.onScrollHandler);\n        };\n\n        NativeScrollView.prototype.detachEvents = function () {\n          RenderHelper_1.RenderHelper.removeEventListener(this.mainElement, \"scroll\", this.onScrollHandler);\n        };\n\n        NativeScrollView.prototype.getScrollContainer = function () {\n          return this.mainElement;\n        };\n\n        NativeScrollView.prototype.setScroll = function (left, top) {\n          var _this = this;\n\n          this.mainElement.style.overflow = \"scroll\";\n          this.mainElement.scrollLeft = left;\n          this.mainElement.scrollTop = top;\n          this.mainElement.style.overflow = \"\";\n          this.onScroll.raise1(function (l) {\n            return l.notifyScrollChanged(function () {\n              return _this.getScroll();\n            });\n          });\n        };\n\n        NativeScrollView.prototype.offsetScroll = function (left, top) {\n          var _this = this;\n\n          if (left) this.mainElement.scrollLeft += left;\n          if (top) this.mainElement.scrollTop += top;\n          this.onScroll.raise1(function (l) {\n            return l.notifyScrollChanged(function () {\n              return _this.getScroll();\n            });\n          });\n        };\n\n        NativeScrollView.prototype.getScroll = function () {\n          return new point_1.Point(this.mainElement.scrollLeft, this.mainElement.scrollTop);\n        };\n\n        NativeScrollView.prototype.getSize = function () {\n          var boundingRect = this.mainElement.getBoundingClientRect();\n          return new size_1.Size(Math.floor(boundingRect.width), Math.floor(boundingRect.height));\n        };\n\n        NativeScrollView.prototype.getScrollBarWidth = function () {\n          return this.scrollBarWidth;\n        };\n\n        return NativeScrollView;\n      }();\n\n      exports.NativeScrollView = NativeScrollView;\n      /***/\n    },\n    /* 340 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.InputManager = void 0;\n\n      var key_1 = __webpack_require__(25);\n\n      var dom_1 = __webpack_require__(26);\n\n      var Utils_1 = __webpack_require__(18);\n\n      var Event_1 = __webpack_require__(11);\n\n      var Shape_1 = __webpack_require__(14);\n\n      var Connector_1 = __webpack_require__(7);\n\n      var evt_1 = __webpack_require__(80);\n\n      var ITextMeasurer_1 = __webpack_require__(42);\n\n      var browser_1 = __webpack_require__(17);\n\n      var unit_converter_1 = __webpack_require__(12);\n\n      var RenderHelper_1 = __webpack_require__(15);\n\n      var TextUtils_1 = __webpack_require__(61);\n\n      var TEXT_INPUT_CSSCLASS = \"dxdi-text-input\";\n\n      var InputManager =\n      /** @class */\n      function () {\n        function InputManager(mainElement, layoutPointResolver, eventManager, textMeasurer, actualZoom) {\n          this.mainElement = mainElement;\n          this.layoutPointResolver = layoutPointResolver;\n          this.eventManager = eventManager;\n          this.textMeasurer = textMeasurer;\n          this.actualZoom = actualZoom;\n          this.focused = false;\n          this.focusLocked = false;\n          this.createInputElements(this.mainElement);\n        }\n\n        InputManager.prototype.detachEvents = function () {\n          this.detachInputElementEvents();\n          this.detachTextInputElementEvents();\n        };\n\n        InputManager.prototype.isFocused = function () {\n          return this.focused;\n        };\n\n        InputManager.prototype.captureFocus = function (inputElement, selectAll) {\n          var element = inputElement || this.inputElement;\n          element.focus({\n            preventScroll: true\n          });\n          if (selectAll && element.select) element.select();\n        };\n\n        InputManager.prototype.setClipboardData = function (data) {\n          this.clipboardInputElement.value = data;\n          this.clipboardInputElement.focus({\n            preventScroll: true\n          });\n          this.clipboardInputElement.select();\n          document.execCommand(\"copy\");\n          this.captureFocus();\n        };\n\n        InputManager.prototype.getClipboardData = function (callback) {\n          var _this = this;\n\n          if (navigator && navigator[\"clipboard\"]) navigator[\"clipboard\"].readText().then(function (clipText) {\n            callback(clipText);\n\n            _this.captureFocus();\n          }).catch(function () {\n            callback(\"\");\n\n            _this.captureFocus();\n          });else if (browser_1.Browser.IE) {\n            this.clipboardInputElement.value = \"\";\n            this.clipboardInputElement.focus({\n              preventScroll: true\n            });\n            this.clipboardInputElement.select();\n            document.execCommand(\"Paste\");\n            callback(this.clipboardInputElement.value);\n            this.captureFocus();\n          }\n        };\n\n        InputManager.prototype.isPasteSupportedByBrowser = function () {\n          return browser_1.Browser.IE || browser_1.Browser.WebKitFamily && navigator && navigator[\"clipboard\"] !== undefined;\n        };\n\n        InputManager.prototype.createInputElements = function (parent) {\n          this.createFocusInputElement(parent);\n          this.createTextInputElement(parent);\n          this.createClipboardInputElement(parent);\n          this.attachInputElementEvents();\n        };\n\n        InputManager.prototype.setInputElementFocusHandlerMode = function () {\n          this.textInputElementContainer.setAttribute(\"class\", \"dxdi-text-input-container\");\n          this.captureFocus();\n        };\n\n        InputManager.prototype.setInputElementTextInputMode = function (text, position, size, style, className, textAngle) {\n          this.textInputElementContainer.setAttribute(\"class\", \"dxdi-text-input-container \" + className);\n          this.textInputElement.value = text;\n          this.setTextInputElementBounds(position, size, textAngle);\n          this.setTextInputElementStyle(style);\n          this.updateTextInputPadding();\n          this.captureFocus(this.textInputElement, true);\n        };\n\n        InputManager.prototype.setTextInputElementBounds = function (position, size, textAngle) {\n          this.savedTextInputPosition = position;\n          this.savedTextInputSize = size;\n          this.savedTextInputAngle = textAngle;\n          var abs = this.layoutPointResolver.getAbsolutePoint(position, true);\n          this.textInputElementContainer.style.left = abs.x + \"px\";\n          this.textInputElementContainer.style.top = abs.y + \"px\";\n          this.textInputElementContainer.style.width = size && size.width + \"px\" || \"0px\";\n          this.textInputElementContainer.style.height = size && size.height + \"px\" || \"0px\";\n          var transforms = [];\n          this.textInputElementContainer.style.transform = \"\";\n          if (this.actualZoom !== 1) transforms.push(\"scale(\" + this.actualZoom + \")\");\n          if (textAngle) transforms.push(\"rotate(\" + textAngle + \"deg)\");\n          this.textInputElementContainer.style.transform = transforms.join(\" \");\n          this.textInputElement.style.width = size && size.width + \"px\" || \"\";\n          this.textInputElement.style.height = size && size.height + \"px\" || \"auto\";\n        };\n\n        InputManager.prototype.setTextInputElementStyle = function (style) {\n          this.savedTextInputStyle = style;\n          Utils_1.RenderUtils.applyStyleToElement(style, this.textInputElement);\n        };\n\n        InputManager.prototype.createFocusInputElement = function (parent) {\n          this.inputElement = document.createElement(\"textarea\");\n          this.inputElement.readOnly = browser_1.Browser.TouchUI; // prevent show keyboard on mobile devices, but the \"paste\" event isn't raised for some desktop browsers(IE)\n\n          this.inputElement.setAttribute(\"class\", \"dxdi-focus-input\");\n          parent.appendChild(this.inputElement);\n        };\n\n        InputManager.prototype.attachInputElementEvents = function () {\n          this.onInputBlurHandler = this.onInputBlur.bind(this);\n          this.onInputFocusHandler = this.onInputFocus.bind(this);\n          this.onInputKeyDownHandler = this.onInputKeyDown.bind(this);\n          this.onInputKeyPressHandler = this.onInputKeyPress.bind(this);\n          this.onInputKeyUpHandler = this.onInputKeyUp.bind(this);\n          this.onPasteHandler = this.onPaste.bind(this);\n          RenderHelper_1.RenderHelper.addEventListener(this.inputElement, \"blur\", this.onInputBlurHandler);\n          RenderHelper_1.RenderHelper.addEventListener(this.inputElement, \"focus\", this.onInputFocusHandler);\n          RenderHelper_1.RenderHelper.addEventListener(this.inputElement, \"keydown\", this.onInputKeyDownHandler);\n          RenderHelper_1.RenderHelper.addEventListener(this.inputElement, \"keypress\", this.onInputKeyPressHandler);\n          RenderHelper_1.RenderHelper.addEventListener(this.inputElement, \"keyup\", this.onInputKeyUpHandler);\n          RenderHelper_1.RenderHelper.addEventListener(this.inputElement, \"paste\", this.onPasteHandler);\n        };\n\n        InputManager.prototype.detachInputElementEvents = function () {\n          RenderHelper_1.RenderHelper.removeEventListener(this.inputElement, \"blur\", this.onInputBlurHandler);\n          RenderHelper_1.RenderHelper.removeEventListener(this.inputElement, \"focus\", this.onInputFocusHandler);\n          RenderHelper_1.RenderHelper.removeEventListener(this.inputElement, \"keydown\", this.onInputKeyDownHandler);\n          RenderHelper_1.RenderHelper.removeEventListener(this.inputElement, \"keypress\", this.onInputKeyPressHandler);\n          RenderHelper_1.RenderHelper.removeEventListener(this.inputElement, \"keyup\", this.onInputKeyUpHandler);\n          RenderHelper_1.RenderHelper.removeEventListener(this.inputElement, \"paste\", this.onPasteHandler);\n        };\n\n        InputManager.prototype.createTextInputElement = function (parent) {\n          this.textInputElementContainer = document.createElement(\"div\");\n          this.textInputElementContainer.setAttribute(\"class\", \"dxdi-text-input-container\");\n          parent.appendChild(this.textInputElementContainer);\n          this.textInputElement = document.createElement(\"textarea\");\n          this.textInputElement.setAttribute(\"class\", TEXT_INPUT_CSSCLASS);\n          this.attachTextInputElementEvents();\n          this.textInputElementContainer.appendChild(this.textInputElement);\n        };\n\n        InputManager.prototype.attachTextInputElementEvents = function () {\n          this.onTextInputBlurHandler = this.onTextInputBlur.bind(this);\n          this.onTextInputFocusHandler = this.onTextInputFocus.bind(this);\n          this.onTextInputKeyDownHandler = this.onTextInputKeyDown.bind(this);\n          this.onTextInputMouseWheelHandler = this.onTextInputMouseWheel.bind(this);\n          this.onTextInputMouseUpHandler = this.onTextInputMouseUp.bind(this);\n          this.onTextInputKeyUpHandler = this.onTextInputKeyUp.bind(this);\n          this.onTextInputChangeHandler = this.onTextInputChange.bind(this);\n          RenderHelper_1.RenderHelper.addEventListener(this.textInputElement, \"mousewheel\", this.onTextInputMouseWheelHandler);\n          RenderHelper_1.RenderHelper.addEventListener(this.textInputElement, \"mouseup\", this.onTextInputMouseUpHandler);\n          RenderHelper_1.RenderHelper.addEventListener(this.textInputElement, \"blur\", this.onTextInputBlurHandler);\n          RenderHelper_1.RenderHelper.addEventListener(this.textInputElement, \"focus\", this.onTextInputFocusHandler);\n          RenderHelper_1.RenderHelper.addEventListener(this.textInputElement, \"keydown\", this.onTextInputKeyDownHandler);\n          RenderHelper_1.RenderHelper.addEventListener(this.textInputElement, \"keyup\", this.onTextInputKeyUpHandler);\n          RenderHelper_1.RenderHelper.addEventListener(this.textInputElement, \"change\", this.onTextInputChangeHandler);\n        };\n\n        InputManager.prototype.detachTextInputElementEvents = function () {\n          RenderHelper_1.RenderHelper.removeEventListener(this.textInputElement, \"mousewheel\", this.onTextInputMouseWheelHandler);\n          RenderHelper_1.RenderHelper.removeEventListener(this.textInputElement, \"mouseup\", this.onTextInputMouseUpHandler);\n          RenderHelper_1.RenderHelper.removeEventListener(this.textInputElement, \"blur\", this.onTextInputBlurHandler);\n          RenderHelper_1.RenderHelper.removeEventListener(this.textInputElement, \"focus\", this.onTextInputFocusHandler);\n          RenderHelper_1.RenderHelper.removeEventListener(this.textInputElement, \"keydown\", this.onTextInputKeyDownHandler);\n          RenderHelper_1.RenderHelper.removeEventListener(this.textInputElement, \"keyup\", this.onTextInputKeyUpHandler);\n          RenderHelper_1.RenderHelper.removeEventListener(this.textInputElement, \"change\", this.onTextInputChangeHandler);\n        };\n\n        InputManager.prototype.createClipboardInputElement = function (parent) {\n          this.clipboardInputElement = document.createElement(\"textarea\");\n          this.clipboardInputElement.setAttribute(\"class\", \"dxdi-clipboard-input\");\n          parent.appendChild(this.clipboardInputElement);\n        };\n\n        InputManager.prototype.blurControl = function () {\n          if (!this.focusLocked) {\n            this.focused = false;\n            dom_1.DomUtils.removeClassName(this.mainElement, \"focused\");\n          }\n        };\n\n        InputManager.prototype.focusControl = function () {\n          this.focused = true;\n          this.focusLocked = false;\n          dom_1.DomUtils.addClassName(this.mainElement, \"focused\");\n        };\n\n        InputManager.prototype.updateTextInputPadding = function () {\n          var text = this.textInputElement.value;\n\n          if (!this.savedTextInputSize) {\n            var measureResults = this.textMeasurer.measureWords(\" \", this.savedTextInputStyle, ITextMeasurer_1.TextOwner.Connector);\n            var textHeight = TextUtils_1.getLineHeight(measureResults) * ((TextUtils_1.textToParagraphs(text).length || 1) + 1);\n            this.textInputElement.style.height = Math.ceil(textHeight) + \"px\";\n          } else {\n            var measureResults = this.textMeasurer.measureWords(text, this.savedTextInputStyle, ITextMeasurer_1.TextOwner.Shape);\n            var textHeight = TextUtils_1.getTextHeight(text, this.savedTextInputSize.width, measureResults, true);\n            var top_1 = Math.max(0, (this.savedTextInputSize.height - textHeight) * 0.5);\n            this.textInputElement.style.paddingTop = Math.ceil(top_1) + \"px\";\n            this.textInputElement.style.height = Math.floor(this.savedTextInputSize.height) + \"px\";\n          }\n        };\n\n        InputManager.prototype.onInputBlur = function (evt) {\n          var _this = this;\n\n          this.blurControl();\n          Utils_1.raiseEvent(evt, this.getDiagramFocusEvent(evt), function (e) {\n            return _this.eventManager.onBlur(e);\n          });\n        };\n\n        InputManager.prototype.onInputFocus = function (evt) {\n          var _this = this;\n\n          this.focusControl();\n          Utils_1.raiseEvent(evt, this.getDiagramFocusEvent(evt), function (e) {\n            return _this.eventManager.onFocus(e);\n          });\n        };\n\n        InputManager.prototype.onInputKeyDown = function (evt) {\n          var _this = this;\n\n          Utils_1.raiseEvent(evt, this.getDiagramKeyboardEvent(evt), function (e) {\n            return _this.eventManager.onKeyDown(e);\n          });\n        };\n\n        InputManager.prototype.onInputKeyPress = function (evt) {\n          if (evt.preventDefault) evt.preventDefault(); // prevent page scroll because of hidden textarea\n        };\n\n        InputManager.prototype.onInputKeyUp = function (evt) {\n          var _this = this;\n\n          Utils_1.raiseEvent(evt, this.getDiagramKeyboardEvent(evt), function (e) {\n            return _this.eventManager.onKeyUp(e);\n          });\n        };\n\n        InputManager.prototype.onTextInputBlur = function (evt) {\n          var _this = this;\n\n          if (this.eventManager.canFinishTextEditing()) {\n            this.blurControl();\n            Utils_1.raiseEvent(evt, this.getDiagramFocusEvent(evt), function (e) {\n              return _this.eventManager.onTextInputBlur(e);\n            });\n          } else {\n            var srcElement = evt_1.EvtUtils.getEventSource(evt);\n            if (document.activeElement !== srcElement) // It is always true in runtime. This condition is needed only for tests to run correctly in JSDOM\n              srcElement.focus();\n          }\n        };\n\n        InputManager.prototype.onTextInputFocus = function (evt) {\n          var _this = this;\n\n          this.focusControl();\n          Utils_1.raiseEvent(evt, this.getDiagramFocusEvent(evt), function (e) {\n            return _this.eventManager.onTextInputFocus(e);\n          });\n        };\n\n        InputManager.prototype.onTextInputKeyDown = function (evt) {\n          var _this = this;\n\n          Utils_1.raiseEvent(evt, this.getDiagramKeyboardEvent(evt), function (e) {\n            return _this.eventManager.onTextInputKeyDown(e);\n          });\n        };\n\n        InputManager.prototype.onTextInputKeyUp = function (evt) {\n          this.updateTextInputPadding();\n        };\n\n        InputManager.prototype.onTextInputChange = function (evt) {\n          this.updateTextInputPadding();\n        };\n\n        InputManager.prototype.onPaste = function (evt) {\n          var _this = this;\n\n          Utils_1.raiseEvent(evt, this.getDiagramClipboardEvent(evt), function (e) {\n            return _this.eventManager.onPaste(e);\n          });\n        };\n\n        InputManager.prototype.onTextInputMouseWheel = function (evt) {\n          this.mouseWheelHandler && this.mouseWheelHandler(evt);\n        };\n\n        InputManager.prototype.onTextInputMouseUp = function (evt) {\n          if (evt.stopPropagation) evt.stopPropagation();\n          evt_1.EvtUtils.cancelBubble(evt);\n        };\n\n        InputManager.prototype.getDiagramKeyboardEvent = function (evt) {\n          return new Event_1.DiagramKeyboardEvent(key_1.KeyUtils.getKeyModifiers(evt), key_1.KeyUtils.getEventKeyCode(evt), this.textInputElement.value); // TODO: check it\n        };\n\n        InputManager.prototype.getTextInputElementValue = function () {\n          return this.textInputElement.value;\n        };\n\n        InputManager.prototype.getDiagramFocusEvent = function (evt) {\n          return new Event_1.DiagramFocusEvent(evt.target.value);\n        };\n\n        InputManager.prototype.getDiagramClipboardEvent = function (evt) {\n          var clipboardData;\n          var evtClipboardData = evt.clipboardData || evt[\"originalEvent\"] && evt[\"originalEvent\"].clipboardData;\n          if (evtClipboardData !== undefined) clipboardData = evtClipboardData.getData(\"text/plain\");else clipboardData = window[\"clipboardData\"].getData(\"Text\");\n          return new Event_1.DiagramClipboardEvent(clipboardData);\n        };\n\n        InputManager.prototype.isTextInputElement = function (element) {\n          return typeof element.className === \"string\" && element.className.indexOf(TEXT_INPUT_CSSCLASS) > -1;\n        };\n\n        InputManager.prototype.lockFocus = function () {\n          var _this = this;\n\n          this.focusLocked = true;\n          setTimeout(function () {\n            return _this.focusLocked = false;\n          }, 10);\n        };\n\n        InputManager.prototype.notifyViewAdjusted = function (canvasOffset) {};\n\n        InputManager.prototype.notifyActualZoomChanged = function (actualZoom) {\n          this.actualZoom = actualZoom;\n          if (this.savedTextInputPosition && this.savedTextInputSize) this.setTextInputElementBounds(this.savedTextInputPosition, this.savedTextInputSize, this.savedTextInputAngle);\n        };\n\n        InputManager.prototype.notifyTextInputStart = function (item, text, position, size) {\n          var className = \"\";\n          var textAngle;\n\n          if (item instanceof Shape_1.Shape) {\n            className = \"shape-text\";\n            textAngle = item.textAngle;\n          } else if (item instanceof Connector_1.Connector) className = \"connector-text\";\n\n          size = size && size.clone().applyConverter(unit_converter_1.UnitConverter.twipsToPixels);\n          this.setInputElementTextInputMode(text, position, size, item.styleText, className, textAngle);\n        };\n\n        InputManager.prototype.notifyTextInputEnd = function (item) {\n          this.setInputElementFocusHandlerMode();\n        };\n\n        InputManager.prototype.notifyTextInputPermissionsCheck = function (item, allowed) {};\n\n        return InputManager;\n      }();\n\n      exports.InputManager = InputManager;\n      /***/\n    },\n    /* 341 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics232 = function extendStatics(d, b) {\n          _extendStatics232 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics232(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics232(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.CanvasPageManager = void 0;\n\n      var Style_1 = __webpack_require__(30);\n\n      var RectaglePrimitive_1 = __webpack_require__(21);\n\n      var PathPrimitive_1 = __webpack_require__(4);\n\n      var PatternPrimitive_1 = __webpack_require__(342);\n\n      var ClipPathPrimitive_1 = __webpack_require__(53);\n\n      var CanvasManagerBase_1 = __webpack_require__(41);\n\n      var size_1 = __webpack_require__(2);\n\n      var point_1 = __webpack_require__(1);\n\n      var Utils_1 = __webpack_require__(18);\n\n      var color_1 = __webpack_require__(22);\n\n      var unit_converter_1 = __webpack_require__(12);\n\n      var GRID_PAGES_LINEWIDTH = 2;\n\n      var CanvasPageManager =\n      /** @class */\n      function (_super) {\n        __extends(CanvasPageManager, _super);\n\n        function CanvasPageManager(parent, settings, dom) {\n          var _this = _super.call(this, settings.zoomLevel, dom) || this;\n\n          _this.snapPoint = new point_1.Point(0, 0);\n          _this.gridPatternId = Utils_1.RenderUtils.generateSvgElementId(\"gridPattern\");\n          _this.pagesGridPatternId = Utils_1.RenderUtils.generateSvgElementId(\"pagesGridPattern\");\n          _this.pagesGridClipId = Utils_1.RenderUtils.generateSvgElementId(\"pagesGridClip\");\n          _this.pageColor = settings.pageColor;\n          _this.modelSize = settings.modelSize;\n          _this.simpleView = settings.simpleView;\n          _this.gridSize = settings.gridSize;\n          _this.gridVisible = settings.gridVisible;\n          _this.pageSize = settings.pageLandscape ? new size_1.Size(settings.pageSize.height, settings.pageSize.width) : settings.pageSize;\n          _this.canvasViewOffset = new point_1.Point(0, 0);\n\n          _this.initContainers(parent);\n\n          return _this;\n        }\n\n        CanvasPageManager.prototype.initContainers = function (parent) {\n          this.backgroundContainer = parent;\n        };\n\n        CanvasPageManager.prototype.redraw = function () {\n          this.redrawPage(this.pageColor);\n          this.redrawGrid();\n        };\n\n        CanvasPageManager.prototype.redrawPage = function (color) {\n          var style = new Style_1.Style();\n          style[\"fill\"] = color_1.ColorUtils.colorToHash(color);\n          this.getOrCreateElement(\"page-bg\", new RectaglePrimitive_1.RectanglePrimitive(0, 0, \"100%\", \"100%\", style, \"page\"), this.backgroundContainer);\n          this.createTextFloodFilter(\"page-bg-textflood-filter\", this.backgroundContainer, color);\n        };\n\n        CanvasPageManager.prototype.redrawGrid = function () {\n          this.updateGridElements();\n          this.updatePagesGridElements();\n        };\n\n        CanvasPageManager.prototype.getGridRectElement = function (primitive) {\n          if (this.gridRectElement === undefined) this.gridRectElement = this.createPrimitiveElement(primitive, this.backgroundContainer);\n          return this.gridRectElement;\n        };\n\n        CanvasPageManager.prototype.getGridPatternElement = function (primitive) {\n          if (this.gridPatternElement === undefined) this.gridPatternElement = this.createPrimitiveElement(primitive, this.backgroundContainer);\n          return this.gridPatternElement;\n        };\n\n        CanvasPageManager.prototype.updateGridElements = function () {\n          var _this = this;\n\n          var gridRectPrimitive = new RectaglePrimitive_1.RectanglePrimitive(\"0\", \"0\", \"100%\", \"100%\", null, \"grid\", null, function (element) {\n            element.style.setProperty(\"fill\", Utils_1.RenderUtils.getUrlPathById(_this.gridPatternId));\n          });\n          var rectEl = this.getGridRectElement(gridRectPrimitive);\n          if (!this.gridVisible) rectEl.style.display = \"none\";else {\n            rectEl.style.display = \"\";\n            this.changePrimitiveElement(gridRectPrimitive, rectEl);\n            var absGridSize_1 = unit_converter_1.UnitConverter.twipsToPixelsF(this.gridSize) * this.actualZoom;\n            var sizes = [0, 1, 2, 3, 4].map(function (i) {\n              return Math.round(absGridSize_1 * i);\n            });\n            var outerPathCommands = [new PathPrimitive_1.PathPrimitiveMoveToCommand(sizes[4].toString(), \"0\"), new PathPrimitive_1.PathPrimitiveLineToCommand(sizes[4].toString(), sizes[4].toString()), new PathPrimitive_1.PathPrimitiveLineToCommand(\"0\", sizes[4].toString())];\n            var innerPathCommands = [];\n\n            for (var i = 1; i <= 3; i++) {\n              innerPathCommands.push(new PathPrimitive_1.PathPrimitiveMoveToCommand(sizes[i].toString(), \"0\"));\n              innerPathCommands.push(new PathPrimitive_1.PathPrimitiveLineToCommand(sizes[i].toString(), sizes[4].toString()));\n            }\n\n            for (var i = 1; i <= 3; i++) {\n              innerPathCommands.push(new PathPrimitive_1.PathPrimitiveMoveToCommand(\"0\", sizes[i].toString()));\n              innerPathCommands.push(new PathPrimitive_1.PathPrimitiveLineToCommand(sizes[4].toString(), sizes[i].toString()));\n            }\n\n            var commonSize = absGridSize_1 * 4;\n            var canvasViewOffset = this.simpleView ? this.canvasViewOffset : point_1.Point.zero();\n            var gridPatternPrimitive = new PatternPrimitive_1.PatternPrimitive(this.gridPatternId, [this.createGridPathPrimitive(outerPathCommands, \"grid-outer-line\"), this.createGridPathPrimitive(innerPathCommands, \"grid-inner-line\")], this.createGridPatternPrimitivePosition(canvasViewOffset.x, this.snapPoint.x, commonSize), this.createGridPatternPrimitivePosition(canvasViewOffset.y, this.snapPoint.y, commonSize), commonSize.toString(), commonSize.toString());\n            this.changePrimitiveElement(gridPatternPrimitive, this.getGridPatternElement(gridPatternPrimitive));\n          }\n        };\n\n        CanvasPageManager.prototype.createGridPatternPrimitivePosition = function (offset, coord, commonSize) {\n          return (((offset + coord * this.actualZoom) % commonSize - commonSize) % commonSize).toString();\n        };\n\n        CanvasPageManager.prototype.createGridPathPrimitive = function (commands, className) {\n          return new PathPrimitive_1.PathPrimitive(commands, Style_1.StrokeStyle.default1pxNegativeOffsetInstance, className);\n        };\n\n        CanvasPageManager.prototype.getPagesGridRectElement = function (primitive) {\n          return this.getOrCreateElement(\"grid-pages-rect\", primitive, this.backgroundContainer);\n        };\n\n        CanvasPageManager.prototype.getPagesGridClipPathElement = function (primitive) {\n          if (this.pagesGridClipPathElement === undefined) this.pagesGridClipPathElement = this.createPrimitiveElement(primitive, this.backgroundContainer);\n          return this.pagesGridClipPathElement;\n        };\n\n        CanvasPageManager.prototype.getPagesGridPatternElement = function (primitive) {\n          if (this.pagesGridPatternElement === undefined) this.pagesGridPatternElement = this.createPrimitiveElement(primitive, this.backgroundContainer);\n          return this.pagesGridPatternElement;\n        };\n\n        CanvasPageManager.prototype.updatePagesGridElements = function () {\n          var _this = this;\n\n          var pageAbsSize = this.getAbsoluteSize(this.pageSize);\n          var rectPrimitive = new RectaglePrimitive_1.RectanglePrimitive(\"0\", \"0\", \"100%\", \"100%\", null, \"grid-page\", this.pagesGridClipId, function (element) {\n            element.style.setProperty(\"fill\", Utils_1.RenderUtils.getUrlPathById(_this.pagesGridPatternId));\n            element.style.setProperty(\"display\", _this.simpleView ? \"none\" : \"\");\n          });\n          this.getPagesGridRectElement(rectPrimitive);\n\n          if (!this.simpleView) {\n            var modelSize = this.modelSize.clone().multiply(this.actualZoom, this.actualZoom);\n            var pageGridPathCommands = [new PathPrimitive_1.PathPrimitiveMoveToCommand((pageAbsSize.width - GRID_PAGES_LINEWIDTH / 2).toString(), \"0\"), new PathPrimitive_1.PathPrimitiveLineToCommand((pageAbsSize.width - GRID_PAGES_LINEWIDTH / 2).toString(), (pageAbsSize.height - GRID_PAGES_LINEWIDTH / 2).toString()), new PathPrimitive_1.PathPrimitiveLineToCommand(\"0\", (pageAbsSize.height - GRID_PAGES_LINEWIDTH / 2).toString())];\n            var pagesGridPatternPrimitive = new PatternPrimitive_1.PatternPrimitive(this.pagesGridPatternId, [new PathPrimitive_1.PathPrimitive(pageGridPathCommands, null, \"pages-grid-line\")], 0, 0, pageAbsSize.width.toString(), pageAbsSize.height.toString());\n            this.changePrimitiveElement(pagesGridPatternPrimitive, this.getPagesGridPatternElement(pagesGridPatternPrimitive));\n            var pagesGridClipPathPrimitive = new ClipPathPrimitive_1.ClipPathPrimitive(this.pagesGridClipId, [new RectaglePrimitive_1.RectanglePrimitive(0, 0, (unit_converter_1.UnitConverter.twipsToPixelsF(modelSize.width) - GRID_PAGES_LINEWIDTH * 2).toString(), (unit_converter_1.UnitConverter.twipsToPixelsF(modelSize.height) - GRID_PAGES_LINEWIDTH * 2).toString())]);\n            this.changePrimitiveElement(pagesGridClipPathPrimitive, this.getPagesGridClipPathElement(pagesGridClipPathPrimitive));\n          }\n        };\n\n        CanvasPageManager.prototype.notifyModelSizeChanged = function (size, offset) {\n          this.modelSize = size.clone();\n          this.redraw();\n        };\n\n        CanvasPageManager.prototype.notifyModelRectangleChanged = function (rectangle) {};\n\n        CanvasPageManager.prototype.notifySnapPointPositionChanged = function (point) {\n          this.snapPoint = point.clone().applyConverter(unit_converter_1.UnitConverter.twipsToPixelsF);\n          this.redrawGrid();\n        };\n\n        CanvasPageManager.prototype.notifyPageColorChanged = function (color) {\n          this.pageColor = color;\n          this.redrawPage(this.pageColor);\n        };\n\n        CanvasPageManager.prototype.notifyModelChanged = function (changes) {};\n\n        CanvasPageManager.prototype.notifyPageSizeChanged = function (pageSize, pageLandscape) {\n          this.pageSize = pageLandscape ? new size_1.Size(pageSize.height, pageSize.width) : pageSize.clone();\n          this.redraw();\n        };\n\n        CanvasPageManager.prototype.notifyActualZoomChanged = function (actualZoom) {\n          this.actualZoom = actualZoom;\n          this.redraw();\n        };\n\n        CanvasPageManager.prototype.notifyViewAdjusted = function (canvasViewOffset) {\n          if (!this.canvasViewOffset.equals(canvasViewOffset)) {\n            this.canvasViewOffset = canvasViewOffset;\n            if (this.simpleView) this.redraw();\n          }\n        };\n\n        CanvasPageManager.prototype.notifyViewChanged = function (simpleView) {\n          this.simpleView = simpleView;\n          this.redraw();\n        };\n\n        CanvasPageManager.prototype.notifyGridChanged = function (showGrid, gridSize) {\n          this.gridVisible = showGrid;\n          this.gridSize = gridSize;\n          this.redraw();\n        };\n\n        return CanvasPageManager;\n      }(CanvasManagerBase_1.CanvasManagerBase);\n\n      exports.CanvasPageManager = CanvasPageManager;\n      /***/\n    },\n    /* 342 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics233 = function extendStatics(d, b) {\n          _extendStatics233 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics233(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics233(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.PatternPrimitive = void 0;\n\n      var RenderHelper_1 = __webpack_require__(15);\n\n      var Primitive_1 = __webpack_require__(24);\n\n      var PatternPrimitive =\n      /** @class */\n      function (_super) {\n        __extends(PatternPrimitive, _super);\n\n        function PatternPrimitive(id, children, x, y, width, height, style) {\n          var _this = _super.call(this, style) || this;\n\n          _this.id = id;\n          _this.x = x;\n          _this.y = y;\n          _this.width = width;\n          _this.height = height;\n          _this.children = children;\n          return _this;\n        }\n\n        PatternPrimitive.prototype.createMainElement = function () {\n          var element = document.createElementNS(RenderHelper_1.svgNS, \"pattern\");\n          element.setAttribute(\"patternUnits\", \"userSpaceOnUse\");\n          element.setAttribute(\"id\", this.id);\n          return element;\n        };\n\n        PatternPrimitive.prototype.applyElementProperties = function (element, measurer) {\n          this.setUnitAttribute(element, \"x\", this.x);\n          this.setUnitAttribute(element, \"y\", this.y);\n          this.setUnitAttribute(element, \"width\", this.width);\n          this.setUnitAttribute(element, \"height\", this.height);\n          this.setPositionCorrectionAttribute(element);\n\n          _super.prototype.applyElementProperties.call(this, element, measurer);\n        };\n\n        return PatternPrimitive;\n      }(Primitive_1.SvgPrimitive);\n\n      exports.PatternPrimitive = PatternPrimitive;\n      /***/\n    },\n    /* 343 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics234 = function extendStatics(d, b) {\n          _extendStatics234 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics234(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics234(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.CanvasViewManager = exports.CROP_OFFSET = exports.CANVAS_SCROLL_PADDING = exports.CANVAS_MIN_PADDING = void 0;\n\n      var CanvasManagerBase_1 = __webpack_require__(41);\n\n      var Settings_1 = __webpack_require__(27);\n\n      var Utils_1 = __webpack_require__(3);\n\n      var offsets_1 = __webpack_require__(87);\n\n      var size_1 = __webpack_require__(2);\n\n      var point_1 = __webpack_require__(1);\n\n      var GroupPrimitive_1 = __webpack_require__(38);\n\n      var ClipPathPrimitive_1 = __webpack_require__(53);\n\n      var RectaglePrimitive_1 = __webpack_require__(21);\n\n      var Utils_2 = __webpack_require__(18);\n\n      var ShadowFilterPrimitive_1 = __webpack_require__(344);\n\n      var Style_1 = __webpack_require__(30);\n\n      var dom_1 = __webpack_require__(26);\n\n      var unit_converter_1 = __webpack_require__(12);\n\n      exports.CANVAS_MIN_PADDING = 8;\n      exports.CANVAS_SCROLL_PADDING = 18;\n      exports.CROP_OFFSET = 40;\n      var DRAG_SCROLL_CSSCLASS = \"dxdi-drag-scroll\";\n      var DRAG_ITEM_CSSCLASS = \"dxdi-drag-item\";\n\n      var CanvasViewManager =\n      /** @class */\n      function (_super) {\n        __extends(CanvasViewManager, _super);\n\n        function CanvasViewManager(scrollView, svgElement, modelSize, fixedZoomLevel, autoZoom, simpleView, rectangle, dom) {\n          var _this = _super.call(this, fixedZoomLevel, dom) || this;\n\n          _this.svgElement = svgElement;\n          _this.paddings = new offsets_1.Offsets(0, 0, 0, 0);\n          _this.scroll = new point_1.Point(0, 0);\n          _this.crop = offsets_1.Offsets.empty();\n          _this.lockAutoZoom = false;\n          _this.autoScrollLocker = 0;\n          _this.pageClipPathId = Utils_2.RenderUtils.generateSvgElementId(\"page-clip\");\n          _this.pageShadowId = Utils_2.RenderUtils.generateSvgElementId(\"page-shadow\");\n          _this.onViewChanged = new Utils_1.EventDispatcher();\n          scrollView.onScroll.add(_this);\n          modelSize = modelSize.clone().applyConverter(unit_converter_1.UnitConverter.twipsToPixelsF);\n          _this.scrollView = scrollView;\n          _this.modelSize = modelSize;\n          _this.simpleView = simpleView;\n          _this.fixedZoomLevel = fixedZoomLevel;\n          _this.autoZoom = autoZoom;\n          _this.crop = _this.rectangleToCrop(rectangle, modelSize);\n\n          _this.updateElements(modelSize.clone().multiply(fixedZoomLevel, fixedZoomLevel), point_1.Point.zero(), simpleView); // TODO: remove?\n\n\n          _this.getOrCreateElement(\"shadow\", new ShadowFilterPrimitive_1.ShadowFilterPrimitive(_this.pageShadowId), _this.svgElement);\n\n          _this.containerSize = scrollView.getSize();\n          return _this;\n        }\n\n        CanvasViewManager.prototype.adjust = function (resetPaddings) {\n          var offset;\n\n          if (!resetPaddings) {\n            resetPaddings = {\n              vertical: false,\n              horizontal: false\n            };\n            offset = offsets_1.Offsets.empty();\n          }\n\n          this.containerSize = this.scrollView.getSize();\n          this.adjustCore(this.modelSize, this.fixedZoomLevel, this.autoZoom, this.simpleView, this.crop, resetPaddings, this.containerSize, offset);\n          this.tryNormalizePaddings();\n        };\n\n        CanvasViewManager.prototype.notifyModelSizeChanged = function (size, offset) {\n          size = size.clone().applyConverter(unit_converter_1.UnitConverter.twipsToPixelsF);\n          var resetPaddings = {\n            horizontal: !offset,\n            vertical: !offset\n          };\n          this.adjustCore(size, this.fixedZoomLevel, this.autoZoom, this.simpleView, this.crop, resetPaddings, this.containerSize, offset && offset.clone().applyConverter(unit_converter_1.UnitConverter.twipsToPixelsF));\n          this.modelSize = size;\n        };\n\n        CanvasViewManager.prototype.notifyModelRectangleChanged = function (rectangle) {\n          var crop = this.rectangleToCrop(rectangle, this.modelSize);\n\n          if (!this.crop || !this.crop.equals(crop)) {\n            if (this.simpleView) this.adjustCore(this.modelSize, this.fixedZoomLevel, this.autoZoom, this.simpleView, crop, {\n              horizontal: false,\n              vertical: false\n            }, this.containerSize, offsets_1.Offsets.empty());\n            this.crop = crop;\n          }\n        };\n\n        CanvasViewManager.prototype.notifySnapPointPositionChanged = function (point) {};\n\n        CanvasViewManager.prototype.notifyZoomChanged = function (fixedZoomLevel, autoZoom) {\n          this.adjustCore(this.modelSize, fixedZoomLevel, autoZoom, this.simpleView, this.crop, {\n            horizontal: false,\n            vertical: false\n          }, this.containerSize);\n          this.fixedZoomLevel = fixedZoomLevel;\n          this.autoZoom = autoZoom;\n        };\n\n        CanvasViewManager.prototype.notifyViewChanged = function (simpleView) {\n          this.adjustCore(this.modelSize, this.fixedZoomLevel, this.autoZoom, simpleView, this.crop, {\n            vertical: true,\n            horizontal: true\n          }, this.containerSize);\n          this.simpleView = simpleView;\n        };\n\n        CanvasViewManager.prototype.notifyGridChanged = function (showGrid, gridSize) {};\n\n        CanvasViewManager.prototype.notifyDragStart = function (itemKeys) {\n          this.lockAutoZoom = true;\n          dom_1.DomUtils.addClassName(this.svgElement, DRAG_ITEM_CSSCLASS);\n        };\n\n        CanvasViewManager.prototype.notifyDragEnd = function (itemKeys) {\n          this.lockAutoZoom = false;\n          dom_1.DomUtils.removeClassName(this.svgElement, DRAG_ITEM_CSSCLASS);\n          if (this.autoZoom) this.adjust({\n            horizontal: true,\n            vertical: true\n          });\n        };\n\n        CanvasViewManager.prototype.notifyDragScrollStart = function () {\n          dom_1.DomUtils.addClassName(this.svgElement, DRAG_SCROLL_CSSCLASS);\n        };\n\n        CanvasViewManager.prototype.notifyDragScrollEnd = function () {\n          dom_1.DomUtils.removeClassName(this.svgElement, DRAG_SCROLL_CSSCLASS);\n        };\n\n        CanvasViewManager.prototype.notifyScrollChanged = function (getScroll) {\n          this.scroll = getScroll();\n        };\n\n        CanvasViewManager.prototype.checkFitToCanvas = function (containerSize) {\n          containerSize = containerSize || this.containerSize;\n          var scrollSize = this.scrollView.getScrollBarWidth();\n          containerSize = containerSize.clone().offset(-exports.CANVAS_MIN_PADDING * 2, -exports.CANVAS_MIN_PADDING * 2).nonNegativeSize();\n          var modelAbsSize = this.getActualModelSizeWithoutZoom(this.modelSize, this.simpleView, this.crop).clone().multiply(this.actualZoom, this.actualZoom);\n          var scrollbars = this.checkScrollBars(containerSize, scrollSize, modelAbsSize, offsets_1.Offsets.empty());\n          containerSize = containerSize.clone().offset(scrollbars.vertical ? -scrollSize : 0, scrollbars.horizontal ? -scrollSize : 0).nonNegativeSize();\n          return {\n            vertical: containerSize.height >= modelAbsSize.height,\n            horizontal: containerSize.width >= modelAbsSize.width\n          };\n        };\n\n        CanvasViewManager.prototype.rectangleToCrop = function (rectangle, modelSize) {\n          var absRectangle = rectangle.clone().applyConverter(unit_converter_1.UnitConverter.twipsToPixelsF);\n          return new offsets_1.Offsets(this.correctCrop(absRectangle.x), this.correctCrop(modelSize.width - absRectangle.right), this.correctCrop(absRectangle.y), this.correctCrop(modelSize.height - absRectangle.bottom));\n        };\n\n        CanvasViewManager.prototype.correctCrop = function (newVal) {\n          return exports.CROP_OFFSET * Math.floor(newVal / exports.CROP_OFFSET);\n        };\n\n        CanvasViewManager.prototype.setActualZoom = function (actualZoom) {\n          if (this.actualZoom !== actualZoom) {\n            this.actualZoom = actualZoom;\n            this.onViewChanged.raise1(function (l) {\n              return l.notifyActualZoomChanged(actualZoom);\n            });\n          }\n        };\n\n        CanvasViewManager.prototype.getActualAutoZoomLevel = function (autoZoom) {\n          if (autoZoom === Settings_1.AutoZoomMode.Disabled) return this.actualZoom;\n          var containerSize = this.containerSize;\n          var scrollbarWidth = this.scrollView.getScrollBarWidth();\n          var actualModelSizeWithoutZoom = this.getActualModelSizeWithoutZoom(this.modelSize, this.simpleView, this.crop);\n          return this.getActualAutoZoom(containerSize, scrollbarWidth, actualModelSizeWithoutZoom, autoZoom);\n        };\n\n        CanvasViewManager.prototype.getActualZoom = function (containerSize, scrollbarWidth, actualModelSizeWithoutZoom, fixedZoom, autoZoom) {\n          return this.lockAutoZoom ? this.actualZoom : autoZoom === Settings_1.AutoZoomMode.Disabled ? fixedZoom : this.getActualAutoZoom(containerSize, scrollbarWidth, actualModelSizeWithoutZoom, autoZoom);\n        };\n\n        CanvasViewManager.prototype.getActualAutoZoom = function (containerSize, scrollbarWidth, actualModelSizeWithoutZoom, autoZoom) {\n          if (autoZoom === Settings_1.AutoZoomMode.FitContent) return Math.min((containerSize.width - exports.CANVAS_MIN_PADDING * 2) / actualModelSizeWithoutZoom.width, (containerSize.height - exports.CANVAS_MIN_PADDING * 2) / actualModelSizeWithoutZoom.height, 1);\n          return Math.min((containerSize.width - exports.CANVAS_MIN_PADDING * 2 - scrollbarWidth) / actualModelSizeWithoutZoom.width, 1);\n        };\n\n        CanvasViewManager.prototype.tryNormalizePaddings = function () {\n          var scrollbarWidth = this.scrollView.getScrollBarWidth();\n          var actualModelSize = this.getActualModelSizeWithoutZoom(this.modelSize, this.simpleView, this.crop).clone().multiply(this.actualZoom, this.actualZoom);\n          var translate = new point_1.Point(this.paddings.left, this.paddings.top);\n          var currentTail = new size_1.Size(this.paddings.right, this.paddings.bottom);\n          var tail = this.getTailSpace(translate, this.scroll, actualModelSize, this.containerSize, scrollbarWidth);\n          if (!tail.equals(currentTail)) this.applyChanges(new offsets_1.Offsets(translate.x, tail.width, translate.y, tail.height), actualModelSize, this.simpleView, this.crop.clone().multiply(this.actualZoom));\n        };\n\n        CanvasViewManager.prototype.scrollBy = function (offset) {\n          var _a, _b, _c;\n\n          var scroll = this.scroll;\n          var containerSize = this.containerSize;\n          var scrollbarWidth = this.scrollView.getScrollBarWidth();\n          var actualModelSize = this.getActualModelSizeWithoutZoom(this.modelSize, this.simpleView, this.crop).clone().multiply(this.actualZoom, this.actualZoom);\n          var scrollbars = this.checkScrollBars(containerSize, scrollbarWidth, actualModelSize, this.paddings);\n          var translate = new point_1.Point(this.paddings.left, this.paddings.top);\n          var tail = new size_1.Size(this.paddings.right, this.paddings.bottom);\n          _a = this.changeScrollByOffset(translate, scroll, tail, actualModelSize, offset, containerSize, scrollbars), scroll = _a.scroll, offset = _a.offset;\n          _b = this.changeTranslateByOffset(translate, tail, offset, scrollbars), translate = _b.translate, offset = _b.offset;\n          _c = this.cropHiddenHead(translate, scroll), translate = _c.translate, scroll = _c.scroll;\n          tail = this.getTailSpace(translate, scroll, actualModelSize, containerSize, scrollbarWidth);\n          this.applyChanges(new offsets_1.Offsets(translate.x, tail.width, translate.y, tail.height), actualModelSize, this.simpleView, this.crop.clone().multiply(this.actualZoom), scroll);\n          return offset;\n        };\n\n        CanvasViewManager.prototype.changeScrollByOffset = function (curTranslate, curScroll, curTail, modelSize, curOffset, containerSize, scrollbars) {\n          var scroll = curScroll.clone();\n          var offset = curOffset.clone();\n          if (curOffset.x && scrollbars.horizontal) scroll.x -= offset.x = -this.getScrollDeltaByOffset(curOffset.x, curScroll.x, curTranslate.x + modelSize.width + curTail.width, containerSize.width, scrollbars.vertical);\n          if (curOffset.y && scrollbars.vertical) scroll.y -= offset.y = -this.getScrollDeltaByOffset(curOffset.y, curScroll.y, curTranslate.y + modelSize.height + curTail.height, containerSize.height, scrollbars.horizontal);\n          return {\n            scroll: scroll,\n            offset: offset\n          };\n        };\n\n        CanvasViewManager.prototype.changeTranslateByOffset = function (curTranslate, curTail, curOffset, scrollbars) {\n          var translate = curTranslate.clone();\n          var offset = curOffset.clone();\n          if (curOffset.x && !scrollbars.horizontal) translate.x += offset.x = this.getTranslateDeltaByOffset(curOffset.x, translate.x, curTail.width);\n          if (curOffset.y && !scrollbars.vertical) translate.y += offset.y = this.getTranslateDeltaByOffset(curOffset.y, translate.y, curTail.height);\n          return {\n            translate: translate,\n            offset: offset\n          };\n        };\n\n        CanvasViewManager.prototype.getScrollDeltaByOffset = function (offset, scroll, commonWidth, containerWidth, hasScrollbar) {\n          if (offset > 0) return -Math.min(scroll, offset);\n          var maxScroll = commonWidth - (containerWidth - (hasScrollbar ? this.scrollView.getScrollBarWidth() : 0));\n          return Math.min(maxScroll - scroll, -offset);\n        };\n\n        CanvasViewManager.prototype.getTranslateDeltaByOffset = function (offset, headPadding, tailPadding) {\n          if (!offset) return 0;\n          return offset < 0 ? -Math.min(headPadding - exports.CANVAS_MIN_PADDING, -offset) : Math.min(tailPadding - exports.CANVAS_MIN_PADDING, offset);\n        };\n\n        CanvasViewManager.prototype.getActualModelSizeWithoutZoom = function (originModelSize, simpleView, crop) {\n          return simpleView && crop ? originModelSize.clone().offset(-crop.horizontal, -crop.vertical).nonNegativeSize() : originModelSize;\n        };\n\n        CanvasViewManager.prototype.setScrollTo = function (modelPoint, offsetPoint) {\n          var containerSize = this.containerSize;\n          var shift = this.getVisibileAreaAbsShift();\n          var absPoint = modelPoint.clone().applyConverter(unit_converter_1.UnitConverter.twipsToPixelsF).clone().multiply(this.actualZoom, this.actualZoom).clone().offset(shift.x, shift.y);\n          var scroll = this.scroll;\n\n          if (!offsetPoint) {\n            if (absPoint.x < 0) scroll.x += absPoint.x - exports.CANVAS_MIN_PADDING;\n            if (absPoint.y < 0) scroll.y += absPoint.y - exports.CANVAS_MIN_PADDING;\n            if (absPoint.x > containerSize.width) scroll.x += absPoint.x - containerSize.width + exports.CANVAS_MIN_PADDING;\n            if (absPoint.y > containerSize.height) scroll.y += absPoint.y - containerSize.height + exports.CANVAS_MIN_PADDING;\n          } else {\n            scroll.x += absPoint.x - offsetPoint.x;\n            scroll.y += absPoint.y - offsetPoint.y;\n          }\n\n          this.setScroll(scroll);\n        };\n\n        CanvasViewManager.prototype.scrollIntoView = function (rectangle) {\n          rectangle = rectangle.clone().applyConverter(unit_converter_1.UnitConverter.twipsToPixelsF).multiply(this.actualZoom, this.actualZoom).moveRectangle(this.paddings.left, this.paddings.top);\n          var scroll = this.scroll;\n          var container = this.containerSize;\n          if (rectangle.x >= scroll.x && rectangle.y >= scroll.y && rectangle.right <= scroll.x + container.width && rectangle.bottom <= scroll.y + container.height) return;\n          var newScroll = scroll.clone();\n          if (rectangle.x < scroll.x) newScroll.x = rectangle.x - exports.CANVAS_SCROLL_PADDING;else if (rectangle.right > scroll.x + container.width) // [..|..x|x.]\n            newScroll.x = Math.min(rectangle.x - exports.CANVAS_SCROLL_PADDING, rectangle.right + exports.CANVAS_SCROLL_PADDING - container.width);\n          if (rectangle.y < scroll.y) newScroll.y = rectangle.y - exports.CANVAS_SCROLL_PADDING;else newScroll.y = Math.min(rectangle.y - exports.CANVAS_SCROLL_PADDING, rectangle.bottom + exports.CANVAS_SCROLL_PADDING - container.height);\n          this.setScroll(newScroll);\n        };\n\n        CanvasViewManager.prototype.setScroll = function (pt) {\n          var _this = this;\n\n          var modelAbsSize = this.modelSize.clone().multiply(this.actualZoom, this.actualZoom);\n          pt.x = Math.max(0, Math.min(pt.x, modelAbsSize.width + this.paddings.horizontal - this.containerSize.width));\n          pt.y = Math.max(0, Math.min(pt.y, modelAbsSize.height + this.paddings.vertical - this.containerSize.height));\n          this.dom.changeByFunc(null, function () {\n            _this.scrollView.setScroll(pt.x, pt.y);\n          });\n          this.scroll = pt.clone();\n        };\n\n        CanvasViewManager.prototype.updateElements = function (modelAbsSize, translate, simpleView) {\n          this.updatePageElement(modelAbsSize, translate, simpleView);\n          this.updateCanvasElement(translate);\n        };\n\n        CanvasViewManager.prototype.updateCanvasElement = function (translate) {\n          this.canvasElement = this.getOrCreateElement(\"dxdi-main\", new GroupPrimitive_1.GroupPrimitive([], \"dxdi-main\", null, null, function (el) {\n            el.setAttribute(\"transform\", \"translate(\" + Math.round(translate.x) + \", \" + Math.round(translate.y) + \")\");\n          }), this.svgElement);\n        };\n\n        CanvasViewManager.prototype.updatePageElement = function (modelAbsSize, translate, simpleView) {\n          if (!simpleView) this.getOrCreateElement(\"pageShadowRect\", new RectaglePrimitive_1.RectanglePrimitive(translate.x.toString(), translate.y.toString(), modelAbsSize.width.toString(), modelAbsSize.height.toString(), new Style_1.EmptyStyle({\n            \"filter\": Utils_2.RenderUtils.getUrlPathById(this.pageShadowId)\n          }), \"dxdi-page-shadow\"), this.svgElement);\n          this.pageElement = this.getOrCreateElement(\"page\", new GroupPrimitive_1.GroupPrimitive([], \"dxdi-page\", null, !simpleView ? this.pageClipPathId : \"\", function (el) {\n            el.setAttribute(\"transform\", \"translate(\" + (simpleView ? 0 : Math.round(translate.x)) + \", \" + (simpleView ? 0 : Math.round(translate.y)) + \")\");\n          }), this.svgElement);\n          this.getOrCreateElement(\"pageClip\", this.createPageClipPathPrimitive(modelAbsSize), this.svgElement);\n        };\n\n        CanvasViewManager.prototype.createPageClipPathPrimitive = function (modelAbsSize) {\n          var children = [];\n          children.push(new RectaglePrimitive_1.RectanglePrimitive(0, 0, modelAbsSize.width.toString(), modelAbsSize.height.toString()));\n          return new ClipPathPrimitive_1.ClipPathPrimitive(this.pageClipPathId, children);\n        };\n\n        CanvasViewManager.prototype.adjustCore = function (newModelSize, fixedZoomLevel, autoZoom, simpleView, crop, resetPaddings, containerSize, offset) {\n          var actualModelSizeWithoutZoom = this.getActualModelSizeWithoutZoom(newModelSize, simpleView, crop);\n\n          if (!this.lockAutoZoom && (autoZoom || !offset || !this.modelSize)) {\n            var scrollbarWidth = this.scrollView.getScrollBarWidth();\n            var actualZoom = this.getActualZoom(containerSize, scrollbarWidth, actualModelSizeWithoutZoom, fixedZoomLevel, autoZoom);\n            if (autoZoom && actualZoom === this.actualZoom && (!resetPaddings.horizontal || !resetPaddings.vertical)) this.resizeView(actualModelSizeWithoutZoom, actualZoom, containerSize, simpleView, crop, offset || offsets_1.Offsets.empty());else {\n              this.resetView(actualModelSizeWithoutZoom, actualZoom, containerSize, simpleView, crop, resetPaddings);\n              this.setActualZoom(actualZoom);\n            }\n          } else this.resizeView(actualModelSizeWithoutZoom, this.actualZoom, containerSize, simpleView, crop, offset);\n        };\n\n        CanvasViewManager.prototype.resetView = function (actualModelSizeWithoutZoom, actualZoom, containerSize, simpleView, cropWithoutZoom, toReset) {\n          var actualModelSize = actualModelSizeWithoutZoom.clone().multiply(actualZoom, actualZoom);\n          var paddings = offsets_1.Offsets.fromNumber(exports.CANVAS_MIN_PADDING);\n          toReset = toReset || {\n            horizontal: true,\n            vertical: true\n          };\n\n          if (!toReset.horizontal && this.paddings) {\n            paddings.left = this.paddings.left;\n            paddings.right = this.paddings.right;\n          }\n\n          if (!toReset.vertical && this.paddings) {\n            paddings.top = this.paddings.top;\n            paddings.bottom = this.paddings.bottom;\n          }\n\n          var scrollbars = this.checkScrollBars(containerSize, this.scrollView.getScrollBarWidth(), actualModelSize, paddings);\n          var scrollBarWidth = this.scrollView.getScrollBarWidth();\n          var scroll = toReset.horizontal || toReset.vertical ? this.scroll : undefined;\n\n          if (toReset.horizontal) {\n            var paddingsH = Math.max((containerSize.width - (scrollbars.vertical ? scrollBarWidth : 0) - actualModelSize.width) / 2, exports.CANVAS_MIN_PADDING);\n            paddings.left = paddingsH;\n            paddings.right = paddingsH;\n            scroll.x = 0;\n          }\n\n          if (toReset.vertical) {\n            var paddingsV = Math.max((containerSize.height - (scrollbars.horizontal ? scrollBarWidth : 0) - actualModelSize.height) / 2, exports.CANVAS_MIN_PADDING);\n            paddings.top = paddingsV;\n            paddings.bottom = paddingsV;\n            scroll.y = 0;\n          }\n\n          this.applyChanges(paddings, actualModelSize, simpleView, cropWithoutZoom.clone().multiply(actualZoom), scroll);\n        };\n\n        CanvasViewManager.prototype.resizeView = function (actualModelSizeWithoutZoom, actualZoom, containerSize, simpleView, cropWithoutZoom, offset) {\n          var _a, _b;\n\n          var oldZoom = this.actualZoom;\n          var oldCrop = this.simpleView && this.crop ? this.crop.clone().multiply(oldZoom) : offsets_1.Offsets.empty();\n          var actualModelSize = actualModelSizeWithoutZoom.clone().multiply(actualZoom, actualZoom);\n          offset = offset.clone().multiply(actualZoom);\n          var newCrop = simpleView && cropWithoutZoom ? cropWithoutZoom.clone().multiply(actualZoom) : offsets_1.Offsets.empty();\n          var translate = new point_1.Point(this.paddings.left, this.paddings.top);\n          var scroll = this.scroll;\n          _a = this.applyOffset(translate, scroll, oldCrop, newCrop, offset), translate = _a.translate, scroll = _a.scroll;\n          _b = this.cropHiddenHead(translate, scroll), translate = _b.translate, scroll = _b.scroll;\n          var tailSpace = this.getTailSpace(translate, scroll, actualModelSize, containerSize, this.scrollView.getScrollBarWidth());\n          var newPaddings = new offsets_1.Offsets(translate.x, tailSpace.width, translate.y, tailSpace.height);\n          this.applyChanges(newPaddings, actualModelSize, simpleView, newCrop, scroll);\n        };\n\n        CanvasViewManager.prototype.applyChanges = function (paddings, actualModelSize, simpleView, crop, scroll) {\n          var _this = this;\n\n          var translate = new point_1.Point(paddings.left, paddings.top);\n          if (simpleView && crop) translate = translate.clone().offset(-crop.left, -crop.top);\n          this.updateElements(actualModelSize, translate, simpleView);\n          this.setSvgSize(actualModelSize.width + paddings.horizontal, actualModelSize.height + paddings.vertical);\n          this.onViewChanged.raise1(function (l) {\n            return l.notifyViewAdjusted(new point_1.Point(translate.x, translate.y));\n          });\n\n          if (scroll) {\n            this.lockAutoScroll();\n            scroll && this.dom.changeByFunc(this.scrollView, function (s) {\n              s.setScroll(scroll.x, scroll.y);\n\n              _this.unlockAutoScroll();\n            });\n            this.scroll = scroll;\n          }\n\n          this.paddings = paddings;\n        };\n\n        CanvasViewManager.prototype.isAutoScrollLocked = function () {\n          return this.autoScrollLocker !== 0;\n        };\n\n        CanvasViewManager.prototype.lockAutoScroll = function () {\n          this.autoScrollLocker++;\n        };\n\n        CanvasViewManager.prototype.unlockAutoScroll = function () {\n          this.autoScrollLocker--;\n        };\n\n        CanvasViewManager.prototype.applyOffset = function (curTranslate, curScroll, oldCrop, newCrop, modelOffset) {\n          var translate = curTranslate.clone();\n          var scroll = curScroll.clone();\n          var offset = this.getActualOffset(oldCrop, newCrop, modelOffset);\n\n          if (offset.left) {\n            translate.x = Math.max(exports.CANVAS_MIN_PADDING, translate.x - offset.left);\n            scroll.x += offset.left - (curTranslate.x - translate.x);\n          }\n\n          if (offset.top) {\n            translate.y = Math.max(exports.CANVAS_MIN_PADDING, translate.y - offset.top);\n            scroll.y += offset.top - (curTranslate.y - translate.y);\n          }\n\n          return {\n            translate: translate,\n            scroll: scroll\n          };\n        };\n\n        CanvasViewManager.prototype.cropHiddenHead = function (curTranslate, curScroll) {\n          var scroll = curScroll.clone();\n          var translate = curTranslate.clone();\n\n          if (scroll.x && translate.x > exports.CANVAS_MIN_PADDING) {\n            var delta = translate.x - Math.max(exports.CANVAS_MIN_PADDING, translate.x - scroll.x);\n            translate.x -= delta;\n            scroll.x -= delta;\n          }\n\n          if (scroll.y && translate.y > exports.CANVAS_MIN_PADDING) {\n            var delta = translate.y - Math.max(exports.CANVAS_MIN_PADDING, translate.y - scroll.y);\n            translate.y -= delta;\n            scroll.y -= delta;\n          }\n\n          return {\n            translate: translate,\n            scroll: scroll\n          };\n        };\n\n        CanvasViewManager.prototype.getTailSpace = function (curTranslate, curScroll, newModelAbsSize, containerSize, scrollbarWidth) {\n          var translate = curTranslate.clone();\n          var scroll = curScroll.clone();\n          var right = Math.max(containerSize.width + scroll.x - (translate.x + newModelAbsSize.width), exports.CANVAS_MIN_PADDING);\n          var bottom = Math.max(containerSize.height + scroll.y - (translate.y + newModelAbsSize.height), exports.CANVAS_MIN_PADDING);\n          var scrollbars = this.checkScrollBars(containerSize, scrollbarWidth, newModelAbsSize, new offsets_1.Offsets(translate.x, right, translate.y, bottom));\n          if (scrollbars.vertical) right = Math.max(exports.CANVAS_MIN_PADDING, right - scrollbarWidth);\n          if (scrollbars.horizontal) bottom = Math.max(exports.CANVAS_MIN_PADDING, bottom - scrollbarWidth);\n          return new size_1.Size(right, bottom);\n        };\n\n        CanvasViewManager.prototype.getActualOffset = function (oldCrop, newCrop, docOffset) {\n          return new offsets_1.Offsets(-(newCrop.left - oldCrop.left) + docOffset.left, -(newCrop.right - oldCrop.right) + docOffset.right, -(newCrop.top - oldCrop.top) + docOffset.top, -(newCrop.bottom - oldCrop.bottom) + docOffset.bottom);\n        };\n\n        CanvasViewManager.prototype.checkScrollBars = function (containerSize, scrollBarWidth, modelAbsSize, paddings) {\n          var hasHorizontalScroll = containerSize.width < modelAbsSize.width + paddings.horizontal;\n          var hasVerticalScroll = containerSize.height < modelAbsSize.height + paddings.vertical;\n          if (hasHorizontalScroll && !hasVerticalScroll) hasVerticalScroll = containerSize.height - scrollBarWidth < modelAbsSize.height + paddings.vertical;\n          if (hasVerticalScroll && !hasHorizontalScroll) hasHorizontalScroll = containerSize.width - scrollBarWidth < modelAbsSize.width + paddings.horizontal;\n          return {\n            horizontal: hasHorizontalScroll,\n            vertical: hasVerticalScroll\n          };\n        };\n\n        CanvasViewManager.prototype.setSvgSize = function (width, height) {\n          if (width !== this.lastWidth || height !== this.lastHeight) {\n            this.dom.changeByFunc(this.svgElement, function (e) {\n              return Utils_2.RenderUtils.updateSvgElementSize(e, width, height);\n            });\n            this.lastWidth = width;\n            this.lastHeight = height;\n          }\n        };\n\n        CanvasViewManager.prototype.getVisibileAreaAbsShift = function (excludeScroll) {\n          var scroll = this.scroll;\n          var paddings = this.paddings.clone();\n          var simpleView = this.simpleView;\n          var cropLeft = simpleView && this.crop ? this.crop.left * this.actualZoom : 0;\n          var cropTop = simpleView && this.crop ? this.crop.top * this.actualZoom : 0;\n          return new point_1.Point(paddings.left - cropLeft - (excludeScroll ? 0 : scroll.x), paddings.top - cropTop - (excludeScroll ? 0 : scroll.y));\n        };\n        /* ILayoutPointResolver */\n\n\n        CanvasViewManager.prototype.getModelPoint = function (absolutePoint, checkScrollArea) {\n          var shift = this.getVisibileAreaAbsShift();\n          var modelPoint = absolutePoint.clone().offset(-shift.x, -shift.y).multiply(1 / this.actualZoom, 1 / this.actualZoom);\n\n          if (checkScrollArea) {\n            var scrollSize = this.containerSize;\n            if (absolutePoint.x < 0 || absolutePoint.y < 0 || absolutePoint.x > scrollSize.width || absolutePoint.y > scrollSize.height) return null;\n            if (modelPoint.x < 0 || modelPoint.y < 0) return null;\n            if (modelPoint.x > this.modelSize.width || modelPoint.y > this.modelSize.height) return null;\n          }\n\n          return modelPoint.clone().applyConverter(unit_converter_1.UnitConverter.pixelsToTwips);\n        };\n\n        CanvasViewManager.prototype.getAbsolutePoint = function (modelPoint, excludeScroll, checkScrollArea) {\n          var shift = this.getVisibileAreaAbsShift(excludeScroll);\n          var absPoint = modelPoint.clone().multiply(this.actualZoom, this.actualZoom).clone().applyConverter(unit_converter_1.UnitConverter.twipsToPixelsF).clone().offset(shift.x, shift.y);\n\n          if (checkScrollArea) {\n            if (absPoint.x < 0 || absPoint.y < 0) return null;\n            var scrollSize = this.containerSize;\n            if (absPoint.x > scrollSize.width || absPoint.y > scrollSize.height) return null;\n          }\n\n          return absPoint;\n        };\n\n        return CanvasViewManager;\n      }(CanvasManagerBase_1.CanvasManagerBase);\n\n      exports.CanvasViewManager = CanvasViewManager;\n      /***/\n    },\n    /* 344 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics235 = function extendStatics(d, b) {\n          _extendStatics235 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics235(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics235(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ShadowFilterPrimitive = void 0;\n\n      var FilterPrimitive_1 = __webpack_require__(109);\n\n      var RenderHelper_1 = __webpack_require__(15);\n\n      var ShadowFilterPrimitive =\n      /** @class */\n      function (_super) {\n        __extends(ShadowFilterPrimitive, _super);\n\n        function ShadowFilterPrimitive() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        ShadowFilterPrimitive.prototype.createChildElements = function (parent) {\n          var feGaussianBlur = document.createElementNS(RenderHelper_1.svgNS, \"feGaussianBlur\");\n          feGaussianBlur.setAttribute(\"in\", \"SourceGraphic\");\n          feGaussianBlur.setAttribute(\"stdDeviation\", \"4.6\");\n          parent.appendChild(feGaussianBlur);\n          var feOffset = document.createElementNS(RenderHelper_1.svgNS, \"feOffset\");\n          feOffset.setAttribute(\"dx\", \"0\");\n          feOffset.setAttribute(\"dy\", \"0\");\n          parent.appendChild(feOffset);\n          var feMerge = document.createElementNS(RenderHelper_1.svgNS, \"feMerge\");\n          parent.appendChild(feMerge);\n          var feMergeNode1 = document.createElementNS(RenderHelper_1.svgNS, \"feMergeNode\");\n          feMerge.appendChild(feMergeNode1);\n          var feMergeNode2 = document.createElementNS(RenderHelper_1.svgNS, \"feMergeNode\");\n          feMergeNode2.setAttribute(\"in\", \"SourceGraphic\");\n          feMerge.appendChild(feMergeNode2);\n        };\n\n        return ShadowFilterPrimitive;\n      }(FilterPrimitive_1.FilterPrimitive);\n\n      exports.ShadowFilterPrimitive = ShadowFilterPrimitive;\n      /***/\n    },\n    /* 345 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.AutoScrollController = void 0;\n\n      var evt_1 = __webpack_require__(80);\n\n      var RenderHelper_1 = __webpack_require__(15);\n\n      var dom_1 = __webpack_require__(26);\n\n      var size_1 = __webpack_require__(2);\n\n      var SCROLL_EDGE = 40;\n      var SCROLL_RATIO = 5;\n      var SCROLL_MAXOFFSET = 5;\n      var SCROLL_DELAY = 50;\n\n      var AutoScrollController =\n      /** @class */\n      function () {\n        function AutoScrollController(scroll, svgElement, view, dom) {\n          this.scroll = scroll;\n          this.svgElement = svgElement;\n          this.view = view;\n          this.dom = dom;\n          this.leftButtonPressed = false;\n          this.scrollDragging = false;\n          this.scrollTimer = -1;\n          this.scrollBarWidth = dom_1.DomUtils.getVerticalScrollBarWidth();\n        }\n\n        AutoScrollController.prototype.onMouseMove = function (evt, raiseMouseMoveFunc) {\n          this.clearScrollTimer();\n          if (!evt_1.EvtUtils.isLeftButtonPressed(evt)) this.leftButtonPressed = false;\n          if (this.canAutoScroll()) this.changeScrollPosition(evt, raiseMouseMoveFunc, false);\n        };\n\n        AutoScrollController.prototype.onMouseDown = function (evt) {\n          this.leftButtonPressed = !!evt_1.EvtUtils.isLeftButtonPressed(evt);\n        };\n\n        AutoScrollController.prototype.onMouseUp = function (evt) {\n          this.clearScrollTimer();\n          this.leftButtonPressed = false;\n        };\n\n        AutoScrollController.prototype.onMouseEnter = function (evt) {\n          var _this = this;\n\n          if (evt_1.EvtUtils.isLeftButtonPressed(evt)) setTimeout(function () {\n            _this.leftButtonPressed = true;\n          }, 500);\n        };\n\n        AutoScrollController.prototype.onDragScrollStart = function () {\n          this.scrollDragging = true;\n        };\n\n        AutoScrollController.prototype.onDragScrollEnd = function () {\n          this.scrollDragging = false;\n        };\n\n        AutoScrollController.prototype.canAutoScroll = function () {\n          return this.leftButtonPressed && !this.scrollDragging;\n        };\n\n        AutoScrollController.prototype.changeScrollPosition = function (evt, raiseMouseMoveFunc, raiseMouseMove) {\n          var _this = this;\n\n          var changed = false;\n\n          if (!this.view.isAutoScrollLocked()) {\n            var scrollContainer = this.scroll.getScrollContainer();\n            var x_1 = evt.pageX - dom_1.DomUtils.getAbsolutePositionX(scrollContainer);\n            var y_1 = evt.pageY - dom_1.DomUtils.getAbsolutePositionY(scrollContainer);\n            var size = this.scroll.getSize();\n            var scrollSize = new size_1.Size(parseFloat(this.svgElement.style.width), parseFloat(this.svgElement.style.height));\n            var width_1 = size.width;\n            if (size.width < scrollSize.width) width_1 -= this.scrollBarWidth;\n            var height_1 = size.height;\n            if (size.height < scrollSize.height) height_1 -= this.scrollBarWidth;\n\n            if (x_1 <= SCROLL_EDGE) {\n              this.dom.changeByFunc(null, function () {\n                if (!_this.view.isAutoScrollLocked()) _this.scroll.offsetScroll(-_this.getScrollingOffset(x_1), 0);\n              });\n              changed = true;\n            } else if (width_1 - SCROLL_EDGE <= x_1) {\n              this.dom.changeByFunc(null, function () {\n                if (!_this.view.isAutoScrollLocked()) _this.scroll.offsetScroll(_this.getScrollingOffset(width_1 - x_1), 0);\n              });\n              changed = true;\n            }\n\n            if (y_1 <= SCROLL_EDGE) {\n              this.dom.changeByFunc(null, function () {\n                if (!_this.view.isAutoScrollLocked()) _this.scroll.offsetScroll(0, -_this.getScrollingOffset(y_1));\n              });\n              changed = true;\n            } else if (height_1 - SCROLL_EDGE <= y_1) {\n              this.dom.changeByFunc(null, function () {\n                if (!_this.view.isAutoScrollLocked()) _this.scroll.offsetScroll(0, _this.getScrollingOffset(height_1 - y_1));\n              });\n              changed = true;\n            }\n          }\n\n          if (changed || this.view.isAutoScrollLocked()) this.scrollTimer = window.setTimeout(function () {\n            return _this.changeScrollPosition(evt, raiseMouseMoveFunc, changed);\n          }, SCROLL_DELAY);\n          if (raiseMouseMove) raiseMouseMoveFunc();\n        };\n\n        AutoScrollController.prototype.clearScrollTimer = function () {\n          if (this.scrollTimer > -1) {\n            window.clearTimeout(this.scrollTimer);\n            this.scrollTimer = -1;\n          }\n        };\n\n        AutoScrollController.prototype.getScrollingOffset = function (edgeOffset) {\n          var offset = Math.pow((SCROLL_EDGE - edgeOffset) / SCROLL_RATIO, 2);\n          return Math.round(Math.min(offset, SCROLL_MAXOFFSET));\n        };\n\n        AutoScrollController.createMainElement = function (parent) {\n          var element = document.createElement(\"div\");\n          element.setAttribute(\"class\", \"dxdi-control\");\n          parent.appendChild(element);\n          return element;\n        };\n\n        AutoScrollController.createSvgElement = function (parent, forExport) {\n          if (forExport === void 0) {\n            forExport = false;\n          }\n\n          var svgElement = document.createElementNS(RenderHelper_1.svgNS, \"svg\");\n          svgElement.className.baseVal = \"dxdi-canvas\" + (forExport ? \" export\" : \"\");\n          parent.appendChild(svgElement);\n          return svgElement;\n        };\n\n        return AutoScrollController;\n      }();\n\n      exports.AutoScrollController = AutoScrollController;\n      /***/\n    },\n    /* 346 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics236 = function extendStatics(d, b) {\n          _extendStatics236 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics236(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics236(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.DocumentDataSource = exports.UpdateNodeKeyRelatedObjectsStackAction = exports.UpdateNodeKeyRelatedObjectsStackItem = void 0;\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var Shape_1 = __webpack_require__(14);\n\n      var Connector_1 = __webpack_require__(7);\n\n      var DataSource_1 = __webpack_require__(347);\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var Data_1 = __webpack_require__(43);\n\n      var Utils_1 = __webpack_require__(3);\n\n      var list_1 = __webpack_require__(82);\n\n      var UpdateNodeKeyRelatedObjectsStackItem =\n      /** @class */\n      function () {\n        function UpdateNodeKeyRelatedObjectsStackItem(shape, nodeObj) {\n          this.shape = shape;\n          this.nodeObj = nodeObj;\n        }\n\n        return UpdateNodeKeyRelatedObjectsStackItem;\n      }();\n\n      exports.UpdateNodeKeyRelatedObjectsStackItem = UpdateNodeKeyRelatedObjectsStackItem;\n\n      var UpdateNodeKeyRelatedObjectsStackAction =\n      /** @class */\n      function () {\n        function UpdateNodeKeyRelatedObjectsStackAction(kind, nodeObj) {\n          this.kind = kind;\n          this.nodeObj = nodeObj;\n        }\n\n        return UpdateNodeKeyRelatedObjectsStackAction;\n      }();\n\n      exports.UpdateNodeKeyRelatedObjectsStackAction = UpdateNodeKeyRelatedObjectsStackAction;\n\n      var DocumentDataSource =\n      /** @class */\n      function (_super) {\n        __extends(DocumentDataSource, _super);\n\n        function DocumentDataSource(changesListener, nodeDataSource, edgeDataSource, parameters, nodeDataImporter, edgeDataImporter) {\n          var _this = _super.call(this, \"Document\", nodeDataSource, edgeDataSource, parameters, nodeDataImporter, edgeDataImporter) || this;\n\n          _this.changesListener = changesListener;\n          _this.nodeInsertingLockCount = 0;\n          _this.updateNodeKeyRelatedObjectsCount = 0;\n          _this.updateNodeKeyRelatedObjectsStack = [];\n          _this.updateNodeKeyRelatedObjectsStackActions = [];\n          return _this;\n        }\n\n        DocumentDataSource.prototype.updateItemsByModel = function (model) {\n          var _this = this;\n\n          this.beginChangesNotification();\n          this.deleteNodes(model);\n          this.deleteEdges(model);\n          model.items.forEach(function (item) {\n            if (item instanceof Shape_1.Shape) _this.updateNode(model, item);\n            if (item instanceof Connector_1.Connector) _this.updateEdge(model, item);\n          });\n          this.endChangesNotification(false);\n        };\n\n        DocumentDataSource.prototype.isItemObjectModified = function (item, itemObj, importer) {\n          var modified = importer.setLocked && itemObj.locked !== item.locked || importer.setZIndex && itemObj.zIndex !== item.zIndex || importer.setCustomData && !Utils_1.ObjectUtils.compareObjects(itemObj.customData, item.customData);\n\n          if (!modified && importer.setStyle) {\n            var defaultStyle_1 = item.style.getDefaultInstance();\n            item.style.forEach(function (key) {\n              if (item.style[key] !== defaultStyle_1[key] && item.style[key] !== (itemObj.style && itemObj.style[key])) modified = true;\n            });\n          }\n\n          if (!modified && importer.setStyleText) {\n            var defaultTextStyle_1 = item.styleText.getDefaultInstance();\n            item.styleText.forEach(function (key) {\n              if (item.styleText[key] !== defaultTextStyle_1[key] && item.styleText[key] !== (itemObj.styleText && itemObj.styleText[key])) modified = true;\n            });\n          }\n\n          return modified;\n        };\n\n        DocumentDataSource.prototype.setDataObjectKeyRelatedProperty = function (method, dataObj, key, allowAutoGeneratedProperty) {\n          if (allowAutoGeneratedProperty || this.autoGeneratedDataKeys[key] === undefined) method(dataObj, key);\n        };\n\n        DocumentDataSource.prototype.updateItemObjectProperties = function (itemObj, item, importer) {\n          if (importer.setCustomData) {\n            itemObj.customData = Utils_1.ObjectUtils.cloneObject(item.customData);\n            if (itemObj.dataObj && itemObj.customData !== undefined) importer.setCustomData(itemObj.dataObj, item.customData);\n          }\n\n          if (importer.setLocked) {\n            itemObj.locked = item.locked;\n            if (itemObj.dataObj && itemObj.locked !== undefined) importer.setLocked(itemObj.dataObj, item.locked);\n          }\n\n          if (importer.setStyle) {\n            var styleObj = item.style.toObject();\n            itemObj.style = styleObj;\n            if (itemObj.dataObj && itemObj.style !== undefined) importer.setStyle(itemObj.dataObj, Data_1.Data.objectToCssText(styleObj));\n          }\n\n          if (importer.setStyleText) {\n            var styleTextObj = item.styleText.toObject();\n            itemObj.styleText = styleTextObj;\n            if (itemObj.dataObj && itemObj.styleText !== undefined) importer.setStyleText(itemObj.dataObj, Data_1.Data.objectToCssText(styleTextObj));\n          }\n\n          if (importer.setZIndex) {\n            itemObj.zIndex = item.zIndex;\n            if (itemObj.dataObj && itemObj.zIndex !== undefined) importer.setZIndex(itemObj.dataObj, item.zIndex);\n          }\n        };\n\n        DocumentDataSource.prototype.deleteItems = function (dataSourceItems, findItem, getParentArray, callback) {\n          var items = dataSourceItems.slice();\n          items.forEach(function (item) {\n            if (item.key !== undefined && item.key !== null && !findItem(item.key)) {\n              var parentArray = getParentArray(item);\n              var index = parentArray.indexOf(item.dataObj);\n              parentArray.splice(index, 1);\n              callback(item, index > -1);\n            }\n          });\n        }; // Nodes\n\n\n        DocumentDataSource.prototype.updateNode = function (model, shape) {\n          var _this = this;\n\n          var nodeObj = this.findNode(shape.dataKey);\n\n          if (!nodeObj) {\n            var dataObj = {};\n            nodeObj = this.addNodeInternal(dataObj, shape.description.key, shape.text);\n            this.nodeDataSource.push(nodeObj.dataObj);\n            this.setDataObjectKeyRelatedProperty(this.nodeDataImporter.setKey, dataObj, nodeObj.key, this.addInternalKeyOnInsert);\n            this.updateNodeObjectProperties(shape, nodeObj, model.units);\n            this.updateNodeObjectConnectedProperties(shape, nodeObj);\n            this.updateNodeObjectKey(shape, nodeObj, nodeObj.dataObj);\n            this.beginChangesNotification();\n            this.beginNodeInserting();\n            this.changesListener.notifyNodeInserted.call(this.changesListener, nodeObj.dataObj, function (data) {\n              _this.updateNodeObjectKey(shape, nodeObj, data);\n\n              _this.endNodeInserting();\n\n              _this.endChangesNotification(false);\n            }, function (error) {\n              _this.endNodeInserting();\n\n              _this.endChangesNotification(false);\n            });\n          } else if (this.isNodeObjectModified(shape, nodeObj, model.units)) {\n            this.updateNodeObjectProperties(shape, nodeObj, model.units);\n            this.updateNodeObjectConnectedProperties(shape, nodeObj);\n            this.beginChangesNotification();\n            this.changesListener.notifyNodeUpdated.call(this.changesListener, this.nodeDataImporter.getKey(nodeObj.dataObj || nodeObj.key), nodeObj.dataObj, function (key, data) {\n              _this.endChangesNotification(false);\n            }, function (error) {\n              _this.endChangesNotification(false);\n            });\n          } else this.updateNodeObjectConnectedProperties(shape, nodeObj, this.changesListener);\n        };\n\n        DocumentDataSource.prototype.isNodeObjectModified = function (shape, nodeObj, units) {\n          return this.isItemObjectModified(shape, nodeObj, this.nodeDataImporter) || nodeObj.type !== shape.description.key && !(nodeObj.type === undefined && shape.description.key === ShapeTypes_1.ShapeTypes.Rectangle) || !this.compareStrings(nodeObj.text, shape.text) || this.nodeDataImporter.setImage && nodeObj.image !== shape.image.actualUrl || this.nodeDataImporter.setLeft && nodeObj.left !== ModelUtils_1.ModelUtils.getlUnitValue(units, shape.position.x) || this.nodeDataImporter.setTop && nodeObj.top !== ModelUtils_1.ModelUtils.getlUnitValue(units, shape.position.y) || this.nodeDataImporter.setWidth && nodeObj.width !== ModelUtils_1.ModelUtils.getlUnitValue(units, shape.size.width) || this.nodeDataImporter.setHeight && nodeObj.height !== ModelUtils_1.ModelUtils.getlUnitValue(units, shape.size.height);\n        };\n\n        DocumentDataSource.prototype.updateNodeObjectProperties = function (shape, nodeObj, units) {\n          this.updateItemObjectProperties(nodeObj, shape, this.nodeDataImporter);\n\n          if (this.nodeDataImporter.setType) {\n            nodeObj.type = shape.description.key;\n            this.nodeDataImporter.setType(nodeObj.dataObj, shape.description.key);\n          }\n\n          if (this.nodeDataImporter.setText) {\n            nodeObj.text = shape.text;\n            this.nodeDataImporter.setText(nodeObj.dataObj, shape.text);\n          }\n\n          if (this.nodeDataImporter.setImage) {\n            nodeObj.image = shape.image.actualUrl;\n            this.nodeDataImporter.setImage(nodeObj.dataObj, shape.image.actualUrl);\n          }\n\n          if (this.nodeDataImporter.setLeft) {\n            var left = ModelUtils_1.ModelUtils.getlUnitValue(units, shape.position.x);\n            nodeObj.left = left;\n            this.nodeDataImporter.setLeft(nodeObj.dataObj, left);\n          }\n\n          if (this.nodeDataImporter.setTop) {\n            var top_1 = ModelUtils_1.ModelUtils.getlUnitValue(units, shape.position.y);\n            nodeObj.top = top_1;\n            this.nodeDataImporter.setTop(nodeObj.dataObj, top_1);\n          }\n\n          if (this.nodeDataImporter.setWidth) {\n            var width = ModelUtils_1.ModelUtils.getlUnitValue(units, shape.size.width);\n            nodeObj.width = width;\n            this.nodeDataImporter.setWidth(nodeObj.dataObj, width);\n          }\n\n          if (this.nodeDataImporter.setHeight) {\n            var height = ModelUtils_1.ModelUtils.getlUnitValue(units, shape.size.height);\n            nodeObj.height = height;\n            this.nodeDataImporter.setHeight(nodeObj.dataObj, height);\n          }\n        };\n\n        DocumentDataSource.prototype.updateNodeObjectConnectedProperties = function (shape, nodeObj, changesListener) {\n          if (this.useNodeParentId && this.nodeDataImporter.setParentKey !== undefined) {\n            var parentKey = this.getParentItemKey(shape);\n            var parentItem = this.findNode(parentKey);\n            this.updateNodeObjectParentKey(nodeObj, parentItem, changesListener);\n          }\n\n          if (this.useNodeContainerId && this.nodeDataImporter.setContainerKey !== undefined) {\n            var containerKey = this.getContainerShapeKey(shape);\n            var containerItem = this.findNode(containerKey);\n            this.updateNodeObjectContainerKey(nodeObj, containerItem, changesListener);\n          }\n\n          if (this.useNodeItems && this.nodeDataImporter.setItems !== undefined) {\n            var parentKey = this.getParentItemKey(shape);\n            var parentItem = this.findNode(parentKey);\n            this.updateNodeObjectItems(nodeObj, parentItem, changesListener);\n          }\n\n          if (this.useNodeChildren && this.nodeDataImporter.setChildren !== undefined) {\n            var containerKey = this.getContainerShapeKey(shape);\n            var containerItem = this.findNode(containerKey);\n            this.updateNodeObjectChildren(nodeObj, containerItem, changesListener);\n          }\n        };\n\n        DocumentDataSource.prototype.IsNodeParentIdMode = function () {\n          return this.useNodeParentId && this.nodeDataImporter.setParentKey !== undefined;\n        };\n\n        DocumentDataSource.prototype.IsNodeItemsMode = function () {\n          return this.useNodeItems && this.nodeDataImporter.setItems !== undefined;\n        };\n\n        DocumentDataSource.prototype.updateNodeObjectParentKey = function (nodeObj, parentNodeObj, changesListener) {\n          var parentKey = this.nodeDataImporter.getParentKey(nodeObj.dataObj);\n          var newParentKey = parentNodeObj ? this.nodeDataImporter.getKey(parentNodeObj.dataObj) : undefined;\n\n          if (parentKey !== newParentKey && !(this.isRootParentKey(parentKey) && this.isRootParentKey(newParentKey))) {\n            this.setDataObjectKeyRelatedProperty(this.nodeDataImporter.setParentKey, nodeObj.dataObj, newParentKey, false);\n            if (changesListener) if (this.isInUpdateNodeKeyRelatedObjects()) this.addToUpdateNodeKeyRelatedObjectsStackAction(\"shape\", nodeObj);else this.updateNodeObjectContainerOrParentKeyInternal(nodeObj, changesListener);\n          }\n        };\n\n        DocumentDataSource.prototype.updateNodeObjectParentKeyInternal = function (nodeObj, changesListener) {\n          var _this = this;\n\n          this.beginChangesNotification();\n          changesListener.notifyNodeUpdated.call(changesListener, this.nodeDataImporter.getKey(nodeObj.dataObj) || nodeObj.key, nodeObj.dataObj, function (key, data) {\n            _this.endChangesNotification(false);\n          }, function (error) {\n            _this.endChangesNotification(false);\n          });\n        };\n\n        DocumentDataSource.prototype.updateNodeObjectContainerKey = function (nodeObj, containerNodeObj, changesListener) {\n          var containerKey = this.nodeDataImporter.getContainerKey(nodeObj.dataObj);\n          var newContainerKey = containerNodeObj ? this.nodeDataImporter.getKey(containerNodeObj.dataObj) : undefined;\n\n          if (containerKey !== newContainerKey && !(this.isRootParentKey(containerKey) && this.isRootParentKey(newContainerKey))) {\n            this.setDataObjectKeyRelatedProperty(this.nodeDataImporter.setContainerKey, nodeObj.dataObj, newContainerKey, false);\n            if (changesListener) if (this.isInUpdateNodeKeyRelatedObjects()) this.addToUpdateNodeKeyRelatedObjectsStackAction(\"shape\", nodeObj);else this.updateNodeObjectContainerOrParentKeyInternal(nodeObj, changesListener);\n          }\n        };\n\n        DocumentDataSource.prototype.updateNodeObjectContainerOrParentKeyInternal = function (nodeObj, changesListener) {\n          var _this = this;\n\n          this.beginChangesNotification();\n          changesListener.notifyNodeUpdated.call(changesListener, this.nodeDataImporter.getKey(nodeObj.dataObj) || nodeObj.key, nodeObj.dataObj, function (key, data) {\n            _this.endChangesNotification(false);\n          }, function (error) {\n            _this.endChangesNotification(false);\n          });\n        };\n\n        DocumentDataSource.prototype.isRootParentKey = function (key) {\n          return key === undefined || key === null || !this.findNode(key);\n        };\n\n        DocumentDataSource.prototype.updateNodeObjectItems = function (nodeObj, parentNodeObj, changesListener) {\n          var _this = this;\n\n          if (parentNodeObj && nodeObj.parentDataObj !== parentNodeObj.dataObj || !parentNodeObj && nodeObj.parentDataObj) if (!parentNodeObj || !this.checkNodeCyrcleItems(nodeObj.dataObj, parentNodeObj.dataObj)) {\n            var oldItemsArray = nodeObj.parentDataObj ? this.nodeDataImporter.getItems(nodeObj.parentDataObj) : this.nodeDataSource;\n            var index = oldItemsArray.indexOf(nodeObj.dataObj);\n            oldItemsArray.splice(index, 1);\n            var itemsArray = parentNodeObj ? this.nodeDataImporter.getItems(parentNodeObj.dataObj) : this.nodeDataSource;\n            if (!itemsArray) this.nodeDataImporter.setItems(parentNodeObj.dataObj, [nodeObj.dataObj]);else itemsArray.push(nodeObj.dataObj);\n            nodeObj.parentDataObj = parentNodeObj && parentNodeObj.dataObj;\n\n            if (changesListener) {\n              this.beginChangesNotification();\n              changesListener.notifyNodeUpdated.call(changesListener, this.nodeDataImporter.getKey(nodeObj.dataObj) || nodeObj.key, nodeObj.dataObj, function (key, data) {\n                _this.endChangesNotification(false);\n              }, function (error) {\n                _this.endChangesNotification(false);\n              });\n            }\n          }\n        };\n\n        DocumentDataSource.prototype.updateNodeObjectChildren = function (nodeObj, containerNodeObj, changesListener) {\n          var _this = this;\n\n          if (containerNodeObj && nodeObj.containerDataObj !== containerNodeObj.dataObj || !containerNodeObj && nodeObj.containerDataObj) {\n            var oldChildrenArray = nodeObj.containerDataObj ? this.nodeDataImporter.getChildren(nodeObj.containerDataObj) : this.nodeDataSource;\n            var index = oldChildrenArray.indexOf(nodeObj.dataObj);\n            oldChildrenArray.splice(index, 1);\n            var childrenArray = containerNodeObj ? this.nodeDataImporter.getChildren(containerNodeObj.dataObj) : this.nodeDataSource;\n            if (!childrenArray) this.nodeDataImporter.setChildren(containerNodeObj.dataObj, [nodeObj.dataObj]);else childrenArray.push(nodeObj.dataObj);\n            nodeObj.containerDataObj = containerNodeObj && containerNodeObj.dataObj;\n\n            if (changesListener) {\n              this.beginChangesNotification();\n              changesListener.notifyNodeUpdated.call(changesListener, this.nodeDataImporter.getKey(nodeObj.dataObj) || nodeObj.key, nodeObj.dataObj, function (key, data) {\n                _this.endChangesNotification(false);\n              }, function (error) {\n                _this.endChangesNotification(false);\n              });\n            }\n          }\n        };\n\n        DocumentDataSource.prototype.checkNodeCyrcleItems = function (nodeDataObj, parentDataObjCandidate) {\n          var _this = this;\n\n          var result = false;\n          var items = this.nodeDataImporter.getItems(nodeDataObj);\n          if (items) items.forEach(function (childDataObj) {\n            result = result || childDataObj === parentDataObjCandidate || _this.checkNodeCyrcleItems(childDataObj, parentDataObjCandidate);\n          });\n          return result;\n        };\n\n        DocumentDataSource.prototype.updateNodeObjectKey = function (shape, nodeObj, dataObj) {\n          var key = this.nodeDataImporter.getKey(dataObj);\n          var dataKeyChanged = false;\n\n          if (key !== undefined && key !== null && key !== nodeObj.key) {\n            delete this.autoGeneratedDataKeys[nodeObj.key];\n            nodeObj.key = key;\n            dataKeyChanged = true;\n          }\n\n          shape.dataKey = nodeObj.key;\n\n          if (nodeObj.dataObj !== dataObj) {\n            var parentArray = this.getNodeArray(nodeObj);\n            var index = parentArray.indexOf(nodeObj.dataObj);\n            parentArray.splice(index, 1, dataObj);\n            nodeObj.dataObj = dataObj;\n          }\n\n          if (dataKeyChanged) this.updateNodeKeyRelatedObjects(shape, nodeObj);\n        };\n\n        DocumentDataSource.prototype.updateNodeKeyRelatedObjects = function (shape, nodeObj) {\n          var _this = this;\n\n          if (this.isInNodeInserting()) {\n            this.addToUpdateNodeKeyRelatedObjectsStack(shape, nodeObj);\n            return;\n          }\n\n          if (this.useNodeParentId && this.nodeDataImporter.setParentKey !== undefined) {\n            var childItems = this.getChildItems(shape);\n            childItems.forEach(function (item) {\n              var childNodeObj = _this.findNode(item.dataKey);\n\n              if (childNodeObj) _this.updateNodeObjectParentKey(childNodeObj, nodeObj, _this.changesListener);\n            });\n          }\n\n          if (this.useNodeContainerId && this.nodeDataImporter.setContainerKey !== undefined) shape.children.forEach(function (item) {\n            var childNodeObj = item instanceof Shape_1.Shape ? _this.findNode(item.dataKey) : undefined;\n            if (childNodeObj) _this.updateNodeObjectContainerKey(childNodeObj, nodeObj, _this.changesListener);\n          });\n          if (this.useEdgesArray()) shape.attachedConnectors.forEach(function (connector) {\n            var edgeObj = _this.findEdge(connector.dataKey);\n\n            if (edgeObj) {\n              if (shape === connector.beginItem) _this.updateEdgeObjectFromProperty(nodeObj, edgeObj, _this.changesListener);\n              if (shape === connector.endItem) _this.updateEdgeObjectToProperty(nodeObj, edgeObj, _this.changesListener);\n            }\n          });\n        };\n\n        DocumentDataSource.prototype.deleteNodes = function (model) {\n          var _this = this;\n\n          this.deleteItems(this.nodes, function (key) {\n            return model.findShapeByDataKey(key);\n          }, function (item) {\n            return _this.getNodeArray(item);\n          }, function (item, dataModified) {\n            var key = item.dataObj && _this.nodeDataImporter.getKey(item.dataObj) || item.key;\n\n            var nodeObj = _this.findNode(key);\n\n            if (nodeObj) _this.nodes.splice(_this.nodes.indexOf(nodeObj), 1);\n\n            if (dataModified) {\n              _this.beginChangesNotification();\n\n              _this.changesListener.notifyNodeRemoved.call(_this.changesListener, key, item.dataObj, function (key, data) {\n                _this.endChangesNotification(false);\n              }, function (error) {\n                _this.endChangesNotification(false);\n              });\n            }\n          });\n        };\n\n        DocumentDataSource.prototype.getParentItem = function (shape) {\n          for (var i = 0; i < shape.attachedConnectors.length; i++) {\n            if (shape.attachedConnectors[i].endItem === shape) return shape.attachedConnectors[i].beginItem;\n          }\n        };\n\n        DocumentDataSource.prototype.getParentItemKey = function (shape) {\n          var parent = this.getParentItem(shape);\n          return parent && parent.dataKey;\n        };\n\n        DocumentDataSource.prototype.getNodeArray = function (item) {\n          var items;\n          if (this.useNodeItems && item.parentDataObj) items = this.nodeDataImporter.getItems(item.parentDataObj);else if (item.containerDataObj) items = this.nodeDataImporter.getChildren(item.containerDataObj);\n          return items || this.nodeDataSource;\n        };\n\n        DocumentDataSource.prototype.getContainerShapeKey = function (shape) {\n          return shape.container && shape.container.dataKey;\n        };\n\n        DocumentDataSource.prototype.getChildItems = function (shape) {\n          var items = [];\n\n          for (var i = 0; i < shape.attachedConnectors.length; i++) {\n            if (shape.attachedConnectors[i].beginItem === shape) if (shape.attachedConnectors[i].endItem) items.push(shape.attachedConnectors[i].endItem);\n          }\n\n          return items;\n        }; // Edges\n\n\n        DocumentDataSource.prototype.updateEdge = function (model, connector) {\n          var _this = this;\n\n          var beginDataKey = connector.beginItem ? connector.beginItem.dataKey : undefined;\n          var endDataKey = connector.endItem ? connector.endItem.dataKey : undefined;\n          var edgeObj = this.findEdge(connector.dataKey);\n\n          if (!edgeObj) {\n            var dataObj = this.useEdgesArray() && this.canUpdateEdgeDataSource ? {} : undefined;\n            edgeObj = this.addEdgeInternal(dataObj, beginDataKey, endDataKey);\n\n            if (dataObj) {\n              this.setDataObjectKeyRelatedProperty(this.edgeDataImporter.setKey, dataObj, edgeObj.key, this.addInternalKeyOnInsert);\n              this.edgeDataSource.push(edgeObj.dataObj);\n            }\n\n            this.updateEdgeObjectProperties(connector, edgeObj, model.units);\n            this.updateEdgeObjectKey(connector, edgeObj, edgeObj.dataObj);\n\n            if (dataObj) {\n              this.beginChangesNotification();\n              this.beginNodeInserting();\n              this.changesListener.notifyEdgeInserted.call(this.changesListener, edgeObj.dataObj, function (data) {\n                _this.updateEdgeObjectKey(connector, edgeObj, data);\n\n                _this.endNodeInserting();\n\n                _this.endChangesNotification(false);\n              }, function (error) {\n                _this.endNodeInserting();\n\n                _this.endChangesNotification(false);\n              });\n            }\n          } else if (this.isEdgeObjectModified(connector, edgeObj, model.units)) {\n            this.updateEdgeObjectProperties(connector, edgeObj, model.units);\n\n            if (edgeObj.dataObj) {\n              this.beginChangesNotification();\n              this.changesListener.notifyEdgeUpdated.call(this.changesListener, this.edgeDataImporter.getKey(edgeObj.dataObj) || edgeObj.key, edgeObj.dataObj, function (key, data) {\n                _this.endChangesNotification(false);\n              }, function (error) {\n                _this.endChangesNotification(false);\n              });\n            }\n          }\n        };\n\n        DocumentDataSource.prototype.isEdgeObjectModified = function (connector, edgeObj, units) {\n          return this.isItemObjectModified(connector, edgeObj, this.edgeDataImporter) || (edgeObj.from !== null ? edgeObj.from : undefined) !== (connector.beginItem ? connector.beginItem.dataKey : undefined) || (edgeObj.to === null ? undefined : edgeObj.to) !== (connector.endItem ? connector.endItem.dataKey : undefined) || this.edgeDataImporter.setFromPointIndex && edgeObj.fromPointIndex !== connector.beginConnectionPointIndex || this.edgeDataImporter.setToPointIndex && edgeObj.toPointIndex !== connector.endConnectionPointIndex || this.edgeDataImporter.setPoints && (!edgeObj.points || !list_1.ListUtils.equalsByReference(edgeObj.points.map(function (ptObj) {\n            return ptObj.x;\n          }), connector.points.map(function (pt) {\n            return ModelUtils_1.ModelUtils.getlUnitValue(units, pt.x);\n          })) || !list_1.ListUtils.equalsByReference(edgeObj.points.map(function (ptObj) {\n            return ptObj.y;\n          }), connector.points.map(function (pt) {\n            return ModelUtils_1.ModelUtils.getlUnitValue(units, pt.y);\n          }))) || this.edgeDataImporter.setText && !this.compareTexts(edgeObj, connector) || this.edgeDataImporter.setLineOption && edgeObj.lineOption !== connector.properties.lineOption || this.edgeDataImporter.setStartLineEnding && edgeObj.startLineEnding !== connector.properties.startLineEnding || this.edgeDataImporter.setEndLineEnding && edgeObj.endLineEnding !== connector.properties.endLineEnding;\n        };\n\n        DocumentDataSource.prototype.updateEdgeObjectFromProperty = function (fromObj, edgeObj, changesListener) {\n          edgeObj.from = fromObj && fromObj.key;\n\n          if (edgeObj.dataObj) {\n            var fromKey = fromObj && fromObj.dataObj && this.nodeDataImporter.getKey(fromObj.dataObj);\n            this.setDataObjectKeyRelatedProperty(this.edgeDataImporter.setFrom, edgeObj.dataObj, fromKey, false);\n            if (changesListener) if (this.isInUpdateNodeKeyRelatedObjects()) this.addToUpdateNodeKeyRelatedObjectsStackAction(\"edge\", edgeObj);else this.updateEdgeObjectFromOrToPropertyInternal(edgeObj, changesListener);\n          }\n        };\n\n        DocumentDataSource.prototype.updateEdgeObjectFromOrToPropertyInternal = function (edgeObj, changesListener) {\n          var _this = this;\n\n          this.beginChangesNotification();\n          changesListener.notifyEdgeUpdated.call(changesListener, this.nodeDataImporter.getKey(edgeObj.dataObj) || edgeObj.key, edgeObj.dataObj, function (key, data) {\n            _this.endChangesNotification(false);\n          }, function (error) {\n            _this.endChangesNotification(false);\n          });\n        };\n\n        DocumentDataSource.prototype.updateEdgeObjectToProperty = function (toObj, edgeObj, changesListener) {\n          edgeObj.to = toObj && toObj.key;\n\n          if (edgeObj.dataObj) {\n            var toKey = toObj && toObj.dataObj && this.nodeDataImporter.getKey(toObj.dataObj);\n            this.setDataObjectKeyRelatedProperty(this.edgeDataImporter.setTo, edgeObj.dataObj, toKey, false);\n            if (changesListener) if (this.isInUpdateNodeKeyRelatedObjects()) this.addToUpdateNodeKeyRelatedObjectsStackAction(\"edge\", edgeObj);else this.updateEdgeObjectFromOrToPropertyInternal(edgeObj, changesListener);\n          }\n        };\n\n        DocumentDataSource.prototype.updateEdgeObjectProperties = function (connector, edgeObj, units) {\n          this.updateItemObjectProperties(edgeObj, connector, this.edgeDataImporter);\n\n          if (this.edgeDataImporter.setFrom) {\n            var fromObj = this.findNode(connector.beginItem && connector.beginItem.dataKey);\n            this.updateEdgeObjectFromProperty(fromObj, edgeObj);\n          }\n\n          if (this.edgeDataImporter.setTo) {\n            var toObj = this.findNode(connector.endItem && connector.endItem.dataKey);\n            this.updateEdgeObjectToProperty(toObj, edgeObj);\n          }\n\n          if (this.edgeDataImporter.setFromPointIndex) {\n            edgeObj.fromPointIndex = connector.beginConnectionPointIndex;\n            if (edgeObj.dataObj) this.edgeDataImporter.setFromPointIndex(edgeObj.dataObj, connector.beginConnectionPointIndex);\n          }\n\n          if (this.edgeDataImporter.setToPointIndex) {\n            edgeObj.toPointIndex = connector.endConnectionPointIndex;\n            if (edgeObj.dataObj) this.edgeDataImporter.setToPointIndex(edgeObj.dataObj, connector.endConnectionPointIndex);\n          }\n\n          if (this.edgeDataImporter.setPoints) {\n            var points = connector.points.map(function (pt) {\n              return {\n                x: ModelUtils_1.ModelUtils.getlUnitValue(units, pt.x),\n                y: ModelUtils_1.ModelUtils.getlUnitValue(units, pt.y)\n              };\n            });\n            edgeObj.points = points;\n            if (edgeObj.dataObj) this.edgeDataImporter.setPoints(edgeObj.dataObj, points);\n          }\n\n          if (this.edgeDataImporter.setText) {\n            var text = void 0;\n            if (connector.getTextCount() === 1 && connector.getText()) text = connector.getText();\n            var texts_1 = {};\n            connector.texts.forEach(function (text) {\n              texts_1[text.position] = text.value;\n            });\n            edgeObj.texts = texts_1;\n\n            if (edgeObj.dataObj) {\n              var textVal = \"\";\n              if (text) textVal = text;else if (texts_1 && Object.keys(texts_1).length) textVal = texts_1;\n              this.edgeDataImporter.setText(edgeObj.dataObj, textVal);\n            }\n          }\n\n          if (this.edgeDataImporter.setLineOption) {\n            edgeObj.lineOption = connector.properties.lineOption;\n            if (edgeObj.dataObj) this.edgeDataImporter.setLineOption(edgeObj.dataObj, connector.properties.lineOption);\n          }\n\n          if (this.edgeDataImporter.setStartLineEnding) {\n            edgeObj.startLineEnding = connector.properties.startLineEnding;\n            if (edgeObj.dataObj) this.edgeDataImporter.setStartLineEnding(edgeObj.dataObj, connector.properties.startLineEnding);\n          }\n\n          if (this.edgeDataImporter.setEndLineEnding) {\n            edgeObj.endLineEnding = connector.properties.endLineEnding;\n            if (edgeObj.dataObj) this.edgeDataImporter.setEndLineEnding(edgeObj.dataObj, connector.properties.endLineEnding);\n          }\n        };\n\n        DocumentDataSource.prototype.updateEdgeObjectKey = function (connector, edgeObj, dataObj) {\n          var key = dataObj && this.edgeDataImporter.getKey(dataObj);\n\n          if (key !== undefined && key !== null && key !== edgeObj.key) {\n            delete this.autoGeneratedDataKeys[edgeObj.key];\n            edgeObj.key = key;\n          }\n\n          connector.dataKey = edgeObj.key;\n\n          if (edgeObj.dataObj !== dataObj) {\n            var parentArray = this.edgeDataSource;\n            var index = parentArray.indexOf(edgeObj.dataObj);\n            parentArray.splice(index, 1, dataObj);\n            edgeObj.dataObj = dataObj;\n          }\n        };\n\n        DocumentDataSource.prototype.deleteEdges = function (model) {\n          var _this = this;\n\n          this.deleteItems(this.edges, function (key) {\n            return model.findConnectorByDataKey(key);\n          }, function (item) {\n            return _this.edgeDataSource;\n          }, function (item, dataModified) {\n            var key = item.dataObj && _this.edgeDataImporter.getKey(item.dataObj) || item.key;\n\n            var edgeObj = _this.findEdge(key);\n\n            if (edgeObj) _this.edges.splice(_this.edges.indexOf(edgeObj), 1);\n\n            if (dataModified) {\n              _this.beginChangesNotification();\n\n              _this.changesListener.notifyEdgeRemoved.call(_this.changesListener, key, item.dataObj, function (key, data) {\n                _this.endChangesNotification(false);\n              }, function (error) {\n                _this.endChangesNotification(false);\n              });\n            }\n          });\n        };\n\n        DocumentDataSource.prototype.beginNodeInserting = function () {\n          this.nodeInsertingLockCount++;\n        };\n\n        DocumentDataSource.prototype.endNodeInserting = function () {\n          this.nodeInsertingLockCount--;\n          if (this.nodeInsertingLockCount === 0) this.raiseNodeInsertingStack();\n        };\n\n        DocumentDataSource.prototype.isInNodeInserting = function () {\n          return this.nodeInsertingLockCount > 0;\n        };\n\n        DocumentDataSource.prototype.addToUpdateNodeKeyRelatedObjectsStack = function (shape, nodeObj) {\n          var item = new UpdateNodeKeyRelatedObjectsStackItem(shape, nodeObj);\n          this.updateNodeKeyRelatedObjectsStack.push(item);\n        };\n\n        DocumentDataSource.prototype.raiseNodeInsertingStack = function () {\n          this.beginUpdateNodeKeyRelatedObjects();\n\n          while (this.updateNodeKeyRelatedObjectsStack.length > 0) {\n            var item = this.updateNodeKeyRelatedObjectsStack[0];\n            this.updateNodeKeyRelatedObjects(item.shape, item.nodeObj);\n            this.updateNodeKeyRelatedObjectsStack.splice(0, 1);\n          }\n\n          this.endUpdateNodeKeyRelatedObjects();\n        };\n\n        DocumentDataSource.prototype.beginUpdateNodeKeyRelatedObjects = function () {\n          this.updateNodeKeyRelatedObjectsCount++;\n        };\n\n        DocumentDataSource.prototype.endUpdateNodeKeyRelatedObjects = function () {\n          this.updateNodeKeyRelatedObjectsCount--;\n          if (this.updateNodeKeyRelatedObjectsCount === 0) this.raiseUpdateNodeKeyRelatedObjectsStack();\n        };\n\n        DocumentDataSource.prototype.isInUpdateNodeKeyRelatedObjects = function () {\n          return this.updateNodeKeyRelatedObjectsCount > 0;\n        };\n\n        DocumentDataSource.prototype.addToUpdateNodeKeyRelatedObjectsStackAction = function (kind, nodeObj) {\n          var item = new UpdateNodeKeyRelatedObjectsStackAction(kind, nodeObj);\n\n          for (var i = 0; i < this.updateNodeKeyRelatedObjectsStackActions.length; i++) {\n            if (this.updateNodeKeyRelatedObjectsStackActions[i].kind === kind && this.updateNodeKeyRelatedObjectsStackActions[i].nodeObj === nodeObj) return;\n          }\n\n          this.updateNodeKeyRelatedObjectsStackActions.push(item);\n        };\n\n        DocumentDataSource.prototype.raiseUpdateNodeKeyRelatedObjectsStack = function () {\n          while (this.updateNodeKeyRelatedObjectsStackActions.length > 0) {\n            var item = this.updateNodeKeyRelatedObjectsStackActions[0];\n\n            switch (item.kind) {\n              case \"shape\":\n                this.updateNodeObjectContainerOrParentKeyInternal(item.nodeObj, this.changesListener);\n                break;\n\n              case \"edge\":\n                this.updateEdgeObjectFromOrToPropertyInternal(item.nodeObj, this.changesListener);\n                break;\n            }\n\n            this.updateNodeKeyRelatedObjectsStackActions.splice(0, 1);\n          }\n        };\n\n        DocumentDataSource.prototype.beginChangesNotification = function () {\n          this.changesListener.beginChangesNotification();\n        };\n\n        DocumentDataSource.prototype.endChangesNotification = function (preventNotifyChanges) {\n          this.changesListener.endChangesNotification(preventNotifyChanges);\n        };\n\n        return DocumentDataSource;\n      }(DataSource_1.DataSource);\n\n      exports.DocumentDataSource = DocumentDataSource;\n      /***/\n    },\n    /* 347 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.DataSource = void 0;\n\n      var unit_converter_1 = __webpack_require__(12);\n\n      var point_1 = __webpack_require__(1);\n\n      var size_1 = __webpack_require__(2);\n\n      var AddConnectionHistoryItem_1 = __webpack_require__(47);\n\n      var AddConnectorHistoryItem_1 = __webpack_require__(63);\n\n      var AddShapeHistoryItem_1 = __webpack_require__(51);\n\n      var DeleteConnectionHistoryItem_1 = __webpack_require__(64);\n\n      var ResizeShapeHistoryItem_1 = __webpack_require__(117);\n\n      var ChangeConnectorPropertyHistoryItem_1 = __webpack_require__(88);\n\n      var ChangeConnectorTextHistoryItem_1 = __webpack_require__(66);\n\n      var ChangeCustomDataHistoryItem_1 = __webpack_require__(348);\n\n      var ChangeLockedHistoryItem_1 = __webpack_require__(118);\n\n      var ChangeShapeImageHistoryItem_1 = __webpack_require__(147);\n\n      var ChangeShapeTextHistoryItem_1 = __webpack_require__(155);\n\n      var ChangeZindexHistoryItem_1 = __webpack_require__(102);\n\n      var ChangeStyleHistoryItem_1 = __webpack_require__(89);\n\n      var ChangeStyleTextHistoryItem_1 = __webpack_require__(67);\n\n      var Connector_1 = __webpack_require__(7);\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var ShapeTypes_1 = __webpack_require__(0);\n\n      var ITextMeasurer_1 = __webpack_require__(42);\n\n      var Utils_1 = __webpack_require__(3);\n\n      var color_1 = __webpack_require__(22);\n\n      var Data_1 = __webpack_require__(43);\n\n      var Svg_1 = __webpack_require__(111);\n\n      var TextUtils_1 = __webpack_require__(61);\n\n      var DataImporter_1 = __webpack_require__(349);\n\n      var DataSourceItems_1 = __webpack_require__(350);\n\n      var ChangeConnectorPointsHistoryItem_1 = __webpack_require__(153);\n\n      var DataSource =\n      /** @class */\n      function () {\n        function DataSource(key, nodeDataSource, edgeDataSource, parameters, nodeDataImporter, edgeDataImporter) {\n          this.key = key;\n          this.nodes = [];\n          this.edges = [];\n          this.autoGeneratedDataKeys = {};\n          this.addInternalKeyOnInsert = false;\n          this.useNodeParentId = false;\n          this.useNodeContainerId = false;\n          this.useNodeChildren = false;\n          this.useNodeItems = false;\n          this.canUseAutoSize = false;\n          this.canUpdateEdgeDataSource = false;\n          this.containers = null;\n          if (key === undefined || key === null) throw new Error(\"DataSource key must be specified\");\n          this.key = key.toString();\n          this.loadParameters(parameters || {});\n          this.nodeDataImporter = this.createNodeDataImporter(nodeDataImporter);\n          this.edgeDataImporter = this.createEdgeDataImporter(edgeDataImporter);\n          this.nodeDataSource = nodeDataSource || [];\n          this.edgeDataSource = edgeDataSource || [];\n          this.canUpdateEdgeDataSource = !!edgeDataSource;\n          this.fetchData();\n        }\n\n        DataSource.prototype.loadParameters = function (parameters) {\n          this.addInternalKeyOnInsert = !!parameters.addInternalKeyOnInsert;\n        };\n\n        DataSource.prototype.isAutoGeneratedKey = function (dataKey) {\n          return dataKey && !!this.autoGeneratedDataKeys[dataKey];\n        };\n\n        DataSource.prototype.createNodeDataImporter = function (source) {\n          var result = new DataImporter_1.DataSourceNodeDataImporter();\n          if (source) this.assignNodeDataImporterProperties(source, result);\n          return result;\n        };\n\n        DataSource.prototype.createEdgeDataImporter = function (source) {\n          var result = new DataImporter_1.DataSourceEdgeDataImporter();\n          if (source) this.assignEdgeDataImporterProperties(source, result);\n          return result;\n        };\n\n        DataSource.prototype.assignItemDataImporterProperties = function (source, importer) {\n          if (source.getKey) importer.getKey = source.getKey;\n          if (source.setKey) importer.setKey = source.setKey;\n          if (source.getCustomData) importer.getCustomData = source.getCustomData;\n          if (source.setCustomData) importer.setCustomData = source.setCustomData;\n          if (source.getLocked) importer.getLocked = source.getLocked;\n          if (source.setLocked) importer.setLocked = source.setLocked;\n          if (source.getStyle) importer.getStyle = source.getStyle;\n          if (source.setStyle) importer.setStyle = source.setStyle;\n          if (source.getStyleText) importer.getStyleText = source.getStyleText;\n          if (source.setStyleText) importer.setStyleText = source.setStyleText;\n          if (source.getZIndex) importer.getZIndex = source.getZIndex;\n          if (source.setZIndex) importer.setZIndex = source.setZIndex;\n        };\n\n        DataSource.prototype.assignNodeDataImporterProperties = function (source, importer) {\n          this.assignItemDataImporterProperties(source, importer);\n          if (source.getType) importer.getType = source.getType;\n          if (source.setType) importer.setType = source.setType;\n          if (source.getImage) importer.getImage = source.getImage;\n          if (source.setImage) importer.setImage = source.setImage;\n          if (source.getText) importer.getText = source.getText;\n          if (source.setText) importer.setText = source.setText;\n          if (source.getLeft) importer.getLeft = source.getLeft;\n          if (source.setLeft) importer.setLeft = source.setLeft;\n          if (source.getTop) importer.getTop = source.getTop;\n          if (source.setTop) importer.setTop = source.setTop;\n          if (source.getWidth) importer.getWidth = source.getWidth;\n          if (source.setWidth) importer.setWidth = source.setWidth;\n          if (source.getHeight) importer.getHeight = source.getHeight;\n          if (source.setHeight) importer.setHeight = source.setHeight;\n          if (source.getChildren) importer.getChildren = source.getChildren;\n          if (source.setChildren) importer.setChildren = source.setChildren;\n          if (source.getParentKey) importer.getParentKey = source.getParentKey;\n          if (source.setParentKey) importer.setParentKey = source.setParentKey;\n          if (source.getItems) importer.getItems = source.getItems;\n          if (source.setItems) importer.setItems = source.setItems;\n          if (source.getContainerKey) importer.getContainerKey = source.getContainerKey;\n          if (source.setContainerKey) importer.setContainerKey = source.setContainerKey;\n        };\n\n        DataSource.prototype.assignEdgeDataImporterProperties = function (source, importer) {\n          this.assignItemDataImporterProperties(source, importer);\n          if (source.getFrom) importer.getFrom = source.getFrom;\n          if (source.setFrom) importer.setFrom = source.setFrom;\n          if (source.getFromPointIndex) importer.getFromPointIndex = source.getFromPointIndex;\n          if (source.setFromPointIndex) importer.setFromPointIndex = source.setFromPointIndex;\n          if (source.getTo) importer.getTo = source.getTo;\n          if (source.setTo) importer.setTo = source.setTo;\n          if (source.getToPointIndex) importer.getToPointIndex = source.getToPointIndex;\n          if (source.setToPointIndex) importer.setToPointIndex = source.setToPointIndex;\n          if (source.getPoints) importer.getPoints = source.getPoints;\n          if (source.setPoints) importer.setPoints = source.setPoints;\n          if (source.getText) importer.getText = source.getText;\n          if (source.setText) importer.setText = source.setText;\n          if (source.getLineOption) importer.getLineOption = source.getLineOption;\n          if (source.setLineOption) importer.setLineOption = source.setLineOption;\n          if (source.getStartLineEnding) importer.getStartLineEnding = source.getStartLineEnding;\n          if (source.setStartLineEnding) importer.setStartLineEnding = source.setStartLineEnding;\n          if (source.getEndLineEnding) importer.getEndLineEnding = source.getEndLineEnding;\n          if (source.setEndLineEnding) importer.setEndLineEnding = source.setEndLineEnding;\n        };\n\n        DataSource.prototype.fetchData = function () {\n          var _this = this;\n\n          this.nodes = [];\n          this.edges = [];\n          this.autoGeneratedDataKeys = {};\n          this.useNodeParentId = this.nodeDataImporter.getParentKey !== undefined;\n          this.useNodeContainerId = this.nodeDataImporter.getContainerKey !== undefined;\n          this.useNodeItems = this.nodeDataImporter.getItems !== undefined;\n          this.useNodeChildren = this.nodeDataImporter.getChildren !== undefined;\n          this.canUseAutoSize = this.nodeDataImporter.getWidth === undefined && this.nodeDataImporter.getText !== undefined;\n          if (this.useEdgesArray() && this.useNodeParentId) throw new Error(\"You cannot use edges array and parentKey simultaneously.\");\n          if (this.useEdgesArray() && this.useNodeItems) throw new Error(\"You cannot use edges array and items array simultaneously.\");\n          if (this.useNodeParentId && this.useNodeItems) throw new Error(\"You cannot use parentKey and items array simultaneously.\");\n          if (this.useNodeContainerId && this.useNodeChildren) throw new Error(\"You cannot use containerKey and children array simultaneously.\");\n          this.nodeDataSource.forEach(function (nodeDataObj) {\n            _this.addNode(nodeDataObj);\n          });\n          if (this.useEdgesArray()) this.edgeDataSource.forEach(function (edgeDataObj) {\n            _this.addEdge(edgeDataObj);\n          });else this.nodes.forEach(function (node) {\n            _this.addNodeEdgesByParentId(node);\n          });\n        };\n\n        DataSource.prototype.isContainer = function (itemKey) {\n          var _this = this;\n\n          if (!this.containers && this.useNodeContainerId) this.containers = this.nodeDataSource.map(function (i) {\n            return _this.nodeDataImporter.getContainerKey(i);\n          }).filter(function (i) {\n            return i !== undefined && i !== null;\n          }).reduce(function (map, i) {\n            map[i] = true;\n            return map;\n          }, {});\n          return this.containers && this.containers[itemKey];\n        };\n\n        DataSource.prototype.refetchData = function (nodeDataSource, edgeDataSource) {\n          var _this = this;\n\n          this.nodeDataSource = nodeDataSource || this.nodeDataSource;\n          this.edgeDataSource = edgeDataSource || this.edgeDataSource;\n          var oldNodes = this.nodes.slice();\n          var oldEdges = this.edges.slice();\n          this.fetchData();\n          var changedNodes = this.getItemChanges(oldNodes, this.nodes, function (item1, item2) {\n            return item1.key === item2.key || item1.dataObj === item2.dataObj;\n          });\n          var changedEdges = this.getItemChanges(oldEdges, this.edges, function (item1, item2) {\n            if (_this.useNodeParentId || _this.useNodeItems) return item1.key === item2.key || item1.from === item2.from && item1.to === item2.to;\n            return item1.key === item2.key || item1.dataObj === item2.dataObj;\n          });\n          return {\n            nodes: changedNodes,\n            edges: changedEdges\n          };\n        };\n\n        DataSource.prototype.getItemChanges = function (oldItems, newItems, areEqual) {\n          var _this = this;\n\n          var remainedItems = oldItems.filter(function (item) {\n            return _this.containsItem(newItems, item, areEqual);\n          });\n          var remainedNewItems = newItems.filter(function (item) {\n            return _this.containsItem(oldItems, item, areEqual);\n          });\n          var removedItems = oldItems.filter(function (item) {\n            return !_this.containsItem(newItems, item, areEqual);\n          });\n          var addedItems = newItems.filter(function (item) {\n            return !_this.containsItem(oldItems, item, areEqual);\n          });\n          return {\n            remained: remainedItems.map(function (item) {\n              return item.key;\n            }),\n            remainedNew: remainedNewItems.map(function (item) {\n              return item.key;\n            }),\n            removed: removedItems.map(function (item) {\n              return item.key;\n            }),\n            added: addedItems.map(function (item) {\n              return item.key;\n            })\n          };\n        };\n\n        DataSource.prototype.containsItem = function (items, item, areEqual) {\n          var result = false;\n          items.forEach(function (i) {\n            if (!result && areEqual(i, item)) result = true;\n          });\n          return result;\n        };\n\n        DataSource.prototype.useEdgesArray = function () {\n          return Array.isArray(this.edgeDataSource) && (this.edgeDataSource.length || !(this.useNodeParentId || this.useNodeItems));\n        };\n\n        DataSource.prototype.addNode = function (nodeDataObj, parentNodeDataObj, containerKey, containerNodeDataObj) {\n          var _this = this;\n\n          var childNodeDataObjs = this.nodeDataImporter.getChildren && this.nodeDataImporter.getChildren(nodeDataObj);\n          var hasChildren = childNodeDataObjs && Array.isArray(childNodeDataObjs) && childNodeDataObjs.length;\n          var isContainer = hasChildren || this.isContainer(this.nodeDataImporter.getKey(nodeDataObj));\n          var type = this.nodeDataImporter.getType && this.nodeDataImporter.getType(nodeDataObj) || isContainer && ShapeTypes_1.ShapeTypes.VerticalContainer || ShapeTypes_1.ShapeTypes.Rectangle;\n          var text = this.nodeDataImporter.getText && (this.nodeDataImporter.getText(nodeDataObj) || \"\");\n          var node = this.addNodeInternal(nodeDataObj, type, text, parentNodeDataObj, containerKey, containerNodeDataObj);\n          this.assignNodeProperties(node, nodeDataObj);\n          if (hasChildren) childNodeDataObjs.forEach(function (childNodeDataObj) {\n            _this.addNode(childNodeDataObj, undefined, node.key, nodeDataObj);\n          });\n\n          if (this.useNodeItems) {\n            var itemDataObjs = this.nodeDataImporter.getItems(nodeDataObj);\n            if (Array.isArray(itemDataObjs) && itemDataObjs.length) itemDataObjs.forEach(function (itemDataObj) {\n              var itemNode = _this.addNode(itemDataObj, nodeDataObj, containerKey, containerNodeDataObj);\n\n              _this.addEdgeInternal(undefined, node.key, itemNode.key);\n            });\n          }\n\n          return node;\n        };\n\n        DataSource.prototype.addNodeEdgesByParentId = function (node) {\n          if (this.useNodeParentId) {\n            var parentKey = this.nodeDataImporter.getParentKey(node.dataObj);\n\n            if (parentKey !== undefined && parentKey !== null) {\n              var parentNode = this.findNode(parentKey);\n              if (parentNode) this.addEdgeInternal(undefined, this.getNodeKey(node.dataObj, this.nodeDataImporter.getParentKey), this.getNodeKey(node.dataObj, this.nodeDataImporter.getKey));\n            }\n          }\n        };\n\n        DataSource.prototype.addNodeInternal = function (nodeDataObj, type, text, parentNodeDataObj, containerKey, containerNodeDataObj) {\n          var externalKey = this.nodeDataImporter.getKey(nodeDataObj);\n          var key = externalKey !== undefined && externalKey !== null ? externalKey : ModelUtils_1.ModelUtils.getGuidItemKey();\n          var node = new DataSourceItems_1.DataSourceNodeItem(this.key, key, nodeDataObj, type, text, parentNodeDataObj, containerKey, containerNodeDataObj);\n          this.nodes.push(node);\n\n          if (externalKey === undefined || externalKey === null) {\n            externalKey = key;\n            this.autoGeneratedDataKeys[key] = true;\n          }\n\n          return node;\n        };\n\n        DataSource.prototype.addEdge = function (edgeDataObj) {\n          var edge = this.addEdgeInternal(edgeDataObj, this.getNodeKey(edgeDataObj, this.edgeDataImporter.getFrom), this.getNodeKey(edgeDataObj, this.edgeDataImporter.getTo));\n          this.assignEdgeProperties(edge, edgeDataObj);\n          return edge;\n        };\n\n        DataSource.prototype.addEdgeInternal = function (edgeDataObj, from, to) {\n          var externalKey = edgeDataObj && this.edgeDataImporter.getKey(edgeDataObj);\n          var key = externalKey !== undefined && externalKey !== null ? externalKey : ModelUtils_1.ModelUtils.getGuidItemKey();\n          var edge = new DataSourceItems_1.DataSourceEdgeItem(this.key, key, edgeDataObj, from, to);\n          this.edges.push(edge);\n\n          if (externalKey === undefined || externalKey === null) {\n            externalKey = key;\n            this.autoGeneratedDataKeys[key] = true;\n          }\n\n          return edge;\n        };\n\n        DataSource.prototype.assignItemProperties = function (item, dataObj, importer) {\n          if (importer.getCustomData) item.customData = Utils_1.ObjectUtils.cloneObject(importer.getCustomData(dataObj));\n          if (importer.getLocked) item.locked = importer.getLocked(dataObj);\n\n          if (importer.getStyle) {\n            var style = importer.getStyle(dataObj);\n            item.style = typeof style === \"string\" ? Data_1.Data.cssTextToObject(style) : style;\n          }\n\n          if (importer.getStyleText) {\n            var style = importer.getStyleText(dataObj);\n            item.styleText = typeof style === \"string\" ? Data_1.Data.cssTextToObject(style) : style;\n          }\n\n          if (importer.getZIndex) item.zIndex = importer.getZIndex(dataObj);\n        };\n\n        DataSource.prototype.assignNodeProperties = function (item, dataObj) {\n          this.assignItemProperties(item, dataObj, this.nodeDataImporter);\n          if (this.nodeDataImporter.getImage) item.image = this.nodeDataImporter.getImage(dataObj);\n          if (this.nodeDataImporter.getLeft) item.left = this.nodeDataImporter.getLeft(dataObj);\n          if (this.nodeDataImporter.getTop) item.top = this.nodeDataImporter.getTop(dataObj);\n          if (this.nodeDataImporter.getWidth) item.width = this.nodeDataImporter.getWidth(dataObj);\n          if (this.nodeDataImporter.getHeight) item.height = this.nodeDataImporter.getHeight(dataObj);\n          if (this.nodeDataImporter.getContainerKey) item.containerKey = this.nodeDataImporter.getContainerKey(dataObj);\n        };\n\n        DataSource.prototype.assignEdgeProperties = function (item, dataObj) {\n          this.assignItemProperties(item, dataObj, this.edgeDataImporter);\n          if (this.edgeDataImporter.getFromPointIndex) item.fromPointIndex = this.edgeDataImporter.getFromPointIndex(dataObj);\n          if (this.edgeDataImporter.getToPointIndex) item.toPointIndex = this.edgeDataImporter.getToPointIndex(dataObj);\n          if (this.edgeDataImporter.getPoints) item.points = this.edgeDataImporter.getPoints(dataObj);\n\n          if (this.edgeDataImporter.getText) {\n            var texts = this.edgeDataImporter.getText(dataObj);\n            item.texts = {};\n            if (typeof texts === \"object\") for (var key in texts) {\n              if (!Object.prototype.hasOwnProperty.call(texts, key)) continue;\n              var position = parseFloat(key);\n              var text = texts[key];\n\n              if (!isNaN(position) && typeof text === \"string\" && text !== \"\") {\n                position = Math.min(1, Math.max(0, position));\n                item.texts[position] = text;\n              }\n            } else if (typeof texts === \"string\" && texts !== \"\") item.texts[Connector_1.CONNECTOR_DEFAULT_TEXT_POSITION] = texts;\n          }\n\n          if (this.edgeDataImporter.getLineOption) item.lineOption = this.edgeDataImporter.getLineOption(dataObj);\n          if (this.edgeDataImporter.getStartLineEnding) item.startLineEnding = this.edgeDataImporter.getStartLineEnding(dataObj);\n          if (this.edgeDataImporter.getEndLineEnding) item.endLineEnding = this.edgeDataImporter.getEndLineEnding(dataObj);\n        };\n\n        DataSource.prototype.findNode = function (key) {\n          return this.nodes.filter(function (i) {\n            return key !== undefined && i.key === key;\n          })[0];\n        };\n\n        DataSource.prototype.findEdge = function (key) {\n          return this.edges.filter(function (i) {\n            return key !== undefined && i.key === key;\n          })[0];\n        };\n\n        DataSource.prototype.getNodeKey = function (nodeDataObj, getKey) {\n          return getKey(nodeDataObj);\n        };\n\n        DataSource.prototype.createModelItems = function (history, model, shapeDescriptionManager, selection, layoutParameters, snapToGrid, gridSize, measurer) {\n          var _this = this;\n\n          this.beginChangesNotification();\n          history.clear();\n          history.beginTransaction();\n          ModelUtils_1.ModelUtils.deleteAllItems(history, model, selection);\n          model.initializeKeyCounter();\n          var DEFAULT_STEP = 2000;\n          var rowIndex = 0;\n          var colIndex = 0;\n          var externalToInnerMap = {};\n          var shapes = [];\n          var connectors = [];\n          this.nodes.forEach(function (node) {\n            var point = new point_1.Point(colIndex++ * DEFAULT_STEP, rowIndex * DEFAULT_STEP);\n\n            var shape = _this.createShapeByNode(history, model, selection, shapeDescriptionManager, node, point, layoutParameters, snapToGrid, gridSize, measurer);\n\n            if (node.key !== undefined) externalToInnerMap[node.key] = shape.key;\n\n            if (colIndex > 4) {\n              colIndex = 0;\n              rowIndex++;\n            }\n\n            shapes.push(shape);\n          });\n          this.nodes.forEach(function (node) {\n            if (node.containerKey !== undefined && node.containerKey !== null) {\n              var shapeKey = externalToInnerMap[node.key];\n              var shape = model.findShape(shapeKey);\n              var containerShapeKey = externalToInnerMap[node.containerKey];\n              var containerShape = model.findShape(containerShapeKey);\n              if (containerShape) ModelUtils_1.ModelUtils.insertToContainer(history, model, shape, containerShape);\n            }\n          });\n          this.edges.forEach(function (edge) {\n            var toShape = model.findShape(externalToInnerMap[edge.to]);\n            var fromShape = model.findShape(externalToInnerMap[edge.from]);\n\n            var connector = _this.createConnectorByEdge(history, model, selection, edge, fromShape, toShape);\n\n            if (connector) {\n              connectors.push(connector);\n              ModelUtils_1.ModelUtils.updateConnectorContainer(history, model, connector);\n            }\n          });\n          if (layoutParameters.needAutoLayout) this.applyLayout(history, model, shapes, connectors, layoutParameters, snapToGrid, gridSize);\n          ModelUtils_1.ModelUtils.tryUpdateModelRectangle(history);\n          history.endTransaction(true);\n          this.endChangesNotification(true);\n        };\n\n        DataSource.prototype.updateModelItems = function (history, model, shapeDescriptionManager, selection, layoutParameters, addNewHistoryItem, updateDataKeys, updateTemplateItem, changes, snapToGrid, gridSize, measurer) {\n          var _this = this;\n\n          this.beginChangesNotification();\n          history.beginTransaction();\n          var itemsToUpdate = [];\n          var layoutShapes = [];\n          var layoutConnectors = [];\n          var shapesToRemove = changes.nodes.removed.map(function (key) {\n            return model.findShapeByDataKey(key);\n          }).filter(function (item) {\n            return item;\n          });\n          shapesToRemove.forEach(function (shape) {\n            shape.attachedConnectors.forEach(function (connector) {\n              if (connector.beginItem && connector.beginItem !== shape) layoutShapes.push(connector.beginItem);\n              if (connector.endItem && connector.endItem !== shape) layoutShapes.push(connector.endItem);\n            });\n          });\n          ModelUtils_1.ModelUtils.deleteItems(history, model, selection, shapesToRemove, true);\n          var connectorsToRemove = changes.edges.removed.map(function (key) {\n            return model.findConnectorByDataKey(key);\n          }).filter(function (item) {\n            return item;\n          });\n          connectorsToRemove.forEach(function (connector) {\n            if (connector.beginItem) layoutShapes.push(connector.beginItem);\n            if (connector.endItem) layoutShapes.push(connector.endItem);\n          });\n          ModelUtils_1.ModelUtils.deleteItems(history, model, selection, connectorsToRemove, true);\n          var nodeKeysToUpdate = updateDataKeys || [];\n          nodeKeysToUpdate.forEach(function (dataKey) {\n            if (changes.nodes.remained.indexOf(dataKey) === -1) return;\n\n            var node = _this.findNode(dataKey);\n\n            if (node) {\n              var shape = model.findShapeByDataKey(dataKey);\n\n              if (shape) {\n                var position = shape.position.clone();\n\n                _this.changeShapeByDataItem(history, model, shape, node, position);\n\n                _this.changeItemByDataItem(history, shape, node);\n              } else shape = _this.createShapeByNode(history, model, selection, shapeDescriptionManager, node, new point_1.Point(0, 0), layoutParameters, snapToGrid, gridSize, measurer);\n\n              _this.updateShapeContainer(history, model, shape, node);\n\n              layoutShapes.push(shape);\n              itemsToUpdate.push(shape);\n            }\n          });\n          changes.nodes.remained.forEach(function (dataKey, index) {\n            var shape = model.findShapeByDataKey(dataKey);\n            if (shape) shape.dataKey = changes.nodes.remainedNew[index];\n          });\n          changes.nodes.added.forEach(function (dataKey) {\n            var node = _this.findNode(dataKey);\n\n            var shape = _this.createShapeByNode(history, model, selection, shapeDescriptionManager, node, new point_1.Point(0, 0), layoutParameters, snapToGrid, gridSize, measurer);\n\n            _this.updateShapeContainer(history, model, shape, node);\n\n            layoutShapes.push(shape);\n          });\n          changes.edges.added.forEach(function (dataKey) {\n            var edge = _this.findEdge(dataKey);\n\n            var fromShape = model.findShapeByDataKey(edge.from);\n            var toShape = model.findShapeByDataKey(edge.to);\n\n            var connector = _this.createConnectorByEdge(history, model, selection, edge, fromShape, toShape);\n\n            if (connector) {\n              ModelUtils_1.ModelUtils.updateConnectorContainer(history, model, connector);\n              layoutConnectors.push(connector);\n            }\n          });\n          var edgeKeysToUpdate = updateDataKeys || [];\n          changes.edges.remained.forEach(function (dataKey) {\n            var edge = _this.findEdge(dataKey);\n\n            if (edge && (changes.nodes.added.indexOf(edge.from) !== -1 || changes.nodes.added.indexOf(edge.to) !== -1)) edgeKeysToUpdate.push(dataKey);\n          });\n          edgeKeysToUpdate.forEach(function (dataKey) {\n            if (changes.edges.remained.indexOf(dataKey) === -1) return;\n\n            var edge = _this.findEdge(dataKey);\n\n            if (edge) {\n              var fromShape = model.findShapeByDataKey(edge.from);\n              var toShape = model.findShapeByDataKey(edge.to);\n              var connector = model.findConnectorByDataKey(dataKey);\n\n              if (connector) {\n                _this.changeConnectorPointsByDataItem(history, connector, _this.getConnectorPointsByEdge(model, edge, fromShape, toShape));\n\n                _this.changeConnectorByDataItem(history, model, connector, fromShape, toShape, edge);\n\n                _this.changeItemByDataItem(history, connector, edge);\n              } else connector = _this.createConnectorByEdge(history, model, selection, edge, fromShape, toShape);\n\n              if (connector) {\n                ModelUtils_1.ModelUtils.updateConnectorContainer(history, model, connector);\n                layoutConnectors.push(connector);\n                itemsToUpdate.push(connector);\n              }\n            }\n          });\n          changes.edges.remained.forEach(function (dataKey, index) {\n            var connector = model.findConnectorByDataKey(dataKey);\n            if (connector) connector.dataKey = changes.edges.remainedNew[index];\n          });\n          if (itemsToUpdate.length && updateTemplateItem) itemsToUpdate.forEach(function (item) {\n            item.hasTemplate && updateTemplateItem(item);\n          });\n          if (layoutParameters.needAutoLayout && (layoutShapes.length || layoutConnectors.length)) this.applyLayout(history, model, layoutShapes, layoutConnectors, layoutParameters, snapToGrid, gridSize);\n          ModelUtils_1.ModelUtils.tryUpdateModelRectangle(history);\n          history.endTransaction(!addNewHistoryItem);\n          this.endChangesNotification(false);\n        };\n\n        DataSource.prototype.applyShapeAutoSize = function (history, measurer, shapeSizeSettings, shape, snapToGrid, gridSize) {\n          if (!shape.description.enableText) return;\n          var shapeTextSize = shape.textRectangle.createSize();\n          var shapeSize = shape.size;\n          var textHorOffset = shapeTextSize.width - shapeSize.width;\n          var textVerOffset = shapeTextSize.height - shapeSize.height;\n          var maxWidth = shape.getMaxWidth(shapeSizeSettings.shapeMaxWidth);\n          var maxHeight = shape.getMaxHeight(shapeSizeSettings.shapeMaxHeight);\n\n          var sizeToPx = function sizeToPx(size, isHorizontal) {\n            return typeof size === \"number\" ? unit_converter_1.UnitConverter.twipsToPixelsF(size + (isHorizontal ? textHorOffset : textVerOffset)) : undefined;\n          };\n\n          var newShapeTextSize = TextUtils_1.getOptimalTextRectangle(shape.text, shape.styleText, ITextMeasurer_1.TextOwner.Shape, measurer, shapeTextSize.clone().applyConverter(unit_converter_1.UnitConverter.twipsToPixelsF), shape.description.keepRatioOnAutoSize, sizeToPx(shape.getMinWidth(shapeSizeSettings.shapeMinWidth), true), sizeToPx(maxWidth, true), sizeToPx(shape.getMinHeight(shapeSizeSettings.shapeMinHeight), false), sizeToPx(maxHeight, false)).clone().applyConverter(unit_converter_1.UnitConverter.pixelsToTwips);\n\n          if (!newShapeTextSize.equals(shapeTextSize)) {\n            var shapeNewSize = shape.description.getSizeByText(newShapeTextSize, shape);\n            if (snapToGrid && gridSize) shapeNewSize = new size_1.Size(Math.min(gridSize * Math.ceil(shapeNewSize.width / gridSize), maxWidth || Number.MAX_VALUE), Math.min(gridSize * Math.ceil(shapeNewSize.height / gridSize), maxHeight || Number.MAX_VALUE));\n            history.addAndRedo(new ResizeShapeHistoryItem_1.ResizeShapeHistoryItem(shape.key, shape.position, shapeNewSize));\n          }\n        };\n\n        DataSource.prototype.applyLayout = function (history, model, shapes, connectors, layoutParameters, snapToGrid, gridSize) {\n          var graphInfo = ModelUtils_1.ModelUtils.getGraphInfoByItems(model, shapes, connectors);\n          graphInfo.forEach(function (info) {\n            var layout = layoutParameters.getLayoutBuilder(info.graph).build();\n            var nonGraphItems = ModelUtils_1.ModelUtils.getNonGraphItems(model, info.container, layout.nodeToLayout, shapes, connectors);\n            ModelUtils_1.ModelUtils.applyLayout(history, model, info.container, info.graph, layout, nonGraphItems, layoutParameters.layoutSettings, snapToGrid, gridSize, layoutParameters.skipPointIndices);\n          });\n        };\n\n        DataSource.prototype.changeItemByDataItem = function (history, item, dataItem) {\n          if (dataItem.customData !== undefined && !Utils_1.ObjectUtils.compareObjects(dataItem.customData, item.customData)) history.addAndRedo(new ChangeCustomDataHistoryItem_1.ChangeCustomDataHistoryItem(item, dataItem.customData));\n          if (dataItem.zIndex !== undefined && dataItem.zIndex !== item.zIndex) history.addAndRedo(new ChangeZindexHistoryItem_1.ChangeZindexHistoryItem(item, dataItem.zIndex));\n          if (dataItem.style !== undefined) for (var key in dataItem.style) {\n            if (!Object.prototype.hasOwnProperty.call(dataItem.style, key)) continue;\n            var value = Svg_1.isColorProperty(key) ? color_1.ColorUtils.stringToHash(dataItem.style[key]) : dataItem.style[key];\n            if (value !== item.style[key]) history.addAndRedo(new ChangeStyleHistoryItem_1.ChangeStyleHistoryItem(item.key, key, value));\n          }\n          if (dataItem.styleText !== undefined) for (var key in dataItem.styleText) {\n            if (!Object.prototype.hasOwnProperty.call(dataItem.styleText, key)) continue;\n            var value = Svg_1.isColorProperty(key) ? color_1.ColorUtils.stringToHash(dataItem.styleText[key]) : dataItem.styleText[key];\n            if (value !== item.styleText[key]) history.addAndRedo(new ChangeStyleTextHistoryItem_1.ChangeStyleTextHistoryItem(item.key, key, value));\n          }\n          if (dataItem.locked !== undefined && dataItem.locked !== item.locked) history.addAndRedo(new ChangeLockedHistoryItem_1.ChangeLockedHistoryItem(item, dataItem.locked));\n        };\n\n        DataSource.prototype.createShapeByNode = function (history, model, selection, shapeDescriptionManager, node, point, layoutParameters, snapToGrid, gridSize, measurer) {\n          var insert = new AddShapeHistoryItem_1.AddShapeHistoryItem(shapeDescriptionManager.get(node.type), point, \"\", node.key);\n          history.addAndRedo(insert);\n          var shape = model.findShape(insert.shapeKey);\n          ModelUtils_1.ModelUtils.updateNewShapeProperties(history, selection, insert.shapeKey);\n          this.changeShapeByDataItem(history, model, shape, node, point);\n          this.changeItemByDataItem(history, shape, node);\n          if (measurer && this.canUseAutoSize && layoutParameters.autoSizeEnabled) this.applyShapeAutoSize(history, measurer, layoutParameters.sizeSettings, shape, snapToGrid, gridSize);\n          return shape;\n        };\n\n        DataSource.prototype.changeShapeByDataItem = function (history, model, shape, node, point) {\n          if (node.left !== undefined) point.x = ModelUtils_1.ModelUtils.getTwipsValue(model.units, node.left);\n          if (node.top !== undefined) point.y = ModelUtils_1.ModelUtils.getTwipsValue(model.units, node.top);\n          ModelUtils_1.ModelUtils.setShapePosition(history, model, shape, point);\n          ModelUtils_1.ModelUtils.updateShapeAttachedConnectors(history, model, shape);\n          var size = shape.size.clone();\n          if (node.width !== undefined) size.width = ModelUtils_1.ModelUtils.getTwipsValue(model.units, node.width);\n          if (node.height !== undefined) size.height = ModelUtils_1.ModelUtils.getTwipsValue(model.units, node.height);\n          ModelUtils_1.ModelUtils.setShapeSize(history, model, shape, point, size);\n          if (node.text !== undefined && node.text !== shape.text) history.addAndRedo(new ChangeShapeTextHistoryItem_1.ChangeShapeTextHistoryItem(shape, node.text));\n          if (node.image !== undefined && node.image !== shape.image.actualUrl) history.addAndRedo(new ChangeShapeImageHistoryItem_1.ChangeShapeImageHistoryItem(shape, node.image));\n        };\n\n        DataSource.prototype.updateShapeContainer = function (history, model, shape, node) {\n          var containerShape = node.containerKey !== undefined ? model.findShapeByDataKey(node.containerKey) : undefined;\n          if (containerShape !== shape.container) if (containerShape) ModelUtils_1.ModelUtils.insertToContainer(history, model, shape, containerShape);else ModelUtils_1.ModelUtils.removeFromContainer(history, model, shape);\n        };\n\n        DataSource.prototype.getConnectorPointsByEdge = function (model, edge, fromShape, toShape) {\n          var result = [];\n          var modelPoints = this.createModelPointFromDataSourceEdgeItemPoints(model.units, edge);\n\n          if (!modelPoints || modelPoints.length <= 1) {\n            if (!fromShape || !toShape) return undefined;\n            result.push(fromShape.position.clone());\n            result.push(toShape.position.clone());\n            return result;\n          }\n\n          var lastIndex = modelPoints.length - 1;\n\n          for (var i = 0; i <= lastIndex; i++) {\n            var modelPoint = modelPoints[i];\n            if (modelPoint !== null) result.push(modelPoint);else if (!fromShape && !toShape) return undefined;else if (i === 0 && fromShape) result.push(fromShape.position.clone());else if (i === lastIndex && toShape) result.push(toShape.position.clone());\n          }\n\n          return result;\n        };\n\n        DataSource.prototype.createModelPointFromDataSourceEdgeItemPoints = function (units, edge) {\n          var _this = this;\n\n          var result = [];\n          if (!Array.isArray(edge.points)) return undefined;\n          edge.points.forEach(function (dep) {\n            return result.push(_this.isValidDataSourceEdgeItemPoint(dep) ? _this.createModelPoint(units, dep) : null);\n          });\n          return result;\n        };\n\n        DataSource.prototype.createModelPoint = function (units, point) {\n          return new point_1.Point(ModelUtils_1.ModelUtils.getTwipsValue(units, point.x), ModelUtils_1.ModelUtils.getTwipsValue(units, point.y));\n        };\n\n        DataSource.prototype.isValidDataSourceEdgeItemPoint = function (point) {\n          return point !== undefined && point !== null && point.x !== undefined && point.y !== undefined && point.x !== null && point.y !== null;\n        };\n\n        DataSource.prototype.createConnectorByEdge = function (history, model, selection, edge, fromShape, toShape) {\n          var connector;\n          var dataKey = edge.key;\n          var points = this.getConnectorPointsByEdge(model, edge, fromShape, toShape);\n\n          if (points && points.length > 1) {\n            var insert = new AddConnectorHistoryItem_1.AddConnectorHistoryItem(points, dataKey);\n            history.addAndRedo(insert);\n            connector = model.findConnector(insert.connectorKey);\n            ModelUtils_1.ModelUtils.updateNewConnectorProperties(history, selection, insert.connectorKey);\n            this.changeConnectorByDataItem(history, model, connector, fromShape, toShape, edge);\n            this.changeItemByDataItem(history, connector, edge);\n          }\n\n          return connector;\n        };\n\n        DataSource.prototype.changeConnectorByDataItem = function (history, model, connector, fromShape, toShape, edge) {\n          var fromPointIndex = edge.fromPointIndex !== undefined ? edge.fromPointIndex : connector.beginConnectionPointIndex;\n\n          if (connector.beginItem !== fromShape || connector.beginConnectionPointIndex !== fromPointIndex) {\n            if (connector.beginItem) history.addAndRedo(new DeleteConnectionHistoryItem_1.DeleteConnectionHistoryItem(connector, Connector_1.ConnectorPosition.Begin));\n            if (fromShape) history.addAndRedo(new AddConnectionHistoryItem_1.AddConnectionHistoryItem(connector, fromShape, fromPointIndex, Connector_1.ConnectorPosition.Begin));\n          }\n\n          var toPointIndex = edge.toPointIndex !== undefined ? edge.toPointIndex : connector.endConnectionPointIndex;\n\n          if (connector.endItem !== toShape || connector.endConnectionPointIndex !== toPointIndex) {\n            if (connector.endItem) history.addAndRedo(new DeleteConnectionHistoryItem_1.DeleteConnectionHistoryItem(connector, Connector_1.ConnectorPosition.End));\n            if (toShape) history.addAndRedo(new AddConnectionHistoryItem_1.AddConnectionHistoryItem(connector, toShape, toPointIndex, Connector_1.ConnectorPosition.End));\n          }\n\n          ModelUtils_1.ModelUtils.updateConnectorAttachedPoints(history, model, connector);\n\n          if (edge.texts !== undefined && !this.compareTexts(edge, connector)) {\n            connector.texts.forEach(function (text) {\n              history.addAndRedo(new ChangeConnectorTextHistoryItem_1.ChangeConnectorTextHistoryItem(connector, text.position, undefined));\n            });\n\n            for (var key in edge.texts) {\n              if (!Object.prototype.hasOwnProperty.call(edge.texts, key)) continue;\n              var position = parseFloat(key);\n              history.addAndRedo(new ChangeConnectorTextHistoryItem_1.ChangeConnectorTextHistoryItem(connector, position, edge.texts[key]));\n            }\n          }\n\n          if (edge.lineOption !== undefined && edge.lineOption !== connector.properties.lineOption) history.addAndRedo(new ChangeConnectorPropertyHistoryItem_1.ChangeConnectorPropertyHistoryItem(connector.key, \"lineOption\", edge.lineOption));\n          if (edge.startLineEnding !== undefined && edge.startLineEnding !== connector.properties.startLineEnding) history.addAndRedo(new ChangeConnectorPropertyHistoryItem_1.ChangeConnectorPropertyHistoryItem(connector.key, \"startLineEnding\", edge.startLineEnding));\n          if (edge.endLineEnding !== undefined && edge.endLineEnding !== connector.properties.endLineEnding) history.addAndRedo(new ChangeConnectorPropertyHistoryItem_1.ChangeConnectorPropertyHistoryItem(connector.key, \"endLineEnding\", edge.endLineEnding));\n        };\n\n        DataSource.prototype.changeConnectorPointsByDataItem = function (history, connector, newPoints) {\n          if (newPoints && newPoints.length > 1 && newPoints.join(\",\") !== connector.points.join(\",\")) history.addAndRedo(new ChangeConnectorPointsHistoryItem_1.ReplaceConnectorPointsHistoryItem(connector.key, newPoints));\n        };\n\n        DataSource.prototype.compareTexts = function (edgeObj, connector) {\n          var texts = edgeObj.texts || {};\n          var result = Object.keys(texts).length === connector.getTextCount();\n          if (result) for (var key in texts) {\n            if (!Object.prototype.hasOwnProperty.call(texts, key)) continue;\n            var position = parseFloat(key);\n            if (!this.compareStrings(connector.getText(position), texts[key])) result = false;\n          }\n          return result;\n        };\n\n        DataSource.prototype.compareStrings = function (str1, str2) {\n          if (typeof str1 === \"string\" && typeof str2 === \"string\") return str1 === str2;\n          return this.isEmptyString(str1) && this.isEmptyString(str2);\n        };\n\n        DataSource.prototype.isEmptyString = function (str) {\n          return str === \"\" || str === null || str === undefined;\n        };\n\n        return DataSource;\n      }();\n\n      exports.DataSource = DataSource;\n      /***/\n    },\n    /* 348 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics237 = function extendStatics(d, b) {\n          _extendStatics237 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics237(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics237(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeCustomDataHistoryItem = void 0;\n\n      var HistoryItem_1 = __webpack_require__(6);\n\n      var Utils_1 = __webpack_require__(3);\n\n      var ChangeCustomDataHistoryItem =\n      /** @class */\n      function (_super) {\n        __extends(ChangeCustomDataHistoryItem, _super);\n\n        function ChangeCustomDataHistoryItem(item, customData) {\n          var _this = _super.call(this) || this;\n\n          _this.itemKey = item.key;\n          _this.customData = Utils_1.ObjectUtils.cloneObject(customData);\n          return _this;\n        }\n\n        ChangeCustomDataHistoryItem.prototype.redo = function (manipulator) {\n          var item = manipulator.model.findItem(this.itemKey);\n          this.oldCustomData = Utils_1.ObjectUtils.cloneObject(item.customData);\n          manipulator.changeCustomData(item, this.customData);\n        };\n\n        ChangeCustomDataHistoryItem.prototype.undo = function (manipulator) {\n          var item = manipulator.model.findItem(this.itemKey);\n          manipulator.changeCustomData(item, this.oldCustomData);\n        };\n\n        return ChangeCustomDataHistoryItem;\n      }(HistoryItem_1.HistoryItem);\n\n      exports.ChangeCustomDataHistoryItem = ChangeCustomDataHistoryItem;\n      /***/\n    },\n    /* 349 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics238 = function extendStatics(d, b) {\n          _extendStatics238 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics238(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics238(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.DataSourceEdgeDataImporter = exports.DataSourceNodeDataImporter = exports.DataSourceItemDataImporter = void 0;\n\n      var DataSourceItemDataImporter =\n      /** @class */\n      function () {\n        function DataSourceItemDataImporter() {\n          this.getKey = function (obj) {\n            return obj[\"id\"];\n          };\n\n          this.setKey = function (obj, value) {\n            obj[\"id\"] = value;\n          };\n\n          this.getCustomData = undefined;\n          this.setCustomData = undefined;\n          this.getLocked = undefined;\n          this.setLocked = undefined;\n          this.getStyle = undefined;\n          this.setStyle = undefined;\n          this.getStyleText = undefined;\n          this.setStyleText = undefined;\n          this.getZIndex = undefined;\n          this.setZIndex = undefined;\n        }\n\n        return DataSourceItemDataImporter;\n      }();\n\n      exports.DataSourceItemDataImporter = DataSourceItemDataImporter;\n\n      var DataSourceNodeDataImporter =\n      /** @class */\n      function (_super) {\n        __extends(DataSourceNodeDataImporter, _super);\n\n        function DataSourceNodeDataImporter() {\n          var _this = _super !== null && _super.apply(this, arguments) || this;\n\n          _this.getType = undefined;\n          _this.setType = undefined;\n          _this.getText = undefined;\n          _this.setText = undefined;\n          _this.getImage = undefined;\n          _this.setImage = undefined;\n          _this.getLeft = undefined;\n          _this.setLeft = undefined;\n          _this.getTop = undefined;\n          _this.setTop = undefined;\n          _this.getWidth = undefined;\n          _this.setWidth = undefined;\n          _this.getHeight = undefined;\n          _this.setHeight = undefined;\n          _this.getChildren = undefined;\n          _this.setChildren = undefined;\n          _this.getParentKey = undefined;\n          _this.setParentKey = undefined;\n          _this.getItems = undefined;\n          _this.setItems = undefined;\n          _this.getContainerKey = undefined;\n          _this.setContainerKey = undefined;\n          return _this;\n        }\n\n        return DataSourceNodeDataImporter;\n      }(DataSourceItemDataImporter);\n\n      exports.DataSourceNodeDataImporter = DataSourceNodeDataImporter;\n\n      var DataSourceEdgeDataImporter =\n      /** @class */\n      function (_super) {\n        __extends(DataSourceEdgeDataImporter, _super);\n\n        function DataSourceEdgeDataImporter() {\n          var _this = _super !== null && _super.apply(this, arguments) || this;\n\n          _this.getFrom = function (obj) {\n            return obj[\"from\"];\n          };\n\n          _this.setFrom = function (obj, value) {\n            obj[\"from\"] = value;\n          };\n\n          _this.getFromPointIndex = undefined;\n          _this.setFromPointIndex = undefined;\n\n          _this.getTo = function (obj) {\n            return obj[\"to\"];\n          };\n\n          _this.setTo = function (obj, value) {\n            obj[\"to\"] = value;\n          };\n\n          _this.getToPointIndex = undefined;\n          _this.setToPointIndex = undefined;\n          _this.getPoints = undefined;\n          _this.setPoints = undefined;\n          _this.getText = undefined;\n          _this.setText = undefined;\n          _this.getLineOption = undefined;\n          _this.setLineOption = undefined;\n          _this.getStartLineEnding = undefined;\n          _this.setStartLineEnding = undefined;\n          _this.getEndLineEnding = undefined;\n          _this.setEndLineEnding = undefined;\n          return _this;\n        }\n\n        return DataSourceEdgeDataImporter;\n      }(DataSourceItemDataImporter);\n\n      exports.DataSourceEdgeDataImporter = DataSourceEdgeDataImporter;\n      /***/\n    },\n    /* 350 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics239 = function extendStatics(d, b) {\n          _extendStatics239 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics239(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics239(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.DataSourceEdgeItem = exports.DataSourceNodeItem = exports.DataSourceItem = void 0;\n\n      var Connector_1 = __webpack_require__(7);\n\n      var DataSourceItem =\n      /** @class */\n      function () {\n        function DataSourceItem(sourceKey, key, dataObj) {\n          this.sourceKey = sourceKey;\n          this.key = key;\n          this.dataObj = dataObj;\n        }\n\n        return DataSourceItem;\n      }();\n\n      exports.DataSourceItem = DataSourceItem;\n\n      var DataSourceNodeItem =\n      /** @class */\n      function (_super) {\n        __extends(DataSourceNodeItem, _super);\n\n        function DataSourceNodeItem(sourceKey, key, dataObj, type, text, parentDataObj, containerKey, containerDataObj) {\n          var _this = _super.call(this, sourceKey, key, dataObj) || this;\n\n          _this.type = type;\n          _this.text = text;\n          _this.parentDataObj = parentDataObj;\n          _this.containerKey = containerKey;\n          _this.containerDataObj = containerDataObj;\n          return _this;\n        }\n\n        return DataSourceNodeItem;\n      }(DataSourceItem);\n\n      exports.DataSourceNodeItem = DataSourceNodeItem;\n\n      var DataSourceEdgeItem =\n      /** @class */\n      function (_super) {\n        __extends(DataSourceEdgeItem, _super);\n\n        function DataSourceEdgeItem(sourceKey, key, dataObj, from, to) {\n          var _this = _super.call(this, sourceKey, key, dataObj) || this;\n\n          _this.sourceKey = sourceKey;\n          _this.from = from;\n          _this.to = to;\n          return _this;\n        }\n\n        Object.defineProperty(DataSourceEdgeItem.prototype, \"text\", {\n          get: function get() {\n            return this.texts && this.texts[Connector_1.CONNECTOR_DEFAULT_TEXT_POSITION];\n          },\n          enumerable: false,\n          configurable: true\n        });\n        return DataSourceEdgeItem;\n      }(DataSourceItem);\n\n      exports.DataSourceEdgeItem = DataSourceEdgeItem;\n      /***/\n    },\n    /* 351 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ViewController = void 0;\n\n      var CommandManager_1 = __webpack_require__(81);\n\n      var LOG_MIN_ZOOM = Math.log(0.05);\n      var LOG_MAX_ZOOM = Math.log(3);\n      var ZOOM_STEPS = 40;\n      var ZERO_STEP = getStepByZoom(1);\n      var ZOOMLEVEL_COMMANDS = [CommandManager_1.DiagramCommand.ZoomLevel, CommandManager_1.DiagramCommand.ZoomLevelInPercentage, CommandManager_1.DiagramCommand.Zoom100, CommandManager_1.DiagramCommand.Zoom125, CommandManager_1.DiagramCommand.Zoom200, CommandManager_1.DiagramCommand.Zoom25, CommandManager_1.DiagramCommand.Zoom50, CommandManager_1.DiagramCommand.Zoom75];\n      var AUTOZOOM_COMMANDS = [CommandManager_1.DiagramCommand.SwitchAutoZoom, CommandManager_1.DiagramCommand.ToggleAutoZoom, CommandManager_1.DiagramCommand.AutoZoomToContent, CommandManager_1.DiagramCommand.AutoZoomToWidth];\n\n      var ViewController =\n      /** @class */\n      function () {\n        function ViewController(settings, bars) {\n          this.settings = settings;\n          this.bars = bars;\n          settings.onZoomChanged.add(this);\n          this.autoZoom = settings.autoZoom;\n        }\n\n        ViewController.prototype.initialize = function (view) {\n          this.view = view;\n          this.view.onViewChanged.add(this);\n        };\n\n        ViewController.prototype.scrollTo = function (modelPoint, offsetPoint) {\n          if (this.view) this.view.setScrollTo(modelPoint, offsetPoint);\n        };\n\n        ViewController.prototype.scrollBy = function (offset) {\n          if (this.view && (offset.x !== 0 || offset.y !== 0)) return this.view.scrollBy(offset);\n          return offset;\n        };\n\n        ViewController.prototype.scrollIntoView = function (rectangle) {\n          this.view && this.view.scrollIntoView(rectangle);\n        };\n\n        ViewController.prototype.normalize = function () {\n          this.view.tryNormalizePaddings();\n        };\n\n        ViewController.prototype.getNextStepZoom = function (increase) {\n          var currentZoomStep = this.getNearestCurrentZoomStep();\n          var delta = increase ? 1 : -1;\n          var step = Math.min(ZOOM_STEPS - 1, Math.max(0, currentZoomStep + delta));\n\n          if (step !== ZERO_STEP) {\n            var logZoom = LOG_MIN_ZOOM + (LOG_MAX_ZOOM - LOG_MIN_ZOOM) * step / (ZOOM_STEPS - 1);\n            return Math.exp(logZoom);\n          }\n\n          return 1;\n        };\n\n        ViewController.prototype.getNearestCurrentZoomStep = function () {\n          var zoom = this.getZoom();\n          return getStepByZoom(zoom);\n        };\n\n        ViewController.prototype.getZoom = function () {\n          return this.view ? this.view.actualZoom : this.settings.zoomLevel;\n        };\n\n        ViewController.prototype.resetScroll = function () {\n          this.view.adjust({\n            horizontal: true,\n            vertical: true\n          });\n        };\n\n        ViewController.prototype.notifyViewAdjusted = function (canvasOffset) {};\n\n        ViewController.prototype.notifyActualZoomChanged = function (actualZoom) {\n          this.bars.updateItemsState(ZOOMLEVEL_COMMANDS);\n        };\n\n        ViewController.prototype.notifyZoomChanged = function (fixedZoomLevel, autoZoom) {\n          if (this.autoZoom !== autoZoom) {\n            this.autoZoom = autoZoom;\n            this.bars.updateItemsState(AUTOZOOM_COMMANDS);\n          }\n        };\n\n        return ViewController;\n      }();\n\n      exports.ViewController = ViewController;\n\n      function getStepByZoom(zoom) {\n        var logZoom = Math.log(zoom);\n        return Math.round((logZoom - LOG_MIN_ZOOM) * (ZOOM_STEPS - 1) / (LOG_MAX_ZOOM - LOG_MIN_ZOOM));\n      }\n      /***/\n\n    },\n    /* 352 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ToolboxManager = void 0;\n\n      var TextToolbox_1 = __webpack_require__(353);\n\n      var IconToolbox_1 = __webpack_require__(354);\n\n      var TextMeasurer_1 = __webpack_require__(77);\n\n      var math_1 = __webpack_require__(33);\n\n      var ToolboxManager =\n      /** @class */\n      function () {\n        function ToolboxManager(shapeDescriptionManager) {\n          this.shapeDescriptionManager = shapeDescriptionManager;\n          this.toolboxes = [];\n          this.measurers = {};\n        }\n\n        ToolboxManager.prototype.create = function (parent, readOnly, allowDragging, renderAsText, shapes, getAllowedShapeTypes, options) {\n          var shapeTypes = Array.isArray(shapes) ? shapes : this.shapeDescriptionManager.getTypesByCategory(shapes);\n          var toolbox = renderAsText ? new TextToolbox_1.TextToolbox(parent, readOnly, allowDragging, this.shapeDescriptionManager, shapeTypes, getAllowedShapeTypes) : new IconToolbox_1.IconToolbox(parent, readOnly, allowDragging, this.shapeDescriptionManager, shapeTypes, getAllowedShapeTypes, options, this.getOrCreateMeasurer(parent));\n          toolbox.render();\n          this.toolboxes.push(toolbox);\n          return toolbox;\n        };\n\n        ToolboxManager.prototype.clean = function (removeElement, toolbox) {\n          if (toolbox) {\n            toolbox.clean(removeElement);\n            this.toolboxes.splice(this.toolboxes.indexOf(toolbox), 1);\n          } else {\n            for (var i = 0; i < this.toolboxes.length; i++) {\n              this.toolboxes[i].clean(removeElement);\n            }\n\n            this.toolboxes = [];\n          }\n        };\n\n        ToolboxManager.prototype.refresh = function (toolboxes) {\n          this.toolboxes.forEach(function (toolbox, index) {\n            if (!toolboxes || Array.isArray(toolboxes) && toolboxes.indexOf(index) > -1 || index === toolboxes) toolbox.render();\n          });\n        };\n\n        ToolboxManager.prototype.applyFilter = function (str, toolboxes) {\n          var _this = this;\n\n          return this.toolboxes.reduce(function (aggr, toolbox, index) {\n            if (!toolboxes || Array.isArray(toolboxes) && toolboxes.indexOf(index) > -1 || index === toolboxes) toolbox.render(function (shapeType) {\n              return _this.searchFilter(shapeType, str, index);\n            }) && aggr.push(index);\n            return aggr;\n          }, []);\n        };\n\n        ToolboxManager.prototype.searchFilter = function (shapeType, str, toolboxIndex, filteringToolboxes) {\n          if (!str || filteringToolboxes && filteringToolboxes.indexOf(toolboxIndex) === -1) return true;\n          str = str.toLowerCase();\n          var shapeDescription = this.shapeDescriptionManager.get(shapeType);\n          return shapeDescription.getTitle().toLowerCase().indexOf(str) > -1 || shapeDescription.getDefaultText().toLowerCase().indexOf(str) > -1;\n        };\n\n        ToolboxManager.prototype.getOrCreateMeasurer = function (parent) {\n          var id = parent.getAttribute(\"data-dxdiMeasurerID\");\n\n          if (!id || !this.measurers[id]) {\n            id = math_1.MathUtils.generateGuid();\n            this.measurers[id] = new TextMeasurer_1.TextMeasurer(parent);\n            parent.setAttribute(\"data-dxdiMeasurerID\", id);\n          }\n\n          return this.measurers[id];\n        };\n\n        return ToolboxManager;\n      }();\n\n      exports.ToolboxManager = ToolboxManager;\n      /***/\n    },\n    /* 353 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics240 = function extendStatics(d, b) {\n          _extendStatics240 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics240(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics240(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.TextToolbox = void 0;\n\n      var Toolbox_1 = __webpack_require__(161);\n\n      var TextToolbox =\n      /** @class */\n      function (_super) {\n        __extends(TextToolbox, _super);\n\n        function TextToolbox(parent, readOnly, allowDragging, shapeDescriptionManager, shapeTypes, getAllowedShapeTypes) {\n          return _super.call(this, parent, readOnly, allowDragging, shapeDescriptionManager, shapeTypes, getAllowedShapeTypes) || this;\n        }\n\n        TextToolbox.prototype.createElements = function (element, shapeTypes) {\n          var _this = this;\n\n          shapeTypes.forEach(function (shapeType) {\n            var description = _this.shapeDescriptionManager.get(shapeType);\n\n            var itemEl = document.createElement(\"div\");\n            itemEl.setAttribute(\"class\", \"toolbox-text-item\");\n            itemEl.setAttribute(\"data-tb-type\", shapeType);\n            itemEl.innerHTML = description.getDefaultText() || description.getTitle();\n            element.appendChild(itemEl);\n          });\n        };\n\n        TextToolbox.prototype.createDraggingElement = function (draggingObject) {\n          var element = document.createElement(\"DIV\");\n          element.setAttribute(\"class\", \"dxdi-toolbox-drag-text-item\");\n          var shapeDescription = this.shapeDescriptionManager.get(draggingObject.evt.data);\n          element.innerHTML = shapeDescription.getDefaultText() || shapeDescription.getTitle();\n          document.body.appendChild(element);\n          return element;\n        };\n\n        return TextToolbox;\n      }(Toolbox_1.Toolbox);\n\n      exports.TextToolbox = TextToolbox;\n      /***/\n    },\n    /* 354 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics241 = function extendStatics(d, b) {\n          _extendStatics241 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics241(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics241(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.IconToolbox = void 0;\n\n      var Toolbox_1 = __webpack_require__(161);\n\n      var RenderHelper_1 = __webpack_require__(15);\n\n      var Shape_1 = __webpack_require__(14);\n\n      var unit_converter_1 = __webpack_require__(12);\n\n      var point_1 = __webpack_require__(1);\n\n      var TextShapeDescription_1 = __webpack_require__(122);\n\n      var Style_1 = __webpack_require__(30);\n\n      var CustomShapeDescription_1 = __webpack_require__(127);\n\n      var RectaglePrimitive_1 = __webpack_require__(21);\n\n      var DEFAULT_SHAPE_ICON_SIZE = 32;\n      var SHRINK_TEXT_SHAPE_ICON_SIZE = 26;\n      var SHRINKED_TEXT = \"T\";\n\n      var IconToolbox =\n      /** @class */\n      function (_super) {\n        __extends(IconToolbox, _super);\n\n        function IconToolbox(parent, readonly, allowDragging, shapeDescriptionManager, shapeTypes, getAllowedShapeTypes, options, measurer) {\n          var _this = _super.call(this, parent, readonly, allowDragging, shapeDescriptionManager, shapeTypes, getAllowedShapeTypes) || this;\n\n          _this.options = options;\n          _this.measurer = measurer;\n          return _this;\n        }\n\n        IconToolbox.prototype.createElements = function (element, shapeTypes) {\n          var svgElement = document.createElementNS(RenderHelper_1.svgNS, \"svg\");\n          svgElement.className.baseVal = \"dxdi-canvas\";\n          element.appendChild(svgElement);\n          this.drawShapeIcons(svgElement, shapeTypes, this.options.toolboxWidth || svgElement.getBoundingClientRect().width);\n        };\n\n        IconToolbox.prototype.drawShapeIcons = function (parent, shapeTypes, svgWidth) {\n          var _this = this;\n\n          var lineWidth = Style_1.DEFAULT_STROKE_WIDTH;\n          var targetWidth = svgWidth - 2 * lineWidth;\n          var shapeIconSize = this.options.shapeIconSize;\n          if (!shapeIconSize && this.options.shapeIconSpacing && this.options.shapeIconCountInRow) shapeIconSize = Math.floor((targetWidth - (this.options.shapeIconCountInRow - 1) * this.options.shapeIconSpacing) / this.options.shapeIconCountInRow);\n          if (!shapeIconSize) shapeIconSize = DEFAULT_SHAPE_ICON_SIZE;\n          shapeIconSize = Math.max(shapeIconSize, this.options.shapeIconSpacing / 2);\n          var width = shapeIconSize;\n          var iconCountInRow = this.options.shapeIconCountInRow;\n\n          if (!iconCountInRow) {\n            iconCountInRow = 1;\n\n            while (width < targetWidth) {\n              width += this.options.shapeIconSpacing + shapeIconSize;\n              if (width < targetWidth) iconCountInRow++;\n            }\n          }\n\n          var shapeIconSpacing = iconCountInRow > 1 ? (targetWidth - shapeIconSize * iconCountInRow) / (iconCountInRow - 1) : 0;\n          var xPos = lineWidth;\n          var yPos = lineWidth;\n          var size = unit_converter_1.UnitConverter.pixelsToTwips(shapeIconSize);\n          shapeTypes.forEach(function (shapeType, index) {\n            if (index > 0 && index % iconCountInRow === 0) {\n              xPos = lineWidth;\n              yPos += shapeIconSize + shapeIconSpacing;\n            }\n\n            var shapeDescription = _this.shapeDescriptionManager.get(shapeType);\n\n            var shape = _this.createShape(shapeDescription, xPos, yPos, shapeIconSize < SHRINK_TEXT_SHAPE_ICON_SIZE);\n\n            _this.updateShapeIconBounds(shape, shapeIconSize);\n\n            var shapeEl = _this.drawShape(parent, shape);\n\n            _this.drawSelector(shapeEl, unit_converter_1.UnitConverter.pixelsToTwips(xPos), unit_converter_1.UnitConverter.pixelsToTwips(yPos), size);\n\n            xPos += shapeIconSize + shapeIconSpacing;\n          });\n          parent.style.height = yPos + shapeIconSize + lineWidth + \"px\";\n          parent.style.width = svgWidth + \"px\";\n        };\n\n        IconToolbox.prototype.drawShape = function (parent, shape) {\n          var _this = this;\n\n          var primitives = shape.description.createPrimitives(shape, true);\n          var gEl = document.createElementNS(RenderHelper_1.svgNS, \"g\");\n          gEl.setAttribute(\"data-tb-type\", shape.description.key.toString());\n          gEl.setAttribute(\"class\", \"toolbox-item\");\n          gEl.setAttribute(\"title\", shape.description.getTitle());\n          if (this.options.shapeIconAttributes) for (var key in this.options.shapeIconAttributes) {\n            if (Object.prototype.hasOwnProperty.call(this.options.shapeIconAttributes, key)) gEl.setAttribute(key, this.options.shapeIconAttributes[key]);\n          }\n          parent.appendChild(gEl);\n          primitives.forEach(function (pr) {\n            var el = pr.createElement(function (e) {\n              return gEl.appendChild(e);\n            });\n            pr.applyElementProperties(el, _this.measurer);\n          });\n          return gEl;\n        };\n\n        IconToolbox.prototype.drawSelector = function (parent, x, y, size) {\n          var _this = this;\n\n          var selectorRect = new RectaglePrimitive_1.RectanglePrimitive(x, y, size, size, undefined, \"selector\");\n          selectorRect.createElement(function (el) {\n            selectorRect.applyElementProperties(el, _this.measurer);\n            parent.appendChild(el);\n          });\n        };\n\n        IconToolbox.prototype.createShape = function (shapeDescription, xPos, yPos, shrinkText) {\n          var xPosT = unit_converter_1.UnitConverter.pixelsToTwips(xPos);\n          var yPosT = unit_converter_1.UnitConverter.pixelsToTwips(yPos);\n          var shape = new Shape_1.Shape(shapeDescription, new point_1.Point(xPosT, yPosT), true);\n          if (this.needResetShapeText(shapeDescription)) shape.text = \"\";else if (shrinkText) shape.text = SHRINKED_TEXT;\n          return shape;\n        };\n\n        IconToolbox.prototype.needResetShapeText = function (shapeDescription) {\n          if (shapeDescription instanceof TextShapeDescription_1.TextShapeDescription) return false;\n          if (shapeDescription instanceof CustomShapeDescription_1.CustomShapeDescription && shapeDescription.baseDescription instanceof TextShapeDescription_1.TextShapeDescription) return false;\n          return true;\n        };\n\n        IconToolbox.prototype.updateShapeIconBounds = function (shape, shapeIconSize) {\n          var shapeSizeT = unit_converter_1.UnitConverter.pixelsToTwips(shapeIconSize);\n          shape.size.height = shape.size.width * shape.getToolboxHeightToWidthRatio();\n\n          if (shape.size.width > shape.size.height) {\n            var ratio = shape.size.height / shape.size.width;\n            shape.size.width = shapeSizeT;\n            shape.size.height = shapeSizeT * ratio;\n            shape.position.y = shape.position.y + (shapeSizeT - shape.size.height) / 2;\n            shape.parameters.forEach(function (p) {\n              p.value = p.value * shapeSizeT / shape.description.defaultSize.width;\n            });\n          } else if (shape.size.width < shape.size.height) {\n            var ratio = shape.size.width / shape.size.height;\n            shape.size.height = shapeSizeT;\n            shape.size.width = shapeSizeT * ratio;\n            shape.position.x = shape.position.x + (shapeSizeT - shape.size.width) / 2;\n            shape.parameters.forEach(function (p) {\n              p.value = p.value * shapeSizeT / shape.description.defaultSize.height;\n            });\n          } else {\n            shape.size.width = shapeSizeT;\n            shape.size.height = shapeSizeT;\n            shape.parameters.forEach(function (p) {\n              p.value = p.value * shapeSizeT / shape.description.defaultSize.width;\n            });\n          }\n        };\n\n        IconToolbox.prototype.createDraggingElement = function (draggingObject) {\n          var element = document.createElement(\"DIV\");\n          element.setAttribute(\"class\", \"dxdi-toolbox-drag-item\");\n          document.body.appendChild(element);\n          var svgElement = document.createElementNS(RenderHelper_1.svgNS, \"svg\");\n          svgElement.className.baseVal = \"dxdi-canvas\";\n          element.appendChild(svgElement);\n          var shapeDescription = this.shapeDescriptionManager.get(draggingObject.evt.data);\n          var shape = this.createShape(shapeDescription, Style_1.DEFAULT_STROKE_WIDTH, Style_1.DEFAULT_STROKE_WIDTH);\n          this.drawShape(svgElement, shape);\n          element.style.width = unit_converter_1.UnitConverter.twipsToPixels(shape.size.width) + 2 * Style_1.DEFAULT_STROKE_WIDTH + \"px\";\n          element.style.height = unit_converter_1.UnitConverter.twipsToPixels(shape.size.height) + 2 * Style_1.DEFAULT_STROKE_WIDTH + \"px\";\n          return element;\n        };\n\n        return IconToolbox;\n      }(Toolbox_1.Toolbox);\n\n      exports.IconToolbox = IconToolbox;\n      /***/\n    },\n    /* 355 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics242 = function extendStatics(d, b) {\n          _extendStatics242 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics242(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics242(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ApiController = void 0;\n\n      var batch_updatable_1 = __webpack_require__(79);\n\n      var Event_1 = __webpack_require__(11);\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var __1 = __webpack_require__(106);\n\n      var ApiController =\n      /** @class */\n      function (_super) {\n        __extends(ApiController, _super);\n\n        function ApiController(events, selection, model) {\n          var _this = _super.call(this) || this;\n\n          _this.events = events;\n          _this.model = model;\n          _this.selection = selection;\n          return _this;\n        }\n\n        ApiController.prototype.notifySelectionChanged = function (selection) {\n          if (this.isUpdateLocked()) this.registerOccurredEvent(ApiControllerAction.SelectionChanged);else this.raiseSelectionChanged();\n        };\n\n        ApiController.prototype.notifyToolboxDragStart = function () {\n          this.events.raise(\"notifyToolboxItemDragStart\");\n        };\n\n        ApiController.prototype.notifyToolboxDragEnd = function () {\n          this.events.raise(\"notifyToolboxItemDragEnd\");\n        };\n\n        ApiController.prototype.notifyClick = function (evt) {\n          var _this = this;\n\n          this.tryRaiseUserAction(evt, function (i) {\n            return _this.events.raise(\"notifyItemClick\", i);\n          });\n        };\n\n        ApiController.prototype.notifyDblClick = function (evt) {\n          var _this = this;\n\n          this.tryRaiseUserAction(evt, function (i) {\n            return _this.events.raise(\"notifyItemDblClick\", i);\n          });\n        };\n\n        ApiController.prototype.createNativeItem = function (item) {\n          return item && this.cleanupNativeItem(item.toNative(this.model.units));\n        };\n\n        ApiController.prototype.createNativeShape = function (shape) {\n          return this.createNativeItem(shape);\n        };\n\n        ApiController.prototype.createNativeConnector = function (connector) {\n          return this.createNativeItem(connector);\n        };\n\n        ApiController.prototype.convertUnit = function (value) {\n          return ModelUtils_1.ModelUtils.getlUnitValue(this.model.units, value);\n        };\n\n        ApiController.prototype.convertPoint = function (point) {\n          return new __1.Point(this.convertUnit(point.x), this.convertUnit(point.y));\n        };\n\n        ApiController.prototype.convertSize = function (size) {\n          return new __1.Size(this.convertUnit(size.width), this.convertUnit(size.height));\n        };\n\n        ApiController.prototype.cleanupNativeItem = function (item) {\n          var ds = this.dataSource;\n\n          if (ds) {\n            if (ds.isAutoGeneratedKey(item.fromKey)) item.fromKey = undefined;\n            if (ds.isAutoGeneratedKey(item.key)) item.key = undefined;\n            if (ds.isAutoGeneratedKey(item.toKey)) item.toKey = undefined;\n          }\n\n          return item;\n        };\n\n        ApiController.prototype.setDataSource = function (dataSource) {\n          this.dataSource = dataSource;\n        };\n\n        ApiController.prototype.tryRaiseUserAction = function (evt, callEvent) {\n          var _this = this;\n\n          if (this.isUserAction(evt)) {\n            var item_1 = this.model.findItem(evt.source.key);\n            item_1 && this.events.raise1(function (l) {\n              return callEvent(_this.createNativeItem(item_1));\n            });\n          }\n        };\n\n        ApiController.prototype.isUserAction = function (evt) {\n          return evt.source && (evt.source.type === Event_1.MouseEventElementType.Shape || evt.source.type === Event_1.MouseEventElementType.ShapeExpandButton || evt.source.type === Event_1.MouseEventElementType.ShapeParameterBox || evt.source.type === Event_1.MouseEventElementType.ShapeResizeBox || evt.source.type === Event_1.MouseEventElementType.ShapeConnectionPoint || evt.source.type === Event_1.MouseEventElementType.Connector || evt.source.type === Event_1.MouseEventElementType.ConnectorPoint || evt.source.type === Event_1.MouseEventElementType.ConnectorSide || evt.source.type === Event_1.MouseEventElementType.ConnectorOrthogonalSide || evt.source.type === Event_1.MouseEventElementType.ConnectorText);\n        };\n\n        ApiController.prototype.onUpdateUnlocked = function (occurredEvents) {\n          if (occurredEvents & ApiControllerAction.SelectionChanged) this.raiseSelectionChanged();\n        };\n\n        ApiController.prototype.raiseSelectionChanged = function () {\n          var _this = this;\n\n          var items = this.selection.getKeys().map(function (key) {\n            return _this.createNativeItem(_this.model.findItem(key));\n          });\n          this.events.raise1(function (l) {\n            return l.notifySelectionChanged(items);\n          });\n        };\n\n        return ApiController;\n      }(batch_updatable_1.BatchUpdatableObject);\n\n      exports.ApiController = ApiController;\n      var ApiControllerAction;\n\n      (function (ApiControllerAction) {\n        ApiControllerAction[ApiControllerAction[\"SelectionChanged\"] = 1] = \"SelectionChanged\";\n      })(ApiControllerAction || (ApiControllerAction = {}));\n      /***/\n\n    },\n    /* 356 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.PermissionsProvider = void 0;\n\n      var Shape_1 = __webpack_require__(14);\n\n      var Utils_1 = __webpack_require__(3);\n\n      var ModelOperationSettings_1 = __webpack_require__(16);\n\n      var Connector_1 = __webpack_require__(7);\n\n      var AddShape_1 = __webpack_require__(357);\n\n      var DeleteShape_1 = __webpack_require__(358);\n\n      var DeleteConnector_1 = __webpack_require__(359);\n\n      var AddShapeFromToolbox_1 = __webpack_require__(360);\n\n      var ChangeConnection_1 = __webpack_require__(361);\n\n      var ChangeConnectorPoints_1 = __webpack_require__(362);\n\n      var BeforeChangeShapeText_1 = __webpack_require__(363);\n\n      var BeforeChangeConnectorText_1 = __webpack_require__(364);\n\n      var ChangeShapeText_1 = __webpack_require__(365);\n\n      var ChangeConnectorText_1 = __webpack_require__(366);\n\n      var PermissionsProviderStorage_1 = __webpack_require__(367);\n\n      var ResizeShape_1 = __webpack_require__(368);\n\n      var MoveShape_1 = __webpack_require__(369);\n\n      var PermissionsProvider =\n      /** @class */\n      function () {\n        function PermissionsProvider(apiController) {\n          this.onRequestOperation = new Utils_1.EventDispatcher();\n          this.cache = [];\n          this.permissionsLockCount = 0;\n          this.requestDeleteItems = {};\n          this.updateUICount = 0;\n          this.apiController = apiController;\n          this.operationSettings = new ModelOperationSettings_1.ModelOperationSettings();\n          this.storage = new PermissionsProviderStorage_1.PermissionsProviderStorage();\n        }\n\n        PermissionsProvider.prototype.notifySelectionChanged = function (_selection) {\n          this.clearCache();\n        };\n\n        PermissionsProvider.prototype.notifyModelChanged = function (changes) {\n          this.clearCache();\n        };\n\n        PermissionsProvider.prototype.notifyPageColorChanged = function (color) {};\n\n        PermissionsProvider.prototype.notifyPageSizeChanged = function (pageSize, pageLandscape) {};\n\n        PermissionsProvider.prototype.clearCache = function (operation) {\n          if (operation !== undefined) this.cache = this.cache.filter(function (entry) {\n            return entry.operation !== operation;\n          });else this.cache = [];\n        };\n\n        PermissionsProvider.prototype.canDeleteItems = function (items) {\n          var _this = this;\n\n          var allowed = true;\n          items.forEach(function (item) {\n            var entity;\n            if (item instanceof Shape_1.Shape) entity = new DeleteShape_1.DeleteShapeRequestedEntity(_this.apiController, item);\n            if (item instanceof Connector_1.Connector) entity = new DeleteConnector_1.DeleteConnectorRequestedEntity(_this.apiController, item);\n            allowed = allowed && _this.requestOperation(entity);\n          });\n          return allowed;\n        };\n\n        PermissionsProvider.prototype.canAddItems = function (items) {\n          var _this = this;\n\n          var allowed = true;\n          items.forEach(function (item) {\n            if (item instanceof Shape_1.Shape) allowed = allowed && _this.requestOperation(new AddShape_1.AddShapeRequestedEntity(_this.apiController, item));\n\n            if (item instanceof Connector_1.Connector) {\n              allowed = allowed && _this.canChangeConnection(item, item.beginItem, undefined, Connector_1.ConnectorPosition.Begin, item.beginConnectionPointIndex);\n              allowed = allowed && _this.canChangeConnection(item, item.endItem, undefined, Connector_1.ConnectorPosition.End, item.endConnectionPointIndex);\n            }\n          });\n          return allowed;\n        };\n\n        PermissionsProvider.prototype.canAddShapeFromToolbox = function (itemType) {\n          return this.requestOperation(new AddShapeFromToolbox_1.AddShapeFromToolboxRequestedEntity(this.apiController, itemType));\n        };\n\n        PermissionsProvider.prototype.canChangeConnection = function (connector, item, oldItem, position, connectionPointIndex) {\n          if (connector && this.requestDeleteItems[connector.key]) return true;\n          if (item === undefined || item === null || item instanceof Shape_1.Shape) return this.requestOperation(new ChangeConnection_1.ChangeConnectionRequestedEntity(this.apiController, connector, item, oldItem, position, connectionPointIndex));\n          return true;\n        };\n\n        PermissionsProvider.prototype.canChangeConnectorPoints = function (connector, oldPoints, points) {\n          if (connector && this.requestDeleteItems[connector.key]) return true;\n          return this.requestOperation(new ChangeConnectorPoints_1.ChangeConnectorPointsRequestedEntity(this.apiController, connector, oldPoints, points));\n        };\n\n        PermissionsProvider.prototype.canChangeShapeText = function (shape) {\n          return this.requestOperation(new BeforeChangeShapeText_1.BeforeChangeShapeTextRequestedEntity(this.apiController, shape));\n        };\n\n        PermissionsProvider.prototype.canChangeConnectorText = function (connector, position) {\n          return this.requestOperation(new BeforeChangeConnectorText_1.BeforeChangeConnectorTextRequestedEntity(this.apiController, connector, position));\n        };\n\n        PermissionsProvider.prototype.canApplyShapeTextChange = function (shape, textToApply) {\n          return this.requestOperation(new ChangeShapeText_1.ChangeShapeTextRequestedEntity(this.apiController, shape, textToApply));\n        };\n\n        PermissionsProvider.prototype.canApplyConnectorTextChange = function (connector, position, textToApply) {\n          return this.requestOperation(new ChangeConnectorText_1.ChangeConnectorTextRequestedEntity(this.apiController, connector, position, textToApply));\n        };\n\n        PermissionsProvider.prototype.canResizeShapes = function (shapeInfo) {\n          var _this = this;\n\n          var allowed = true;\n          shapeInfo.forEach(function (info) {\n            allowed = allowed && _this.requestOperation(new ResizeShape_1.ResizeShapeRequestedEntity(_this.apiController, info.shape, info.oldSize, info.size));\n          });\n          return allowed;\n        };\n\n        PermissionsProvider.prototype.canMoveShapes = function (shapeInfo) {\n          var _this = this;\n\n          var allowed = true;\n          shapeInfo.forEach(function (info) {\n            allowed = allowed && _this.requestOperation(new MoveShape_1.MoveShapeRequestedEntity(_this.apiController, info.shape, info.oldPosition, info.position));\n          });\n          return allowed;\n        };\n\n        PermissionsProvider.prototype.requestOperation = function (entity) {\n          var allowed = true;\n\n          if (!this.permissionsLockCount) {\n            var cachedEntity_1;\n            if (this.updateUICount > 0) this.cache.forEach(function (item) {\n              if (item.equals(entity)) {\n                cachedEntity_1 = item;\n                return;\n              }\n            });\n            if (cachedEntity_1) allowed = cachedEntity_1.allowed;else {\n              this.requestOperationCore(entity);\n              if (this.updateUICount > 0) this.cache.push(entity);\n              allowed = entity.allowed;\n            }\n\n            if (this.updateUICount === 0 && this.storage.needStorePermissions()) {\n              this.storage.storePermission(entity.storageKey, allowed);\n              return this.storage.isStoredPermissionsGranted();\n            }\n          }\n\n          return allowed;\n        };\n\n        PermissionsProvider.prototype.requestOperationCore = function (entity) {\n          entity.eventArgs.allowed = this.operationSettings[entity.settingsKey];\n          entity.eventArgs.updateUI = this.updateUICount > 0;\n          if (entity.allowed) this.onRequestOperation.raise(\"notifyRequestOperation\", entity.operation, entity.eventArgs);\n        };\n\n        PermissionsProvider.prototype.lockPermissions = function () {\n          this.permissionsLockCount++;\n        };\n\n        PermissionsProvider.prototype.unlockPermissions = function () {\n          this.permissionsLockCount--;\n        };\n\n        PermissionsProvider.prototype.beginDeleteItems = function (items) {\n          var _this = this;\n\n          items.forEach(function (item) {\n            return _this.requestDeleteItems[item.key] = item;\n          });\n        };\n\n        PermissionsProvider.prototype.endDeleteItems = function () {\n          this.requestDeleteItems = {};\n        };\n\n        PermissionsProvider.prototype.beginUpdateUI = function () {\n          this.updateUICount++;\n        };\n\n        PermissionsProvider.prototype.endUpdateUI = function () {\n          this.updateUICount--;\n        };\n\n        PermissionsProvider.prototype.addInteractingItem = function (item, operation) {\n          this.storage.addInteractingItem(item, operation);\n        };\n\n        PermissionsProvider.prototype.getInteractingItem = function (item, operation) {\n          return this.storage.getInteractingItem(item, operation);\n        };\n\n        PermissionsProvider.prototype.getInteractingItemCount = function () {\n          return this.storage.getInteractingItemCount();\n        };\n\n        PermissionsProvider.prototype.clearInteractingItems = function () {\n          this.storage.clearInteractingItems();\n        };\n\n        PermissionsProvider.prototype.beginStorePermissions = function () {\n          this.storage.beginStorePermissions();\n        };\n\n        PermissionsProvider.prototype.endStorePermissions = function () {\n          this.storage.endStorePermissions();\n        };\n\n        PermissionsProvider.prototype.isStoredPermissionsGranted = function () {\n          return this.permissionsLockCount > 0 || this.storage.isStoredPermissionsGranted();\n        };\n\n        return PermissionsProvider;\n      }();\n\n      exports.PermissionsProvider = PermissionsProvider;\n      /***/\n    },\n    /* 357 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics243 = function extendStatics(d, b) {\n          _extendStatics243 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics243(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics243(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.AddShapeEventArgs = exports.AddShapeRequestedEntity = void 0;\n\n      var ModelOperationSettings_1 = __webpack_require__(16);\n\n      var RequestedEntity_1 = __webpack_require__(23);\n\n      var AddShapeRequestedEntity =\n      /** @class */\n      function (_super) {\n        __extends(AddShapeRequestedEntity, _super);\n\n        function AddShapeRequestedEntity(apiController, shape) {\n          var _this = _super.call(this, apiController) || this;\n\n          _this.shape = shape;\n          return _this;\n        }\n\n        Object.defineProperty(AddShapeRequestedEntity.prototype, \"operation\", {\n          get: function get() {\n            return ModelOperationSettings_1.DiagramModelOperation.AddShape;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        AddShapeRequestedEntity.prototype.createEventArgs = function () {\n          return new AddShapeEventArgs(this.apiController.createNativeShape(this.shape), this.apiController.convertPoint(this.shape.position));\n        };\n\n        Object.defineProperty(AddShapeRequestedEntity.prototype, \"settingsKey\", {\n          get: function get() {\n            return \"addShape\";\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(AddShapeRequestedEntity.prototype, \"storageKey\", {\n          get: function get() {\n            return this.settingsKey + \"_\" + (this.shape && this.shape.key);\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        AddShapeRequestedEntity.prototype.equals = function (other) {\n          if (other instanceof AddShapeRequestedEntity) return this.shape === other.shape && this.shape.position.equals(other.shape.position);\n          return false;\n        };\n\n        return AddShapeRequestedEntity;\n      }(RequestedEntity_1.RequestedEntity);\n\n      exports.AddShapeRequestedEntity = AddShapeRequestedEntity;\n\n      var AddShapeEventArgs =\n      /** @class */\n      function (_super) {\n        __extends(AddShapeEventArgs, _super);\n\n        function AddShapeEventArgs(shape, position) {\n          var _this = _super.call(this) || this;\n\n          _this.shape = shape;\n          _this.position = position;\n          return _this;\n        }\n\n        return AddShapeEventArgs;\n      }(RequestedEntity_1.PermissionRequestEventArgs);\n\n      exports.AddShapeEventArgs = AddShapeEventArgs;\n      /***/\n    },\n    /* 358 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics244 = function extendStatics(d, b) {\n          _extendStatics244 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics244(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics244(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.DeleteShapeEventArgs = exports.DeleteShapeRequestedEntity = void 0;\n\n      var ModelOperationSettings_1 = __webpack_require__(16);\n\n      var RequestedEntity_1 = __webpack_require__(23);\n\n      var DeleteShapeRequestedEntity =\n      /** @class */\n      function (_super) {\n        __extends(DeleteShapeRequestedEntity, _super);\n\n        function DeleteShapeRequestedEntity(apiController, shape) {\n          var _this = _super.call(this, apiController) || this;\n\n          _this.shape = shape;\n          return _this;\n        }\n\n        Object.defineProperty(DeleteShapeRequestedEntity.prototype, \"operation\", {\n          get: function get() {\n            return ModelOperationSettings_1.DiagramModelOperation.DeleteShape;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        DeleteShapeRequestedEntity.prototype.createEventArgs = function () {\n          return new DeleteShapeEventArgs(this.apiController.createNativeShape(this.shape));\n        };\n\n        Object.defineProperty(DeleteShapeRequestedEntity.prototype, \"settingsKey\", {\n          get: function get() {\n            return \"deleteShape\";\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DeleteShapeRequestedEntity.prototype, \"storageKey\", {\n          get: function get() {\n            return this.settingsKey + \"_\" + (this.shape && this.shape.key);\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        DeleteShapeRequestedEntity.prototype.equals = function (other) {\n          if (other instanceof DeleteShapeRequestedEntity) return this.shape === other.shape;\n          return false;\n        };\n\n        return DeleteShapeRequestedEntity;\n      }(RequestedEntity_1.RequestedEntity);\n\n      exports.DeleteShapeRequestedEntity = DeleteShapeRequestedEntity;\n\n      var DeleteShapeEventArgs =\n      /** @class */\n      function (_super) {\n        __extends(DeleteShapeEventArgs, _super);\n\n        function DeleteShapeEventArgs(shape) {\n          var _this = _super.call(this) || this;\n\n          _this.shape = shape;\n          return _this;\n        }\n\n        return DeleteShapeEventArgs;\n      }(RequestedEntity_1.PermissionRequestEventArgs);\n\n      exports.DeleteShapeEventArgs = DeleteShapeEventArgs;\n      /***/\n    },\n    /* 359 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics245 = function extendStatics(d, b) {\n          _extendStatics245 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics245(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics245(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.DeleteConnectorEventArgs = exports.DeleteConnectorRequestedEntity = void 0;\n\n      var ModelOperationSettings_1 = __webpack_require__(16);\n\n      var RequestedEntity_1 = __webpack_require__(23);\n\n      var DeleteConnectorRequestedEntity =\n      /** @class */\n      function (_super) {\n        __extends(DeleteConnectorRequestedEntity, _super);\n\n        function DeleteConnectorRequestedEntity(apiController, connector) {\n          var _this = _super.call(this, apiController) || this;\n\n          _this.connector = connector;\n          return _this;\n        }\n\n        Object.defineProperty(DeleteConnectorRequestedEntity.prototype, \"operation\", {\n          get: function get() {\n            return ModelOperationSettings_1.DiagramModelOperation.DeleteConnector;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        DeleteConnectorRequestedEntity.prototype.createEventArgs = function () {\n          return new DeleteConnectorEventArgs(this.apiController.createNativeConnector(this.connector));\n        };\n\n        Object.defineProperty(DeleteConnectorRequestedEntity.prototype, \"settingsKey\", {\n          get: function get() {\n            return \"deleteConnector\";\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(DeleteConnectorRequestedEntity.prototype, \"storageKey\", {\n          get: function get() {\n            return this.settingsKey + \"_\" + (this.connector && this.connector.key);\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        DeleteConnectorRequestedEntity.prototype.equals = function (other) {\n          if (other instanceof DeleteConnectorRequestedEntity) return this.connector === other.connector;\n          return false;\n        };\n\n        return DeleteConnectorRequestedEntity;\n      }(RequestedEntity_1.RequestedEntity);\n\n      exports.DeleteConnectorRequestedEntity = DeleteConnectorRequestedEntity;\n\n      var DeleteConnectorEventArgs =\n      /** @class */\n      function (_super) {\n        __extends(DeleteConnectorEventArgs, _super);\n\n        function DeleteConnectorEventArgs(connector) {\n          var _this = _super.call(this) || this;\n\n          _this.connector = connector;\n          return _this;\n        }\n\n        return DeleteConnectorEventArgs;\n      }(RequestedEntity_1.PermissionRequestEventArgs);\n\n      exports.DeleteConnectorEventArgs = DeleteConnectorEventArgs;\n      /***/\n    },\n    /* 360 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics246 = function extendStatics(d, b) {\n          _extendStatics246 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics246(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics246(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.AddShapeFromToolboxEventArgs = exports.AddShapeFromToolboxRequestedEntity = void 0;\n\n      var ModelOperationSettings_1 = __webpack_require__(16);\n\n      var RequestedEntity_1 = __webpack_require__(23);\n\n      var AddShapeFromToolboxRequestedEntity =\n      /** @class */\n      function (_super) {\n        __extends(AddShapeFromToolboxRequestedEntity, _super);\n\n        function AddShapeFromToolboxRequestedEntity(apiController, shapeType) {\n          var _this = _super.call(this, apiController) || this;\n\n          _this.shapeType = shapeType;\n          return _this;\n        }\n\n        Object.defineProperty(AddShapeFromToolboxRequestedEntity.prototype, \"operation\", {\n          get: function get() {\n            return ModelOperationSettings_1.DiagramModelOperation.AddShapeFromToolbox;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        AddShapeFromToolboxRequestedEntity.prototype.createEventArgs = function () {\n          return new AddShapeFromToolboxEventArgs(this.shapeType);\n        };\n\n        Object.defineProperty(AddShapeFromToolboxRequestedEntity.prototype, \"settingsKey\", {\n          get: function get() {\n            return \"addShapeFromToolbox\";\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(AddShapeFromToolboxRequestedEntity.prototype, \"storageKey\", {\n          get: function get() {\n            return this.settingsKey + \"_\" + this.shapeType;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        AddShapeFromToolboxRequestedEntity.prototype.equals = function (other) {\n          if (other instanceof AddShapeFromToolboxRequestedEntity) return this.shapeType === other.shapeType;\n          return false;\n        };\n\n        return AddShapeFromToolboxRequestedEntity;\n      }(RequestedEntity_1.RequestedEntity);\n\n      exports.AddShapeFromToolboxRequestedEntity = AddShapeFromToolboxRequestedEntity;\n\n      var AddShapeFromToolboxEventArgs =\n      /** @class */\n      function (_super) {\n        __extends(AddShapeFromToolboxEventArgs, _super);\n\n        function AddShapeFromToolboxEventArgs(shapeType) {\n          var _this = _super.call(this) || this;\n\n          _this.shapeType = shapeType;\n          return _this;\n        }\n\n        return AddShapeFromToolboxEventArgs;\n      }(RequestedEntity_1.PermissionRequestEventArgs);\n\n      exports.AddShapeFromToolboxEventArgs = AddShapeFromToolboxEventArgs;\n      /***/\n    },\n    /* 361 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics247 = function extendStatics(d, b) {\n          _extendStatics247 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics247(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics247(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeConnectionEventArgs = exports.ChangeConnectionRequestedEntity = void 0;\n\n      var ModelOperationSettings_1 = __webpack_require__(16);\n\n      var RequestedEntity_1 = __webpack_require__(23);\n\n      var ChangeConnectionRequestedEntity =\n      /** @class */\n      function (_super) {\n        __extends(ChangeConnectionRequestedEntity, _super);\n\n        function ChangeConnectionRequestedEntity(apiController, connector, shape, oldShape, position, connectionPointIndex) {\n          var _this = _super.call(this, apiController) || this;\n\n          _this.connector = connector;\n          _this.shape = shape;\n          _this.oldShape = oldShape;\n          _this.position = position;\n          _this.connectionPointIndex = connectionPointIndex;\n          return _this;\n        }\n\n        Object.defineProperty(ChangeConnectionRequestedEntity.prototype, \"operation\", {\n          get: function get() {\n            return ModelOperationSettings_1.DiagramModelOperation.ChangeConnection;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ChangeConnectionRequestedEntity.prototype.createEventArgs = function () {\n          return new ChangeConnectionEventArgs(this.apiController.createNativeConnector(this.connector), this.apiController.createNativeShape(this.shape), this.apiController.createNativeShape(this.oldShape), this.position, this.connectionPointIndex);\n        };\n\n        Object.defineProperty(ChangeConnectionRequestedEntity.prototype, \"settingsKey\", {\n          get: function get() {\n            return \"changeConnection\";\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ChangeConnectionRequestedEntity.prototype, \"storageKey\", {\n          get: function get() {\n            return this.settingsKey + \"_\" + (this.connector && this.connector.key) + \"_\" + this.position;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ChangeConnectionRequestedEntity.prototype.equals = function (other) {\n          if (other instanceof ChangeConnectionRequestedEntity) {\n            var connectorsAreEqual = !this.connector && !other.connector || this.connector && other.connector && this.connector === other.connector;\n            var shapesAreEqual = !this.shape && !other.shape || this.shape && other.shape && this.shape === other.shape;\n            var oldShapesAreEqual = !this.oldShape && !other.oldShape || this.oldShape && other.oldShape && this.oldShape === other.oldShape;\n            return shapesAreEqual && oldShapesAreEqual && connectorsAreEqual && this.position === other.position && this.connectionPointIndex === other.connectionPointIndex;\n          }\n\n          return false;\n        };\n\n        return ChangeConnectionRequestedEntity;\n      }(RequestedEntity_1.RequestedEntity);\n\n      exports.ChangeConnectionRequestedEntity = ChangeConnectionRequestedEntity;\n\n      var ChangeConnectionEventArgs =\n      /** @class */\n      function (_super) {\n        __extends(ChangeConnectionEventArgs, _super);\n\n        function ChangeConnectionEventArgs(connector, shape, oldShape, position, connectionPointIndex) {\n          var _this = _super.call(this) || this;\n\n          _this.connector = connector;\n          _this.shape = shape;\n          _this.oldShape = oldShape;\n          _this.position = position;\n          _this.connectionPointIndex = connectionPointIndex;\n          return _this;\n        }\n\n        return ChangeConnectionEventArgs;\n      }(RequestedEntity_1.PermissionRequestEventArgs);\n\n      exports.ChangeConnectionEventArgs = ChangeConnectionEventArgs;\n      /***/\n    },\n    /* 362 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics248 = function extendStatics(d, b) {\n          _extendStatics248 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics248(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics248(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeConnectorPointsEventArgs = exports.ChangeConnectorPointsRequestedEntity = void 0;\n\n      var ModelOperationSettings_1 = __webpack_require__(16);\n\n      var RequestedEntity_1 = __webpack_require__(23);\n\n      var Utils_1 = __webpack_require__(3);\n\n      var ChangeConnectorPointsRequestedEntity =\n      /** @class */\n      function (_super) {\n        __extends(ChangeConnectorPointsRequestedEntity, _super);\n\n        function ChangeConnectorPointsRequestedEntity(apiController, connector, oldPoints, points) {\n          var _this = _super.call(this, apiController) || this;\n\n          _this.connector = connector;\n          _this.oldPoints = oldPoints;\n          _this.points = points;\n          return _this;\n        }\n\n        Object.defineProperty(ChangeConnectorPointsRequestedEntity.prototype, \"operation\", {\n          get: function get() {\n            return ModelOperationSettings_1.DiagramModelOperation.ChangeConnectorPoints;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ChangeConnectorPointsRequestedEntity.prototype.createEventArgs = function () {\n          var _this = this;\n\n          return new ChangeConnectorPointsEventArgs(this.apiController.createNativeConnector(this.connector), this.oldPoints.map(function (pt) {\n            return _this.apiController.convertPoint(pt);\n          }), this.points.map(function (pt) {\n            return _this.apiController.convertPoint(pt);\n          }));\n        };\n\n        Object.defineProperty(ChangeConnectorPointsRequestedEntity.prototype, \"settingsKey\", {\n          get: function get() {\n            return \"changeConnectorPoints\";\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ChangeConnectorPointsRequestedEntity.prototype, \"storageKey\", {\n          get: function get() {\n            return this.settingsKey + \"_\" + (this.connector && this.connector.key);\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ChangeConnectorPointsRequestedEntity.prototype.equals = function (other) {\n          if (other instanceof ChangeConnectorPointsRequestedEntity) return this.connector === other.connector && Utils_1.GeometryUtils.arePointsEqual(this.oldPoints, other.oldPoints) && Utils_1.GeometryUtils.arePointsEqual(this.points, other.points);\n          return false;\n        };\n\n        return ChangeConnectorPointsRequestedEntity;\n      }(RequestedEntity_1.RequestedEntity);\n\n      exports.ChangeConnectorPointsRequestedEntity = ChangeConnectorPointsRequestedEntity;\n\n      var ChangeConnectorPointsEventArgs =\n      /** @class */\n      function (_super) {\n        __extends(ChangeConnectorPointsEventArgs, _super);\n\n        function ChangeConnectorPointsEventArgs(connector, oldPoints, points) {\n          var _this = _super.call(this) || this;\n\n          _this.connector = connector;\n          _this.oldPoints = oldPoints;\n          _this.points = points;\n          return _this;\n        }\n\n        return ChangeConnectorPointsEventArgs;\n      }(RequestedEntity_1.PermissionRequestEventArgs);\n\n      exports.ChangeConnectorPointsEventArgs = ChangeConnectorPointsEventArgs;\n      /***/\n    },\n    /* 363 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics249 = function extendStatics(d, b) {\n          _extendStatics249 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics249(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics249(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.BeforeChangeShapeTextEventArgs = exports.BeforeChangeShapeTextRequestedEntity = void 0;\n\n      var ModelOperationSettings_1 = __webpack_require__(16);\n\n      var RequestedEntity_1 = __webpack_require__(23);\n\n      var BeforeChangeShapeTextRequestedEntity =\n      /** @class */\n      function (_super) {\n        __extends(BeforeChangeShapeTextRequestedEntity, _super);\n\n        function BeforeChangeShapeTextRequestedEntity(apiController, shape) {\n          var _this = _super.call(this, apiController) || this;\n\n          _this.shape = shape;\n          return _this;\n        }\n\n        Object.defineProperty(BeforeChangeShapeTextRequestedEntity.prototype, \"operation\", {\n          get: function get() {\n            return ModelOperationSettings_1.DiagramModelOperation.BeforeChangeShapeText;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        BeforeChangeShapeTextRequestedEntity.prototype.createEventArgs = function () {\n          return new BeforeChangeShapeTextEventArgs(this.apiController.createNativeShape(this.shape));\n        };\n\n        Object.defineProperty(BeforeChangeShapeTextRequestedEntity.prototype, \"settingsKey\", {\n          get: function get() {\n            return \"changeShapeText\";\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(BeforeChangeShapeTextRequestedEntity.prototype, \"storageKey\", {\n          get: function get() {\n            return \"before\" + this.settingsKey + \"_\" + (this.shape && this.shape.key);\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        BeforeChangeShapeTextRequestedEntity.prototype.equals = function (other) {\n          if (other instanceof BeforeChangeShapeTextRequestedEntity) return this.shape === other.shape && this.shape.text === other.shape.text;\n          return false;\n        };\n\n        return BeforeChangeShapeTextRequestedEntity;\n      }(RequestedEntity_1.RequestedEntity);\n\n      exports.BeforeChangeShapeTextRequestedEntity = BeforeChangeShapeTextRequestedEntity;\n\n      var BeforeChangeShapeTextEventArgs =\n      /** @class */\n      function (_super) {\n        __extends(BeforeChangeShapeTextEventArgs, _super);\n\n        function BeforeChangeShapeTextEventArgs(shape) {\n          var _this = _super.call(this) || this;\n\n          _this.shape = shape;\n          return _this;\n        }\n\n        return BeforeChangeShapeTextEventArgs;\n      }(RequestedEntity_1.PermissionRequestEventArgs);\n\n      exports.BeforeChangeShapeTextEventArgs = BeforeChangeShapeTextEventArgs;\n      /***/\n    },\n    /* 364 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics250 = function extendStatics(d, b) {\n          _extendStatics250 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics250(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics250(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.BeforeChangeConnectorTextEventArgs = exports.BeforeChangeConnectorTextRequestedEntity = void 0;\n\n      var ModelOperationSettings_1 = __webpack_require__(16);\n\n      var RequestedEntity_1 = __webpack_require__(23);\n\n      var BeforeChangeConnectorTextRequestedEntity =\n      /** @class */\n      function (_super) {\n        __extends(BeforeChangeConnectorTextRequestedEntity, _super);\n\n        function BeforeChangeConnectorTextRequestedEntity(apiController, connector, position) {\n          var _this = _super.call(this, apiController) || this;\n\n          _this.connector = connector;\n          _this.position = position;\n          return _this;\n        }\n\n        Object.defineProperty(BeforeChangeConnectorTextRequestedEntity.prototype, \"operation\", {\n          get: function get() {\n            return ModelOperationSettings_1.DiagramModelOperation.BeforeChangeConnectorText;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        BeforeChangeConnectorTextRequestedEntity.prototype.createEventArgs = function () {\n          return new BeforeChangeConnectorTextEventArgs(this.apiController.createNativeConnector(this.connector), this.position, this.connector.texts.map(function (t) {\n            return t;\n          }).sort(function (a, b) {\n            return a.position - b.position;\n          }).indexOf(this.connector.texts.get(this.position)));\n        };\n\n        Object.defineProperty(BeforeChangeConnectorTextRequestedEntity.prototype, \"settingsKey\", {\n          get: function get() {\n            return \"changeConnectorText\";\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(BeforeChangeConnectorTextRequestedEntity.prototype, \"storageKey\", {\n          get: function get() {\n            return \"before\" + this.settingsKey + \"_\" + (this.connector && this.connector.key);\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        BeforeChangeConnectorTextRequestedEntity.prototype.equals = function (other) {\n          if (other instanceof BeforeChangeConnectorTextRequestedEntity) return this.connector === other.connector && this.position === other.position && this.connector.texts.get(this.position) === other.connector.texts.get(other.position);\n          return false;\n        };\n\n        return BeforeChangeConnectorTextRequestedEntity;\n      }(RequestedEntity_1.RequestedEntity);\n\n      exports.BeforeChangeConnectorTextRequestedEntity = BeforeChangeConnectorTextRequestedEntity;\n\n      var BeforeChangeConnectorTextEventArgs =\n      /** @class */\n      function (_super) {\n        __extends(BeforeChangeConnectorTextEventArgs, _super);\n\n        function BeforeChangeConnectorTextEventArgs(connector, position, index) {\n          var _this = _super.call(this) || this;\n\n          _this.connector = connector;\n          _this.position = position;\n          _this.index = index;\n          return _this;\n        }\n\n        return BeforeChangeConnectorTextEventArgs;\n      }(RequestedEntity_1.PermissionRequestEventArgs);\n\n      exports.BeforeChangeConnectorTextEventArgs = BeforeChangeConnectorTextEventArgs;\n      /***/\n    },\n    /* 365 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics251 = function extendStatics(d, b) {\n          _extendStatics251 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics251(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics251(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeShapeTextEventArgs = exports.ChangeShapeTextRequestedEntity = void 0;\n\n      var ModelOperationSettings_1 = __webpack_require__(16);\n\n      var RequestedEntity_1 = __webpack_require__(23);\n\n      var ChangeShapeTextRequestedEntity =\n      /** @class */\n      function (_super) {\n        __extends(ChangeShapeTextRequestedEntity, _super);\n\n        function ChangeShapeTextRequestedEntity(apiController, shape, text) {\n          var _this = _super.call(this, apiController) || this;\n\n          _this.shape = shape;\n          _this.text = text;\n          return _this;\n        }\n\n        Object.defineProperty(ChangeShapeTextRequestedEntity.prototype, \"operation\", {\n          get: function get() {\n            return ModelOperationSettings_1.DiagramModelOperation.ChangeShapeText;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ChangeShapeTextRequestedEntity.prototype.createEventArgs = function () {\n          return new ChangeShapeTextEventArgs(this.apiController.createNativeShape(this.shape), this.text);\n        };\n\n        Object.defineProperty(ChangeShapeTextRequestedEntity.prototype, \"settingsKey\", {\n          get: function get() {\n            return \"changeShapeText\";\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ChangeShapeTextRequestedEntity.prototype, \"storageKey\", {\n          get: function get() {\n            return this.settingsKey + \"_\" + (this.shape && this.shape.key);\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ChangeShapeTextRequestedEntity.prototype.equals = function (other) {\n          if (other instanceof ChangeShapeTextRequestedEntity) return this.shape === other.shape && this.text === other.text;\n          return false;\n        };\n\n        return ChangeShapeTextRequestedEntity;\n      }(RequestedEntity_1.RequestedEntity);\n\n      exports.ChangeShapeTextRequestedEntity = ChangeShapeTextRequestedEntity;\n\n      var ChangeShapeTextEventArgs =\n      /** @class */\n      function (_super) {\n        __extends(ChangeShapeTextEventArgs, _super);\n\n        function ChangeShapeTextEventArgs(shape, text) {\n          var _this = _super.call(this) || this;\n\n          _this.shape = shape;\n          _this.text = text;\n          return _this;\n        }\n\n        return ChangeShapeTextEventArgs;\n      }(RequestedEntity_1.PermissionRequestEventArgs);\n\n      exports.ChangeShapeTextEventArgs = ChangeShapeTextEventArgs;\n      /***/\n    },\n    /* 366 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics252 = function extendStatics(d, b) {\n          _extendStatics252 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics252(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics252(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ChangeConnectorTextEventArgs = exports.ChangeConnectorTextRequestedEntity = void 0;\n\n      var ModelOperationSettings_1 = __webpack_require__(16);\n\n      var RequestedEntity_1 = __webpack_require__(23);\n\n      var ChangeConnectorTextRequestedEntity =\n      /** @class */\n      function (_super) {\n        __extends(ChangeConnectorTextRequestedEntity, _super);\n\n        function ChangeConnectorTextRequestedEntity(apiController, connector, position, text) {\n          var _this = _super.call(this, apiController) || this;\n\n          _this.connector = connector;\n          _this.position = position;\n          _this.text = text;\n          return _this;\n        }\n\n        Object.defineProperty(ChangeConnectorTextRequestedEntity.prototype, \"operation\", {\n          get: function get() {\n            return ModelOperationSettings_1.DiagramModelOperation.ChangeConnectorText;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ChangeConnectorTextRequestedEntity.prototype.createEventArgs = function () {\n          return new ChangeConnectorTextEventArgs(this.apiController.createNativeConnector(this.connector), this.position, this.connector.texts.map(function (t) {\n            return t;\n          }).sort(function (a, b) {\n            return a.position - b.position;\n          }).indexOf(this.connector.texts.get(this.position)), this.text);\n        };\n\n        Object.defineProperty(ChangeConnectorTextRequestedEntity.prototype, \"settingsKey\", {\n          get: function get() {\n            return \"changeConnectorText\";\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ChangeConnectorTextRequestedEntity.prototype, \"storageKey\", {\n          get: function get() {\n            return this.settingsKey + \"_\" + (this.connector && this.connector.key);\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ChangeConnectorTextRequestedEntity.prototype.equals = function (other) {\n          if (other instanceof ChangeConnectorTextRequestedEntity) return this.connector === other.connector && this.position === other.position && this.text === other.text;\n          return false;\n        };\n\n        return ChangeConnectorTextRequestedEntity;\n      }(RequestedEntity_1.RequestedEntity);\n\n      exports.ChangeConnectorTextRequestedEntity = ChangeConnectorTextRequestedEntity;\n\n      var ChangeConnectorTextEventArgs =\n      /** @class */\n      function (_super) {\n        __extends(ChangeConnectorTextEventArgs, _super);\n\n        function ChangeConnectorTextEventArgs(connector, position, index, text) {\n          var _this = _super.call(this) || this;\n\n          _this.connector = connector;\n          _this.position = position;\n          _this.index = index;\n          _this.text = text;\n          return _this;\n        }\n\n        return ChangeConnectorTextEventArgs;\n      }(RequestedEntity_1.PermissionRequestEventArgs);\n\n      exports.ChangeConnectorTextEventArgs = ChangeConnectorTextEventArgs;\n      /***/\n    },\n    /* 367 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.PermissionsProviderStorage = void 0;\n\n      var Shape_1 = __webpack_require__(14);\n\n      var Connector_1 = __webpack_require__(7);\n\n      var PermissionsProviderStorage =\n      /** @class */\n      function () {\n        function PermissionsProviderStorage() {\n          this.interactingItems = {};\n          this.storedPermissions = {};\n        }\n\n        PermissionsProviderStorage.prototype.addInteractingItem = function (item, operation) {\n          var key = this.getInteractingItemKey(item, operation);\n          if (this.interactingItems[key] === undefined && (item instanceof Shape_1.Shape || item instanceof Connector_1.Connector)) this.interactingItems[key] = item.clone();\n        };\n\n        PermissionsProviderStorage.prototype.getInteractingItem = function (item, operation) {\n          var key = this.getInteractingItemKey(item, operation);\n          return this.interactingItems[key];\n        };\n\n        PermissionsProviderStorage.prototype.getInteractingItemCount = function () {\n          return Object.keys(this.interactingItems).length;\n        };\n\n        PermissionsProviderStorage.prototype.clearInteractingItems = function () {\n          this.interactingItems = {};\n        };\n\n        PermissionsProviderStorage.prototype.getInteractingItemKey = function (item, operation) {\n          return item.key + (operation !== undefined ? \"_\" + operation.toString() : \"\");\n        };\n\n        PermissionsProviderStorage.prototype.needStorePermissions = function () {\n          return this.storePermissions;\n        };\n\n        PermissionsProviderStorage.prototype.beginStorePermissions = function () {\n          this.storePermissions = true;\n        };\n\n        PermissionsProviderStorage.prototype.endStorePermissions = function () {\n          this.storePermissions = false;\n          this.storedPermissions = {};\n        };\n\n        PermissionsProviderStorage.prototype.isStoredPermissionsGranted = function () {\n          var keys = Object.keys(this.storedPermissions);\n          var granted = true;\n\n          for (var i = 0; i < keys.length; i++) {\n            granted = granted && this.storedPermissions[keys[i]];\n          }\n\n          return granted;\n        };\n\n        PermissionsProviderStorage.prototype.storePermission = function (key, allowed) {\n          this.storedPermissions[key] = allowed;\n        };\n\n        return PermissionsProviderStorage;\n      }();\n\n      exports.PermissionsProviderStorage = PermissionsProviderStorage;\n      /***/\n    },\n    /* 368 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics253 = function extendStatics(d, b) {\n          _extendStatics253 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics253(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics253(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ResizeShapeEventArgs = exports.ResizeShapeRequestedEntity = void 0;\n\n      var ModelOperationSettings_1 = __webpack_require__(16);\n\n      var RequestedEntity_1 = __webpack_require__(23);\n\n      var ResizeShapeRequestedEntity =\n      /** @class */\n      function (_super) {\n        __extends(ResizeShapeRequestedEntity, _super);\n\n        function ResizeShapeRequestedEntity(apiController, shape, oldSize, size) {\n          var _this = _super.call(this, apiController) || this;\n\n          _this.shape = shape;\n          _this.oldSize = oldSize;\n          _this.size = size;\n          return _this;\n        }\n\n        Object.defineProperty(ResizeShapeRequestedEntity.prototype, \"operation\", {\n          get: function get() {\n            return ModelOperationSettings_1.DiagramModelOperation.ResizeShape;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ResizeShapeRequestedEntity.prototype.createEventArgs = function () {\n          return new ResizeShapeEventArgs(this.apiController.createNativeShape(this.shape), this.apiController.convertSize(this.oldSize), this.apiController.convertSize(this.size));\n        };\n\n        Object.defineProperty(ResizeShapeRequestedEntity.prototype, \"settingsKey\", {\n          get: function get() {\n            return \"resizeShape\";\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ResizeShapeRequestedEntity.prototype, \"storageKey\", {\n          get: function get() {\n            return this.settingsKey + \"_\" + (this.shape && this.shape.key);\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ResizeShapeRequestedEntity.prototype.equals = function (other) {\n          if (other instanceof ResizeShapeRequestedEntity) return this.shape === other.shape && this.oldSize.equals(other.oldSize) && this.size.equals(other.size);\n          return false;\n        };\n\n        return ResizeShapeRequestedEntity;\n      }(RequestedEntity_1.RequestedEntity);\n\n      exports.ResizeShapeRequestedEntity = ResizeShapeRequestedEntity;\n\n      var ResizeShapeEventArgs =\n      /** @class */\n      function (_super) {\n        __extends(ResizeShapeEventArgs, _super);\n\n        function ResizeShapeEventArgs(shape, oldSize, size) {\n          var _this = _super.call(this) || this;\n\n          _this.shape = shape;\n          _this.oldSize = oldSize;\n          _this.size = size;\n          return _this;\n        }\n\n        return ResizeShapeEventArgs;\n      }(RequestedEntity_1.PermissionRequestEventArgs);\n\n      exports.ResizeShapeEventArgs = ResizeShapeEventArgs;\n      /***/\n    },\n    /* 369 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics254 = function extendStatics(d, b) {\n          _extendStatics254 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics254(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics254(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.MoveShapeEventArgs = exports.MoveShapeRequestedEntity = void 0;\n\n      var ModelOperationSettings_1 = __webpack_require__(16);\n\n      var RequestedEntity_1 = __webpack_require__(23);\n\n      var MoveShapeRequestedEntity =\n      /** @class */\n      function (_super) {\n        __extends(MoveShapeRequestedEntity, _super);\n\n        function MoveShapeRequestedEntity(apiController, shape, oldPosition, position) {\n          var _this = _super.call(this, apiController) || this;\n\n          _this.shape = shape;\n          _this.oldPosition = oldPosition;\n          _this.position = position;\n          return _this;\n        }\n\n        Object.defineProperty(MoveShapeRequestedEntity.prototype, \"operation\", {\n          get: function get() {\n            return ModelOperationSettings_1.DiagramModelOperation.MoveShape;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        MoveShapeRequestedEntity.prototype.createEventArgs = function () {\n          return new MoveShapeEventArgs(this.apiController.createNativeShape(this.shape), this.apiController.convertPoint(this.oldPosition), this.apiController.convertPoint(this.position));\n        };\n\n        Object.defineProperty(MoveShapeRequestedEntity.prototype, \"settingsKey\", {\n          get: function get() {\n            return \"moveShape\";\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(MoveShapeRequestedEntity.prototype, \"storageKey\", {\n          get: function get() {\n            return this.settingsKey + \"_\" + (this.shape && this.shape.key);\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        MoveShapeRequestedEntity.prototype.equals = function (other) {\n          if (other instanceof MoveShapeRequestedEntity) return this.shape === other.shape && this.oldPosition.equals(other.oldPosition) && this.position.equals(other.position);\n          return false;\n        };\n\n        return MoveShapeRequestedEntity;\n      }(RequestedEntity_1.RequestedEntity);\n\n      exports.MoveShapeRequestedEntity = MoveShapeRequestedEntity;\n\n      var MoveShapeEventArgs =\n      /** @class */\n      function (_super) {\n        __extends(MoveShapeEventArgs, _super);\n\n        function MoveShapeEventArgs(shape, oldPosition, position) {\n          var _this = _super.call(this) || this;\n\n          _this.shape = shape;\n          _this.oldPosition = oldPosition;\n          _this.position = position;\n          return _this;\n        }\n\n        return MoveShapeEventArgs;\n      }(RequestedEntity_1.PermissionRequestEventArgs);\n\n      exports.MoveShapeEventArgs = MoveShapeEventArgs;\n      /***/\n    },\n    /* 370 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ConnectorRoutingModel = exports.ConnectorRoutingPenaltyDescription = void 0;\n\n      var Settings_1 = __webpack_require__(27);\n\n      var Shape_1 = __webpack_require__(14);\n\n      var Connector_1 = __webpack_require__(7);\n\n      var ConnectorProperties_1 = __webpack_require__(31);\n\n      var RightAngleConnectorRoutingStrategy_1 = __webpack_require__(371);\n\n      var ConnectorRoutingPenaltyDescription =\n      /** @class */\n      function () {\n        function ConnectorRoutingPenaltyDescription() {\n          this.shape = 20.0;\n          this.margin = 2.0;\n          this.turnBack = 20.0;\n          this.turnLeft = 3.1;\n          this.turnRight = 3.0;\n        }\n\n        return ConnectorRoutingPenaltyDescription;\n      }();\n\n      exports.ConnectorRoutingPenaltyDescription = ConnectorRoutingPenaltyDescription;\n\n      var ConnectorRoutingModel =\n      /** @class */\n      function () {\n        function ConnectorRoutingModel() {\n          this.connectorRoutingMode = Settings_1.ConnectorRoutingMode.AllShapesOnly;\n          this.shapeMargins = Connector_1.Connector.minOffset;\n          this.shouldReverseConnections = true;\n          this.shouldResizeConnections = true;\n          this.penaltyDescription = new ConnectorRoutingPenaltyDescription();\n        }\n\n        ConnectorRoutingModel.prototype.initialize = function (model) {\n          this.model = model;\n        };\n\n        ConnectorRoutingModel.prototype.createStrategy = function (option) {\n          if (this.model !== undefined && this.connectorRoutingMode !== Settings_1.ConnectorRoutingMode.None && option === ConnectorProperties_1.ConnectorLineOption.Orthogonal) return new RightAngleConnectorRoutingStrategy_1.RightAngleConnectorRoutingStrategy(this);\n          return undefined;\n        };\n\n        ConnectorRoutingModel.prototype.getItems = function (beginConnectorShape, endConnectorShape) {\n          return this.getShapes(beginConnectorShape, endConnectorShape);\n        };\n\n        ConnectorRoutingModel.prototype.notifyConnectorRoutingModeChanged = function (connectorRoutingMode) {\n          this.connectorRoutingMode = connectorRoutingMode;\n        };\n\n        ConnectorRoutingModel.prototype.getShapes = function (beginConnectorShape, endConnectorShape) {\n          if (this.model === undefined || this.connectorRoutingMode === undefined || this.connectorRoutingMode === Settings_1.ConnectorRoutingMode.None) return [];\n          if (this.connectorRoutingMode === Settings_1.ConnectorRoutingMode.AllShapesOnly) return this.model.items.filter(function (i) {\n            return i instanceof Shape_1.Shape;\n          });\n          return this.getConnectorShapes(beginConnectorShape, endConnectorShape);\n        };\n\n        ConnectorRoutingModel.prototype.getConnectorShapes = function (beginConnectorShape, endConnectorShape) {\n          var result = [];\n          if (beginConnectorShape) result.push(beginConnectorShape);\n          if (endConnectorShape && beginConnectorShape !== endConnectorShape) result.push(endConnectorShape);\n          return result;\n        };\n\n        return ConnectorRoutingModel;\n      }();\n\n      exports.ConnectorRoutingModel = ConnectorRoutingModel;\n      /***/\n    },\n    /* 371 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.RightAngleConnectorRoutingStrategy = void 0;\n\n      var segment_1 = __webpack_require__(34);\n\n      var ConnectorRenderPoint_1 = __webpack_require__(28);\n\n      var RightAngleConnectorRoutingMathOperations_1 = __webpack_require__(62);\n\n      var RightAngleConnectorRoutingContext_1 = __webpack_require__(372);\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var RightAngleConnectorRoutingStrategy =\n      /** @class */\n      function () {\n        function RightAngleConnectorRoutingStrategy(model) {\n          this.model = model;\n        }\n\n        RightAngleConnectorRoutingStrategy.prototype.createRenderPoints = function (points, supportRenderPoints, beginConnectionShape, endConnectionShape, beginConnectionPointIndex, endConnectionPointIndex, container) {\n          if (supportRenderPoints.length > 1) {\n            var context = new RightAngleConnectorRoutingContext_1.RightAngleConnectorRoutingContext(this.model, points, supportRenderPoints, beginConnectionShape, endConnectionShape, beginConnectionPointIndex, endConnectionPointIndex);\n            context.initialize(container);\n            if (context.shouldCreateRenderPoints) return this.createRenderPointsCore(context);\n          }\n        };\n\n        RightAngleConnectorRoutingStrategy.prototype.clone = function () {\n          return new RightAngleConnectorRoutingStrategy(this.model);\n        };\n\n        RightAngleConnectorRoutingStrategy.prototype.onAddPoint = function (points, pointIndex, point, oldRenderPoints) {\n          var renderPoints = oldRenderPoints.map(function (p) {\n            return new ConnectorRenderPoint_1.ConnectorRenderPoint(p.x, p.y, p.pointIndex);\n          });\n          var renderPointIndex = ModelUtils_1.ModelUtils.findFirstPointIndex(renderPoints, function (p) {\n            return p.equals(point);\n          });\n\n          if (renderPointIndex === 0) {\n            renderPoints.splice(1, 0, new ConnectorRenderPoint_1.ConnectorRenderPoint(point.x, point.y, pointIndex));\n            return ModelUtils_1.ModelUtils.validateRenderPointIndexes(points, renderPoints, 2);\n          }\n\n          var lastRenderPointIndex = renderPoints.length - 1;\n\n          if (renderPointIndex === lastRenderPointIndex) {\n            renderPoints.splice(lastRenderPointIndex, 0, new ConnectorRenderPoint_1.ConnectorRenderPoint(point.x, point.y, pointIndex));\n            renderPoints[lastRenderPointIndex + 1].pointIndex = pointIndex + 1;\n            return renderPoints;\n          }\n\n          if (renderPointIndex > 0) {\n            var oldRenderPoint = renderPoints[renderPointIndex];\n            renderPoints[renderPointIndex] = new ConnectorRenderPoint_1.ConnectorRenderPoint(oldRenderPoint.x, oldRenderPoint.y, pointIndex, oldRenderPoint.skipped);\n            return ModelUtils_1.ModelUtils.validateRenderPointIndexes(points, renderPoints, renderPointIndex + 1);\n          }\n\n          var firstSegment = new segment_1.Segment(renderPoints[0], renderPoints[1]);\n          var newRenderPoint = new ConnectorRenderPoint_1.ConnectorRenderPoint(point.x, point.y);\n\n          if (firstSegment.containsPoint(newRenderPoint)) {\n            renderPoints.splice(1, 0, new ConnectorRenderPoint_1.ConnectorRenderPoint(newRenderPoint.x, newRenderPoint.y, -1));\n            renderPoints.splice(2, 0, new ConnectorRenderPoint_1.ConnectorRenderPoint(newRenderPoint.x, newRenderPoint.y, pointIndex));\n            return ModelUtils_1.ModelUtils.validateRenderPointIndexes(points, renderPoints, 3);\n          }\n\n          var lastSegment = new segment_1.Segment(renderPoints[lastRenderPointIndex - 1], renderPoints[lastRenderPointIndex]);\n\n          if (lastSegment.containsPoint(newRenderPoint)) {\n            renderPoints.splice(lastRenderPointIndex, 0, new ConnectorRenderPoint_1.ConnectorRenderPoint(newRenderPoint.x, newRenderPoint.y, pointIndex));\n            renderPoints.splice(lastRenderPointIndex + 1, 0, new ConnectorRenderPoint_1.ConnectorRenderPoint(newRenderPoint.x, newRenderPoint.y, -1));\n            renderPoints[lastRenderPointIndex + 2].pointIndex = pointIndex + 1;\n            return renderPoints;\n          }\n\n          return oldRenderPoints;\n        };\n\n        RightAngleConnectorRoutingStrategy.prototype.onDeletePoint = function (points, pointIndex, oldRenderPoints) {\n          var renderPoints = oldRenderPoints.map(function (p) {\n            return new ConnectorRenderPoint_1.ConnectorRenderPoint(p.x, p.y, p.pointIndex);\n          });\n          var renderPointIndex = this.getRenderPointIndexByPointIndex(renderPoints, pointIndex);\n\n          if (renderPointIndex === 1) {\n            var previuosRenderPoint = renderPoints[0];\n            var currentRenderPoint_1 = renderPoints[1];\n\n            if (previuosRenderPoint.equals(currentRenderPoint_1)) {\n              renderPoints.splice(1, 1);\n              return ModelUtils_1.ModelUtils.validateRenderPointIndexes(points, renderPoints, 1);\n            }\n\n            renderPoints[1] = new ConnectorRenderPoint_1.ConnectorRenderPoint(currentRenderPoint_1.x, currentRenderPoint_1.y, -1, currentRenderPoint_1.skipped);\n            return ModelUtils_1.ModelUtils.validateRenderPointIndexes(points, renderPoints, 2);\n          }\n\n          if (renderPointIndex === 2) {\n            var previuosRenderPoint = renderPoints[1];\n            var currentRenderPoint_2 = renderPoints[2];\n\n            if (previuosRenderPoint.equals(currentRenderPoint_2)) {\n              renderPoints.splice(1, 2);\n              return ModelUtils_1.ModelUtils.validateRenderPointIndexes(points, renderPoints, 1);\n            }\n\n            renderPoints[2] = new ConnectorRenderPoint_1.ConnectorRenderPoint(currentRenderPoint_2.x, currentRenderPoint_2.y, -1, currentRenderPoint_2.skipped);\n            return ModelUtils_1.ModelUtils.validateRenderPointIndexes(points, renderPoints, 3);\n          }\n\n          var lastRenderPointIndex = renderPoints.length - 1;\n\n          if (renderPointIndex === lastRenderPointIndex - 1) {\n            var currentRenderPoint_3 = renderPoints[lastRenderPointIndex - 1];\n            var nextRenderPoint = renderPoints[lastRenderPointIndex];\n\n            if (currentRenderPoint_3.equals(nextRenderPoint)) {\n              renderPoints.splice(lastRenderPointIndex - 1, 1);\n              return ModelUtils_1.ModelUtils.validateRenderPointIndexes(points, renderPoints, lastRenderPointIndex - 1);\n            }\n\n            renderPoints[lastRenderPointIndex - 1] = new ConnectorRenderPoint_1.ConnectorRenderPoint(currentRenderPoint_3.x, currentRenderPoint_3.y, -1, currentRenderPoint_3.skipped);\n            return ModelUtils_1.ModelUtils.validateRenderPointIndexes(points, renderPoints, lastRenderPointIndex);\n          }\n\n          if (renderPointIndex === lastRenderPointIndex - 2) {\n            var currentRenderPoint_4 = renderPoints[lastRenderPointIndex - 2];\n            var nextRenderPoint = renderPoints[lastRenderPointIndex - 1];\n\n            if (currentRenderPoint_4.equals(nextRenderPoint)) {\n              renderPoints.splice(lastRenderPointIndex - 2, 2);\n              return ModelUtils_1.ModelUtils.validateRenderPointIndexes(points, renderPoints, lastRenderPointIndex - 2);\n            }\n\n            renderPoints[lastRenderPointIndex - 2] = new ConnectorRenderPoint_1.ConnectorRenderPoint(currentRenderPoint_4.x, currentRenderPoint_4.y, -1, currentRenderPoint_4.skipped);\n            return ModelUtils_1.ModelUtils.validateRenderPointIndexes(points, renderPoints, lastRenderPointIndex - 1);\n          }\n\n          var currentRenderPoint = renderPoints[renderPointIndex];\n          renderPoints[renderPointIndex] = new ConnectorRenderPoint_1.ConnectorRenderPoint(currentRenderPoint.x, currentRenderPoint.y, -1, currentRenderPoint.skipped);\n          return ModelUtils_1.ModelUtils.validateRenderPointIndexes(points, renderPoints, renderPointIndex + 1);\n        };\n\n        RightAngleConnectorRoutingStrategy.prototype.onMovePoint = function (points, pointIndex, point, oldRenderPoints) {\n          if (pointIndex === 0 || pointIndex === points.length - 1) return oldRenderPoints;\n          var renderPoints = oldRenderPoints.map(function (p) {\n            return new ConnectorRenderPoint_1.ConnectorRenderPoint(p.x, p.y, p.pointIndex);\n          });\n          var renderPointIndex = this.getRenderPointIndexByPointIndex(renderPoints, pointIndex);\n\n          if (renderPointIndex >= 0) {\n            var oldRenderPoint = renderPoints[renderPointIndex];\n            renderPoints[renderPointIndex] = new ConnectorRenderPoint_1.ConnectorRenderPoint(point.x, point.y, pointIndex, oldRenderPoint.skipped);\n          }\n\n          RightAngleConnectorRoutingMathOperations_1.RightAngleConnectorRoutingMathOperations.skipUnnecessaryPoints(renderPoints);\n          return renderPoints;\n        };\n\n        RightAngleConnectorRoutingStrategy.prototype.createRenderPointsCore = function (context) {\n          var result = [];\n          var currentIndex = -1;\n          var currentRenderSegment;\n          var currentStartCustomPointIndex = -1;\n          context.setup();\n          var renderSegments = context.renderSegments;\n          var endPoint = renderSegments[renderSegments.length - 1].endPoint;\n          var points = context.points;\n\n          do {\n            this.registerCustomPoints(result, points, currentStartCustomPointIndex + 2, renderSegments[currentIndex + 1].startPointIndex - 1);\n            currentIndex++;\n            currentRenderSegment = renderSegments[currentIndex];\n            currentStartCustomPointIndex = currentRenderSegment.startPointIndex;\n            this.registerRenderPoints(result, context.createRoutedPoints(currentRenderSegment.startInfo, currentRenderSegment.endInfo, currentRenderSegment.createProhibitedSegments()), currentStartCustomPointIndex);\n          } while (!currentRenderSegment.endPoint.equals(endPoint));\n\n          context.validateRenderPoints(result);\n          return result;\n        };\n\n        RightAngleConnectorRoutingStrategy.prototype.getRenderPointIndexByPointIndex = function (points, index) {\n          return ModelUtils_1.ModelUtils.findFirstPointIndex(points, function (p) {\n            return p.pointIndex === index;\n          });\n        };\n\n        RightAngleConnectorRoutingStrategy.prototype.registerRenderPoints = function (resultPath, routedPoints, beginPointIndex) {\n          var _this = this;\n\n          routedPoints.forEach(function (p, i) {\n            var pointIndex = i === 0 ? beginPointIndex : i === routedPoints.length - 1 ? beginPointIndex + 1 : -1;\n\n            _this.registerPoint(resultPath, p, pointIndex);\n          });\n        };\n\n        RightAngleConnectorRoutingStrategy.prototype.registerCustomPoints = function (resultPath, points, startIndex, endIndex) {\n          for (var i = startIndex; i <= endIndex; i++) {\n            this.registerPoint(resultPath, points[i], i);\n          }\n        };\n\n        RightAngleConnectorRoutingStrategy.prototype.registerPoint = function (resultPath, point, pointIndex) {\n          resultPath.push(new ConnectorRenderPoint_1.ConnectorRenderPoint(point.x, point.y, pointIndex));\n        };\n\n        return RightAngleConnectorRoutingStrategy;\n      }();\n\n      exports.RightAngleConnectorRoutingStrategy = RightAngleConnectorRoutingStrategy;\n      /***/\n    },\n    /* 372 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.RightAngleConnectorRoutingContext = exports.IntersectingItemsByPointsContext = exports.CuttingItemsContext = void 0;\n\n      var point_1 = __webpack_require__(1);\n\n      var segment_1 = __webpack_require__(34);\n\n      var DiagramItem_1 = __webpack_require__(9);\n\n      var RightAngleConnectorRoutingMathOperations_1 = __webpack_require__(62);\n\n      var ConnectorRenderSegment_1 = __webpack_require__(373);\n\n      var vector_1 = __webpack_require__(56);\n\n      var RoutingGrid_1 = __webpack_require__(375);\n\n      var ModelUtils_1 = __webpack_require__(5);\n\n      var AStarMetrics_1 = __webpack_require__(113);\n\n      var AStarContext_1 = __webpack_require__(376);\n\n      var AStarCalculator_1 = __webpack_require__(380);\n\n      var CuttingItemsContext =\n      /** @class */\n      function () {\n        function CuttingItemsContext() {\n          this.cuttingItemKeys = [];\n        }\n\n        Object.defineProperty(CuttingItemsContext.prototype, \"isEmpty\", {\n          get: function get() {\n            return this.cuttingItemKeys.length === 0;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        CuttingItemsContext.prototype.registerShape = function (key, rect, segments) {\n          if (RightAngleConnectorRoutingMathOperations_1.RightAngleConnectorRoutingMathOperations.isRectangleCut(segments, rect)) {\n            this.cuttingItemKeys.push(key);\n            return true;\n          }\n\n          return false;\n        };\n\n        return CuttingItemsContext;\n      }();\n\n      exports.CuttingItemsContext = CuttingItemsContext;\n\n      var IntersectingItemsByPointsContext =\n      /** @class */\n      function () {\n        function IntersectingItemsByPointsContext() {\n          this.items = {};\n        }\n\n        IntersectingItemsByPointsContext.prototype.getOrAddItems = function (point, getItems) {\n          if (point) {\n            var key = point.toString();\n            var item = this.items[key];\n            if (item !== undefined) return item.items;\n\n            if (getItems) {\n              var items = getItems(point);\n              this.items[key] = {\n                point: point,\n                items: items\n              };\n              return items;\n            }\n          }\n\n          return undefined;\n        };\n\n        return IntersectingItemsByPointsContext;\n      }();\n\n      exports.IntersectingItemsByPointsContext = IntersectingItemsByPointsContext;\n\n      var RightAngleConnectorRoutingContext =\n      /** @class */\n      function () {\n        function RightAngleConnectorRoutingContext(routingModel, points, supportRenderPoints, beginConnectionShape, endConnectionShape, beginConnectionPointIndex, endConnectionPointIndex) {\n          this.routingModel = routingModel;\n          this.points = points;\n          this.supportRenderPoints = supportRenderPoints;\n          this.beginConnectionShape = beginConnectionShape;\n          this.endConnectionShape = endConnectionShape;\n          this.beginConnectionSide = this.getConnectionSide(this.beginConnectionShape, beginConnectionPointIndex, this.beginPoint);\n          this.endConnectionSide = this.getConnectionSide(this.endConnectionShape, endConnectionPointIndex, this.endPoint);\n          this.ignorableItemKeys = {};\n          this.cuttingShapesContext = new CuttingItemsContext();\n          this.intersectedItemsByPointsContext = new IntersectingItemsByPointsContext();\n          this.isInvalidRenderSegments = true;\n        }\n\n        Object.defineProperty(RightAngleConnectorRoutingContext.prototype, \"shapeMargins\", {\n          get: function get() {\n            return this.routingModel.shapeMargins;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(RightAngleConnectorRoutingContext.prototype, \"beginPoint\", {\n          get: function get() {\n            return this.points[0];\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(RightAngleConnectorRoutingContext.prototype, \"endPoint\", {\n          get: function get() {\n            return this.points[this.points.length - 1];\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(RightAngleConnectorRoutingContext.prototype, \"hasIntersecting\", {\n          get: function get() {\n            return !this.cuttingShapesContext.isEmpty;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(RightAngleConnectorRoutingContext.prototype, \"shouldCreateRenderPoints\", {\n          get: function get() {\n            return this.isInvalidRenderSegments || !this.isSmallPath && (this.hasIntersecting || this.isReversedStartConnection || this.isReversedEndConnection);\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(RightAngleConnectorRoutingContext.prototype, \"beginPathPoint\", {\n          get: function get() {\n            return this.beginConnectionSegment instanceof segment_1.Segment ? this.beginConnectionSegment.startPoint : this.beginConnectionSegment;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(RightAngleConnectorRoutingContext.prototype, \"endPathPoint\", {\n          get: function get() {\n            return this.endConnectionSegment instanceof segment_1.Segment ? this.endConnectionSegment.endPoint : this.endConnectionSegment;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(RightAngleConnectorRoutingContext.prototype, \"isReversedStartConnection\", {\n          get: function get() {\n            if (!this.beginConnectionShape || this.beginConnectionSide === DiagramItem_1.ConnectionPointSide.Undefined) return false;\n            var beginConnectionSegment = this.beginConnectionSegment;\n            return !(beginConnectionSegment instanceof point_1.Point) && this.isReversedConnectionSegment(this.supportSegments[0], beginConnectionSegment);\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(RightAngleConnectorRoutingContext.prototype, \"isReversedEndConnection\", {\n          get: function get() {\n            if (!this.endConnectionShape || this.endConnectionSide === DiagramItem_1.ConnectionPointSide.Undefined) return false;\n            var endConnectionSegment = this.endConnectionSegment;\n            return !(endConnectionSegment instanceof point_1.Point) && this.isReversedConnectionSegment(this.supportSegments[this.supportSegments.length - 1], endConnectionSegment);\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        RightAngleConnectorRoutingContext.prototype.isReversedConnectionSegment = function (supportSegment, connectionSegment) {\n          return vector_1.Vector.scalarProduct(vector_1.Vector.fromSegment(supportSegment), vector_1.Vector.fromPoints(connectionSegment.startPoint, connectionSegment.endPoint)) <= 0;\n        };\n\n        Object.defineProperty(RightAngleConnectorRoutingContext.prototype, \"isSmallPath\", {\n          get: function get() {\n            var doubleMargins = 2 * this.routingModel.shapeMargins;\n            return Math.abs(this.beginPathPoint.x - this.endPathPoint.x) < doubleMargins && Math.abs(this.beginPathPoint.y - this.endPathPoint.y) < doubleMargins;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        RightAngleConnectorRoutingContext.prototype.initialize = function (container) {\n          this.processContainers(container);\n          this.processSupportSegments();\n          this.processIntersection();\n          this.processConnections();\n          this.processRenderSegments();\n        };\n\n        RightAngleConnectorRoutingContext.prototype.setup = function () {\n          this.processRoutingGrid();\n          this.processRoutingMetrics();\n        };\n\n        RightAngleConnectorRoutingContext.prototype.createRoutedPoints = function (startInfo, targetInfo, prohibitedSegments) {\n          var startPathPoint = startInfo instanceof point_1.Point ? startInfo : startInfo.endPoint;\n          var targetPathPoint = targetInfo instanceof point_1.Point ? targetInfo : targetInfo.startPoint;\n          var context = this.createAStarContext(startPathPoint, targetPathPoint, prohibitedSegments);\n          AStarCalculator_1.AStarCalculator.calculate(context);\n          var result = context.path;\n          this.addConnectionRoutedPoints(result, startInfo, targetInfo);\n          RightAngleConnectorRoutingMathOperations_1.RightAngleConnectorRoutingMathOperations.unionPoints(result);\n          return result;\n        };\n\n        RightAngleConnectorRoutingContext.prototype.getIntersectedItems = function (point, predicate) {\n          var _this = this;\n\n          return this.intersectedItemsByPointsContext.getOrAddItems(point, function (p) {\n            return _this.routingModel.getItems(_this.beginConnectionShape, _this.endConnectionShape).filter(function (s) {\n              return !_this.isIgnorableItem(s) && predicate(p, s);\n            });\n          });\n        };\n\n        RightAngleConnectorRoutingContext.prototype.validateRenderPoints = function (result) {\n          if (this.isInvalidRenderSegments) {\n            RightAngleConnectorRoutingMathOperations_1.RightAngleConnectorRoutingMathOperations.unionPoints(result);\n            ModelUtils_1.ModelUtils.validateRenderPointIndexes(this.points, result, 0);\n          }\n\n          RightAngleConnectorRoutingMathOperations_1.RightAngleConnectorRoutingMathOperations.skipUnnecessaryPoints(result);\n        };\n\n        RightAngleConnectorRoutingContext.prototype.processContainers = function (container) {\n          if (container) this.registerIgnorableShape(container);\n\n          if (this.beginConnectionShape) {\n            var beginShapeContainer = this.beginConnectionShape.container;\n            if (beginShapeContainer) this.registerIgnorableShape(beginShapeContainer);\n          }\n\n          if (this.endConnectionShape) {\n            var endShapeContainer = this.endConnectionShape.container;\n            if (endShapeContainer) this.registerIgnorableShape(endShapeContainer);\n          }\n        };\n\n        RightAngleConnectorRoutingContext.prototype.processSupportSegments = function () {\n          this.supportSegments = this.createSupportSegments();\n        };\n\n        RightAngleConnectorRoutingContext.prototype.processIntersection = function () {\n          var _this = this;\n\n          var shapes = this.routingModel.getItems(this.beginConnectionShape, this.endConnectionShape);\n          if (shapes) shapes.forEach(function (s) {\n            var key = s.key;\n            var rect = s.rectangle;\n\n            if (!_this.cuttingShapesContext.registerShape(key, rect, _this.supportSegments)) {\n              if (!_this.isConnectedByStart(s) && rect.containsPoint(_this.beginPoint) || !_this.isConnectedByEnd(s) && rect.containsPoint(_this.endPoint)) _this.registerIgnorableShape(s);\n            } else if (_this.ignorableItemKeys[key] !== undefined) delete _this.ignorableItemKeys[key];\n          });\n        };\n\n        RightAngleConnectorRoutingContext.prototype.processConnections = function () {\n          var beginShapeContainsEndConnection = false;\n          var endShapeContainsBeginConnection = false;\n\n          if (this.beginConnectionShape !== this.endConnectionShape) {\n            beginShapeContainsEndConnection = this.shapeContainsOtherConnection(this.beginConnectionShape, this.endConnectionShape, this.endPoint);\n            endShapeContainsBeginConnection = this.shapeContainsOtherConnection(this.endConnectionShape, this.beginConnectionShape, this.beginPoint);\n            if (beginShapeContainsEndConnection) this.registerIgnorableShape(this.beginConnectionShape);\n            if (endShapeContainsBeginConnection) this.registerIgnorableShape(this.endConnectionShape);\n          }\n\n          var shapeMargins = this.routingModel.shapeMargins;\n          this.beginConnectionSegment = this.createBeginConnectionSegment(shapeMargins, beginShapeContainsEndConnection);\n          this.endConnectionSegment = this.createEndConnectionSegment(shapeMargins, endShapeContainsBeginConnection);\n        };\n\n        RightAngleConnectorRoutingContext.prototype.processRenderSegments = function () {\n          this.isInvalidRenderSegments = false;\n          this.renderSegments = this.createRenderSegments();\n\n          for (var i = 0; i < this.renderSegments.length - 1; i++) {\n            var renderSegment = this.renderSegments[i];\n            var nextRenderSegment = this.renderSegments[i + 1];\n\n            if (renderSegment.endPoint.equals(nextRenderSegment.startPoint)) {\n              this.isInvalidRenderSegments = true;\n              return;\n            }\n          }\n        };\n\n        RightAngleConnectorRoutingContext.prototype.createGridPoints = function () {\n          var result = [];\n          this.renderSegments.forEach(function (s) {\n            return s.createGridPoints().forEach(function (p) {\n              return result.push(p);\n            });\n          });\n          return result;\n        };\n\n        RightAngleConnectorRoutingContext.prototype.processRoutingGrid = function () {\n          this.routingGrid = this.createGrid();\n        };\n\n        RightAngleConnectorRoutingContext.prototype.processRoutingMetrics = function () {\n          this.metrics = this.createAStarMetrics();\n        };\n\n        RightAngleConnectorRoutingContext.prototype.createAStarMetrics = function () {\n          return new AStarMetrics_1.AStarMetrics(new AStarMetrics_1.TurnDirectionMetrics(this.routingModel.penaltyDescription), new AStarMetrics_1.IntersectedShapesMetrics(new AStarMetrics_1.IntersectedShapeMetrics(this.routingModel.penaltyDescription, this.routingModel.shapeMargins)));\n        };\n\n        RightAngleConnectorRoutingContext.prototype.createAStarContext = function (start, target, prohibitedSegments) {\n          return new AStarContext_1.AStarContext(this, start, target, prohibitedSegments, this.routingGrid, this.metrics);\n        };\n\n        RightAngleConnectorRoutingContext.prototype.addConnectionRoutedPoints = function (path, startInfo, targetInfo) {\n          if (startInfo instanceof segment_1.Segment) path.splice(0, 0, startInfo.startPoint);\n          if (targetInfo instanceof segment_1.Segment) path.push(targetInfo.endPoint);\n        };\n\n        RightAngleConnectorRoutingContext.prototype.createSupportSegments = function () {\n          var _this = this;\n\n          return this.supportRenderPoints.length <= 1 ? [] : RightAngleConnectorRoutingMathOperations_1.RightAngleConnectorRoutingMathOperations.createSegments(this.supportRenderPoints).filter(function (s) {\n            return !_this.isCustomSegment(s, _this.supportRenderPoints[0], _this.supportRenderPoints[_this.supportRenderPoints.length - 1]);\n          });\n        };\n\n        RightAngleConnectorRoutingContext.prototype.isCustomSegment = function (segment, startSegmentsPoint, endSegmentsPoint) {\n          var startRenderPoint = segment.startPoint;\n          if (startRenderPoint.equals(startSegmentsPoint)) return false;\n          var endRenderPoint = segment.endPoint;\n          if (endRenderPoint.equals(endSegmentsPoint)) return false;\n          return endRenderPoint.pointIndex - startRenderPoint.pointIndex === 1;\n        };\n\n        RightAngleConnectorRoutingContext.prototype.createRenderSegments = function () {\n          var _this = this;\n\n          var unionRoutingSegments = RightAngleConnectorRoutingMathOperations_1.RightAngleConnectorRoutingMathOperations.createUnionSegments(this.supportSegments, function (ep, sp) {\n            return _this.shouldCreateSegment(ep, sp);\n          });\n          var lastIndex = unionRoutingSegments.length - 1;\n          return unionRoutingSegments.map(function (s, i) {\n            return new ConnectorRenderSegment_1.ConnectorRenderSegment(i > 0 ? new point_1.Point(s.startPoint.x, s.startPoint.y) : _this.beginConnectionSegment, i < lastIndex ? new point_1.Point(s.endPoint.x, s.endPoint.y) : _this.endConnectionSegment, s.startPoint.pointIndex, _this.createPreviousCustomSegment(s.startPoint));\n          });\n        };\n\n        RightAngleConnectorRoutingContext.prototype.createPreviousCustomSegment = function (startRoutingPoint) {\n          var previuosPointIndex = startRoutingPoint.pointIndex - 1;\n          return previuosPointIndex >= 0 ? new segment_1.Segment(this.points[previuosPointIndex].clone(), new point_1.Point(startRoutingPoint.x, startRoutingPoint.y)) : undefined;\n        };\n\n        RightAngleConnectorRoutingContext.prototype.shouldCreateSegment = function (prevEndPoint, startNextPoint) {\n          return !prevEndPoint.equals(startNextPoint) || startNextPoint.pointIndex > 0;\n        };\n\n        RightAngleConnectorRoutingContext.prototype.isPathNormal = function (connectionSide) {\n          if (connectionSide === DiagramItem_1.ConnectionPointSide.Undefined) return true;\n          return RightAngleConnectorRoutingMathOperations_1.RightAngleConnectorRoutingMathOperations.isSegmentNormal(new segment_1.Segment(this.beginPoint, this.endPoint), connectionSide === DiagramItem_1.ConnectionPointSide.East || connectionSide === DiagramItem_1.ConnectionPointSide.West);\n        };\n\n        RightAngleConnectorRoutingContext.prototype.registerIgnorableShape = function (shape) {\n          this.ignorableItemKeys[shape.key] = true;\n        };\n\n        RightAngleConnectorRoutingContext.prototype.isConnectedByStart = function (shape) {\n          return this.beginConnectionShape && this.beginConnectionShape.key === shape.key && this.beginConnectionSide !== DiagramItem_1.ConnectionPointSide.Undefined;\n        };\n\n        RightAngleConnectorRoutingContext.prototype.isConnectedByEnd = function (shape) {\n          return this.endConnectionShape && this.endConnectionShape.key === shape.key && this.endConnectionSide !== DiagramItem_1.ConnectionPointSide.Undefined;\n        };\n\n        RightAngleConnectorRoutingContext.prototype.getConnectionSide = function (shape, index, point) {\n          return shape ? shape.getConnectionPointSideByIndex(index, point) : DiagramItem_1.ConnectionPointSide.Undefined;\n        };\n\n        RightAngleConnectorRoutingContext.prototype.shapeContainsOtherConnection = function (targetShape, otherShape, otherPoint) {\n          if (!targetShape) return false;\n          var targetRectangle = targetShape.rectangle;\n          return targetRectangle.containsPoint(otherPoint) && (!otherShape || !otherShape.rectangle.equals(targetRectangle));\n        };\n\n        RightAngleConnectorRoutingContext.prototype.createBeginConnectionSegment = function (offset, beginShapeContainsEndConnection) {\n          if (this.beginConnectionSide === DiagramItem_1.ConnectionPointSide.Undefined) return this.createBeginConnectionSegmentCore(offset);\n\n          if (!beginShapeContainsEndConnection || !this.routingModel.shouldReverseConnections) {\n            var segment = this.createBeginConnectionSegmentCore(offset);\n            if (segment instanceof point_1.Point || !this.routingModel.shouldResizeConnections) return segment;\n            var startPoint = segment.startPoint;\n            var endPoint = segment.endPoint;\n            var currentOffset = offset;\n\n            while (this.hasIntersectedItemsByPoint(endPoint, startPoint, this.beginConnectionShape)) {\n              currentOffset = currentOffset / 2;\n              segment = this.createBeginConnectionSegmentCore(currentOffset);\n              endPoint = segment.endPoint;\n            }\n\n            return segment;\n          }\n\n          if (!this.endConnectionShape) return this.createBeginConnectionSegmentCore(-offset);\n          if (this.isPathNormal(this.endConnectionSide)) return this.createBeginConnectionSegmentCore(-offset);\n          var reversedSegment = this.createBeginConnectionSegmentCore(-2 * offset);\n          if (this.isEndConnectionRectanleLineIntersected(reversedSegment, false, true)) return this.createBeginConnectionSegmentCore(offset);\n          return this.createBeginConnectionSegmentCore(-offset);\n        };\n\n        RightAngleConnectorRoutingContext.prototype.hasIntersectedItemsByPoint = function (point, secondPoint, connectionItem) {\n          var intersectedItems = this.getIntersectedItems(point, function (p, s) {\n            return s.rectangle.containsPoint(p) && !s.rectangle.containsPoint(secondPoint) && s.key !== connectionItem.key;\n          });\n          return intersectedItems !== undefined && intersectedItems.length > 0;\n        };\n\n        RightAngleConnectorRoutingContext.prototype.createEndConnectionSegment = function (offset, endShapeContainsBeginConnection) {\n          if (this.endConnectionSide === DiagramItem_1.ConnectionPointSide.Undefined) return this.createEndConnectionSegmentCore(offset);\n\n          if (!endShapeContainsBeginConnection || !this.routingModel.shouldReverseConnections) {\n            var segment = this.createEndConnectionSegmentCore(offset);\n            if (segment instanceof point_1.Point || !this.routingModel.shouldResizeConnections) return segment;\n            var endPoint = segment.endPoint;\n            var startPoint = segment.startPoint;\n            var currentOffset = offset;\n\n            while (this.hasIntersectedItemsByPoint(startPoint, endPoint, this.endConnectionShape)) {\n              currentOffset = currentOffset / 2;\n              segment = this.createEndConnectionSegmentCore(currentOffset);\n              startPoint = segment.startPoint;\n            }\n\n            return segment;\n          }\n\n          if (!this.beginConnectionShape) return this.createEndConnectionSegmentCore(-offset);\n          if (this.isPathNormal(this.beginConnectionSide)) return this.createEndConnectionSegmentCore(-offset);\n          var reversedSegment = this.createEndConnectionSegmentCore(-2 * offset);\n          if (this.isBeginConnectionRectanleLineIntersected(reversedSegment, true, false)) return this.createEndConnectionSegmentCore(offset);\n          return this.createEndConnectionSegmentCore(-offset);\n        };\n\n        RightAngleConnectorRoutingContext.prototype.createBeginConnectionSegmentCore = function (offset) {\n          return RightAngleConnectorRoutingMathOperations_1.RightAngleConnectorRoutingMathOperations.createBeginConnectionSegment(this.beginConnectionSide, this.beginPoint, offset, function (x, y) {\n            return new point_1.Point(x, y);\n          });\n        };\n\n        RightAngleConnectorRoutingContext.prototype.createEndConnectionSegmentCore = function (offset) {\n          return RightAngleConnectorRoutingMathOperations_1.RightAngleConnectorRoutingMathOperations.createEndConnectionSegment(this.endConnectionSide, this.endPoint, offset, function (x, y) {\n            return new point_1.Point(x, y);\n          });\n        };\n\n        RightAngleConnectorRoutingContext.prototype.isBeginConnectionRectanleLineIntersected = function (segment, excludeBeginPoint, excludeEndPoint) {\n          return RightAngleConnectorRoutingMathOperations_1.RightAngleConnectorRoutingMathOperations.isConnectionRectanleLineIntersected(this.beginConnectionShape.rectangle, segment, this.beginConnectionSide, excludeBeginPoint, excludeEndPoint, function (x, y) {\n            return new point_1.Point(x, y);\n          });\n        };\n\n        RightAngleConnectorRoutingContext.prototype.isEndConnectionRectanleLineIntersected = function (segment, excludeBeginPoint, excludeEndPoint) {\n          return RightAngleConnectorRoutingMathOperations_1.RightAngleConnectorRoutingMathOperations.isConnectionRectanleLineIntersected(this.endConnectionShape.rectangle, segment, this.endConnectionSide, excludeBeginPoint, excludeEndPoint, function (x, y) {\n            return new point_1.Point(x, y);\n          });\n        };\n\n        RightAngleConnectorRoutingContext.prototype.isIgnorableItem = function (item) {\n          return this.ignorableItemKeys[item.key] !== undefined;\n        };\n\n        RightAngleConnectorRoutingContext.prototype.createExtendedShapesBounds = function () {\n          var _this = this;\n\n          return this.routingModel.getItems(this.beginConnectionShape, this.endConnectionShape).map(function (i) {\n            return i.rectangle.clone().inflate(_this.routingModel.shapeMargins);\n          });\n        };\n\n        RightAngleConnectorRoutingContext.prototype.createGrid = function () {\n          return RoutingGrid_1.RoutingGrid.create(this.createGridPoints(), this.createExtendedShapesBounds(), function (x, y) {\n            return new point_1.Point(x, y);\n          });\n        };\n\n        return RightAngleConnectorRoutingContext;\n      }();\n\n      exports.RightAngleConnectorRoutingContext = RightAngleConnectorRoutingContext;\n      /***/\n    },\n    /* 373 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ConnectorRenderSegment = void 0;\n\n      var segment_1 = __webpack_require__(34);\n\n      var ConnectorProhibitedSegments_1 = __webpack_require__(374);\n\n      var ConnectorRenderSegment =\n      /** @class */\n      function () {\n        function ConnectorRenderSegment(startInfo, endInfo, startPointIndex, previousCustomSegment) {\n          this.startInfo = startInfo;\n          this.endInfo = endInfo;\n          this.startPointIndex = startPointIndex;\n          this.previousCustomSegment = previousCustomSegment;\n        }\n\n        Object.defineProperty(ConnectorRenderSegment.prototype, \"startPathPoint\", {\n          get: function get() {\n            return this.startInfo instanceof segment_1.Segment ? this.startInfo.endPoint : this.startInfo;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ConnectorRenderSegment.prototype, \"endPathPoint\", {\n          get: function get() {\n            return this.endInfo instanceof segment_1.Segment ? this.endInfo.startPoint : this.endInfo;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ConnectorRenderSegment.prototype, \"startPoint\", {\n          get: function get() {\n            return this.startInfo instanceof segment_1.Segment ? this.startInfo.startPoint : this.startInfo;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ConnectorRenderSegment.prototype, \"endPoint\", {\n          get: function get() {\n            return this.endInfo instanceof segment_1.Segment ? this.endInfo.endPoint : this.endInfo;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        ConnectorRenderSegment.prototype.createGridPoints = function () {\n          var result = [];\n\n          if (this.endInfo instanceof segment_1.Segment) {\n            result.push(this.endInfo.startPoint);\n            result.push(this.endInfo.endPoint);\n          } else result.push(this.endInfo);\n\n          return result;\n        };\n\n        ConnectorRenderSegment.prototype.createProhibitedSegments = function () {\n          if (this.startInfo instanceof segment_1.Segment) {\n            var result = this.createProhibitedSegmentsCore(this.startInfo);\n\n            if (this.endInfo instanceof segment_1.Segment) {\n              result.addSegment(this.endInfo);\n              result.addExludedPoint(this.endInfo.startPoint);\n            }\n\n            if (this.previousCustomSegment) result.addSegment(this.previousCustomSegment);\n            return result;\n          }\n\n          if (this.endInfo instanceof segment_1.Segment) {\n            var result = this.createProhibitedSegmentsCore(this.endInfo);\n            result.addExludedPoint(this.endInfo.startPoint);\n            if (this.previousCustomSegment) result.addSegment(this.previousCustomSegment);\n            return result;\n          }\n\n          return this.previousCustomSegment ? this.createProhibitedSegmentsCore(this.previousCustomSegment) : undefined;\n        };\n\n        ConnectorRenderSegment.prototype.createProhibitedSegmentsCore = function (segment) {\n          var result = new ConnectorProhibitedSegments_1.ConnectorProhibitedSegments();\n          result.addSegment(segment);\n          return result;\n        };\n\n        return ConnectorRenderSegment;\n      }();\n\n      exports.ConnectorRenderSegment = ConnectorRenderSegment;\n      /***/\n    },\n    /* 374 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ConnectorProhibitedSegments = void 0;\n\n      var ConnectorProhibitedSegments =\n      /** @class */\n      function () {\n        function ConnectorProhibitedSegments() {\n          this.segments = [];\n          this.exludedPoints = {};\n        }\n\n        ConnectorProhibitedSegments.prototype.addSegment = function (segment) {\n          this.segments.push(segment);\n        };\n\n        ConnectorProhibitedSegments.prototype.addExludedPoint = function (point) {\n          this.exludedPoints[point.toString()] = point;\n        };\n\n        ConnectorProhibitedSegments.prototype.allowPoint = function (point) {\n          if (this.exludedPoints[point.toString()] === undefined) for (var i = 0; i < this.segments.length; i++) {\n            if (this.segments[i].containsPoint(point)) return false;\n          }\n          return true;\n        };\n\n        return ConnectorProhibitedSegments;\n      }();\n\n      exports.ConnectorProhibitedSegments = ConnectorProhibitedSegments;\n      /***/\n    },\n    /* 375 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.RoutingGrid = void 0;\n\n      var search_1 = __webpack_require__(40);\n\n      var RoutingGrid =\n      /** @class */\n      function () {\n        function RoutingGrid(verticalGridLines, horizontalGridLines, createPoint) {\n          this.verticalGridLines = verticalGridLines;\n          this.horizontalGridLines = horizontalGridLines;\n          this.createPoint = createPoint;\n        }\n\n        RoutingGrid.create = function (points, boundsSet, createPoint) {\n          var _this = this;\n\n          var verticalLines = [];\n          var horizontalLines = [];\n          var varticalHashMap = {};\n          var horizontalHashMap = {};\n          boundsSet.forEach(function (x) {\n            _this.addLine(x.x, verticalLines, varticalHashMap);\n\n            _this.addLine(x.right, verticalLines, varticalHashMap);\n\n            _this.addLine(x.y, horizontalLines, horizontalHashMap);\n\n            _this.addLine(x.bottom, horizontalLines, horizontalHashMap);\n          });\n          points.forEach(function (p) {\n            _this.addLine(p.x, verticalLines, varticalHashMap);\n\n            _this.addLine(p.y, horizontalLines, horizontalHashMap);\n          });\n          verticalLines.sort(function (a, b) {\n            return a - b;\n          });\n          horizontalLines.sort(function (a, b) {\n            return a - b;\n          });\n          return new RoutingGrid(verticalLines, horizontalLines, createPoint);\n        };\n\n        RoutingGrid.addLine = function (line, lines, hashMap) {\n          if (!hashMap[line]) {\n            lines.push(line);\n            hashMap[line] = true;\n          }\n        };\n\n        RoutingGrid.prototype.getNeighborPoints = function (point) {\n          var result = [];\n          if (!this.horizontalGridLines || !this.horizontalGridLines.length || !this.verticalGridLines || !this.verticalGridLines.length) return result;\n          var verticalIndex = search_1.SearchUtils.binaryIndexOf(this.verticalGridLines, function (x) {\n            return x - point.x;\n          });\n\n          if (verticalIndex < 0) {\n            verticalIndex = ~verticalIndex;\n            if (this.isValidArrayIndex(this.verticalGridLines, verticalIndex)) result.push(this.createPoint(this.verticalGridLines[verticalIndex], point.y));\n          } else if (this.isValidArrayIndex(this.verticalGridLines, verticalIndex + 1)) result.push(this.createPoint(this.verticalGridLines[verticalIndex + 1], point.y));\n\n          if (this.isValidArrayIndex(this.verticalGridLines, verticalIndex - 1)) result.push(this.createPoint(this.verticalGridLines[verticalIndex - 1], point.y));\n          var horizontalIndex = search_1.SearchUtils.binaryIndexOf(this.horizontalGridLines, function (y) {\n            return y - point.y;\n          });\n\n          if (horizontalIndex < 0) {\n            horizontalIndex = ~horizontalIndex;\n            if (this.isValidArrayIndex(this.horizontalGridLines, horizontalIndex)) result.push(this.createPoint(point.x, this.horizontalGridLines[horizontalIndex]));\n          } else if (this.isValidArrayIndex(this.horizontalGridLines, horizontalIndex + 1)) result.push(this.createPoint(point.x, this.horizontalGridLines[horizontalIndex + 1]));\n\n          if (this.isValidArrayIndex(this.horizontalGridLines, horizontalIndex - 1)) result.push(this.createPoint(point.x, this.horizontalGridLines[horizontalIndex - 1]));\n          return result;\n        };\n\n        RoutingGrid.prototype.isValidArrayIndex = function (array, index) {\n          return array && index >= 0 && index < array.length;\n        };\n\n        return RoutingGrid;\n      }();\n\n      exports.RoutingGrid = RoutingGrid;\n      /***/\n    },\n    /* 376 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      var __extends = this && this.__extends || function () {\n        var _extendStatics255 = function extendStatics(d, b) {\n          _extendStatics255 = Object.setPrototypeOf || {\n            __proto__: []\n          } instanceof Array && function (d, b) {\n            d.__proto__ = b;\n          } || function (d, b) {\n            for (var p in b) {\n              if (b.hasOwnProperty(p)) d[p] = b[p];\n            }\n          };\n\n          return _extendStatics255(d, b);\n        };\n\n        return function (d, b) {\n          _extendStatics255(d, b);\n\n          function __() {\n            this.constructor = d;\n          }\n\n          d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n        };\n      }();\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.AStarContext = exports.AStarContextBase = void 0;\n\n      var SortedQueues_1 = __webpack_require__(377);\n\n      var UniqueAStarNodePositions_1 = __webpack_require__(378);\n\n      var AStarNode_1 = __webpack_require__(379);\n\n      var segment_1 = __webpack_require__(34);\n\n      var RightAngleConnectorRoutingMathOperations_1 = __webpack_require__(62);\n\n      var AStarContextBase =\n      /** @class */\n      function () {\n        function AStarContextBase(startPosition, targetPosition, maxStepsCount) {\n          this.startPosition = startPosition;\n          this.targetPosition = targetPosition;\n          this.maxStepsCount = maxStepsCount;\n          this.prohibitedPoints = {};\n        }\n\n        Object.defineProperty(AStarContextBase.prototype, \"shouldStartContinue\", {\n          get: function get() {\n            return this.updatableSet.count > 0 && this.stepsCount < this.maxStepsCount;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(AStarContextBase.prototype, \"shouldFinish\", {\n          get: function get() {\n            return this.currentNode.position.equals(this.targetPosition);\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        AStarContextBase.prototype.start = function () {\n          this.generalSet = new SortedQueues_1.SortedQueues(function (x) {\n            return x.key;\n          });\n          this.updatableSet = new UniqueAStarNodePositions_1.UniqueAStarNodePositions();\n          var currentNode = new AStarNode_1.AStarNode(this.startPosition, this.getDistance(this.startPosition, this.targetPosition));\n          this.currentNode = currentNode;\n          this.generalSet.enqueue(currentNode);\n          this.updatableSet.add(currentNode.position, currentNode);\n          this.stepsCount = 0;\n          this.openNode = undefined;\n        };\n\n        AStarContextBase.prototype.startContinue = function () {\n          this.currentNode = this.generalSet.dequeueMin();\n        };\n\n        AStarContextBase.prototype.endContinue = function () {\n          var _this = this;\n\n          var currentPosition = this.currentNode.position;\n          this.updatableSet.remove(currentPosition);\n          this.addProhibitedPoint(currentPosition);\n          this.getNeighborPoints(currentPosition).forEach(function (nextPosition) {\n            var penalty = _this.getPenalty(_this.currentNode, nextPosition);\n\n            var openNode = _this.updatableSet.getNode(nextPosition);\n\n            if (openNode === undefined) {\n              openNode = new AStarNode_1.AStarNode(nextPosition, _this.getDistance(nextPosition, _this.targetPosition));\n              openNode.parent = _this.currentNode;\n              openNode.penalty = penalty;\n\n              _this.generalSet.enqueue(openNode);\n\n              _this.updatableSet.add(nextPosition, openNode);\n            } else if (openNode.penalty > penalty) {\n              var generalSet = _this.generalSet;\n              generalSet.remove(openNode);\n              openNode.parent = _this.currentNode;\n              openNode.penalty = penalty;\n              generalSet.enqueue(openNode);\n            }\n\n            _this.openNode = openNode;\n          });\n          this.stepsCount++;\n        };\n\n        AStarContextBase.prototype.finishWithPath = function () {\n          this.path = this.currentNode.getPath();\n        };\n\n        AStarContextBase.prototype.finishWithoutPath = function () {\n          this.path = [];\n        };\n\n        return AStarContextBase;\n      }();\n\n      exports.AStarContextBase = AStarContextBase;\n\n      var AStarContext =\n      /** @class */\n      function (_super) {\n        __extends(AStarContext, _super);\n\n        function AStarContext(routingContext, startPosition, targetPosition, prohibitedSegments, grid, metrics) {\n          var _this = _super.call(this, startPosition, targetPosition, 10000) || this;\n\n          _this.routingContext = routingContext;\n          _this.startPosition = startPosition;\n          _this.targetPosition = targetPosition;\n          _this.prohibitedSegments = prohibitedSegments;\n          _this.grid = grid;\n          _this.metrics = metrics;\n          return _this;\n        }\n\n        AStarContext.prototype.addProhibitedPoint = function (point) {\n          this.prohibitedPoints[point.toString()] = point;\n        };\n\n        AStarContext.prototype.getNeighborPoints = function (point) {\n          var _this = this;\n\n          return this.grid.getNeighborPoints(point).filter(function (p) {\n            return _this.allowPoint(p);\n          });\n        };\n\n        AStarContext.prototype.getDistance = function (startPoint, endPoint) {\n          return this.metrics.distance(startPoint, endPoint);\n        };\n\n        AStarContext.prototype.getPenalty = function (node, nextPoint) {\n          var parent = node.parent;\n          var currentPosition = node.position;\n          var turnDirection = this.getTurnDirection(parent ? this.createAngle(parent.position, currentPosition, nextPoint) : 0);\n          var distance = this.getDistance(currentPosition, nextPoint);\n          var middlePosition = new segment_1.Segment(currentPosition, nextPoint).center;\n          return node.penalty + this.metrics.penalty(distance, middlePosition, turnDirection, this.getIntersectedItems(middlePosition));\n        };\n\n        AStarContext.prototype.allowPoint = function (p) {\n          return this.prohibitedPoints[p.toString()] === undefined && (!this.prohibitedSegments || this.prohibitedSegments.allowPoint(p));\n        };\n\n        AStarContext.prototype.getTurnDirection = function (angle) {\n          return RightAngleConnectorRoutingMathOperations_1.RightAngleConnectorRoutingMathOperations.getTurnDirection(angle);\n        };\n\n        AStarContext.prototype.createAngle = function (p1, p2, p3) {\n          return RightAngleConnectorRoutingMathOperations_1.RightAngleConnectorRoutingMathOperations.createAngle(p1, p2, p3);\n        };\n\n        AStarContext.prototype.getIntersectedItems = function (position) {\n          var _this = this;\n\n          var margin = this.routingContext.shapeMargins;\n          return this.routingContext.getIntersectedItems(position, function (p, i) {\n            return _this.hasIntersectedItem(p, i, margin);\n          });\n        };\n\n        AStarContext.prototype.hasIntersectedItem = function (point, item, margin) {\n          if (!this.isIntersectedWithExtendedRectangle(point, item, margin)) return false;\n          if (this.hasOneShapeConnection(item)) return true;\n          return !this.itemContainsConnectionPoints(item);\n        };\n\n        AStarContext.prototype.isIntersectedWithExtendedRectangle = function (point, item, margin) {\n          return item.rectangle.clone().inflate(margin).containsPoint(point);\n        };\n\n        AStarContext.prototype.itemContainsConnectionPoints = function (item) {\n          var rectangle = item.rectangle;\n          return rectangle.containsPoint(this.routingContext.beginPoint) && rectangle.containsPoint(this.routingContext.endPoint);\n        };\n\n        AStarContext.prototype.hasOneShapeConnection = function (item) {\n          var connectionPoints = item.getConnectionPoints();\n          return this.isConnectionPoint(connectionPoints, this.routingContext.beginPoint) && this.isConnectionPoint(connectionPoints, this.routingContext.endPoint);\n        };\n\n        AStarContext.prototype.isConnectionPoint = function (connectionPoints, point) {\n          return connectionPoints.filter(function (p) {\n            return p.equals(point);\n          }).length > 0;\n        };\n\n        return AStarContext;\n      }(AStarContextBase);\n\n      exports.AStarContext = AStarContext;\n      /***/\n    },\n    /* 377 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.SortedQueues = void 0;\n\n      var search_1 = __webpack_require__(40);\n\n      var SortedQueues =\n      /** @class */\n      function () {\n        function SortedQueues(getKey) {\n          this.getKey = getKey;\n          this._itemsArrays = {};\n          this._sortedKeys = [];\n        }\n\n        Object.defineProperty(SortedQueues.prototype, \"sortedKeys\", {\n          get: function get() {\n            return this._sortedKeys;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        SortedQueues.prototype.getQueue = function (key) {\n          return this._itemsArrays[key];\n        };\n\n        SortedQueues.prototype.enqueue = function (item) {\n          var key = this.getKey(item);\n\n          if (this._itemsArrays[key] === undefined) {\n            this._itemsArrays[key] = [item];\n            this.addSortedKey(key);\n          } else this._itemsArrays[key].push(item);\n        };\n\n        SortedQueues.prototype.remove = function (item) {\n          var key = this.getKey(item);\n          var itemsArray = this._itemsArrays[key];\n          if (itemsArray !== undefined) if (!itemsArray.length) this.removeCore(key);else if (itemsArray[0] === item) {\n            itemsArray.shift();\n            if (!itemsArray.length) this.removeCore(key);\n          } else this._itemsArrays[key] = itemsArray.filter(function (x) {\n            return x !== item;\n          });\n        };\n\n        SortedQueues.prototype.dequeueMin = function () {\n          if (!this._sortedKeys.length) return undefined;\n          var key = this._sortedKeys[0];\n          var itemsArray = this._itemsArrays[key];\n          var item = itemsArray.shift();\n          if (!itemsArray.length) this.removeCore(key);\n          return item;\n        };\n\n        SortedQueues.prototype.removeCore = function (key) {\n          delete this._itemsArrays[key];\n          this.removeSortedKey(key);\n        };\n\n        SortedQueues.prototype.removeSortedKey = function (key) {\n          var sortedPointIndex = search_1.SearchUtils.binaryIndexOf(this._sortedKeys, function (x) {\n            return x - key;\n          });\n          if (sortedPointIndex >= 0) this.sortedKeys.splice(sortedPointIndex, 1);\n        };\n\n        SortedQueues.prototype.addSortedKey = function (key) {\n          var sortedPointIndex = search_1.SearchUtils.binaryIndexOf(this._sortedKeys, function (x) {\n            return x - key;\n          });\n          if (sortedPointIndex < 0) this._sortedKeys.splice(-(sortedPointIndex + 1), 0, key);\n        };\n\n        return SortedQueues;\n      }();\n\n      exports.SortedQueues = SortedQueues;\n      /***/\n    },\n    /* 378 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.UniqueAStarNodePositions = void 0;\n\n      var UniqueAStarNodePositions =\n      /** @class */\n      function () {\n        function UniqueAStarNodePositions(getKey) {\n          if (getKey === void 0) {\n            getKey = function getKey(key) {\n              return key.toString();\n            };\n          }\n\n          this.getKey = getKey;\n          this.items = {};\n        }\n\n        Object.defineProperty(UniqueAStarNodePositions.prototype, \"count\", {\n          get: function get() {\n            return Object.keys(this.items).length;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        UniqueAStarNodePositions.prototype.getNode = function (position) {\n          var item = this.items[this.getKey(position)];\n          return item !== undefined ? item.node : undefined;\n        };\n\n        UniqueAStarNodePositions.prototype.add = function (position, node) {\n          var key = this.getKey(position);\n          if (this.items[key] === undefined) this.items[key] = {\n            position: position,\n            node: node\n          };\n        };\n\n        UniqueAStarNodePositions.prototype.remove = function (position) {\n          var key = this.getKey(position);\n          if (this.items[key] !== undefined) delete this.items[key];\n        };\n\n        return UniqueAStarNodePositions;\n      }();\n\n      exports.UniqueAStarNodePositions = UniqueAStarNodePositions;\n      /***/\n    },\n    /* 379 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.AStarNode = void 0;\n\n      var AStarNode =\n      /** @class */\n      function () {\n        function AStarNode(position, distance) {\n          this.position = position;\n          this.distance = distance;\n          this.penalty = 0;\n        }\n\n        Object.defineProperty(AStarNode.prototype, \"key\", {\n          get: function get() {\n            return this.distance + this.penalty;\n          },\n          enumerable: false,\n          configurable: true\n        });\n\n        AStarNode.prototype.getPath = function () {\n          var result = []; // eslint-disable-next-line @typescript-eslint/no-this-alias\n\n          var currentNode = this;\n\n          while (currentNode !== undefined) {\n            result.splice(0, 0, currentNode.position);\n            currentNode = currentNode.parent;\n          }\n\n          return result;\n        };\n\n        return AStarNode;\n      }();\n\n      exports.AStarNode = AStarNode;\n      /***/\n    },\n    /* 380 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.AStarCalculator = void 0;\n\n      var AStarCalculator =\n      /** @class */\n      function () {\n        function AStarCalculator() {}\n\n        AStarCalculator.calculate = function (context) {\n          if (context) {\n            var callBack = this.start(context);\n\n            while (callBack) {\n              callBack = callBack(context);\n            }\n          }\n        };\n\n        AStarCalculator.start = function (context) {\n          context.start();\n          return context.shouldStartContinue ? AStarCalculator.startContinue : AStarCalculator.finishWithPath;\n        };\n\n        AStarCalculator.startContinue = function (context) {\n          context.startContinue();\n          return context.shouldFinish ? AStarCalculator.finishWithPath : AStarCalculator.endContinue;\n        };\n\n        AStarCalculator.endContinue = function (context) {\n          context.endContinue();\n          return context.shouldStartContinue ? AStarCalculator.startContinue : AStarCalculator.finishWithoutPath;\n        };\n\n        AStarCalculator.finishWithPath = function (context) {\n          context.finishWithPath();\n        };\n\n        AStarCalculator.finishWithoutPath = function (context) {\n          context.finishWithoutPath();\n        };\n\n        return AStarCalculator;\n      }();\n\n      exports.AStarCalculator = AStarCalculator;\n      /***/\n    },\n    /* 381 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.ReloadContentParameters = void 0;\n\n      var ReloadContentParameters =\n      /** @class */\n      function () {\n        function ReloadContentParameters() {\n          this.isEmpty = true;\n        }\n\n        ReloadContentParameters.prototype.add = function (dataKey, getData, layoutParameters) {\n          if (dataKey !== undefined) {\n            if (this._dataKeys === undefined) this._dataKeys = [];\n            if (Array.isArray(dataKey)) this._dataKeys = this._dataKeys.concat(dataKey);else this._dataKeys.push(dataKey);\n          }\n\n          this._getData = this._getData || getData;\n          this._layoutParameters = this._layoutParameters || layoutParameters;\n          this.isEmpty = false;\n        };\n\n        ReloadContentParameters.prototype.clear = function () {\n          this.isEmpty = true;\n          this._dataKeys = undefined;\n          this._getData = undefined;\n          this._layoutParameters = undefined;\n        };\n\n        Object.defineProperty(ReloadContentParameters.prototype, \"empty\", {\n          get: function get() {\n            return this.isEmpty;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ReloadContentParameters.prototype, \"dataKeys\", {\n          get: function get() {\n            return this._dataKeys;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ReloadContentParameters.prototype, \"getData\", {\n          get: function get() {\n            return this._getData;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        Object.defineProperty(ReloadContentParameters.prototype, \"layoutParameters\", {\n          get: function get() {\n            return this._layoutParameters;\n          },\n          enumerable: false,\n          configurable: true\n        });\n        return ReloadContentParameters;\n      }();\n\n      exports.ReloadContentParameters = ReloadContentParameters;\n      /***/\n    },\n    /* 382 */\n\n    /***/\n    function (module, exports, __webpack_require__) {// extracted by mini-css-extract-plugin\n\n      /***/\n    }\n    /******/\n    ])\n  );\n});","map":null,"metadata":{},"sourceType":"script"}