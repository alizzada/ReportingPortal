{"ast":null,"code":"/**\r\n * DevExtreme (esm/viz/tree_map/api.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport TreeMapBase from \"./tree_map.base\";\nimport Node from \"./node\";\nimport { extend as _extend } from \"../../core/utils/extend\";\nimport { noop } from \"../../core/utils/common\";\nvar proto = TreeMapBase.prototype;\nvar nodeProto = Node.prototype;\nproto._eventsMap.onNodesInitialized = {\n  name: \"nodesInitialized\"\n};\nproto._eventsMap.onNodesRendering = {\n  name: \"nodesRendering\"\n};\n\nproto._createProxyType = function () {\n  var that = this;\n  var nodes;\n  Proxy.prototype = {\n    constructor: Proxy,\n    getParent: function getParent() {\n      return nodes[this._id].parent.proxy || null;\n    },\n    getChild: function getChild(index) {\n      var _nodes = nodes[this._id].nodes;\n      return _nodes ? _nodes[index].proxy : null;\n    },\n    getChildrenCount: function getChildrenCount() {\n      var _nodes = nodes[this._id].nodes;\n      return _nodes ? _nodes.length : 0;\n    },\n    getAllChildren: function getAllChildren() {\n      var _nodes = nodes[this._id].nodes;\n      var i;\n      var ii = _nodes && _nodes.length;\n      var list = [];\n\n      for (i = 0; i < ii; ++i) {\n        list.push(_nodes[i].proxy);\n      }\n\n      return list;\n    },\n    getAllNodes: function getAllNodes() {\n      var list = [];\n      collectNodes(nodes[this._id], list);\n      return list;\n    },\n    isLeaf: function isLeaf() {\n      return !nodes[this._id].isNode();\n    },\n    isActive: function isActive() {\n      return nodes[this._id].isActive();\n    },\n    value: function value(arg) {\n      var node = nodes[this._id];\n      var result;\n\n      if (void 0 !== arg) {\n        updateValue(node, arg > 0 ? Number(arg) : 0);\n        change(node, [\"TILING\"]);\n        result = this;\n      } else {\n        result = node.value;\n      }\n\n      return result;\n    },\n    label: function label(arg) {\n      var node = nodes[this._id];\n      var result;\n\n      if (void 0 !== arg) {\n        node.customLabel = arg ? String(arg) : null;\n        change(node, [\"LABELS\"]);\n        result = this;\n      } else {\n        result = node.customLabel || node.label;\n      }\n\n      return result;\n    },\n    customize: function customize(settings) {\n      var node = nodes[this._id];\n\n      if (settings) {\n        node._custom = node._custom || {};\n\n        _extend(true, node._custom, settings);\n\n        node._partialState = node._partialLabelState = null;\n      }\n\n      change(node, [\"TILES\", \"LABELS\"]);\n      return this;\n    },\n    resetCustomization: function resetCustomization() {\n      var node = nodes[this._id];\n      node._custom = node._partialState = node._partialLabelState = null;\n      change(node, [\"TILES\", \"LABELS\"]);\n      return this;\n    }\n  };\n\n  that._extendProxyType(Proxy.prototype);\n\n  function Proxy(node) {\n    node.proxy = this;\n    this._id = node._id;\n    this.level = node.level;\n    this.index = node.index;\n    this.data = node.data;\n  }\n\n  that._handlers.beginBuildNodes = function () {\n    nodes = that._nodes;\n    new Proxy(that._root);\n  };\n\n  that._handlers.buildNode = function (node) {\n    new Proxy(node);\n  };\n\n  that._handlers.endBuildNodes = function () {\n    that._eventTrigger(\"nodesInitialized\", {\n      root: that._root.proxy\n    });\n  };\n};\n\nfunction change(node, codes) {\n  var ctx = node.ctx;\n  ctx.suspend();\n  ctx.change(codes);\n  ctx.resume();\n}\n\nfunction collectNodes(node, list) {\n  var nodes = node.nodes;\n  var i;\n  var ii = nodes && nodes.length;\n\n  for (i = 0; i < ii; ++i) {\n    list.push(nodes[i].proxy);\n    collectNodes(nodes[i], list);\n  }\n}\n\nfunction updateValue(node, value) {\n  var delta = value - node.value;\n\n  while (node) {\n    node.value += delta;\n    node = node.parent;\n  }\n}\n\nproto._extendProxyType = noop;\nvar _resetNodes = proto._resetNodes;\n\nproto._resetNodes = function () {\n  _resetNodes.call(this);\n\n  this._eventTrigger(\"nodesRendering\", {\n    node: this._topNode.proxy\n  });\n};\n\nvar _updateStyles = nodeProto.updateStyles;\n\nnodeProto.updateStyles = function () {\n  _updateStyles.call(this);\n\n  if (this._custom) {\n    this._partialState = !this.ctx.forceReset && this._partialState || this.ctx.calculateState(this._custom);\n\n    _extend(true, this.state, this._partialState);\n  }\n};\n\nvar _updateLabelStyle = nodeProto.updateLabelStyle;\n\nnodeProto.updateLabelStyle = function () {\n  var custom = this._custom;\n\n  _updateLabelStyle.call(this);\n\n  if (custom && custom.label) {\n    this._partialLabelState = !this.ctx.forceReset && this._partialLabelState || calculatePartialLabelState(this, custom.label);\n    this.labelState = _extend(true, {}, this.labelState, this._partialLabelState);\n  }\n};\n\nfunction calculatePartialLabelState(node, settings) {\n  var state = node.ctx.calculateLabelState(settings);\n\n  if (\"visible\" in settings) {\n    state.visible = !!settings.visible;\n  }\n\n  return state;\n}\n\nproto.getRootNode = function () {\n  return this._root.proxy;\n};\n\nproto.resetNodes = function () {\n  var context = this._context;\n  context.suspend();\n  context.change([\"NODES_CREATE\"]);\n  context.resume();\n  return this;\n};","map":{"version":3,"sources":["C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/devextreme/esm/viz/tree_map/api.js"],"names":["TreeMapBase","Node","extend","_extend","noop","proto","prototype","nodeProto","_eventsMap","onNodesInitialized","name","onNodesRendering","_createProxyType","that","nodes","Proxy","constructor","getParent","_id","parent","proxy","getChild","index","_nodes","getChildrenCount","length","getAllChildren","i","ii","list","push","getAllNodes","collectNodes","isLeaf","isNode","isActive","value","arg","node","result","updateValue","Number","change","label","customLabel","String","customize","settings","_custom","_partialState","_partialLabelState","resetCustomization","_extendProxyType","level","data","_handlers","beginBuildNodes","_root","buildNode","endBuildNodes","_eventTrigger","root","codes","ctx","suspend","resume","delta","_resetNodes","call","_topNode","_updateStyles","updateStyles","forceReset","calculateState","state","_updateLabelStyle","updateLabelStyle","custom","calculatePartialLabelState","labelState","calculateLabelState","visible","getRootNode","resetNodes","context","_context"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/viz/tree_map/api.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport TreeMapBase from \"./tree_map.base\";\r\nimport Node from \"./node\";\r\nimport {\r\n    extend as _extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    noop\r\n} from \"../../core/utils/common\";\r\nvar proto = TreeMapBase.prototype;\r\nvar nodeProto = Node.prototype;\r\nproto._eventsMap.onNodesInitialized = {\r\n    name: \"nodesInitialized\"\r\n};\r\nproto._eventsMap.onNodesRendering = {\r\n    name: \"nodesRendering\"\r\n};\r\nproto._createProxyType = function() {\r\n    var that = this;\r\n    var nodes;\r\n    Proxy.prototype = {\r\n        constructor: Proxy,\r\n        getParent: function() {\r\n            return nodes[this._id].parent.proxy || null\r\n        },\r\n        getChild: function(index) {\r\n            var _nodes = nodes[this._id].nodes;\r\n            return _nodes ? _nodes[index].proxy : null\r\n        },\r\n        getChildrenCount: function() {\r\n            var _nodes = nodes[this._id].nodes;\r\n            return _nodes ? _nodes.length : 0\r\n        },\r\n        getAllChildren: function() {\r\n            var _nodes = nodes[this._id].nodes;\r\n            var i;\r\n            var ii = _nodes && _nodes.length;\r\n            var list = [];\r\n            for (i = 0; i < ii; ++i) {\r\n                list.push(_nodes[i].proxy)\r\n            }\r\n            return list\r\n        },\r\n        getAllNodes: function() {\r\n            var list = [];\r\n            collectNodes(nodes[this._id], list);\r\n            return list\r\n        },\r\n        isLeaf: function() {\r\n            return !nodes[this._id].isNode()\r\n        },\r\n        isActive: function() {\r\n            return nodes[this._id].isActive()\r\n        },\r\n        value: function(arg) {\r\n            var node = nodes[this._id];\r\n            var result;\r\n            if (void 0 !== arg) {\r\n                updateValue(node, arg > 0 ? Number(arg) : 0);\r\n                change(node, [\"TILING\"]);\r\n                result = this\r\n            } else {\r\n                result = node.value\r\n            }\r\n            return result\r\n        },\r\n        label: function(arg) {\r\n            var node = nodes[this._id];\r\n            var result;\r\n            if (void 0 !== arg) {\r\n                node.customLabel = arg ? String(arg) : null;\r\n                change(node, [\"LABELS\"]);\r\n                result = this\r\n            } else {\r\n                result = node.customLabel || node.label\r\n            }\r\n            return result\r\n        },\r\n        customize: function(settings) {\r\n            var node = nodes[this._id];\r\n            if (settings) {\r\n                node._custom = node._custom || {};\r\n                _extend(true, node._custom, settings);\r\n                node._partialState = node._partialLabelState = null\r\n            }\r\n            change(node, [\"TILES\", \"LABELS\"]);\r\n            return this\r\n        },\r\n        resetCustomization: function() {\r\n            var node = nodes[this._id];\r\n            node._custom = node._partialState = node._partialLabelState = null;\r\n            change(node, [\"TILES\", \"LABELS\"]);\r\n            return this\r\n        }\r\n    };\r\n    that._extendProxyType(Proxy.prototype);\r\n\r\n    function Proxy(node) {\r\n        node.proxy = this;\r\n        this._id = node._id;\r\n        this.level = node.level;\r\n        this.index = node.index;\r\n        this.data = node.data\r\n    }\r\n    that._handlers.beginBuildNodes = function() {\r\n        nodes = that._nodes;\r\n        new Proxy(that._root)\r\n    };\r\n    that._handlers.buildNode = function(node) {\r\n        new Proxy(node)\r\n    };\r\n    that._handlers.endBuildNodes = function() {\r\n        that._eventTrigger(\"nodesInitialized\", {\r\n            root: that._root.proxy\r\n        })\r\n    }\r\n};\r\n\r\nfunction change(node, codes) {\r\n    var ctx = node.ctx;\r\n    ctx.suspend();\r\n    ctx.change(codes);\r\n    ctx.resume()\r\n}\r\n\r\nfunction collectNodes(node, list) {\r\n    var nodes = node.nodes;\r\n    var i;\r\n    var ii = nodes && nodes.length;\r\n    for (i = 0; i < ii; ++i) {\r\n        list.push(nodes[i].proxy);\r\n        collectNodes(nodes[i], list)\r\n    }\r\n}\r\n\r\nfunction updateValue(node, value) {\r\n    var delta = value - node.value;\r\n    while (node) {\r\n        node.value += delta;\r\n        node = node.parent\r\n    }\r\n}\r\nproto._extendProxyType = noop;\r\nvar _resetNodes = proto._resetNodes;\r\nproto._resetNodes = function() {\r\n    _resetNodes.call(this);\r\n    this._eventTrigger(\"nodesRendering\", {\r\n        node: this._topNode.proxy\r\n    })\r\n};\r\nvar _updateStyles = nodeProto.updateStyles;\r\nnodeProto.updateStyles = function() {\r\n    _updateStyles.call(this);\r\n    if (this._custom) {\r\n        this._partialState = !this.ctx.forceReset && this._partialState || this.ctx.calculateState(this._custom);\r\n        _extend(true, this.state, this._partialState)\r\n    }\r\n};\r\nvar _updateLabelStyle = nodeProto.updateLabelStyle;\r\nnodeProto.updateLabelStyle = function() {\r\n    var custom = this._custom;\r\n    _updateLabelStyle.call(this);\r\n    if (custom && custom.label) {\r\n        this._partialLabelState = !this.ctx.forceReset && this._partialLabelState || calculatePartialLabelState(this, custom.label);\r\n        this.labelState = _extend(true, {}, this.labelState, this._partialLabelState)\r\n    }\r\n};\r\n\r\nfunction calculatePartialLabelState(node, settings) {\r\n    var state = node.ctx.calculateLabelState(settings);\r\n    if (\"visible\" in settings) {\r\n        state.visible = !!settings.visible\r\n    }\r\n    return state\r\n}\r\nproto.getRootNode = function() {\r\n    return this._root.proxy\r\n};\r\nproto.resetNodes = function() {\r\n    var context = this._context;\r\n    context.suspend();\r\n    context.change([\"NODES_CREATE\"]);\r\n    context.resume();\r\n    return this\r\n};\r\n"]},"metadata":{},"sourceType":"module"}