{"ast":null,"code":"/**\r\n * DevExtreme (esm/viz/gauges/base_range_container.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { each } from \"../../core/utils/iterator\";\nimport { BaseElement } from \"./base_indicators\";\nimport { isString } from \"../../core/utils/type\";\nvar _Number = Number;\nvar _isArray = Array.isArray;\nvar _isFinite = isFinite;\nvar BaseRangeContainer = BaseElement.inherit({\n  _init: function _init() {\n    this._root = this._renderer.g().attr({\n      class: \"dxg-range-container\"\n    }).linkOn(this._container, \"range-container\");\n  },\n  _dispose: function _dispose() {\n    this._root.linkOff();\n  },\n  clean: function clean() {\n    this._root.linkRemove().clear();\n\n    this._options = this.enabled = null;\n    return this;\n  },\n  _getRanges: function _getRanges() {\n    var options = this._options;\n    var translator = this._translator;\n    var totalStart = translator.getDomain()[0];\n    var totalEnd = translator.getDomain()[1];\n    var totalDelta = totalEnd - totalStart;\n    var isValidSegment = totalDelta >= 0 ? isValidSegmentAsc : isValidSegmentDesc;\n    var subtractSegment = totalDelta >= 0 ? subtractSegmentAsc : subtractSegmentDesc;\n    var list;\n    var ranges = [];\n    var backgroundRanges = [{\n      start: totalStart,\n      end: totalEnd\n    }];\n    var backgroundColor = isString(options.backgroundColor) ? options.backgroundColor : \"none\";\n    var width = options.width || {};\n\n    var startWidth = _Number(width > 0 ? width : width.start);\n\n    var endWidth = _Number(width > 0 ? width : width.end);\n\n    var deltaWidth = endWidth - startWidth;\n\n    if (void 0 !== options.ranges && !_isArray(options.ranges)) {\n      return null;\n    }\n\n    if (!(startWidth >= 0 && endWidth >= 0 && startWidth + endWidth > 0)) {\n      return null;\n    }\n\n    list = (_isArray(options.ranges) ? options.ranges : []).reduce(function (result, rangeOptions, i) {\n      rangeOptions = rangeOptions || {};\n      var start = translator.adjust(rangeOptions.startValue);\n      var end = translator.adjust(rangeOptions.endValue);\n\n      if (_isFinite(start) && _isFinite(end) && isValidSegment(start, end, rangeOptions)) {\n        result.push({\n          start: start,\n          end: end,\n          color: rangeOptions.color,\n          classIndex: i\n        });\n      }\n\n      return result;\n    }, []);\n\n    var palette = this._themeManager.createPalette(options.palette, {\n      type: \"indicatingSet\",\n      extensionMode: options.paletteExtensionMode,\n      keepLastColorInEnd: true,\n      count: list.length\n    });\n\n    each(list, function (_, item) {\n      var paletteColor = palette.getNextColor();\n      item.color = isString(item.color) && item.color || paletteColor || \"none\";\n      item.className = \"dxg-range dxg-range-\" + item.classIndex;\n      delete item.classIndex;\n    });\n    each(list, function (_, item) {\n      var i;\n      var ii;\n      var sub;\n      var subs;\n      var range;\n      var newRanges = [];\n      var newBackgroundRanges = [];\n\n      for (i = 0, ii = ranges.length; i < ii; ++i) {\n        range = ranges[i];\n        subs = subtractSegment(range.start, range.end, item.start, item.end);\n        (sub = subs[0]) && (sub.color = range.color) && (sub.className = range.className) && newRanges.push(sub);\n        (sub = subs[1]) && (sub.color = range.color) && (sub.className = range.className) && newRanges.push(sub);\n      }\n\n      newRanges.push(item);\n      ranges = newRanges;\n\n      for (i = 0, ii = backgroundRanges.length; i < ii; ++i) {\n        range = backgroundRanges[i];\n        subs = subtractSegment(range.start, range.end, item.start, item.end);\n        (sub = subs[0]) && newBackgroundRanges.push(sub);\n        (sub = subs[1]) && newBackgroundRanges.push(sub);\n      }\n\n      backgroundRanges = newBackgroundRanges;\n    });\n    each(backgroundRanges, function (_, range) {\n      range.color = backgroundColor;\n      range.className = \"dxg-range dxg-background-range\";\n      ranges.push(range);\n    });\n    each(ranges, function (_, range) {\n      range.startWidth = (range.start - totalStart) / totalDelta * deltaWidth + startWidth;\n      range.endWidth = (range.end - totalStart) / totalDelta * deltaWidth + startWidth;\n    });\n    return ranges;\n  },\n  render: function render(options) {\n    this._options = options;\n\n    this._processOptions();\n\n    this._ranges = this._getRanges();\n\n    if (this._ranges) {\n      this.enabled = true;\n\n      this._root.linkAppend();\n    }\n\n    return this;\n  },\n  resize: function resize(layout) {\n    var that = this;\n\n    that._root.clear();\n\n    if (that._isVisible(layout)) {\n      each(that._ranges, function (_, range) {\n        that._createRange(range, layout).attr({\n          fill: range.color,\n          class: range.className\n        }).append(that._root);\n      });\n    }\n\n    return that;\n  },\n  _processOptions: null,\n  _isVisible: null,\n  _createRange: null,\n  getColorForValue: function getColorForValue(value) {\n    var color = null;\n    each(this._ranges, function (_, range) {\n      if (range.start <= value && value <= range.end || range.start >= value && value >= range.end) {\n        color = range.color;\n        return false;\n      }\n    });\n    return color;\n  }\n});\n\nfunction subtractSegmentAsc(segmentStart, segmentEnd, otherStart, otherEnd) {\n  var result;\n\n  if (otherStart > segmentStart && otherEnd < segmentEnd) {\n    result = [{\n      start: segmentStart,\n      end: otherStart\n    }, {\n      start: otherEnd,\n      end: segmentEnd\n    }];\n  } else if (otherStart >= segmentEnd || otherEnd <= segmentStart) {\n    result = [{\n      start: segmentStart,\n      end: segmentEnd\n    }];\n  } else if (otherStart <= segmentStart && otherEnd >= segmentEnd) {\n    result = [];\n  } else if (otherStart > segmentStart) {\n    result = [{\n      start: segmentStart,\n      end: otherStart\n    }];\n  } else if (otherEnd < segmentEnd) {\n    result = [{\n      start: otherEnd,\n      end: segmentEnd\n    }];\n  }\n\n  return result;\n}\n\nfunction subtractSegmentDesc(segmentStart, segmentEnd, otherStart, otherEnd) {\n  var result;\n\n  if (otherStart < segmentStart && otherEnd > segmentEnd) {\n    result = [{\n      start: segmentStart,\n      end: otherStart\n    }, {\n      start: otherEnd,\n      end: segmentEnd\n    }];\n  } else if (otherStart <= segmentEnd || otherEnd >= segmentStart) {\n    result = [{\n      start: segmentStart,\n      end: segmentEnd\n    }];\n  } else if (otherStart >= segmentStart && otherEnd <= segmentEnd) {\n    result = [];\n  } else if (otherStart < segmentStart) {\n    result = [{\n      start: segmentStart,\n      end: otherStart\n    }];\n  } else if (otherEnd > segmentEnd) {\n    result = [{\n      start: otherEnd,\n      end: segmentEnd\n    }];\n  }\n\n  return result;\n}\n\nfunction areEqualValues(start, end, _ref) {\n  var startValue = _ref.startValue,\n      endValue = _ref.endValue;\n  return endValue === startValue && startValue === start && end === start;\n}\n\nfunction isValidSegmentAsc(start, end, options) {\n  return end - start > 0 || areEqualValues(start, end, options);\n}\n\nfunction isValidSegmentDesc(start, end, options) {\n  return start - end > 0 || areEqualValues(start, end, options);\n}\n\nexport default BaseRangeContainer;","map":{"version":3,"sources":["C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/devextreme/esm/viz/gauges/base_range_container.js"],"names":["each","BaseElement","isString","_Number","Number","_isArray","Array","isArray","_isFinite","isFinite","BaseRangeContainer","inherit","_init","_root","_renderer","g","attr","class","linkOn","_container","_dispose","linkOff","clean","linkRemove","clear","_options","enabled","_getRanges","options","translator","_translator","totalStart","getDomain","totalEnd","totalDelta","isValidSegment","isValidSegmentAsc","isValidSegmentDesc","subtractSegment","subtractSegmentAsc","subtractSegmentDesc","list","ranges","backgroundRanges","start","end","backgroundColor","width","startWidth","endWidth","deltaWidth","reduce","result","rangeOptions","i","adjust","startValue","endValue","push","color","classIndex","palette","_themeManager","createPalette","type","extensionMode","paletteExtensionMode","keepLastColorInEnd","count","length","_","item","paletteColor","getNextColor","className","ii","sub","subs","range","newRanges","newBackgroundRanges","render","_processOptions","_ranges","linkAppend","resize","layout","that","_isVisible","_createRange","fill","append","getColorForValue","value","segmentStart","segmentEnd","otherStart","otherEnd","areEqualValues","_ref"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/viz/gauges/base_range_container.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport {\r\n    BaseElement\r\n} from \"./base_indicators\";\r\nimport {\r\n    isString\r\n} from \"../../core/utils/type\";\r\nvar _Number = Number;\r\nvar _isArray = Array.isArray;\r\nvar _isFinite = isFinite;\r\nvar BaseRangeContainer = BaseElement.inherit({\r\n    _init: function() {\r\n        this._root = this._renderer.g().attr({\r\n            class: \"dxg-range-container\"\r\n        }).linkOn(this._container, \"range-container\")\r\n    },\r\n    _dispose: function() {\r\n        this._root.linkOff()\r\n    },\r\n    clean: function() {\r\n        this._root.linkRemove().clear();\r\n        this._options = this.enabled = null;\r\n        return this\r\n    },\r\n    _getRanges: function() {\r\n        var options = this._options;\r\n        var translator = this._translator;\r\n        var totalStart = translator.getDomain()[0];\r\n        var totalEnd = translator.getDomain()[1];\r\n        var totalDelta = totalEnd - totalStart;\r\n        var isValidSegment = totalDelta >= 0 ? isValidSegmentAsc : isValidSegmentDesc;\r\n        var subtractSegment = totalDelta >= 0 ? subtractSegmentAsc : subtractSegmentDesc;\r\n        var list;\r\n        var ranges = [];\r\n        var backgroundRanges = [{\r\n            start: totalStart,\r\n            end: totalEnd\r\n        }];\r\n        var backgroundColor = isString(options.backgroundColor) ? options.backgroundColor : \"none\";\r\n        var width = options.width || {};\r\n        var startWidth = _Number(width > 0 ? width : width.start);\r\n        var endWidth = _Number(width > 0 ? width : width.end);\r\n        var deltaWidth = endWidth - startWidth;\r\n        if (void 0 !== options.ranges && !_isArray(options.ranges)) {\r\n            return null\r\n        }\r\n        if (!(startWidth >= 0 && endWidth >= 0 && startWidth + endWidth > 0)) {\r\n            return null\r\n        }\r\n        list = (_isArray(options.ranges) ? options.ranges : []).reduce((result, rangeOptions, i) => {\r\n            rangeOptions = rangeOptions || {};\r\n            var start = translator.adjust(rangeOptions.startValue);\r\n            var end = translator.adjust(rangeOptions.endValue);\r\n            if (_isFinite(start) && _isFinite(end) && isValidSegment(start, end, rangeOptions)) {\r\n                result.push({\r\n                    start: start,\r\n                    end: end,\r\n                    color: rangeOptions.color,\r\n                    classIndex: i\r\n                })\r\n            }\r\n            return result\r\n        }, []);\r\n        var palette = this._themeManager.createPalette(options.palette, {\r\n            type: \"indicatingSet\",\r\n            extensionMode: options.paletteExtensionMode,\r\n            keepLastColorInEnd: true,\r\n            count: list.length\r\n        });\r\n        each(list, (function(_, item) {\r\n            var paletteColor = palette.getNextColor();\r\n            item.color = isString(item.color) && item.color || paletteColor || \"none\";\r\n            item.className = \"dxg-range dxg-range-\" + item.classIndex;\r\n            delete item.classIndex\r\n        }));\r\n        each(list, (function(_, item) {\r\n            var i;\r\n            var ii;\r\n            var sub;\r\n            var subs;\r\n            var range;\r\n            var newRanges = [];\r\n            var newBackgroundRanges = [];\r\n            for (i = 0, ii = ranges.length; i < ii; ++i) {\r\n                range = ranges[i];\r\n                subs = subtractSegment(range.start, range.end, item.start, item.end);\r\n                (sub = subs[0]) && (sub.color = range.color) && (sub.className = range.className) && newRanges.push(sub);\r\n                (sub = subs[1]) && (sub.color = range.color) && (sub.className = range.className) && newRanges.push(sub)\r\n            }\r\n            newRanges.push(item);\r\n            ranges = newRanges;\r\n            for (i = 0, ii = backgroundRanges.length; i < ii; ++i) {\r\n                range = backgroundRanges[i];\r\n                subs = subtractSegment(range.start, range.end, item.start, item.end);\r\n                (sub = subs[0]) && newBackgroundRanges.push(sub);\r\n                (sub = subs[1]) && newBackgroundRanges.push(sub)\r\n            }\r\n            backgroundRanges = newBackgroundRanges\r\n        }));\r\n        each(backgroundRanges, (function(_, range) {\r\n            range.color = backgroundColor;\r\n            range.className = \"dxg-range dxg-background-range\";\r\n            ranges.push(range)\r\n        }));\r\n        each(ranges, (function(_, range) {\r\n            range.startWidth = (range.start - totalStart) / totalDelta * deltaWidth + startWidth;\r\n            range.endWidth = (range.end - totalStart) / totalDelta * deltaWidth + startWidth\r\n        }));\r\n        return ranges\r\n    },\r\n    render: function(options) {\r\n        this._options = options;\r\n        this._processOptions();\r\n        this._ranges = this._getRanges();\r\n        if (this._ranges) {\r\n            this.enabled = true;\r\n            this._root.linkAppend()\r\n        }\r\n        return this\r\n    },\r\n    resize: function(layout) {\r\n        var that = this;\r\n        that._root.clear();\r\n        if (that._isVisible(layout)) {\r\n            each(that._ranges, (function(_, range) {\r\n                that._createRange(range, layout).attr({\r\n                    fill: range.color,\r\n                    class: range.className\r\n                }).append(that._root)\r\n            }))\r\n        }\r\n        return that\r\n    },\r\n    _processOptions: null,\r\n    _isVisible: null,\r\n    _createRange: null,\r\n    getColorForValue: function(value) {\r\n        var color = null;\r\n        each(this._ranges, (function(_, range) {\r\n            if (range.start <= value && value <= range.end || range.start >= value && value >= range.end) {\r\n                color = range.color;\r\n                return false\r\n            }\r\n        }));\r\n        return color\r\n    }\r\n});\r\n\r\nfunction subtractSegmentAsc(segmentStart, segmentEnd, otherStart, otherEnd) {\r\n    var result;\r\n    if (otherStart > segmentStart && otherEnd < segmentEnd) {\r\n        result = [{\r\n            start: segmentStart,\r\n            end: otherStart\r\n        }, {\r\n            start: otherEnd,\r\n            end: segmentEnd\r\n        }]\r\n    } else if (otherStart >= segmentEnd || otherEnd <= segmentStart) {\r\n        result = [{\r\n            start: segmentStart,\r\n            end: segmentEnd\r\n        }]\r\n    } else if (otherStart <= segmentStart && otherEnd >= segmentEnd) {\r\n        result = []\r\n    } else if (otherStart > segmentStart) {\r\n        result = [{\r\n            start: segmentStart,\r\n            end: otherStart\r\n        }]\r\n    } else if (otherEnd < segmentEnd) {\r\n        result = [{\r\n            start: otherEnd,\r\n            end: segmentEnd\r\n        }]\r\n    }\r\n    return result\r\n}\r\n\r\nfunction subtractSegmentDesc(segmentStart, segmentEnd, otherStart, otherEnd) {\r\n    var result;\r\n    if (otherStart < segmentStart && otherEnd > segmentEnd) {\r\n        result = [{\r\n            start: segmentStart,\r\n            end: otherStart\r\n        }, {\r\n            start: otherEnd,\r\n            end: segmentEnd\r\n        }]\r\n    } else if (otherStart <= segmentEnd || otherEnd >= segmentStart) {\r\n        result = [{\r\n            start: segmentStart,\r\n            end: segmentEnd\r\n        }]\r\n    } else if (otherStart >= segmentStart && otherEnd <= segmentEnd) {\r\n        result = []\r\n    } else if (otherStart < segmentStart) {\r\n        result = [{\r\n            start: segmentStart,\r\n            end: otherStart\r\n        }]\r\n    } else if (otherEnd > segmentEnd) {\r\n        result = [{\r\n            start: otherEnd,\r\n            end: segmentEnd\r\n        }]\r\n    }\r\n    return result\r\n}\r\n\r\nfunction areEqualValues(start, end, _ref) {\r\n    var {\r\n        startValue: startValue,\r\n        endValue: endValue\r\n    } = _ref;\r\n    return endValue === startValue && startValue === start && end === start\r\n}\r\n\r\nfunction isValidSegmentAsc(start, end, options) {\r\n    return end - start > 0 || areEqualValues(start, end, options)\r\n}\r\n\r\nfunction isValidSegmentDesc(start, end, options) {\r\n    return start - end > 0 || areEqualValues(start, end, options)\r\n}\r\nexport default BaseRangeContainer;\r\n"]},"metadata":{},"sourceType":"module"}