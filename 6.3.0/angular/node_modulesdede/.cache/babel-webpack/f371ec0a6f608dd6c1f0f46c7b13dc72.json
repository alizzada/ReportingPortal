{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/diagram/ui.diagram.dialog_manager.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../core/renderer\";\nimport { getDiagram } from \"./diagram.importer\";\nimport messageLocalization from \"../../localization/message\";\nimport FileUploader from \"../file_uploader\";\nimport { getWindow } from \"../../core/utils/window\";\nvar DiagramDialogManager = {\n  getConfigurations: function getConfigurations() {\n    var _getDiagram = getDiagram(),\n        DiagramCommand = _getDiagram.DiagramCommand;\n\n    return this.dialogList || (this.dialogList = [{\n      command: DiagramCommand.InsertShapeImage,\n      title: messageLocalization.format(\"dxDiagram-dialogInsertShapeImageTitle\"),\n      onGetContent: this.getChangeImageDialogContent\n    }, {\n      command: DiagramCommand.EditShapeImage,\n      title: messageLocalization.format(\"dxDiagram-dialogEditShapeImageTitle\"),\n      onGetContent: this.getChangeImageDialogContent\n    }]);\n  },\n  getChangeImageDialogContent: function getChangeImageDialogContent(args) {\n    var $uploader = $(\"<div>\");\n\n    args.component._createComponent($uploader, FileUploader, {\n      selectButtonText: messageLocalization.format(\"dxDiagram-dialogEditShapeImageSelectButton\"),\n      accept: \"image/*\",\n      uploadMode: \"useForm\",\n      onValueChanged: function onValueChanged(e) {\n        var window = getWindow();\n        var reader = new window.FileReader();\n\n        reader.onload = function (e) {\n          args.component._commandParameter = e.target.result;\n        };\n\n        reader.readAsDataURL(e.value[0]);\n      }\n    });\n\n    return $uploader;\n  },\n  getDialogParameters: function getDialogParameters(command) {\n    var commandIndex = this.getConfigurations().map(function (c) {\n      return c.command;\n    }).indexOf(command);\n\n    if (commandIndex >= 0) {\n      return this.getConfigurations()[commandIndex];\n    } else {\n      return null;\n    }\n  }\n};\nexport default DiagramDialogManager;","map":{"version":3,"sources":["C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/devextreme/esm/ui/diagram/ui.diagram.dialog_manager.js"],"names":["$","getDiagram","messageLocalization","FileUploader","getWindow","DiagramDialogManager","getConfigurations","DiagramCommand","dialogList","command","InsertShapeImage","title","format","onGetContent","getChangeImageDialogContent","EditShapeImage","args","$uploader","component","_createComponent","selectButtonText","accept","uploadMode","onValueChanged","e","window","reader","FileReader","onload","_commandParameter","target","result","readAsDataURL","value","getDialogParameters","commandIndex","map","c","indexOf"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,CAAP,MAAc,qBAAd;AACA,SACIC,UADJ,QAEO,oBAFP;AAGA,OAAOC,mBAAP,MAAgC,4BAAhC;AACA,OAAOC,YAAP,MAAyB,kBAAzB;AACA,SACIC,SADJ,QAEO,yBAFP;AAGA,IAAIC,oBAAoB,GAAG;AACvBC,EAAAA,iBAAiB,EAAE,6BAAW;AAC1B,sBAEIL,UAAU,EAFd;AAAA,QACoBM,cADpB,eACIA,cADJ;;AAGA,WAAO,KAAKC,UAAL,KAAoB,KAAKA,UAAL,GAAkB,CAAC;AAC1CC,MAAAA,OAAO,EAAEF,cAAc,CAACG,gBADkB;AAE1CC,MAAAA,KAAK,EAAET,mBAAmB,CAACU,MAApB,CAA2B,uCAA3B,CAFmC;AAG1CC,MAAAA,YAAY,EAAE,KAAKC;AAHuB,KAAD,EAI1C;AACCL,MAAAA,OAAO,EAAEF,cAAc,CAACQ,cADzB;AAECJ,MAAAA,KAAK,EAAET,mBAAmB,CAACU,MAApB,CAA2B,qCAA3B,CAFR;AAGCC,MAAAA,YAAY,EAAE,KAAKC;AAHpB,KAJ0C,CAAtC,CAAP;AASH,GAdsB;AAevBA,EAAAA,2BAA2B,EAAE,qCAASE,IAAT,EAAe;AACxC,QAAIC,SAAS,GAAGjB,CAAC,CAAC,OAAD,CAAjB;;AACAgB,IAAAA,IAAI,CAACE,SAAL,CAAeC,gBAAf,CAAgCF,SAAhC,EAA2Cd,YAA3C,EAAyD;AACrDiB,MAAAA,gBAAgB,EAAElB,mBAAmB,CAACU,MAApB,CAA2B,4CAA3B,CADmC;AAErDS,MAAAA,MAAM,EAAE,SAF6C;AAGrDC,MAAAA,UAAU,EAAE,SAHyC;AAIrDC,MAAAA,cAAc,EAAE,wBAASC,CAAT,EAAY;AACxB,YAAIC,MAAM,GAAGrB,SAAS,EAAtB;AACA,YAAIsB,MAAM,GAAG,IAAID,MAAM,CAACE,UAAX,EAAb;;AACAD,QAAAA,MAAM,CAACE,MAAP,GAAgB,UAASJ,CAAT,EAAY;AACxBR,UAAAA,IAAI,CAACE,SAAL,CAAeW,iBAAf,GAAmCL,CAAC,CAACM,MAAF,CAASC,MAA5C;AACH,SAFD;;AAGAL,QAAAA,MAAM,CAACM,aAAP,CAAqBR,CAAC,CAACS,KAAF,CAAQ,CAAR,CAArB;AACH;AAXoD,KAAzD;;AAaA,WAAOhB,SAAP;AACH,GA/BsB;AAgCvBiB,EAAAA,mBAhCuB,+BAgCHzB,OAhCG,EAgCM;AACzB,QAAI0B,YAAY,GAAG,KAAK7B,iBAAL,GAAyB8B,GAAzB,CAA6B,UAAAC,CAAC;AAAA,aAAIA,CAAC,CAAC5B,OAAN;AAAA,KAA9B,EAA6C6B,OAA7C,CAAqD7B,OAArD,CAAnB;;AACA,QAAI0B,YAAY,IAAI,CAApB,EAAuB;AACnB,aAAO,KAAK7B,iBAAL,GAAyB6B,YAAzB,CAAP;AACH,KAFD,MAEO;AACH,aAAO,IAAP;AACH;AACJ;AAvCsB,CAA3B;AAyCA,eAAe9B,oBAAf","sourcesContent":["/**\r\n * DevExtreme (esm/ui/diagram/ui.diagram.dialog_manager.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../../core/renderer\";\r\nimport {\r\n    getDiagram\r\n} from \"./diagram.importer\";\r\nimport messageLocalization from \"../../localization/message\";\r\nimport FileUploader from \"../file_uploader\";\r\nimport {\r\n    getWindow\r\n} from \"../../core/utils/window\";\r\nvar DiagramDialogManager = {\r\n    getConfigurations: function() {\r\n        var {\r\n            DiagramCommand: DiagramCommand\r\n        } = getDiagram();\r\n        return this.dialogList || (this.dialogList = [{\r\n            command: DiagramCommand.InsertShapeImage,\r\n            title: messageLocalization.format(\"dxDiagram-dialogInsertShapeImageTitle\"),\r\n            onGetContent: this.getChangeImageDialogContent\r\n        }, {\r\n            command: DiagramCommand.EditShapeImage,\r\n            title: messageLocalization.format(\"dxDiagram-dialogEditShapeImageTitle\"),\r\n            onGetContent: this.getChangeImageDialogContent\r\n        }])\r\n    },\r\n    getChangeImageDialogContent: function(args) {\r\n        var $uploader = $(\"<div>\");\r\n        args.component._createComponent($uploader, FileUploader, {\r\n            selectButtonText: messageLocalization.format(\"dxDiagram-dialogEditShapeImageSelectButton\"),\r\n            accept: \"image/*\",\r\n            uploadMode: \"useForm\",\r\n            onValueChanged: function(e) {\r\n                var window = getWindow();\r\n                var reader = new window.FileReader;\r\n                reader.onload = function(e) {\r\n                    args.component._commandParameter = e.target.result\r\n                };\r\n                reader.readAsDataURL(e.value[0])\r\n            }\r\n        });\r\n        return $uploader\r\n    },\r\n    getDialogParameters(command) {\r\n        var commandIndex = this.getConfigurations().map(c => c.command).indexOf(command);\r\n        if (commandIndex >= 0) {\r\n            return this.getConfigurations()[commandIndex]\r\n        } else {\r\n            return null\r\n        }\r\n    }\r\n};\r\nexport default DiagramDialogManager;\r\n"]},"metadata":{},"sourceType":"module"}