{"ast":null,"code":"import _classCallCheck from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/createSuper\";\n\n/**\r\n * DevExtreme (esm/core/templates/bindable_template.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../renderer\";\nimport { TemplateBase } from \"./template_base\";\nimport eventsEngine from \"../../events/core/events_engine\";\nimport { removeEvent } from \"../remove_event\";\nimport { isPrimitive } from \"../utils/type\";\n\nvar watchChanges = function watchChanges(rawData, watchMethod, fields, fieldsMap, callback) {\n  var fieldsDispose;\n\n  var globalDispose = function (data, watchMethod, callback) {\n    return watchMethod(function () {\n      return data;\n    }, callback);\n  }(rawData, watchMethod, function (dataWithRawFields) {\n    fieldsDispose && fieldsDispose();\n\n    if (isPrimitive(dataWithRawFields)) {\n      callback(dataWithRawFields);\n      return;\n    }\n\n    fieldsDispose = function (data, watchMethod, fields, fieldsMap, callback) {\n      var resolvedData = {};\n      var missedFields = fields.slice();\n      var watchHandlers = fields.map(function (name) {\n        var fieldGetter = fieldsMap[name];\n        return watchMethod(fieldGetter ? function () {\n          return fieldGetter(data);\n        } : function () {\n          return data[name];\n        }, function (value) {\n          resolvedData[name] = value;\n\n          if (missedFields.length) {\n            var index = missedFields.indexOf(name);\n\n            if (index >= 0) {\n              missedFields.splice(index, 1);\n            }\n          }\n\n          if (!missedFields.length) {\n            callback(resolvedData);\n          }\n        });\n      });\n      return function () {\n        watchHandlers.forEach(function (dispose) {\n          return dispose();\n        });\n      };\n    }(dataWithRawFields, watchMethod, fields, fieldsMap, callback);\n  });\n\n  return function () {\n    fieldsDispose && fieldsDispose();\n    globalDispose && globalDispose();\n  };\n};\n\nexport var BindableTemplate = /*#__PURE__*/function (_TemplateBase) {\n  _inherits(BindableTemplate, _TemplateBase);\n\n  var _super = _createSuper(BindableTemplate);\n\n  function BindableTemplate(render, fields, watchMethod, fieldsMap) {\n    var _this;\n\n    _classCallCheck(this, BindableTemplate);\n\n    _this = _super.call(this);\n    _this._render = render;\n    _this._fields = fields;\n    _this._fieldsMap = fieldsMap || {};\n    _this._watchMethod = watchMethod;\n    return _this;\n  }\n\n  _createClass(BindableTemplate, [{\n    key: \"_renderCore\",\n    value: function _renderCore(options) {\n      var _this2 = this;\n\n      var $container = $(options.container);\n      var dispose = watchChanges(options.model, this._watchMethod, this._fields, this._fieldsMap, function (data) {\n        $container.empty();\n\n        _this2._render($container, data, options.model);\n      });\n      eventsEngine.on($container, removeEvent, dispose);\n      return $container.contents();\n    }\n  }]);\n\n  return BindableTemplate;\n}(TemplateBase);","map":{"version":3,"sources":["C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/devextreme/esm/core/templates/bindable_template.js"],"names":["$","TemplateBase","eventsEngine","removeEvent","isPrimitive","watchChanges","rawData","watchMethod","fields","fieldsMap","callback","fieldsDispose","globalDispose","data","dataWithRawFields","resolvedData","missedFields","slice","watchHandlers","map","name","fieldGetter","value","length","index","indexOf","splice","forEach","dispose","BindableTemplate","render","_render","_fields","_fieldsMap","_watchMethod","options","$container","container","model","empty","on","contents"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/core/templates/bindable_template.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../renderer\";\r\nimport {\r\n    TemplateBase\r\n} from \"./template_base\";\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nimport {\r\n    removeEvent\r\n} from \"../remove_event\";\r\nimport {\r\n    isPrimitive\r\n} from \"../utils/type\";\r\nvar watchChanges = function(rawData, watchMethod, fields, fieldsMap, callback) {\r\n    var fieldsDispose;\r\n    var globalDispose = ((data, watchMethod, callback) => watchMethod(() => data, callback))(rawData, watchMethod, (function(dataWithRawFields) {\r\n        fieldsDispose && fieldsDispose();\r\n        if (isPrimitive(dataWithRawFields)) {\r\n            callback(dataWithRawFields);\r\n            return\r\n        }\r\n        fieldsDispose = function(data, watchMethod, fields, fieldsMap, callback) {\r\n            var resolvedData = {};\r\n            var missedFields = fields.slice();\r\n            var watchHandlers = fields.map((function(name) {\r\n                var fieldGetter = fieldsMap[name];\r\n                return watchMethod(fieldGetter ? () => fieldGetter(data) : () => data[name], (function(value) {\r\n                    resolvedData[name] = value;\r\n                    if (missedFields.length) {\r\n                        var index = missedFields.indexOf(name);\r\n                        if (index >= 0) {\r\n                            missedFields.splice(index, 1)\r\n                        }\r\n                    }\r\n                    if (!missedFields.length) {\r\n                        callback(resolvedData)\r\n                    }\r\n                }))\r\n            }));\r\n            return function() {\r\n                watchHandlers.forEach(dispose => dispose())\r\n            }\r\n        }(dataWithRawFields, watchMethod, fields, fieldsMap, callback)\r\n    }));\r\n    return function() {\r\n        fieldsDispose && fieldsDispose();\r\n        globalDispose && globalDispose()\r\n    }\r\n};\r\nexport class BindableTemplate extends TemplateBase {\r\n    constructor(render, fields, watchMethod, fieldsMap) {\r\n        super();\r\n        this._render = render;\r\n        this._fields = fields;\r\n        this._fieldsMap = fieldsMap || {};\r\n        this._watchMethod = watchMethod\r\n    }\r\n    _renderCore(options) {\r\n        var $container = $(options.container);\r\n        var dispose = watchChanges(options.model, this._watchMethod, this._fields, this._fieldsMap, data => {\r\n            $container.empty();\r\n            this._render($container, data, options.model)\r\n        });\r\n        eventsEngine.on($container, removeEvent, dispose);\r\n        return $container.contents()\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}