{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/pivot_grid/ui.pivot_grid.area_item.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../core/renderer\";\nimport Class from \"../../core/class\";\nimport { getPublicElement } from \"../../core/element\";\nimport { extend } from \"../../core/utils/extend\";\nimport { getBoundingRect } from \"../../core/utils/position\";\nimport { isDefined } from \"../../core/utils/type\";\nvar PIVOTGRID_EXPAND_CLASS = \"dx-expand\";\n\nvar getRealElementWidth = function getRealElementWidth(element) {\n  var width = 0;\n  var offsetWidth = element.offsetWidth;\n\n  if (element.getBoundingClientRect) {\n    var clientRect = getBoundingRect(element);\n    width = clientRect.width;\n\n    if (!width) {\n      width = clientRect.right - clientRect.left;\n    }\n\n    if (width <= offsetWidth - 1) {\n      width = offsetWidth;\n    }\n  }\n\n  return width > 0 ? width : offsetWidth;\n};\n\nfunction getFakeTableOffset(scrollPos, elementOffset, tableSize, viewPortSize) {\n  var offset = 0;\n  var halfTableCount = 0;\n  var halfTableSize = tableSize / 2;\n\n  if (scrollPos + viewPortSize - (elementOffset + tableSize) > 1) {\n    if (scrollPos >= elementOffset + tableSize + halfTableSize) {\n      halfTableCount = parseInt((scrollPos - (elementOffset + tableSize)) / halfTableSize, 10);\n    }\n\n    offset = elementOffset + tableSize + halfTableSize * halfTableCount;\n  } else if (scrollPos < elementOffset) {\n    if (scrollPos <= elementOffset - halfTableSize) {\n      halfTableCount = parseInt((scrollPos - (elementOffset - halfTableSize)) / halfTableSize, 10);\n    }\n\n    offset = elementOffset - (tableSize - halfTableSize * halfTableCount);\n  } else {\n    offset = elementOffset;\n  }\n\n  return offset;\n}\n\nexport var AreaItem = Class.inherit({\n  _getRowElement: function _getRowElement(index) {\n    if (this._tableElement && this._tableElement.length > 0) {\n      return this._tableElement[0].rows[index];\n    }\n\n    return null;\n  },\n  _createGroupElement: function _createGroupElement() {\n    return $(\"<div>\");\n  },\n  _createTableElement: function _createTableElement() {\n    return $(\"<table>\");\n  },\n  _getCellText: function _getCellText(cell, encodeHtml) {\n    var cellText = cell.isWhiteSpace ? \"&nbsp\" : cell.text || \"&nbsp\";\n\n    if (encodeHtml && (-1 !== cellText.indexOf(\"<\") || -1 !== cellText.indexOf(\">\"))) {\n      cellText = $(\"<div>\").text(cellText).html();\n    }\n\n    return cellText;\n  },\n  _getRowClassNames: function _getRowClassNames() {},\n  _applyCustomStyles: function _applyCustomStyles(options) {\n    if (options.cell.width) {\n      options.cssArray.push(\"min-width:\" + options.cell.width + \"px\");\n    }\n\n    if (options.cell.sorted) {\n      options.classArray.push(\"dx-pivotgrid-sorted\");\n    }\n  },\n  _getMainElementMarkup: function _getMainElementMarkup() {\n    return \"<tbody>\";\n  },\n  _getCloseMainElementMarkup: function _getCloseMainElementMarkup() {\n    return \"</tbody>\";\n  },\n  _renderTableContent: function _renderTableContent(tableElement, data) {\n    var rowsCount = data.length;\n    var row;\n    var cell;\n    var i;\n    var j;\n    var cellText;\n    var rtlEnabled = this.option(\"rtlEnabled\");\n    var markupArray = [];\n    var encodeHtml = this.option(\"encodeHtml\");\n    var rowClassNames;\n    tableElement.data(\"area\", this._getAreaName());\n    tableElement.data(\"data\", data);\n    tableElement.css(\"width\", \"\");\n    markupArray.push(this._getMainElementMarkup());\n\n    for (i = 0; i < rowsCount; i++) {\n      row = data[i];\n      var columnMarkupArray = [];\n      rowClassNames = [];\n      markupArray.push(\"<tr \");\n\n      for (j = 0; j < row.length; j++) {\n        cell = row[j];\n\n        this._getRowClassNames(i, cell, rowClassNames);\n\n        columnMarkupArray.push(\"<td \");\n\n        if (cell) {\n          cell.rowspan && columnMarkupArray.push(\"rowspan='\" + (cell.rowspan || 1) + \"'\");\n          cell.colspan && columnMarkupArray.push(\"colspan='\" + (cell.colspan || 1) + \"'\");\n          var styleOptions = {\n            cellElement: void 0,\n            cell: cell,\n            cellsCount: row.length,\n            cellIndex: j,\n            rowElement: void 0,\n            rowIndex: i,\n            rowsCount: rowsCount,\n            rtlEnabled: rtlEnabled,\n            classArray: [],\n            cssArray: []\n          };\n\n          this._applyCustomStyles(styleOptions);\n\n          if (styleOptions.cssArray.length) {\n            columnMarkupArray.push(\"style='\");\n            columnMarkupArray.push(styleOptions.cssArray.join(\";\"));\n            columnMarkupArray.push(\"'\");\n          }\n\n          if (styleOptions.classArray.length) {\n            columnMarkupArray.push(\"class='\");\n            columnMarkupArray.push(styleOptions.classArray.join(\" \"));\n            columnMarkupArray.push(\"'\");\n          }\n\n          columnMarkupArray.push(\">\");\n\n          if (isDefined(cell.expanded)) {\n            columnMarkupArray.push(\"<div class='dx-expand-icon-container'><span class='\" + PIVOTGRID_EXPAND_CLASS + \"'></span></div>\");\n          }\n\n          cellText = this._getCellText(cell, encodeHtml);\n        } else {\n          cellText = \"\";\n        }\n\n        columnMarkupArray.push(\"<span \");\n\n        if (isDefined(cell.wordWrapEnabled)) {\n          columnMarkupArray.push(\"style='white-space:\", cell.wordWrapEnabled ? \"normal\" : \"nowrap\", \";'\");\n        }\n\n        columnMarkupArray.push(\">\" + cellText + \"</span>\");\n\n        if (cell.sorted) {\n          columnMarkupArray.push(\"<span class='dx-icon-sorted'></span>\");\n        }\n\n        columnMarkupArray.push(\"</td>\");\n      }\n\n      if (rowClassNames.length) {\n        markupArray.push(\"class='\");\n        markupArray.push(rowClassNames.join(\" \"));\n        markupArray.push(\"'\");\n      }\n\n      markupArray.push(\">\");\n      markupArray.push(columnMarkupArray.join(\"\"));\n      markupArray.push(\"</tr>\");\n    }\n\n    markupArray.push(this._getCloseMainElementMarkup());\n    tableElement.append(markupArray.join(\"\"));\n\n    this._triggerOnCellPrepared(tableElement, data);\n  },\n  _triggerOnCellPrepared: function _triggerOnCellPrepared(tableElement, data) {\n    var rowElements = tableElement.find(\"tr\");\n\n    var areaName = this._getAreaName();\n\n    var onCellPrepared = this.option(\"onCellPrepared\");\n\n    var hasEvent = this.component._eventsStrategy.hasEvent(\"cellPrepared\");\n\n    var rowElement;\n    var $cellElement;\n    var onCellPreparedArgs;\n\n    var defaultActionArgs = this.component._defaultActionArgs();\n\n    var row;\n    var cell;\n    var rowIndex;\n    var columnIndex;\n\n    if (onCellPrepared || hasEvent) {\n      for (rowIndex = 0; rowIndex < data.length; rowIndex++) {\n        row = data[rowIndex];\n        rowElement = rowElements.eq(rowIndex);\n\n        for (columnIndex = 0; columnIndex < row.length; columnIndex++) {\n          cell = row[columnIndex];\n          $cellElement = rowElement.children().eq(columnIndex);\n          onCellPreparedArgs = {\n            area: areaName,\n            rowIndex: rowIndex,\n            columnIndex: columnIndex,\n            cellElement: getPublicElement($cellElement),\n            cell: cell\n          };\n\n          if (hasEvent) {\n            this.component._trigger(\"onCellPrepared\", onCellPreparedArgs);\n          } else {\n            onCellPrepared(extend(onCellPreparedArgs, defaultActionArgs));\n          }\n        }\n      }\n    }\n  },\n  _getRowHeight: function _getRowHeight(index) {\n    var row = this._getRowElement(index);\n\n    var height = 0;\n    var offsetHeight = row.offsetHeight;\n\n    if (row && row.lastChild) {\n      if (row.getBoundingClientRect) {\n        var clientRect = getBoundingRect(row);\n        height = clientRect.height;\n\n        if (height <= offsetHeight - 1) {\n          height = offsetHeight;\n        }\n      }\n\n      return height > 0 ? height : offsetHeight;\n    }\n\n    return 0;\n  },\n  _setRowHeight: function _setRowHeight(index, value) {\n    var row = this._getRowElement(index);\n\n    if (row) {\n      row.style.height = value + \"px\";\n    }\n  },\n  ctor: function ctor(component) {\n    this.component = component;\n  },\n  option: function option() {\n    return this.component.option.apply(this.component, arguments);\n  },\n  getRowsLength: function getRowsLength() {\n    if (this._tableElement && this._tableElement.length > 0) {\n      return this._tableElement[0].rows.length;\n    }\n\n    return 0;\n  },\n  getRowsHeight: function getRowsHeight() {\n    var result = [];\n    var rowsLength = this.getRowsLength();\n    var i;\n\n    for (i = 0; i < rowsLength; i++) {\n      result.push(this._getRowHeight(i));\n    }\n\n    return result;\n  },\n  setRowsHeight: function setRowsHeight(values) {\n    var totalHeight = 0;\n    var valuesLength = values.length;\n    var i;\n\n    for (i = 0; i < valuesLength; i++) {\n      totalHeight += values[i];\n\n      this._setRowHeight(i, values[i]);\n    }\n\n    this._tableHeight = totalHeight;\n    this._tableElement[0].style.height = totalHeight + \"px\";\n  },\n  getColumnsWidth: function getColumnsWidth() {\n    var rowsLength = this.getRowsLength();\n    var rowIndex;\n    var row;\n    var i;\n    var columnIndex;\n    var processedCells = [];\n    var result = [];\n\n    var fillCells = function fillCells(cells, rowIndex, columnIndex, rowSpan, colSpan) {\n      var rowOffset;\n      var columnOffset;\n\n      for (rowOffset = 0; rowOffset < rowSpan; rowOffset++) {\n        for (columnOffset = 0; columnOffset < colSpan; columnOffset++) {\n          cells[rowIndex + rowOffset] = cells[rowIndex + rowOffset] || [];\n          cells[rowIndex + rowOffset][columnIndex + columnOffset] = true;\n        }\n      }\n    };\n\n    if (rowsLength) {\n      for (rowIndex = 0; rowIndex < rowsLength; rowIndex++) {\n        processedCells[rowIndex] = processedCells[rowIndex] || [];\n        row = this._getRowElement(rowIndex);\n\n        for (i = 0; i < row.cells.length; i++) {\n          for (columnIndex = 0; processedCells[rowIndex][columnIndex]; columnIndex++) {}\n\n          fillCells(processedCells, rowIndex, columnIndex, row.cells[i].rowSpan, row.cells[i].colSpan);\n\n          if (1 === row.cells[i].colSpan) {\n            result[columnIndex] = result[columnIndex] || getRealElementWidth(row.cells[i]);\n          }\n        }\n      }\n    }\n\n    return result;\n  },\n  setColumnsWidth: function setColumnsWidth(values) {\n    var i;\n    var tableElement = this._tableElement[0];\n    var colgroupElementHTML = \"\";\n    var columnsCount = this.getColumnsCount();\n    var columnWidth = [];\n\n    for (i = 0; i < columnsCount; i++) {\n      columnWidth.push(values[i] || 0);\n    }\n\n    for (i = columnsCount; i < values.length && values; i++) {\n      columnWidth[columnsCount - 1] += values[i];\n    }\n\n    for (i = 0; i < columnsCount; i++) {\n      colgroupElementHTML += '<col style=\"width: ' + columnWidth[i] + 'px\">';\n    }\n\n    this._colgroupElement.html(colgroupElementHTML);\n\n    this._tableWidth = columnWidth.reduce(function (sum, width) {\n      return sum + width;\n    }, 0);\n    tableElement.style.width = this._tableWidth + \"px\";\n    tableElement.style.tableLayout = \"fixed\";\n  },\n  resetColumnsWidth: function resetColumnsWidth() {\n    this._colgroupElement.find(\"col\").width(\"auto\");\n\n    this._tableElement.css({\n      width: \"\",\n      tableLayout: \"\"\n    });\n  },\n  groupWidth: function groupWidth(value) {\n    if (void 0 === value) {\n      return this._groupElement.width();\n    } else if (value >= 0) {\n      this._groupWidth = value;\n      return this._groupElement[0].style.width = value + \"px\";\n    } else {\n      return this._groupElement[0].style.width = value;\n    }\n  },\n  groupHeight: function groupHeight(value) {\n    if (void 0 === value) {\n      return this._groupElement.height();\n    }\n\n    this._groupHeight = null;\n\n    if (value >= 0) {\n      this._groupHeight = value;\n      this._groupElement[0].style.height = value + \"px\";\n    } else {\n      this._groupElement[0].style.height = value;\n    }\n  },\n  groupElement: function groupElement() {\n    return this._groupElement;\n  },\n  tableElement: function tableElement() {\n    return this._tableElement;\n  },\n  element: function element() {\n    return this._rootElement;\n  },\n  headElement: function headElement() {\n    return this._tableElement.find(\"thead\");\n  },\n  _setTableCss: function _setTableCss(styles) {\n    if (this.option(\"rtlEnabled\")) {\n      styles.right = styles.left;\n      delete styles.left;\n    }\n\n    this.tableElement().css(styles);\n  },\n  setVirtualContentParams: function setVirtualContentParams(params) {\n    this._virtualContent.css({\n      width: params.width,\n      height: params.height\n    });\n\n    this.groupElement().addClass(\"dx-virtual-mode\");\n  },\n  disableVirtualMode: function disableVirtualMode() {\n    this.groupElement().removeClass(\"dx-virtual-mode\");\n  },\n  _renderVirtualContent: function _renderVirtualContent() {\n    if (!this._virtualContent && \"virtual\" === this.option(\"scrolling.mode\")) {\n      this._virtualContent = $(\"<div>\").addClass(\"dx-virtual-content\").insertBefore(this._tableElement);\n    }\n  },\n  reset: function reset() {\n    var tableElement = this._tableElement[0];\n    this._fakeTable && this._fakeTable.detach();\n    this._fakeTable = null;\n    this.disableVirtualMode();\n    this.groupWidth(\"100%\");\n    this.groupHeight(\"auto\");\n    this.resetColumnsWidth();\n\n    if (tableElement) {\n      for (var i = 0; i < tableElement.rows.length; i++) {\n        tableElement.rows[i].style.height = \"\";\n      }\n\n      tableElement.style.height = \"\";\n      tableElement.style.width = \"100%\";\n    }\n  },\n  _updateFakeTableVisibility: function _updateFakeTableVisibility() {\n    var tableElement = this.tableElement()[0];\n    var horizontalOffsetName = this.option(\"rtlEnabled\") ? \"right\" : \"left\";\n    var fakeTableElement = this._fakeTable[0];\n\n    if (tableElement.style.top === fakeTableElement.style.top && fakeTableElement.style[horizontalOffsetName] === tableElement.style[horizontalOffsetName]) {\n      this._fakeTable.addClass(\"dx-hidden\");\n    } else {\n      this._fakeTable.removeClass(\"dx-hidden\");\n    }\n  },\n  _moveFakeTableHorizontally: function _moveFakeTableHorizontally(scrollPos) {\n    var rtlEnabled = this.option(\"rtlEnabled\");\n    var offsetStyleName = rtlEnabled ? \"right\" : \"left\";\n    var tableElementOffset = parseFloat(this.tableElement()[0].style[offsetStyleName]);\n    var offset = getFakeTableOffset(scrollPos, tableElementOffset, this._tableWidth, this._groupWidth);\n\n    if (parseFloat(this._fakeTable[0].style[offsetStyleName]) !== offset) {\n      this._fakeTable[0].style[offsetStyleName] = offset + \"px\";\n    }\n  },\n  _moveFakeTableTop: function _moveFakeTableTop(scrollPos) {\n    var tableElementOffsetTop = parseFloat(this.tableElement()[0].style.top);\n    var offsetTop = getFakeTableOffset(scrollPos, tableElementOffsetTop, this._tableHeight, this._groupHeight);\n\n    if (parseFloat(this._fakeTable[0].style.top) !== offsetTop) {\n      this._fakeTable[0].style.top = offsetTop + \"px\";\n    }\n  },\n  _moveFakeTable: function _moveFakeTable() {\n    this._updateFakeTableVisibility();\n  },\n  _createFakeTable: function _createFakeTable() {\n    if (!this._fakeTable) {\n      this._fakeTable = this.tableElement().clone().addClass(\"dx-pivot-grid-fake-table\").appendTo(this._virtualContent);\n    }\n  },\n  render: function render(rootElement, data) {\n    if (this._tableElement) {\n      try {\n        this._tableElement[0].innerHTML = \"\";\n      } catch (e) {\n        this._tableElement.empty();\n      }\n\n      this._tableElement.attr(\"style\", \"\");\n    } else {\n      this._groupElement = this._createGroupElement();\n      this._tableElement = this._createTableElement();\n\n      this._tableElement.appendTo(this._groupElement);\n\n      this._groupElement.appendTo(rootElement);\n\n      this._rootElement = rootElement;\n    }\n\n    this._colgroupElement = $(\"<colgroup>\").appendTo(this._tableElement);\n\n    this._renderTableContent(this._tableElement, data);\n\n    this._renderVirtualContent();\n  },\n  _getScrollable: function _getScrollable() {\n    return this.groupElement().data(\"dxScrollable\");\n  },\n  on: function on(eventName, handler) {\n    var that = this;\n\n    var scrollable = that._getScrollable();\n\n    if (scrollable) {\n      scrollable.on(eventName, function (e) {\n        if (that.option(\"rtlEnabled\") && isDefined(e.scrollOffset.left)) {\n          e.scrollOffset.left = scrollable.$content().width() - scrollable._container().width() - e.scrollOffset.left;\n        }\n\n        handler(e);\n      });\n    }\n\n    return this;\n  },\n  off: function off(eventName) {\n    var scrollable = this._getScrollable();\n\n    if (scrollable) {\n      scrollable.off(eventName);\n    }\n\n    return this;\n  },\n  scrollTo: function scrollTo(pos) {\n    var scrollable = this._getScrollable();\n\n    var scrollablePos = pos;\n\n    if (scrollable) {\n      if (this.option(\"rtlEnabled\")) {\n        if (\"column\" === this._getAreaName()) {\n          scrollablePos = scrollable.$content().width() - scrollable._container().width() - pos;\n        } else if (\"data\" === this._getAreaName()) {\n          scrollablePos = {\n            x: scrollable.$content().width() - scrollable._container().width() - pos.x,\n            y: pos.y\n          };\n        }\n      }\n\n      scrollable.scrollTo(scrollablePos);\n\n      if (this._virtualContent) {\n        this._createFakeTable();\n\n        this._moveFakeTable(pos);\n      }\n    }\n  },\n  updateScrollable: function updateScrollable() {\n    var scrollable = this._getScrollable();\n\n    if (scrollable) {\n      return scrollable.update();\n    }\n  },\n  getColumnsCount: function getColumnsCount() {\n    var columnCount = 0;\n\n    var row = this._getRowElement(0);\n\n    var cells;\n\n    if (row) {\n      cells = row.cells;\n\n      for (var i = 0, len = cells.length; i < len; ++i) {\n        columnCount += cells[i].colSpan;\n      }\n    }\n\n    return columnCount;\n  },\n  getData: function getData() {\n    var tableElement = this._tableElement;\n    return tableElement ? tableElement.data(\"data\") : [];\n  }\n});","map":{"version":3,"sources":["C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/devextreme/esm/ui/pivot_grid/ui.pivot_grid.area_item.js"],"names":["$","Class","getPublicElement","extend","getBoundingRect","isDefined","PIVOTGRID_EXPAND_CLASS","getRealElementWidth","element","width","offsetWidth","getBoundingClientRect","clientRect","right","left","getFakeTableOffset","scrollPos","elementOffset","tableSize","viewPortSize","offset","halfTableCount","halfTableSize","parseInt","AreaItem","inherit","_getRowElement","index","_tableElement","length","rows","_createGroupElement","_createTableElement","_getCellText","cell","encodeHtml","cellText","isWhiteSpace","text","indexOf","html","_getRowClassNames","_applyCustomStyles","options","cssArray","push","sorted","classArray","_getMainElementMarkup","_getCloseMainElementMarkup","_renderTableContent","tableElement","data","rowsCount","row","i","j","rtlEnabled","option","markupArray","rowClassNames","_getAreaName","css","columnMarkupArray","rowspan","colspan","styleOptions","cellElement","cellsCount","cellIndex","rowElement","rowIndex","join","expanded","wordWrapEnabled","append","_triggerOnCellPrepared","rowElements","find","areaName","onCellPrepared","hasEvent","component","_eventsStrategy","$cellElement","onCellPreparedArgs","defaultActionArgs","_defaultActionArgs","columnIndex","eq","children","area","_trigger","_getRowHeight","height","offsetHeight","lastChild","_setRowHeight","value","style","ctor","apply","arguments","getRowsLength","getRowsHeight","result","rowsLength","setRowsHeight","values","totalHeight","valuesLength","_tableHeight","getColumnsWidth","processedCells","fillCells","cells","rowSpan","colSpan","rowOffset","columnOffset","setColumnsWidth","colgroupElementHTML","columnsCount","getColumnsCount","columnWidth","_colgroupElement","_tableWidth","reduce","sum","tableLayout","resetColumnsWidth","groupWidth","_groupElement","_groupWidth","groupHeight","_groupHeight","groupElement","_rootElement","headElement","_setTableCss","styles","setVirtualContentParams","params","_virtualContent","addClass","disableVirtualMode","removeClass","_renderVirtualContent","insertBefore","reset","_fakeTable","detach","_updateFakeTableVisibility","horizontalOffsetName","fakeTableElement","top","_moveFakeTableHorizontally","offsetStyleName","tableElementOffset","parseFloat","_moveFakeTableTop","tableElementOffsetTop","offsetTop","_moveFakeTable","_createFakeTable","clone","appendTo","render","rootElement","innerHTML","e","empty","attr","_getScrollable","on","eventName","handler","that","scrollable","scrollOffset","$content","_container","off","scrollTo","pos","scrollablePos","x","y","updateScrollable","update","columnCount","len","getData"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/pivot_grid/ui.pivot_grid.area_item.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../../core/renderer\";\r\nimport Class from \"../../core/class\";\r\nimport {\r\n    getPublicElement\r\n} from \"../../core/element\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    getBoundingRect\r\n} from \"../../core/utils/position\";\r\nimport {\r\n    isDefined\r\n} from \"../../core/utils/type\";\r\nvar PIVOTGRID_EXPAND_CLASS = \"dx-expand\";\r\nvar getRealElementWidth = function(element) {\r\n    var width = 0;\r\n    var offsetWidth = element.offsetWidth;\r\n    if (element.getBoundingClientRect) {\r\n        var clientRect = getBoundingRect(element);\r\n        width = clientRect.width;\r\n        if (!width) {\r\n            width = clientRect.right - clientRect.left\r\n        }\r\n        if (width <= offsetWidth - 1) {\r\n            width = offsetWidth\r\n        }\r\n    }\r\n    return width > 0 ? width : offsetWidth\r\n};\r\n\r\nfunction getFakeTableOffset(scrollPos, elementOffset, tableSize, viewPortSize) {\r\n    var offset = 0;\r\n    var halfTableCount = 0;\r\n    var halfTableSize = tableSize / 2;\r\n    if (scrollPos + viewPortSize - (elementOffset + tableSize) > 1) {\r\n        if (scrollPos >= elementOffset + tableSize + halfTableSize) {\r\n            halfTableCount = parseInt((scrollPos - (elementOffset + tableSize)) / halfTableSize, 10)\r\n        }\r\n        offset = elementOffset + tableSize + halfTableSize * halfTableCount\r\n    } else if (scrollPos < elementOffset) {\r\n        if (scrollPos <= elementOffset - halfTableSize) {\r\n            halfTableCount = parseInt((scrollPos - (elementOffset - halfTableSize)) / halfTableSize, 10)\r\n        }\r\n        offset = elementOffset - (tableSize - halfTableSize * halfTableCount)\r\n    } else {\r\n        offset = elementOffset\r\n    }\r\n    return offset\r\n}\r\nexport var AreaItem = Class.inherit({\r\n    _getRowElement: function(index) {\r\n        if (this._tableElement && this._tableElement.length > 0) {\r\n            return this._tableElement[0].rows[index]\r\n        }\r\n        return null\r\n    },\r\n    _createGroupElement: function() {\r\n        return $(\"<div>\")\r\n    },\r\n    _createTableElement: function() {\r\n        return $(\"<table>\")\r\n    },\r\n    _getCellText: function(cell, encodeHtml) {\r\n        var cellText = cell.isWhiteSpace ? \"&nbsp\" : cell.text || \"&nbsp\";\r\n        if (encodeHtml && (-1 !== cellText.indexOf(\"<\") || -1 !== cellText.indexOf(\">\"))) {\r\n            cellText = $(\"<div>\").text(cellText).html()\r\n        }\r\n        return cellText\r\n    },\r\n    _getRowClassNames: function() {},\r\n    _applyCustomStyles: function(options) {\r\n        if (options.cell.width) {\r\n            options.cssArray.push(\"min-width:\" + options.cell.width + \"px\")\r\n        }\r\n        if (options.cell.sorted) {\r\n            options.classArray.push(\"dx-pivotgrid-sorted\")\r\n        }\r\n    },\r\n    _getMainElementMarkup: function() {\r\n        return \"<tbody>\"\r\n    },\r\n    _getCloseMainElementMarkup: function() {\r\n        return \"</tbody>\"\r\n    },\r\n    _renderTableContent: function(tableElement, data) {\r\n        var rowsCount = data.length;\r\n        var row;\r\n        var cell;\r\n        var i;\r\n        var j;\r\n        var cellText;\r\n        var rtlEnabled = this.option(\"rtlEnabled\");\r\n        var markupArray = [];\r\n        var encodeHtml = this.option(\"encodeHtml\");\r\n        var rowClassNames;\r\n        tableElement.data(\"area\", this._getAreaName());\r\n        tableElement.data(\"data\", data);\r\n        tableElement.css(\"width\", \"\");\r\n        markupArray.push(this._getMainElementMarkup());\r\n        for (i = 0; i < rowsCount; i++) {\r\n            row = data[i];\r\n            var columnMarkupArray = [];\r\n            rowClassNames = [];\r\n            markupArray.push(\"<tr \");\r\n            for (j = 0; j < row.length; j++) {\r\n                cell = row[j];\r\n                this._getRowClassNames(i, cell, rowClassNames);\r\n                columnMarkupArray.push(\"<td \");\r\n                if (cell) {\r\n                    cell.rowspan && columnMarkupArray.push(\"rowspan='\" + (cell.rowspan || 1) + \"'\");\r\n                    cell.colspan && columnMarkupArray.push(\"colspan='\" + (cell.colspan || 1) + \"'\");\r\n                    var styleOptions = {\r\n                        cellElement: void 0,\r\n                        cell: cell,\r\n                        cellsCount: row.length,\r\n                        cellIndex: j,\r\n                        rowElement: void 0,\r\n                        rowIndex: i,\r\n                        rowsCount: rowsCount,\r\n                        rtlEnabled: rtlEnabled,\r\n                        classArray: [],\r\n                        cssArray: []\r\n                    };\r\n                    this._applyCustomStyles(styleOptions);\r\n                    if (styleOptions.cssArray.length) {\r\n                        columnMarkupArray.push(\"style='\");\r\n                        columnMarkupArray.push(styleOptions.cssArray.join(\";\"));\r\n                        columnMarkupArray.push(\"'\")\r\n                    }\r\n                    if (styleOptions.classArray.length) {\r\n                        columnMarkupArray.push(\"class='\");\r\n                        columnMarkupArray.push(styleOptions.classArray.join(\" \"));\r\n                        columnMarkupArray.push(\"'\")\r\n                    }\r\n                    columnMarkupArray.push(\">\");\r\n                    if (isDefined(cell.expanded)) {\r\n                        columnMarkupArray.push(\"<div class='dx-expand-icon-container'><span class='\" + PIVOTGRID_EXPAND_CLASS + \"'></span></div>\")\r\n                    }\r\n                    cellText = this._getCellText(cell, encodeHtml)\r\n                } else {\r\n                    cellText = \"\"\r\n                }\r\n                columnMarkupArray.push(\"<span \");\r\n                if (isDefined(cell.wordWrapEnabled)) {\r\n                    columnMarkupArray.push(\"style='white-space:\", cell.wordWrapEnabled ? \"normal\" : \"nowrap\", \";'\")\r\n                }\r\n                columnMarkupArray.push(\">\" + cellText + \"</span>\");\r\n                if (cell.sorted) {\r\n                    columnMarkupArray.push(\"<span class='dx-icon-sorted'></span>\")\r\n                }\r\n                columnMarkupArray.push(\"</td>\")\r\n            }\r\n            if (rowClassNames.length) {\r\n                markupArray.push(\"class='\");\r\n                markupArray.push(rowClassNames.join(\" \"));\r\n                markupArray.push(\"'\")\r\n            }\r\n            markupArray.push(\">\");\r\n            markupArray.push(columnMarkupArray.join(\"\"));\r\n            markupArray.push(\"</tr>\")\r\n        }\r\n        markupArray.push(this._getCloseMainElementMarkup());\r\n        tableElement.append(markupArray.join(\"\"));\r\n        this._triggerOnCellPrepared(tableElement, data)\r\n    },\r\n    _triggerOnCellPrepared: function(tableElement, data) {\r\n        var rowElements = tableElement.find(\"tr\");\r\n        var areaName = this._getAreaName();\r\n        var onCellPrepared = this.option(\"onCellPrepared\");\r\n        var hasEvent = this.component._eventsStrategy.hasEvent(\"cellPrepared\");\r\n        var rowElement;\r\n        var $cellElement;\r\n        var onCellPreparedArgs;\r\n        var defaultActionArgs = this.component._defaultActionArgs();\r\n        var row;\r\n        var cell;\r\n        var rowIndex;\r\n        var columnIndex;\r\n        if (onCellPrepared || hasEvent) {\r\n            for (rowIndex = 0; rowIndex < data.length; rowIndex++) {\r\n                row = data[rowIndex];\r\n                rowElement = rowElements.eq(rowIndex);\r\n                for (columnIndex = 0; columnIndex < row.length; columnIndex++) {\r\n                    cell = row[columnIndex];\r\n                    $cellElement = rowElement.children().eq(columnIndex);\r\n                    onCellPreparedArgs = {\r\n                        area: areaName,\r\n                        rowIndex: rowIndex,\r\n                        columnIndex: columnIndex,\r\n                        cellElement: getPublicElement($cellElement),\r\n                        cell: cell\r\n                    };\r\n                    if (hasEvent) {\r\n                        this.component._trigger(\"onCellPrepared\", onCellPreparedArgs)\r\n                    } else {\r\n                        onCellPrepared(extend(onCellPreparedArgs, defaultActionArgs))\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _getRowHeight: function(index) {\r\n        var row = this._getRowElement(index);\r\n        var height = 0;\r\n        var offsetHeight = row.offsetHeight;\r\n        if (row && row.lastChild) {\r\n            if (row.getBoundingClientRect) {\r\n                var clientRect = getBoundingRect(row);\r\n                height = clientRect.height;\r\n                if (height <= offsetHeight - 1) {\r\n                    height = offsetHeight\r\n                }\r\n            }\r\n            return height > 0 ? height : offsetHeight\r\n        }\r\n        return 0\r\n    },\r\n    _setRowHeight: function(index, value) {\r\n        var row = this._getRowElement(index);\r\n        if (row) {\r\n            row.style.height = value + \"px\"\r\n        }\r\n    },\r\n    ctor: function(component) {\r\n        this.component = component\r\n    },\r\n    option: function() {\r\n        return this.component.option.apply(this.component, arguments)\r\n    },\r\n    getRowsLength: function() {\r\n        if (this._tableElement && this._tableElement.length > 0) {\r\n            return this._tableElement[0].rows.length\r\n        }\r\n        return 0\r\n    },\r\n    getRowsHeight: function() {\r\n        var result = [];\r\n        var rowsLength = this.getRowsLength();\r\n        var i;\r\n        for (i = 0; i < rowsLength; i++) {\r\n            result.push(this._getRowHeight(i))\r\n        }\r\n        return result\r\n    },\r\n    setRowsHeight: function(values) {\r\n        var totalHeight = 0;\r\n        var valuesLength = values.length;\r\n        var i;\r\n        for (i = 0; i < valuesLength; i++) {\r\n            totalHeight += values[i];\r\n            this._setRowHeight(i, values[i])\r\n        }\r\n        this._tableHeight = totalHeight;\r\n        this._tableElement[0].style.height = totalHeight + \"px\"\r\n    },\r\n    getColumnsWidth: function() {\r\n        var rowsLength = this.getRowsLength();\r\n        var rowIndex;\r\n        var row;\r\n        var i;\r\n        var columnIndex;\r\n        var processedCells = [];\r\n        var result = [];\r\n        var fillCells = function(cells, rowIndex, columnIndex, rowSpan, colSpan) {\r\n            var rowOffset;\r\n            var columnOffset;\r\n            for (rowOffset = 0; rowOffset < rowSpan; rowOffset++) {\r\n                for (columnOffset = 0; columnOffset < colSpan; columnOffset++) {\r\n                    cells[rowIndex + rowOffset] = cells[rowIndex + rowOffset] || [];\r\n                    cells[rowIndex + rowOffset][columnIndex + columnOffset] = true\r\n                }\r\n            }\r\n        };\r\n        if (rowsLength) {\r\n            for (rowIndex = 0; rowIndex < rowsLength; rowIndex++) {\r\n                processedCells[rowIndex] = processedCells[rowIndex] || [];\r\n                row = this._getRowElement(rowIndex);\r\n                for (i = 0; i < row.cells.length; i++) {\r\n                    for (columnIndex = 0; processedCells[rowIndex][columnIndex]; columnIndex++) {}\r\n                    fillCells(processedCells, rowIndex, columnIndex, row.cells[i].rowSpan, row.cells[i].colSpan);\r\n                    if (1 === row.cells[i].colSpan) {\r\n                        result[columnIndex] = result[columnIndex] || getRealElementWidth(row.cells[i])\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return result\r\n    },\r\n    setColumnsWidth: function(values) {\r\n        var i;\r\n        var tableElement = this._tableElement[0];\r\n        var colgroupElementHTML = \"\";\r\n        var columnsCount = this.getColumnsCount();\r\n        var columnWidth = [];\r\n        for (i = 0; i < columnsCount; i++) {\r\n            columnWidth.push(values[i] || 0)\r\n        }\r\n        for (i = columnsCount; i < values.length && values; i++) {\r\n            columnWidth[columnsCount - 1] += values[i]\r\n        }\r\n        for (i = 0; i < columnsCount; i++) {\r\n            colgroupElementHTML += '<col style=\"width: ' + columnWidth[i] + 'px\">'\r\n        }\r\n        this._colgroupElement.html(colgroupElementHTML);\r\n        this._tableWidth = columnWidth.reduce((sum, width) => sum + width, 0);\r\n        tableElement.style.width = this._tableWidth + \"px\";\r\n        tableElement.style.tableLayout = \"fixed\"\r\n    },\r\n    resetColumnsWidth: function() {\r\n        this._colgroupElement.find(\"col\").width(\"auto\");\r\n        this._tableElement.css({\r\n            width: \"\",\r\n            tableLayout: \"\"\r\n        })\r\n    },\r\n    groupWidth: function(value) {\r\n        if (void 0 === value) {\r\n            return this._groupElement.width()\r\n        } else if (value >= 0) {\r\n            this._groupWidth = value;\r\n            return this._groupElement[0].style.width = value + \"px\"\r\n        } else {\r\n            return this._groupElement[0].style.width = value\r\n        }\r\n    },\r\n    groupHeight: function(value) {\r\n        if (void 0 === value) {\r\n            return this._groupElement.height()\r\n        }\r\n        this._groupHeight = null;\r\n        if (value >= 0) {\r\n            this._groupHeight = value;\r\n            this._groupElement[0].style.height = value + \"px\"\r\n        } else {\r\n            this._groupElement[0].style.height = value\r\n        }\r\n    },\r\n    groupElement: function() {\r\n        return this._groupElement\r\n    },\r\n    tableElement: function() {\r\n        return this._tableElement\r\n    },\r\n    element: function() {\r\n        return this._rootElement\r\n    },\r\n    headElement: function() {\r\n        return this._tableElement.find(\"thead\")\r\n    },\r\n    _setTableCss: function(styles) {\r\n        if (this.option(\"rtlEnabled\")) {\r\n            styles.right = styles.left;\r\n            delete styles.left\r\n        }\r\n        this.tableElement().css(styles)\r\n    },\r\n    setVirtualContentParams: function(params) {\r\n        this._virtualContent.css({\r\n            width: params.width,\r\n            height: params.height\r\n        });\r\n        this.groupElement().addClass(\"dx-virtual-mode\")\r\n    },\r\n    disableVirtualMode: function() {\r\n        this.groupElement().removeClass(\"dx-virtual-mode\")\r\n    },\r\n    _renderVirtualContent: function() {\r\n        if (!this._virtualContent && \"virtual\" === this.option(\"scrolling.mode\")) {\r\n            this._virtualContent = $(\"<div>\").addClass(\"dx-virtual-content\").insertBefore(this._tableElement)\r\n        }\r\n    },\r\n    reset: function() {\r\n        var tableElement = this._tableElement[0];\r\n        this._fakeTable && this._fakeTable.detach();\r\n        this._fakeTable = null;\r\n        this.disableVirtualMode();\r\n        this.groupWidth(\"100%\");\r\n        this.groupHeight(\"auto\");\r\n        this.resetColumnsWidth();\r\n        if (tableElement) {\r\n            for (var i = 0; i < tableElement.rows.length; i++) {\r\n                tableElement.rows[i].style.height = \"\"\r\n            }\r\n            tableElement.style.height = \"\";\r\n            tableElement.style.width = \"100%\"\r\n        }\r\n    },\r\n    _updateFakeTableVisibility: function() {\r\n        var tableElement = this.tableElement()[0];\r\n        var horizontalOffsetName = this.option(\"rtlEnabled\") ? \"right\" : \"left\";\r\n        var fakeTableElement = this._fakeTable[0];\r\n        if (tableElement.style.top === fakeTableElement.style.top && fakeTableElement.style[horizontalOffsetName] === tableElement.style[horizontalOffsetName]) {\r\n            this._fakeTable.addClass(\"dx-hidden\")\r\n        } else {\r\n            this._fakeTable.removeClass(\"dx-hidden\")\r\n        }\r\n    },\r\n    _moveFakeTableHorizontally: function(scrollPos) {\r\n        var rtlEnabled = this.option(\"rtlEnabled\");\r\n        var offsetStyleName = rtlEnabled ? \"right\" : \"left\";\r\n        var tableElementOffset = parseFloat(this.tableElement()[0].style[offsetStyleName]);\r\n        var offset = getFakeTableOffset(scrollPos, tableElementOffset, this._tableWidth, this._groupWidth);\r\n        if (parseFloat(this._fakeTable[0].style[offsetStyleName]) !== offset) {\r\n            this._fakeTable[0].style[offsetStyleName] = offset + \"px\"\r\n        }\r\n    },\r\n    _moveFakeTableTop: function(scrollPos) {\r\n        var tableElementOffsetTop = parseFloat(this.tableElement()[0].style.top);\r\n        var offsetTop = getFakeTableOffset(scrollPos, tableElementOffsetTop, this._tableHeight, this._groupHeight);\r\n        if (parseFloat(this._fakeTable[0].style.top) !== offsetTop) {\r\n            this._fakeTable[0].style.top = offsetTop + \"px\"\r\n        }\r\n    },\r\n    _moveFakeTable: function() {\r\n        this._updateFakeTableVisibility()\r\n    },\r\n    _createFakeTable: function() {\r\n        if (!this._fakeTable) {\r\n            this._fakeTable = this.tableElement().clone().addClass(\"dx-pivot-grid-fake-table\").appendTo(this._virtualContent)\r\n        }\r\n    },\r\n    render: function(rootElement, data) {\r\n        if (this._tableElement) {\r\n            try {\r\n                this._tableElement[0].innerHTML = \"\"\r\n            } catch (e) {\r\n                this._tableElement.empty()\r\n            }\r\n            this._tableElement.attr(\"style\", \"\")\r\n        } else {\r\n            this._groupElement = this._createGroupElement();\r\n            this._tableElement = this._createTableElement();\r\n            this._tableElement.appendTo(this._groupElement);\r\n            this._groupElement.appendTo(rootElement);\r\n            this._rootElement = rootElement\r\n        }\r\n        this._colgroupElement = $(\"<colgroup>\").appendTo(this._tableElement);\r\n        this._renderTableContent(this._tableElement, data);\r\n        this._renderVirtualContent()\r\n    },\r\n    _getScrollable: function() {\r\n        return this.groupElement().data(\"dxScrollable\")\r\n    },\r\n    on: function(eventName, handler) {\r\n        var that = this;\r\n        var scrollable = that._getScrollable();\r\n        if (scrollable) {\r\n            scrollable.on(eventName, (function(e) {\r\n                if (that.option(\"rtlEnabled\") && isDefined(e.scrollOffset.left)) {\r\n                    e.scrollOffset.left = scrollable.$content().width() - scrollable._container().width() - e.scrollOffset.left\r\n                }\r\n                handler(e)\r\n            }))\r\n        }\r\n        return this\r\n    },\r\n    off: function(eventName) {\r\n        var scrollable = this._getScrollable();\r\n        if (scrollable) {\r\n            scrollable.off(eventName)\r\n        }\r\n        return this\r\n    },\r\n    scrollTo: function(pos) {\r\n        var scrollable = this._getScrollable();\r\n        var scrollablePos = pos;\r\n        if (scrollable) {\r\n            if (this.option(\"rtlEnabled\")) {\r\n                if (\"column\" === this._getAreaName()) {\r\n                    scrollablePos = scrollable.$content().width() - scrollable._container().width() - pos\r\n                } else if (\"data\" === this._getAreaName()) {\r\n                    scrollablePos = {\r\n                        x: scrollable.$content().width() - scrollable._container().width() - pos.x,\r\n                        y: pos.y\r\n                    }\r\n                }\r\n            }\r\n            scrollable.scrollTo(scrollablePos);\r\n            if (this._virtualContent) {\r\n                this._createFakeTable();\r\n                this._moveFakeTable(pos)\r\n            }\r\n        }\r\n    },\r\n    updateScrollable: function() {\r\n        var scrollable = this._getScrollable();\r\n        if (scrollable) {\r\n            return scrollable.update()\r\n        }\r\n    },\r\n    getColumnsCount: function() {\r\n        var columnCount = 0;\r\n        var row = this._getRowElement(0);\r\n        var cells;\r\n        if (row) {\r\n            cells = row.cells;\r\n            for (var i = 0, len = cells.length; i < len; ++i) {\r\n                columnCount += cells[i].colSpan\r\n            }\r\n        }\r\n        return columnCount\r\n    },\r\n    getData: function() {\r\n        var tableElement = this._tableElement;\r\n        return tableElement ? tableElement.data(\"data\") : []\r\n    }\r\n});\r\n"]},"metadata":{},"sourceType":"module"}