{"ast":null,"code":"import _classCallCheck from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _get from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/get\";\nimport _getPrototypeOf from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/createSuper\";\n\n/**\r\n * DevExtreme (esm/ui/scheduler/appointments/appointment.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../../core/renderer\";\nimport eventsEngine from \"../../../events/core/events_engine\";\nimport { move } from \"../../../animation/translator\";\nimport { getRecurrenceProcessor } from \"../recurrence\";\nimport { extend } from \"../../../core/utils/extend\";\nimport registerComponent from \"../../../core/component_registrator\";\nimport { hide, show } from \"../../tooltip/ui.tooltip\";\nimport { addNamespace } from \"../../../events/utils/index\";\nimport pointerEvents from \"../../../events/pointer\";\nimport DOMComponent from \"../../../core/dom_component\";\nimport Resizable from \"../../resizable\";\nimport messageLocalization from \"../../../localization/message\";\nimport dateLocalization from \"../../../localization/date\";\nimport { EMPTY_APPOINTMENT_CLASS, RECURRENCE_APPOINTMENT_CLASS, REDUCED_APPOINTMENT_CLASS, ALL_DAY_APPOINTMENT_CLASS, REDUCED_APPOINTMENT_ICON, REDUCED_APPOINTMENT_PARTS_CLASSES, DIRECTION_APPOINTMENT_CLASSES, APPOINTMENT_DRAG_SOURCE_CLASS, APPOINTMENT_CONTENT_CLASSES } from \"../constants\";\nimport { Deferred } from \"../../../core/utils/deferred\";\nvar DEFAULT_HORIZONTAL_HANDLES = \"left right\";\nvar DEFAULT_VERTICAL_HANDLES = \"top bottom\";\nvar REDUCED_APPOINTMENT_POINTERENTER_EVENT_NAME = addNamespace(pointerEvents.enter, \"dxSchedulerAppointment\");\nvar REDUCED_APPOINTMENT_POINTERLEAVE_EVENT_NAME = addNamespace(pointerEvents.leave, \"dxSchedulerAppointment\");\nexport var Appointment = /*#__PURE__*/function (_DOMComponent) {\n  _inherits(Appointment, _DOMComponent);\n\n  var _super = _createSuper(Appointment);\n\n  function Appointment() {\n    _classCallCheck(this, Appointment);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Appointment, [{\n    key: \"coloredElement\",\n    get: function get() {\n      return this.$element();\n    }\n  }, {\n    key: \"rawAppointment\",\n    get: function get() {\n      return this.option(\"data\");\n    }\n  }, {\n    key: \"_getDefaultOptions\",\n    value: function _getDefaultOptions() {\n      return extend(_get(_getPrototypeOf(Appointment.prototype), \"_getDefaultOptions\", this).call(this), {\n        data: {},\n        groupIndex: -1,\n        geometry: {\n          top: 0,\n          left: 0,\n          width: 0,\n          height: 0\n        },\n        allowDrag: true,\n        allowResize: true,\n        reduced: null,\n        isCompact: false,\n        direction: \"vertical\",\n        resizableConfig: {},\n        cellHeight: 0,\n        cellWidth: 0,\n        isDragSource: false\n      });\n    }\n  }, {\n    key: \"notifyObserver\",\n    value: function notifyObserver(subject, args) {\n      var observer = this.option(\"observer\");\n\n      if (observer) {\n        observer.fire(subject, args);\n      }\n    }\n  }, {\n    key: \"invoke\",\n    value: function invoke() {\n      var observer = this.option(\"observer\");\n\n      if (observer) {\n        return observer.fire.apply(observer, arguments);\n      }\n    }\n  }, {\n    key: \"_optionChanged\",\n    value: function _optionChanged(args) {\n      switch (args.name) {\n        case \"data\":\n        case \"groupIndex\":\n        case \"geometry\":\n        case \"allowDrag\":\n        case \"allowResize\":\n        case \"reduced\":\n        case \"sortedIndex\":\n        case \"isCompact\":\n        case \"direction\":\n        case \"resizableConfig\":\n        case \"cellHeight\":\n        case \"cellWidth\":\n          this._invalidate();\n\n          break;\n\n        case \"isDragSource\":\n          this._renderDragSourceClass();\n\n          break;\n\n        default:\n          _get(_getPrototypeOf(Appointment.prototype), \"_optionChanged\", this).call(this, args);\n\n      }\n    }\n  }, {\n    key: \"_getHorizontalResizingRule\",\n    value: function _getHorizontalResizingRule() {\n      var reducedHandles = {\n        head: this.option(\"rtlEnabled\") ? \"right\" : \"left\",\n        body: \"\",\n        tail: this.option(\"rtlEnabled\") ? \"left\" : \"right\"\n      };\n      return {\n        handles: this.option(\"reduced\") ? reducedHandles[this.option(\"reduced\")] : DEFAULT_HORIZONTAL_HANDLES,\n        minHeight: 0,\n        minWidth: this.invoke(\"getCellWidth\"),\n        step: this.invoke(\"getResizableStep\"),\n        roundStepValue: false\n      };\n    }\n  }, {\n    key: \"_getVerticalResizingRule\",\n    value: function _getVerticalResizingRule() {\n      var height = this.invoke(\"getCellHeight\");\n      return {\n        handles: DEFAULT_VERTICAL_HANDLES,\n        minWidth: 0,\n        minHeight: height,\n        step: height,\n        roundStepValue: true\n      };\n    }\n  }, {\n    key: \"_render\",\n    value: function _render() {\n      _get(_getPrototypeOf(Appointment.prototype), \"_render\", this).call(this);\n\n      this._renderAppointmentGeometry();\n\n      this._renderEmptyClass();\n\n      this._renderReducedAppointment();\n\n      this._renderAllDayClass();\n\n      this._renderDragSourceClass();\n\n      this._renderDirection();\n\n      this.$element().data(\"dxAppointmentStartDate\", this.option(\"startDate\"));\n      this.$element().attr(\"title\", this.invoke(\"getField\", \"text\", this.rawAppointment));\n      this.$element().attr(\"role\", \"button\");\n\n      this._renderRecurrenceClass();\n\n      this._renderResizable();\n\n      this._setResourceColor();\n    }\n  }, {\n    key: \"_setResourceColor\",\n    value: function _setResourceColor() {\n      var _this = this;\n\n      var deferredColor = this.invoke(\"getAppointmentColor\", {\n        itemData: this.rawAppointment,\n        groupIndex: this.option(\"groupIndex\")\n      });\n      deferredColor.done(function (color) {\n        return color && _this.coloredElement.css(\"backgroundColor\", color);\n      });\n    }\n  }, {\n    key: \"_renderAppointmentGeometry\",\n    value: function _renderAppointmentGeometry() {\n      var geometry = this.option(\"geometry\");\n      var $element = this.$element();\n      move($element, {\n        top: geometry.top,\n        left: geometry.left\n      });\n      $element.css({\n        width: geometry.width < 0 ? 0 : geometry.width,\n        height: geometry.height < 0 ? 0 : geometry.height\n      });\n    }\n  }, {\n    key: \"_renderEmptyClass\",\n    value: function _renderEmptyClass() {\n      var geometry = this.option(\"geometry\");\n\n      if (geometry.empty || this.option(\"isCompact\")) {\n        this.$element().addClass(EMPTY_APPOINTMENT_CLASS);\n      }\n    }\n  }, {\n    key: \"_renderReducedAppointment\",\n    value: function _renderReducedAppointment() {\n      var reducedPart = this.option(\"reduced\");\n\n      if (!reducedPart) {\n        return;\n      }\n\n      this.$element().toggleClass(REDUCED_APPOINTMENT_CLASS, true).toggleClass(REDUCED_APPOINTMENT_PARTS_CLASSES[reducedPart], true);\n\n      this._renderAppointmentReducedIcon();\n    }\n  }, {\n    key: \"_renderAppointmentReducedIcon\",\n    value: function _renderAppointmentReducedIcon() {\n      var $icon = $(\"<div>\").addClass(REDUCED_APPOINTMENT_ICON).appendTo(this.$element());\n\n      var endDate = this._getEndDate();\n\n      var tooltipLabel = messageLocalization.format(\"dxScheduler-editorLabelEndDate\");\n      var tooltipText = [tooltipLabel, \": \", dateLocalization.format(endDate, \"monthAndDay\"), \", \", dateLocalization.format(endDate, \"year\")].join(\"\");\n      eventsEngine.off($icon, REDUCED_APPOINTMENT_POINTERENTER_EVENT_NAME);\n      eventsEngine.on($icon, REDUCED_APPOINTMENT_POINTERENTER_EVENT_NAME, function () {\n        show({\n          target: $icon,\n          content: tooltipText\n        });\n      });\n      eventsEngine.off($icon, REDUCED_APPOINTMENT_POINTERLEAVE_EVENT_NAME);\n      eventsEngine.on($icon, REDUCED_APPOINTMENT_POINTERLEAVE_EVENT_NAME, function () {\n        hide();\n      });\n    }\n  }, {\n    key: \"_getEndDate\",\n    value: function _getEndDate() {\n      var result = this.invoke(\"getField\", \"endDate\", this.rawAppointment);\n\n      if (result) {\n        return new Date(result);\n      }\n\n      return result;\n    }\n  }, {\n    key: \"_renderAllDayClass\",\n    value: function _renderAllDayClass() {\n      this.$element().toggleClass(ALL_DAY_APPOINTMENT_CLASS, !!this.option(\"allDay\"));\n    }\n  }, {\n    key: \"_renderDragSourceClass\",\n    value: function _renderDragSourceClass() {\n      this.$element().toggleClass(APPOINTMENT_DRAG_SOURCE_CLASS, !!this.option(\"isDragSource\"));\n    }\n  }, {\n    key: \"_renderRecurrenceClass\",\n    value: function _renderRecurrenceClass() {\n      var rule = this.invoke(\"getField\", \"recurrenceRule\", this.rawAppointment);\n\n      if (getRecurrenceProcessor().isValidRecurrenceRule(rule)) {\n        this.$element().addClass(RECURRENCE_APPOINTMENT_CLASS);\n      }\n    }\n  }, {\n    key: \"_renderDirection\",\n    value: function _renderDirection() {\n      this.$element().addClass(DIRECTION_APPOINTMENT_CLASSES[this.option(\"direction\")]);\n    }\n  }, {\n    key: \"_createResizingConfig\",\n    value: function _createResizingConfig() {\n      var config = \"vertical\" === this.option(\"direction\") ? this._getVerticalResizingRule() : this._getHorizontalResizingRule();\n\n      if (!this.invoke(\"isGroupedByDate\")) {\n        config.stepPrecision = \"strict\";\n      }\n\n      return config;\n    }\n  }, {\n    key: \"_renderResizable\",\n    value: function _renderResizable() {\n      if (this.option(\"allowResize\")) {\n        this._createComponent(this.$element(), Resizable, extend(this._createResizingConfig(), this.option(\"resizableConfig\")));\n      }\n    }\n  }, {\n    key: \"_useTemplates\",\n    value: function _useTemplates() {\n      return false;\n    }\n  }]);\n\n  return Appointment;\n}(DOMComponent);\nregisterComponent(\"dxSchedulerAppointment\", Appointment);\nexport var AgendaAppointment = /*#__PURE__*/function (_Appointment) {\n  _inherits(AgendaAppointment, _Appointment);\n\n  var _super2 = _createSuper(AgendaAppointment);\n\n  function AgendaAppointment() {\n    _classCallCheck(this, AgendaAppointment);\n\n    return _super2.apply(this, arguments);\n  }\n\n  _createClass(AgendaAppointment, [{\n    key: \"coloredElement\",\n    get: function get() {\n      return this.$element().find(\".\".concat(APPOINTMENT_CONTENT_CLASSES.AGENDA_MARKER));\n    }\n  }, {\n    key: \"_getDefaultOptions\",\n    value: function _getDefaultOptions() {\n      return extend(_get(_getPrototypeOf(AgendaAppointment.prototype), \"_getDefaultOptions\", this).call(this), {\n        createPlainResourceListAsync: new Deferred()\n      });\n    }\n  }, {\n    key: \"_renderResourceList\",\n    value: function _renderResourceList(container, list) {\n      list.forEach(function (item) {\n        var itemContainer = $(\"<div>\").addClass(APPOINTMENT_CONTENT_CLASSES.AGENDA_RESOURCE_LIST_ITEM).appendTo(container);\n        $(\"<div>\").text(\"\".concat(item.label, \":\")).appendTo(itemContainer);\n        $(\"<div>\").addClass(APPOINTMENT_CONTENT_CLASSES.AGENDA_RESOURCE_LIST_ITEM_VALUE).text(item.values.join(\", \")).appendTo(itemContainer);\n      });\n    }\n  }, {\n    key: \"_render\",\n    value: function _render() {\n      var _this2 = this;\n\n      _get(_getPrototypeOf(AgendaAppointment.prototype), \"_render\", this).call(this);\n\n      var createPlainResourceListAsync = this.option(\"createPlainResourceListAsync\");\n      createPlainResourceListAsync(this.rawAppointment).done(function (list) {\n        var parent = _this2.$element().find(\".\".concat(APPOINTMENT_CONTENT_CLASSES.APPOINTMENT_CONTENT_DETAILS));\n\n        var container = $(\"<div>\").addClass(APPOINTMENT_CONTENT_CLASSES.AGENDA_RESOURCE_LIST).appendTo(parent);\n\n        _this2._renderResourceList(container, list);\n      });\n    }\n  }]);\n\n  return AgendaAppointment;\n}(Appointment);","map":{"version":3,"sources":["C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/devextreme/esm/ui/scheduler/appointments/appointment.js"],"names":["$","eventsEngine","move","getRecurrenceProcessor","extend","registerComponent","hide","show","addNamespace","pointerEvents","DOMComponent","Resizable","messageLocalization","dateLocalization","EMPTY_APPOINTMENT_CLASS","RECURRENCE_APPOINTMENT_CLASS","REDUCED_APPOINTMENT_CLASS","ALL_DAY_APPOINTMENT_CLASS","REDUCED_APPOINTMENT_ICON","REDUCED_APPOINTMENT_PARTS_CLASSES","DIRECTION_APPOINTMENT_CLASSES","APPOINTMENT_DRAG_SOURCE_CLASS","APPOINTMENT_CONTENT_CLASSES","Deferred","DEFAULT_HORIZONTAL_HANDLES","DEFAULT_VERTICAL_HANDLES","REDUCED_APPOINTMENT_POINTERENTER_EVENT_NAME","enter","REDUCED_APPOINTMENT_POINTERLEAVE_EVENT_NAME","leave","Appointment","$element","option","data","groupIndex","geometry","top","left","width","height","allowDrag","allowResize","reduced","isCompact","direction","resizableConfig","cellHeight","cellWidth","isDragSource","subject","args","observer","fire","apply","arguments","name","_invalidate","_renderDragSourceClass","reducedHandles","head","body","tail","handles","minHeight","minWidth","invoke","step","roundStepValue","_renderAppointmentGeometry","_renderEmptyClass","_renderReducedAppointment","_renderAllDayClass","_renderDirection","attr","rawAppointment","_renderRecurrenceClass","_renderResizable","_setResourceColor","deferredColor","itemData","done","color","coloredElement","css","empty","addClass","reducedPart","toggleClass","_renderAppointmentReducedIcon","$icon","appendTo","endDate","_getEndDate","tooltipLabel","format","tooltipText","join","off","on","target","content","result","Date","rule","isValidRecurrenceRule","config","_getVerticalResizingRule","_getHorizontalResizingRule","stepPrecision","_createComponent","_createResizingConfig","AgendaAppointment","find","concat","AGENDA_MARKER","createPlainResourceListAsync","container","list","forEach","item","itemContainer","AGENDA_RESOURCE_LIST_ITEM","text","label","AGENDA_RESOURCE_LIST_ITEM_VALUE","values","parent","APPOINTMENT_CONTENT_DETAILS","AGENDA_RESOURCE_LIST","_renderResourceList"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/scheduler/appointments/appointment.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../../../core/renderer\";\r\nimport eventsEngine from \"../../../events/core/events_engine\";\r\nimport {\r\n    move\r\n} from \"../../../animation/translator\";\r\nimport {\r\n    getRecurrenceProcessor\r\n} from \"../recurrence\";\r\nimport {\r\n    extend\r\n} from \"../../../core/utils/extend\";\r\nimport registerComponent from \"../../../core/component_registrator\";\r\nimport {\r\n    hide,\r\n    show\r\n} from \"../../tooltip/ui.tooltip\";\r\nimport {\r\n    addNamespace\r\n} from \"../../../events/utils/index\";\r\nimport pointerEvents from \"../../../events/pointer\";\r\nimport DOMComponent from \"../../../core/dom_component\";\r\nimport Resizable from \"../../resizable\";\r\nimport messageLocalization from \"../../../localization/message\";\r\nimport dateLocalization from \"../../../localization/date\";\r\nimport {\r\n    EMPTY_APPOINTMENT_CLASS,\r\n    RECURRENCE_APPOINTMENT_CLASS,\r\n    REDUCED_APPOINTMENT_CLASS,\r\n    ALL_DAY_APPOINTMENT_CLASS,\r\n    REDUCED_APPOINTMENT_ICON,\r\n    REDUCED_APPOINTMENT_PARTS_CLASSES,\r\n    DIRECTION_APPOINTMENT_CLASSES,\r\n    APPOINTMENT_DRAG_SOURCE_CLASS,\r\n    APPOINTMENT_CONTENT_CLASSES\r\n} from \"../constants\";\r\nimport {\r\n    Deferred\r\n} from \"../../../core/utils/deferred\";\r\nvar DEFAULT_HORIZONTAL_HANDLES = \"left right\";\r\nvar DEFAULT_VERTICAL_HANDLES = \"top bottom\";\r\nvar REDUCED_APPOINTMENT_POINTERENTER_EVENT_NAME = addNamespace(pointerEvents.enter, \"dxSchedulerAppointment\");\r\nvar REDUCED_APPOINTMENT_POINTERLEAVE_EVENT_NAME = addNamespace(pointerEvents.leave, \"dxSchedulerAppointment\");\r\nexport class Appointment extends DOMComponent {\r\n    get coloredElement() {\r\n        return this.$element()\r\n    }\r\n    get rawAppointment() {\r\n        return this.option(\"data\")\r\n    }\r\n    _getDefaultOptions() {\r\n        return extend(super._getDefaultOptions(), {\r\n            data: {},\r\n            groupIndex: -1,\r\n            geometry: {\r\n                top: 0,\r\n                left: 0,\r\n                width: 0,\r\n                height: 0\r\n            },\r\n            allowDrag: true,\r\n            allowResize: true,\r\n            reduced: null,\r\n            isCompact: false,\r\n            direction: \"vertical\",\r\n            resizableConfig: {},\r\n            cellHeight: 0,\r\n            cellWidth: 0,\r\n            isDragSource: false\r\n        })\r\n    }\r\n    notifyObserver(subject, args) {\r\n        var observer = this.option(\"observer\");\r\n        if (observer) {\r\n            observer.fire(subject, args)\r\n        }\r\n    }\r\n    invoke() {\r\n        var observer = this.option(\"observer\");\r\n        if (observer) {\r\n            return observer.fire.apply(observer, arguments)\r\n        }\r\n    }\r\n    _optionChanged(args) {\r\n        switch (args.name) {\r\n            case \"data\":\r\n            case \"groupIndex\":\r\n            case \"geometry\":\r\n            case \"allowDrag\":\r\n            case \"allowResize\":\r\n            case \"reduced\":\r\n            case \"sortedIndex\":\r\n            case \"isCompact\":\r\n            case \"direction\":\r\n            case \"resizableConfig\":\r\n            case \"cellHeight\":\r\n            case \"cellWidth\":\r\n                this._invalidate();\r\n                break;\r\n            case \"isDragSource\":\r\n                this._renderDragSourceClass();\r\n                break;\r\n            default:\r\n                super._optionChanged(args)\r\n        }\r\n    }\r\n    _getHorizontalResizingRule() {\r\n        var reducedHandles = {\r\n            head: this.option(\"rtlEnabled\") ? \"right\" : \"left\",\r\n            body: \"\",\r\n            tail: this.option(\"rtlEnabled\") ? \"left\" : \"right\"\r\n        };\r\n        return {\r\n            handles: this.option(\"reduced\") ? reducedHandles[this.option(\"reduced\")] : DEFAULT_HORIZONTAL_HANDLES,\r\n            minHeight: 0,\r\n            minWidth: this.invoke(\"getCellWidth\"),\r\n            step: this.invoke(\"getResizableStep\"),\r\n            roundStepValue: false\r\n        }\r\n    }\r\n    _getVerticalResizingRule() {\r\n        var height = this.invoke(\"getCellHeight\");\r\n        return {\r\n            handles: DEFAULT_VERTICAL_HANDLES,\r\n            minWidth: 0,\r\n            minHeight: height,\r\n            step: height,\r\n            roundStepValue: true\r\n        }\r\n    }\r\n    _render() {\r\n        super._render();\r\n        this._renderAppointmentGeometry();\r\n        this._renderEmptyClass();\r\n        this._renderReducedAppointment();\r\n        this._renderAllDayClass();\r\n        this._renderDragSourceClass();\r\n        this._renderDirection();\r\n        this.$element().data(\"dxAppointmentStartDate\", this.option(\"startDate\"));\r\n        this.$element().attr(\"title\", this.invoke(\"getField\", \"text\", this.rawAppointment));\r\n        this.$element().attr(\"role\", \"button\");\r\n        this._renderRecurrenceClass();\r\n        this._renderResizable();\r\n        this._setResourceColor()\r\n    }\r\n    _setResourceColor() {\r\n        var deferredColor = this.invoke(\"getAppointmentColor\", {\r\n            itemData: this.rawAppointment,\r\n            groupIndex: this.option(\"groupIndex\")\r\n        });\r\n        deferredColor.done(color => color && this.coloredElement.css(\"backgroundColor\", color))\r\n    }\r\n    _renderAppointmentGeometry() {\r\n        var geometry = this.option(\"geometry\");\r\n        var $element = this.$element();\r\n        move($element, {\r\n            top: geometry.top,\r\n            left: geometry.left\r\n        });\r\n        $element.css({\r\n            width: geometry.width < 0 ? 0 : geometry.width,\r\n            height: geometry.height < 0 ? 0 : geometry.height\r\n        })\r\n    }\r\n    _renderEmptyClass() {\r\n        var geometry = this.option(\"geometry\");\r\n        if (geometry.empty || this.option(\"isCompact\")) {\r\n            this.$element().addClass(EMPTY_APPOINTMENT_CLASS)\r\n        }\r\n    }\r\n    _renderReducedAppointment() {\r\n        var reducedPart = this.option(\"reduced\");\r\n        if (!reducedPart) {\r\n            return\r\n        }\r\n        this.$element().toggleClass(REDUCED_APPOINTMENT_CLASS, true).toggleClass(REDUCED_APPOINTMENT_PARTS_CLASSES[reducedPart], true);\r\n        this._renderAppointmentReducedIcon()\r\n    }\r\n    _renderAppointmentReducedIcon() {\r\n        var $icon = $(\"<div>\").addClass(REDUCED_APPOINTMENT_ICON).appendTo(this.$element());\r\n        var endDate = this._getEndDate();\r\n        var tooltipLabel = messageLocalization.format(\"dxScheduler-editorLabelEndDate\");\r\n        var tooltipText = [tooltipLabel, \": \", dateLocalization.format(endDate, \"monthAndDay\"), \", \", dateLocalization.format(endDate, \"year\")].join(\"\");\r\n        eventsEngine.off($icon, REDUCED_APPOINTMENT_POINTERENTER_EVENT_NAME);\r\n        eventsEngine.on($icon, REDUCED_APPOINTMENT_POINTERENTER_EVENT_NAME, (function() {\r\n            show({\r\n                target: $icon,\r\n                content: tooltipText\r\n            })\r\n        }));\r\n        eventsEngine.off($icon, REDUCED_APPOINTMENT_POINTERLEAVE_EVENT_NAME);\r\n        eventsEngine.on($icon, REDUCED_APPOINTMENT_POINTERLEAVE_EVENT_NAME, (function() {\r\n            hide()\r\n        }))\r\n    }\r\n    _getEndDate() {\r\n        var result = this.invoke(\"getField\", \"endDate\", this.rawAppointment);\r\n        if (result) {\r\n            return new Date(result)\r\n        }\r\n        return result\r\n    }\r\n    _renderAllDayClass() {\r\n        this.$element().toggleClass(ALL_DAY_APPOINTMENT_CLASS, !!this.option(\"allDay\"))\r\n    }\r\n    _renderDragSourceClass() {\r\n        this.$element().toggleClass(APPOINTMENT_DRAG_SOURCE_CLASS, !!this.option(\"isDragSource\"))\r\n    }\r\n    _renderRecurrenceClass() {\r\n        var rule = this.invoke(\"getField\", \"recurrenceRule\", this.rawAppointment);\r\n        if (getRecurrenceProcessor().isValidRecurrenceRule(rule)) {\r\n            this.$element().addClass(RECURRENCE_APPOINTMENT_CLASS)\r\n        }\r\n    }\r\n    _renderDirection() {\r\n        this.$element().addClass(DIRECTION_APPOINTMENT_CLASSES[this.option(\"direction\")])\r\n    }\r\n    _createResizingConfig() {\r\n        var config = \"vertical\" === this.option(\"direction\") ? this._getVerticalResizingRule() : this._getHorizontalResizingRule();\r\n        if (!this.invoke(\"isGroupedByDate\")) {\r\n            config.stepPrecision = \"strict\"\r\n        }\r\n        return config\r\n    }\r\n    _renderResizable() {\r\n        if (this.option(\"allowResize\")) {\r\n            this._createComponent(this.$element(), Resizable, extend(this._createResizingConfig(), this.option(\"resizableConfig\")))\r\n        }\r\n    }\r\n    _useTemplates() {\r\n        return false\r\n    }\r\n}\r\nregisterComponent(\"dxSchedulerAppointment\", Appointment);\r\nexport class AgendaAppointment extends Appointment {\r\n    get coloredElement() {\r\n        return this.$element().find(\".\".concat(APPOINTMENT_CONTENT_CLASSES.AGENDA_MARKER))\r\n    }\r\n    _getDefaultOptions() {\r\n        return extend(super._getDefaultOptions(), {\r\n            createPlainResourceListAsync: new Deferred\r\n        })\r\n    }\r\n    _renderResourceList(container, list) {\r\n        list.forEach(item => {\r\n            var itemContainer = $(\"<div>\").addClass(APPOINTMENT_CONTENT_CLASSES.AGENDA_RESOURCE_LIST_ITEM).appendTo(container);\r\n            $(\"<div>\").text(\"\".concat(item.label, \":\")).appendTo(itemContainer);\r\n            $(\"<div>\").addClass(APPOINTMENT_CONTENT_CLASSES.AGENDA_RESOURCE_LIST_ITEM_VALUE).text(item.values.join(\", \")).appendTo(itemContainer)\r\n        })\r\n    }\r\n    _render() {\r\n        super._render();\r\n        var createPlainResourceListAsync = this.option(\"createPlainResourceListAsync\");\r\n        createPlainResourceListAsync(this.rawAppointment).done(list => {\r\n            var parent = this.$element().find(\".\".concat(APPOINTMENT_CONTENT_CLASSES.APPOINTMENT_CONTENT_DETAILS));\r\n            var container = $(\"<div>\").addClass(APPOINTMENT_CONTENT_CLASSES.AGENDA_RESOURCE_LIST).appendTo(parent);\r\n            this._renderResourceList(container, list)\r\n        })\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}