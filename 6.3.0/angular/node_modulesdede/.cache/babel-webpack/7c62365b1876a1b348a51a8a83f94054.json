{"ast":null,"code":"import _toConsumableArray from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _get from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/get\";\nimport _getPrototypeOf from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/@babel/runtime/helpers/esm/createSuper\";\n\n/**\r\n * DevExtreme (esm/ui/text_box/ui.text_editor.mask.strategy.input_events.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport BaseMaskStrategy from \"./ui.text_editor.mask.strategy.base\";\nvar DELETE_INPUT_TYPE = \"deleteContentBackward\";\n\nvar InputEventsMaskStrategy = /*#__PURE__*/function (_BaseMaskStrategy) {\n  _inherits(InputEventsMaskStrategy, _BaseMaskStrategy);\n\n  var _super = _createSuper(InputEventsMaskStrategy);\n\n  function InputEventsMaskStrategy() {\n    _classCallCheck(this, InputEventsMaskStrategy);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(InputEventsMaskStrategy, [{\n    key: \"_getStrategyName\",\n    value: function _getStrategyName() {\n      return \"inputEvents\";\n    }\n  }, {\n    key: \"getHandleEventNames\",\n    value: function getHandleEventNames() {\n      return [].concat(_toConsumableArray(_get(_getPrototypeOf(InputEventsMaskStrategy.prototype), \"getHandleEventNames\", this).call(this)), [\"beforeInput\"]);\n    }\n  }, {\n    key: \"_beforeInputHandler\",\n    value: function _beforeInputHandler() {\n      this._prevCaret = this.editorCaret();\n    }\n  }, {\n    key: \"_inputHandler\",\n    value: function _inputHandler(_ref) {\n      var originalEvent = _ref.originalEvent;\n\n      if (!originalEvent) {\n        return;\n      }\n\n      var inputType = originalEvent.inputType,\n          data = originalEvent.data;\n      var currentCaret = this.editorCaret();\n\n      if (inputType === DELETE_INPUT_TYPE) {\n        var length = this._prevCaret.end - this._prevCaret.start || 1;\n        this.editor.setBackwardDirection();\n\n        this._updateEditorMask({\n          start: currentCaret.start,\n          length: length,\n          text: this._getEmptyString(length)\n        });\n      } else {\n        if (!currentCaret.end) {\n          return;\n        }\n\n        this._autoFillHandler(originalEvent);\n\n        this.editorCaret(currentCaret);\n\n        var _length = this._prevCaret.end - this._prevCaret.start;\n\n        var newData = data + (_length ? this._getEmptyString(_length - data.length) : \"\");\n        this.editor.setForwardDirection();\n\n        var hasValidChars = this._updateEditorMask({\n          start: this._prevCaret.start,\n          length: _length || newData.length,\n          text: newData\n        });\n\n        if (!hasValidChars) {\n          this.editorCaret(this._prevCaret);\n        }\n      }\n    }\n  }, {\n    key: \"_getEmptyString\",\n    value: function _getEmptyString(length) {\n      return Array(length + 1).join(\" \");\n    }\n  }, {\n    key: \"_updateEditorMask\",\n    value: function _updateEditorMask(args) {\n      var textLength = args.text.length;\n\n      var updatedCharsCount = this.editor._handleChain(args);\n\n      if (this.editor.isForwardDirection()) {\n        var _this$editorCaret = this.editorCaret(),\n            start = _this$editorCaret.start,\n            end = _this$editorCaret.end;\n\n        var correction = updatedCharsCount - textLength;\n\n        if (start <= updatedCharsCount && updatedCharsCount > 1) {\n          this.editorCaret({\n            start: start + correction,\n            end: end + correction\n          });\n        }\n\n        this.editor.isForwardDirection() && this.editor._adjustCaret();\n      }\n\n      this.editor._displayMask();\n\n      return !!updatedCharsCount;\n    }\n  }]);\n\n  return InputEventsMaskStrategy;\n}(BaseMaskStrategy);\n\nexport default InputEventsMaskStrategy;","map":{"version":3,"sources":["C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/devextreme/esm/ui/text_box/ui.text_editor.mask.strategy.input_events.js"],"names":["BaseMaskStrategy","DELETE_INPUT_TYPE","InputEventsMaskStrategy","_prevCaret","editorCaret","_ref","originalEvent","inputType","data","currentCaret","length","end","start","editor","setBackwardDirection","_updateEditorMask","text","_getEmptyString","_autoFillHandler","_length","newData","setForwardDirection","hasValidChars","Array","join","args","textLength","updatedCharsCount","_handleChain","isForwardDirection","correction","_adjustCaret","_displayMask"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/text_box/ui.text_editor.mask.strategy.input_events.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport BaseMaskStrategy from \"./ui.text_editor.mask.strategy.base\";\r\nvar DELETE_INPUT_TYPE = \"deleteContentBackward\";\r\nclass InputEventsMaskStrategy extends BaseMaskStrategy {\r\n    _getStrategyName() {\r\n        return \"inputEvents\"\r\n    }\r\n    getHandleEventNames() {\r\n        return [...super.getHandleEventNames(), \"beforeInput\"]\r\n    }\r\n    _beforeInputHandler() {\r\n        this._prevCaret = this.editorCaret()\r\n    }\r\n    _inputHandler(_ref) {\r\n        var {\r\n            originalEvent: originalEvent\r\n        } = _ref;\r\n        if (!originalEvent) {\r\n            return\r\n        }\r\n        var {\r\n            inputType: inputType,\r\n            data: data\r\n        } = originalEvent;\r\n        var currentCaret = this.editorCaret();\r\n        if (inputType === DELETE_INPUT_TYPE) {\r\n            var length = this._prevCaret.end - this._prevCaret.start || 1;\r\n            this.editor.setBackwardDirection();\r\n            this._updateEditorMask({\r\n                start: currentCaret.start,\r\n                length: length,\r\n                text: this._getEmptyString(length)\r\n            })\r\n        } else {\r\n            if (!currentCaret.end) {\r\n                return\r\n            }\r\n            this._autoFillHandler(originalEvent);\r\n            this.editorCaret(currentCaret);\r\n            var _length = this._prevCaret.end - this._prevCaret.start;\r\n            var newData = data + (_length ? this._getEmptyString(_length - data.length) : \"\");\r\n            this.editor.setForwardDirection();\r\n            var hasValidChars = this._updateEditorMask({\r\n                start: this._prevCaret.start,\r\n                length: _length || newData.length,\r\n                text: newData\r\n            });\r\n            if (!hasValidChars) {\r\n                this.editorCaret(this._prevCaret)\r\n            }\r\n        }\r\n    }\r\n    _getEmptyString(length) {\r\n        return Array(length + 1).join(\" \")\r\n    }\r\n    _updateEditorMask(args) {\r\n        var textLength = args.text.length;\r\n        var updatedCharsCount = this.editor._handleChain(args);\r\n        if (this.editor.isForwardDirection()) {\r\n            var {\r\n                start: start,\r\n                end: end\r\n            } = this.editorCaret();\r\n            var correction = updatedCharsCount - textLength;\r\n            if (start <= updatedCharsCount && updatedCharsCount > 1) {\r\n                this.editorCaret({\r\n                    start: start + correction,\r\n                    end: end + correction\r\n                })\r\n            }\r\n            this.editor.isForwardDirection() && this.editor._adjustCaret()\r\n        }\r\n        this.editor._displayMask();\r\n        return !!updatedCharsCount\r\n    }\r\n}\r\nexport default InputEventsMaskStrategy;\r\n"]},"metadata":{},"sourceType":"module"}