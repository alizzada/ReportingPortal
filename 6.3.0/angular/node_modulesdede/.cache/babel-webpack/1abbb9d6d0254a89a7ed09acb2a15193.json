{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/toolbar.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../core/renderer\";\nimport registerComponent from \"../core/component_registrator\";\nimport { grep, deferRender } from \"../core/utils/common\";\nimport { extend } from \"../core/utils/extend\";\nimport { merge } from \"../core/utils/array\";\nimport { each } from \"../core/utils/iterator\";\nimport ActionSheetStrategy from \"./toolbar/ui.toolbar.strategy.action_sheet\";\nimport DropDownMenuStrategy from \"./toolbar/ui.toolbar.strategy.drop_down_menu\";\nimport ToolbarBase from \"./toolbar/ui.toolbar.base\";\nimport { ChildDefaultTemplate } from \"../core/templates/child_default_template\";\nvar STRATEGIES = {\n  actionSheet: ActionSheetStrategy,\n  dropDownMenu: DropDownMenuStrategy\n};\nvar TOOLBAR_AUTO_HIDE_ITEM_CLASS = \"dx-toolbar-item-auto-hide\";\nvar TOOLBAR_AUTO_HIDE_TEXT_CLASS = \"dx-toolbar-text-auto-hide\";\nvar TOOLBAR_HIDDEN_ITEM = \"dx-toolbar-item-invisible\";\nvar Toolbar = ToolbarBase.inherit({\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      menuItemTemplate: \"menuItem\",\n      submenuType: \"dropDownMenu\",\n      menuContainer: void 0\n    });\n  },\n  _dimensionChanged: function _dimensionChanged(dimension) {\n    if (\"height\" === dimension) {\n      return;\n    }\n\n    this._menuStrategy.toggleMenuVisibility(false, true);\n\n    this.callBase();\n\n    this._menuStrategy.renderMenuItems();\n  },\n  _initTemplates: function _initTemplates() {\n    this.callBase();\n\n    this._templateManager.addDefaultTemplates({\n      actionSheetItem: new ChildDefaultTemplate(\"item\")\n    });\n  },\n  _initMarkup: function _initMarkup() {\n    this.callBase();\n\n    this._renderMenu();\n  },\n  _postProcessRenderItems: function _postProcessRenderItems() {\n    var _this = this;\n\n    this._hideOverflowItems();\n\n    this._menuStrategy._updateMenuVisibility();\n\n    this.callBase();\n    deferRender(function () {\n      _this._menuStrategy.renderMenuItems();\n    });\n  },\n  _renderItem: function _renderItem(index, item, itemContainer, $after) {\n    var itemElement = this.callBase(index, item, itemContainer, $after);\n\n    if (\"auto\" === item.locateInMenu) {\n      itemElement.addClass(TOOLBAR_AUTO_HIDE_ITEM_CLASS);\n    }\n\n    if (\"dxButton\" === item.widget && \"inMenu\" === item.showText) {\n      itemElement.toggleClass(TOOLBAR_AUTO_HIDE_TEXT_CLASS);\n    }\n\n    return itemElement;\n  },\n  _getItemsWidth: function _getItemsWidth() {\n    return this._getSummaryItemsWidth([this._$beforeSection, this._$centerSection, this._$afterSection]);\n  },\n  _hideOverflowItems: function _hideOverflowItems(elementWidth) {\n    var overflowItems = this.$element().find(\".\" + TOOLBAR_AUTO_HIDE_ITEM_CLASS);\n\n    if (!overflowItems.length) {\n      return;\n    }\n\n    elementWidth = elementWidth || this.$element().width();\n    $(overflowItems).removeClass(TOOLBAR_HIDDEN_ITEM);\n\n    var itemsWidth = this._getItemsWidth();\n\n    while (overflowItems.length && elementWidth < itemsWidth) {\n      var $item = overflowItems.eq(-1);\n      itemsWidth -= $item.outerWidth();\n      $item.addClass(TOOLBAR_HIDDEN_ITEM);\n      overflowItems.splice(-1, 1);\n    }\n  },\n  _getMenuItems: function _getMenuItems() {\n    var that = this;\n    var menuItems = grep(this.option(\"items\") || [], function (item) {\n      return that._isMenuItem(item);\n    });\n\n    var $hiddenItems = this._itemContainer().children(\".\" + TOOLBAR_AUTO_HIDE_ITEM_CLASS + \".\" + TOOLBAR_HIDDEN_ITEM).not(\".dx-state-invisible\");\n\n    this._restoreItems = this._restoreItems || [];\n    var overflowItems = [].slice.call($hiddenItems).map(function (item) {\n      var itemData = that._getItemData(item);\n\n      var $itemContainer = $(item).children();\n      var $itemMarkup = $itemContainer.children();\n      return extend({\n        menuItemTemplate: function menuItemTemplate() {\n          that._restoreItems.push({\n            container: $itemContainer,\n            item: $itemMarkup\n          });\n\n          var $container = $(\"<div>\").addClass(TOOLBAR_AUTO_HIDE_ITEM_CLASS);\n          return $container.append($itemMarkup);\n        }\n      }, itemData);\n    });\n    return merge(overflowItems, menuItems);\n  },\n  _getToolbarItems: function _getToolbarItems() {\n    var that = this;\n    return grep(this.option(\"items\") || [], function (item) {\n      return !that._isMenuItem(item);\n    });\n  },\n  _renderMenu: function _renderMenu() {\n    var _this2 = this;\n\n    this._renderMenuStrategy();\n\n    deferRender(function () {\n      _this2._menuStrategy.render();\n    });\n  },\n  _renderMenuStrategy: function _renderMenuStrategy() {\n    var strategyName = this.option(\"submenuType\");\n\n    if (this._requireDropDownStrategy()) {\n      strategyName = \"dropDownMenu\";\n    }\n\n    var strategy = STRATEGIES[strategyName];\n\n    if (!(this._menuStrategy && this._menuStrategy.NAME === strategyName)) {\n      this._menuStrategy = new strategy(this);\n    }\n  },\n  _requireDropDownStrategy: function _requireDropDownStrategy() {\n    var items = this.option(\"items\") || [];\n    var result = false;\n    each(items, function (index, item) {\n      if (\"auto\" === item.locateInMenu) {\n        result = true;\n      } else if (\"always\" === item.locateInMenu && item.widget) {\n        result = true;\n      }\n    });\n    return result;\n  },\n  _arrangeItems: function _arrangeItems() {\n    if (this.$element().is(\":hidden\")) {\n      return;\n    }\n\n    this._$centerSection.css({\n      margin: \"0 auto\",\n      float: \"none\"\n    });\n\n    each(this._restoreItems || [], function (_, obj) {\n      $(obj.container).append(obj.item);\n    });\n    this._restoreItems = [];\n    var elementWidth = this.$element().width();\n\n    this._hideOverflowItems(elementWidth);\n\n    this.callBase(elementWidth);\n  },\n  _itemOptionChanged: function _itemOptionChanged(item, property, value) {\n    if (this._isMenuItem(item)) {\n      this._menuStrategy.renderMenuItems();\n    } else if (this._isToolbarItem(item)) {\n      this.callBase(item, property, value);\n    } else {\n      this.callBase(item, property, value);\n\n      this._menuStrategy.renderMenuItems();\n    }\n\n    if (\"location\" === property) {\n      this.repaint();\n    }\n  },\n  _isMenuItem: function _isMenuItem(itemData) {\n    return \"menu\" === itemData.location || \"always\" === itemData.locateInMenu;\n  },\n  _isToolbarItem: function _isToolbarItem(itemData) {\n    return void 0 === itemData.location || \"never\" === itemData.locateInMenu;\n  },\n  _optionChanged: function _optionChanged(args) {\n    var name = args.name;\n    var value = args.value;\n\n    switch (name) {\n      case \"submenuType\":\n        this._invalidate();\n\n        break;\n\n      case \"visible\":\n        this.callBase.apply(this, arguments);\n\n        this._menuStrategy.handleToolbarVisibilityChange(value);\n\n        break;\n\n      case \"menuItemTemplate\":\n        this._changeMenuOption(\"itemTemplate\", this._getTemplate(value));\n\n        break;\n\n      case \"onItemClick\":\n        this._changeMenuOption(name, value);\n\n        this.callBase.apply(this, arguments);\n        break;\n\n      case \"menuContainer\":\n        this._changeMenuOption(\"container\", value);\n\n        break;\n\n      default:\n        this.callBase.apply(this, arguments);\n    }\n  },\n  _changeMenuOption: function _changeMenuOption(name, value) {\n    this._menuStrategy.widgetOption(name, value);\n  }\n});\nregisterComponent(\"dxToolbar\", Toolbar);\nexport default Toolbar;","map":{"version":3,"sources":["C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/devextreme/esm/ui/toolbar.js"],"names":["$","registerComponent","grep","deferRender","extend","merge","each","ActionSheetStrategy","DropDownMenuStrategy","ToolbarBase","ChildDefaultTemplate","STRATEGIES","actionSheet","dropDownMenu","TOOLBAR_AUTO_HIDE_ITEM_CLASS","TOOLBAR_AUTO_HIDE_TEXT_CLASS","TOOLBAR_HIDDEN_ITEM","Toolbar","inherit","_getDefaultOptions","callBase","menuItemTemplate","submenuType","menuContainer","_dimensionChanged","dimension","_menuStrategy","toggleMenuVisibility","renderMenuItems","_initTemplates","_templateManager","addDefaultTemplates","actionSheetItem","_initMarkup","_renderMenu","_postProcessRenderItems","_hideOverflowItems","_updateMenuVisibility","_renderItem","index","item","itemContainer","$after","itemElement","locateInMenu","addClass","widget","showText","toggleClass","_getItemsWidth","_getSummaryItemsWidth","_$beforeSection","_$centerSection","_$afterSection","elementWidth","overflowItems","$element","find","length","width","removeClass","itemsWidth","$item","eq","outerWidth","splice","_getMenuItems","that","menuItems","option","_isMenuItem","$hiddenItems","_itemContainer","children","not","_restoreItems","slice","call","map","itemData","_getItemData","$itemContainer","$itemMarkup","push","container","$container","append","_getToolbarItems","_renderMenuStrategy","render","strategyName","_requireDropDownStrategy","strategy","NAME","items","result","_arrangeItems","is","css","margin","float","_","obj","_itemOptionChanged","property","value","_isToolbarItem","repaint","location","_optionChanged","args","name","_invalidate","apply","arguments","handleToolbarVisibilityChange","_changeMenuOption","_getTemplate","widgetOption"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/toolbar.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../core/renderer\";\r\nimport registerComponent from \"../core/component_registrator\";\r\nimport {\r\n    grep,\r\n    deferRender\r\n} from \"../core/utils/common\";\r\nimport {\r\n    extend\r\n} from \"../core/utils/extend\";\r\nimport {\r\n    merge\r\n} from \"../core/utils/array\";\r\nimport {\r\n    each\r\n} from \"../core/utils/iterator\";\r\nimport ActionSheetStrategy from \"./toolbar/ui.toolbar.strategy.action_sheet\";\r\nimport DropDownMenuStrategy from \"./toolbar/ui.toolbar.strategy.drop_down_menu\";\r\nimport ToolbarBase from \"./toolbar/ui.toolbar.base\";\r\nimport {\r\n    ChildDefaultTemplate\r\n} from \"../core/templates/child_default_template\";\r\nvar STRATEGIES = {\r\n    actionSheet: ActionSheetStrategy,\r\n    dropDownMenu: DropDownMenuStrategy\r\n};\r\nvar TOOLBAR_AUTO_HIDE_ITEM_CLASS = \"dx-toolbar-item-auto-hide\";\r\nvar TOOLBAR_AUTO_HIDE_TEXT_CLASS = \"dx-toolbar-text-auto-hide\";\r\nvar TOOLBAR_HIDDEN_ITEM = \"dx-toolbar-item-invisible\";\r\nvar Toolbar = ToolbarBase.inherit({\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            menuItemTemplate: \"menuItem\",\r\n            submenuType: \"dropDownMenu\",\r\n            menuContainer: void 0\r\n        })\r\n    },\r\n    _dimensionChanged: function(dimension) {\r\n        if (\"height\" === dimension) {\r\n            return\r\n        }\r\n        this._menuStrategy.toggleMenuVisibility(false, true);\r\n        this.callBase();\r\n        this._menuStrategy.renderMenuItems()\r\n    },\r\n    _initTemplates: function() {\r\n        this.callBase();\r\n        this._templateManager.addDefaultTemplates({\r\n            actionSheetItem: new ChildDefaultTemplate(\"item\")\r\n        })\r\n    },\r\n    _initMarkup: function() {\r\n        this.callBase();\r\n        this._renderMenu()\r\n    },\r\n    _postProcessRenderItems: function() {\r\n        this._hideOverflowItems();\r\n        this._menuStrategy._updateMenuVisibility();\r\n        this.callBase();\r\n        deferRender(() => {\r\n            this._menuStrategy.renderMenuItems()\r\n        })\r\n    },\r\n    _renderItem: function(index, item, itemContainer, $after) {\r\n        var itemElement = this.callBase(index, item, itemContainer, $after);\r\n        if (\"auto\" === item.locateInMenu) {\r\n            itemElement.addClass(TOOLBAR_AUTO_HIDE_ITEM_CLASS)\r\n        }\r\n        if (\"dxButton\" === item.widget && \"inMenu\" === item.showText) {\r\n            itemElement.toggleClass(TOOLBAR_AUTO_HIDE_TEXT_CLASS)\r\n        }\r\n        return itemElement\r\n    },\r\n    _getItemsWidth: function() {\r\n        return this._getSummaryItemsWidth([this._$beforeSection, this._$centerSection, this._$afterSection])\r\n    },\r\n    _hideOverflowItems: function(elementWidth) {\r\n        var overflowItems = this.$element().find(\".\" + TOOLBAR_AUTO_HIDE_ITEM_CLASS);\r\n        if (!overflowItems.length) {\r\n            return\r\n        }\r\n        elementWidth = elementWidth || this.$element().width();\r\n        $(overflowItems).removeClass(TOOLBAR_HIDDEN_ITEM);\r\n        var itemsWidth = this._getItemsWidth();\r\n        while (overflowItems.length && elementWidth < itemsWidth) {\r\n            var $item = overflowItems.eq(-1);\r\n            itemsWidth -= $item.outerWidth();\r\n            $item.addClass(TOOLBAR_HIDDEN_ITEM);\r\n            overflowItems.splice(-1, 1)\r\n        }\r\n    },\r\n    _getMenuItems: function() {\r\n        var that = this;\r\n        var menuItems = grep(this.option(\"items\") || [], (function(item) {\r\n            return that._isMenuItem(item)\r\n        }));\r\n        var $hiddenItems = this._itemContainer().children(\".\" + TOOLBAR_AUTO_HIDE_ITEM_CLASS + \".\" + TOOLBAR_HIDDEN_ITEM).not(\".dx-state-invisible\");\r\n        this._restoreItems = this._restoreItems || [];\r\n        var overflowItems = [].slice.call($hiddenItems).map(item => {\r\n            var itemData = that._getItemData(item);\r\n            var $itemContainer = $(item).children();\r\n            var $itemMarkup = $itemContainer.children();\r\n            return extend({\r\n                menuItemTemplate: function() {\r\n                    that._restoreItems.push({\r\n                        container: $itemContainer,\r\n                        item: $itemMarkup\r\n                    });\r\n                    var $container = $(\"<div>\").addClass(TOOLBAR_AUTO_HIDE_ITEM_CLASS);\r\n                    return $container.append($itemMarkup)\r\n                }\r\n            }, itemData)\r\n        });\r\n        return merge(overflowItems, menuItems)\r\n    },\r\n    _getToolbarItems: function() {\r\n        var that = this;\r\n        return grep(this.option(\"items\") || [], (function(item) {\r\n            return !that._isMenuItem(item)\r\n        }))\r\n    },\r\n    _renderMenu: function() {\r\n        this._renderMenuStrategy();\r\n        deferRender(() => {\r\n            this._menuStrategy.render()\r\n        })\r\n    },\r\n    _renderMenuStrategy: function() {\r\n        var strategyName = this.option(\"submenuType\");\r\n        if (this._requireDropDownStrategy()) {\r\n            strategyName = \"dropDownMenu\"\r\n        }\r\n        var strategy = STRATEGIES[strategyName];\r\n        if (!(this._menuStrategy && this._menuStrategy.NAME === strategyName)) {\r\n            this._menuStrategy = new strategy(this)\r\n        }\r\n    },\r\n    _requireDropDownStrategy: function() {\r\n        var items = this.option(\"items\") || [];\r\n        var result = false;\r\n        each(items, (function(index, item) {\r\n            if (\"auto\" === item.locateInMenu) {\r\n                result = true\r\n            } else if (\"always\" === item.locateInMenu && item.widget) {\r\n                result = true\r\n            }\r\n        }));\r\n        return result\r\n    },\r\n    _arrangeItems: function() {\r\n        if (this.$element().is(\":hidden\")) {\r\n            return\r\n        }\r\n        this._$centerSection.css({\r\n            margin: \"0 auto\",\r\n            float: \"none\"\r\n        });\r\n        each(this._restoreItems || [], (function(_, obj) {\r\n            $(obj.container).append(obj.item)\r\n        }));\r\n        this._restoreItems = [];\r\n        var elementWidth = this.$element().width();\r\n        this._hideOverflowItems(elementWidth);\r\n        this.callBase(elementWidth)\r\n    },\r\n    _itemOptionChanged: function(item, property, value) {\r\n        if (this._isMenuItem(item)) {\r\n            this._menuStrategy.renderMenuItems()\r\n        } else if (this._isToolbarItem(item)) {\r\n            this.callBase(item, property, value)\r\n        } else {\r\n            this.callBase(item, property, value);\r\n            this._menuStrategy.renderMenuItems()\r\n        }\r\n        if (\"location\" === property) {\r\n            this.repaint()\r\n        }\r\n    },\r\n    _isMenuItem: function(itemData) {\r\n        return \"menu\" === itemData.location || \"always\" === itemData.locateInMenu\r\n    },\r\n    _isToolbarItem: function(itemData) {\r\n        return void 0 === itemData.location || \"never\" === itemData.locateInMenu\r\n    },\r\n    _optionChanged: function(args) {\r\n        var name = args.name;\r\n        var value = args.value;\r\n        switch (name) {\r\n            case \"submenuType\":\r\n                this._invalidate();\r\n                break;\r\n            case \"visible\":\r\n                this.callBase.apply(this, arguments);\r\n                this._menuStrategy.handleToolbarVisibilityChange(value);\r\n                break;\r\n            case \"menuItemTemplate\":\r\n                this._changeMenuOption(\"itemTemplate\", this._getTemplate(value));\r\n                break;\r\n            case \"onItemClick\":\r\n                this._changeMenuOption(name, value);\r\n                this.callBase.apply(this, arguments);\r\n                break;\r\n            case \"menuContainer\":\r\n                this._changeMenuOption(\"container\", value);\r\n                break;\r\n            default:\r\n                this.callBase.apply(this, arguments)\r\n        }\r\n    },\r\n    _changeMenuOption: function(name, value) {\r\n        this._menuStrategy.widgetOption(name, value)\r\n    }\r\n});\r\nregisterComponent(\"dxToolbar\", Toolbar);\r\nexport default Toolbar;\r\n"]},"metadata":{},"sourceType":"module"}