{"ast":null,"code":"/**\r\n * DevExtreme (esm/core/dom_component.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../core/renderer\";\nimport config from \"./config\";\nimport errors from \"./errors\";\nimport windowResizeCallbacks from \"../core/utils/resize_callbacks\";\nimport Component from \"./component\";\nimport { TemplateManager } from \"./template_manager\";\nimport { attachInstanceToElement, getInstanceByElement } from \"./utils/public_component\";\nimport { cleanDataRecursive } from \"./element_data\";\nimport { each } from \"./utils/iterator\";\nimport { extend } from \"./utils/extend\";\nimport { getPublicElement } from \"../core/element\";\nimport { grep, noop } from \"./utils/common\";\nimport { inArray } from \"./utils/array\";\nimport { isString, isDefined } from \"./utils/type\";\nimport { hasWindow } from \"../core/utils/window\";\nimport { resize as resizeEvent, visibility as visibilityEvents } from \"../events/short\";\nvar abstract = Component.abstract;\nvar DOMComponent = Component.inherit({\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      width: void 0,\n      height: void 0,\n      rtlEnabled: config().rtlEnabled,\n      elementAttr: {},\n      disabled: false,\n      integrationOptions: {}\n    }, this._useTemplates() ? TemplateManager.createDefaultOptions() : {});\n  },\n  ctor: function ctor(element, options) {\n    this._customClass = null;\n\n    this._createElement(element);\n\n    attachInstanceToElement(this._$element, this, this._dispose);\n    this.callBase(options);\n  },\n  _createElement: function _createElement(element) {\n    this._$element = $(element);\n  },\n  _getSynchronizableOptionsForCreateComponent: function _getSynchronizableOptionsForCreateComponent() {\n    return [\"rtlEnabled\", \"disabled\", \"templatesRenderAsynchronously\"];\n  },\n  _visibilityChanged: abstract,\n  _dimensionChanged: abstract,\n  _init: function _init() {\n    this.callBase();\n\n    this._attachWindowResizeCallback();\n\n    this._initTemplateManager();\n  },\n  _setOptionsByDevice: function _setOptionsByDevice(instanceCustomRules) {\n    this.callBase([].concat(this.constructor._classCustomRules || [], instanceCustomRules || []));\n  },\n  _isInitialOptionValue: function _isInitialOptionValue(name) {\n    var isCustomOption = this.constructor._classCustomRules && Object.prototype.hasOwnProperty.call(this._convertRulesToOptions(this.constructor._classCustomRules), name);\n    return !isCustomOption && this.callBase(name);\n  },\n  _attachWindowResizeCallback: function _attachWindowResizeCallback() {\n    if (this._isDimensionChangeSupported()) {\n      var windowResizeCallBack = this._windowResizeCallBack = this._dimensionChanged.bind(this);\n\n      windowResizeCallbacks.add(windowResizeCallBack);\n    }\n  },\n  _isDimensionChangeSupported: function _isDimensionChangeSupported() {\n    return this._dimensionChanged !== abstract;\n  },\n  _renderComponent: function _renderComponent() {\n    this._initMarkup();\n\n    hasWindow() && this._render();\n  },\n  _initMarkup: function _initMarkup() {\n    var _ref3 = this.option() || {},\n        rtlEnabled = _ref3.rtlEnabled;\n\n    this._renderElementAttributes();\n\n    this._toggleRTLDirection(rtlEnabled);\n\n    this._renderVisibilityChange();\n\n    this._renderDimensions();\n  },\n  _render: function _render() {\n    this._attachVisibilityChangeHandlers();\n  },\n  _renderElementAttributes: function _renderElementAttributes() {\n    var _ref4 = this.option() || {},\n        elementAttr = _ref4.elementAttr;\n\n    var attributes = extend({}, elementAttr);\n    var classNames = attributes.class;\n    delete attributes.class;\n    this.$element().attr(attributes).removeClass(this._customClass).addClass(classNames);\n    this._customClass = classNames;\n  },\n  _renderVisibilityChange: function _renderVisibilityChange() {\n    if (this._isDimensionChangeSupported()) {\n      this._attachDimensionChangeHandlers();\n    }\n\n    if (this._isVisibilityChangeSupported()) {\n      var $element = this.$element();\n      $element.addClass(\"dx-visibility-change-handler\");\n    }\n  },\n  _renderDimensions: function _renderDimensions() {\n    var $element = this.$element();\n    var element = $element.get(0);\n\n    var width = this._getOptionValue(\"width\", element);\n\n    var height = this._getOptionValue(\"height\", element);\n\n    if (this._isCssUpdateRequired(element, height, width)) {\n      $element.css({\n        width: null === width ? \"\" : width,\n        height: null === height ? \"\" : height\n      });\n    }\n  },\n  _isCssUpdateRequired: function _isCssUpdateRequired(element, height, width) {\n    return !!(isDefined(width) || isDefined(height) || element.style.width || element.style.height);\n  },\n  _attachDimensionChangeHandlers: function _attachDimensionChangeHandlers() {\n    var _this = this;\n\n    var $el = this.$element();\n    var namespace = \"\".concat(this.NAME, \"VisibilityChange\");\n    resizeEvent.off($el, {\n      namespace: namespace\n    });\n    resizeEvent.on($el, function () {\n      return _this._dimensionChanged();\n    }, {\n      namespace: namespace\n    });\n  },\n  _attachVisibilityChangeHandlers: function _attachVisibilityChangeHandlers() {\n    var _this2 = this;\n\n    if (this._isVisibilityChangeSupported()) {\n      var $el = this.$element();\n      var namespace = \"\".concat(this.NAME, \"VisibilityChange\");\n      this._isHidden = !this._isVisible();\n      visibilityEvents.off($el, {\n        namespace: namespace\n      });\n      visibilityEvents.on($el, function () {\n        return _this2._checkVisibilityChanged(\"shown\");\n      }, function () {\n        return _this2._checkVisibilityChanged(\"hiding\");\n      }, {\n        namespace: namespace\n      });\n    }\n  },\n  _isVisible: function _isVisible() {\n    var $element = this.$element();\n    return $element.is(\":visible\");\n  },\n  _checkVisibilityChanged: function _checkVisibilityChanged(action) {\n    var isVisible = this._isVisible();\n\n    if (isVisible) {\n      if (\"hiding\" === action && !this._isHidden) {\n        this._visibilityChanged(false);\n\n        this._isHidden = true;\n      } else if (\"shown\" === action && this._isHidden) {\n        this._isHidden = false;\n\n        this._visibilityChanged(true);\n      }\n    }\n  },\n  _isVisibilityChangeSupported: function _isVisibilityChangeSupported() {\n    return this._visibilityChanged !== abstract && hasWindow();\n  },\n  _clean: noop,\n  _modelByElement: function _modelByElement() {\n    var _this$option = this.option(),\n        modelByElement = _this$option.modelByElement;\n\n    var $element = this.$element();\n    return modelByElement ? modelByElement($element) : void 0;\n  },\n  _invalidate: function _invalidate() {\n    if (this._isUpdateAllowed()) {\n      throw errors.Error(\"E0007\");\n    }\n\n    this._requireRefresh = true;\n  },\n  _refresh: function _refresh() {\n    this._clean();\n\n    this._renderComponent();\n  },\n  _dispose: function _dispose() {\n    this._templateManager && this._templateManager.dispose();\n    this.callBase();\n\n    this._clean();\n\n    this._detachWindowResizeCallback();\n  },\n  _detachWindowResizeCallback: function _detachWindowResizeCallback() {\n    if (this._isDimensionChangeSupported()) {\n      windowResizeCallbacks.remove(this._windowResizeCallBack);\n    }\n  },\n  _toggleRTLDirection: function _toggleRTLDirection(rtl) {\n    var $element = this.$element();\n    $element.toggleClass(\"dx-rtl\", rtl);\n  },\n  _createComponent: function _createComponent(element, component) {\n    var _this3 = this;\n\n    var config = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};\n    var synchronizableOptions = grep(this._getSynchronizableOptionsForCreateComponent(), function (value) {\n      return !(value in config);\n    });\n\n    var _this$option2 = this.option(),\n        integrationOptions = _this$option2.integrationOptions;\n\n    var _this$option3 = this.option(),\n        nestedComponentOptions = _this$option3.nestedComponentOptions;\n\n    nestedComponentOptions = nestedComponentOptions || noop;\n    var nestedComponentConfig = extend({\n      integrationOptions: integrationOptions\n    }, nestedComponentOptions(this));\n    synchronizableOptions.forEach(function (optionName) {\n      return nestedComponentConfig[optionName] = _this3.option(optionName);\n    });\n\n    this._extendConfig(config, nestedComponentConfig);\n\n    var instance = void 0;\n\n    if (isString(component)) {\n      var $element = $(element)[component](config);\n      instance = $element[component](\"instance\");\n    } else if (element) {\n      instance = component.getInstance(element);\n\n      if (instance) {\n        instance.option(config);\n      } else {\n        instance = new component(element, config);\n      }\n    }\n\n    if (instance) {\n      var optionChangedHandler = function optionChangedHandler(_ref) {\n        var name = _ref.name,\n            value = _ref.value;\n\n        if (inArray(name, synchronizableOptions) >= 0) {\n          instance.option(name, value);\n        }\n      };\n\n      this.on(\"optionChanged\", optionChangedHandler);\n      instance.on(\"disposing\", function () {\n        return _this3.off(\"optionChanged\", optionChangedHandler);\n      });\n    }\n\n    return instance;\n  },\n  _extendConfig: function _extendConfig(config, extendConfig) {\n    each(extendConfig, function (key, value) {\n      !Object.prototype.hasOwnProperty.call(config, key) && (config[key] = value);\n    });\n  },\n  _defaultActionConfig: function _defaultActionConfig() {\n    var $element = this.$element();\n\n    var context = this._modelByElement($element);\n\n    return extend(this.callBase(), {\n      context: context\n    });\n  },\n  _defaultActionArgs: function _defaultActionArgs() {\n    var $element = this.$element();\n\n    var model = this._modelByElement($element);\n\n    var element = this.element();\n    return extend(this.callBase(), {\n      element: element,\n      model: model\n    });\n  },\n  _optionChanged: function _optionChanged(args) {\n    switch (args.name) {\n      case \"width\":\n      case \"height\":\n        this._renderDimensions();\n\n        break;\n\n      case \"rtlEnabled\":\n        this._invalidate();\n\n        break;\n\n      case \"elementAttr\":\n        this._renderElementAttributes();\n\n        break;\n\n      case \"disabled\":\n      case \"integrationOptions\":\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _removeAttributes: function _removeAttributes(element) {\n    var attrs = element.attributes;\n\n    for (var i = attrs.length - 1; i >= 0; i--) {\n      var attr = attrs[i];\n\n      if (attr) {\n        var name = attr.name;\n\n        if (!name.indexOf(\"aria-\") || -1 !== name.indexOf(\"dx-\") || \"role\" === name || \"style\" === name || \"tabindex\" === name) {\n          element.removeAttribute(name);\n        }\n      }\n    }\n  },\n  _removeClasses: function _removeClasses(element) {\n    element.className = element.className.split(\" \").filter(function (cssClass) {\n      return 0 !== cssClass.lastIndexOf(\"dx-\", 0);\n    }).join(\" \");\n  },\n  _updateDOMComponent: function _updateDOMComponent(renderRequired) {\n    if (renderRequired) {\n      this._renderComponent();\n    } else if (this._requireRefresh) {\n      this._requireRefresh = false;\n\n      this._refresh();\n    }\n  },\n  endUpdate: function endUpdate() {\n    var renderRequired = this._isInitializingRequired();\n\n    this.callBase();\n    this._isUpdateAllowed() && this._updateDOMComponent(renderRequired);\n  },\n  $element: function $element() {\n    return this._$element;\n  },\n  element: function element() {\n    var $element = this.$element();\n    return getPublicElement($element);\n  },\n  dispose: function dispose() {\n    var element = this.$element().get(0);\n    cleanDataRecursive(element, true);\n    element.textContent = \"\";\n\n    this._removeAttributes(element);\n\n    this._removeClasses(element);\n  },\n  resetOption: function resetOption(optionName) {\n    this.callBase(optionName);\n\n    if (\"width\" === optionName || \"height\" === optionName) {\n      var initialOption = this.initialOption(optionName);\n      !isDefined(initialOption) && this.$element().css(optionName, \"\");\n    }\n  },\n  _getAnonymousTemplateName: function _getAnonymousTemplateName() {\n    return;\n  },\n  _initTemplateManager: function _initTemplateManager() {\n    if (this._templateManager || !this._useTemplates()) {\n      return;\n    }\n\n    var _this$option4 = this.option(),\n        _this$option4$integra = _this$option4.integrationOptions,\n        integrationOptions = _this$option4$integra === void 0 ? {} : _this$option4$integra;\n\n    var createTemplate = integrationOptions.createTemplate;\n    this._templateManager = new TemplateManager(createTemplate, this._getAnonymousTemplateName());\n\n    this._initTemplates();\n  },\n  _initTemplates: function _initTemplates() {\n    var _this4 = this;\n\n    var _this$_templateManage = this._templateManager.extractTemplates(this.$element()),\n        templates = _this$_templateManage.templates,\n        anonymousTemplateMeta = _this$_templateManage.anonymousTemplateMeta;\n\n    var anonymousTemplate = this.option(\"integrationOptions.templates.\".concat(anonymousTemplateMeta.name));\n    templates.forEach(function (_ref2) {\n      var name = _ref2.name,\n          template = _ref2.template;\n\n      _this4._options.silent(\"integrationOptions.templates.\".concat(name), template);\n    });\n\n    if (anonymousTemplateMeta.name && !anonymousTemplate) {\n      this._options.silent(\"integrationOptions.templates.\".concat(anonymousTemplateMeta.name), anonymousTemplateMeta.template);\n\n      this._options.silent(\"_hasAnonymousTemplateContent\", true);\n    }\n  },\n  _getTemplateByOption: function _getTemplateByOption(optionName) {\n    return this._getTemplate(this.option(optionName));\n  },\n  _getTemplate: function _getTemplate(templateSource) {\n    var templates = this.option(\"integrationOptions.templates\");\n    var isAsyncTemplate = this.option(\"templatesRenderAsynchronously\");\n    var skipTemplates = this.option(\"integrationOptions.skipTemplates\");\n    return this._templateManager.getTemplate(templateSource, templates, {\n      isAsyncTemplate: isAsyncTemplate,\n      skipTemplates: skipTemplates\n    }, this);\n  },\n  _saveTemplate: function _saveTemplate(name, template) {\n    this._setOptionWithoutOptionChange(\"integrationOptions.templates.\" + name, this._templateManager._createTemplate(template));\n  },\n  _useTemplates: function _useTemplates() {\n    return true;\n  }\n});\n\nDOMComponent.getInstance = function (element) {\n  return getInstanceByElement($(element), this);\n};\n\nDOMComponent.defaultOptions = function (rule) {\n  this._classCustomRules = this._classCustomRules || [];\n\n  this._classCustomRules.push(rule);\n};\n\nexport default DOMComponent;","map":{"version":3,"sources":["C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/devextreme/esm/core/dom_component.js"],"names":["$","config","errors","windowResizeCallbacks","Component","TemplateManager","attachInstanceToElement","getInstanceByElement","cleanDataRecursive","each","extend","getPublicElement","grep","noop","inArray","isString","isDefined","hasWindow","resize","resizeEvent","visibility","visibilityEvents","abstract","DOMComponent","inherit","_getDefaultOptions","callBase","width","height","rtlEnabled","elementAttr","disabled","integrationOptions","_useTemplates","createDefaultOptions","ctor","element","options","_customClass","_createElement","_$element","_dispose","_getSynchronizableOptionsForCreateComponent","_visibilityChanged","_dimensionChanged","_init","_attachWindowResizeCallback","_initTemplateManager","_setOptionsByDevice","instanceCustomRules","concat","constructor","_classCustomRules","_isInitialOptionValue","name","isCustomOption","Object","prototype","hasOwnProperty","call","_convertRulesToOptions","_isDimensionChangeSupported","windowResizeCallBack","_windowResizeCallBack","bind","add","_renderComponent","_initMarkup","_render","option","_renderElementAttributes","_toggleRTLDirection","_renderVisibilityChange","_renderDimensions","_attachVisibilityChangeHandlers","attributes","classNames","class","$element","attr","removeClass","addClass","_attachDimensionChangeHandlers","_isVisibilityChangeSupported","get","_getOptionValue","_isCssUpdateRequired","css","style","$el","namespace","NAME","off","on","_isHidden","_isVisible","_checkVisibilityChanged","is","action","isVisible","_clean","_modelByElement","modelByElement","_invalidate","_isUpdateAllowed","Error","_requireRefresh","_refresh","_templateManager","dispose","_detachWindowResizeCallback","remove","rtl","toggleClass","_createComponent","component","arguments","length","synchronizableOptions","value","nestedComponentOptions","nestedComponentConfig","forEach","optionName","_extendConfig","instance","getInstance","optionChangedHandler","_ref","extendConfig","key","_defaultActionConfig","context","_defaultActionArgs","model","_optionChanged","args","_removeAttributes","attrs","i","indexOf","removeAttribute","_removeClasses","className","split","filter","cssClass","lastIndexOf","join","_updateDOMComponent","renderRequired","endUpdate","_isInitializingRequired","textContent","resetOption","initialOption","_getAnonymousTemplateName","createTemplate","_initTemplates","extractTemplates","templates","anonymousTemplateMeta","anonymousTemplate","_ref2","template","_options","silent","_getTemplateByOption","_getTemplate","templateSource","isAsyncTemplate","skipTemplates","getTemplate","_saveTemplate","_setOptionWithoutOptionChange","_createTemplate","defaultOptions","rule","push"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/core/dom_component.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../core/renderer\";\r\nimport config from \"./config\";\r\nimport errors from \"./errors\";\r\nimport windowResizeCallbacks from \"../core/utils/resize_callbacks\";\r\nimport Component from \"./component\";\r\nimport {\r\n    TemplateManager\r\n} from \"./template_manager\";\r\nimport {\r\n    attachInstanceToElement,\r\n    getInstanceByElement\r\n} from \"./utils/public_component\";\r\nimport {\r\n    cleanDataRecursive\r\n} from \"./element_data\";\r\nimport {\r\n    each\r\n} from \"./utils/iterator\";\r\nimport {\r\n    extend\r\n} from \"./utils/extend\";\r\nimport {\r\n    getPublicElement\r\n} from \"../core/element\";\r\nimport {\r\n    grep,\r\n    noop\r\n} from \"./utils/common\";\r\nimport {\r\n    inArray\r\n} from \"./utils/array\";\r\nimport {\r\n    isString,\r\n    isDefined\r\n} from \"./utils/type\";\r\nimport {\r\n    hasWindow\r\n} from \"../core/utils/window\";\r\nimport {\r\n    resize as resizeEvent,\r\n    visibility as visibilityEvents\r\n} from \"../events/short\";\r\nvar {\r\n    abstract: abstract\r\n} = Component;\r\nvar DOMComponent = Component.inherit({\r\n    _getDefaultOptions() {\r\n        return extend(this.callBase(), {\r\n            width: void 0,\r\n            height: void 0,\r\n            rtlEnabled: config().rtlEnabled,\r\n            elementAttr: {},\r\n            disabled: false,\r\n            integrationOptions: {}\r\n        }, this._useTemplates() ? TemplateManager.createDefaultOptions() : {})\r\n    },\r\n    ctor(element, options) {\r\n        this._customClass = null;\r\n        this._createElement(element);\r\n        attachInstanceToElement(this._$element, this, this._dispose);\r\n        this.callBase(options)\r\n    },\r\n    _createElement(element) {\r\n        this._$element = $(element)\r\n    },\r\n    _getSynchronizableOptionsForCreateComponent: () => [\"rtlEnabled\", \"disabled\", \"templatesRenderAsynchronously\"],\r\n    _visibilityChanged: abstract,\r\n    _dimensionChanged: abstract,\r\n    _init() {\r\n        this.callBase();\r\n        this._attachWindowResizeCallback();\r\n        this._initTemplateManager()\r\n    },\r\n    _setOptionsByDevice(instanceCustomRules) {\r\n        this.callBase([].concat(this.constructor._classCustomRules || [], instanceCustomRules || []))\r\n    },\r\n    _isInitialOptionValue(name) {\r\n        var isCustomOption = this.constructor._classCustomRules && Object.prototype.hasOwnProperty.call(this._convertRulesToOptions(this.constructor._classCustomRules), name);\r\n        return !isCustomOption && this.callBase(name)\r\n    },\r\n    _attachWindowResizeCallback() {\r\n        if (this._isDimensionChangeSupported()) {\r\n            var windowResizeCallBack = this._windowResizeCallBack = this._dimensionChanged.bind(this);\r\n            windowResizeCallbacks.add(windowResizeCallBack)\r\n        }\r\n    },\r\n    _isDimensionChangeSupported() {\r\n        return this._dimensionChanged !== abstract\r\n    },\r\n    _renderComponent() {\r\n        this._initMarkup();\r\n        hasWindow() && this._render()\r\n    },\r\n    _initMarkup() {\r\n        var {\r\n            rtlEnabled: rtlEnabled\r\n        } = this.option() || {};\r\n        this._renderElementAttributes();\r\n        this._toggleRTLDirection(rtlEnabled);\r\n        this._renderVisibilityChange();\r\n        this._renderDimensions()\r\n    },\r\n    _render() {\r\n        this._attachVisibilityChangeHandlers()\r\n    },\r\n    _renderElementAttributes() {\r\n        var {\r\n            elementAttr: elementAttr\r\n        } = this.option() || {};\r\n        var attributes = extend({}, elementAttr);\r\n        var classNames = attributes.class;\r\n        delete attributes.class;\r\n        this.$element().attr(attributes).removeClass(this._customClass).addClass(classNames);\r\n        this._customClass = classNames\r\n    },\r\n    _renderVisibilityChange() {\r\n        if (this._isDimensionChangeSupported()) {\r\n            this._attachDimensionChangeHandlers()\r\n        }\r\n        if (this._isVisibilityChangeSupported()) {\r\n            var $element = this.$element();\r\n            $element.addClass(\"dx-visibility-change-handler\")\r\n        }\r\n    },\r\n    _renderDimensions() {\r\n        var $element = this.$element();\r\n        var element = $element.get(0);\r\n        var width = this._getOptionValue(\"width\", element);\r\n        var height = this._getOptionValue(\"height\", element);\r\n        if (this._isCssUpdateRequired(element, height, width)) {\r\n            $element.css({\r\n                width: null === width ? \"\" : width,\r\n                height: null === height ? \"\" : height\r\n            })\r\n        }\r\n    },\r\n    _isCssUpdateRequired: (element, height, width) => !!(isDefined(width) || isDefined(height) || element.style.width || element.style.height),\r\n    _attachDimensionChangeHandlers() {\r\n        var $el = this.$element();\r\n        var namespace = \"\".concat(this.NAME, \"VisibilityChange\");\r\n        resizeEvent.off($el, {\r\n            namespace: namespace\r\n        });\r\n        resizeEvent.on($el, () => this._dimensionChanged(), {\r\n            namespace: namespace\r\n        })\r\n    },\r\n    _attachVisibilityChangeHandlers() {\r\n        if (this._isVisibilityChangeSupported()) {\r\n            var $el = this.$element();\r\n            var namespace = \"\".concat(this.NAME, \"VisibilityChange\");\r\n            this._isHidden = !this._isVisible();\r\n            visibilityEvents.off($el, {\r\n                namespace: namespace\r\n            });\r\n            visibilityEvents.on($el, () => this._checkVisibilityChanged(\"shown\"), () => this._checkVisibilityChanged(\"hiding\"), {\r\n                namespace: namespace\r\n            })\r\n        }\r\n    },\r\n    _isVisible() {\r\n        var $element = this.$element();\r\n        return $element.is(\":visible\")\r\n    },\r\n    _checkVisibilityChanged(action) {\r\n        var isVisible = this._isVisible();\r\n        if (isVisible) {\r\n            if (\"hiding\" === action && !this._isHidden) {\r\n                this._visibilityChanged(false);\r\n                this._isHidden = true\r\n            } else if (\"shown\" === action && this._isHidden) {\r\n                this._isHidden = false;\r\n                this._visibilityChanged(true)\r\n            }\r\n        }\r\n    },\r\n    _isVisibilityChangeSupported() {\r\n        return this._visibilityChanged !== abstract && hasWindow()\r\n    },\r\n    _clean: noop,\r\n    _modelByElement() {\r\n        var {\r\n            modelByElement: modelByElement\r\n        } = this.option();\r\n        var $element = this.$element();\r\n        return modelByElement ? modelByElement($element) : void 0\r\n    },\r\n    _invalidate() {\r\n        if (this._isUpdateAllowed()) {\r\n            throw errors.Error(\"E0007\")\r\n        }\r\n        this._requireRefresh = true\r\n    },\r\n    _refresh() {\r\n        this._clean();\r\n        this._renderComponent()\r\n    },\r\n    _dispose() {\r\n        this._templateManager && this._templateManager.dispose();\r\n        this.callBase();\r\n        this._clean();\r\n        this._detachWindowResizeCallback()\r\n    },\r\n    _detachWindowResizeCallback() {\r\n        if (this._isDimensionChangeSupported()) {\r\n            windowResizeCallbacks.remove(this._windowResizeCallBack)\r\n        }\r\n    },\r\n    _toggleRTLDirection(rtl) {\r\n        var $element = this.$element();\r\n        $element.toggleClass(\"dx-rtl\", rtl)\r\n    },\r\n    _createComponent(element, component) {\r\n        var config = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};\r\n        var synchronizableOptions = grep(this._getSynchronizableOptionsForCreateComponent(), value => !(value in config));\r\n        var {\r\n            integrationOptions: integrationOptions\r\n        } = this.option();\r\n        var {\r\n            nestedComponentOptions: nestedComponentOptions\r\n        } = this.option();\r\n        nestedComponentOptions = nestedComponentOptions || noop;\r\n        var nestedComponentConfig = extend({\r\n            integrationOptions: integrationOptions\r\n        }, nestedComponentOptions(this));\r\n        synchronizableOptions.forEach(optionName => nestedComponentConfig[optionName] = this.option(optionName));\r\n        this._extendConfig(config, nestedComponentConfig);\r\n        var instance = void 0;\r\n        if (isString(component)) {\r\n            var $element = $(element)[component](config);\r\n            instance = $element[component](\"instance\")\r\n        } else if (element) {\r\n            instance = component.getInstance(element);\r\n            if (instance) {\r\n                instance.option(config)\r\n            } else {\r\n                instance = new component(element, config)\r\n            }\r\n        }\r\n        if (instance) {\r\n            var optionChangedHandler = _ref => {\r\n                var {\r\n                    name: name,\r\n                    value: value\r\n                } = _ref;\r\n                if (inArray(name, synchronizableOptions) >= 0) {\r\n                    instance.option(name, value)\r\n                }\r\n            };\r\n            this.on(\"optionChanged\", optionChangedHandler);\r\n            instance.on(\"disposing\", () => this.off(\"optionChanged\", optionChangedHandler))\r\n        }\r\n        return instance\r\n    },\r\n    _extendConfig(config, extendConfig) {\r\n        each(extendConfig, (key, value) => {\r\n            !Object.prototype.hasOwnProperty.call(config, key) && (config[key] = value)\r\n        })\r\n    },\r\n    _defaultActionConfig() {\r\n        var $element = this.$element();\r\n        var context = this._modelByElement($element);\r\n        return extend(this.callBase(), {\r\n            context: context\r\n        })\r\n    },\r\n    _defaultActionArgs() {\r\n        var $element = this.$element();\r\n        var model = this._modelByElement($element);\r\n        var element = this.element();\r\n        return extend(this.callBase(), {\r\n            element: element,\r\n            model: model\r\n        })\r\n    },\r\n    _optionChanged(args) {\r\n        switch (args.name) {\r\n            case \"width\":\r\n            case \"height\":\r\n                this._renderDimensions();\r\n                break;\r\n            case \"rtlEnabled\":\r\n                this._invalidate();\r\n                break;\r\n            case \"elementAttr\":\r\n                this._renderElementAttributes();\r\n                break;\r\n            case \"disabled\":\r\n            case \"integrationOptions\":\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _removeAttributes(element) {\r\n        var attrs = element.attributes;\r\n        for (var i = attrs.length - 1; i >= 0; i--) {\r\n            var attr = attrs[i];\r\n            if (attr) {\r\n                var {\r\n                    name: name\r\n                } = attr;\r\n                if (!name.indexOf(\"aria-\") || -1 !== name.indexOf(\"dx-\") || \"role\" === name || \"style\" === name || \"tabindex\" === name) {\r\n                    element.removeAttribute(name)\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _removeClasses(element) {\r\n        element.className = element.className.split(\" \").filter(cssClass => 0 !== cssClass.lastIndexOf(\"dx-\", 0)).join(\" \")\r\n    },\r\n    _updateDOMComponent(renderRequired) {\r\n        if (renderRequired) {\r\n            this._renderComponent()\r\n        } else if (this._requireRefresh) {\r\n            this._requireRefresh = false;\r\n            this._refresh()\r\n        }\r\n    },\r\n    endUpdate() {\r\n        var renderRequired = this._isInitializingRequired();\r\n        this.callBase();\r\n        this._isUpdateAllowed() && this._updateDOMComponent(renderRequired)\r\n    },\r\n    $element() {\r\n        return this._$element\r\n    },\r\n    element() {\r\n        var $element = this.$element();\r\n        return getPublicElement($element)\r\n    },\r\n    dispose() {\r\n        var element = this.$element().get(0);\r\n        cleanDataRecursive(element, true);\r\n        element.textContent = \"\";\r\n        this._removeAttributes(element);\r\n        this._removeClasses(element)\r\n    },\r\n    resetOption(optionName) {\r\n        this.callBase(optionName);\r\n        if (\"width\" === optionName || \"height\" === optionName) {\r\n            var initialOption = this.initialOption(optionName);\r\n            !isDefined(initialOption) && this.$element().css(optionName, \"\")\r\n        }\r\n    },\r\n    _getAnonymousTemplateName() {\r\n        return\r\n    },\r\n    _initTemplateManager() {\r\n        if (this._templateManager || !this._useTemplates()) {\r\n            return\r\n        }\r\n        var {\r\n            integrationOptions: integrationOptions = {}\r\n        } = this.option();\r\n        var {\r\n            createTemplate: createTemplate\r\n        } = integrationOptions;\r\n        this._templateManager = new TemplateManager(createTemplate, this._getAnonymousTemplateName());\r\n        this._initTemplates()\r\n    },\r\n    _initTemplates() {\r\n        var {\r\n            templates: templates,\r\n            anonymousTemplateMeta: anonymousTemplateMeta\r\n        } = this._templateManager.extractTemplates(this.$element());\r\n        var anonymousTemplate = this.option(\"integrationOptions.templates.\".concat(anonymousTemplateMeta.name));\r\n        templates.forEach(_ref2 => {\r\n            var {\r\n                name: name,\r\n                template: template\r\n            } = _ref2;\r\n            this._options.silent(\"integrationOptions.templates.\".concat(name), template)\r\n        });\r\n        if (anonymousTemplateMeta.name && !anonymousTemplate) {\r\n            this._options.silent(\"integrationOptions.templates.\".concat(anonymousTemplateMeta.name), anonymousTemplateMeta.template);\r\n            this._options.silent(\"_hasAnonymousTemplateContent\", true)\r\n        }\r\n    },\r\n    _getTemplateByOption(optionName) {\r\n        return this._getTemplate(this.option(optionName))\r\n    },\r\n    _getTemplate(templateSource) {\r\n        var templates = this.option(\"integrationOptions.templates\");\r\n        var isAsyncTemplate = this.option(\"templatesRenderAsynchronously\");\r\n        var skipTemplates = this.option(\"integrationOptions.skipTemplates\");\r\n        return this._templateManager.getTemplate(templateSource, templates, {\r\n            isAsyncTemplate: isAsyncTemplate,\r\n            skipTemplates: skipTemplates\r\n        }, this)\r\n    },\r\n    _saveTemplate(name, template) {\r\n        this._setOptionWithoutOptionChange(\"integrationOptions.templates.\" + name, this._templateManager._createTemplate(template))\r\n    },\r\n    _useTemplates: () => true\r\n});\r\nDOMComponent.getInstance = function(element) {\r\n    return getInstanceByElement($(element), this)\r\n};\r\nDOMComponent.defaultOptions = function(rule) {\r\n    this._classCustomRules = this._classCustomRules || [];\r\n    this._classCustomRules.push(rule)\r\n};\r\nexport default DOMComponent;\r\n"]},"metadata":{},"sourceType":"module"}