{"ast":null,"code":"/**\r\n * DevExtreme (esm/viz/vector_map/legend.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { extend } from \"../../core/utils/extend\";\nimport { each } from \"../../core/utils/iterator\";\nimport { clone } from \"../../core/utils/object\";\nvar _extend = extend;\nvar _each = each;\nimport { Legend as _BaseLegend } from \"../components/legend\";\nvar unknownSource = {\n  category: \"UNKNOWN\",\n  name: \"UNKNOWN\"\n};\n\nfunction buildData(partition, values, field) {\n  var i;\n  var ii = values.length;\n  var list = [];\n  var item;\n\n  for (i = 0; i < ii; ++i) {\n    list[i] = item = {\n      start: partition[i],\n      end: partition[i + 1],\n      index: i\n    };\n    item[field] = values[i];\n    item.states = {\n      normal: {\n        fill: item.color\n      }\n    };\n    item.visible = true;\n  }\n\n  return list;\n}\n\nvar Legend = function Legend(parameters) {\n  var that = this;\n  that._params = parameters;\n  that._root = parameters.renderer.g().attr({\n    class: \"dxm-legend\"\n  }).linkOn(parameters.container, {\n    name: \"legend\",\n    after: \"legend-base\"\n  }).enableLinks().linkAppend();\n  parameters.layoutControl.addItem(that);\n\n  _BaseLegend.call(that, {\n    renderer: parameters.renderer,\n    widget: parameters.widget,\n    group: that._root,\n    backgroundClass: null,\n    itemsGroupClass: null,\n    textField: \"text\",\n    getFormatObject: function getFormatObject(data) {\n      return data;\n    }\n  });\n\n  that._onDataChanged = function (data) {\n    that._updateData(data);\n  };\n};\n\nLegend.prototype = _extend(clone(_BaseLegend.prototype), {\n  constructor: Legend,\n  dispose: function dispose() {\n    var that = this;\n\n    that._params.layoutControl.removeItem(that);\n\n    that._unbindData();\n\n    that._root.linkRemove().linkOff();\n\n    that._params = that._root = that._onDataChanged = null;\n    return _BaseLegend.prototype.dispose.apply(that, arguments);\n  },\n  resize: function resize(size) {\n    this._params.notifyDirty();\n\n    if (null === size) {\n      this.erase();\n    } else {\n      this.draw(size.width, size.height);\n    }\n\n    this._params.notifyReady();\n  },\n  locate: _BaseLegend.prototype.shift,\n  _updateData: function _updateData(data) {\n    this._options.defaultColor = data && data.defaultColor;\n    this.update(data ? buildData(data.partition, data.values, this._dataName) : [], this._options, this._params.themeManager.theme(\"legend\").title);\n    this.updateLayout();\n  },\n  _unbindData: function _unbindData() {\n    if (this._dataCategory) {\n      this._params.dataExchanger.unbind(this._dataCategory, this._dataName, this._onDataChanged);\n    }\n  },\n  _bindData: function _bindData(arg) {\n    this._params.dataExchanger.bind(this._dataCategory = arg.category, this._dataName = arg.name, this._onDataChanged);\n  },\n  setOptions: function setOptions(options) {\n    this.update(this._data, options, this._params.themeManager.theme(\"legend\").title);\n\n    this._unbindData();\n\n    var source = options.source;\n\n    this._bindData(source ? {\n      category: source.layer,\n      name: source.grouping\n    } : unknownSource);\n\n    this.updateLayout();\n    return this;\n  }\n});\nexport function LegendsControl(parameters) {\n  this._params = parameters;\n  this._items = [];\n  parameters.container.virtualLink(\"legend-base\");\n}\nLegendsControl.prototype = {\n  constructor: LegendsControl,\n  dispose: function dispose() {\n    _each(this._items, function (_, item) {\n      item.dispose();\n    });\n\n    this._params = this._items = null;\n  },\n  setOptions: function setOptions(options) {\n    var optionList = options && options.length ? options : [];\n    var items = this._items;\n    var i;\n    var ii = optionList.length;\n    var params = this._params;\n    var theme = params.themeManager.theme(\"legend\");\n\n    for (i = items.length; i < ii; ++i) {\n      items[i] = new Legend(params);\n    }\n\n    for (i = items.length - 1; i >= ii; --i) {\n      items[i].dispose();\n      items.splice(i, 1);\n    }\n\n    params.layoutControl.suspend();\n\n    for (i = 0; i < ii; ++i) {\n      items[i].setOptions(_extend(true, {}, theme, optionList[i]));\n    }\n\n    params.layoutControl.resume();\n  }\n};","map":{"version":3,"sources":["C:/Users/user/source/repos/ReportingPortal/6.3.0/angular/node_modules/devextreme/esm/viz/vector_map/legend.js"],"names":["extend","each","clone","_extend","_each","Legend","_BaseLegend","unknownSource","category","name","buildData","partition","values","field","i","ii","length","list","item","start","end","index","states","normal","fill","color","visible","parameters","that","_params","_root","renderer","g","attr","class","linkOn","container","after","enableLinks","linkAppend","layoutControl","addItem","call","widget","group","backgroundClass","itemsGroupClass","textField","getFormatObject","data","_onDataChanged","_updateData","prototype","constructor","dispose","removeItem","_unbindData","linkRemove","linkOff","apply","arguments","resize","size","notifyDirty","erase","draw","width","height","notifyReady","locate","shift","_options","defaultColor","update","_dataName","themeManager","theme","title","updateLayout","_dataCategory","dataExchanger","unbind","_bindData","arg","bind","setOptions","options","_data","source","layer","grouping","LegendsControl","_items","virtualLink","_","optionList","items","params","splice","suspend","resume"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/viz/vector_map/legend.js)\r\n * Version: 21.1.3\r\n * Build date: Tue May 18 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport {\r\n    clone\r\n} from \"../../core/utils/object\";\r\nvar _extend = extend;\r\nvar _each = each;\r\nimport {\r\n    Legend as _BaseLegend\r\n} from \"../components/legend\";\r\nvar unknownSource = {\r\n    category: \"UNKNOWN\",\r\n    name: \"UNKNOWN\"\r\n};\r\n\r\nfunction buildData(partition, values, field) {\r\n    var i;\r\n    var ii = values.length;\r\n    var list = [];\r\n    var item;\r\n    for (i = 0; i < ii; ++i) {\r\n        list[i] = item = {\r\n            start: partition[i],\r\n            end: partition[i + 1],\r\n            index: i\r\n        };\r\n        item[field] = values[i];\r\n        item.states = {\r\n            normal: {\r\n                fill: item.color\r\n            }\r\n        };\r\n        item.visible = true\r\n    }\r\n    return list\r\n}\r\nvar Legend = function(parameters) {\r\n    var that = this;\r\n    that._params = parameters;\r\n    that._root = parameters.renderer.g().attr({\r\n        class: \"dxm-legend\"\r\n    }).linkOn(parameters.container, {\r\n        name: \"legend\",\r\n        after: \"legend-base\"\r\n    }).enableLinks().linkAppend();\r\n    parameters.layoutControl.addItem(that);\r\n    _BaseLegend.call(that, {\r\n        renderer: parameters.renderer,\r\n        widget: parameters.widget,\r\n        group: that._root,\r\n        backgroundClass: null,\r\n        itemsGroupClass: null,\r\n        textField: \"text\",\r\n        getFormatObject: function(data) {\r\n            return data\r\n        }\r\n    });\r\n    that._onDataChanged = function(data) {\r\n        that._updateData(data)\r\n    }\r\n};\r\nLegend.prototype = _extend(clone(_BaseLegend.prototype), {\r\n    constructor: Legend,\r\n    dispose: function() {\r\n        var that = this;\r\n        that._params.layoutControl.removeItem(that);\r\n        that._unbindData();\r\n        that._root.linkRemove().linkOff();\r\n        that._params = that._root = that._onDataChanged = null;\r\n        return _BaseLegend.prototype.dispose.apply(that, arguments)\r\n    },\r\n    resize: function(size) {\r\n        this._params.notifyDirty();\r\n        if (null === size) {\r\n            this.erase()\r\n        } else {\r\n            this.draw(size.width, size.height)\r\n        }\r\n        this._params.notifyReady()\r\n    },\r\n    locate: _BaseLegend.prototype.shift,\r\n    _updateData: function(data) {\r\n        this._options.defaultColor = data && data.defaultColor;\r\n        this.update(data ? buildData(data.partition, data.values, this._dataName) : [], this._options, this._params.themeManager.theme(\"legend\").title);\r\n        this.updateLayout()\r\n    },\r\n    _unbindData: function() {\r\n        if (this._dataCategory) {\r\n            this._params.dataExchanger.unbind(this._dataCategory, this._dataName, this._onDataChanged)\r\n        }\r\n    },\r\n    _bindData: function(arg) {\r\n        this._params.dataExchanger.bind(this._dataCategory = arg.category, this._dataName = arg.name, this._onDataChanged)\r\n    },\r\n    setOptions: function(options) {\r\n        this.update(this._data, options, this._params.themeManager.theme(\"legend\").title);\r\n        this._unbindData();\r\n        var source = options.source;\r\n        this._bindData(source ? {\r\n            category: source.layer,\r\n            name: source.grouping\r\n        } : unknownSource);\r\n        this.updateLayout();\r\n        return this\r\n    }\r\n});\r\nexport function LegendsControl(parameters) {\r\n    this._params = parameters;\r\n    this._items = [];\r\n    parameters.container.virtualLink(\"legend-base\")\r\n}\r\nLegendsControl.prototype = {\r\n    constructor: LegendsControl,\r\n    dispose: function() {\r\n        _each(this._items, (function(_, item) {\r\n            item.dispose()\r\n        }));\r\n        this._params = this._items = null\r\n    },\r\n    setOptions: function(options) {\r\n        var optionList = options && options.length ? options : [];\r\n        var items = this._items;\r\n        var i;\r\n        var ii = optionList.length;\r\n        var params = this._params;\r\n        var theme = params.themeManager.theme(\"legend\");\r\n        for (i = items.length; i < ii; ++i) {\r\n            items[i] = new Legend(params)\r\n        }\r\n        for (i = items.length - 1; i >= ii; --i) {\r\n            items[i].dispose();\r\n            items.splice(i, 1)\r\n        }\r\n        params.layoutControl.suspend();\r\n        for (i = 0; i < ii; ++i) {\r\n            items[i].setOptions(_extend(true, {}, theme, optionList[i]))\r\n        }\r\n        params.layoutControl.resume()\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}